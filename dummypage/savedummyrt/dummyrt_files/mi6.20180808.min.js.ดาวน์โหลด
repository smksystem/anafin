!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([/*!*************************!*\
  !*** ./dist/src/mi6.js ***!
  \*************************/
function(e,t,i){function r(e){return void 0===e||null===e||isNaN(e)}function n(e,t){if(r(e))return"";if(r(t))return""+e;var i="0,0."+h(t);return numeral(e).format(i)}function o(e){if(r(e))return"";var t="0,0.[0000]'}";return numeral(e).format(t)}function s(e,t,i){return i?n(e,t):p(e)}function a(){return n}function c(){return p}function l(e,t){return t.length>0?t:n(e,2)}function u(e,t,i){return i.isLimit()?n(e,t):i.fullname}function d(e,t,i){return i&&!i.isLimit()?i.fullname:n(e,t)}function h(e){return new Array(e+1).join("0")}function p(e){return r(e)?"":numeral(e).format("0,0")}function m(e,t){var i=e>0?"+":"";return""+i+n(e,t)}function v(e){var t=e>0?"+":"";return""+t+o(e)}function f(e){var t=e>0?"+":"",i=""+t+y(e);return""===i?"":""+i}function y(e){var t=n(e,2);return""===t?"":t+"%"}function g(e,t,i){var r=i===Ch.USD?"$ ":"";return""+r+n(e,t)}function S(e,t,i){return i===oe.ATO?"ATO":i===oe.ATC?"ATC":n(e,t)}function b(e){return e<10?"0"+e:""+e}function C(e){if(isNaN(e))return"";if(e>999999999){var t=Math.round(e/1e6);return numeral(t).format("0,0")+"M"}if(e>9999999){var t=Math.round(e/1e3);return numeral(t).format("0,0")+"K"}return""+numeral(e).format("0,0")}function E(e,t){return 0===e&&0!==t}function A(e){return function(t,i,r,n){return E(r,n)?"N/A":e(t,i)}}function w(e){return function(t,i,n,o){if(!r(n)){var s=e(t,i);return E(n,o)?"(N/A)":""!==s?"("+s+")":""}return""}}function T(e){return A(e("change"))}function D(e){return A(e("percentChange"))}function I(e){return w(e("percentChange"))}function P(e){var t=e("price");return function(e,i){return 0===e?"":t(e,i)}}function O(e){var t=e("volume");return function(e,i){return isNaN(i)?"":t(e)}}function k(e,t){return 4===(4&t)?e.readLong():e.readInt()}function $(e,t){return 2===(2&t)?e.readInt():e.readShort()}function L(e,t,i){return $(e,t)/Math.pow(10,i)}function N(e,t){return e.readInt()/Math.pow(10,t)}function M(e,t){return e.readShort()/Math.pow(10,t)}function R(e,t){return 1===(1&t)?e.readShort():e.readByte()}function _(e,t){return t===ce.FUTURES||t===ce.OPTIONS?e.readByte():un.DEFAULT_PRICE_DIGIT}function V(e){return{restrict:"A",link:function(e,t,i){var r,n,o=Math.random();e.$watch(i.value,function(e,i){void 0===i||void 0===e||isNaN(e)||e===i||(clearTimeout(n),n=setTimeout(function(){t.removeClass("highlight-cell"),r&&clearTimeout(r),t.addClass("highlight-cell"),r=setTimeout(function(){t.removeClass("highlight-cell")},150),n=void 0},150*o))}),e.$on("$destroy",function(){r&&clearTimeout(r),n&&clearTimeout(n),t.removeClass("highlight-cell")})}}}function B(e){return{restrict:"A",link:function(e,t,i){var r,n,o=Math.random();e.$watch(i.value,function(e,i){void 0!==i&&void 0!==e&&e!==i&&(clearTimeout(n),n=setTimeout(function(){t.removeClass("highlight-cell"),r&&clearTimeout(r),t.addClass("highlight-cell"),r=setTimeout(function(){t.removeClass("highlight-cell")},150),n=void 0},150*o))}),e.$on("$destroy",function(){r&&clearTimeout(r),n&&clearTimeout(n),t.removeClass("highlight-cell")})}}}function x(e){return{restrict:"A",link:function(e,t,i){var r,n,o,s="",a=Math.random();e.$watch(i.value,function(e,i){void 0===i||void 0===e||isNaN(e)||e===i||(clearTimeout(o),o=setTimeout(function(){t.removeClass(s),t.removeClass("highlight-cell"),r&&clearTimeout(r),n&&clearTimeout(n),e>i?s="text-blink-volume-up":e<i&&(s="text-blink-volume-down"),t.addClass(s),r=setTimeout(function(){t.removeClass(s)},1e3),t.addClass("highlight-cell"),n=setTimeout(function(){t.removeClass("highlight-cell")},150),o=void 0},150*a))}),e.$on("$destroy",function(){r&&clearTimeout(r),n&&clearTimeout(n),o&&clearTimeout(o),t.removeClass("highlight-cell")})}}}function F(e){return{restrict:"A",link:function(e,t,i){var r,n,o,s="",a=Math.random();e.$watch(i.value,function(c,l){void 0===l||void 0===c||isNaN(c)||c===l||(clearTimeout(o),o=setTimeout(function(){t.removeClass(s),t.removeClass("highlight-cell"),r&&clearTimeout(r),n&&clearTimeout(n);var a=e.$eval(i.ismatch);a?s="text-blink-match":c>l?s="text-blink-volume-up":c<l&&(s="text-blink-volume-down"),t.addClass(s),r=setTimeout(function(){t.removeClass(s)},1e3),t.addClass("highlight-cell"),n=setTimeout(function(){t.removeClass("highlight-cell")},150),o=void 0},150*a))}),e.$on("$destroy",function(){r&&clearTimeout(r),n&&clearTimeout(n),o&&clearTimeout(o),t.removeClass("highlight-cell")})}}}function U(e){var t=function(){function t(){}return t.prototype.connect=function(t,i){var r=this;this.ws=new WebSocket(t+"?userref="+i.userref+"&brokerid="+i.brokerId+"&opentime="+i.opentime+"&password="+i.password+"&version="+i.version+"&clienttype="+i.clientType),this.ws.binaryType="arraybuffer",this.ws.onopen=function(e){r.onopencb()},this.ws.onmessage=function(t){e.$apply(function(){return r.onreceivemsgcb(t)})},this.ws.onclose=function(e){r.onclosecb()},this.ws.onerror=function(e){r.onclosecb()}},t.prototype.onOpen=function(e){this.onopencb=e},t.prototype.onReceiveMessage=function(e){this.onreceivemsgcb=e},t.prototype.onClose=function(e){this.onclosecb=e},t.prototype.send=function(e){this.ws.send(e)},t.prototype.close=function(){this.ws&&this.ws.close()},t}();return new t}function q(e){return function(t,i){return isNaN(t)?"N/A":e(t,i)}}function j(e){return function(t,i,r){return isNaN(t)?"N/A":e(t,i,r)}}function H(e){return function(t,i,r){return r===se.NODATA?"N/A":e(t,i)}}function W(e){return q(e("change"))}function Y(e){return q(e("percentChange"))}function G(e){return q(e("price"))}function K(e){return j(e("currencyPrice"))}function z(e){return H(e("change"))}function Q(e){return H(e("percentChange"))}function X(e,t){if(void 0!==e)return e.trim().length<=t?e:e.substring(0,t)+"..."}function J(){return X}function Z(){var e={parseInitial:function(e,t){return[]},parseSnaspshotDetail:function(e,t){return new hl},parseSnapshotVolatilityDetail:function(e,t){return new pl}};return e.parseInitial=function(e,t){var i=[];return e.strikePriceDataList.forEach(function(e){var r=new dl;if(r.strikePrice=e.strikePrice,r.callSeriesId=e.callSymbol,r.isCallInTheMoney=e.callInTheMoney,t&&t.isByPrice()){var n=new hl;r.callOptionsDetail=n;var o=new hl;r.putOptionsDetail=o}else if(t&&t.isVolatility()){var n=new pl;r.callOptionsDetail=n;var o=new pl;r.putOptionsDetail=o}r.putSeriesId=e.putSymbol,r.isPutInTheMoney=e.putInTheMoney,i.push(r)}),i},e.parseSnaspshotDetail=function(e,t){if(t.priceDigit=e.priceDigit,t.instrumentType=e.instrumentType,t.isBidMatch=!1,t.isOfferMatch=!1,e.hasMatchedData()){var i=t.totalVolume<e.summary.totalVolume,r=t.volumeBid>e.bidOffer.bidVolume,n=t.volumeOffer>e.bidOffer.askVolume;i&&(r&&(t.isBidMatch=!0),n&&(t.isOfferMatch=!0))}return e.hasInitData()&&(t.instrumentType===ce.EQUITY||t.instrumentType===ce.INDEX?t.previousClose=e.initData.previousClose:t.instrumentType!==ce.FUTURES&&t.instrumentType!==ce.OPTIONS||(t.previousClose=e.initData.previousSettle)),e.hasSummaryData()&&(t.last=e.summary.lastDone,t.change=e.summary.change,t.totalVolume=e.summary.totalVolume),e.hasBidOfferData()&&(t.bidFlag=e.bidOffer.bidFlag,t.offerFlag=e.bidOffer.askFlag,t.bid=e.bidOffer.bidPrice,t.offer=e.bidOffer.askPrice,t.volumeBid=e.bidOffer.bidVolume,t.volumeOffer=e.bidOffer.askVolume),t},e.parseSnapshotVolatilityDetail=function(e,t){if(t.instrumentType=e.instrumentType,t.priceDigit=e.priceDigit,e.hasInitData()&&(t.previousClose=e.initData.previousClose),e.hasSummaryData()&&(t.last=e.summary.lastDone,t.change=e.summary.change,t.totalVolume=e.summary.totalVolume,t.instrumentType===ce.OPTIONS&&(t.optionsDelta=e.summary.delta,t.optionsImpliedVolatility=e.summary.impliedVolatility),e.instrumentType===ce.OPTIONS)){var i=e.summary.lastDone,r=e.summary.theoreticalPrice;t.theoreticalPrice=r,isNaN(i)||isNaN(r)?t.diff=NaN:t.diff=i-r}return t},e}function ee(e,t){return{scope:{onload:"&mi6IframeOnload",onNativeConfirmed:"&mi6IframeOnconfirmed",onNativeClose:"&mi6IframeOnclose"},link:function(i,r){function n(e){var r=e.data;if("string"==typeof r){var n=JSON.parse(r);switch(n.id){case"nativeConfirmed":i.onNativeConfirmed&&i.onNativeConfirmed();break;case"nativeClose":i.onNativeClose&&i.onNativeClose();break;case"nativeAlert":t.showErrorAlert(n.value)}}}r.on("load",function(){if(e.addEventListener("message",n,!1),i.onload)return i.onload()}),i.$on("$destroy",function(){e.removeEventListener("message",n,!1),r.off("load")})}}}function te(e){var t=[];return e.forEach(function(e,i){var r=new Uh;r.index=i,r.symbol=e.symbol,r.side=e.side.dealSummaryFullName,r.volume=p(e.volume),r.price=n(e.price,4),r.transactionAmount=n(e.transactionAmount,2),r.totalFee=n(e.totalFee,2),r.vat=n(e.vat,2),Be.BUY.isEqual(e.side)||Be.SBL_COVER.isEqual(e.side)?r.buyAmount=n(e.amount,2):r.sellAmount=n(e.amount,2),t.push(r)}),t}function ie(e){var t=new qh;return t.totalFee=n(e.totalFee,2),t.vat=n(e.vat,2),t.buyAmount=n(e.buyAmount,2),t.sellAmount=n(e.sellAmount,2),t.settlementFee=n(e.settlementFee,2),t.net=m(e.net,2),t}function re(e){for(var t=e.list,i=e.total,r=new Array(i.length+1),o=0,s=r.length;o<s;o++)r[o]=new Wh,r[o].list=[],r[o].total=new Gh;var a,c=0,l=0,u=0,d=0,h=0;r[0].listKey="All";for(var m=0,v=t.length;m<v;m++){a=t[m];var f=new Yh;f.listKey="All",f.orderNo=a.orderNo,f.symbol=a.seriesId,f.side=a.side.derivativeFullname,f.position=a.position.fullname,f.volume=p(a.volume);var y=Ch.THB;"USD"===a.currency&&(y=Ch.USD),f.cost=g(a.price,6,y),f.comm=n(a.comm,2),f.vat=n(a.vat,2),f.whTax=n(a.whTax,2),f.amount=n(a.amount,2),f.currency=a.currency,f.index=m,r[0].list.push(angular.copy(f)),c+=a.volume,l+=a.comm,u+=a.vat,d+=a.whTax,h+=a.amount;for(var o=0,s=i.length;o<s;o++)if(i[o].settlementDate===a.settlementDate){f.listKey=i[o].settlementDate,r[o+1].listKey=i[o].settlementDate,r[o+1].list.push(angular.copy(f)),r[o+1].total.volume=p(i[o].volume),r[o+1].total.comm=n(i[o].comm,2),r[o+1].total.vat=n(i[o].vat,2),r[o+1].total.whTax=n(i[o].whTax,2),r[o+1].total.amount=n(i[o].amount,2);break}}return r[0].total.volume=p(c),r[0].total.comm=n(l,2),r[0].total.vat=n(u,2),r[0].total.whTax=n(d,2),r[0].total.amount=n(h,2),r}var ne=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();angular.module("new-realtime-config",[]).constant("MM_HOST","").constant("SSS_WEB_HOST","").constant("SSS_WEB_END_POINT","/realtime/streaming6-stock-screener/StockScreenerPage.jsp").constant("WS_PROTOCOL","wss");var oe;!function(e){e[e.Normal=0]="Normal",e[e.MP=1]="MP",e[e.ATO=2]="ATO",e[e.ATC=3]="ATC",e[e.MKT=4]="MKT",e[e.MTL=5]="MTL"}(oe||(oe={}));var se,ae=function(){function e(){}return e.UNCHANGED="text-unchanged",e.LOSER="text-loser",e.GAINER="text-gainer",e.YELLOW="text-customer-data",e.RED="red",e.BLUE="blue",e.PINK="pink",e.WHITE="text-default",e.BUY="buy",e.SELL="sell",e.NONE="none",e.TEXT_BUY_VOLUME="text-buy-volume",e.TEXT_SELL_VOLUME="text-sell-volume",e.TEXT_UNCHANGE_VOLUME="text-unchanged-volume",e}();!function(e){e[e.UP=0]="UP",e[e.UNCHANGE=1]="UNCHANGE",e[e.DOWN=2]="DOWN",e[e.NODATA=3]="NODATA"}(se||(se={}));var ce,le=function(){function e(){}return e.UP="fa-caret-up",e.DOWN="fa-caret-down",e.UNCHANGE="fa-caret-left",e.NONE="",e}(),ue=function(){function e(){}return e.GROUP="GROUP",e.HEADER="HEADER",e.REQUEST="REQUEST",e.OPTION_REQUEST="OPTION_REQUEST",e}();!function(e){e[e.EQUITY=0]="EQUITY",e[e.FUTURES=1]="FUTURES",e[e.OPTIONS=2]="OPTIONS",e[e.INDEX=3]="INDEX"}(ce||(ce={}));var de,he=function(){function e(){}return e.lookup=function(t){var i={sSET:e.SSET};return i[t]||t},e.SSET="SSET",e}();!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.NORMAL=1]="NORMAL",e[e.WARRANT=2]="WARRANT",e[e.DERIVATIVES_WARRANT=3]="DERIVATIVES_WARRANT",e[e.ETF=4]="ETF",e[e.DR=5]="DR"}(de||(de={}));var pe,me=4,ve="I",fe=13,ye=9,ge=8,Se=40,be=38,Ce=37,Ee=39,Ae=65,we=67,Te=68,De=77,Ie=75,Pe=76,Oe=function(){function e(){}return e.prototype.hasInitMarketData=function(){return(32&this.dataFlag)>>5===1},e.prototype.hasInitIntradayData=function(){return(16&this.dataFlag)>>4===1},e.prototype.hasInitStatData=function(){return(8&this.dataFlag)>>3===1},e.prototype.hasSummaryData=function(){return(4&this.dataFlag)>>2===1},e.prototype.hasBidOfferData=function(){return(2&this.dataFlag)>>1===1},e.prototype.hasProjectedData=function(){return 1===(1&this.dataFlag)},e.prototype.hasMatchedData=function(){return this.hasSummaryData()&&this.hasBidOfferData()},e.prototype.update=function(e){return this.instrumentID.toUpperCase()!==e.instrumentID.toUpperCase()?null:(this.instrumentID=e.instrumentID,this.instrumentType=e.instrumentType,this.instrumentSubType=e.instrumentSubType,this.priceDigit=e.priceDigit,this.settleDigit=e.settleDigit,this.updateInfo(e),void this.updateHighLow())},e.prototype.updateInfo=function(e){e.hasInitMarketData()&&e.initMarketData&&(this.initMarketData=e.initMarketData),e.hasInitIntradayData()&&e.initIntradayData&&(this.initIntradayData=e.initIntradayData),e.hasInitStatData()&&e.initStatData&&(this.initStatData=e.initStatData),e.hasSummaryData()&&e.summaryData&&(this.summaryData=e.summaryData),e.hasBidOfferData()&&e.bidofferData&&(this.bidofferData=e.bidofferData),e.hasProjectedData()&&e.projectedData&&(this.projectedData=e.projectedData);var t=0;void 0!==this.initMarketData&&(t+=32),void 0!==this.initIntradayData&&(t+=16),void 0!==this.initStatData&&(t+=8),void 0!==this.summaryData&&(t+=4),void 0!==this.bidofferData&&(t+=2),void 0!==this.projectedData&&(t+=1),this.dataFlag=t},e.prototype.updateHighLow=function(){if(this.hasSummaryData()&&!isNaN(this.summaryData.lastDone)&&this.summaryData.totalVolume>0){var e=1/0,t=-(1/0);if(this.hasInitMarketData()&&(isNaN(this.initMarketData.low)||(e=this.initMarketData.low),isNaN(this.initMarketData.high)||(t=this.initMarketData.high),this.initMarketData.low=Math.min(this.summaryData.lastDone,e),this.initMarketData.high=Math.max(this.summaryData.lastDone,t)),this.hasInitIntradayData()){var i=isNaN(this.initIntradayData.w52Low)?1/0:this.initIntradayData.w52Low,r=isNaN(this.initIntradayData.w52High)?-(1/0):this.initIntradayData.w52High;this.initIntradayData.w52Low=Math.min(this.summaryData.lastDone,e,i),this.initIntradayData.w52High=Math.max(this.summaryData.lastDone,t,r),i!==this.initIntradayData.w52Low?this.initIntradayData.w52LowDate=this.getCurrentDateString():this.initIntradayData.w52Low===this.initMarketData.low&&(this.initIntradayData.w52LowDate=this.getCurrentDateString()),r!==this.initIntradayData.w52High?this.initIntradayData.w52HighDate=this.getCurrentDateString():this.initIntradayData.w52High===this.initMarketData.high&&(this.initIntradayData.w52HighDate=this.getCurrentDateString())}}},e.prototype.getCurrentDateString=function(){var e=new Date,t=(e.getDate()<10?"0":"")+e.getDate(),i=(e.getMonth()+1<10?"0":"")+(e.getMonth()+1);return t+"/"+i+"/"+e.getFullYear()},e.prototype.isEquity=function(){return Ve.isEquity(this.instrumentType)},e.prototype.isDerivatives=function(){return Ve.isDerivatives(this.instrumentType)},e.prototype.getPreviousClose=function(){return this.hasInitMarketData()?this.isDerivatives()?this.initMarketData.previousSettle:this.initMarketData.previousClose:NaN},e.prototype.getSpread=function(e,t){return this.isDerivatives()?this.initMarketData.spread:Ve.getEquitySpread(e,t)},e.prototype.getPriceDigit=function(){return this.isDerivatives()?void 0!==this.priceDigit?this.priceDigit:void 0:2},e.prototype.getCeiling=function(){return this.hasInitMarketData()?this.initMarketData.ceiling:NaN},e.prototype.getFloor=function(){return this.hasInitMarketData()?this.initMarketData.floor:NaN},e.prototype.isValidBidOfferPrice=function(e){return this.isDerivatives()?!isNaN(e):0!==e},e}(),ke=function(){function e(){}return e}(),$e=function(){function e(){}return e}(),Le=function(){function e(){}return e}(),Ne=function(){function e(){}return e}(),Me=function(){function e(){}return e}(),Re=function(){function e(){}return e}(),_e=function(){function e(){}return e.plus=function(e,t){var i=new Big(e),r=i.plus(t);return parseFloat(r.toString())},e.minus=function(e,t){var i=new Big(e),r=i.minus(t);return parseFloat(r.toString())},e.div=function(e,t){var i=new Big(e),r=i.div(t);return parseFloat(r.toString())},e}(),Ve=function(){function e(){}return e.updatePriceWithSpread=function(e,t,i){var r,n=e.getSpread(t,i);return r=i?_e.plus(t,n):_e.minus(t,n)},e.getEquitySpread=function(e,t){return e<2&&2!==e||2===e&&!t?.01:(e>2||2===e)&&e<5&&5!==e||5===e&&!t?.02:(e>5||5===e)&&e<10&&10!==e||10===e&&!t?.05:(e>10||10===e)&&e<25&&25!==e||25===e&&!t?.1:(e>25||25===e)&&e<100&&100!==e||100===e&&!t?.25:(e>100||100===e)&&e<200&&200!==e||200===e&&!t?.5:(e>200||200===e)&&e<400&&400!==e||400===e&&!t?1:2},e.isEquity=function(e){return e===ce.EQUITY},e.isDerivatives=function(e){return e===ce.FUTURES||e===ce.OPTIONS},e}(),Be=function(){function e(e,t,i,r,n){this.name=e,this.derivName=t,this.requestParam=i,this.derivShortname=r,this.dealSummaryName=n}return Object.defineProperty(e.prototype,"fullname",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dealSummaryFullName",{get:function(){return this.dealSummaryName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"derivativeFullname",{get:function(){return this.derivName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shortname",{get:function(){return this.requestParam},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"derivativeShortname",{get:function(){return this.derivShortname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classname",{get:function(){return"Buy"===this.name?"text-buy-volume":"Sell"===this.name?"text-sell-volume":"Short"===this.name?"text-cns-short-volume":"Cover"===this.name?"text-cns-cover-volume":"NO_SIDE"===this.name?"text-non-side-volume":""},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.shortname===e.shortname},e.prototype.isBuy=function(){return this.shortname===e.BUY.shortname},e.prototype.isSell=function(){return this.shortname===e.SELL.shortname},e.prototype.fullnameFromType=function(e){return Ve.isDerivatives(e)?this.derivativeFullname:this.fullname},e.BUY=new e("Buy","Long","B","L","Buy"),e.SELL=new e("Sell","Short","S","S","Sell"),e.NO_SIDE=new e("NO_SIDE","","","","NO_SIDE"),e.SBL_SHORT=new e("Short","","H","H","Short Sell"),e.SBL_COVER=new e("Cover","","C","C","Cover Short"),e.NONE=new e("","","","",""),e.lookup={0:e.BUY,1:e.SELL,2:e.SBL_SHORT,3:e.SBL_COVER,4:e.NO_SIDE,B:e.BUY,S:e.SELL,Buy:e.BUY,Sell:e.SELL,"":e.NONE,Long:e.BUY,L:e.BUY,Short:e.SELL,H:e.SBL_SHORT,C:e.SBL_COVER},e}(),xe=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.dispatchCloseAll=function(){this.signal.dispatch()},e}(),Fe=function(){function e(e,t,i,r,n){this.$element=e,this.$window=t,this.$scope=i,this.uiComponentEventEmitter=r,this.$rootScope=n,this.hideUIComponentCallBack=this.hideComponent.bind(this),this.detectClickOuterDropdownCallBack=this.detectClickOuterDropdown.bind(this),this.stopEventPropogationCallBack=this.stopEventPropogation.bind(this)}return e.prototype.showComponent=function(){this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack),this.uiComponentEventEmitter.dispatchCloseAll(),this.uiComponentEventEmitter.subscribe(this.hideUIComponentCallBack),this.shouldShowComponent(),this.detectClickEvent()},e.prototype.hideComponent=function(){this.undetectClickEvent(),this.shouldHideComponent(),this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack)},e.prototype.detectClickEvent=function(){angular.element(this.$window).on("click",this.detectClickOuterDropdownCallBack),angular.element(this.$window).on("select",this.detectClickOuterDropdownCallBack),this.$element.on("click",this.stopEventPropogationCallBack),this.$element.on("select",this.stopEventPropogationCallBack)},e.prototype.undetectClickEvent=function(){angular.element(this.$window).off("click",this.detectClickOuterDropdownCallBack),angular.element(this.$window).off("select",this.detectClickOuterDropdownCallBack),this.$element.off("click",this.stopEventPropogationCallBack),this.$element.off("select",this.stopEventPropogationCallBack)},e.prototype.stopEventPropogation=function(e){e.stopPropagation()},e.prototype.detectClickOuterDropdown=function(e){this.$rootScope.$$phase?this.hideComponent():(this.hideComponent(),this.$scope.$digest())},e.prototype.$onDestroy=function(){this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack)},e}(),Ue=function(){function e(e,t,i,r,n,o){this.$element=e,this.$window=t,this.$scope=i,this.uiComponentEventEmitter=r,this.shouldShowComponent=n,this.shouldHideComponent=o,this.hideUIComponentCallBack=this.wantToHideComponent.bind(this),this.detectClickOuterDropdownCallBack=this.detectClickOuterDropdown.bind(this),this.stopEventPropogationCallBack=this.stopEventPropogation.bind(this)}return e.prototype.wantToShowComponent=function(){this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack),this.uiComponentEventEmitter.dispatchCloseAll(),this.uiComponentEventEmitter.subscribe(this.hideUIComponentCallBack),this.detectClickEvent(),this.shouldShowComponent()},e.prototype.wantToHideComponent=function(){this.undetectClickEvent(),this.shouldHideComponent(),this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack)},e.prototype.detectClickEvent=function(){angular.element(this.$window).on("click",this.detectClickOuterDropdownCallBack),angular.element(this.$window).on("select",this.detectClickOuterDropdownCallBack),this.$element.on("click",this.stopEventPropogationCallBack),this.$element.on("select",this.stopEventPropogationCallBack)},e.prototype.undetectClickEvent=function(){angular.element(this.$window).off("click",this.detectClickOuterDropdownCallBack),angular.element(this.$window).off("select",this.detectClickOuterDropdownCallBack),this.$element.off("click",this.stopEventPropogationCallBack),this.$element.off("select",this.stopEventPropogationCallBack)},e.prototype.stopEventPropogation=function(e){e.stopPropagation()},e.prototype.detectClickOuterDropdown=function(e){this.wantToHideComponent(),this.$scope.$digest()},e.prototype.$onDestroy=function(){this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack)},e}(),qe=function(){function e(e,t,i,r,n,o){this.$element=e,this.$window=t,this.$scope=i,this.uiComponentEventEmitter=r,this.shouldShowComponent=n,this.shouldHideComponent=o,this.hideUIComponentCallBack=this.wantToHideComponent.bind(this),this.detectClickOuterDropdownCallBack=this.detectClickOuterDropdown.bind(this),this.stopEventPropogationCallBack=this.stopEventPropogation.bind(this)}return e.prototype.wantToShowComponent=function(){this.detectClickEvent(),this.shouldShowComponent()},e.prototype.wantToHideComponent=function(){this.undetectClickEvent(),this.shouldHideComponent()},e.prototype.detectClickEvent=function(){angular.element(this.$window).on("click",this.detectClickOuterDropdownCallBack),angular.element(this.$window).on("select",this.detectClickOuterDropdownCallBack),this.$element.on("click",this.stopEventPropogationCallBack),this.$element.on("select",this.stopEventPropogationCallBack)},e.prototype.undetectClickEvent=function(){angular.element(this.$window).off("click",this.detectClickOuterDropdownCallBack),angular.element(this.$window).off("select",this.detectClickOuterDropdownCallBack),this.$element.off("click",this.stopEventPropogationCallBack),this.$element.off("select",this.stopEventPropogationCallBack)},e.prototype.stopEventPropogation=function(e){e.stopPropagation()},e.prototype.detectClickOuterDropdown=function(e){this.wantToHideComponent();try{this.$scope.$digest()}catch(t){}},e}(),je=function(){function e(e,t,i,r,n){this.$element=e,this.$window=t,this.$scope=i,this.uiComponentEventEmitter=r,this.$rootScope=n,this.hideUIComponentCallBack=this.hideComponent.bind(this),this.detectClickOuterDropdownCallBack=this.detectClickOuterDropdown.bind(this),this.stopEventPropogationCallBack=this.stopEventPropogation.bind(this)}return e.prototype.showComponent=function(){this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack),this.uiComponentEventEmitter.dispatchCloseAll(),this.uiComponentEventEmitter.subscribe(this.hideUIComponentCallBack),this.detectClickEvent(),this.shouldShowComponent()},e.prototype.hideComponent=function(){this.undetectClickEvent(),this.shouldHideComponent(),this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack)},e.prototype.detectClickEvent=function(){this.$element.on("mouseup",this.stopEventPropogationCallBack),angular.element(this.$window).on("mouseup",this.detectClickOuterDropdownCallBack)},e.prototype.undetectClickEvent=function(){angular.element(this.$window).off("mouseup",this.detectClickOuterDropdownCallBack),this.$element.off("mouseup",this.stopEventPropogationCallBack)},e.prototype.stopEventPropogation=function(e){e.stopPropagation()},e.prototype.detectClickOuterDropdown=function(e){this.$rootScope.$$phase?this.hideComponent():(this.hideComponent(),this.$scope.$digest())},e.prototype.$onDestroy=function(){this.uiComponentEventEmitter.unsubscribe(this.hideUIComponentCallBack)},e}(),He=function(){function e(){}return e.HEADER="HEADER",e.DATA="DATA",e.GROUP="GROUP",e}(),We=function(){function e(e,t,i,r){this.$element=e,this.$window=t,this.$scope=i,this.uiComponentsEventEmitter=r,this.DATA_TYPE=He,this.hideDropdownCallBack=this.hideDropdown.bind(this),this.isClick=!1,this.hover={},this.dropdown=this.$element.find("li"),this.isUp&&this.dropdown.addClass("up"),this.isFirstTimeShow=!0,this.uiComponentsEventEmitter.subscribe(this.hideDropdownCallBack)}return e.prototype.toggleDropdown=function(){if(this.isClick)this.hideDropdown();else{var e=this.getSelectedElement();this.showDropdown(),this.scrollToSelectedMenu(e)}this.isFirstTimeShow=!1},e.prototype.getSelectedElement=function(){return this.selected&&this.selected.element?this.selected.element:this.$element[0].children[0].lastChild.firstChild},e.prototype.scrollToSelectedMenu=function(e){e&&e.parentElement&&(e.parentElement.scrollTop=e.offsetTop)},e.prototype.showSelectedSubmenu=function(e){if(this.selected&&this.selected.hover){var t={currentTarget:e};this.showSubmenu(t,this.selected.hover)}},e.prototype.showSubmenu=function(e,t){var i=e.currentTarget;this.hover=angular.copy(t),"group"===i.classList[0]&&i.children[1].setAttribute("style","transform: translatey("+i.getBoundingClientRect().top+"px);")},e.prototype.onMouseLeave=function(e){var t=e.currentTarget,i=e.relatedTarget;i&&("li"===t.localName&&"ul"===i.localName||(this.hover={}))},e.prototype.showDropdown=function(){this.uiComponentsEventEmitter.dispatchCloseAll(),this.dropdown.addClass("active"),this.isClick=!0,this.detectClickEvent()},e.prototype.hideDropdown=function(){this.dropdown.removeClass("active"),this.isClick=!1,this.undetectClickEvent()},e.prototype.detectClickEvent=function(){angular.element(this.$window).on("click",this.detectClickOuterDropdown.bind(this)),this.$element.on("click",this.stopClickEventPropogation.bind(this))},e.prototype.undetectClickEvent=function(){angular.element(this.$window).off("click",this.detectClickOuterDropdown.bind(this)),this.$element.off("click",this.stopClickEventPropogation.bind(this))},e.prototype.stopClickEventPropogation=function(e){e.stopPropagation()},e.prototype.detectClickOuterDropdown=function(e){this.isClick&&this.hideDropdown()},e.prototype.$onChanges=function(e){e.model&&e.model.currentValue&&this.onChangeModel(e.model.currentValue)},e.prototype.$onDestroy=function(){this.uiComponentsEventEmitter.unsubscribe(this.hideDropdownCallBack)},e.prototype.onChangeModel=function(e){!this.selected&&e.length>0&&(this.selected=e[0]),this.model=e},e.prototype.changeSelected=function(e,t,i){e.type!==ue.GROUP&&e.type!==ue.HEADER&&(this.onUpdate&&this.selected!==e&&this.onUpdate({model:e}),this.onSelected&&this.onSelected({model:e}),this.selected=e,this.selected.element=i,this.selected.hover=t)},e.prototype.menuSelected=function(e,t){var i=e.currentTarget;this.changeSelected(t,void 0,i),"GROUP"===t.type&&this.stopClickEventPropogation(e)},e.prototype.submenuSelected=function(e,t,i){var r=e.currentTarget;this.changeSelected(t,i,r.parentElement.parentElement),this.hideDropdown()},Object.defineProperty(e.prototype,"id",{get:function(){return this.dropdownName+"-dropdown-"},enumerable:!0,configurable:!0}),e.$inject=["$element","$window","$scope","UIComponentsEventEmitter"],e}(),Ye=function(){function e(e,t){this.name=e,this.requestParam=t}return e.getDerivativesPositionDropdownList=function(t,i){return t?e.ALL_AUTO_NET:i?e.ALL:e.ALL_NO_AUTO},Object.defineProperty(e.prototype,"fullname",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shortname",{get:function(){return this.requestParam},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classname",{get:function(){return this.name===e.OPEN_CLOSE.fullname?"open-close":this.name.toLowerCase()},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.OPEN=new e("Open","O"),e.CLOSE=new e("Close","C"),e.AUTO=new e("Auto","A"),e.NONE=new e("",""),e.OPEN_CLOSE=new e("Open/Close","A"),e.ALL=[e.AUTO,e.OPEN,e.CLOSE],e.ALL_NO_AUTO=[e.OPEN,e.CLOSE],e.ALL_AUTO_NET=[e.OPEN_CLOSE],e.lookup={O:e.OPEN,C:e.CLOSE,A:e.AUTO,Open:e.OPEN,Close:e.CLOSE,Auto:e.AUTO,"":e.NONE},e}(),Ge=function(){function e(e,t,i,r){this.value=e,this.derivValue=t,this.equityMultiOrder=i,this.fullname=r}return Object.defineProperty(e,"lookup",{get:function(){var t={"":e.LIMIT,limit:e.LIMIT,mp:e.MP,mpmkt:e.MP_MKT,mpmtl:e.MP_MTL,Limit:e.LIMIT,MP:e.MP,"MP-MKT":e.MP_MKT,"MP-MTL":e.MP_MTL,ATO:e.ATO,ATC:e.ATC,ato:e.ATO,atc:e.ATC,LIMIT:e.LIMIT,0:e.LIMIT,1:e.MP,2:e.ATO,3:e.ATC,4:e.MP_MKT,5:e.MP_MTL};return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equityValue",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"derivativeValue",{get:function(){return this.derivValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equityMultiOrderValue",{get:function(){return this.equityMultiOrder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"derivativesMultiOrderValue",{get:function(){return this.derivativeValue},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this.value===e.value},e.prototype.isLimit=function(){return this.value===e.LIMIT.value},e.prototype.isATO=function(){return this.value===e.ATO.value},e.prototype.isATC=function(){return this.value===e.ATC.value},e.prototype.isMP=function(){return this.value===e.MP.value},e.prototype.isMPMKT=function(){return this.value===e.MP_MKT.value},e.prototype.isMPMTL=function(){return this.value===e.MP_MTL.value},e.LIMIT=new e("limit","LIMIT","Limit","Limit"),e.ATO=new e("ato","ATO","ATO","ATO"),e.ATC=new e("atc","","ATC","ATC"),e.MP=new e("mp","MP","MP","MP"),e.MP_MKT=new e("mpmkt","MP-MKT","MP-MKT","MP-MKT"),e.MP_MTL=new e("mpmtl","MP-MTL","MP-MTL","MP-MTL"),e.ALL_EQUITY=[e.LIMIT,e.ATO,e.ATC,e.MP,e.MP_MKT,e.MP_MTL],e.ALL_DERIV=[e.LIMIT,e.ATO,e.MP,e.MP_MKT,e.MP_MTL],e}(),Ke=function(){function e(e,t,i){this.value=e,this.label=t,this.fullname=i}return Object.defineProperty(e,"lookup",{get:function(){var t={DAY:e.DAY,FOK:e.FOK,IOC:e.IOC,Day:e.DAY,"Auto-M":e.AUTO_M,"AUTO-M":e.AUTO_M,Date:e.DATE,Cancel:e.CANCEL,Time:e.TIME,Session:e.SESSION,Auction:e.AUCTION,GTD:e.DATE,GTC:e.CANCEL,GTT:e.TIME,GTS:e.SESSION,GTA:e.AUCTION};return t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.label},e.prototype.isEqual=function(e){return this.value===e.value},e.DAY=new e("DAY","Day","Day"),
e.FOK=new e("FOK","FOK","Fill Or Kill (FOK)"),e.IOC=new e("IOC","IOC","Immediate Or Cancel (IOC)"),e.AUTO_M=new e("AUTO-M","Auto-M","Good Till Next Automatch"),e.DATE=new e("GTD","Date","Good Till Date"),e.CANCEL=new e("GTC","Cancel","Good Till Cancel"),e.TIME=new e("GTT","Time","Good Till Time"),e.SESSION=new e("GTS","Session","Good Till Session"),e.AUCTION=new e("GTA","Auction","Good Till Next Auction"),e.ALL_EQUITY=[e.DAY,e.FOK,e.IOC],e.ALL_DERIVATIVE=[e.AUCTION,e.AUTO_M,e.CANCEL,e.DATE,e.DAY,e.FOK,e.IOC,e.SESSION,e.TIME],e.ALL_DERIVATIVES_MULTI_ORDER=[e.DAY,e.FOK,e.IOC,e.CANCEL,e.AUTO_M],e}();!function(e){e[e.PRICE=0]="PRICE",e[e.PERCENT=1]="PERCENT",e[e.SCALE=2]="SCALE",e[e.PRICE_VALUE=3]="PRICE_VALUE"}(pe||(pe={}));var ze;!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.NORMAL=1]="NORMAL",e[e.BREAK=2]="BREAK",e[e.NONE=3]="NONE"}(ze||(ze={}));var Qe=function(){function e(){}return e.EQUITY="E",e.DERIVATIVE="D",e.ALL="A",e}(),Xe="pc",Je=function(){function e(e,t,i){this.name=e,this.detail=t,this.value=i}return Object.defineProperty(e.prototype,"fullname",{get:function(){return this.name+" ["+this.detail+"]"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shortname",{get:function(){return this.name},enumerable:!0,configurable:!0}),e.NONE=new e("","",(-1)),e.LastHigherThanStopPrice=new e("Last >=","Last price is greater than or equal to",5),e.LastLessThanStopPrice=new e("Last <=","Last price is less than or equal to",6),e.BidHigherThanStopPrice=new e("Bid >=","Bid price is greater than or equal to",3),e.BidLessThanStopPrice=new e("Bid <=","Bid price is less than or equal to",4),e.OfferHigherThanStopPrice=new e("Offer >=","Offer price is greater than or equal to",1),e.OfferLessThanStopPrice=new e("Offer <=","Offer price is less than or equal to",2),e.ALL=[e.LastHigherThanStopPrice,e.LastLessThanStopPrice,e.BidHigherThanStopPrice,e.BidLessThanStopPrice,e.OfferHigherThanStopPrice,e.OfferLessThanStopPrice],e.FOR_LONG=[e.LastHigherThanStopPrice,e.OfferHigherThanStopPrice,e.BidHigherThanStopPrice,e.LastLessThanStopPrice,e.OfferLessThanStopPrice,e.BidLessThanStopPrice],e.FOR_SHORT=[e.LastLessThanStopPrice,e.BidLessThanStopPrice,e.OfferLessThanStopPrice,e.LastHigherThanStopPrice,e.BidHigherThanStopPrice,e.OfferHigherThanStopPrice],e.lookup={1:e.OfferHigherThanStopPrice,2:e.OfferLessThanStopPrice,3:e.BidHigherThanStopPrice,4:e.BidLessThanStopPrice,5:e.LastHigherThanStopPrice,6:e.LastLessThanStopPrice},e}(),Ze=function(){function e(e,t,i,r){this.sequenceInMarketStatus=e,this.strMarketType=t,this.strFullname=i,this.strShortname=r}return Object.defineProperty(e,"lookup",{get:function(){var t={TXI:e.INDEX,0:e.INDEX,TXM:e.METAL,1:e.METAL,TXS:e.STOCK,2:e.STOCK,TXR:e.INTEREST_RATE,3:e.INTEREST_RATE,TXE:e.ENERGY,4:e.ENERGY,TXC:e.CURRENCY,5:e.CURRENCY,TXA:e.AGRICULTURE,6:e.AGRICULTURE,TXD:e.DEFERRED,7:e.DEFERRED,"":e.NOT_SUPPORT};return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marketType",{get:function(){return this.strMarketType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullname",{get:function(){return this.strFullname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shortname",{get:function(){return this.strShortname},enumerable:!0,configurable:!0}),e.NOT_SUPPORT=new e((-1),"","",""),e.INDEX=new e(1,"TXI","Equity Index","E.Index"),e.METAL=new e(2,"TXM","Metal","Metal"),e.CURRENCY=new e(3,"TXC","Currency","Currency"),e.INTEREST_RATE=new e(4,"TXR","Interest Rate","Interest"),e.STOCK=new e(5,"TXS","Single Stock","S.Stock"),e.ENERGY=new e(6,"TXE","Energy","Energy"),e.AGRICULTURE=new e(7,"TXA","Agricultural","Agri"),e.DEFERRED=new e(8,"TXD","Deferred","Deferred"),e}(),et=function(){function e(){}return e.CONNECTION_FAIL="connection fail",e.NO_SESSION="no session",e}(),tt=function(){function e(){}return e.INVESTOR="Investor",e.MARKET_REP="MarketRep",e.VIP="VIP",e}(),it=function(){function e(){}return e.WATCH="_Watch",e.PORTFOLIO_EQUITY_PORTFOLIO="_Portfolio_Equity_Portfolio",e.PORTFOLIO_EQUITY_DEAL_SUMMARY="_Portfolio_Equity_Dealsummary",e.PORTFOLIO_DERIVATIVES_PORTFOLIO_SETTLE="_Portfolio_Deriv_PortfolioSettle",e.PORTFOLIO_DERIVATIVES_PORTFOLIO_COST="_Portfolio_Deriv_PortfolioCost",e.PORTFOLIO_DERIVATIVES_DEAL_SUMMARY="_Portfolio_Deriv_Dealsummary",e.QUOTE_INTRADAY_TICKER="_Quote_Intraday_Ticker",e.QUOTE_INTRADAY_CHART="_Quote_Intraday_Chart",e.QUOTE_INTRADAY_BY_DATE="_Quote_Intraday_ByDate",e.QUOTE_INTRADAY_ODDLOT="_Quote_Intraday_Oddlot",e.QUOTE_INTRADAY_NEWS="_Quote_Intraday_News",e.QUOTE_INTRADAY_UNDERLYING="_Quote_Intraday_Underlying",e}(),rt=function(){function e(){}return e.MARKET_SUMMARY="_MarketSummary",e.FAVOURITE="_Favourite",e.MINI_QUOTE="_Miniquote",e.TICKER="_Ticker",e.PLACE_ORDER="_PlaceOrder",e.PLACE_ORDER_EQUITY="_PlaceOrder_Equity",e.PLACE_ORDER_DERIVATIVES="_PlaceOrder_Derivatives",e.ORDER_STATUS="_OrderStatus",e.PORTFOLIO_EQUITY="_Portfolio_Equity",e.PORTFOLIO_DERIVATIVES="_Portfolio_Derivatives",e.DEAL_SUMMARY_EQUITY="_Deal_Summary_Equity",e.DEAL_SUMMARY_DERIVATIVES="_Deal_Summary_Derivatives",e}(),nt=function(){function e(){}return e.SELECT_INDEX="Select_Index",e.CLICK_PUSH=" Click_Push",e.SELECT_FAVOURITE="Select_Favourite",e.SELECT_SET_TFEX_LIST="Select_SET_TFEX_List",e.DOUBLECLICK_SYMBOL="DoubleClick_Symbol",e.CLICK_EDIT="Click_Edit",e.CLICK_SYMBOL="Click_Symbol",e.CLICK_BESTBID="Click_BestBid",e.CLICK_BESTOFFER="Click_BestOffer",e.FILL_SYMBOL="Fill_Symbol",e.SUBMIT_ORDER="Submit_Order",e.CLICK_SYMBOL_EQUITY="Click_Symbol_Equity",e.CLICK_SYMBOL_DERIV="Click_Symbol_Deriv",e.FILL_VOLUME="Fill_Volume",e.FILL_CHANGE_VOLUME="Fill_Change_Volume",e.CLICK_SMARTVOLUME="Click_SmartVolume",e.FILL_PRICE="Fill_Price",e.FILL_CHANGE_PRICE="Fill_Change_Price",e.CLICK_SMARTPRICE="Click_SmartPrice",e.FILL_ICEBERGVOLUME="Fill_IcebergVolume",e.CLICK_ICEBERGSMARTVOLUME="Click_IcebergSmartVolume",e.SELECT_PRICETYPE="Select_PriceType",e.SELECT_VALIDITY="Select_Validity",e.FILL_PIN="Fill_Pin",e.FILL_STOPSYMBOL="Fill_StopSymbol",e.FILL_STOPPRICE="Fill_StopPrice",e.CLICK_STOPSMARTPRICE="Click_StopSmartPrice",e.CLICK_CLEAR="Click_Clear",e.CLICK_ORDERNO="Click_OrderNo",e.CLICK_DETAIL="Click_Detail",e.CLICK_CANCEL="Click_Cancel",e.CLICK_MULTICANCEL="Click_MultiCancel",e.MODE_SUM="Mode_Sum",e}(),ot=function(){function e(){}return e.INDEX_DW="I",e.STOCK_DW="S",e}(),st=function(){function e(){}return e.WideScreen={ORDER:"top-68 row-23",ORDER_STATUS_LIST:"row-12",TFEX_ORDER_STATUS_LIST:"row-26",TFEX_ORDER_STATUS_LIST_MARKET_REP:"row-26",ORDER_STATUS_LIST_SHOW_CONDITION:"row-8",VIEW_ALL_ORDER:"top-10 row-81",VIEW_ALL_ORDER_STATUS_LIST:"row-70",VIEW_ALL_ORDER_STATUS_LIST_SHOW_CONDITION:"row-66",EQUITY_MULTI_ORDER_LIST:"row-60",DERIVATIVES_MULTI_ORDER_LIST:"row-70",DCA_CONTAINER:"row-77",DCA_BACK_TEST_PROFIT_LOSS:"row-44",DCA_ORDER_STATUS_SCROLL_CONTAINER:"row-69",MARKET_WATCH_LIST:"row-26",TFEX_WATCH_LIST:"row-43",MARKET_OPTION_LIST:"row-24",TFEX_WATCH_OPTION_LIST:"row-30",TFEX_GREEK_SUMMARY_LIST:"row-23",TFEX_PAYOFF_PORT_ORDER_LIST:"row-25",TFEX_OPTIONS_SUMMARY_MAIN_CONTENT:"row-43"},e.NormalScreen={ORDER:"top-68 row-41",ORDER_STATUS_LIST:"row-30",TFEX_ORDER_STATUS_LIST:"row-44",TFEX_ORDER_STATUS_LIST_MARKET_REP:"row-44",ORDER_STATUS_LIST_SHOW_CONDITION:"row-26",VIEW_ALL_ORDER:"top-10 row-99",VIEW_ALL_ORDER_STATUS_LIST:"row-88",VIEW_ALL_ORDER_STATUS_LIST_SHOW_CONDITION:"row-84",EQUITY_MULTI_ORDER_LIST:"row-78",DERIVATIVES_MULTI_ORDER_LIST:"row-88",DCA_CONTAINER:"row-99",DCA_BACK_TEST_PROFIT_LOSS:"row-50",DCA_ORDER_STATUS_SCROLL_CONTAINER:"row-87",TFEX_WATCH_LIST:"row-61",TFEX_WATCH_OPTION_LIST:"row-47",TFEX_GREEK_SUMMARY_LIST:"row-41",TFEX_PAYOFF_PORT_ORDER_LIST:"row-42",TFEX_OPTIONS_SUMMARY_MAIN_CONTENT:"row-61"},e}(),at=function(){function e(){}return e.MONTHLY="MONTHLY",e.WEEKLY="WEEKLY",e}(),ct=(function(){function e(){}return e.YTD="YTD",e.ONE_YEAR="1Y",e.THREE_YEAR="3Y",e.FIVE_YEAR="5Y",e}(),function(){function e(){}return e.NORMAL="'Open Sans Semibold', sans-serif",e.BOLD="'Open Sans Bold', sans-serif",e}(),function(){function e(){}return e.parseNullableString=function(e){return"null"===e?"":e},e}()),lt=function(){function e(){}return e.prototype.toJson=function(e){var t=new X2JS;return t.xml2js(e)},e}();angular.module("parser",[]).service("XMLParserService",lt);var ut=function(){function e(e){this.emptyValue=e}return e.prototype.add=function(e,t){this[e]=angular.copy(t)},e.prototype.value=function(e){return void 0===this[e]?angular.copy(this.emptyValue):angular.copy(this[e])},e.prototype.set=function(e,t,i){var r=this[e];r[t]=i},e.prototype.getAllKeys=function(){var e=[];for(var t in this)this.hasOwnProperty(t)&&"emptyValue"!==t&&e.push(t);return e},e.prototype["delete"]=function(e){delete this[e]},e.prototype.size=function(){return this.getAllKeys().length},e}(),dt=function(){function e(e,t,i){this.name=Xi.displayForm(e),this.type=t,this.underlying=i}return e.empty=function(){return new e("",ar.EQUITY)},e.prototype.isEmpty=function(){return""===this.name&&this.type.equal(ar.EQUITY)},e.prototype.isEquity=function(){return this.type.equal(ar.EQUITY)},e.prototype.isDerivatives=function(){return this.type.equal(ar.FUTURES)||this.type.equal(ar.OPTIONS)},e.prototype.isIndex=function(){return this.type.equal(ar.MARKET_INDEX)||this.type.equal(ar.INDUSTRY)||this.type.equal(ar.MAI_INDUSTRY)||this.type.equal(ar.SECTOR)},e.prototype.isStockUnderlying=function(){return this.type.equal(ar.STOCK_UNDERLYING)},e.prototype.clone=function(){return new e(this.name,this.type,this.underlying)},e.prototype.isEqual=function(e){return e&&this.name===e.name},e.prototype.isFuturesWithUnderlying=function(){return this.type.equal(ar.FUTURES)&&void 0!==this.underlying},e.prototype.isFuturesWithoutUnderlying=function(){return this.type.equal(ar.FUTURES)&&void 0===this.underlying},e.prototype.isOptions=function(){return this.type.equal(ar.OPTIONS)},e}(),ht=function(){function e(){}return e.prototype.getBidList=function(){var e=[];return this.bidVolume1&&!isNaN(this.bidVolume1)&&e.push({price:this.bidPrice1,volume:this.bidVolume1}),this.bidVolume2&&!isNaN(this.bidVolume2)&&e.push({price:this.bidPrice2,volume:this.bidVolume2}),this.bidVolume3&&!isNaN(this.bidVolume3)&&e.push({price:this.bidPrice3,volume:this.bidVolume3}),this.bidVolume4&&!isNaN(this.bidVolume4)&&e.push({price:this.bidPrice4,volume:this.bidVolume4}),this.bidVolume5&&!isNaN(this.bidVolume5)&&e.push({price:this.bidPrice5,volume:this.bidVolume5}),{bidOfferList:e,flag:this.bidFlag}},e.prototype.getOfferList=function(){var e=[];return this.offerVolume1&&!isNaN(this.offerVolume1)&&e.push({price:this.offerPrice1,volume:this.offerVolume1}),this.offerVolume2&&!isNaN(this.offerVolume2)&&e.push({price:this.offerPrice2,volume:this.offerVolume2}),this.offerVolume3&&!isNaN(this.offerVolume3)&&e.push({price:this.offerPrice3,volume:this.offerVolume3}),this.offerVolume4&&!isNaN(this.offerVolume4)&&e.push({price:this.offerPrice4,volume:this.offerVolume4}),this.offerVolume5&&!isNaN(this.offerVolume5)&&e.push({price:this.offerPrice5,volume:this.offerVolume5}),{bidOfferList:e,flag:this.offerFlag}},e}(),pt=function(){function e(){this.isMarkDragged=!1,this.value=[]}return e}(),mt=function(){function e(){this.clear()}return e.prototype.isEmpty=function(){return isNaN(this.buyVolume)&&isNaN(this.sellVolume)&&isNaN(this.price)&&2===this.priceDigit&&this.isLastDone===!1&&this.priceType.isEqual(Ge.LIMIT)&&this.isBestBidOffer===!1&&this.isMatch===!1&&isNaN(this.previousClose)},e.prototype.clear=function(){this.buyOrders=[],this.sellOrders=[],this.totalBuyBalanceVolume=0,this.totalSellBalanceVolume=0,this.noOfBuyOrder=0,this.noOfSellOrder=0,this.buyVolume=NaN,this.sellVolume=NaN,this.price=NaN,this.priceType=Ge.LIMIT,this.priceDigit=2,this.isLastDone=!1,this.isBestBidOffer=!1,this.isMatch=!1,this.previousClose=NaN},e.prototype.isLimit=function(){return this.priceType.isEqual(Ge.LIMIT)},e.prototype.processBuyOrder=function(){var e=this,t=0;this.buyOrders.forEach(function(i,r){i instanceof Qa?(t+=i.balanceVolume,i.isMarkDragged&&(e.buyOrderItem.isMarkDragged=!0)):i instanceof Ja&&(t+=i.balanceVolume,i.isMarkDragged&&(e.buyOrderItem.isMarkDragged=!0))}),this.totalBuyBalanceVolume=t,this.noOfBuyOrder=this.buyOrders.length},e.prototype.processSellOrder=function(){var e=this,t=0;this.sellOrders.forEach(function(i,r){i instanceof Qa?(t+=i.balanceVolume,i.isMarkDragged&&(e.sellOrderItem.isMarkDragged=!0)):i instanceof Ja&&(t+=i.balanceVolume,i.isMarkDragged&&(e.sellOrderItem.isMarkDragged=!0))}),this.totalSellBalanceVolume=t,this.noOfSellOrder=this.sellOrders.length},e}(),vt=function(){function e(){}return e.parse=function(t,i,r){var n=new mt,o=e.getCeiling(t),s=e.getFloor(t),a=o.price,c=s.price,l=e.createLadder(t,i,Be.BUY),u=e.createLadder(t,i,Be.SELL),d=u.reverse().concat(l);if(r){d=[o].concat(d,[s]),d=d.sort(function(e,t){return e.price>t.price?-1:e.price===t.price?0:1}),d=d.reduce(function(e,t,i){var r=e.length;if(r>0&&e[r-1].price===t.price&&e[r-1].priceType.isEqual(t.priceType)){var n=e[r-1];n.buyVolume=isNaN(t.buyVolume)?n.buyVolume:t.buyVolume,n.sellVolume=isNaN(t.sellVolume)?n.sellVolume:t.sellVolume}else e.push(t);return e},[]);var h=-1;d.some(function(e,t){if(!e.isLimit())return h=t,!0});var p=h!==-1?d.splice(h,1):[];n=p.length>0?p[0]:n,d=d.map(function(e){return(e.price<c||e.price>a)&&e.clear(),e}),d.unshift(n),d=d.filter(function(e){return!e.isEmpty()})}else{var m=void 0,v=void 0,f=void 0,y=void 0,g=void 0;if(f=u.length,v=l.length,0===d.length)d=new Array(12).join().split(",").map(function(){return new mt});else{m=angular.copy(d),y=6-f,g=m[0].price;for(var S=0;S<y;S++){var b=new mt;b.price=Ve.updatePriceWithSpread(t,g,!0),g=b.price,m.unshift(b)}d=m,m=angular.copy(d.reverse()),y=6-v,g=m[0].price;for(var S=0;S<y;S++){var b=new mt;b.price=Ve.updatePriceWithSpread(t,g,!1),g=b.price,m.unshift(b)}d=m.reverse(),d=d.map(function(e){return(e.price<c||e.price>a)&&e.clear(),e.price===a&&o.clear(),e.price===c&&s.clear(),e})}d=[o].concat(d,[s])}var C=new Array(14).join().split(",").map(function(){return new mt});return C=C.map(function(e,i){return d[i]&&!d[i].isEmpty()&&(e=angular.copy(d[i]),e.previousClose=t.getPreviousClose(),e.priceDigit=t.getPriceDigit(),e.price===t.summaryData.lastDone&&(e.isLastDone=!0)),e})},e.createLadder=function(e,t,i){var r=[],n=i.isSell()?t.getOfferList():t.getBidList(),o=i.isSell()?t.isOfferMatch:t.isBidMatch;return n.bidOfferList.forEach(function(e,t){var s=new mt;0===t&&(s.isBestBidOffer=!0,s.priceType=Ge.lookup[n.flag],s.isMatch=o),i.isSell()?s.sellVolume=n.bidOfferList[t].volume:s.buyVolume=n.bidOfferList[t].volume,void 0!==n.bidOfferList[t].price&&(s.price=n.bidOfferList[t].price),r.push(s)}),r},e.getCeiling=function(e){var t=new mt;return t.priceDigit=e.getPriceDigit(),t.price=e.getCeiling(),t.previousClose=e.getPreviousClose(),t},e.getFloor=function(e){var t=new mt;return t.priceDigit=e.getPriceDigit(),t.price=e.getFloor(),t.previousClose=e.getPreviousClose(),t},e}(),ft=function(){function e(){}return e.CANCEL="Cancel",e.CHANGE="Change",e.PLACE="Place",e.MARK_DRAGGED="mark",e.UNMARK_DRAGGED="unmark",e}(),yt=function(){function e(){}return e.toNumber=function(t){return""===t?null:e.toNumberOrNan(t)},e.toNumberOrZero=function(t){return""!==t&&t?e.toNumberOrNan(t):0},e.toNumberOrNan=function(e){return parseFloat(e.replace(/[,]/g,""))},e.formatVolume=function(e){return p(e)},e.formatPrice=function(e,t){return n(e,t)},e.formatPriceWithoutDigit=function(e){return o(e)},e.formatChangeWithoutDigit=function(e){return v(e)},e.formatChange=function(e,t){return m(e,t)},e.formatPercentChange=function(e){return f(e)},e.formatPercent=function(e){return y(e)},e.formatBidOffer=function(e,t,i){return S(e,t,i)},e.fomatVolumeKM=function(e){return C(e)},e}(),gt=(function(){function e(){}return e}(),function(){function e(){}return e}()),St=(function(){function e(){}return e.NORMAL_DATA="NORMAL_DATA",e}(),function(){function e(){}return e}()),bt=function(){function e(){this.txtTerminalType=Xe,this.APIVersion=me}return e}(),Ct=function(){function e(){this.symbolList=[]}return e}(),Et=function(){function e(){}return e}(),At=function(){function e(){this.txtTerminalType=Xe}return e}(),wt=function(){function e(e,t,i){this.requestParam=e,this.shortName=t,this.fullName=i}return e}(),Tt=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return ne(t,e),t.MORNING=new t("MORNING","Morning","Morning"),t.AFTERNOON=new t("AFTERNOON","Afternoon","Afternoon"),t}(wt),Dt=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return ne(t,e),t.WEEKLY=new t("WEEKLY","Weekly","Weekly"),t.MONTHLY=new t("MONTHLY","Monthly","Monthly"),t}(wt),It=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return ne(t,e),t.MON=new t("mon","Mon","Monday"),t.TUE=new t("tue","Tue","Tuesday"),t.WED=new t("wed","Wed","Wednesday"),t.THU=new t("thu","Thu","Thursday"),t.FRI=new t("fri","Fri","Friday"),t.WEEKLY_LIST=[t.MON,t.TUE,t.WED,t.THU,t.FRI],t.D_1=new t("1","1","1st"),t.D_5=new t("5","5","5th"),t.D_15=new t("15","15","15th"),t.D_25=new t("25","25","25th"),t.MONTHLY_LIST=[t.D_1,t.D_5,t.D_15,t.D_25],t}(wt),Pt=function(e){function t(t,i,r){return e.call(this,t,i,r)||this}return ne(t,e),t.M_3=new t("3","3M","3 Months"),t.M_6=new t("6","6M","6 Months"),t.M_9=new t("9","9M","9 Months"),t.M_12=new t("12","12M","12 Months"),t.W_4=new t("4","4W","4 Weeks"),t.W_8=new t("8","8W","8 Weeks"),t.W_12=new t("12","12W","12 Weeks"),t.W_16=new t("16","16W","16 Weeks"),t.DURATION_LIST_MONTHLY=[t.M_3,t.M_6,t.M_9,t.M_12],t.DURATION_LIST_WEEKLY=[t.W_4,t.W_8,t.W_12,t.W_16],t}(wt),Ot=(function(){function e(){}return e}(),function(){function e(){}return e}()),kt=function(){function e(){}return e.WAITING="Waiting",e.REJECTED="Rejected",e.CANCELLED="Cancelled",e.ACTIVATING="Activating",e.ACTIVATED="Activated",e.EXPIRED="Expired",e}(),$t=function(){function e(){this.policies=[],this.txtTerminalType=Xe}return e.prototype.addPolicyId=function(e){this.policies.push({policyId:e})},e}(),Lt=(function(){function e(){}return e.TRADING_ACCOUNT_NOT_FOUND_EQUITY="Get Account Info : Trading account not found",e.NOT_ACCEPT_DISCLAIMER="DCA account validation fail: Cannot access to this account because user has not accept the disclaimer yet.",e}(),function(){function e(){}return e}()),Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Lt),Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Lt),Rt=function(){function e(e,t){this.message=e,this.httpStatus=t}return e}(),_t=function(){function e(){}return e}(),Vt=function(){function e(){}return e.parse=function(t){for(var i=t.length,r=[],n=0;n<i;n++){var o=new e;o.accountNo=t[n].accountNo,o.frontType=t[n].frontType,o.accountType=t[n].accountType,o.fullAccountType=t[n].fullAccountType,o.canTrade=t[n].canTrade,o.canUseBasket=t[n].canUseBasket,o.sblFlag=t[n].sblFlag,o.canTradeSellCollateral=t[n].canTradeSellCollateral,o.canTradeSellDeposit=t[n].canTradeSellDeposit,o.clientType=t[n].clientType,o.canTradeSBL=t[n].canTradeSBL,o.tradeType=t[n].tradeType,o.orderType=t[n].orderType,r.push(o)}return r},e}(),Bt=function(){function e(){this.Service="PlaceOrder",this.type="place",this.txtTerminalType=Xe,this.apiService="Gen5",this.APIVersion=me}return e}(),xt=function(){function e(){this.Service="PlaceOrder",this.type="cancel",this.txtTerminalType=Xe,this.apiService="Gen5",this.APIVersion=me}return e}(),Ft=function(){function e(){this.APIVersion=me,this.txtTerminalType=Xe}return e.prototype.setConfirmWarn=function(){this.confirmedWarn="YES"},e}(),Ut=function(){function e(){this.APIVersion=me,this.txtClientType=ve,this.txtSymbol="",this.txtPriceType="",this.txtBorS="",this.txtPrice="",this.txtValidity="",this.txtPublishedQty="",this.txtNvdr="",this.txtQty=""}return e.prototype.setConfirmWarn=function(){this.txtConfirmedWarn="Y"},e.prototype.getConfirmWarn=function(){return"Y"===this.txtConfirmedWarn},e.prototype.appendOrder=function(e){this.txtSymbol=0===this.txtSymbol.length?e.symbol:this.txtSymbol+","+e.symbol,this.txtPriceType=0===this.txtPriceType.length?e.priceType.equityMultiOrderValue:this.txtPriceType+","+e.priceType.equityMultiOrderValue,this.txtBorS=0===this.txtBorS.length?e.side.shortname:this.txtBorS+","+e.side.shortname,this.txtPrice=0===this.txtPrice.length?""+this.getParsedPrice(e.price,e.priceType):this.txtPrice+","+this.getParsedPrice(e.price,e.priceType),this.txtValidity=0===this.txtValidity.length?""+e.validity.value:this.txtValidity+","+e.validity.value,this.txtPublishedQty=0===this.txtPublishedQty.length?""+this.getParsedIceberg(e.icebergVolume):this.txtPublishedQty+","+this.getParsedIceberg(e.icebergVolume),this.txtNvdr=0===this.txtNvdr.length?""+this.getParsedNVDR(e.isNVDR):this.txtNvdr+","+this.getParsedNVDR(e.isNVDR),this.txtQty=0===this.txtQty.length?""+yt.toNumberOrNan(e.volume):this.txtQty+","+yt.toNumberOrNan(e.volume)},e.prototype.getParsedNVDR=function(e){return e?1:0},e.prototype.getParsedPrice=function(e,t){return t.value!==Ge.LIMIT.value?Number.NaN:yt.toNumberOrNan(e)},e.prototype.getParsedIceberg=function(e){return""===e||void 0===e?Number.NaN:yt.toNumberOrNan(e)},e}(),qt=function(){function e(){}return e.DCA="dcaOrder",e.DCA_ORDER_MKTREP="dcaOrderMarketrep",e}(),jt=function(){function e(e,t,i,r,n,o){this.streamingAttribute=e,this.$http=t,this.$q=i,this.$httpParamSerializerJQLike=r,this.alertService=n,this.urlStore=o}return e.prototype.initialUMSession=function(){var e=this;return this.$http({method:"GET",url:this.streamingAttribute.itpHost+"/realtime/blank.jsp",headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return""},function(t){var i=new Rt("Connection Error!",t.status);return e.$q.reject(i)})},e.prototype.getAccountListAndTurnoverList=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_EQUITY_ACCOUNT_INFO_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({json:"true"}),withCredentials:!0}).then(function(t){return"T"===t.data.result?t.data:e.$q.reject()},function(t){return e.alertService.showErrorAlert("Connection Error!"),e.$q.reject()}).then(function(t){var i=new _t;return i.equityAccountInfoList=e.parseAccountList(t.accountInfoList),i.turnoverList=e.parseTurnoverList(t.turnoverList),i})},e.prototype.parseAccountList=function(e){var t=[];return void 0!==e&&(t=Vt.parse(e)),t},e.prototype.parseTurnoverList=function(e){var t=[];return e.forEach(function(e){t.push(cr.parse(e))}),t},e.prototype.getAccountInfo=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_STREAMING_SEOS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({Service:"AccountInfo",txtAccountNo:e,APIVersion:me}),withCredentials:!0}).then(function(t){var i={};return i.message=t.data,i.accountNo=e,i},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.getAccountInfoDetail=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_EQUITY_ACCOUNT_INFO_DETAIL_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({txtTerminalType:Xe,txtAccountNo:e,APIVersion:me}),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.placeOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_STREAMING_SEOS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.cancelOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_STREAMING_SEOS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.changeOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_CHANGE_ORDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject({message:"Connection Error!",result:"F"})})},e.prototype.getOrderStatus=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_STREAMING_SEOS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({Service:"OrderStatus",txtAccountNo:e,APIVersion:me}),withCredentials:!0}).then(function(t){var i={};return i.message=t.data,i.accountNo=e,i},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getPortfolio=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_STREAMING_SEOS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({txtAccountType:e.accountType,APIVersion:me,txtAccountNo:e.accountNo,Service:"Portfolio"}),withCredentials:!0}).then(function(t){var i={};return i.message=t.data,i.accountNo=e.accountNo,i},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getDealSummary=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_STREAMING_SEOS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({APIVersion:me,txtAccountNo:e.accountNo,Service:"DealSummary"}),withCredentials:!0}).then(function(t){var i={};return i.message=t.data,i.accountNo=e.accountNo,i},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getWhatsNew=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_WHATS_NEW_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({}),withCredentials:!0}).then(function(e){return e.data},function(){return e.$q.reject()})},e.prototype.placeEquityMultiOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_STREAMING_MULTI_ORDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){return e.data},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.checkDisclaimerForService=function(e){var t=this,i=""+this.streamingAttribute.itpHost+this.urlStore.ITP_CHECK_DISCLAIMER,r={headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0},n=this.$q.defer();return this.$http.post(i,JSON.stringify({service:e}),r).then(function(e){var t=e.data;return t.isAcceptedDisclaimer?n.resolve():n.reject()},function(){return t.alertService.showErrorAlert("Connection Error!"),n.reject()}),n.promise},e.prototype.getDCAInitialData=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_INITIAL_DATA,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){var i=new Rt("Connection Error! [getDCAInitialData]",e.status);return t.$q.reject(i)})},e.prototype.getDCAMktInitialData=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_MKT_INITIAL_DATA,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return e.data},function(t){var i=new Rt("Connection Error! [getDCAMktInitialData]",t.status);return e.$q.reject(i)})},e.prototype.validateDCAMktAccount=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_MKT_VALIDATE_ACCOUNT,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,data:{accountNumber:e}}).then(function(e){return e.data},function(e){var i=new Rt("Connection Error! [validateDCAMktAccount]",e.status);return t.$q.reject(i)})},e.prototype.getBackTest=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_BACK_TEST,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.getUserDetail=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_USER_DETAIL+"?accountNumber="+e.accountNo,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.data)})},e.prototype.getMktUserDetail=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_MKT_USER_DETAIL+"?accountNumber="+e.accountNo,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.data)})},e.prototype.placeDCAOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_PLACE_ORDER,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.data)})},e.prototype.placeMktDCAOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_MKT_PLACE_ORDER,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.data)})},e.prototype.getCountTransaction=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_COUNT_TRANSACTION,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.errorMsg)})},e.prototype.getDCAMktCountTransaction=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DCA_MKT_COUNT_TRANSACTION,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.errorMsg)})},e.prototype.getDCAPolicyDetail=function(e,t){var i=this;return void 0===t&&(t=this.urlStore.ITP_DCA_ORDER_DETAIL),this.$http({method:"GET",url:""+this.streamingAttribute.itpHost+t+"?policyId="+e,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return e.data},function(e){return i.alertService.showErrorAlert("Connection Error!"),i.$q.reject()})},e.prototype.getDCAMktPolicyDetail=function(e){return this.getDCAPolicyDetail(e,this.urlStore.ITP_DCA_MKT_ORDER_DETAIL)},e.prototype.cancelDCAPolicy=function(e,t){var i=this;return void 0===t&&(t=this.urlStore.ITP_DCA_CANCEL_ORDER),
this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){return i.alertService.showErrorAlert("Connection Error!"),i.$q.reject()})},e.prototype.cancelDCAMktPolicy=function(e){return this.cancelDCAPolicy(e,this.urlStore.ITP_DCA_MKT_CANCEL_ORDER)},e.prototype.getMarginableSecurities=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_MARGINABLE_SECURITIES_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){return e.data},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.getEquityMultiOrderExtractData=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_MULTI_ORDER_EXTRACT_UPLOAD_DATA,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({accountNo:e}),withCredentials:!0}).then(function(e){return e.data},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.conditionDGWPlaceTrailingOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DGW_PLACE_TRAILIN_ORDER,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.data)})},e.prototype.conditionDGWPlaceStopOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.itpHost+this.urlStore.ITP_DGW_PLACE_STOP_ORDER,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(e),withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e.data)})},e.$inject=["StreamingAttribute","$http","$q","$httpParamSerializerJQLike","AlertService","URLStore"],e}(),Ht=function(){function e(e){switch(e){case tt.MARKET_REP:this.Service="MktRepOrderInfo";break;default:this.Service="OrderInfo"}}return e}(),Wt=function(e){function t(t){var i=e.call(this,t)||this;return i.OrderMode="AccountInfo",i.NewMode="PULL",i.APIVersion=me,i}return ne(t,e),t}(Ht),Yt=function(e){function t(t){var i=e.call(this,t)||this;return i.OrderMode="PortInfo",i.APIVersion=me,i.txtTerminalType=Xe,i}return ne(t,e),t}(Ht),Gt=function(e){function t(t){var i=e.call(this,t)||this;return i.OrderMode="DealSummary",i.APIVersion=me,i.txtTerminalType=Xe,i}return ne(t,e),t}(Ht),Kt=function(e){function t(t){var i=e.call(this,t)||this;return i.OrderMode="OrderInfo",i.APIVersion=me,i.txtTerminalType=Xe,i}return ne(t,e),t}(Ht),zt=function(){function e(){this.txtClientType="I",this.txtTerminalType=Xe,this.apiService="Gen5",this.APIVersion=me,this.mode="placePro"}return e}(),Qt=function(){function e(){this.APIVersion=me,this.mode="place"}return e}(),Xt=function(){function e(){this.mode="cancel",this.txtTerminalType=Xe,this.apiService="Gen5",this.APIVersion=me}return e}(),Jt=function(){function e(){}return e.OPEN="open",e.CLOSE="close",e.lookup={O:e.OPEN,C:e.CLOSE,Open:e.OPEN,Close:e.CLOSE},e}(),Zt=function(){function e(){this.APIVersion=2,this.txtTerminalType=Xe}return e.prototype.setConfirmWarn=function(){this.confirmedWarn="YES"},e}(),ei=function(){function e(){this.APIVersion=me,this.txtSymbol="",this.txtSide="",this.txtPosition="",this.txtPriceType="",this.txtPrice="",this.txtValidity="",this.txtPublishedQty="",this.txtQty=""}return e.prototype.setConfirmWarn=function(){this.txtConfirmedWarn="Y"},e.prototype.appendOrder=function(e){this.txtSymbol=0===this.txtSymbol.length?e.symbol:this.txtSymbol+","+e.symbol,this.txtSide=0===this.txtSide.length?e.side.shortname:this.txtSide+","+e.side.shortname,this.txtPosition=0===this.txtPosition.length?""+this.getParsedPosition(e.position):this.txtPosition+","+this.getParsedPosition(e.position),this.txtPriceType=0===this.txtPriceType.length?e.priceType.derivativesMultiOrderValue:this.txtPriceType+","+e.priceType.derivativesMultiOrderValue,this.txtPrice=0===this.txtPrice.length?""+this.getParsedPrice(e.price,e.priceType):this.txtPrice+","+this.getParsedPrice(e.price,e.priceType),this.txtValidity=0===this.txtValidity.length?""+e.validity.value:this.txtValidity+","+e.validity.value,this.txtQty=0===this.txtQty.length?""+yt.toNumberOrNan(e.volume):this.txtQty+","+yt.toNumberOrNan(e.volume),this.txtPublishedQty=0===this.txtPublishedQty.length?""+this.getParsedIceberg(e.icebergVolume):this.txtPublishedQty+","+this.getParsedIceberg(e.icebergVolume)},e.prototype.getParsedPrice=function(e,t){return t.value!==Ge.LIMIT.value?0:yt.toNumberOrNan(e)},e.prototype.getParsedIceberg=function(e){return""===e||void 0===e?0:yt.toNumberOrNan(e)},e.prototype.getParsedPosition=function(e){return e.requestParam},e}(),ti=function(){function e(){this.mode="init",this.APIVersion=me}return e}(),ii=function(){function e(){this.mode="getTRType",this.APIVersion=me}return e}(),ri=function(){function e(){this.APIVersion=me}return e}(),ni=function(){function e(){}return e}(),oi=function(){function e(){}return e}(),si=function(){function e(){}return e}(),ai=function(){function e(e,t,i,r,n,o){this.streamingAttribute=e,this.$http=t,this.$q=i,this.$httpParamSerializerJQLike=r,this.alertService=n,this.urlStore=o}return e.prototype.initialUMSession=function(){var e=this;return this.$http({method:"GET",url:this.streamingAttribute.derivHost+"/realtime/blank.jsp",headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return""},function(t){var i=new Rt("Connection Error!",t.status);return e.$q.reject(i)})},e.prototype.getAccountInformation=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_STREAMING_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(t){var i=(t.data.toString(),{});return i.message=t.data.toString(),i.accountNo=e.accountNo,i},function(e){return t.alertService.showErrorAlert("Cannot get DerivativesAccountInformation: HTTP response is invalid"),t.$q.reject(e)})},e.prototype.getAccountInfoDetail=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_DERIVATIVES_ACCOUNT_INFO_DETAIL_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({txtAccountNo:e,APIVersion:me}),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.getAllAccountsUnderHierarchy=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_AJAX_LIST_ACCOUNT_MKTREP,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{},withCredentials:!0}).then(function(e){var t=e.data;return t},function(t){return e.alertService.showErrorAlert("Connection Error!"),e.$q.reject(t)})},e.prototype.placeOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_ORDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getOrderStatus=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_STREAMING_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(t){var i=(t.data.toString(),{});return i.message=t.data.toString(),i.accountNo=e.accountNo,i},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.cancelOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_ORDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.changeOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_CHANGE_ORDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject({message:"Connection Error!",result:"F"})})},e.prototype.getPortfolio=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_STREAMING_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(t){var i={};return i.message=t.data.toString(),i.accountNo=e.accountNo,i},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getDealSummary=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_STREAMING_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(t){var i={};return i.message=t.data.toString(),i.accountNo=e.accountNo,i},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.placeDerivativesMultiOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_MULTI_ORDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){return e.data},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getTradeRequestCPM=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_AJAX_BLOCK_TRADE_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(new ti),withCredentials:!0}).then(function(e){var t=e.data,i=t;return i},function(){return e.alertService.showErrorAlert("Connection Error!"),e.$q.reject()})},e.prototype.getTradeRequestTRtype=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_AJAX_BLOCK_TRADE_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data,i=t;return i},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.placeTradeReportOrder=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_AJAX_BLOCK_TRADE_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getTradeInfo=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_AJAX_BLOCK_TRADE_INFO_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(new ri),withCredentials:!0}).then(function(e){var t=e.data;return t},function(t){return e.alertService.showErrorAlert("Connection Error!"),e.$q.reject()})},e.prototype.getDerivativesMultiOrderExtractData=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+this.urlStore.ITPD_MULTI_ORDER_EXTRACT_UPLOAD_DATA,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({accountNo:e}),withCredentials:!0}).then(function(e){return e.data},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.getPayoffOrdersAndPorts=function(e){var t=this,i=this.urlStore.ITPD_GET_PAYOFF_PORTS_AND_ORDERS;e.isMarketRep&&(i=this.urlStore.ITPD_GET_PAYOFF_PORTS_AND_ORDERS_MKT);var r={accountNo:e.accountNo,filterUnderlying:e.filterUnderlying,isRequestOrder:e.isRequestOrder,isRequestPortfolio:e.isRequestPortfolio};return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+i,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(r),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.calculatePayoff=function(e){var t=this,i=this.urlStore.ITPD_CALCULATE_PAYOFF;e.isMarketRep&&(i=this.urlStore.ITPD_CALCULATE_PAYOFF_MKT);var r={accountNo:e.accountNo,filterUnderlying:e.filterUnderlying,portfolioAndOrder:e.portfolioAndOrder,simulated:e.simulated};return this.$http({method:"POST",url:""+this.streamingAttribute.derivHost+i,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(r),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.$inject=["StreamingAttribute","$http","$q","$httpParamSerializerJQLike","AlertService","URLStore"],e}(),ci=function(){function e(){this.signals={}}return e.prototype.createSignal=function(e){return e=e.toUpperCase(),this.hasSignal(e)?this.signals[e]:(this.signals[e]=new signals.Signal,this.signals[e])},e.prototype.add=function(e,t){e=e.toUpperCase(),this.hasSignal(e)||this.createSignal(e),this.signals[e].add(t)},e.prototype.remove=function(e,t){e=e.toUpperCase(),this.hasSignal(e)&&(this.signals[e].remove(t),0===this.signals[e].getNumListeners()&&this.destroy(e))},e.prototype.destroy=function(e){e=e.toUpperCase(),this.hasSignal(e)&&(this.signals[e].dispose(),this.signals[e]=null,delete this.signals[e])},e.prototype.dispatch=function(e,t){e=e.toUpperCase(),this.hasSignal(e)?this.signals[e].dispatch(t):(this.createSignal(e),this.signals[e].dispatch(t))},e.prototype.getNumListeners=function(e){return e=e.toUpperCase(),this.hasSignal(e)?this.signals[e].getNumListeners():0},e.prototype.getSignal=function(e){return e=e.toUpperCase(),this.signals[e]},e.prototype.getAllKey=function(){return Object.keys(this.signals)},e.prototype.hasSignal=function(e){return this.signals.hasOwnProperty(e)&&null!==this.signals[e]},e}(),li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.createSignal=function(e){if(e=e.toUpperCase(),this.hasSignal(e))return this.signals[e];var t=new signals.Signal;return t.memorize=!0,this.signals[e]=t,this.signals[e]},t.prototype.remove=function(e,t){e=e.toUpperCase(),this.hasSignal(e)&&this.signals[e].remove(t)},t.prototype.clearMemorize=function(e){e=e.toUpperCase(),this.hasSignal(e)&&this.signals[e].forget()},t.prototype.dispatch=function(e,t){e=e.toUpperCase(),this.hasSignal(e)||this.createSignal(e),this.signals[e].dispatch(t)},t}(ci),ui=function(){function e(){}return e}(),di=function(){function e(){}return e}(),hi=function(){function e(){}return e.LV1="|",e.LV2="^",e.LV3="~",e.LV4="$",e}(),pi=function(){function e(e,t,i,r,n,o,s){this.itpService=e,this.itpdService=t,this.mmService=i,this.$http=r,this.userInfoService=n,this.$httpParamSerializerJQLike=o,this.$q=s,this.signals=new li,this.accountEquityList=[],this.accountDerivList=[]}return e.prototype.subscribeGetEquityAccountInfo=function(e,t){this.signals.add(e+"-E",t)},e.prototype.unsubscribeGetEquityAccountInfo=function(e,t){var i=e+"-E";this.signals.remove(i,t),0===this.signals.getNumListeners(i)&&this.userInfoService.isMarketRep()&&this.signals.destroy(i)},e.prototype.subscribeGetDerivativesAccountInfo=function(e,t){this.signals.add(e+"-D",t)},e.prototype.unsubscribeGetDerivativesAccountInfo=function(e,t){var i=e+"-D";this.signals.remove(i,t),0===this.signals.getNumListeners(i)&&this.userInfoService.isMarketRep()&&this.signals.destroy(i)},e.prototype.publishGetEquityAccountInfo=function(e,t){this.signals.dispatch(e+"-E",t)},e.prototype.publishGetDerivativesAccountInfo=function(e,t){this.signals.dispatch(e+"-D",t)},e.prototype.clearMemorizedEquityAccountInfo=function(e){this.signals.clearMemorize(e+"-E")},e.prototype.clearMemorizedDerivativesAccountInfo=function(e){this.signals.clearMemorize(e+"-D")},e.prototype.requestEquityAccountInfo=function(e){var t=this;return this.itpService.getAccountInfo(e).then(function(i){var r=t.parseAccountInfoStreamingSEOSResponse(i.message,i.accountNo);return r.isSuccess?(t.publishGetEquityAccountInfo(i.accountNo,r.accountInfo),r):(t.clearMemorizedEquityAccountInfo(e),t.$q.reject(r))})},e.prototype.requestDerivativeAccountInfo=function(e){var t=this,i=new Wt(this.userInfoService.getApplicationRole());return i.accountNo=e,this.itpdService.getAccountInformation(i).then(function(i){var r=t.parseDerivativeAccountInfoStreamingResponse(i.message,i.accountNo);return r.isSuccess?(t.publishGetDerivativesAccountInfo(i.accountNo,r.accountInfo),r):(t.clearMemorizedDerivativesAccountInfo(e),t.$q.reject(r))})},e.prototype.requestAccountName=function(e,t){var i=this;return this.mmService.getAccountName(e,t).then(function(e){var t=i.parseAccountName(e);return t.isSuccess?t:i.$q.reject(t)})},e.prototype.requestEquityAccountInfoDetail=function(e){var t=this;return this.itpService.getAccountInfoDetail(e).then(function(e){return"T"!==e.result?t.$q.reject(e):e})},e.prototype.requestDerivativesAccountInfoDetail=function(e){var t=this;return this.itpdService.getAccountInfoDetail(e).then(function(e){return"T"!==e.result?t.$q.reject(e):e})},e.prototype.parseAccountName=function(e){var t=e.split(hi.LV1),i=new di;if(i.isSuccess="T"===t[0],i.isSuccess){var r=t[1].split(hi.LV2);i.engName=this.filterSpecialCharacters(r[1]);var n=t[2].split(hi.LV2);i.thName=this.filterSpecialCharacters(n[1])}return i},e.prototype.filterSpecialCharacters=function(e){var t=e.split("");return t=t.filter(function(e){return/[a-zA-Z0-9- .]/.test(e)}),t.join("")},e.prototype.parseDerivativeAccountInfoStreamingResponse=function(t,i){var r={};r.isSuccess=!1,r.isWarning=!1;for(var n=t.split(hi.LV3),o=parseInt(n[2]),s=3;s<3+o;s++){var a=n[s],c=a.split(hi.LV2),l=c[1];if(l===e.EQUITY_ACCOUNT_INFO_SERVICE_ID){var u=c[2];if(r.isSuccess="T"===u,r.isWarning="W"===u,r.isSuccess){var d={},h=c[5].split(hi.LV1);d.accountNo=i,d.creditLine=parseFloat(h[0]),d.excessEquity=parseFloat(h[1]),d.cashBalance=parseFloat(h[2]),d.engName=this.parseNullableString(h[3]),d.totalMR=parseFloat(h[4]),d.totalMM=parseFloat(h[5]),d.callForceFlag=this.parseNullableString(h[6]),d.callForceMargin=parseFloat(h[7]);var p=h[8];d.autoNet="Y"===p,r.accountInfo=d}else r.isWarning?r.warnMessage=c[3]:r.errorMessage=c[3];return r}}},e.prototype.parseAccountInfoStreamingSEOSResponse=function(t,i){for(var r=new ui,n=t.split(hi.LV3),o=parseInt(n[1]),s=2;s<2+o;s++){var a=n[s],c=a.split(hi.LV2),l=c[1];if(l===e.EQUITY_ACCOUNT_INFO_SERVICE_ID||l===e.EQUITY_ACCOUNT_INFO_NOT_FOUND_SERVICE_ID){var u=c[2],d="T"===u,h="W"===u;if(r.isSuccess=d,r.isWarning=h,d){var p={},m=c[5].split(hi.LV1);p.accountNo=i,p.creditLimit=parseFloat(m[0]),"N/A"===m[1].trim()?p.cashBalance=Number.NaN:p.cashBalance=parseFloat(m[1]),p.lineAvailable=parseFloat(m[2]),this.userInfoService.isMarketRep()&&(p.accountType="CREDIT_BALANCE"===m[3]?yi.CREDIT_BALANCE:yi.CASH_BALANCE),"N/A"===m[4].trim()?p.percentMM=Number.NaN:p.percentMM=parseFloat(m[4]),"null"===m[5].trim()&&(p.clientType=""),"N/A".trim()===m[6].trim()?p.netSettlementLine=Number.NaN:p.netSettlementLine=parseFloat(m[6]),m.length>7&&("N/A".trim()===m[7].trim()?p.purchasingPower=Number.NaN:p.purchasingPower=parseFloat(m[7]),"N/A".trim()===m[8].trim()?p.marginRequire=Number.NaN:p.marginRequire=parseFloat(m[8]),"N/A".trim()===m[9].trim()?p.liablities=Number.NaN:p.liablities=parseFloat(m[9])),r.accountInfo=p}else h?r.warnMessage=c[5]:r.errorMessage=c[5];return r}}},e.prototype.parseNullableString=function(e){return"null"===e?"":e},e.prototype.setServerDefaultAccountItem=function(e){this.serverDefaultAccount=e},e.prototype.processUserDefaultAccount=function(e){var t=this,i=e.orderEntryConfiguration.defaultAccountConfiguration;if(this.defaultAccount=null,i&&i.enableDefaultAccount){var r=mi.lookup[""+i.systemType];switch(r){case mi.EQUITY:this.defaultAccount=null,this.accountEquityList.some(function(e){return e.accountNo===i.accountNo&&(t.defaultAccount=e,!0)}),null===this.defaultAccount&&(this.defaultAccount=0!==this.accountEquityList.length?this.accountEquityList[0]:null);break;case mi.DERIVATIVES:this.defaultAccount=null,this.accountDerivList.some(function(e){return e.accountNo===i.accountNo&&(t.defaultAccount=e,!0)}),null===this.defaultAccount&&(this.defaultAccount=0!==this.accountDerivList.length?this.accountDerivList[0]:null)}}if(null===this.defaultAccount){var n=this.accountEquityList.concat(this.accountDerivList);this.defaultAccount=0!==n.length?n[0]:null}},e.prototype.getAllAccount=function(){var e=[];return this.accountEquityList.forEach(function(t){e.push(t)}),this.accountDerivList.forEach(function(t){e.push(t)}),e},e.prototype.getAccountByAccountNumberAndSystemType=function(e,t){var i;return t===mi.EQUITY?this.accountEquityList.forEach(function(t){t.accountNo===e&&(i=t)}):t===mi.DERIVATIVES&&this.accountDerivList.forEach(function(t){t.accountNo===e&&(i=t)}),i},e.prototype.getDefaultDerivativesAccount=function(){if(0===this.accountDerivList.length){var e=new vi;return e.systemType=mi.DERIVATIVES,e.isEmptyAccount=!0,e}return this.accountDerivList[0]},e.EQUITY_ACCOUNT_INFO_SERVICE_ID="AccountInfo",e.EQUITY_ACCOUNT_INFO_NOT_FOUND_SERVICE_ID="PlaceOrder",e.DERIVATIVES_ACCOUNT_INFO_SERVICE_ID="AccountInfo",e.$inject=["ITPService","ITPDService","MMService","$http","UserInfoService","$httpParamSerializerJQLike","$q"],e}(),mi=function(){function e(){}return e.EQUITY="EQUITY",e.DERIVATIVES="DERIVATIVES",e.lookup={E:e.EQUITY,D:e.DERIVATIVES},e}(),vi=function(){function e(){this.isEmptyAccount=!1,this.hasAutoNet=!1,this.sblFlag="N",this.clientType=ve,this.isAllDerivativesAccount=!1}return e.createAllDerivativesAccount=function(){var t=new e;return t.systemType=mi.DERIVATIVES,t.isEmptyAccount=!0,t.isAllDerivativesAccount=!0,t.frontType=fi.SEOS,t},e.parseFromInitDataEquityAccountInfo=function(t){for(var i=t.length,r=[],n=0;n<i;n++){var o=new e;o.accountNo=t[n].accountNo,o.frontType=t[n].frontType,o.accountType=t[n].accountType,o.canTrade=t[n].canTrade,o.systemType=t[n].systemType,o.canUseBasket=t[n].canUseBasket,o.accountName=e.parseAccountDisplayName(o),r.push(o)}return r},e.parseFromInitDataDerivativesAccountInfo=function(t){for(var i=t.length,r=[],n=0;n<i;n++){var o=new e;o.accountNo=t[n].accountNo,o.frontType=t[n].frontType,o.accountType=t[n].accountType,o.canTrade=t[n].canTrade,o.systemType=t[n].systemType,o.canUseBasket=t[n].canUseBasket,o.accountName=e.parseAccountDisplayName(o),r.push(o)}return r},e.parseAccountDisplayName=function(e){var t=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};if(mi.DERIVATIVES===e.systemType){var i=e.systemType.toString();return e.accountNo+" ("+t(i)+")"}return e.accountNo+" ("+gi.getDisplayName(e.fullAccountType)+")"},e.empty=function(){var t=new e;return t.isEmptyAccount=!0,t.accountNo="",t.accountName="",t},e.prototype.isEquity=function(){return this.systemType===mi.EQUITY},e.prototype.isDerivatives=function(){return this.systemType===mi.DERIVATIVES},e.prototype.isAllDerivatives=function(){return this.systemType===mi.DERIVATIVES&&this.isAllDerivativesAccount},e.prototype.equals=function(e){return e.isEmptyAccount&&this.isEmptyAccount?this.systemType===e.systemType:this.accountName===e.accountName&&this.accountNo===e.accountNo&&this.accountType===e.accountType&&this.frontType===e.frontType&&this.systemType===e.systemType},e.prototype.isDGW=function(){return this.frontType===fi.DGW},Object.defineProperty(e.prototype,"sblFlagStatus",{get:function(){return"Y"===this.sblFlag},enumerable:!0,configurable:!0}),e.prototype.hasSBLPositiobTypeDropdownLicense=function(){return this.canTradeSellCollateral||this.canTradeSellDeposit},e.prototype.hasCNSSBLDeposit=function(e){return"014"===e&&this.accountType===yi.CREDIT_BALANCE&&this.frontType===fi.DGW},e.prototype.isSBLDepositOnly=function(){return this.canTradeSellDeposit&&!this.canTradeSellCollateral},e.prototype.isSBLCollateralOnly=function(){return!this.canTradeSellDeposit&&this.canTradeSellCollateral},e}(),fi=function(){function e(){}return e.SEOS="SEOS",e.FIS="FIS",e.DGW="DGW",e.SEOSD="SEOSD",e}(),yi=function(){function e(){}return e.getDisplayName=function(t){switch(t){case e.CASH:return"Cash";case e.CASH_BALANCE:return"Cash Bal.";case e.CREDIT_BALANCE:return"Credit Bal."}},e.CASH="CASH",e.CASH_BALANCE="CASH_BALANCE",e.CREDIT_BALANCE="CREDIT_BALANCE",e}(),gi=function(){function e(){}return e.getDisplayName=function(e){return"Equity"},e.CASH_ACCOUNT="CASH_ACCOUNT",e.CASH_ACCOUNT_J="CASH_ACCOUNT_J",e.CASH_MARGIN="CASH_MARGIN",e.MARGIN="MARGIN",e.RISK="RISK",e.INTERNET="INTERNET",e.ATS_ACCOUNT="ATS_ACCOUNT",e.CASH_BALANCE="CASH_BALANCE",e.CASH_BALANCE_FOR_TURNOVERLIST="CASH_BALANCE_FOR_TURNOVERLIST",e.CREDIT_BALANCE="CREDIT_BALANCE",e}(),Si=function(){function e(){}return e.CREDIT_LIMIT="Credit Limit",e.LINE_AVAILABLE="Line Available",e.CASH_BALANCE="Cash Balance",e.EE="EE",e.EXCESS_EQUITY="Excess Equity",e.MARGIN="Margin",e.MARGIN_REQUIRED="Margin Required",e.PERCENT_MM="%MM",e.LIABILITIES="Liabilities (Loan)",e.EQUITY="Equity",e.EQUITY_BALANCE="Equity Balance:",e.INITIAL_CASH_BALANCE="Initial Cash Balance",e.INITIAL_CASH_AVAILABLE="Initial Cash Available",e.NET_SETTLEMENT_LINE="Net Settlement Line",e.EMPTY="",e.TOTAL_MR="Total MR",e.TOTAL_MM="Total MM",e.CALL_FORCE_FLAG="Call/Force Flag",e.CALL_FORCE_MR="Call/Force MR",e.INITIAL_MARGIN="Initial Margin",e.MR="MR",e}(),bi=function(){function e(){}return e.EQUITY="E",e.DERIVATIVES="D",e}(),Ci=function(){function e(){}return e.parseEquity=function(t,i,r){var n=new e;return n.value1=t.creditLimit,n.label1=Si.CREDIT_LIMIT+":",i===fi.DGW&&r===yi.CREDIT_BALANCE?(n.value2=t.purchasingPower,n.label2=Si.LINE_AVAILABLE+":"):(n.value2=t.lineAvailable,n.label2=Si.LINE_AVAILABLE+":"),i===fi.DGW&&r===yi.CREDIT_BALANCE?n.value3=t.lineAvailable:n.value3=t.cashBalance,r===yi.CREDIT_BALANCE?n.label3=Si.EE+":":i===fi.DGW?isNaN(t.cashBalance)?n.label3=Si.EMPTY:n.label3=Si.INITIAL_CASH_BALANCE+":":n.label3=Si.CASH_BALANCE+":",n},e.parseDerivatives=function(t,i,r){var n=new e;return n.label1=Si.LINE_AVAILABLE+":",n.value1=t.creditLine,n.label2=Si.EE+":",n.value2=t.excessEquity,n.label3=Si.EQUITY+":",n.value3=t.cashBalance,n},e.parseDerivativesTfexPage=function(t,i,r){var n=e.parseDerivatives(t,i,r),o=new Ei;return o.label1=n.label1,o.label2=n.label2,o.label3=n.label3,o.value1=n.value1,o.value2=n.value2,o.value3=n.value3,o.label4=Si.MR+":",o.value4=t.totalMR,o},e.parseEquityPort=function(e,t,i,r,o){if(r){var s=-1;e.forEach(function(e,o){switch(e.label){case Si.CREDIT_LIMIT:e.value=n(r.creditLimit,2);break;case Si.LINE_AVAILABLE:t===fi.DGW&&i===yi.CREDIT_BALANCE?e.value=n(r.purchasingPower,2):e.value=n(r.lineAvailable,2);break;case Si.CASH_BALANCE:e.value=n(r.cashBalance,2);break;case Si.EXCESS_EQUITY:t===fi.DGW?e.value=n(r.lineAvailable,2):e.value=n(r.cashBalance,2);break;case Si.PERCENT_MM:e.value=n(r.percentMM,2);break;case Si.INITIAL_CASH_AVAILABLE:isNaN(r.cashBalance)&&(s=o),e.value=n(r.cashBalance,2);break;case Si.NET_SETTLEMENT_LINE:isNaN(r.netSettlementLine)&&(s=o),e.value=n(r.netSettlementLine,2);break;case Si.MARGIN_REQUIRED:e.value=n(r.marginRequire,2);break;case Si.LIABILITIES:t===fi.DGW&&i===yi.CREDIT_BALANCE&&(e.value=n(r.liablities,2))}}),s!==-1&&e.splice(s,1)}o&&e.forEach(function(e,t){switch(e.label){case Si.MARGIN:e.value=n(o.marginRate,2);break;case Si.LIABILITIES:e.value=n(o.liabilities,2)}})},e.parseDerivativesPort=function(e,t){if(t){e.forEach(function(e,i){switch(e.label){case Si.LINE_AVAILABLE:e.value=n(t.creditLine,2);break;case Si.EXCESS_EQUITY:e.value=n(t.excessEquity,2);break;case Si.EQUITY:e.value=n(t.cashBalance,2);break;case Si.TOTAL_MR:e.value=n(t.totalMR,2);break;case Si.TOTAL_MM:e.value=n(t.totalMM,2);break;case Si.CALL_FORCE_FLAG:switch(t.callForceFlag){case"C":e.value="Call",e.color=ae.RED;break;case"F":e.value="Force",e.color=ae.RED;break;case"No":e.value=t.callForceFlag,e.color=ae.YELLOW}break;case Si.CALL_FORCE_MR:e.value=n(t.callForceMargin,2),t.callForceMargin>0?e.color=ae.RED:e.color=ae.YELLOW}})}},e}(),Ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Ci),Ai=function(){function e(){}return e.orderNo=function(e){return{label:"Order No.",value:e}},e.price=function(e){return{label:"New Price",value:e}},e.volume=function(e){return{label:"New Volume",value:e}},e}(),wi=function(){function e(){this.isCheck=!1,this.isNVDR=!1,this.priceType=Ge.LIMIT,this.validity=Ke.DAY,this.symbol="",this.side=Be.NONE,this.isNVDR=!1,this.volume="",this.icebergVolume="",this.price=""}return e.parse=function(t){var i=new e;return i.isCheck=t.isCheck,i.side=Be.lookup[t.side],i.symbol=t.symbol,i.isNVDR=t.isNVDR,i.volume=t.volume,i.icebergVolume=t.icebergVolume,i.price=t.price,i.priceType=Ge.lookup[t.priceType],i.validity=Ke.lookup[t.validity],i.calculateAmount(),i},e.parseForUpdate=function(e){return{isCheck:e.isCheck,side:e.side.shortname,symbol:e.symbol,isNVDR:e.isNVDR,volume:e.volume,icebergVolume:e.icebergVolume,price:e.price,priceType:e.priceType.value,validity:e.validity.value}},e.prototype.calculateAmount=function(){return this.priceType.isEqual(Ge.LIMIT)?void(""!==this.price&&""!==this.volume&&(this.amount=yt.formatPrice(yt.toNumberOrNan(this.price)*yt.toNumberOrNan(this.volume),2))):void(this.amount="")},e}(),Ti=function(){function e(){this.isCheck=!1,this.priceType=Ge.LIMIT,this.validity=Ke.DAY,this.symbol="",this.side=Be.NONE,this.volume="",this.icebergVolume="",this.price=""}return e.parse=function(t){var i=new e;return i.isCheck=t.isCheck,i.side=Be.lookup[t.side],i.position=Ye.lookup[t.position],i.symbol=t.symbol,i.volume=t.volume,i.icebergVolume=t.icebergVolume,i.price=t.price,i.priceType=Ge.lookup[t.priceType],i.validity=Ke.lookup[t.validity],i},e.parseForUpdate=function(e){return{isCheck:e.isCheck,side:e.side.shortname,position:e.position.shortname,symbol:e.symbol,volume:e.volume,icebergVolume:e.icebergVolume,price:e.price,priceType:e.priceType.value,validity:e.validity.value}},e}(),Di=function(){function e(){}return e.prototype.readSubType=function(e){this.subType=15&e},e.prototype.readTickerConfig=function(e){this.isSum=(128&e)>>7===1,this.trend=(96&e)>>5,this.side=Be.lookup[31&e]},e}(),Ii=function(){function e(){}return e.prototype.hasInitData=function(){return(8&this.dataFlag)>>3===1},e.prototype.hasSummaryData=function(){return(4&this.dataFlag)>>2===1},e.prototype.hasBidOfferData=function(){return(2&this.dataFlag)>>1===1},e.prototype.hasProjectedData=function(){return 1===(1&this.dataFlag)},e.prototype.hasMatchedData=function(){return this.hasSummaryData()&&this.hasBidOfferData()},e}(),Pi=function(){function e(){}return e}(),Oi=function(){function e(){}return e}(),ki=function(){function e(){}return e}(),$i=function(){function e(){}return e}(),Li=function(){function e(){}return e}();T.$inject=["$filter"],D.$inject=["$filter"],I.$inject=["$filter"],P.$inject=["$filter"],O.$inject=["$filter"];var Ni,Mi=function(){function e(){}return e}(),Ri=function(){function e(e){this.needColor=e}return e}(),_i=function(){function e(){this.dynamicLabel=new Mi,this.isStatePricesAvail=!1,this.status=""}
return e}();!function(e){e[e.PRE_OPEN_1=1]="PRE_OPEN_1",e[e.OPEN_1=2]="OPEN_1",e[e.PRE_OPEN_2=3]="PRE_OPEN_2",e[e.OPEN_2=4]="OPEN_2",e[e.PRE_CLOSE=5]="PRE_CLOSE",e[e.CLOSE=6]="CLOSE",e[e.SETTLE=7]="SETTLE",e[e.PREVIOUS_SETTLE=8]="PREVIOUS_SETTLE",e[e.PRE_OPEN_0=9]="PRE_OPEN_0",e[e.OPEN_0=10]="OPEN_0",e[e.PRE_OPEN=11]="PRE_OPEN",e[e.OPEN=12]="OPEN"}(Ni||(Ni={}));var Vi,Bi=function(){function e(){}return e.parse=function(t,i){if(t.instrumentType===ce.EQUITY)return e.parseEquity(t,i);if(t.instrumentType===ce.INDEX)return e.parseIndex(t,i);if(t.instrumentType===ce.OPTIONS)return e.parseDerivativesWithUnderlying(t,i);if(t.instrumentType===ce.FUTURES){t.hasInitIntradayData()&&(i.derivativesMarketType=Ze.lookup[t.initIntradayData.marketType]||Ze.NOT_SUPPORT);var r=Ze.lookup[i.derivativesMarketType.strMarketType];switch(r){case Ze.STOCK:case Ze.INDEX:return e.parseDerivativesWithUnderlying(t,i);case Ze.METAL:case Ze.DEFERRED:case Ze.INTEREST_RATE:case Ze.AGRICULTURE:case Ze.ENERGY:case Ze.CURRENCY:case Ze.NOT_SUPPORT:return e.parseDerivatives(t,i)}}},e.parseEquity=function(t,i){var r;if(r=angular.copy(i,r),r.priceDigit=2,t.hasInitMarketData()&&(r.previousClose=t.initMarketData.previousClose),r.label1="Vol/Value(K)",r.label2="High/Low",r.label3="Ceil/Floor",r.label4="Avg/Close",t.hasInitMarketData()&&(r.topValue2=t.initMarketData.high,r.bottomValue2=t.initMarketData.low,r.topValue3=t.initMarketData.ceiling,r.bottomValue3=t.initMarketData.floor,r.bottomValue4=t.initMarketData.previousClose),t.hasSummaryData()&&(r.lastDone=t.summaryData.lastDone,r.change=t.summaryData.change,r.percentChange=t.summaryData.percentChange,r.totalVolume=t.summaryData.totalVolume,r.topValue1=t.summaryData.totalVolume,r.bottomValue1=t.summaryData.equityTotalValue,r.topValue4=t.summaryData.average,t.summaryData.status.length>0?r.status="("+t.summaryData.status+")":r.status="",r.topValue2=e.getHighValue(t,r.topValue2),r.bottomValue2=e.getLowValue(t,r.bottomValue2)),t.hasProjectedData()){r.dynamicLabel=e.getEquityDynamicLabel(t,r.dynamicLabel,r.totalVolume);var n=new Ri((!0));n.state="Open1",n.price=t.projectedData.openPrice1;var o=new Ri((!0));o.state="Open2",o.price=t.projectedData.openPrice2,r.statePrices=[n,o],r.isStatePricesAvail=!0}return r},e.parseIndex=function(t,i){var r=new _i;return r=angular.copy(i,r),r.label1="Vol/Value(K)",r.label2="High/Low",r.label3="Ceil/Floor",r.label4="Avg/Close",r.priceDigit=t.priceDigit,t.hasInitMarketData()&&(r.previousClose=t.initMarketData.previousClose,r.topValue2=t.initMarketData.high,r.bottomValue2=t.initMarketData.low,r.bottomValue4=t.initMarketData.previousClose),t.hasSummaryData()&&(r.totalVolume=t.summaryData.totalVolume,r.lastDone=t.summaryData.lastDone,r.change=t.summaryData.change,r.percentChange=t.summaryData.percentChange,r.topValue1=t.summaryData.totalVolume,r.bottomValue1=t.summaryData.indexTotalValue,r.topValue2=e.getHighValue(t,r.topValue2),r.bottomValue2=e.getLowValue(t,r.bottomValue2)),r},e.parseDerivativesWithUnderlying=function(t,i){var r=new _i;if(r=angular.copy(i,r),r.label1="Basis/Underlying",r.isPrice1=!0,r.label2="High/Low",r.label3="Ceil/Floor",r.label4="Avg/P.Settle",r.priceDigit=t.priceDigit,t.hasInitMarketData()&&(r.previousClose=t.initMarketData.previousSettle,r.topValue2=t.initMarketData.high,r.bottomValue2=t.initMarketData.low,r.topValue3=t.initMarketData.ceiling,r.bottomValue3=t.initMarketData.floor,r.bottomValue4=t.initMarketData.previousSettle),t.hasSummaryData()){r.totalVolume=t.summaryData.totalVolume,r.lastDone=t.summaryData.lastDone,r.change=t.summaryData.change,r.percentChange=t.summaryData.percentChange;var n=t.summaryData.lastDone||r.previousClose;r.topValue1=n-t.summaryData.derivUnderlyingPrice,r.bottomValue1=t.summaryData.derivUnderlyingPrice,r.topValue2=e.getHighValue(t,r.topValue2),r.bottomValue2=e.getLowValue(t,r.bottomValue2),r.topValue4=t.summaryData.average,t.summaryData.status.length>0?r.status="("+t.summaryData.status+")":r.status=""}return t.hasProjectedData()&&(r.dynamicLabel=e.getDerivativeDynamicLabel(t,r.dynamicLabel)),(t.hasProjectedData()||t.hasInitMarketData()||t.hasSummaryData())&&(r.isStatePricesAvail=!0,r.statePrices=e.getDerivativesStatePrices(t,r.statePrices)),r},e.parseDerivatives=function(t,i){var r=new _i;return r=angular.copy(i,r),r.label1="Vol/P.OI",r.label2="High/Low",r.label3="Ceil/Floor",r.label4="Avg/P.Settle",r.priceDigit=t.priceDigit,t.hasInitMarketData()&&(r.previousClose=t.initMarketData.previousSettle,r.topValue2=t.initMarketData.high,r.bottomValue2=t.initMarketData.low,r.topValue3=t.initMarketData.ceiling,r.bottomValue3=t.initMarketData.floor,r.bottomValue4=t.initMarketData.previousSettle),t.hasSummaryData()&&(r.totalVolume=t.summaryData.totalVolume,r.lastDone=t.summaryData.lastDone,r.change=t.summaryData.change,r.percentChange=t.summaryData.percentChange,r.topValue1=t.summaryData.totalVolume,r.bottomValue1=t.summaryData.openInterest,r.topValue2=e.getHighValue(t,r.topValue2),r.bottomValue2=e.getLowValue(t,r.bottomValue2),r.topValue4=t.summaryData.average,t.summaryData.status.length>0?r.status="("+t.summaryData.status+")":r.status=""),t.hasProjectedData()&&(r.dynamicLabel=e.getDerivativeDynamicLabel(t,r.dynamicLabel)),(t.hasProjectedData()||t.hasInitMarketData()||t.hasSummaryData())&&(r.isStatePricesAvail=!0,r.statePrices=e.getDerivativesStatePrices(t,r.statePrices)),r},e.getDerivativesStatePrices=function(e,t){var i,r,n,o,s;t?(i=t[0],r=t[1],n=t[2],o=t[3],s=t[4]):(i=new Ri((!0)),r=new Ri((!0)),n=new Ri((!0)),o=new Ri((!1)),s=new Ri((!0)),i.state="Open0",r.state="Open1",n.state="Open2",o.state="P.Settlement",s.state="Settlement"),e.hasProjectedData()&&(i.price=e.projectedData.openPrice0,r.price=e.projectedData.openPrice1,n.price=e.projectedData.openPrice2),e.hasInitMarketData()&&(o.price=e.initMarketData.previousSettle),e.hasSummaryData()&&(s.price=e.summaryData.settlePrice);var a=[i,r,n,o,s];return a},e.getEquityDynamicLabel=function(e,t,i){var r=new Mi;switch(e.projectedData.currentState){case Ni.PRE_OPEN_1:r.label="Proj. Open 1 (Price/Vol)",r.price=e.projectedData.projectedPrice,r.comparedVolume=e.projectedData.projectedVolume,r.volume=e.projectedData.projectedVolume;break;case Ni.OPEN_1:r.label="Open 1",r.price=e.projectedData.openPrice1,r.comparedVolume=i;break;case Ni.PRE_OPEN_2:r.label="Proj. Open 2 (Price/Vol)",r.price=e.projectedData.projectedPrice,r.comparedVolume=e.projectedData.projectedVolume,r.volume=e.projectedData.projectedVolume;break;case Ni.OPEN_2:r.label="Open 2",r.price=e.projectedData.openPrice2,r.comparedVolume=i;break;case Ni.PRE_CLOSE:r.label="Proj. Close (Price/Vol)",r.price=e.projectedData.projectedPrice,r.comparedVolume=e.projectedData.projectedVolume,r.volume=e.projectedData.projectedVolume;break;case Ni.CLOSE:r.label="Close",e.hasSummaryData()?r.price=e.summaryData.lastDone:r.price=t.price,r.comparedVolume=i;break;case Ni.PRE_OPEN:r.label="Proj. Open (Price/Vol)",r.price=e.projectedData.projectedPrice,r.comparedVolume=e.projectedData.projectedVolume,r.volume=e.projectedData.projectedVolume}return r.comparedVolume=0===r.price?0:r.comparedVolume,r},e.getDerivativeDynamicLabel=function(e,t){var i=new Mi;switch(e.projectedData.currentState){case Ni.PRE_OPEN_0:i.label="Proj. Open 0",i.price=e.projectedData.projected0;break;case Ni.OPEN_0:i.label="Open 0",i.price=e.projectedData.openPrice0;break;case Ni.PRE_OPEN_1:i.label="Proj. Open 1",i.price=e.projectedData.projectedPrice;break;case Ni.OPEN_1:i.label="Open 1",i.price=e.projectedData.openPrice1;break;case Ni.PRE_OPEN_2:i.label="Proj. Open 2",i.price=e.projectedData.projected2;break;case Ni.OPEN_2:i.label="Open 2",i.price=e.projectedData.openPrice2;break;case Ni.CLOSE:i.label="Close",e.hasSummaryData()?i.price=e.summaryData.lastDone:i.price=t.price;break;case Ni.PREVIOUS_SETTLE:i.label="P. Settlement",e.hasInitMarketData()?i.price=e.initMarketData.previousSettle:i.price=t.price;break;case Ni.SETTLE:i.label="Settlement",e.hasSummaryData()?i.price=e.summaryData.settlePrice:i.price=t.price}switch(e.projectedData.currentState){case Ni.PREVIOUS_SETTLE:i.comparedVolume=0;break;default:i.comparedVolume=0===i.price?0:1}return i},e.getHighValue=function(e,t){var i=e.summaryData.lastDone;return!isNaN(i)&&e.summaryData.totalVolume>0&&(isNaN(t)||i>t)?i:t},e.getLowValue=function(e,t){var i=e.summaryData.lastDone;return!isNaN(i)&&e.summaryData.totalVolume>0&&(isNaN(t)||i<t)?i:t},e.isEquityOrDerivativesOnPreOpenPreClose=function(e){switch(e.instrumentType){case ce.EQUITY:return e.projectedData.currentState===Ni.PRE_OPEN_1||e.projectedData.currentState===Ni.PRE_OPEN_2||e.projectedData.currentState===Ni.PRE_CLOSE||e.projectedData.currentState===Ni.PRE_OPEN;case ce.FUTURES:case ce.OPTIONS:return e.projectedData.currentState===Ni.PRE_OPEN_0||e.projectedData.currentState===Ni.PRE_OPEN_1||e.projectedData.currentState===Ni.PRE_OPEN_2;default:return!1}},e}(),xi=function(){function e(){}return e}(),Fi=function(){function e(){}return e.parse=function(e,t){var i;return i=angular.copy(t,i),e.instrumentType===ce.EQUITY?i.priceDigit=2:i.priceDigit=e.priceDigit,e.hasInitMarketData()&&(e.instrumentType===ce.EQUITY||e.instrumentType===ce.INDEX?i.previousClose=e.initMarketData.previousClose:i.previousClose=e.initMarketData.previousSettle,i.high=e.initMarketData.high,i.low=e.initMarketData.low),e.hasSummaryData()&&(i.totalVolume=e.summaryData.totalVolume,i.lastDone=e.summaryData.lastDone,i.change=e.summaryData.change,i.percentChange=e.summaryData.percentChange,i.high=Bi.getHighValue(e,i.high),i.low=Bi.getLowValue(e,i.low),e.summaryData.status&&e.summaryData.status.length>0?i.status="("+e.summaryData.status+")":i.status=""),i},e}(),Ui=function(){function e(){this[e.SETTINGS]="Settings",this[e.RATING]="Rating",this[e.VIEW_ALL_ORDERS]="View All Orders",this[e.MULTI_ORDER]="Multi-Order"}return e.SETTINGS="100",e.RATING="101",e.VIEW_ALL_ORDERS="102",e.MULTI_ORDER="103",e}(),qi=function(){function e(){}return e.generateSettingItem=function(){var t=new e;return t.id=Ui.SETTINGS,t.className="",t.name="Settings",t.hidePlaceOrder=!1,t.menuType=ji.UNABLE_TO_SELECT,t},e.generateMoreItem=function(){var t=new e;return t.id="-1",t.className="",t.name="More",t.hidePlaceOrder=!1,t.menuType=ji.HEADER,t},e}(),ji=function(){function e(){}return e.DATA="DATA",e.UNABLE_TO_SELECT="UNABLE_TO_SELECT",e.HEADER="HEADER",e}(),Hi=function(){function e(){}return e}(),Wi=function(){function e(){}return e}(),Yi=function(){function e(){}return Object.defineProperty(e.prototype,"displayValue",{get:function(){return this.isEmpty()?e.EMPTY_DISPLAY_VALUE:this.value},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return""===this.value},e.EMPTY_DISPLAY_VALUE="Double Click to Edit",e}(),Gi=function(){function e(){}return e}(),Ki=function(){function e(){}return e.SEOS="SEOS",e.FIS="FIS",e.DGW="DGW",e.SEOSD="SEOSD",e}(),zi=function(){function e(){}return e.PUSH="PUSH",e.PULL="PULL",e}(),Qi=function(){function e(){}return e.isEmpty=function(e){return null===e||void 0!==e&&0===e.length},e.isRequired=function(t,i){return e.isEmpty(t)&&i},e}(),Xi=function(){function e(){}return e.isEmpty=function(e){return!e||0===e.length},e.requestForm=function(e){return".MAI"===e.toUpperCase()?".MAI":e},e.displayForm=function(e){return".MAI"===e.toUpperCase()?".mai":e},e}(),Ji=function(){function e(){}return e.NONE="",e}();!function(e){e[e.INITIAL=0]="INITIAL",e[e.DESC=1]="DESC",e[e.ASC=2]="ASC",e[e.DIRTY=3]="DIRTY"}(Vi||(Vi={}));var Zi,er=function(){function e(){this.sortField=Ji.NONE,this.direction=Vi.INITIAL}return e.prototype.toggleDirection=function(e){if(this.sortField!==e)return void(this.direction=Vi.ASC);switch(this.direction){case Vi.DESC:this.direction=Vi.ASC;break;case Vi.ASC:this.direction=Vi.DESC;break;case Vi.DIRTY:case Vi.INITIAL:this.direction=Vi.ASC}},e.prototype.getSortIconClass=function(e){if(this.sortField!==e)return"fa-sort";switch(this.direction){case Vi.DESC:return"fa-sort-desc";case Vi.ASC:return"fa-sort-asc";case Vi.DIRTY:default:return"fa-sort"}},e.prototype.clear=function(){this.sortField=Ji.NONE,this.direction=Vi.INITIAL},e.prototype.dirty=function(){this.sortField=Ji.NONE,this.direction=Vi.DIRTY},e}(),tr=function(){function e(){}return e.sort=function(t,i){var r=""+t.sortField;switch(t.direction){case Vi.DESC:i.sort(e.dynamicSortByDESC(r));break;case Vi.ASC:i.sort(e.dynamicSortByASC(r))}},e.dynamicSortByASC=function(e){return function(t,i){return t[e]===Object(t[e])?t[e].toString()<i[e].toString()?-1:t[e].toString()>i[e].toString()?1:0:"string"==typeof t[e]||isFinite(t[e]-i[e])?t[e]<i[e]?-1:t[e]>i[e]?1:0:isFinite(t[e])?-1:1}},e.dynamicSortByDESC=function(e){return function(t,i){return t[e]===Object(t[e])?t[e].toString()<i[e].toString()?1:t[e].toString()>i[e].toString()?-1:0:"string"==typeof t[e]||isFinite(t[e]-i[e])?t[e]<i[e]?1:t[e]>i[e]?-1:0:isFinite(t[e])?-1:1}},e}(),ir=function(){function e(){}return e.sortEquity=function(e,t){var i;i=t.sort(function(e,t){var i=""===e.priceType?e.price:e.priceType,r=""===t.priceType?t.price:t.priceType;return typeof i==typeof r?i<r?-1:i>r?1:0:"string"==typeof i&&"number"==typeof r?1:"number"==typeof i&&"string"==typeof r?-1:void 0}),t=e.direction===Vi.ASC?i:i.reverse()},e.sortDerivatives=function(e,t){var i;i=t.sort(function(e,t){var i=e.priceType===Ge.LIMIT?e.price:e.priceType.value,r=t.priceType===Ge.LIMIT?t.price:t.priceType.value;return typeof i==typeof r?i<r?-1:i>r?1:0:"string"==typeof i&&"number"==typeof r?1:"number"==typeof i&&"string"==typeof r?-1:void 0}),t=e.direction===Vi.ASC?i:i.reverse()},e}(),rr=function(){function e(){}return e.matchSpecialKeysKeypress=function(e){var t="$Backspace$Delete$Home$End$Tab$ArrowLeft$ArrowRight$";return t.indexOf("$"+e.key+"$")>=0},e.matchEnterKeyKeypress=function(e){return"Enter"===e.key||fe===e.which},e.matchArrowUpKeyPress=function(e){return"ArrowUp"===e.key||be===e.which},e.matchArrowDownKeyPress=function(e){return"ArrowDown"===e.key||Se===e.which},e}(),nr=function(){function e(){}return e}(),or=function(){function e(){}return e}(),sr=function(){function e(){}return e}(),ar=function(){function e(e){this.value=e}return Object.defineProperty(e,"lookup",{get:function(){var t={futures:e.FUTURES,options:e.OPTIONS,equity:e.EQUITY,index:e.MARKET_INDEX,industry:e.INDUSTRY,maiIndustry:e.MAI_INDUSTRY,sector:e.SECTOR,stockUnderlying:e.STOCK_UNDERLYING};return t},enumerable:!0,configurable:!0}),e.prototype.equal=function(e){return this.value===e.value},e.FUTURES=new e("futures"),e.OPTIONS=new e("options"),e.EQUITY=new e("equity"),e.MARKET_INDEX=new e("index"),e.INDUSTRY=new e("industry"),e.MAI_INDUSTRY=new e("maiIndustry"),e.SECTOR=new e("sector"),e.STOCK_UNDERLYING=new e("stockUnderlying"),e.INDEX_LIST=[e.MARKET_INDEX,e.INDUSTRY,e.MAI_INDUSTRY,e.SECTOR],e.EQUITY_LIST=[e.EQUITY],e.DERIVATIVE_LIST=[e.FUTURES,e.OPTIONS],e.STOP_SYMBOL_LIST=[e.STOCK_UNDERLYING,e.FUTURES,e.OPTIONS],e.ALL_LIST=[e.EQUITY,e.MARKET_INDEX,e.INDUSTRY,e.MAI_INDUSTRY,e.SECTOR,e.FUTURES,e.OPTIONS,e.STOCK_UNDERLYING],e}(),cr=function(){function e(){}return e.parse=function(t){var i=new e;return i.symbolList=t.list,i.type=t.type,i},e}(),lr=function(){function e(){}return e}(),ur=function(){function e(){this.symbol="",this.isAddRow=!1,this.last=new lr,this.change=new lr,this.percentChange=new lr,this.bid=new lr,this.volumeBid=new lr,this.offer=new lr,this.volumeOffer=new lr,this.previousClose=new lr,this.projectedPrice=new lr,this.totalVolume=new lr,this.totalValue=new lr}return Object.defineProperty(e.prototype,"name",{get:function(){var e=Xi.displayForm(this.symbol);return this.status&&this.status.length>0?e+" ("+this.status+")":e},enumerable:!0,configurable:!0}),e}(),dr=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0,this.equitySignal=new signals.Signal,this.equitySignal.memorize=!0,this.equitySignal.dispatch(dt.empty()),this.derivativesSignal=new signals.Signal,this.derivativesSignal.memorize=!0,this.derivativesSignal.dispatch(dt.empty())}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e,t,i){var r;r=e.underlying?new dt(e.name,e.type,e.underlying):new dt(e.name,e.type),e.isEquity()&&this.equitySignal.dispatch(r),e.isDerivatives()&&this.derivativesSignal.dispatch(r),this.signal.dispatch(r,t,i)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.subscribeEquity=function(e){this.equitySignal.add(e)},e.prototype.subscribeDerivatives=function(e){this.derivativesSignal.add(e)},e.prototype.unsubscribeEquity=function(e){this.equitySignal.remove(e)},e.prototype.unsubscribeDerivatives=function(e){this.derivativesSignal.remove(e)},e}(),hr=function(){function e(e){this.streamingAttribute=e,this.applicationRole=""}return e.prototype.isInvestor=function(){return this.applicationRole===tt.INVESTOR},e.prototype.isMarketRep=function(){return this.applicationRole===tt.MARKET_REP},e.prototype.isVIP=function(){return this.applicationRole===tt.VIP},e.prototype.hasBrainBox=function(){return this.isInvestor()&&"004"===this.streamingAttribute.brokerId},e.prototype.getApplicationRole=function(){return this.applicationRole},e.prototype.setApplicationRole=function(e){this.applicationRole=e},e.$inject=["StreamingAttribute"],e}(),pr=(function(){function e(){}return e}(),function(){function e(){}return e}(),function(){function e(){}return e}()),mr=function(){function e(){}return e}(),vr=function(){function e(){this.APIVersion=me}return e}(),fr=function(){function e(){}return e.HEADER="HEADER",e.DATA="DATA",e}(),yr=function(){function e(){}return e.FAVOURITE="FAVOURITE",e.FAVOURITE_HEADER="FAVOURITE_HEADER",e.MY_PORT="MY_PORT",e}(),gr=function(){function e(){}return e}(),Sr=function(){function e(){}return e}(),br=function(){function e(e,t,i,r,n){this.mmService=e,this.userInfoService=t,this.watchStore=i,this.colorService=r,this.$filter=n,this.volumeFormatter=this.$filter("volume"),this.priceFormatter=this.$filter("price"),this.emptyPrice=this.$filter("emptyPrice"),this.nullableChangeFormatter=this.$filter("nullableChange"),this.nullablePercentChangeFormatter=this.$filter("nullablePercentChange"),this.emptyTotalVolFormatter=this.$filter("emptyTotalVol"),this.bidOfferFormatter=this.$filter("bidOffer")}return Object.defineProperty(e.prototype,"favouriteList",{get:function(){return this.watchStore.favouriteList},set:function(e){this.watchStore.favouriteList=e},enumerable:!0,configurable:!0}),e.prototype.parseFavourite=function(e,t){if(t.symbol=e.instrumentID,t.priceDigit=e.priceDigit,t.instrumentType=e.instrumentType,t.isBidMatch=!1,t.isOfferMatch=!1,e.hasMatchedData()){var i=t.totalVolume.numberValue<e.summary.totalVolume,r=t.volumeBid.numberValue>e.bidOffer.bidVolume,n=t.volumeOffer.numberValue>e.bidOffer.askVolume;i&&(r&&(t.isBidMatch=!0),n&&(t.isOfferMatch=!0))}return e.hasInitData()&&(t.isCA=e.initData.caFlag.length>0,t.caFlags=e.initData.caFlag,t.isLTD=1===e.initData.ltdExpFlag,t.lastTradingDate=e.initData.lastTradingDate,t.instrumentType===ce.EQUITY||t.instrumentType===ce.INDEX?(t.previousClose.numberValue=e.initData.previousClose,t.previousClose.formattedValue=this.emptyPrice(e.initData.previousClose,t.priceDigit)):t.instrumentType!==ce.FUTURES&&t.instrumentType!==ce.OPTIONS||(t.previousClose.numberValue=e.initData.previousSettle,t.previousClose.formattedValue=this.emptyPrice(e.initData.previousSettle,t.priceDigit))),e.hasSummaryData()&&(t.last.numberValue=e.summary.lastDone,t.last.formattedValue=this.priceFormatter(t.last.numberValue,t.priceDigit),t.change.numberValue=e.summary.change,t.change.formattedValue=this.nullableChangeFormatter(t.change.numberValue,t.priceDigit,t.previousClose.numberValue,t.last),t.percentChange.numberValue=e.summary.percentChange,t.percentChange.formattedValue=this.nullablePercentChangeFormatter(t.percentChange.numberValue,t.priceDigit,t.previousClose.numberValue,t.last.numberValue),t.totalVolume.numberValue=e.summary.totalVolume,t.totalVolume.formattedValue=this.emptyTotalVolFormatter(t.totalVolume.numberValue,t.previousClose.numberValue),t.totalVolume.formattedValueWithKM=this.formatValueKM(t.totalVolume.numberValue,t.previousClose.numberValue),t.totalValue.numberValue=e.summary.totalValue,t.totalValue.formattedValue=this.emptyTotalVolFormatter(t.totalValue.numberValue,t.previousClose.numberValue),t.status=e.summary.status),e.hasBidOfferData()&&(t.bidFlag=e.bidOffer.bidFlag,t.offerFlag=e.bidOffer.askFlag,t.bid.numberValue=e.bidOffer.bidPrice,t.bid.formattedValue=this.bidOfferFormatter(t.bid.numberValue,t.priceDigit,t.bidFlag),t.offer.numberValue=e.bidOffer.askPrice,t.offer.formattedValue=this.bidOfferFormatter(t.offer.numberValue,t.priceDigit,t.offerFlag),t.volumeBid.numberValue=e.bidOffer.bidVolume,t.volumeBid.formattedValue=this.volumeFormatter(t.volumeBid.numberValue),t.volumeOffer.numberValue=e.bidOffer.askVolume,t.volumeOffer.formattedValue=this.volumeFormatter(t.volumeOffer.numberValue)),e.hasProjectedData()&&(t.projectedPrice.numberValue=e.projected.projectedPrice,t.projectedPrice.formattedValue=this.priceFormatter(t.projectedPrice.numberValue,t.priceDigit)),t=this.parseColor(t,e)},e.prototype.parseColor=function(e,t){return(t.hasInitData()||t.hasSummaryData())&&(e.changeColor=this.colorService.changeColor(e.change.numberValue,e.previousClose.numberValue,e.totalVolume.numberValue)),(t.hasInitData()||t.hasBidOfferData())&&(e.bidColor=this.colorService.bidOfferColor(e.bid.numberValue,e.previousClose.numberValue,e.volumeBid.numberValue,e.bidFlag),e.offerColor=this.colorService.bidOfferColor(e.offer.numberValue,e.previousClose.numberValue,e.volumeOffer.numberValue,e.offerFlag)),(t.hasInitData()||t.hasProjectedData())&&(e.projectedColor=this.colorService.projectedPriceColor(e.projectedPrice.numberValue,e.previousClose.numberValue)),e},e.prototype.saveFavourite=function(e){this.updateFavouriteDataStore(e);var t=new mr;t.listName=e.listName,t.index=this.watchStore.findIndexByListNameWithHeader(e.listName),t.symbolList=e.symbolList;var i=t.symbolList.indexOf(".mai"),r=i!==-1;r&&(t.symbolList[i]=t.symbolList[i].toUpperCase()),t.market="A",this.userInfoService.isEquityOnly&&(t.market="E"),this.userInfoService.isDerivativesOnly&&(t.market="D");var n=new vr;n.setting=[{service:"Favourite",data:t}],this.mmService.updateFavourite(n)},e.prototype.updateFavouriteDataStore=function(e){var t=this.watchStore.findIndexByListNameWithHeader(e.listName);this.favouriteList[t]=e},e.prototype.setCurrentSelectedFavourite=function(e){this.currentFavouriteListName=e},e.prototype.getCurrentSelectedFavourite=function(){var e=this.watchStore.findIndexByListNameWithHeader(this.currentFavouriteListName);return void 0===e&&(e=1),this.favouriteList[e]},e.prototype.getFavouriteByListName=function(e){return this.watchStore.getFavouriteByListName(e)},e.prototype.setCurrentWatchMode=function(e){this.currentWatchMode=e},e.prototype.getCurrentWatchMode=function(){return this.currentWatchMode},e.prototype.getDefaultEquityCatagory=function(){var e;return this.equityCategoryList.some(function(t,i,r){if(t.type===ue.REQUEST)return e=t,!0}),e},e.prototype.getDefaultDerivativesCatagory=function(){var e;return this.derivCategoryList.some(function(t,i,r){if(t.type===ue.GROUP){var n=t.childs;return n.some(function(t,i,r){if(t.type===ue.REQUEST)return e=t,!0}),!0}}),e},e.prototype.setCurrentEquityCategory=function(e){this.currentEquityCategory=new pr,angular.copy(e,this.currentEquityCategory)},e.prototype.setCurrentDerivativesCategory=function(e){this.currentDerivativesCategory=new pr,angular.copy(e,this.currentDerivativesCategory)},e.prototype.setFilterList=function(e){this.filterList=e},e.prototype.getCurrentEquityCategory=function(){return this.currentEquityCategory||(this.currentEquityCategory=this.getDefaultEquityCatagory()),this.currentEquityCategory},e.prototype.getCurrentDerivativesCategory=function(){return this.currentDerivativesCategory||(this.currentDerivativesCategory=this.getDefaultDerivativesCatagory()),this.currentDerivativesCategory},e.prototype.getFavouriteDropdownItemAndMyPort=function(){var e=[];if(this.favouriteList.forEach(function(t){var i=new Sr;i.showName=t.listName,i.key=t.listName,i.type=t.type,i.mode=yr.FAVOURITE,e.push(i)}),this.userInfoService.isInvestor()){var t=new Sr;t.showName="My Port",t.key="myPort",t.mode=yr.MY_PORT,e.push(t)}return e},e.prototype.getFavouriteDropdownItemListWithHeader=function(){var e=[this.getFavouriteHeader()];return this.favouriteList.forEach(function(t){var i=new Sr;i.showName=t.listName,i.key=t.listName,i.type=t.type,i.mode=yr.FAVOURITE,e.push(i)}),e},e.prototype.getFavouriteDropdownItemByIndex=function(e){if(null===e||e<0||e>=this.favouriteList.length)return null;var t=this.favouriteList[e],i=new Sr;return i.showName=t.listName,i.key=t.listName,i.type=t.type,i.mode=yr.FAVOURITE,i},e.prototype.getFavouriteDropdownItemListWithHeaderAndMyPort=function(){var e=[this.getFavouriteHeader()];if(this.favouriteList.forEach(function(t){var i=new Sr;i.showName=t.listName,i.key=t.listName,i.type=t.type,i.mode=yr.FAVOURITE,e.push(i)}),this.userInfoService.isInvestor()){var t=new Sr;t.showName="My Port",t.key="myPort",t.mode=yr.MY_PORT,e.push(t)}return e},e.prototype.getFilterList=function(){if(this.filterList)return this.filterList;var e=new Yc;e.isChecked=!0,e.name="Common Stock",e.boardSubTypeQueryValue="common stock",e.key="common-stock";var t=new Yc;t.name="Foreign Common Stock",t.boardSubTypeQueryValue="foreign common stock",t.key="foreign-common-stock";var i=new Yc;i.name="ETF",i.boardSubTypeQueryValue="etf",i.key="etf";var r=new Yc;r.name="Derivatives Warrant",r.boardSubTypeQueryValue="derivatives warrant",r.key="derivatives-warrant";var n=new Yc;n.name="Warrant",n.boardSubTypeQueryValue="warrant",n.key="warrant";var o=new Yc;o.name="Convertible",o.boardSubTypeQueryValue="convertible",o.key="convertible";var s=new Yc;s.name="Preferred",s.boardSubTypeQueryValue="preferred",s.key="preferred";var a=new Yc;return a.name="Unit Trust",a.boardSubTypeQueryValue="unit trust",a.key="unit-trust",this.filterList=[e,t,i,r,n,o,s,a],this.filterList},e.prototype.restoreFilterToDefault=function(){this.filterList.forEach(function(e){e.isChecked=!1,"Common Stock"===e.name&&(e.isChecked=!0)})},e.prototype.getSelectedFilterBoardSubTypeList=function(){return this.filterList.filter(function(e,t,i){return e.isChecked}).map(function(e){return e.boardSubTypeQueryValue}).join(",")},e.prototype.getEquityCategoryItemsByName=function(e){var t;return this.equityCategoryList.forEach(function(i){if(i.name===e)return void(t=i)}),t},e.prototype.getFavouriteHeader=function(){var e=new Sr;return e.showName="---- Favourite ----",e.key="---- Favourite ----",e.type=fr.HEADER,e.mode=yr.FAVOURITE_HEADER,e},e.prototype.formatValueKM=function(e,t){if(isNaN(t))return"";if(isNaN(e))return"";if(e>999999999){var i=Math.round(e/1e6);return numeral(i).format("0,0")+"M"}if(e>9999999){var i=Math.round(e/1e3);return numeral(i).format("0,0")+"K"}return""+numeral(e).format("0,0")},e.$inject=["MMService","UserInfoService","WatchStore","ColorService","$filter"],e}(),Cr=function(){function e(){}return e.INTERNET="INTERNET",e.MARKETREP1="MARKETREP1",e.MARKETREP2="MARKETREP2",e.TRADITIONAL="TRADITIONAL",e}(),Er=function(){function e(){this.isPrimaryMMActive=!0,this.isSecondaryMMActive=!1}return Object.defineProperty(e.prototype,"username",{get:function(){return this.initDataAttr.username},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userref",{get:function(){return this.initDataAttr.userref},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brokerId",{get:function(){return this.initDataAttr.brokerId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.initDataAttr.sessionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brokerName",{get:function(){return this.initDataAttr.brokerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itpRole",{get:function(){return this.initDataAttr.itpRole},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itpdRole",{get:function(){return this.initDataAttr.itpdRole},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itpHost",{get:function(){return this.initDataAttr.itpHost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"derivHost",{get:function(){return this.initDataAttr.derivHost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"researchHost",{get:function(){return this.initDataAttr.researchHost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"senseHost",{get:function(){return this.initDataAttr.senseConfig.senseHost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"senseToken",{get:function(){return this.initDataAttr.senseConfig.senseToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"senseAnalyticsHost",{get:function(){return this.initDataAttr.senseAnalyticsConfig.host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"senseAnalyticsToken",{get:function(){return this.initDataAttr.senseAnalyticsConfig.token},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"senseAnalyticsIsEnable",{get:function(){return this.initDataAttr.senseAnalyticsConfig.isEnable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"senseAnalyticsInterval",{get:function(){return this.initDataAttr.senseAnalyticsConfig.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primaryMMHost",{get:function(){return this.initDataAttr.primaryMMHost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryMMHost",{get:function(){return this.initDataAttr.secondaryMMHost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recogniaHosts",{get:function(){return this.initDataAttr.recogniaHosts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thirdPartyUrls",{get:function(){return this.initDataAttr.thirdPartyUrls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activingMarketDataMMHost",{get:function(){return this.isPrimaryMMActive?this.initDataAttr.primaryMMHost:this.isSecondaryMMActive?this.initDataAttr.secondaryMMHost:this.initDataAttr.primaryMMHost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initData",{set:function(e){this.initDataAttr=e},enumerable:!0,configurable:!0}),e.prototype.activePrimaryMM=function(){this.isPrimaryMMActive=!0,this.isSecondaryMMActive=!1},e.prototype.activeSecondaryMM=function(){this.isPrimaryMMActive=!1,this.isSecondaryMMActive=!0},e}(),Ar=function(){function e(){}return e.PriceLessEqual="PriceLessEqual",e.PriceMoreEqual="PriceMoreEqual",e.VolumeMoreEqual="VolumeMoreEqual",e}(),wr=function(){function e(e){this.value=e}return e.prototype.getShowSide=function(){switch(this.value){case"PriceLessEqual":return"<=";case"PriceMoreEqual":case"VolumeMoreEqual":return">="}},Object.defineProperty(e.prototype,"showInSetting",{get:function(){switch(this.value){case"PriceLessEqual":return"Price <=";case"PriceMoreEqual":return"Price >=";case"VolumeMoreEqual":return"Vol. >="}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"constant",{get:function(){return this.value},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this.value===e.value},e.prototype.isPrice=function(){return this.isEqual(e.PriceMoreEqual)||this.isEqual(e.PriceLessEqual)},e.prototype.isVolume=function(){return this.isEqual(e.VolumeMoreEqual)},e.PriceLessEqual=new e(Ar.PriceLessEqual),e.PriceMoreEqual=new e(Ar.PriceMoreEqual),e.VolumeMoreEqual=new e(Ar.VolumeMoreEqual),e.ALL=[e.PriceLessEqual,e.PriceMoreEqual,e.VolumeMoreEqual],e.lookup={PriceLessEqual:e.PriceLessEqual,PriceMoreEqual:e.PriceMoreEqual,VolumeMoreEqual:e.VolumeMoreEqual},e}(),Tr=function(){function e(){this.DEFAULT_FONT_SIZE="1.55vh",this.DEFAULT_IS_FONT_BOLD=!1,this.isWideScreen=!0,this.isTechnicalChartFullScreen=!1,this.isFontBold=!1,this.fontSize=this.DEFAULT_FONT_SIZE}return e.prototype.getFontSizeWithoutVH=function(){
return parseFloat(this.fontSize.replace("vh",""))},e.prototype.setFontSize=function(e){this.fontSize=e+"vh"},e.prototype.resetFontSize=function(){this.fontSize=this.DEFAULT_FONT_SIZE},e.prototype.resetFontBold=function(){this.isFontBold=this.DEFAULT_IS_FONT_BOLD},e}(),Dr=function(){function e(){}return e.getClientType=function(){return this.isSeondaryWindows?this.SECONDARY_WINDOWS:this.PRIMARY_WINDOWS},e.PRIMARY_WINDOWS="mi6",e.SECONDARY_WINDOWS="mi6sc2",e.isSeondaryWindows=!1,e}(),Ir=function(){function e(){this.clientType=Dr.getClientType(),this.APIVersion=me}return e}(),Pr=function(){function e(){}return e.THAI="TH",e.ENGLISH="EN",e}(),Or=function(){function e(){this.APIVersion=me,this.service=13,this.txtTerminalType=Xe,this.newsSymbol="_ALL"}return e}(),kr=function(){function e(){this.APIVersion=me,this.service="CheckPin",this.system="E"}return e}(),$r=function(){function e(){this.mainListName="",this.subListName="",this.boardType="",this.boardSubType="",this.APIVersion=me,this.service=12}return e}(),Lr=function(){function e(){}return e}(),Nr=(function(){function e(){this.message=""}return e}(),function(){function e(){this.APIVersion=me,this.service=36}return e}()),Mr=(function(){function e(){}return e.HISTORICAL="historical",e.IMPLIED="implied",e.MANUAL="manual",e}(),function(){function e(){this.service=25,this.APIVersion=me}return e}()),Rr=function(){function e(){}return e}(),_r=function(){function e(){}return e}(),Vr=(function(){function e(){}return e}(),function(){function e(){}return e}(),function(){function e(){}return e.prototype.setLike=function(){this.action="like"},e.prototype.setUnlike=function(){this.action="unlike"},e.prototype.setDelete=function(){this.action="delete"},e}()),Br=function(){function e(e,t,i,r,n,o,s,a,c){this.streamingAttribute=e,this.$http=t,this.$q=i,this.mmHost=r,this.$httpParamSerializerJQLike=n,this.$httpParamSerializer=o,this.alertService=s,this.urlStore=a,this.$window=c}return e.prototype.init=function(){var e=this;return this.streamingAttribute.initDataAttr?this.$q.resolve(this.streamingAttribute.initDataAttr):this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_INIT_DATA_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({isForceTierPrimary:this.$window.isForceTierPrimary,isForceTierSecondary:this.$window.isForceTierSecondary,txtPrimaryHost:this.$window.txtPrimaryHost,txtSecondaryHost:this.$window.txtSecondaryHost}),withCredentials:!0}).then(function(t){return t.data.isSuccess?t.data:e.$q.reject(t.data)},function(t){var i={};return i.errorMessage="Connection Error!",Pace.stop(),e.$q.reject(i)})},e.prototype.initialUMSessionAtPrimary=function(){var e=this;return this.$http({method:"GET",url:this.streamingAttribute.primaryMMHost+"/realtime/blank.jsp",headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return""},function(t){var i=new Rt("Connection Error!",t.status);return e.$q.reject(i)})},e.prototype.initialUMSessionAtSecondary=function(){var e=this;return this.$http({method:"GET",url:this.streamingAttribute.secondaryMMHost+"/realtime/blank.jsp",headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){return""},function(t){var i=new Rt("Connection Error!",t.status);return e.$q.reject(i)})},e.prototype.getAccountName=function(e,t){return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_GET_ACCOUNT_NAME_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({getNameEN:"T",getNameTH:"T",getTrader:"F",APIVersion:me,market:t,accountNo:e}),withCredentials:!0}).then(function(e){var t=e.data;return t})},e.prototype.validateSymbol=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_STOCK_VALIDATION_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({stockSymbol:e,isSubBroker:"N",brokerId:this.streamingAttribute.brokerId,APIVersion:me,market:"E"}),responseType:"text",withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.registerOrderStatus=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_REGISTER_ORDER_STATUS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),responseType:"text",withCredentials:!0}).then(function(e){var i=e.data+"",r=i.split("|");return"T"===r[0]?t.$q.resolve():t.$q.reject()})},e.prototype.getInstrumentList=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_DATA_PROVIDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.getSymbolStaticData=function(e,t){return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_GET_STATIC_DATA_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({market:t,symbol:e}),withCredentials:!0}).then(function(e){var t=e.data;return t})},e.prototype.updateFavourite=function(e){var t=this,i={APIVersion:e.APIVersion,setting:JSON.stringify(e.setting)};return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_SETTING_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(i),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.requestPageFeedback=function(e){var t=this,i={data:JSON.stringify(e)};return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_PAGE_FEEDBACK,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(i),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.requestApplicationRating=function(e){var t=this,i={data:JSON.stringify(e)};return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_APPLICATION_RATING,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(i),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.requestValidatePin=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_DATA_PROVIDER_JSON_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.prototype.requestSyncTime=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_SYNCTIME_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({APIVersion:me}),responseType:"text",withCredentials:!0}).then(function(e){var t=e.data;return t},function(t){return e.$q.reject()})},e.prototype.requestSaveLastSelectedSymbolList=function(e){var t=this,i={data:JSON.stringify(e)};return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_SAVE_LAST_SELECTED_SYMBOL_LIST,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(i),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.requestSaveBidsOffersSymbolList=function(e){var t=this,i={data:JSON.stringify(e)};return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_SAVE_BIDS_OFFERS_SYMBOL_LIST,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(i),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.updateLastSeenWhatsNewVersion=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_SAVE_LAST_SEEN_WHATSNEW_VERSION,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer({whatsNewVersion:e}),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.getNews=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_NEWS_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(e),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return console.error("Connection Error!"),t.$q.reject()})},e.prototype.requestNotification=function(){var e=this,t={};return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_GET_PULL_SENSE_NOTIFICATION,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(t),withCredentials:!0}).then(function(e){var t=e.data;return t},function(t){return e.$q.reject()})},e.prototype.requestMessageUserNotAllow=function(){var e=this,t={};return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_GET_ERROR_MESSAGE_USER_NOT_ALLOW,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(t),withCredentials:!0}).then(function(e){var t=e.data;return t},function(){return e.alertService.showErrorAlert("Connection Error!"),e.$q.reject()})},e.prototype.requestQuoteFundamental=function(e){var t=this,i=new Nr;return i.instFundamental=e,this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_DATA_PROVIDER_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializer(i),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.getCompayFullName=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_COMPANY_FULL_NAME,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({symbol:e}),withCredentials:!0}).then(function(e){return e.data},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject("Connection Error!")})},e.prototype.getOptionsExpireDate=function(){var e=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_OPTIONS_EXPIRE_DATE,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({service:"NewOptionsExpireDate",APIVersion:me}),withCredentials:!0}).then(function(e){return e.data},function(t){var i=new Rt("Connection Error!",t.status);return e.$q.reject(i)})},e.prototype.getOptionsGreekValue=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_DATA_PROVIDER_BINARY_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),responseType:"arraybuffer",withCredentials:!0}).then(function(e){return e.data},function(e){var i=new Rt("Connection Error",e.status);return t.$q.reject(i)})},e.prototype.logout=function(){var e=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_STREAMING_LOGOUT,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(t){return t&&t.data.isSuccess?e.$q.resolve(t.data):e.$q.reject(t.data)},function(t){var i=new Rt("Connection Error!",t.status);return e.$q.reject(i)})},e.prototype.updateSenseNotificationMessageAction=function(e){var t=this,i={data:e};return this.$http({method:"POST",url:""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_MONGO_SET_SENSE_ACTION_API,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:JSON.stringify(i),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.$inject=["StreamingAttribute","$http","$q","MM_HOST","$httpParamSerializerJQLike","$httpParamSerializer","AlertService","URLStore","$window"],e}(),xr=function(){function e(){}return e}(),Fr=function(){function e(){}return e.prototype.isFixedSpread=function(){return!!this.spread},e}(),Ur=function(){function e(){}return e}(),qr=function(){function e(e,t,i){var r=this;this.mmService=e,this.userInfoService=t,this.$q=i,this.BoardType_FUTURES_UNDERLYING=new ar("futuresAndUnderlying"),this.instrumentsMap=new nr,this.instrumentUnderlyingList=new or,this.instrumentsList=new or;var n=ar.ALL_LIST;n.forEach(function(e){r.instrumentsMap[e.value]=new sr,r.instrumentsList[e.value]=new Array})}return e.prototype.initialInstrumentList=function(){var e=this,t=new $r;return t.mainListName=".A",this.mmService.getInstrumentList(t).then(function(t){return e.parseAndSetInitialInstrumentList(t),e.$q.resolve()})},e.prototype.addToUnderlyingInstrumentList=function(e){void 0===this.instrumentUnderlyingList[e.underlying]&&(this.instrumentUnderlyingList[e.underlying]=new Array),this.instrumentUnderlyingList[e.underlying].push(e)},e.prototype.parseAndSetInitialInstrumentList=function(e){var t=this,i=e.split(hi.LV1),r=i[0];if("T"===r){var n=6,o=i[n].split(hi.LV2);o.forEach(function(e,r){var o=i[n+(r+1)].split(hi.LV2),s=t.findBoardType(e);o.forEach(function(e,i){var r;switch(s){case t.BoardType_FUTURES_UNDERLYING:var n=e.split(hi.LV3);r=new dt(n[0],ar.FUTURES,n[1]),t.instrumentsMap[ar.FUTURES.value][r.name.toUpperCase()]=r,t.instrumentsList[ar.FUTURES.value].push(r),t.addToUnderlyingInstrumentList(r);break;default:var o=e;r=new dt(o,s),t.instrumentsMap[s.value][r.name.toUpperCase()]=r,t.instrumentsList[s.value].push(r)}})})}},e.prototype.inititalStockUnderlyingInstrumentList=function(e){var t=this;e.forEach(function(e){var i=new dt(e,ar.STOCK_UNDERLYING);t.instrumentsMap[ar.STOCK_UNDERLYING.value][e.toUpperCase()]=i,t.instrumentsList[ar.STOCK_UNDERLYING.value].push(i)})},e.prototype.findBoardType=function(e){var t=ar.lookup[e];return void 0===t&&this.BoardType_FUTURES_UNDERLYING.value===e?this.BoardType_FUTURES_UNDERLYING:t},e.prototype.getInstrumentList=function(e){var t=this;return this.mmService.getInstrumentList(e).then(function(e){var i=e.split(hi.LV1),r=i[0];return"T"===r?t.$q.resolve(t.parseInstrumentList(e)):t.$q.reject("Invalid List Name")})},e.prototype.parseInstrumentList=function(e){var t=this,i=e.split(hi.LV1),r=[],n=6,o=i[n].split(hi.LV2);return o.forEach(function(e,o){var s=i[n+(o+1)].split(hi.LV2),a=t.findBoardType(e);s.forEach(function(e,i){var n;switch(a){case t.BoardType_FUTURES_UNDERLYING:var o=e.split(hi.LV3);n=new dt(o[0],ar.FUTURES,o[1]);break;default:var s=e;s&&s.length>0&&(n=new dt(s,a))}n&&r.push(n)})}),r},e.prototype.searchSymbolFromLocal=function(e,t){var i;switch(e=e.toUpperCase(),t){case Qe.EQUITY:i=ar.EQUITY_LIST;break;case Qe.DERIVATIVE:i=ar.DERIVATIVE_LIST;break;case Qe.ALL:i=ar.ALL_LIST}if(void 0!==i)for(var r=0;r<i.length;r++){var n=this.instrumentsMap[i[r].value][e];if(void 0!==n)return this.$q.resolve(angular.copy(n))}return this.$q.reject()},e.prototype.searchSymbolFromServer=function(e,t){var i=this;return t===Qe.EQUITY||t===Qe.ALL?this.mmService.validateSymbol(e).then(function(t){var r=t.split("|");if("F"===r[0])return i.$q.reject(r[1]);var n=new dt(e,ar.EQUITY);return i.$q.resolve(n)}):this.$q.reject("Series not found")},e.prototype.searchSymbol=function(e,t){var i=this;return e=e?e.toUpperCase():"",this.searchSymbolFromLocal(e,t).then(function(e){return i.$q.resolve(e)},function(){return i.searchSymbolFromServer(e,t)})},e.prototype.searchSymbolByBrokerLicense=function(e){var t=this;return this.searchSymbol(e,Qe.ALL).then(function(e){var i=t.userInfoService.isDerivativesOnly&&e.isEquity()||t.userInfoService.isEquityOnly&&e.isDerivatives();return i?t.$q.reject("Sorry. You need permission to access this data."):t.$q.resolve(e)})},e.prototype.searchEquitySymbolWithIndex=function(e,t){var i=this;return this.searchSymbol(e,Qe.ALL).then(function(e){var r=e.isDerivatives()||e.isIndex()&&t.indexOf(e.name)<0;return r?i.$q.reject("Stock not found."):i.$q.resolve(e)})},e.prototype.searchStopSymbol=function(e){e=e?e.toUpperCase():"";for(var t=0;t<ar.STOP_SYMBOL_LIST.length;t++){var i=this.instrumentsMap[ar.STOP_SYMBOL_LIST[t].value][e];if(void 0!==i)return this.$q.resolve(i)}return this.$q.reject("Series not found")},e.prototype.filterStopSymbolList=function(e){var t=this,i=[];return e.forEach(function(e){for(var r=e.name.toUpperCase(),n=0;n<ar.STOP_SYMBOL_LIST.length;n++){var o=t.instrumentsMap[ar.STOP_SYMBOL_LIST[n].value][r];void 0!==o&&i.push(o.name)}}),i},e.prototype.validateUnderlyingSymbolByBrokerLicense=function(e){var t=this;return this.searchSymbolByBrokerLicense(e).then(function(e){return t.$q.resolve(e)},function(i){if(i&&"Sorry. You need permission to access this data."===i)return t.$q.reject(i);for(var r=0;r<ar.INDEX_LIST.length;r++){var n=t.instrumentsMap[ar.INDEX_LIST[r].value]["."+e];if(void 0!==n)return t.$q.resolve(n)}return t.$q.reject("Not valid underlying")})},e.prototype.validateUnderlyingSymbol=function(e){var t=this;return this.searchSymbol(e,Qe.ALL).then(function(e){return t.$q.resolve(e)},function(i){for(var r=0;r<ar.INDEX_LIST.length;r++){var n=t.instrumentsMap[ar.INDEX_LIST[r].value]["."+e];if(void 0!==n)return t.$q.resolve(n)}return t.$q.reject("Not valid underlying")})},e.prototype.getDerivativesSymbolStaticData=function(e){var t=this;return this.mmService.getSymbolStaticData(e.toUpperCase(),Qe.DERIVATIVE).then(function(e){var i=new xr,r=e.split("|");if("T"!==r[0])return i.isSuccess=!1,r.length>=2&&(i.errorMsg=r[1]),t.$q.reject(i);i.isSuccess=!0,i.ceiling=parseFloat(r[1]),i.floor=parseFloat(r[2])," "!==r[3]&&(i.spread=parseFloat(r[3])),i.last=parseFloat(r[4]),i.close=parseFloat(r[5]),i.firstBid=parseFloat(r[6]),i.firstAsk=parseFloat(r[7]),i.priceDigit=parseInt(r[8],10),i.settleDigit=parseInt(r[9],10),i.derivativesSessionList=[];for(var n=r[10].split(","),o=r[11].split(","),s=0;s<o.length;s++){var a=new Ur;a.showMsg=o[s],a.valueMsg=n[s],i.derivativesSessionList.push(a)}return i})},e.prototype.getInstrumentStaticData=function(e,t){var i={};return""===e?this.$q.resolve(void 0):this.mmService.getSymbolStaticData(e.toUpperCase(),t).then(function(r){var n=r.split("|");if("T"===n[0]){i.isSuccess=!0;var o=new Fr;o.symbol=e.toUpperCase(),o.symbolMarketType=t,o.ceiling=parseFloat(n[1]),o.floor=parseFloat(n[2])," "!==n[3]&&(o.spread=parseFloat(n[3])),o.last=parseFloat(n[4]),o.close=parseFloat(n[5]),o.firstBid=parseFloat(n[6]),o.firstAsk=parseFloat(n[7]),t===Qe.DERIVATIVE&&(o.derivativesPriceDigit=parseFloat(n[8])),i.data=o}else i.isSuccess=!1,n.length>=2&&(i.errorMsg=n[1]);return i})},e.prototype.getTSLevel=function(e){var t;return this.turnOverList.forEach(function(i){i.symbolList.some(function(r){if(e.toUpperCase()===r.toUpperCase())return t=i.type,!0})}),t},e.prototype.getInstrumentListByBrokerLicense=function(){var e=this.userInfoService.isEquityOnly?ar.EQUITY_LIST:this.userInfoService.isDerivativesOnly?ar.DERIVATIVE_LIST:ar.EQUITY_LIST.concat(ar.DERIVATIVE_LIST),t=this.getInstrumentByBoardType(e),i=this.getIndexInstrumentList();return i.concat(t)},e.prototype.getInstrumentListWithOutIndexByBrokerLicense=function(){var e=this.userInfoService.isEquityOnly?ar.EQUITY_LIST:this.userInfoService.isDerivativesOnly?ar.DERIVATIVE_LIST:ar.EQUITY_LIST.concat(ar.DERIVATIVE_LIST),t=this.getInstrumentByBoardType(e);return t},e.prototype.getEquityWithIndex=function(e){var t=this.getInstrumentByBoardType(ar.EQUITY_LIST);return e.concat(t)},e.prototype.getNewsInstrumentListByBrokerLicense=function(){var e=[];e=this.userInfoService.isEquityOnly?ar.EQUITY_LIST:this.userInfoService.isDerivativesOnly?[ar.STOCK_UNDERLYING,ar.FUTURES,ar.OPTIONS]:[ar.EQUITY,ar.FUTURES,ar.OPTIONS];var t=this.getInstrumentByBoardType(e);return t},e.prototype.getIndexInstrumentList=function(){var e=this.getInstrumentByBoardType(ar.INDEX_LIST);return e.sort(function(e,t){var i=e.toUpperCase(),r=t.toUpperCase();return i>r?1:i<r?-1:0})},e.prototype.getInstrumentByBoardType=function(e){for(var t=[],i=0;i<e.length;i++)for(var r=0;r<this.instrumentsList[e[i].value].length;r++)t.push(this.instrumentsList[e[i].value][r].name);return t},e.prototype.getInstrumentListForTradeByMarketType=function(e){var t;switch(e){case Qe.EQUITY:t=ar.EQUITY_LIST;break;case Qe.DERIVATIVE:t=ar.DERIVATIVE_LIST}return this.getInstrumentByBoardType(t)},e.prototype.getInstrumentListByUnderlying=function(e){var t=this.instrumentUnderlyingList[e];return"SET50"===e?t.concat(this.instrumentsList[ar.OPTIONS.value]):void 0!==t?t:[]},e.prototype.searchSymbolByUnderlying=function(e,t){var i;return this.instrumentUnderlyingList[t].some(function(t){if(t.name===e)return i=t,!0}),"SET50"===t&&void 0===i&&this.instrumentsList[ar.OPTIONS.value].some(function(t){if(t.name===e)return i=t,!0}),void 0!==i?this.$q.resolve(i):this.$q.reject("Series not found.")},e.prototype.isSymbolExistInUnderlyingList=function(e,t){var i;return this.instrumentUnderlyingList[t].some(function(t){if(t.name===e)return i=t,!0}),"SET50"===t&&void 0===i&&this.instrumentsList[ar.OPTIONS.value].some(function(t){if(t.name===e)return i=t,!0}),void 0!==i},e.$inject=["MMService","UserInfoService","$q"],e}(),jr=function(){function e(){}return e.getEquityPrice=function(e,t){return yt.formatPrice(this.getEquityPriceNumber(e,t),2)},e.getEquityPriceNumber=function(t,i){var r=function(e){return 0===e},n=e.getNumberedPrice(t,i,r);return n},e.getDerivativesPrice=function(e,t){return yt.formatPrice(this.getDerivativesPriceNumber(e,t),e.data.derivativesPriceDigit)},e.getDerivativesPriceNumber=function(t,i){var r=function(e){return isNaN(e)},n=e.getNumberedPrice(t,i,r);return n},e.getNumberedPrice=function(e,t,i){if(void 0!==e&&void 0!==e.data)return t!==Be.BUY||i(e.data.firstAsk)?t!==Be.SELL||i(e.data.firstBid)?i(e.data.last)?i(e.data.close)?void 0:e.data.close:e.data.last:e.data.firstBid:e.data.firstAsk},e}(),Hr=function(){function e(){}return e.Market="M",e.Intraday="I",e.Stat="S",e}(),Wr=function(){function e(e,t){this.$rootScope=e,this.connectionStatusChangeEvent=t,this.onPushLostCallBack=this.reSubscribe.bind(this),this.signal=new ci,this.connectionStatusChangeEvent.subscribePushLost(this.onPushLostCallBack)}return e.prototype.subscribe=function(e,t,i){if(!Xi.isEmpty(e)){this.signal.add(Xi.requestForm(e),i);var r=this.generateSubscribeMessage(Xi.requestForm(e),t);this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",r)}},e.prototype.unsubscribe=function(e,t){if(!Xi.isEmpty(e)&&(this.signal.remove(Xi.requestForm(e),t),0===this.signal.getNumListeners(e))){var i=this.generateUnsubscribeMessage(e);this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",i)}},e.prototype.publish=function(e){this.signal.dispatch(Xi.requestForm(e.instrumentID),e)},e.prototype.generateSubscribeMessage=function(e,t){return"REG|1^"+e+"^^"+t},e.prototype.generateUnsubscribeMessage=function(e){return"REG|1^^"+e+"^"},e.prototype.reSubscribe=function(){var e=this,t=Object.keys(this.signal.signals);t.forEach(function(t){var i=e.generateSubscribeMessage(Xi.requestForm(t),Hr.Intraday);e.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",i)})},e.$inject=["$rootScope","ConnectionStatusChangeEvent"],e}(),Yr=function(){function e(){this.signalPushLost=new signals.Signal,this.signalPushLost.memorize=!0,this.signalPushSuccess=new signals.Signal,this.signalPushSuccess.memorize=!1,this.signalPushConnecting=new signals.Signal,this.signalPushConnecting.memorize=!1,this.signalOffline=new signals.Signal,this.signalOffline.memorize=!1}return e.prototype.subscribePushLost=function(e){this.signalPushLost.add(e)},e.prototype.publishPushLost=function(){this.signalPushLost.dispatch()},e.prototype.unsubscribePushLost=function(e){this.signalPushLost.remove(e)},e.prototype.subscribePushSuccess=function(e){this.signalPushSuccess.add(e)},e.prototype.publishPushSuccess=function(){this.signalPushSuccess.dispatch()},e.prototype.unsubscribePushSuccess=function(e){this.signalPushSuccess.remove(e)},e.prototype.subscribePushConnecting=function(e){this.signalPushConnecting.add(e)},e.prototype.publishPushConnecting=function(){this.signalPushConnecting.dispatch()},e.prototype.unsubscribePushConnecting=function(e){this.signalPushConnecting.remove(e)},e.prototype.subscribeOffline=function(e){this.signalOffline.add(e)},e.prototype.publishOffline=function(){this.signalOffline.dispatch()},e.prototype.unsubscribeOffline=function(e){this.signalOffline.remove(e)},e}();!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.PUSH=1]="PUSH"}(Zi||(Zi={}));var Gr;!function(e){e[e.INITIAL_PRIMARY_PUSH=0]="INITIAL_PRIMARY_PUSH",e[e.PRIMARY_PUSH=1]="PRIMARY_PUSH",e[e.SECONDARY_BUFFER=2]="SECONDARY_BUFFER",e[e.INITIAL_SECONDARY_PUSH=3]="INITIAL_SECONDARY_PUSH",e[e.SECONDARY_PUSH=4]="SECONDARY_PUSH",e[e.OFFLINE=5]="OFFLINE",e[e.PRIMARY_BUFFER=6]="PRIMARY_BUFFER",e[e.RETRY=7]="RETRY",e[e.LOGOUT=8]="LOGOUT"}(Gr||(Gr={}));var Kr=function(){function e(t){this.connectionStatusChangeEvent=t,this.state=e.UNDEFINED}return e.prototype.getState=function(){return this.state},e.prototype.isPush=function(){return this.state===e.PUSH},e.prototype.setPush=function(){this.state=e.PUSH,this.connectionStatusChangeEvent.publishPushSuccess()},e.prototype.setUndefined=function(){this.state=e.UNDEFINED},e.prototype.setPushLost=function(){this.state=e.PUSH_LOST,this.connectionStatusChangeEvent.publishPushLost()},e.prototype.setOffline=function(){this.state=e.OFFLINE,this.connectionStatusChangeEvent.publishOffline()},e.prototype.setConnecting=function(){this.state=e.CONNECTING,this.connectionStatusChangeEvent.publishPushConnecting()},e.UNDEFINED=0,e.PUSH=1,e.PUSH_LOST=2,e.OFFLINE=3,e.CONNECTING=4,e.$inject=["ConnectionStatusChangeEvent"],e}(),zr=function(){function e(e,t){this.$rootScope=e,this.connectionStatusChangeEvent=t,this.onPushLostCallBack=this.reSubscribe.bind(this),this.signal=new ci,this.connectionStatusChangeEvent.subscribePushLost(this.onPushLostCallBack)}return e.prototype.subscribe=function(e,t){this.signal.add(e,t),this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",this.generateSubscribeMessage(e))},e.prototype.generateSubscribeMessage=function(e){return"REG|3^"+e+"^^"},e.prototype.generateUnsubscribeMessage=function(e){return"REG|3^^"+e+"^"},e.prototype.unsubscribe=function(e,t){this.signal.remove(e,t),0===this.signal.getNumListeners(e)&&this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",this.generateUnsubscribeMessage(e))},e.prototype.publish=function(e){this.signal.dispatch(e[0].instrumentID,e)},e.prototype.reSubscribe=function(){var e=this,t=Object.keys(this.signal.signals);t.forEach(function(t){var i=e.generateSubscribeMessage(t);e.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",i)})},e.$inject=["$rootScope","ConnectionStatusChangeEvent"],e}(),Qr=function(){function e(e,t){this.$rootScope=e,this.$interval=t,this.signal=new ci,this.pullPromiseMap=[]}return e.prototype.subscribe=function(t,i,r){var n=this;this.signal.add(""+t+i,r);var o={chartType:i,instChart1:t,instChart2:"",service:e.SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",o);var s=this.pullPromiseMap[""+t+i];s&&this.$interval.cancel(s),s=this.$interval(function(){var r={chartType:i,instChart1:t,instChart2:"",service:e.SERVICE_ID};n.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",r)},18e4),this.pullPromiseMap[""+t+i]=s},e.prototype.subscribeCompareChart=function(t,i,r,n){var o=this;this.signal.add(""+t+r,n),this.signal.add(""+i+r,n);var s={chartType:r,instChart1:t,instChart2:i,service:e.SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",s);var a=this.pullPromiseMap[""+t+i+r];a&&this.$interval.cancel(a),a=this.$interval(function(){var n={chartType:r,instChart1:t,instChart2:i,service:e.SERVICE_ID};o.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",n)},18e4),this.pullPromiseMap[""+t+i+r]=a},e.prototype.publish=function(e){this.signal.dispatch(""+e.instrumentID+e.chartType,e)},e.prototype.unsubscribe=function(e,t,i){if(this.signal.remove(""+e+t,i),0===this.signal.getNumListeners(e)){var r=this.pullPromiseMap[""+e+t];r&&this.$interval.cancel(r)}},e.prototype.unsubscribeCompareChart=function(e,t,i,r){if(this.signal.remove(""+e+i,r),this.signal.remove(""+t+i,r),0===this.signal.getNumListeners(e)&&0===this.signal.getNumListeners(t)){var n=this.pullPromiseMap[""+e+t+i];n&&this.$interval.cancel(n)}},e.$inject=["$rootScope","$interval"],e.SERVICE_ID=32,e}(),Xr=function(){function e(){}return e.prototype.hasEquityData=function(){return(2&this.dataFlag)>>1===1},e.prototype.hasDerivData=function(){return 1===(1&this.dataFlag)},e}(),Jr=function(){function e(){}return e}(),Zr=function(){function e(){}return e}(),en=function(){function e(e,t){this.$rootScope=e,this.connectionStatusChangeEvent=t,this.onPushLostCallBack=this.reSubscribe.bind(this),this.signal=new ci,this.connectionStatusChangeEvent.subscribePushLost(this.onPushLostCallBack)}return e.prototype.subscribe=function(t){this.signal.add(e.key,t),this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|5")},e.prototype.publish=function(t){this.signal.dispatch(e.key,t)},e.prototype.reSubscribe=function(){this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|5")},e.$inject=["$rootScope","ConnectionStatusChangeEvent"],e.key="MKTSUM",e}(),tn=function(){function e(){}return e.prototype.hasEquityData=function(){return(2&this.dataFlag)>>1===1},e.prototype.hasDerivData=function(){return 1===(1&this.dataFlag)},e}(),rn=function(){function e(){}return e}(),nn=function(){function e(){}return e}(),on=function(){function e(){}return e}(),sn=function(){function e(){}return e}(),an=function(){function e(e,t){this.$rootScope=e,this.connectionStatusChangeEvent=t,this.onPushLostCallBack=this.reSubscribe.bind(this),this.signal=new ci,this.connectionStatusChangeEvent.subscribePushLost(this.onPushLostCallBack)}return e.prototype.subscribe=function(t){this.signal.add(e.key,t),this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|33")},e.prototype.publish=function(t){this.signal.dispatch(e.key,t)},e.prototype.reSubscribe=function(){this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|33")},e.$inject=["$rootScope","ConnectionStatusChangeEvent"],e.key="NEWMKTSUM",e}(),cn=function(){function e(e,t,i,r){this.$rootScope=e,this.connectionStatus=t,this.$interval=i,this.connectionStatusChangeEvent=r,this.onPushLostCallBack=this.reSubscribe.bind(this),this.signal=new ci,this.lastEquityTickerSeqId=-1,this.lastDerivativeTickerSeqId=-1,this.pullPromiseMap=[],this.connectionStatusChangeEvent.subscribePushLost(this.onPushLostCallBack)}return e.prototype.subscribe=function(e,t,i){this.signal.add(this.getSignalKey(e,t),i);var r=t?"Y":"N";e===Qe.EQUITY?this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|4^^"+r+"^^E"):e===Qe.DERIVATIVE&&this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|4^^"+r+"^^D")},e.prototype.unsubscribe=function(e,t,i){this.signal.remove(this.getSignalKey(e,t),i);var r=t?"Y":"N";0===this.signal.getNumListeners(this.getSignalKey(e,t))&&(e===Qe.EQUITY?this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|4^"+r+"^^E^"):e===Qe.DERIVATIVE&&this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|4^"+r+"^^D^"))},e.prototype.publish=function(e){for(var t=0;t<e.length;t++)switch(e[t].instrumentType){case ce.EQUITY:this.signal.dispatch(this.getSignalKey(Qe.EQUITY,e[t].summary.isSum),e[t]),this.lastEquityTickerSeqId=e[t].sequenceID;break;case ce.FUTURES:case ce.OPTIONS:this.signal.dispatch(this.getSignalKey(Qe.DERIVATIVE,e[t].summary.isSum),e[t]),this.lastDerivativeTickerSeqId=e[t].sequenceID}},e.prototype.reSubscribe=function(){
var e=this,t=Object.keys(this.signal.signals);t.forEach(function(t){var i=t.split("^")[0],r=t.split("^")[1];i===Qe.EQUITY?e.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|4^^"+r+"^^E"):i===Qe.DERIVATIVE&&e.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|4^^"+r+"^^D")})},e.prototype.getSignalKey=function(e,t){var i=t?"Y":"N";return e.toString()+"^"+i},e.$inject=["$rootScope","ConnectionStatus","$interval","ConnectionStatusChangeEvent"],e}(),ln=function(){function e(e,t){this.$rootScope=e,this.connectionStatusChangeEvent=t,this.onPushLostCallBack=this.reSubscribe.bind(this),this.signal=new ci,this.connectionStatusChangeEvent.subscribePushLost(this.onPushLostCallBack)}return e.prototype.publish=function(e){this.signal.dispatch(e.instrumentID,e)},e.prototype.subscribe=function(e,t){for(var i=e.length,r=0;r<i;r++)this.signal.add(e[r],t);if(e.length>0){var n=this.generateSubscribeMessage(e);this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",n)}},e.prototype.unsubscribe=function(e,t){for(var i=e.length,r=[],n=0;n<i;n++)this.signal.remove(e[n],t),0===this.signal.getNumListeners(e[n])&&r.push(e[n]);if(r.length>0){var o=this.generateUnsubscribeMessage(r);this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",o)}},e.prototype.generateSubscribeMessage=function(e){return"REG|2^"+e.join("~")+"^"},e.prototype.generateUnsubscribeMessage=function(e){return"REG|2^^"+e.join("~")},e.prototype.reSubscribe=function(){var e=Object.keys(this.signal.signals);if(e.length>0){var t=this.generateSubscribeMessage(e);this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",t)}},e.$inject=["$rootScope","ConnectionStatusChangeEvent"],e}(),un=function(){function e(e){var t=new Uint8Array(e);this.msgLength=e.byteLength,this.jDataView=new jDataView(t)}return Object.defineProperty(e.prototype,"length",{get:function(){return this.msgLength},enumerable:!0,configurable:!0}),e.prototype.readUnsignedByte=function(){var t=this.jDataView.getUint8();return t===e.BYTE_MIN_VALUE?Number.NaN:t},e.prototype.readByte=function(){var t=this.jDataView.getInt8();return t===e.BYTE_MIN_VALUE?Number.NaN:t},e.prototype.readShort=function(){var t=this.jDataView.getInt16();return t===e.SHORT_MIN_VALUE?Number.NaN:t},e.prototype.readInt=function(){var t=this.jDataView.getInt32();return t===e.INT_MIN_VALUE?Number.NaN:t},e.prototype.readLong=function(){return this.jDataView.getInt64().valueOf()},e.prototype.readString=function(e){return this.jDataView.getString(e).replace(/[\x00-\x1F\x7F-\x9F]/g,"").trim()},e.prototype.readFloat=function(){return this.jDataView.getFloat64().valueOf()},e.prototype.readBoolean=function(){return 1===this.jDataView.getInt8()},e.prototype.tell=function(){return this.jDataView.tell()},e.DEFAULT_PRICE_DIGIT=2,e.SHORT_MIN_VALUE=-32768,e.BYTE_MIN_VALUE=-128,e.INT_MIN_VALUE=-2147483648,e}(),dn=function(){function e(e,t,i,r){this.$rootScope=e,this.mmService=t,this.connectionStatus=i,this.connectionStatusChangeEvent=r,this.onPushConnectedCallBack=this.onPushConnected.bind(this),this.signal=new ci,this.connectionStatusChangeEvent.subscribePushSuccess(this.onPushConnectedCallBack),this.caseSensitiveAccountNoList=[]}return e.prototype.publish=function(e){this.signal.dispatch(e.accountNo,e)},e.prototype.subscribe=function(e,t){for(var i=e.length,r=[],n=0;n<i;n++)this.signal.add(e[n].accountNo,t),r.push(e[n].accountNo),this.setAccountNoInCaseSensitiveAccountNoList(e[n].accountNo);if(r.length>0){var o=this.generateOrderPushRegisterRequestData(r);this.sendRegisterMessage(o)}},e.prototype.unsubscribe=function(e,t){for(var i=e.length,r=[],n=0;n<i;n++)this.signal.remove(e[n].accountNo,t),0===this.signal.getNumListeners(e[n].accountNo)&&(r.push(e[n]),this.deleteAccountNoInCaseSensitiveAccountNoList(e[n].accountNo));if(r.length>0){for(var o=r.length,s=[],n=0;n<o;n++)s.push(r[n].accountNo);if(s.length>0){var a=this.generateOrderPushSUnregisterRequestData(s);this.sendRegisterMessage(a)}}},e.prototype.sendRegisterMessage=function(e){this.connectionStatus.isPush()&&this.mmService.registerOrderStatus(e)},e.prototype.onPushConnected=function(){this.reRegisterOrderPush()},e.prototype.setAccountNoInCaseSensitiveAccountNoList=function(e){this.caseSensitiveAccountNoList[e.toUpperCase()]=e},e.prototype.deleteAccountNoInCaseSensitiveAccountNoList=function(e){delete this.caseSensitiveAccountNoList[e.toUpperCase()]},e.prototype.getCaseSensitiveAccountNo=function(e){return this.caseSensitiveAccountNoList[e.toUpperCase()]},e.prototype.reRegisterOrderPush=function(){var e=this,t=Object.keys(this.signal.signals),i=[];t.forEach(function(t){i.push(e.getCaseSensitiveAccountNo(t))});var r=this.generateOrderPushRegisterRequestData(i);this.mmService.registerOrderStatus(r)},e.prototype.generateOrderPushRegisterRequestData=function(e){var t=new Ir,i=[];return e.forEach(function(e){i.push("E")}),t.newMkt=i.join("~"),t.newAccountNo=e.join("~"),t.oldMkt="",t.oldAccountNo="",t},e.prototype.generateOrderPushSUnregisterRequestData=function(e){var t=new Ir,i=[];return e.forEach(function(e){i.push("E")}),t.oldMkt=i.join("~"),t.oldAccountNo=e.join("~"),t},e.$inject=["$rootScope","MMService","ConnectionStatus","ConnectionStatusChangeEvent"],e}(),hn=function(){function e(e,t){this.$rootScope=e,this.$interval=t,this.signal=new ci,this.pullPromiseMap=[]}return e.prototype.subscribe=function(e,t){var i=this;this.signal.add(""+e,t),this.pullUpdate(e);var r=this.pullPromiseMap[""+e];r&&this.$interval.cancel(r),r=this.$interval(function(){i.pullUpdate(e)},5e3),this.pullPromiseMap[""+e]=r},e.prototype.pullUpdate=function(t){var i={volInstrument:t,service:e.VOL_BY_PRICE_SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",i)},e.prototype.publish=function(e){this.signal.dispatch(""+e.instrumentID,e)},e.prototype.unsubscribe=function(e,t){if(this.signal.remove(""+e,t),0===this.signal.getNumListeners(e)){var i=this.pullPromiseMap[""+e];i&&this.$interval.cancel(i)}},e.$inject=["$rootScope","$interval"],e.VOL_BY_PRICE_SERVICE_ID=10,e}(),pn=function(){function e(e,t){this.$rootScope=e,this.$interval=t,this.signal=new ci,this.pullPromiseMap=[]}return e.prototype.subscribe=function(e,t){var i=this;this.signal.add(e,t),this.pullUpdate(e);var r=this.pullPromiseMap[""+e];r&&this.$interval.cancel(r),r=this.$interval(function(){i.pullUpdate(e)},5e3),this.pullPromiseMap[""+e]=r},e.prototype.pullUpdate=function(t){var i={volDetailsInstrument:t,service:e.VOL_BY_PRICE_SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",i)},e.prototype.publish=function(e){this.signal.dispatch(e.instrumentID,e)},e.prototype.unsubscribe=function(e,t){if(this.signal.remove(e,t),0===this.signal.getNumListeners(e)){var i=this.pullPromiseMap[""+e];i&&this.$interval.cancel(i)}},e.$inject=["$rootScope","$interval"],e.VOL_BY_PRICE_SERVICE_ID=11,e}(),mn=function(){function e(e,t,i,r){this.$rootScope=e,this.mmService=t,this.connectionStatus=i,this.connectionStatusChangeEvent=r,this.onPushConnectedCallBack=this.onPushConnected.bind(this),this.signal=new ci,this.signalMarketRepHierarchy=new ci,this.connectionStatusChangeEvent.subscribePushSuccess(this.onPushConnectedCallBack),this.caseSensitiveAccountNoList=[],this.isSubscribeAllAccount=!1}return e.prototype.publish=function(e){this.signal.dispatch(e.accountNo,e),this.isSubscribeAllAccount&&this.signalMarketRepHierarchy.dispatch(e.accountNo,e)},e.prototype.subscribe=function(e,t){var i=this;if(this.isSubscribeAllAccount)e.forEach(function(e){i.signal.add(e.accountNo,t)});else{var r=[];if(e.forEach(function(e){i.signal.add(e.accountNo,t),r.push(e.accountNo),i.setAccountNoInCaseSensitiveAccountNoList(e.accountNo)}),r.length>0){var n=this.generateRegisterRequestData(r);this.sendMessage(n)}}},e.prototype.unsubscribe=function(e,t){var i=this;if(this.isSubscribeAllAccount)e.forEach(function(e){i.signal.remove(e.accountNo,t)});else{for(var r=e.length,n=[],o=0;o<r;o++)this.signal.remove(e[o].accountNo,t),0===this.signal.getNumListeners(e[o].accountNo)&&n.push(e[o]);if(n.length>0){for(var s=[],o=0;o<n.length;o++)s.push(n[o].accountNo),this.deleteAccountNoInCaseSensitiveAccountNoList(e[o].accountNo);if(s.length>0){var a=this.generateUnregisterRequestData(s);this.sendMessage(a)}}}},e.prototype.sendMessage=function(e){this.connectionStatus.isPush()&&this.mmService.registerOrderStatus(e)},e.prototype.subscribeAccountListUnderMarketRepHierarchy=function(e,t){var i=this,r=Object.keys(this.signal.signals),n=[];r.forEach(function(e){n.push(i.getCaseSensitiveAccountNo(e))});var o=this.generateUnregisterRequestData(n);this.sendMessage(o),this.caseSensitiveAccountNoList=[],e.forEach(function(e){i.signalMarketRepHierarchy.add(e.accountNo,t)}),this.isSubscribeAllAccount=!0,this.sendRegisterAllAccountMessage()},e.prototype.sendRegisterAllAccountMessage=function(){var e=new Ir;e.newMkt="D~D",e.newAccountNo="_ALL~stt",e.oldMkt="",e.oldAccountNo="",this.mmService.registerOrderStatus(e)},e.prototype.onPushConnected=function(){this.isSubscribeAllAccount?this.sendRegisterAllAccountMessage():this.reRegisterOrderPush()},e.prototype.setAccountNoInCaseSensitiveAccountNoList=function(e){this.caseSensitiveAccountNoList[e.toUpperCase()]=e},e.prototype.deleteAccountNoInCaseSensitiveAccountNoList=function(e){delete this.caseSensitiveAccountNoList[e.toUpperCase()]},e.prototype.getCaseSensitiveAccountNo=function(e){return this.caseSensitiveAccountNoList[e.toUpperCase()]},e.prototype.reRegisterOrderPush=function(){var e=this,t=Object.keys(this.signal.signals),i=[];t.forEach(function(t){i.push(e.getCaseSensitiveAccountNo(t))});var r=this.generateRegisterRequestData(i);this.mmService.registerOrderStatus(r)},e.prototype.generateRegisterRequestData=function(e){var t=new Ir,i=[];return e.forEach(function(e){i.push("D")}),t.newMkt=i.join("~"),t.newAccountNo=e.join("~"),t.oldMkt="",t.oldAccountNo="",t},e.prototype.generateUnregisterRequestData=function(e){var t=new Ir,i=[];return e.forEach(function(e){i.push("D")}),t.oldMkt=i.join("~"),t.oldAccountNo=e.join("~"),t},e.prototype.unsubscribeAccountListUnderHierarchy=function(e,t){var i=this;e.forEach(function(e){i.signalMarketRepHierarchy.remove(e.accountNo,t)})},e.$inject=["$rootScope","MMService","ConnectionStatus","ConnectionStatusChangeEvent"],e}(),vn=function(){function e(){}return e}(),fn=function(){function e(){}return e.prototype.hasExtData=function(){return 1===(1&this.dataFlag)},e}(),yn=function(){function e(e,t){this.$rootScope=e,this.mmService=t,this.signal=new ci}return e.prototype.subscribe=function(t,i){this.signal.add(t,i);var r={instHistoricalByDate:t,isInstHistoricalByDateExtended:!0,service:e.SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",r)},e.prototype.unsubscribe=function(e,t){this.signal.remove(e,t)},e.prototype.publish=function(e){this.signal.dispatch(e.instrumentID,e)},e.SERVICE_ID=21,e.$inject=["$rootScope","MMService"],e}(),gn=function(){function e(e,t){this.$rootScope=e,this.mmService=t,this.signal=new ci}return e.prototype.subscribe=function(t,i){this.signal.add(t,i);var r={optStrikeListName:t,service:e.SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",r)},e.prototype.unsubscribe=function(e,t){this.signal.remove(e,t)},e.prototype.publish=function(e){var t=e.expireDate.charAt(0).toUpperCase().concat(e.expireDate.substring(1));this.signal.dispatch(".SET50 Index Options ".concat(t),e)},e.SERVICE_ID=19,e.$inject=["$rootScope","MMService"],e}(),Sn=function(){function e(e,t){this.$rootScope=e,this.streamingAttribute=t,this.signal=new ci}return e.prototype.subscribe=function(e,t){var i=""+this.getRequestServiceFromAccount(e);this.signal.add(i,t);var r=this.generateSubscribeMessage(i);this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher",r)},e.prototype.unsubscribe=function(e,t){var i=""+this.getRequestServiceFromAccount(e);this.signal.remove(Xi.requestForm(i),t)},e.prototype.publish=function(e){this.signal.dispatch(""+e.service,e)},e.prototype.generateSubscribeMessage=function(e){var t=this.streamingAttribute.brokerId;return"REG|22^"+t+"^"+e},e.prototype.getRequestServiceFromAccount=function(e){if(e.systemType===mi.DERIVATIVES)return Ki.SEOSD;switch(e.frontType){case fi.SEOS:return Ki.SEOS;case fi.DGW:return Ki.DGW;case fi.FIS:return Ki.FIS}},e.$inject=["$rootScope","StreamingAttribute"],e.SERVICE_ID=22,e}(),bn=function(){function e(){this.value=[]}return e}(),Cn=function(){function e(){}return e}(),En=function(){function e(e,t){this.$rootScope=e,this.mmService=t,this.signal=new ci}return e.prototype.subscribe=function(t,i){this.signal.add(t,i);var r={instHistoricalChart:t,service:e.SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",r)},e.prototype.unsubscribe=function(e,t){this.signal.remove(e,t)},e.prototype.publish=function(e){this.signal.dispatch(e.instrumentID,e)},e.SERVICE_ID=18,e.$inject=["$rootScope","MMService"],e}(),An=function(){function e(){}return e}(),wn=function(){function e(){}return e.prototype.subscribe=function(t){this.signal=new ci,this.signal.add(e.SIGNAL_NAME,t)},e.prototype.publish=function(t){this.signal.dispatch(e.SIGNAL_NAME,t)},e.SERVICE_ID=23,e.SIGNAL_NAME="AdminMessage",e}(),Tn=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new Oe,t=this.binary.readByte(),i=R(this.binary,t);if(e.instrumentID=this.binary.readString(i),e.instrumentType=this.binary.readByte(),e.instrumentType===ce.EQUITY&&(e.instrumentSubType=this.binary.readByte()),e.priceDigit=_(this.binary,e.instrumentType),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(e.settleDigit=this.binary.readByte()),e.dataFlag=this.binary.readByte(),e.hasInitMarketData()){var r=new ke;r.previousClose=L(this.binary,t,e.priceDigit),r.high=L(this.binary,t,e.priceDigit),r.low=L(this.binary,t,e.priceDigit),0===r.high&&(r.high=Number.NaN),0===r.low&&(r.low=Number.NaN),e.instrumentType!==ce.INDEX&&(r.ceiling=L(this.binary,t,e.priceDigit),r.floor=L(this.binary,t,e.priceDigit)),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(r.spread=L(this.binary,t,e.priceDigit),r.previousSettle=L(this.binary,t,e.priceDigit)),e.initMarketData=r}if(e.hasInitIntradayData()){var n=new $e;if(e.instrumentType!==ce.INDEX){var o=R(this.binary,t);n.instLongName=this.binary.readString(o)}if(e.instrumentType===ce.INDEX&&(n.marketCap=k(this.binary,t)),e.instrumentType!==ce.INDEX&&e.instrumentType!==ce.EQUITY||(n.pe=L(this.binary,t,2),n.pbv=L(this.binary,t,2),n["yield"]=L(this.binary,t,2)),e.instrumentType===ce.EQUITY&&(n.eps=L(this.binary,t,2)),e.instrumentType!==ce.INDEX&&(n.w52High=L(this.binary,t,2),n.w52Low=L(this.binary,t,2),n.w52HighDate=this.binary.readString(10),n.w52LowDate=this.binary.readString(10),0===n.w52High&&(n.w52High=Number.NaN),0===n.w52Low&&(n.w52Low=Number.NaN)),e.instrumentType===ce.EQUITY){n.percentChg1W=L(this.binary,t,2),n.percentChg1M=L(this.binary,t,2),n.percentChg3M=L(this.binary,t,2);var s=R(this.binary,t);n.currency=this.binary.readString(s),n.iaaConsensus=L(this.binary,t,2)}if(e.instrumentSubType===de.WARRANT||e.instrumentSubType===de.DERIVATIVES_WARRANT){n.exercisePrice=this.binary.readFloat(),n.exerciseDate=this.binary.readString(10),n.wIsTypeCall=this.binary.readBoolean();var a=R(this.binary,t);n.wExerciseRatio=this.binary.readString(a)}if(e.instrumentSubType===de.DERIVATIVES_WARRANT&&(n.dwType=this.binary.readString(1),n.dwRemainingDays=$(this.binary,t),n.dwLastTradingDate=this.binary.readString(10),n.dwMultiplier=N(this.binary,5)),e.instrumentSubType===de.ETF&&(n.aumSize=N(this.binary,2)),e.instrumentSubType===de.DR){var c=R(this.binary,t);n.underlyingCompany=this.binary.readString(c);var l=R(this.binary,t);n.underlyingUrl=this.binary.readString(l);var u=R(this.binary,t);n.underlyingExchange=this.binary.readString(u);var d=R(this.binary,t);n.underlying=this.binary.readString(d)}if(e.instrumentType===ce.FUTURES||e.instrumentType===ce.OPTIONS){n.derivRemainigDays=$(this.binary,t),n.derivLastTradingDate=this.binary.readString(10);var d=R(this.binary,t);n.underlying=this.binary.readString(d);var h=R(this.binary,t);n.marketType=this.binary.readString(h),n.derivInitialMargin=N(this.binary,2),n.derivMultiplier=this.binary.readInt()}e.instrumentType===ce.OPTIONS&&(n.isCallOptions=this.binary.readBoolean(),n.strikePrice=N(this.binary,2)),e.initIntradayData=n}if(e.hasInitStatData()){var p=new Le;e.instrumentType===ce.EQUITY&&(p.dividendYield=$(this.binary,t)),e.initStatData=p}if(e.hasSummaryData()){var m=new Ne;if(m.lastDone=L(this.binary,t,e.priceDigit),m.change=L(this.binary,t,e.priceDigit),m.percentChange=L(this.binary,t,2),m.totalVolume=k(this.binary,t),e.instrumentType!==ce.INDEX){m.average=L(this.binary,t,e.priceDigit);var v=R(this.binary,t);m.status=this.binary.readString(v),m.percentBuy=this.binary.readByte(),m.percentSell=this.binary.readByte(),m.percentNoSide=this.binary.readByte(),m.percentBuyIncNoSide=this.binary.readByte()}e.instrumentType===ce.INDEX&&(m.indexTotalValue=k(this.binary,t)),e.instrumentType===ce.EQUITY&&(m.equityTotalValue=k(this.binary,t),m.averageBuy=L(this.binary,t,2),m.averageSell=L(this.binary,t,2),m.averageNoSide=L(this.binary,t,2),m.averageBuyIncNoSide=L(this.binary,t,2)),e.instrumentSubType!==de.WARRANT&&e.instrumentSubType!==de.DERIVATIVES_WARRANT||(m.warrantUnderlyingPrice=L(this.binary,t,2),m.warrantTheoricalPrice=L(this.binary,t,2),m.warrantImpliedVolatility=L(this.binary,t,2),m.warrantDelta=L(this.binary,t,2),m.warrantTheta=this.binary.readInt()),e.instrumentSubType===de.ETF&&(m.iNav=N(this.binary,4)),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(m.derivUnderlyingPrice=L(this.binary,t,e.priceDigit),m.openInterest=$(this.binary,t),m.settlePrice=L(this.binary,t,e.settleDigit),m.theoreticalPrice=L(this.binary,t,2)),e.instrumentType===ce.OPTIONS&&(m.optionsImpliedVolatility=L(this.binary,t,2),m.optionsDelta=L(this.binary,t,2),m.optionsTheta=N(this.binary,4)),e.summaryData=m}if(e.hasBidOfferData()){var f=new Me;if(e.instrumentType!==ce.INDEX){var y=this.binary.readByte();f.bidFlag=this.readBidFlag(y),f.askFlag=this.readAskFlag(y),f.bidPrice1=L(this.binary,t,e.priceDigit),f.bidPrice2=L(this.binary,t,e.priceDigit),f.bidPrice3=L(this.binary,t,e.priceDigit),f.bidPrice4=L(this.binary,t,e.priceDigit),f.bidPrice5=L(this.binary,t,e.priceDigit),f.askPrice1=L(this.binary,t,e.priceDigit),f.askPrice2=L(this.binary,t,e.priceDigit),f.askPrice3=L(this.binary,t,e.priceDigit),f.askPrice4=L(this.binary,t,e.priceDigit),f.askPrice5=L(this.binary,t,e.priceDigit),f.bidVolume1=k(this.binary,t),f.bidVolume2=k(this.binary,t),f.bidVolume3=k(this.binary,t),f.bidVolume4=k(this.binary,t),f.bidVolume5=k(this.binary,t),f.askVolume1=k(this.binary,t),f.askVolume2=k(this.binary,t),f.askVolume3=k(this.binary,t),f.askVolume4=k(this.binary,t),f.askVolume5=k(this.binary,t)}e.bidofferData=f}if(e.hasProjectedData()){var g=new Re;e.instrumentType!==ce.INDEX&&(g.projectedPrice=L(this.binary,t,e.priceDigit),g.openPrice1=L(this.binary,t,e.priceDigit),g.openPrice2=L(this.binary,t,e.priceDigit),g.currentState=this.binary.readByte()),e.instrumentType===ce.EQUITY&&(g.projectedVolume=k(this.binary,t)),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(g.projected2=L(this.binary,t,e.priceDigit),g.projected0=L(this.binary,t,e.priceDigit),g.openPrice0=L(this.binary,t,e.priceDigit)),e.projectedData=g}return e},e.prototype.readAskFlag=function(e){return(240&e)>>4},e.prototype.readBidFlag=function(e){return 15&e},e}(),Dn=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new tn,t=this.binary.readByte();if(e.dataFlag=this.binary.readByte(),e.hasEquityData()){e.equityData=new rn,e.equityData.setIndex=N(this.binary,2),e.equityData.setHigh=N(this.binary,2),e.equityData.setLow=N(this.binary,2),e.equityData.setChange=L(this.binary,t,2),e.equityData.setHighChange=L(this.binary,t,2),e.equityData.setLowChange=L(this.binary,t,2),e.equityData.setTotalValue=N(this.binary,2),e.equityData.setTotalVolume=this.binary.readLong(),e.equityData.setGainers=$(this.binary,t),e.equityData.setLosers=$(this.binary,t),e.equityData.setUnchanged=$(this.binary,t);var i=R(this.binary,t);e.equityData.setStatus=this.binary.readString(i);var r=this.binary.readByte();e.equityData.indexData=[];for(var n=0;n<r;n++){var o=new nn,s=R(this.binary,t);o.indexType=he.lookup(this.binary.readString(s)),o.index=N(this.binary,2),o.high=N(this.binary,2),o.low=N(this.binary,2),o.change=L(this.binary,t,2),o.highChange=L(this.binary,t,2),o.lowChange=L(this.binary,t,2),o.totalValue=N(this.binary,2),o.gainers=$(this.binary,t),o.losers=$(this.binary,t),o.unchanged=$(this.binary,t),e.equityData.indexData.push(o)}}if(e.hasDerivData()){e.derivData=new on,e.derivData.tfexTotalVolume=this.binary.readInt(),e.derivData.tfexTotalDeal=this.binary.readInt(),e.derivData.tfexTotalOI=this.binary.readInt(),e.derivData.futuresTotalVolume=this.binary.readInt(),e.derivData.futuresTotalDeal=this.binary.readInt(),e.derivData.futuresTotalOI=this.binary.readInt(),e.derivData.callOptionsVolume=this.binary.readInt(),e.derivData.callOptionsDeal=this.binary.readInt(),e.derivData.callOptionsOI=this.binary.readInt(),e.derivData.putOptionsVolume=this.binary.readInt(),e.derivData.putOptionsDeal=this.binary.readInt(),e.derivData.putOptionsOI=this.binary.readInt(),e.derivData.optionsTotalVolume=this.binary.readInt(),e.derivData.optionsTotalDeal=this.binary.readInt(),e.derivData.optionsTotalOI=this.binary.readInt(),e.derivData.dateAsOfDay=this.binary.readByte(),e.derivData.dateAsOfMonth=this.binary.readByte(),e.derivData.dateAsOfYear=this.binary.readShort();var a=this.binary.readByte();e.derivData.marketTypeData=[];for(var n=0;n<a;n++){var c=new sn,l=R(this.binary,t);c.market=Ze.lookup[this.binary.readString(l)];var u=R(this.binary,t);c.status=this.binary.readString(u),c.volume=this.binary.readInt(),c.deal=this.binary.readInt(),c.oi=this.binary.readInt(),void 0!==c.market&&e.derivData.marketTypeData.push(c)}}return e},e}(),In=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new Ii,t=this.binary.readByte(),i=R(this.binary,t);if(e.instrumentID=this.binary.readString(i),e.instrumentType=this.binary.readByte(),e.instrumentType===ce.EQUITY&&(e.instrumentSubType=this.binary.readByte()),e.priceDigit=_(this.binary,e.instrumentType),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(e.settleDigit=this.binary.readByte()),e.dataFlag=this.binary.readByte(),e.hasInitData()){var r=new Pi;r.high=L(this.binary,t,e.priceDigit),r.low=L(this.binary,t,e.priceDigit);var n=[];if(e.instrumentType!==ce.INDEX)for(var o=this.binary.readByte(),s=0;s<o;s++){var a=new Oi,c=R(this.binary,t);a.sign=this.binary.readString(c);var l=R(this.binary,t);a.date=this.binary.readString(l),n.push(a)}r.caFlag=n,e.instrumentType!==ce.EQUITY&&e.instrumentType!==ce.INDEX||(r.previousClose=L(this.binary,t,2)),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(r.previousSettle=L(this.binary,t,e.priceDigit),r.previousOI=$(this.binary,t),r.lastTradingDate=this.binary.readString(10),r.ltdExpFlag=this.binary.readByte(),r.ltdTime=this.binary.readString(5),r.expDate=this.binary.readString(10)),e.instrumentType===ce.OPTIONS&&(r.isCallOptions=this.binary.readBoolean(),r.strikePrice=this.binary.readShort()),e.initData=r}if(e.hasSummaryData()){var u=new ki;if(u.lastDone=L(this.binary,t,e.priceDigit),u.change=L(this.binary,t,e.priceDigit),u.percentChange=L(this.binary,t,2),u.totalVolume=k(this.binary,t),e.instrumentType!==ce.INDEX){var d=R(this.binary,t);u.status=this.binary.readString(d)}e.instrumentType!==ce.EQUITY&&e.instrumentType!==ce.INDEX||(u.totalValue=k(this.binary,t)),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(u.settlePrice=L(this.binary,t,e.settleDigit),u.theoreticalPrice=L(this.binary,t,2),u.underlyingPrice=L(this.binary,t,e.priceDigit)),e.instrumentType===ce.OPTIONS&&(u.impliedVolatility=L(this.binary,t,2),u.delta=L(this.binary,t,2)),e.summary=u}if(e.hasBidOfferData()&&e.instrumentType!==ce.INDEX){var h=new $i,p=this.binary.readByte();h.bidFlag=this.readBidFlag(p),h.askFlag=this.readAskFlag(p),h.bidPrice=L(this.binary,t,e.priceDigit),h.askPrice=L(this.binary,t,e.priceDigit),h.bidVolume=k(this.binary,t),h.askVolume=k(this.binary,t),e.bidOffer=h}if(e.hasProjectedData()&&e.instrumentType!==ce.INDEX){var m=new Li;m.openPrice1=L(this.binary,t,e.priceDigit),m.openPrice2=L(this.binary,t,e.priceDigit),m.projectedPrice=L(this.binary,t,e.priceDigit),m.percentProjectedChange=L(this.binary,t,2),e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(m.openPrice0=L(this.binary,t,e.priceDigit)),e.projected=m}return e},e.prototype.readAskFlag=function(e){return(240&e)>>4},e.prototype.readBidFlag=function(e){return 15&e},e}(),Pn=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new fn,t=this.binary.readByte(),i=R(this.binary,t);e.instrumentID=this.binary.readString(i),e.instrumentType=this.binary.readByte(),e.dataFlag=this.binary.readByte();var r=this.binary.readShort();e.value=[];for(var n=0;n<r;n++){var o=new vn;o.day=this.binary.readByte(),o.month=this.binary.readByte(),o.year=this.binary.readShort(),o.open=L(this.binary,t,2),o.close=L(this.binary,t,2),o.change=L(this.binary,t,2),o.percentChange=M(this.binary,2),o.high=L(this.binary,t,2),o.low=L(this.binary,t,2),o.totalVolume=k(this.binary,t),e.instrumentType===ce.EQUITY&&(o.averagePrice=L(this.binary,t,2)),!e.hasExtData()||e.instrumentType!==ce.EQUITY&&e.instrumentType!==ce.INDEX||(o.totalValue=k(this.binary,t),o.marketCap=k(this.binary,t),o.pe=M(this.binary,2),o.dividendYield=M(this.binary,2)),!e.hasExtData()||e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(o.previousSettlementPrice=L(this.binary,t,2),o.settlementPrice=L(this.binary,t,2),o.transaction=k(this.binary,t),o.oi=k(this.binary,t)),e.value.push(o)}return e},e}(),On=(function(){function e(){}return e}(),function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e={},t=this.binary.readByte();e.count=R(this.binary,t),e.list=[];for(var i=0;i<e.count;i++){var r={},n=R(this.binary,t);r.type=this.binary.readString(n);var o=R(this.binary,t);r.language=this.binary.readString(o);var s=10;r.date=this.binary.readString(s);var a=8;r.time=this.binary.readString(a);var c=R(this.binary,t);r.source=this.binary.readString(c);var l=R(this.binary,t);r.instrumentID=this.binary.readString(l);var u=R(this.binary,t);r.title=this.binary.readString(u);var d=this.binary.readInt();r.id=d.toString();var h=R(this.binary,t);r.filePath=this.binary.readString(h);var p=R(this.binary,t);r.link=this.binary.readString(p),r.hasAttach=this.binary.readBoolean(),e.list.push(r)}return e},e}()),kn=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new bn,t=this.binary.readByte(),i=R(this.binary,t);e.instrumentID=this.binary.readString(i),e.priceDigit=this.binary.readByte(),e.spread=L(this.binary,t,e.priceDigit);var r=this.binary.readShort();e.value=[];for(var n=0;n<r;n++){var o=new Cn;o.day=this.binary.readByte(),o.month=this.binary.readByte(),o.year=this.binary.readShort(),o.value=L(this.binary,t,2),o.volume=k(this.binary,t),e.value.push(o)}return e},e}(),$n=function(){function e(){}return e}(),Ln=function(){function e(){}return e}(),Nn=function(){function e(){}return e}(),Mn=function(){function e(){}return e}(),Rn=function(){function e(){}return e}(),_n=function(){function e(e){this.binary=e,this.PRICE_DIGIT=2}return e.prototype.decode=function(){var e=new $n,t=this.binary.readByte(),i=R(this.binary,t);e.instrumentID=this.binary.readString(i),e.instrumentType=this.binary.readByte(),e.instrumentType===ce.EQUITY&&(e.instrumentSubType=this.binary.readByte());var r=new Ln;r.previousClose=L(this.binary,t,this.PRICE_DIGIT),r.high=L(this.binary,t,this.PRICE_DIGIT),r.low=L(this.binary,t,this.PRICE_DIGIT),r.ceiling=L(this.binary,t,this.PRICE_DIGIT),r.floor=L(this.binary,t,this.PRICE_DIGIT),0===r.high&&(r.high=Number.NaN),0===r.low&&(r.low=Number.NaN),e.initMarketData=r;var n=new Nn;n.lastDone=L(this.binary,t,this.PRICE_DIGIT),n.change=L(this.binary,t,this.PRICE_DIGIT),n.percentChange=L(this.binary,t,2),n.totalVolume=k(this.binary,t),n.totalValue=k(this.binary,t),n.average=L(this.binary,t,this.PRICE_DIGIT);var o=R(this.binary,t);n.status=this.binary.readString(o),n.percentBuy=this.binary.readByte(),n.percentSell=this.binary.readByte(),n.percentNoSide=this.binary.readByte(),n.percentBuyIncNoSide=this.binary.readByte(),n.averageBuy=L(this.binary,t,2),n.averageSell=L(this.binary,t,2),n.averageNoSide=L(this.binary,t,2),n.averageBuyIncNoSide=L(this.binary,t,2),e.summaryData=n;var s=new Mn,a=this.binary.readByte();s.bidFlag=this.readBidFlag(a),s.askFlag=this.readAskFlag(a),s.bidPrice1=L(this.binary,t,this.PRICE_DIGIT),s.bidPrice2=L(this.binary,t,this.PRICE_DIGIT),s.bidPrice3=L(this.binary,t,this.PRICE_DIGIT),s.bidPrice4=L(this.binary,t,this.PRICE_DIGIT),s.bidPrice5=L(this.binary,t,this.PRICE_DIGIT),s.askPrice1=L(this.binary,t,this.PRICE_DIGIT),s.askPrice2=L(this.binary,t,this.PRICE_DIGIT),s.askPrice3=L(this.binary,t,this.PRICE_DIGIT),s.askPrice4=L(this.binary,t,this.PRICE_DIGIT),s.askPrice5=L(this.binary,t,this.PRICE_DIGIT),s.bidVolume1=k(this.binary,t),s.bidVolume2=k(this.binary,t),s.bidVolume3=k(this.binary,t),s.bidVolume4=k(this.binary,t),s.bidVolume5=k(this.binary,t),s.askVolume1=k(this.binary,t),s.askVolume2=k(this.binary,t),s.askVolume3=k(this.binary,t),s.askVolume4=k(this.binary,t),s.askVolume5=k(this.binary,t),e.bidofferData=s;var c=new Rn;return c.currentState=this.binary.readByte(),c.projectedPrice=L(this.binary,t,this.PRICE_DIGIT),c.openPrice1=L(this.binary,t,this.PRICE_DIGIT),c.openPrice2=L(this.binary,t,this.PRICE_DIGIT),c.projectedVolume=k(this.binary,t),e.projectedData=c,e},e.prototype.readAskFlag=function(e){return(240&e)>>4},e.prototype.readBidFlag=function(e){return 15&e},e}(),Vn=function(){function e(){}return e.prototype.getTickers=function(){for(var e=new Array(this.volumes.length),t=Math.pow(10,this.priceDigit),i=this.sequenceID-this.volumes.length+1,r=0;r<this.volumes.length;r++)e[r]={},e[r].instrumentType=this.instrumentType,e[r].summary=this.summary,e[r].instrumentID=this.instrumentID,e[r].priceDigit=this.priceDigit,e[r].price=this.price/t,e[r].change=this.change/t,e[r].pchange=this.pchange/100,e[r].sequenceID=i,e[r].volume=this.volumes[r],e[r].time=this.time,i+=1;return e},e}(),Bn=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new Vn,t=this.binary.readByte();e.instrumentType=this.binary.readByte(),e.summary=new Di,e.summary.readSubType(this.binary.readUnsignedByte()),e.summary.readTickerConfig(this.binary.readUnsignedByte()),e.priceDigit=2;var i=R(this.binary,t);e.instrumentID=this.binary.readString(i);var r=this.binary.readByte(),n=this.binary.readByte(),o=this.binary.readByte();e.time=this.paddingZero(r)+":"+this.paddingZero(n)+":"+this.paddingZero(o),e.price=$(this.binary,t),e.change=$(this.binary,t),e.pchange=$(this.binary,t),e.sequenceID=this.binary.readInt(),e.volumes=[];for(var s=R(this.binary,t),a=0;a<s;a++)e.volumes.push(this.readVolume(t));return e},e.prototype.paddingZero=function(e){return e<10?"0"+e:""+e},e.prototype.readVolume=function(e){return 8===(8&e)?this.binary.readInt():this.binary.readShort()},e}(),xn=function(){function e(e,t){this.$rootScope=e,this.$interval=t,this.signal=new ci,this.pullPromiseMap=[]}return e.prototype.subscribe=function(t,i){var r=this;this.signal.add(""+t,i);var n={oddlotInfo:t,service:e.SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",n);var o=this.pullPromiseMap[""+t];o&&this.$interval.cancel(o),o=this.$interval(function(){r.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",n)},to.getSeconds(10)),this.pullPromiseMap[""+t]=o},e.prototype.unsubscribe=function(e,t){if(this.signal.remove(""+e,t),0===this.signal.getNumListeners(e)){var i=this.pullPromiseMap[""+e];i&&this.$interval.cancel(i)}},e.prototype.publish=function(e){this.signal.dispatch(""+e.instrumentID,e);
},e.$inject=["$rootScope","$interval"],e.SERVICE_ID=27,e}(),Fn=function(){function e(e,t){this.name=e,this.feedValue=t}return Object.defineProperty(e,"lookup",{get:function(){var t={"":e.NO_TYPE,ALL:e.ALL,FIN:e.FINANCE,NEWS:e.NEWS,IQ:e.IQ};return t},enumerable:!0,configurable:!0}),e.NO_TYPE=new e("No Type",""),e.ALL=new e("All","ALL"),e.FINANCE=new e("Finance","FIN"),e.NEWS=new e("News","NEWS"),e.IQ=new e("IQ News","IQ"),e}(),Un=function(){function e(e,t){this.name=e,this.feedValue=t}return Object.defineProperty(e,"lookup",{get:function(){var t={"":e.NO_TYPE,TH:e.THAI,EN:e.ENGLISH};return t},enumerable:!0,configurable:!0}),e.NO_TYPE=new e("No Type",""),e.THAI=new e("Thai","TH"),e.ENGLISH=new e("English","EN"),e}(),qn=function(){function e(){this.type=Fn.NO_TYPE,this.language=Un.NO_TYPE,this.date=new Date,this.time="",this.source="",this.symbol="",this.title="",this.filePath="",this.link="",this.hasAttach=!1}return e.parseNewsItemResponseMessage=function(t){var i=[];return t.forEach(function(t){var r=new e;r.id=t.id,r.type=Fn.lookup[t.type],r.language=Un.lookup[t.language];var n=t.date.split("/");r.date=new Date(parseInt(n[2],10),parseInt(n[1],10)-1,parseInt(n[0],10)),r.time=t.time,r.source=t.source,r.symbol=t.instrumentID,r.title=t.title,r.filePath=t.filePath,r.link=t.link,r.hasAttach=t.hasAttach,i.push(r)}),i},e}(),jn=function(){function e(){}return e}(),Hn=function(){function e(){}return e}(),Wn=function(){function e(e,t,i){this.requestParam=e,this.dropdoenName=t,this.showName=i}return e.prototype.isSET=function(){return this===e.SET_NEWS},e.prototype.isMoneyChannel=function(){return this===e.MONEY_CHANNEL},e.prototype.isIQ=function(){return this===e.IQ_NEWS},e.SET_NEWS=new e("NEWS","set","SET News"),e.MONEY_CHANNEL=new e("MC","mc","Money Channel"),e.IQ_NEWS=new e("IQ","iq","IQ News"),e.lookup={SET:e.SET_NEWS,set:e.SET_NEWS,MC:e.MONEY_CHANNEL,mc:e.MONEY_CHANNEL,IQ:e.IQ_NEWS,iq:e.IQ_NEWS},e}(),Yn=function(){function e(e,t,i,r){this.$q=e,this.mmService=t,this.researchService=i,this.xmlParserService=r}return e.prototype.getNewsList=function(e,t){var i=new Or;return i.newsType=e.requestParam,i.newsLanguage=e.selectedLanguage,""===t?i.newsSymbol="_ALL":i.newsSymbol=t,this.requestNewsList(i)},e.prototype.requestNewsList=function(e){var t=this;return this.mmService.getNews(e).then(function(e){return"T"===e.result?t.$q.resolve(e.data):t.$q.reject(e.strMsg)},function(){return t.$q.reject()})},e.prototype.getNewsDetail=function(e,t){var i=this,r=new jn;return r.id=e,r.type=t.requestParam,this.researchService.getNewsDetail(r).then(function(e){var r=i.parseNewsDetailResponse(e,t);return i.$q.resolve(r)},function(){return i.$q.reject()})},e.prototype.getNewsDetailBySource=function(e,t){var i=this,r=new Hn;return r.txtSource=e.filePath,this.researchService.getNewsDetailBySrc(r).then(function(e){var r=i.parseNewsDetailResponse(e,t);return i.$q.resolve(r)},function(){return i.$q.reject()})},e.prototype.parseNewsDetailResponse=function(e,t){var i=new ym,r=this.xmlParserService.toJson(e);return i.hasLink=r.News.Link&&r.News.Link.length>0,i.link=r.News.Link,t.isSET()||t.isIQ()?(i.headline=r.News.Headline,i.story=r.News.Story):t.isMoneyChannel()&&(i.headline=r.News.Headline,i.story=r.News.RSSDescription),i.detail=r,i},e.$inject=["$q","MMService","ResearchService","XMLParserService"],e}(),Gn=function(){function e(){this.signal=new ci}return e.prototype.publish=function(e){var t=this;e.list.forEach(function(e){t.signal.dispatch(e.instrumentID,e)})},e.prototype.subscribe=function(e,t){for(var i=e.length,r=0;r<i;r++)this.signal.add(e[r],t)},e.prototype.unsubscribe=function(e,t){for(var i=e.length,r=0;r<i;r++)this.signal.remove(e[r],t)},e}(),Kn=function(){function e(e,t){this.$rootScope=e,this.$interval=t,this.signal=new ci,this.tickerSequenceId=new ut((-1)),this.pullPromiseMap=[]}return e.prototype.subscribe=function(t,i){var r=this;this.signal.add(""+t,i);var n={oddlotTicker:t,oddlotSequenceId:this.tickerSequenceId.value(t),service:e.SERVICE_ID};this.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",n);var o=this.pullPromiseMap[t];o&&this.$interval.cancel(o),o=this.$interval(function(){n.oddlotSequenceId=r.tickerSequenceId.value(t),r.$rootScope.$broadcast("writeSubscribeMessageToPullDispatcher",n)},to.getSeconds(10)),this.pullPromiseMap[t]=o},e.prototype.unsubscribe=function(e,t){if(this.signal.remove(e,t),0===this.signal.getNumListeners(e)){var i=this.pullPromiseMap[e];i&&this.$interval.cancel(i)}this.tickerSequenceId.add(e,-1)},e.prototype.publish=function(e){var t=this;e.length>0&&(e.forEach(function(e){t.tickerSequenceId.add(e.instrumentID,e.sequenceID)}),this.signal.dispatch(e[0].instrumentID,e))},e.$inject=["$rootScope","$interval"],e.SERVICE_ID=28,e}(),zn=function(){function e(){}return e}(),Qn=function(){function e(){}return e}(),Xn=function(){function e(){}return e.prototype.hasMarketStatus=function(){return 1===(1&this.dataFlag)},e.prototype.hasBigLot=function(){return(2&this.dataFlag)>>1===1},e.prototype.isEquity=function(){return this.instrumentType===ce.EQUITY},e.prototype.isDerivatives=function(){return this.instrumentType===ce.FUTURES||this.instrumentType===ce.OPTIONS},e}(),Jn=function(){function e(e){this.$rootScope=e,this.signal=new ci}return e.prototype.subscribe=function(t){this.signal.add(e.SIGNAL_NAME,t),this.$rootScope.$broadcast("writeSubscribeMessageToDispatcher","REG|30^ALL")},e.prototype.publish=function(t){this.signal.dispatch(e.SIGNAL_NAME,t)},e.SERVICE_ID=30,e.SIGNAL_NAME="Announcement",e.$inject=["$rootScope"],e}(),Zn=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new An,t=this.binary.readByte(),i=8;e.time=this.binary.readString(i);var r=R(this.binary,t);return e.detail=this.binary.readString(r),e},e}(),eo=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S){this.marketSummaryPublishSubscriber=e,this.orderPushPublishSubscriber=t,this.derivOrderPushPublishSubscriber=i,this.instrumentInfoPublishSubscriber=r,this.snapshotPublishSubscriber=n,this.instrumentTickerPublishSubscriber=o,this.marketTickerPublishSubscriber=s,this.volumeByPricePublishSubscriber=a,this.volumeByPriceDetailPublishSubscriber=c,this.intradayChartPublishSubscriber=l,this.historicalByDatePublishSubscriber=u,this.newMarketSummaryPublishSubscriber=d,this.optionsStrikePriceListPublishSubscriber=h,this.orderPushStatusPublishSubscriber=p,this.newsPublishSubscriber=m,this.historicalChartPublishSubscriber=v,this.instrumentOddLotInfoPublishSubscriber=f,this.instrumentOddLotTickerPublishSubscriber=y,this.announcementPublishSubscriber=g,this.adminMessagePublishSubscriber=S}return e.prototype.split=function(e){this.binary=e;for(var t=this.binary.length,i=0;t>0;t-=i+2){var r=this.binary.tell();i=this.binary.readShort();var n=this.binary.readByte();for(this.publishDecodeData(n);this.binary.tell()<i+r+2;)this.binary.readByte()}},e.prototype.publishDecodeData=function(t){if(t===e.NEW_EQUITY_ORDER_PUSH_SERVICE||t===e.EQUITY_ORDER_PUSH_SERVICE){var i=new ro(this.binary).decode(t);this.orderPushPublishSubscriber.publish(i)}else if(t===e.INSTRUMENT_INFO_SERVICE){var r=new Tn(this.binary).decode();this.instrumentInfoPublishSubscriber.publish(r)}else if(t===e.SNAPSHOT_SERVICE){var n=new In(this.binary).decode();this.snapshotPublishSubscriber.publish(n)}else if(t===e.INSTRUMENT_TICKER_SERVICE){var o=new so(this.binary).decodeInstrument();this.instrumentTickerPublishSubscriber.publish(o.getTickers())}else if(t===e.MARKET_TICKER_SERVICE){var o=new so(this.binary).decodeMarket();this.marketTickerPublishSubscriber.publish(o.getTickers())}else if(t===e.MARKET_SUMMARY_SERVICE){var s=new ao(this.binary).decode();this.marketSummaryPublishSubscriber.publish(s)}else if(t===e.VOLUME_BY_PRICE_SERVICE){var a=new co(this.binary).decode();this.volumeByPricePublishSubscriber.publish(a)}else if(t===e.VOLUME_BY_PRICE_DETAIL_SERVICE){var c=new lo(this.binary).decode();this.volumeByPriceDetailPublishSubscriber.publish(c)}else if(t===e.NEW_INTRADAY_CHART_SERVICE){var l=new uo(this.binary).decode();this.intradayChartPublishSubscriber.publish(l)}else if(t===e.ITPD_ORDER_URL_PUSH_SERVICE){var u=new oo(this.binary).decode();this.derivOrderPushPublishSubscriber.publish(u)}else if(t===e.HISTORICAL_BYDATE){var d=new Pn(this.binary).decode();this.historicalByDatePublishSubscriber.publish(d)}else if(t===e.NEW_MARKET_SUMMARY_SERVICE){var h=new Dn(this.binary).decode();this.newMarketSummaryPublishSubscriber.publish(h)}else if(t===e.OPTIONS_STRIKE_PRICE_LIST){var p=new ho(this.binary).decode();this.optionsStrikePriceListPublishSubscriber.publish(p)}else if(t===e.ORDER_PUSH_STATUS){var m=new po(this.binary).decode();this.orderPushStatusPublishSubscriber.publish(m)}else if(t===e.NEWS_INFO_PUSH){var v=new On(this.binary).decode();this.newsPublishSubscriber.publish(v)}else if(t===e.HISTORICAL_CHART){var f=new kn(this.binary).decode();this.historicalChartPublishSubscriber.publish(f)}else if(t===e.INSTRUMENT_ODD_LOT_INFO){var y=new _n(this.binary).decode();this.instrumentOddLotInfoPublishSubscriber.publish(y)}else if(t===e.INSTRUMENT_ODD_LOT_TICKER){var g=new Bn(this.binary).decode();this.instrumentOddLotTickerPublishSubscriber.publish(g.getTickers())}else if(t===e.ORDER_ANNOUNCEMENT_SERVICE){var S=new vo(this.binary).decode();this.announcementPublishSubscriber.publish(S)}else if(t===e.ADMIN_MESSAGE_SERVICE){var b=new Zn(this.binary).decode();this.adminMessagePublishSubscriber.publish(b)}},e.$inject=["MarketSummaryPublishSubscriber","EquityOrderPushPublishSubscriber","DerivativesOrderPushPublishSubscriber","InstrumentInfoPublishSubscriber","SnapshotPublishSubscriber","InstrumentTickerPublishSubscriber","MarketTickerPublishSubscriber","VolumeByPricePublishSubscriber","VolumeByPriceDetailPublishSubscriber","IntradayChartPublishSubscriber","HistoricalByDatePublishSubscriber","NewMarketSummaryPublishSubscriber","OptionsStrikePriceListPublishSubscriber","OrderPushStatusPublishSubscriber","NewsPublishSubscriber","HistoricalChartPublishSubscriber","InstrumentOddLotInfoPublishSubscriber","InstrumentOddLotTickerPublishSubscriber","AnnouncementPublishSubscriber","AdminMessagePublishSubscriber"],e.INSTRUMENT_INFO_SERVICE=1,e.SNAPSHOT_SERVICE=2,e.INSTRUMENT_TICKER_SERVICE=3,e.MARKET_TICKER_SERVICE=4,e.MARKET_SUMMARY_SERVICE=5,e.EQUITY_ORDER_PUSH_SERVICE=6,e.VOLUME_BY_PRICE_SERVICE=10,e.VOLUME_BY_PRICE_DETAIL_SERVICE=11,e.SET_CALENDAR_SERVICE=20,e.HISTORICAL_BYDATE=21,e.ADMIN_MESSAGE_SERVICE=23,e.ITPD_ORDER_URL_PUSH_SERVICE=24,e.NEW_INTRADAY_CHART_SERVICE=32,e.NEW_MARKET_SUMMARY_SERVICE=33,e.NEW_EQUITY_ORDER_PUSH_SERVICE=35,e.OPTIONS_STRIKE_PRICE_LIST=19,e.ORDER_PUSH_STATUS=22,e.NEWS_INFO_PUSH=13,e.HISTORICAL_CHART=18,e.INSTRUMENT_ODD_LOT_INFO=27,e.INSTRUMENT_ODD_LOT_TICKER=28,e.ORDER_ANNOUNCEMENT_SERVICE=30,e}(),to=function(){function e(){}return e.getSeconds=function(e){return 1e3*e},e.getMinutes=function(t){return t*e.getSeconds(60)},e.getHours=function(t){return t*e.getMinutes(60)},e.getDays=function(t){return t*e.getHours(24)},e.padZeroTimestamp=function(e,t,i){return{timeHour:e<10?"0"+e:e,timeMinute:t<10?"0"+t:t,timeSeconds:i<10?"0"+i:i}},e}(),io=function(){function e(e,t){this.$rootScope=e,this.$interval=t,this.signal=new ci,this.timerPromiseMap=[]}return e.prototype.subscribe=function(t,i){var r=this;this.signal.add(t.request.mainListName,i);var n=this.timerPromiseMap[t.request.mainListName];n&&this.$interval.cancel(n),n=this.$interval(function(){r.publish(t)},e.INTERVAL_TIMER),this.timerPromiseMap[t.request.mainListName]=n,this.publish(t)},e.prototype.unsubscribe=function(e,t){if(this.signal.remove(e.request.mainListName,t),0===this.signal.getNumListeners(e.request.mainListName)){var i=this.timerPromiseMap[e.request.mainListName];i&&this.$interval.cancel(i)}},e.prototype.publish=function(e){this.signal.dispatch(e.request.mainListName,null)},e.$inject=["$rootScope","$interval"],e.INTERVAL_TIMER=to.getMinutes(3),e}();angular.module("binary",["multi-market","event-emitter"]).service("InstrumentInfoPublishSubscriber",Wr).service("InstrumentTickerPublishSubscriber",zr).service("IntradayChartPublishSubscriber",Qr).service("MarketSummaryPublishSubscriber",en).service("NewMarketSummaryPublishSubscriber",an).service("MarketTickerPublishSubscriber",cn).service("SnapshotPublishSubscriber",ln).service("VolumeByPriceDetailPublishSubscriber",pn).service("VolumeByPricePublishSubscriber",hn).service("ConnectionStatus",Kr).service("BinarySpliter",eo).service("DerivativesOrderPushPublishSubscriber",mn).service("EquityOrderPushPublishSubscriber",dn).service("HistoricalByDatePublishSubscriber",yn).service("OptionsStrikePriceListPublishSubscriber",gn).service("OrderPushStatusPublishSubscriber",Sn).service("NewsPublishSubscriber",Gn).service("HistoricalChartPublishSubscriber",En).service("MostActiveListTimerPublishSubscriber",io).service("InstrumentOddLotInfoPublishSubscriber",xn).service("InstrumentOddLotTickerPublishSubscriber",Kn).service("AnnouncementPublishSubscriber",Jn).service("AdminMessagePublishSubscriber",wn);var ro=function(){function e(e){this.binary=e}return e.prototype.decode=function(e){switch(e){case eo.NEW_EQUITY_ORDER_PUSH_SERVICE:return this.decodeNewMessage();case eo.EQUITY_ORDER_PUSH_SERVICE:return this.decodeOldMessage()}return null},e.prototype.decodeNewMessage=function(){var e=new za,t=this.binary.readByte();e.version=R(this.binary,t);var i=R(this.binary,t);e.orderNo=this.binary.readString(i);var r=R(this.binary,t);e.orderNoSeos=this.binary.readString(r);var n=R(this.binary,t);e.orderNoFis=this.binary.readString(n);var o=R(this.binary,t);e.accountNo=this.binary.readString(o);var s=R(this.binary,t);e.tradeDate=this.binary.readString(s),e.orderTimeHour=this.binary.readByte(),e.orderTimeMin=this.binary.readByte(),e.orderTimeSec=this.binary.readByte();var a=R(this.binary,t);e.symbol=this.binary.readString(a);var c=R(this.binary,t);e.nvdrFlag=this.binary.readString(c),e.price=L(this.binary,t,2);var l=this.binary.readByte();e.priceType=this.readPriceType(l),e.side=this.readSide(l),e.volume=$(this.binary,t),e.matchedPrice=L(this.binary,t,2),e.matchedVolume=$(this.binary,t),e.balanceVolume=$(this.binary,t),e.cancelledVolume=$(this.binary,t);var u=this.binary.readByte();e.canChangePriceVol=(8&u)>>3===1,e.isMatchedOrder=(4&u)>>2===1,e.canChange=(2&u)>>1===1,e.canCancel=1===(1&u);var d=R(this.binary,t);return e.status=this.binary.readString(d),e.sequenceNumber=0,e},e.prototype.decodeOldMessage=function(){var e=new za,t=this.binary.readByte();e.orderNo=this.binary.readInt().toString();var i=R(this.binary,t);e.accountNo=this.binary.readString(i);var r=R(this.binary,t);e.tradeDate=this.binary.readString(r),e.orderTimeHour=this.binary.readByte(),e.orderTimeMin=this.binary.readByte(),e.orderTimeSec=this.binary.readByte();var n=R(this.binary,t);e.symbol=this.binary.readString(n);var o=R(this.binary,t);e.nvdrFlag=this.binary.readString(o),e.price=L(this.binary,t,2);var s=this.binary.readByte();e.priceType=this.readPriceType(s),e.side=this.readSide(s),e.volume=$(this.binary,t),e.matchedVolume=$(this.binary,t),e.balanceVolume=$(this.binary,t),e.cancelledVolume=$(this.binary,t);var a=this.binary.readByte();e.canChangePriceVol=(8&a)>>3===1,e.isMatchedOrder=(4&a)>>2===1,e.canChange=(2&a)>>1===1,e.canCancel=1===(1&a);var c=R(this.binary,t);return e.status=this.binary.readString(c),e.orderNoSeos=this.binary.readInt().toString(),e.orderNoFis=this.binary.readInt().toString(),e.version=0,e.matchedPrice=void 0,e.sequenceNumber=0,e},e.prototype.readSide=function(e){return(240&e)>>4},e.prototype.readPriceType=function(e){return 15&e},e}(),no=function(){function e(){}return e}(),oo=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new no,t=this.binary.readByte();e.priceDigit=this.binary.readByte(),e.orderNo=k(this.binary,t);var i=R(this.binary,t);e.accountNo=this.binary.readString(i);var r=R(this.binary,t);e.enterID=this.binary.readString(r);var n=R(this.binary,t);e.date=this.binary.readString(n),e.time=this.binary.readString(8);var o=R(this.binary,t);e.seriesID=this.binary.readString(o),e.side=this.binary.readString(1),e.position=this.binary.readString(1),e.price=L(this.binary,t,e.priceDigit);var s=R(this.binary,t);e.priceType=this.binary.readString(s),e.volume=$(this.binary,t),e.balance=$(this.binary,t),e.matchedVolume=$(this.binary,t),e.cancelledVolume=$(this.binary,t);var a=R(this.binary,t);e.valid=this.binary.readString(a);var c=R(this.binary,t);e.until=this.binary.readString(c);var l=this.binary.readByte();e.isTradeReport=(128&l)>>7===1,e.isStopOrderNotActivate=(64&l)>>6===1,e.isAllTopic=(32&l)>>5===1,e.isMatchOrder=(16&l)>>4===1,e.delFlag=(8&l)>>3===1,e.canApprove=(4&l)>>2===1,e.canChange=(2&l)>>1===1,e.canCancel=1===(1&l),e.canChangePriceVol=this.binary.readBoolean();var u=R(this.binary,t);return e.status=this.binary.readString(u),e.version=k(this.binary,t),e},e}(),so=function(){function e(e){this.binary=e}return e.prototype.decodeMarket=function(){return this.decode(!1)},e.prototype.decodeInstrument=function(){return this.decode(!0)},e.prototype.decode=function(e){var t=new Vn,i=this.binary.readByte();t.instrumentType=this.binary.readByte(),t.summary=new Di,t.summary.readSubType(this.binary.readUnsignedByte()),t.summary.readTickerConfig(this.binary.readUnsignedByte()),t.priceDigit=_(this.binary,t.instrumentType);var r=R(this.binary,i);if(t.instrumentID=this.binary.readString(r),e){var n=this.binary.readByte(),o=this.binary.readByte(),s=this.binary.readByte();t.time=this.paddingZero(n)+":"+this.paddingZero(o)+":"+this.paddingZero(s)}t.price=$(this.binary,i),t.change=$(this.binary,i),e&&(t.pchange=$(this.binary,i)),t.sequenceID=this.binary.readInt(),t.volumes=[];for(var a=R(this.binary,i),c=0;c<a;c++)t.volumes.push(this.readVolume(i));return t},e.prototype.paddingZero=function(e){return e<10?"0"+e:""+e},e.prototype.readVolume=function(e){return 8===(8&e)?this.binary.readInt():this.binary.readShort()},e}(),ao=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new Xr,t=this.binary.readByte();if(e.dataFlag=this.binary.readByte(),e.hasEquityData()){e.equityData=new Jr,e.equityData.setIndex=N(this.binary,2),e.equityData.setHigh=N(this.binary,2),e.equityData.setLow=N(this.binary,2),e.equityData.setChange=L(this.binary,t,2),e.equityData.setHighChange=L(this.binary,t,2),e.equityData.setLowChange=L(this.binary,t,2),e.equityData.setTotalValue=N(this.binary,2),e.equityData.setTotalVolume=this.binary.readLong(),e.equityData.setGainers=$(this.binary,t),e.equityData.setLosers=$(this.binary,t),e.equityData.setUnchanged=$(this.binary,t);var i=R(this.binary,t);e.equityData.setStatus=this.binary.readString(i),e.equityData.set50Index=N(this.binary,2),e.equityData.set50High=N(this.binary,2),e.equityData.set50Low=N(this.binary,2),e.equityData.set50Change=L(this.binary,t,2),e.equityData.set50HighChange=L(this.binary,t,2),e.equityData.set50LowChange=L(this.binary,t,2),e.equityData.set50TotalValue=N(this.binary,2),e.equityData.set100Index=N(this.binary,2),e.equityData.set100High=N(this.binary,2),e.equityData.set100Low=N(this.binary,2),e.equityData.set100Change=L(this.binary,t,2),e.equityData.set100HighChange=L(this.binary,t,2),e.equityData.set100LowChange=L(this.binary,t,2),e.equityData.set100TotalValue=N(this.binary,2),e.equityData.setHDIndex=N(this.binary,2),e.equityData.setHDHigh=N(this.binary,2),e.equityData.setHDLow=N(this.binary,2),e.equityData.setHDChange=L(this.binary,t,2),e.equityData.setHDHighChange=L(this.binary,t,2),e.equityData.setHDLowChange=L(this.binary,t,2),e.equityData.setHDTotalValue=N(this.binary,2),e.equityData.maiIndex=N(this.binary,2),e.equityData.maiHigh=N(this.binary,2),e.equityData.maiLow=N(this.binary,2),e.equityData.maiChange=L(this.binary,t,2),e.equityData.maiHighChange=L(this.binary,t,2),e.equityData.maiLowChange=L(this.binary,t,2),e.equityData.maiTotalValue=N(this.binary,2),e.equityData.ftseIndex=N(this.binary,2),e.equityData.ftseHigh=N(this.binary,2),e.equityData.ftseLow=N(this.binary,2),e.equityData.ftseChange=L(this.binary,t,2),e.equityData.ftseHighChange=L(this.binary,t,2),e.equityData.ftseLowChange=L(this.binary,t,2),e.equityData.ftseTotalValue=N(this.binary,2)}if(e.hasDerivData()){e.derivData=new Zr,e.derivData.tfexTotalVolume=this.binary.readInt(),e.derivData.tfexTotalDeal=this.binary.readInt(),e.derivData.tfexTotalOI=this.binary.readInt(),e.derivData.futuresTotalVolume=this.binary.readInt(),e.derivData.futuresTotalDeal=this.binary.readInt(),e.derivData.futuresTotalOI=this.binary.readInt(),e.derivData.optionsTotalVolume=this.binary.readInt(),e.derivData.optionsTotalDeal=this.binary.readInt(),e.derivData.optionsTotalOI=this.binary.readInt(),e.derivData.dateAsOfDay=this.binary.readByte(),e.derivData.dateAsOfMonth=this.binary.readByte(),e.derivData.dateAsOfYear=this.binary.readShort();var r=R(this.binary,t);e.derivData.tfexStatus=this.binary.readString(r);var n=R(this.binary,t);e.derivData.tfexMetalStatus=this.binary.readString(n);var o=R(this.binary,t);e.derivData.tfexStockStatus=this.binary.readString(o);var s=R(this.binary,t);e.derivData.tfexInterestStatus=this.binary.readString(s);var a=R(this.binary,t);e.derivData.tfexEnergyStatus=this.binary.readString(a);var c=R(this.binary,t);e.derivData.tfexCurrencyStatus=this.binary.readString(c);var l=R(this.binary,t);e.derivData.tfexAgriculturalStatus=this.binary.readString(l)}return e},e}(),co=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e={},t=this.binary.readByte(),i=R(this.binary,t);e.instrumentID=this.binary.readString(i),e.instrumentType=this.binary.readByte(),e.instrumentType===ce.FUTURES||e.instrumentType===ce.OPTIONS?e.priceDigit=this.binary.readByte():e.priceDigit=2;var r=R(this.binary,t);e.status=this.binary.readString(r);var n=R(this.binary,t);return e.sector=this.binary.readString(n),e.prevClose=N(this.binary,e.priceDigit),e.buyVol=this.binary.readLong(),e.sellVol=this.binary.readLong(),e.noSideVol=this.binary.readLong(),e.buyVolIncNoSide=this.binary.readLong(),e.percentBuyVol=this.binary.readByte(),e.percentSellVol=this.binary.readByte(),e.percentNoSideVol=this.binary.readByte(),e.percentBuyVolIncNoSide=this.binary.readByte(),e.sectorBuyVol=this.binary.readLong(),e.sectorSellVol=this.binary.readLong(),e.sectorNoSideVol=this.binary.readLong(),e.sectorBuyVolIncNoSide=this.binary.readLong(),e.sectorPercentBuyVol=this.binary.readByte(),e.sectorPercentSellVol=this.binary.readByte(),e.sectorPercentNoSideVol=this.binary.readByte(),e.sectorPercentBuyVolIncNoSide=this.binary.readByte(),e.marketBuyVol=this.binary.readLong(),e.marketSellVol=this.binary.readLong(),e.marketNoSideVol=this.binary.readLong(),e.marketBuyVolIncNoSide=this.binary.readLong(),e.marketPercentBuyVol=this.binary.readByte(),e.marketPercentSellVol=this.binary.readByte(),e.marketPercentNoSideVol=this.binary.readByte(),e.marketPercentBuyVolIncNoSide=this.binary.readByte(),e.instrumentType===ce.EQUITY&&(e.averageBuy=N(this.binary,2),e.averageSell=N(this.binary,2),e.averageNoSide=N(this.binary,2),e.averageBuyIncNoSide=N(this.binary,2)),e.isCallOptions=this.binary.readBoolean(),e.instrumentType===ce.OPTIONS&&(e.buyVolOpposite=this.binary.readInt(),e.sellVolOpposite=this.binary.readInt(),e.noSideVolOpposite=this.binary.readInt(),e.buyVolOppositeIncNoSide=this.binary.readInt(),e.percentBuyVolOpposite=this.binary.readByte(),e.percentSellVolOpposite=this.binary.readByte(),e.percentNoSideVolOpposite=this.binary.readByte(),e.percentBuyVolOppositeincNoSide=this.binary.readByte(),e.sectorBuyVolOpposite=this.binary.readInt(),e.sectorSellVolOpposite=this.binary.readInt(),e.sectorNoSideVolOpposite=this.binary.readInt(),e.sectorBuyVolOppositeIncNoSide=this.binary.readInt(),e.sectorPercentBuyVolOpposite=this.binary.readByte(),e.sectorPercentSellVolOpposite=this.binary.readByte(),e.sectorPercentNoSideVolOpposite=this.binary.readByte(),e.sectorPercentBuyVolOppositeIncNoSide=this.binary.readByte()),e},e}(),lo=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e={instrumentID:"",instrumentType:0,priceDigit:0,lastDone:0,buyVol:0,sellVol:0,noSideVol:0,buyVolIncNoSide:0,percentBuyVol:0,percentSellVol:0,percentNoSideVol:0,percentBuyVolIncNoSide:0,prevClose:0,buySellDetails:[],isCallOptions:!1},t=this.binary.readByte(),i=R(this.binary,t);e.instrumentID=this.binary.readString(i),e.instrumentType=this.binary.readByte(),e.instrumentType===ce.FUTURES||e.instrumentType===ce.OPTIONS?e.priceDigit=this.binary.readByte():e.priceDigit=2,e.lastDone=L(this.binary,t,e.priceDigit),e.buyVol=k(this.binary,t),e.sellVol=k(this.binary,t),e.noSideVol=k(this.binary,t),e.buyVolIncNoSide=k(this.binary,t),e.percentBuyVol=this.binary.readByte(),e.percentSellVol=this.binary.readByte(),e.percentNoSideVol=this.binary.readByte(),e.percentBuyVolIncNoSide=this.binary.readByte(),e.prevClose=L(this.binary,t,e.priceDigit);for(var r=R(this.binary,t),n=[],o=0;o<r;o++){var s={price:0,buyVol:0,sellVol:0,noSideVol:0,buyVolIncNoSide:0,totalVol:0,percentTotalVol:0,buyDeal:0,sellDeal:0,noSideDeal:0,buyDealIncNoSide:0};s.price=L(this.binary,t,e.priceDigit),s.buyVol=k(this.binary,t),s.sellVol=k(this.binary,t),s.noSideVol=k(this.binary,t),s.buyVolIncNoSide=k(this.binary,t),s.totalVol=k(this.binary,t),s.percentTotalVol=this.binary.readShort()/Math.pow(10,2),s.buyDeal=$(this.binary,t),s.sellDeal=$(this.binary,t),s.noSideDeal=$(this.binary,t),s.buyDealIncNoSide=$(this.binary,t),n.push(s)}return e.buySellDetails=n,e.isCallOptions=this.binary.readBoolean(),e},e}(),uo=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new wl,t=this.binary.readByte(),i=R(this.binary,t);e.instrumentID=this.binary.readString(i),e.chartType=this.binary.readByte(),e.prevClose=L(this.binary,t,2),e.last=L(this.binary,t,2),e.high=L(this.binary,t,2),e.low=L(this.binary,t,2),e.minVolume=k(this.binary,t),e.maxVolume=k(this.binary,t),e.priceDigit=this.binary.readByte(),e.spread=L(this.binary,t,e.priceDigit),e.timeHour=this.binary.readByte(),e.timeMinute=this.binary.readByte(),e.timeSeconds=this.binary.readByte();var r=this.binary.readShort(),n=0,o=[],s=[];for(n;n<r;n++)if(e.chartType===pe.PRICE_VALUE){var a=new Tl;a.dataType=this.binary.readByte(),a.timeHour=this.binary.readByte(),a.timeMinute=this.binary.readByte(),a.value=L(this.binary,t,2),a.volume=k(this.binary,t),a.showLabel=this.binary.readBoolean(),a.isVLine=this.binary.readBoolean(),o.push(a)}else{var c=new Dl;c.dataType=this.binary.readByte(),c.timeHour=this.binary.readByte(),c.timeMinute=this.binary.readByte(),c.value=L(this.binary,t,2),c.showLabel=this.binary.readBoolean(),c.isVLine=this.binary.readBoolean(),s.push(c)}return e.priceValueChartDatas=o,e.otherValueChartDatas=s,e},e}(),ho=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=this.binary.readByte(),t={},i=R(this.binary,e);t.expireDate=this.binary.readString(i);var r=R(this.binary,e);t.fullDate=this.binary.readString(r),t.daysToExpire=$(this.binary,e);var n=this.binary.readShort();t.strikePriceDataList=[];for(var o=0;o<n;o++){var s={};s.strikePrice=N(this.binary,2);var a=R(this.binary,e);s.callSymbol=this.binary.readString(a);var c=R(this.binary,e);s.putSymbol=this.binary.readString(c),s.callInTheMoney=this.binary.readBoolean(),s.putInTheMoney=this.binary.readBoolean(),t.strikePriceDataList.push(s)}return t},e}(),po=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e={},t=this.binary.readByte(),i=R(this.binary,t);e.brokerId=this.binary.readString(i);var r=R(this.binary,t);e.service=this.binary.readString(r);var n=R(this.binary,t);return e.status=this.binary.readString(n),e},e}(),mo=function(){function e(){}return e}(),vo=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new Xn,t=this.binary.readByte();if(e.instrumentType=this.binary.readByte(),e.dataFlag=this.binary.readByte(),e.time=this.binary.readString(8),e.hasMarketStatus()){e.marketStatus=new zn,e.isDerivatives()&&(e.marketStatus.marketID=this.binary.readString(3));var i=R(this.binary,t);e.marketStatus.status=this.binary.readString(i)}if(e.hasBigLot()){e.bigLot=new Qn;var r=R(this.binary,t);e.bigLot.instrumentID=this.binary.readString(r),e.bigLot.volume=$(this.binary,t),e.bigLot.priceDigit=e.isDerivatives()?this.binary.readByte():2,e.bigLot.price=L(this.binary,t,2)}return e},e}(),fo=function(){function e(){}return e.diffTrendColor=function(t){return e.changeColor(t,null,null)},e.changeColor=function(e,t,i){return void 0===e||void 0===i?this.trendColor(se.NODATA):0===i||0===t?this.trendColor(se.NODATA):e>0?this.trendColor(se.UP):0===e?this.trendColor(se.UNCHANGE):e<0?this.trendColor(se.DOWN):void 0},e.trendIcon=function(e){switch(e){case se.UP:return le.UP;case se.UNCHANGE:return le.UNCHANGE;case se.DOWN:return le.DOWN;default:return le.NONE}},e.trendColor=function(e){switch(e){case se.UP:return ae.GAINER;case se.UNCHANGE:return ae.UNCHANGED;case se.DOWN:return ae.LOSER;default:return ae.WHITE}},e.priceColor=function(e,t,i){return 0===e?this.trendColor(se.NODATA):this.changeColor(e-t,t,i)},e.winRateColor=function(e){return this.changeColor(e-50,50,1)},e.changeWithNaNColor=function(e){return isNaN(e)?this.trendColor(se.NODATA):this.changeColor(e,1,1)},e.bidOfferColor=function(e,t,i,r){return void 0===e||void 0===t||isNaN(t)||void 0===i?this.trendColor(se.NODATA):r===oe.ATO||r===oe.ATC?this.trendColor(se.NODATA):this.priceColor(e,t,i)},e.sideColor=function(e){switch(e){case Be.BUY:return ae.BUY;case Be.SELL:return ae.SELL;default:return ae.NONE}},e.ceilFloorColor=function(e,t){return t&&0!==t?e===t?this.trendColor(se.UNCHANGE):e>t?this.trendColor(se.UP):e<t?this.trendColor(se.DOWN):void 0:this.trendColor(se.NODATA)},e.projectedPriceColor=function(e,t){return e&&0!==e&&t&&0!==t?e===t?this.trendColor(se.UNCHANGE):e>t?this.trendColor(se.UP):e<t?this.trendColor(se.DOWN):void 0:this.trendColor(se.NODATA)},e}(),yo=function(){function e(){}return e.prototype.trendIcon=function(e){return fo.trendIcon(e)},e.prototype.isShowUnchangeTrendIcon=function(e){return e===se.UNCHANGE},e.prototype.trendColor=function(e){return fo.trendColor(e)},e.prototype.changeColorWithoutTotalVolume=function(e,t){return this.priceColor(e,t,1)},e.prototype.changeColor=function(e,t,i){return fo.changeColor(e,t,i)},e.prototype.getChangeColor=function(e){return void 0===e?"":fo.changeColor(e.change,e.previousClose,e.totalVolume)},e.prototype.changeWithNaNColor=function(e){return fo.changeWithNaNColor(e)},e.prototype.bidOfferColor=function(e,t,i,r){return fo.bidOfferColor(e,t,i,r)},e.prototype.sideColor=function(e){return fo.sideColor(e)},e.prototype.ceilFloorColor=function(e,t){return fo.ceilFloorColor(e,t)},e.prototype.priceColor=function(e,t,i){return fo.priceColor(e,t,i)},e.prototype.projectedPriceColor=function(e,t){return fo.projectedPriceColor(e,t)},e}();angular.module("color-formatter",[]).service("ColorService",yo),V.$inject=["$timeout"],B.$inject=["$timeout"],x.$inject=["$timeout"],F.$inject=["$timeout"],angular.module("hilight-font-blink",[]).directive("highlightCell",V).directive("highlightCellString",B).directive("highlightCellWithFontBlink",x).directive("highlightCellWithFontBlinkWithIsMatch",F);var go=function(){function e(e,t){this.$analytics=e,this.userApplicationProfileService=t}return e.prototype.pageTrack=function(e){this.isEnablePiwik()&&this.activePage!==e&&(this.$analytics.pageTrack(e),this.activePage=e)},e.prototype.eventTrack=function(e,t){this.isEnablePiwik()&&this.$analytics.eventTrack(e,{category:"PC"+t})},e.prototype.eventTrackLabel=function(e,t,i){this.isEnablePiwik()&&this.$analytics.eventTrack(e,{category:"PC"+t,label:i})},e.prototype.isEnablePiwik=function(){return this.userApplicationProfileService.isEnableTrackPageAndEvent},e.$inject=["$analytics","UserApplicationProfileService"],e}();angular.module("piwik",["angulartics","angulartics.piwik"]).service("PiwikService",go).config(["$analyticsProvider",function(e){e.virtualPageviews(!1),e.firstPageview(!1),e.withAutoBase(!1)}]);var So=function(){function e(e){
this.userInfoService=e,this.ITP_EQUITY_ACCOUNT_INFO_URL="/realtime/getEquityAccountInformation.jsp",this.ITP_STREAMING_SEOS_URL="/daytradeflex/streamingSeos.jsp",this.ITP_WHATS_NEW_URL="/realtime/streaming6-web-api/getWhatsNew.jsp",this.ITP_CHANGE_ORDER_URL="/daytradeflex/ajaxChangeOrder.jsp",this.ITP_STREAMING_MULTI_ORDER_URL="/daytradeflex/streamingMultiOrder.jsp",this.ITP_EQUITY_ACCOUNT_INFO_DETAIL_URL="/daytradeflex/ajaxAccountInfo.jsp",this.ITP_MULTI_ORDER_FROM_FILE_POPUP="/daytradeflex/streamingMultiOrderFromFile.jsp",this.ITP_MULTI_ORDER_EXTRACT_UPLOAD_DATA="/daytradeflex/streamingMultiOrderExtractData.jsp",this.ITPD_STREAMING_URL="/Derivatives/streaming/streaming.jsp",this.ITPD_ORDER_URL="/Derivatives/streaming/order.jsp",this.ITPD_CHANGE_ORDER_URL="/Derivatives/streaming/ajaxChangeOrder.jsp",this.ITPD_MULTI_ORDER_URL="/Derivatives/streaming/multiOrder_mktrep.jsp",this.ITPD_DERIVATIVES_ACCOUNT_INFO_DETAIL_URL="/Derivatives/streaming/ajaxAccountInfo.jsp",this.ITPD_AJAX_BLOCK_TRADE_URL="/Derivatives/streaming/ajaxBlockTrade_mktrep.jsp",this.ITPD_AJAX_BLOCK_TRADE_INFO_URL="/Derivatives/streaming/ajaxBlockTradeInfo.jsp",this.ITPD_MULTI_ORDER_FROM_FILE_POPUP="/Derivatives/streaming/multiOrderFromFile.jsp",this.ITPD_MULTI_ORDER_EXTRACT_UPLOAD_DATA="/Derivatives/streaming/multiOrderExtractData.jsp",this.ITPD_GET_PAYOFF_PORTS_AND_ORDERS="/Derivatives/PayOffChart/getPortAndOrderForInv.jsp",this.ITPD_CALCULATE_PAYOFF="/Derivatives/PayOffChart/getPayOffChartForInv.jsp",this.ITPD_GET_PAYOFF_PORTS_AND_ORDERS_MKT="/Derivatives/PayOffChart/getPortAndOrderForMkt.jsp",this.ITPD_CALCULATE_PAYOFF_MKT="/Derivatives/PayOffChart/getPayOffChartForMkt.jsp",this.ITPD_MARGIN_INFO_URL="/Derivatives/C15_MarginContract.jsp",this.ITPD_MARGIN_SIM_URL="/Derivatives/C15_MarginSim.jsp?isPopup=true",this.ITPD_AJAX_LIST_ACCOUNT_MKTREP="/Derivatives/streaming/ajaxListAccount_mktrep.jsp",this.ITPD_OUTSTANDING_POSITION="/Responsive/index.jsp#/OnlineTrading/OutstandingPositionController?isOnlyContent=true",this.ITPD_POSITION_CLOSING="/Responsive/index.jsp#/OnlineTrading/PositionController?isOnlyContent=true",this.ITPD_MARGIN_SIMULATION="/Responsive/index.jsp#/OnlineTrading/MarginSim?isOnlyContent=true&accountNo=",this.ITPD_MARGIN_RATE="/Derivatives/C16_MarginContract.jsp?accountNo=",this.MM_DATA_PROVIDER_BINARY_URL="/realtime/streaming5/Streaming5DataProviderBinary.jsp",this.MM_DATA_PROVIDER_JSON_URL="/realtime/streaming5/Streaming5DataProviderJSON.jsp",this.MM_GET_ACCOUNT_NAME_URL="/realtime/streaming5/getAccountName.jsp",this.MM_STOCK_VALIDATION_URL="/realtime/streaming5/streamingStockValidation.jsp",this.MM_REGISTER_ORDER_STATUS_URL="/realtime/streaming5/Streaming5RegisterOrderStatus.jsp",this.MM_DATA_PROVIDER_URL="/realtime/streaming5/Streaming5DataProvider.jsp",this.MM_GET_STATIC_DATA_URL="/realtime/streaming4/getStaticData.jsp",this.MM_SETTING_URL="/realtime/streaming5/setting.jsp",this.MM_NEWS_URL="/realtime/streaming5/getNews.jsp",this.MM_OPTIONS_WIZARD_URL="/realtime/optionsWizard/OptionsWizardScreen.jsp",this.MM_OPTIONS_EXPIRE_DATE="/realtime/streaming5/Streaming5DataProviderJSON.jsp",this.MM_USERCHECK_URL="/realtime/streaming6/UserCheck.jsp",this.MM_INIT_DATA_URL="initData.jsp",this.MM_PAGE_FEEDBACK="pageFeedback.jsp",this.MM_APPLICATION_RATING="applicationRating.jsp",this.MM_SYNCTIME_URL="/realtime/streaming6/synctime.jsp",this.MM_SAVE_LAST_SELECTED_SYMBOL_LIST="saveLastSelectedSymbolList.jsp",this.MM_SAVE_BIDS_OFFERS_SYMBOL_LIST="saveBidsOffersSymbolList.jsp",this.MM_SAVE_LAST_SEEN_WHATSNEW_VERSION="saveLastSeenWhatsNewVersion.jsp",this.MM_MONGO_CLICK_PREDEFINED_VOLUME="saveClickPredefinedVolume.jsp",this.MM_MONGO_UPDATE_ALL_NOTIFICATION_SETTING="updateAllNotificationSettings.jsp",this.MM_MONGO_UPDATE_ORDER_ENTRY_SETTING="web-api/updateOrderEntrySettings.jsp",this.MM_MONGO_LAST_TIME_READ_NOTIFICATION_MESSAGE="updateLastTimeReadNotificationMessage.jsp",this.MM_GET_PULL_SENSE_NOTIFICATION="web-api/getPullSenseNotification.jsp",this.MM_GET_ERROR_MESSAGE_USER_NOT_ALLOW="web-api/getErrorMessageUserNotAllow.jsp",this.MM_MONGO_UPDATE_VERSION_SELECTION_FLAG="web-api/saveVersionSelectionFlag.jsp",this.MM_MONGO_UPDATE_DISPLAY_SETTING="web-api/updateDisplaySettings.jsp",this.MM_MONGO_UPDATE_KEYBOARD_SHORTCUT_SETTING="web-api/updateKeyboardShortcutSettings.jsp",this.MM_MONGO_UPDATE_ACCOUNT_SHORTCUT_SETTING="web-api/updateAccountShortcutSettings.jsp",this.MM_MONGO_UPDATE_TICKER_FILTER="web-api/updateTickerFilter.jsp",this.MM_MONGO_UPDATE_MULTI_ORDER_LIST="web-api/updateMultiOrderList.jsp",this.MM_MONGO_UPDATE_TFEX_PAGE_DATA="web-api/updateTfexWatchPageData.jsp",this.MM_MONGO_UPDATE_TFEX_GREEK_SUMMARY_PAGE_DATA="web-api/updateTfexGreekSummaryPageData.jsp",this.MM_STREAMING_LOGOUT="web-api/logout.jsp",this.MM_MONGO_SET_SENSE_ACTION_API="/realtime/mobile-notification/senseActionAPI.jsp",this.MM_MONGO_LOAD_SIMULATED_PAYOFF_LIST="web-api/loadSimulatedPayoffList.jsp",this.MM_MONGO_MARKETREP_LOAD_SIMULATED_PAYOFF_LIST="web-api/loadSimulatedPayoffListMktRep.jsp",this.MM_MONGO_SAVE_SIMULATED_PAYOFF_LIST="web-api/saveSimulatedPayoffList.jsp",this.MM_MONGO_SAVE_SIMULATED_PAYOFF_LIST_MKT_REP="web-api/saveSimulatedPayoffListMktRep.jsp",this.MM_MONGO_STREAMING_DISCLAIMER="web-api/getDisclaimer.jsp",this.MM_NOT_SUPPORT_STOCK_SCREENER_PAGE="notSupportStockScreener.jsp",this.MM_NEWS_FORWARD_URL="/realtime/streaming4/newsForward.jsp",this.STREAMING_SECOND_PAGE="redirectToSecondaryWindow.jsp",this.RESEARCH_RESEARCH_CONTENT="/realtime/streaming5/getStreamingResearchService.jsp",this.RESEARCH_NEWS_DETAIL_URL="/realtime/streaming5/getNewsDetail.jsp",this.RESEARCH_NEWS_DETAIL_BY_SRC_URL="/realtime/streaming5/getNewsDetailBySrc.jsp",this.RESEARCH_IQ_NEWS_URL="/Streaming6IQNews.jsp",this.RESEARCH_TNS_IQ_NEWS_URL="/Streaming5AllNews.jsp",this.SENSE_TRACK_URL="",this.SENSE_SCORE_URL="",this.SENSE_NOTI_PATH="",this.SENSE_ANALYTICS_PATH="",this.ITP_MARGINABLE_SECURITIES_URL="",this.ITP_CHECK_DISCLAIMER="/disclaimer/CheckDisclaimer.jsp",this.ITP_DISCLAIMER="/disclaimer/Disclaimer.jsp",this.ITP_DCA_INITIAL_DATA="/DCA/InitialData.jsp",this.ITP_DCA_BACK_TEST="/DCA/BackTest.jsp",this.ITP_DCA_USER_DETAIL="/DCA/UserDetail.jsp",this.ITP_DCA_PLACE_ORDER="/DCA/PlaceOrder.jsp",this.ITP_DCA_CANCEL_ORDER="/DCA/CancelOrder.jsp",this.ITP_DCA_COUNT_TRANSACTION="/DCA/CountTransaction.jsp",this.ITP_DCA_ORDER_DETAIL="/DCA/OrderDetail.jsp",this.ITP_DCA_MKT_INITIAL_DATA="/DCA/MktInitialData.jsp",this.ITP_DCA_MKT_PLACE_ORDER="/DCA/MktPlaceOrder.jsp",this.ITP_DCA_MKT_COUNT_TRANSACTION="/DCA/MktCountTransaction.jsp",this.ITP_DCA_MKT_VALIDATE_ACCOUNT="/DCA/MktValidateAccount.jsp",this.ITP_DCA_MKT_USER_DETAIL="/DCA/MktUserDetail.jsp",this.ITP_DCA_MKT_ORDER_DETAIL="/DCA/MktOrderDetail.jsp",this.ITP_DCA_MKT_CANCEL_ORDER="/DCA/MktCancelOrder.jsp",this.MM_COMPANY_FULL_NAME="/realtime/iphone/SymbolDetail.jsp",this.REDIRECT_PATH="/multimarket/redirect_page.jsp",this.ITP_DGW_CONDY_DISCLAIMER="/disclaimer/Disclaimer.jsp?service=conditionOrderDGW",this.ITP_DGW_PLACE_TRAILIN_ORDER="/ConditionOrderDGW/placeTrailingOrder.jsp",this.ITP_DGW_PLACE_STOP_ORDER="/ConditionOrderDGW/placeStopOrder.jsp",this.X_CALENDAR_URL="https://www.set.or.th/set/xcalendar.do",this.EQUITY_CHART_URL="/realtime/chart/DisplayEquityChart.jsp?symbol=SET%20INDEX&type=index"}return e.prototype.setApiUrlWithRole=function(){this.setStreamingSeosUrlWithRole(),this.setDerivativesOrderUrlWithRole(),this.setMarginableSecuritiesURL()},e.prototype.setStreamingSeosUrlWithRole=function(){this.userInfoService.isMarketRep()?(this.ITP_STREAMING_SEOS_URL="/daytradeflex/streamingSeos_mktrep.jsp",this.ITP_CHANGE_ORDER_URL="/daytradeflex/ajaxChangeOrder_mktrep.jsp",this.ITP_STREAMING_MULTI_ORDER_URL="/daytradeflex/streamingMultiOrder_mktrep.jsp"):(this.ITP_STREAMING_SEOS_URL="/daytradeflex/streamingSeos.jsp",this.ITP_CHANGE_ORDER_URL="/daytradeflex/ajaxChangeOrder.jsp",this.ITP_STREAMING_MULTI_ORDER_URL="/daytradeflex/streamingMultiOrder.jsp")},e.prototype.setDerivativesOrderUrlWithRole=function(){this.userInfoService.isMarketRep()?(this.ITPD_ORDER_URL="/Derivatives/streaming/mktreporder.jsp",this.ITPD_CHANGE_ORDER_URL="/Derivatives/streaming/ajaxChangeOrder_mktrep.jsp",this.ITPD_MULTI_ORDER_URL="/Derivatives/streaming/multiOrder_mktrep.jsp"):(this.ITPD_ORDER_URL="/Derivatives/streaming/order.jsp",this.ITPD_CHANGE_ORDER_URL="/Derivatives/streaming/ajaxChangeOrder.jsp",this.ITPD_MULTI_ORDER_URL="/Derivatives/streaming/multiOrder.jsp")},e.prototype.setSenseURL=function(e){this.SENSE_SCORE_URL=e.senseConfig.senseScorePath,this.SENSE_TRACK_URL=e.senseConfig.senseTrackPath,this.SENSE_NOTI_PATH=e.senseConfig.senseNotiPath},e.prototype.setSenseAnalyticsURL=function(e){this.SENSE_ANALYTICS_PATH=e.senseAnalyticsConfig.path},e.prototype.setMarginableSecuritiesURL=function(){this.userInfoService.isMarketRep()?this.ITP_MARGINABLE_SECURITIES_URL="/CreditBalance/streaming5MarginableSecuritiesMktRep.jsp":this.ITP_MARGINABLE_SECURITIES_URL="/CreditBalance/streaming5MarginableSecurities.jsp"},e.$inject=["UserInfoService"],e}(),bo=function(){function e(e,t){var i=this;this.$uibModalInstance=e,this.focus=t,this.focusFactory=t,this.$uibModalInstance.rendered.then(function(){i.setModalElement(),i.button=i.modal.find("button"),i.viewDidAppear(),i.initModal()}),this.$uibModalInstance.closed.then(function(){i.viewDidDisappear()})}return e.prototype.viewDidAppear=function(){},e.prototype.viewDidDisappear=function(){},e}(),Co=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.$uibModalInstance=t,r.focus=i,r.onKeyPressCallBack=r.onKeypress.bind(r),r}return ne(t,e),t.prototype.viewDidAppear=function(){angular.element(parent).on("keypress",this.onKeyPressCallBack)},t.prototype.viewDidDisappear=function(){angular.element(parent).off("keypress",this.onKeyPressCallBack)},t.prototype.initModal=function(){var e=this.modal.find("button");this.focusFactory.tabKey(e)},t.prototype.ok=function(){this.$uibModalInstance.close()},t.prototype.onKeypress=function(e){rr.matchEnterKeyKeypress(e)&&(this.ok(),e.preventDefault())},t}(bo),Eo=function(){function e(){}return e}(),Ao=function(e){function t(t,i,r){var n=e.call(this,t,r)||this;return n.$uibModalInstance=t,n.mutipleErrorList=i,n.focus=r,n.errorTopics=i,n}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".multiple-error-alert")},t.prototype.ok=function(){this.$uibModalInstance.close()},t.$inject=["$uibModalInstance","mutipleErrorList","focus"],t}(Co),wo=function(){function e(){}return e}(),To=function(){function e(){this.symbolList=[],this.symbolMap=new ut((!1))}return e.prototype.getList=function(){return this.symbolList},e.prototype.add=function(e){this.symbolList.push(e),this.symbolMap.add(e,!0)},e.prototype.remove=function(e){var t=this.symbolList.indexOf(e);t!==-1&&this.symbolList.splice(t,1),this.symbolMap["delete"](e)},e.prototype.clear=function(){this.symbolList=[],this.symbolMap=new ut((!1))},e.prototype.getSize=function(){return this.symbolList.length},e.prototype.getIsChecked=function(e){return this.symbolMap.value(e)},e.prototype.clone=function(){for(var t=new e,i=0;i<this.symbolList.length;i++)t.add(this.symbolList[i]);return t},e}(),Do=function(){function e(){this.authorizedSymbols=[],this.selectedSymbols=new To}return e}(),Io=function(){function e(e,t,i,r){this.$uibModalInstance=e,this.viewData=t,this.alertService=i,this.userInfoService=r,this.numberOfSelectedPolicy=this.getNumberOfCheckedSymbol(),this.isMarketRep=this.userInfoService.isMarketRep()}return e.prototype.changeChecked=function(e){this.validateChange(e.isChecked)?(e.isChecked?this.viewData.selectedSymbols.add(e.symbol):this.viewData.selectedSymbols.remove(e.symbol),this.numberOfSelectedPolicy=this.getNumberOfCheckedSymbol()):(e.isChecked=!1,this.alertService.showErrorAlert("You can not choose more than 5 symbols (order status and new symbol)."))},e.prototype.validateChange=function(e){return!e||!(this.getNumberOfCheckedSymbol()+1>this.viewData.maximumPolicies)},e.prototype.confirm=function(){this.$uibModalInstance.close(this.viewData)},e.prototype.cancel=function(){this.$uibModalInstance.dismiss()},e.prototype.getNumberOfCheckedSymbol=function(){return this.viewData.selectedSymbols.getSize()+this.viewData.numberOfActivateSymbols},e.$inject=["$uibModalInstance","viewData","AlertService","UserInfoService"],e}(),Po=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.$uibModalInstance=t,r.focus=i,r.onKeyDownCallBack=r.onKeyDown.bind(r),r.onKeyPressCallBack=r.onKeypress.bind(r),r.parentElement=".modal-footer",r.isEnablePreventEnterEvent=!1,r}return ne(t,e),t.prototype.viewDidAppear=function(){angular.element(parent).on("keydown",this.onKeyDownCallBack),angular.element(parent).on("keypress",this.onKeyPressCallBack)},t.prototype.viewDidDisappear=function(){angular.element(parent).off("keydown",this.onKeyDownCallBack),angular.element(parent).off("keypress",this.onKeyPressCallBack)},t.prototype.onKeyDown=function(e){var t;if("input"!==e.target.localName)if(e.keyCode===Ce){t=0;var i=this.button[t];i&&!i.disabled&&this.focusFactory.tabKey(this.button.eq(t))}else if(e.keyCode===Ee){t=1;var r=this.button[t];r&&!r.disabled&&this.focusFactory.tabKey(this.button.eq(t))}},t.prototype.onKeypress=function(e){rr.matchEnterKeyKeypress(e)&&this.isEnablePreventEnterEvent&&e.preventDefault()},t}(bo),Oo=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.$uibModalInstance=t,r.focus=i,r.nextElements=["pin-input input","button.confirm-button","button.cancel-button"],r}return ne(t,e),t.prototype.viewDidAppear=function(){e.prototype.viewDidAppear.call(this),this.initModal()},t.prototype.initModal=function(){var e,t=this;this.nextElements.some(function(i){return e=t.modal.find(i),t.focusFactory.tabKey(e)})},t.prototype.cancel=function(){this.$uibModalInstance.dismiss()},t}(Po),ko=function(e){function t(t,i,r){var n=e.call(this,t,i)||this;return n.$uibModalInstance=t,n.focus=i,n.confirmParam=r,n}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".dca-place-order-confirmation")},t.prototype.confirm=function(){this.$uibModalInstance.close()},t.prototype.getDisplaySymbol=function(e){return this.confirmParam.isNVDR?e+"-R":e},t.prototype.getDisplayAmount=function(e){return p(e)},t.prototype.getDateLabel=function(){return this.confirmParam.frequency===Dt.WEEKLY?"Day":"Date"},t.prototype.getTotalAmount=function(){var e=yt.toNumberOrZero(this.confirmParam.totalAmountPerOrder);return p(e*this.confirmParam.totalTransaction)},t.$inject=["$uibModalInstance","focus","confirmParam"],t}(Oo),$o=function(){function e(){}return e}(),Lo=function(){function e(){}return e.placeOrder="placeOrder",e.cancelOrder="cancelOrder",e}(),No=function(e){function t(t,i,r,n){var o=e.call(this,t,r)||this;switch(o.$uibModalInstance=t,o.items=i,o.focus=r,o.mode=n,n){case Lo.placeOrder:o.showHeader="Place DCA Order";break;case Lo.cancelOrder:o.showHeader="Cancel DCA Order"}return o}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".dca-place-order-result-alert")},t.prototype.ok=function(){this.$uibModalInstance.close()},t.$inject=["$uibModalInstance","items","focus","mode"],t}(Co),Mo=function(e){function t(t,i,r){var n=e.call(this,t,r)||this;return n.$uibModalInstance=t,n.orderDetail=i,n.focus=r,n.orderDetailView=Fv.parse(n.orderDetail),n}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".dca-order-detail-alert")},t.prototype.close=function(){this.$uibModalInstance.close()},t.$inject=["$uibModalInstance","orderDetail","focus"],t}(Co),Ro=function(){function e(e,t,i){this.$uibModal=e,this.$q=t,this.$document=i,this.alertQueue=[],this.isShowAlert=!1,this.modalLayerElement=this.$document.find("modal-layer").eq(0)}return e.prototype.showErrorAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/error-alert.html */1),controller:"ErrorAlertController as error",size:"sm",windowClass:"modal-mutiple-error",appendTo:this.modalLayerElement,resolve:{errorMsg:function(){return e}}})},e.prototype.showSuccessAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/success-alert.html */2),controller:"SuccessAlertController as success",size:"sm",windowClass:"modal-dialog-customize",appendTo:this.modalLayerElement,resolve:{successMsg:function(){return e}}})},e.prototype.showValidationErrorAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/validation-error-alert.html */3),controller:"ValidationErrorAlertController as error",windowClass:"modal-mutiple-error",appendTo:this.modalLayerElement,resolve:{errorMsgList:function(){return e}}})},e.prototype.showMutipleErrorTopicAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/mutiple-error-topic-alert.html */4),controller:"MutipleErrorTopicAlertController as error",windowClass:"modal-mutiple-error",appendTo:this.modalLayerElement,resolve:{mutipleErrorList:function(){return e}}})},e.prototype.showPlaceOrderWarningAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/place-order-warning-alert.html */5),controller:"PlaceOrderWarningAlertController as ctrl",windowClass:"modal-warning",appendTo:this.modalLayerElement,resolve:{warningMsgList:function(){return e.split("\n")}}})},e.prototype.showOfflineAlert=function(){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/offline-alert.html */6),controller:"OfflineAlertController as alertCtrl",windowClass:"modal-offline",appendTo:this.modalLayerElement})},e.prototype.showSuccessfulLogoutAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:"static",template:i(/*! ../../html/alert/successful-logout-alert.html */7),controller:"SuccessfulLogoutAlertController as alertCtrl",windowClass:"modal-logout",appendTo:this.modalLayerElement,resolve:{message:function(){return e}}})},e.prototype.showNotificationOrderPopupAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/notification-order-popup-alert.html */8),controller:"NotificationOrderPopupAlertController as alertCtrl",size:"sm",windowClass:"modal-noti-popup",appendTo:this.modalLayerElement,resolve:{order:function(){return e}}})},e.prototype.showNotificationPriceVolPopupAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/notification-price-volume-popup-alert.html */9),controller:"NotificationPriceVolumePopupAlertController as alertCtrl",size:"sm",windowClass:"modal-noti-popup",appendTo:this.modalLayerElement,resolve:{priceVolNotificationMessage:function(){return e}}})},e.prototype.showPlaceOrderConfirmAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/place-order-equity-confirmation.html */10),controller:"PlaceOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-place-order-confirm",appendTo:this.modalLayerElement,resolve:{orderData:function(){return e}}})},e.prototype.showPlaceOrderDerivConfirmAlert=function(e,t,r,n){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/place-order-derivatives-confirmation.html */11),controller:"PlaceOrderDerivConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-place-order-confirm",appendTo:this.modalLayerElement,resolve:{orderData:function(){return e},priceDigit:function(){return t},stopOrderPriceDigit:function(){return r},orderPosition:function(){return n}}})},e.prototype.showPlaceTradeReportOrderConfirmAlert=function(e,t){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/place-trade-report-order-confirmation.html */12),controller:"PlaceTradeReportOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-trade-report-place-order-confirm",appendTo:this.modalLayerElement,resolve:{orderData:function(){return e},orderPosition:function(){return t}}})},e.prototype.showSavePinDisclaimerAlert=function(){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/save-pin-disclaimer-alert.html */13),controller:"SavePinDisclaimerAlertController",controllerAs:"alertCtrl",windowClass:"modal-save-pin-disclaimer",appendTo:this.modalLayerElement,resolve:{}})},e.prototype.showMultiOrderDisclaimerAlert=function(){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-order-disclaimer-alert.html */14),controller:"MultiOrderDisclaimerAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-order-desclaimer",appendTo:this.modalLayerElement,resolve:{}})},e.prototype.showSenseDisclaimerAlert=function(){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/sense-disclaimer-alert.html */15),controller:"SenseDisclaimerAlertController",controllerAs:"alertCtrl",windowClass:"modal-sense-disclaimer",appendTo:this.modalLayerElement,resolve:{}})},e.prototype.showNotificationDisclaimerAlert=function(){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/notification-disclaimer-alert.html */16),controller:"NotificationDisclaimerAlertController",controllerAs:"alertCtrl",windowClass:"modal-noti-disclaimer",appendTo:this.modalLayerElement,resolve:{}})},e.prototype.showRememberLastOrderDisclaimerAlert=function(){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/remember-last-order-disclaimer-alert.html */17),controller:"RememberLastOrderDisclaimerAlertController",controllerAs:"alertCtrl",windowClass:"modal-remember-last-order-disclaimer",appendTo:this.modalLayerElement,resolve:{}})},e.prototype.showMultiPlaceOrderResultAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-order-result-alert.html */18),controller:"MultiPlaceOrderResultAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-order-result",appendTo:this.modalLayerElement,resolve:{orderResultData:function(){return e}}})},e.prototype.showMultiPlaceOrderProcessingAlert=function(){return this.$uibModal.open({animation:!1,backdrop:!1,templateUrl:"assets/pages/alert/multi-place-order-progress-alert.html",controller:"MultiPlaceOrderProgressAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-processing",appendTo:this.modalLayerElement,resolve:{}})},e.prototype.showMultiPlaceOrderConfirmAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-order-confirm-alert.html */19),controller:"MultiPlaceOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-order-confirm",appendTo:this.modalLayerElement,resolve:{ordersData:function(){return e}}})},e.prototype.showMultiPlaceOrderConfirmWarningAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-order-confirm-warning-alert.html */20),controller:"MultiPlaceOrderConfirmWarningtAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-order-confirm-warning",appendTo:this.modalLayerElement,resolve:{orderResultData:function(){return e}}})},e.prototype.showEquityMultiPlaceOrderUploadAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-order-upload-alert.html */21),controller:"MultiPlaceOrderUploadAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-order-upload",appendTo:this.modalLayerElement,resolve:{accountData:function(){return e}}})},e.prototype.showDerivativesMultiPlaceOrderUploadAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-order-upload-alert.html */21),controller:"MultiPlaceDerivativesOrderUploadAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-order-upload",appendTo:this.modalLayerElement,resolve:{accountData:function(){return e}}})},e.prototype.showMultiPlaceDerivativesOrderConfirmAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-derivatives-order-confirm-alert.html */22),controller:"MultiPlaceDerivativesOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-derivatives-order-confirm",appendTo:this.modalLayerElement,resolve:{ordersData:function(){return e}}})},e.prototype.showMultiPlaceDerivativesOrderResultAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-derivatives-order-result-alert.html */23),controller:"MultiPlaceDerivativesOrderResultAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-order-result",appendTo:this.modalLayerElement,resolve:{orderResultData:function(){return e}}})},e.prototype.showMultiPlaceDerivativesOrderConfirmWarningAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/multi-place-derivatives-order-confirm-warning-alert.html */24),controller:"MultiPlaceDerivativesConfirmWarningtAlertController",controllerAs:"alertCtrl",windowClass:"modal-multi-place-order-confirm-warning",appendTo:this.modalLayerElement,resolve:{ordersData:function(){return e}}})},e.prototype.showCancelOrderConfirmAlert=function(e,t,r){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/cancel-order-confirmation.html */25),controller:"CancelOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-cancel-order",appendTo:this.modalLayerElement,resolve:{equityOrderData:function(){return e},derivOrderData:function(){return t},isRequiredPin:function(){return r}}})},e.prototype.showChangeOrderConfirmAlert=function(e,t,r,n,o){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/change-order-confirmation.html */26),controller:"ChangeOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-change-order",appendTo:this.modalLayerElement,resolve:{orderData:function(){return{orderNo:e,newVolume:t,newPrice:r,currentPriceType:n}},isRequiredPin:function(){return o}}})},e.prototype.showWhatsNewAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/whats-new-alert.html */27),controller:"WhatsNewAlertController",controllerAs:"whatsNewAlertCtrl",windowClass:"modal-whats-new",appendTo:this.modalLayerElement,resolve:{whatsNewInfo:function(){return e}}})},e.prototype.showTickerFilterModal=function(e){return this.$uibModal.open({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/market-ticker-filter-modal.html */28),controller:"MarketTickerFilterAlertController",controllerAs:"filterCtrl",windowClass:"modal-market-ticker-filter-alert",appendTo:this.modalLayerElement,resolve:{currentSettings:function(){return e}}}).result},e.prototype.showDCASymbolSelectorAlert=function(e){return this.$uibModal.open({animation:!1,backdrop:!1,templateUrl:"assets/pages/alert/dca-symbol-selector.html",controller:"DCASymbolSelectorController",controllerAs:"alertCtrl",windowClass:"modal-dca-symbol-selector",appendTo:this.modalLayerElement,resolve:{viewData:function(){return e}}}).result},e.prototype.showDgwConditionalOrderConfirmAlert=function(){return this.$uibModal.open({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/dgw-conditional-order-confirmation.html */29),controller:"DgwConditionalOrderConfirmController",controllerAs:"ctrl",windowClass:"modal-dgw-conditional-order-confirm",appendTo:this.modalLayerElement}).result},e.prototype.showDCAPlaceOrderConfirmAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/dca-place-order-confirmation.html */30),controller:"DCAPlaceOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-dca-place-order-confirm",appendTo:this.modalLayerElement,resolve:{confirmParam:function(){return e}}})},e.prototype.showDCASubmittedTransactionResultAlert=function(e,t){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/dca-submitted-transaction-result.html */31),controller:"DCASubmittedTransactionResultController",controllerAs:"resultCtrl",windowClass:"modal-dca-submitted-transaction-result",appendTo:this.modalLayerElement,resolve:{items:function(){return e},mode:function(){return t}}})},e.prototype.showDCAOrderDetailAlert=function(e){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/dca-order-detail-alert.html */32),controller:"DCAOrderDetailAlertController",controllerAs:"alertCtrl",windowClass:"modal-dca-order-detaiil",appendTo:this.modalLayerElement,resolve:{orderDetail:function(){return e}}})},e.prototype.showDCACancelOrderConfirmAlert=function(e,t,r){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/dca-cancel-order-confirmation.html */33),controller:"DCACancelOrderConfirmAlertController",controllerAs:"alertCtrl",windowClass:"modal-dca-cancel-order",appendTo:this.modalLayerElement,resolve:{orderDataList:function(){return e},pin:function(){return t},isMarKetRep:function(){return r}}})},e.prototype.showNewsDetailAlert=function(e,t){return this.pushAlertToQueue({animation:!1,backdrop:!1,template:i(/*! ../../html/alert/news-detail-alert.html */34),controller:"NewsDetailAlertController",controllerAs:"alertCtrl",windowClass:"modal-news-detail",appendTo:this.modalLayerElement,resolve:{contentId:function(){return e},newsSource:function(){return t}}})},e.prototype.showAlertInQueue=function(){var e=this;if(!this.isShowAlert&&0!==this.alertQueue.length){var t=this.alertQueue.shift(),i=this.$uibModal.open(t.params);this.isShowAlert=!0,i.closed.then(function(){e.isShowAlert=!1,e.showAlertInQueue()}),i.result.then(function(e){t.officer.resolve(e)},function(e){t.officer.reject(e)})}},e.prototype.pushAlertToQueue=function(e){var t=this.$q.defer();return this.alertQueue.push({params:e,officer:t}),this.showAlertInQueue(),t.promise},e.$inject=["$uibModal","$q","$document"],e}(),_o=function(){function e(){this.researchType="DRN",this.APIVersion=me,this.service="S5ResearchContent"}return e}(),Vo=function(){function e(e,t,i,r,n,o){this.streamingAttribute=e,this.$http=t,this.$q=i,this.$httpParamSerializerJQLike=r,this.alertService=n,this.urlStore=o}return e.prototype.getResearchContent=function(){var e=this;return this.$http({method:"POST",url:""+this.streamingAttribute.researchHost+this.urlStore.RESEARCH_RESEARCH_CONTENT,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(new _o),withCredentials:!0}).then(function(e){return e.data},function(){return console.error("Connection Error!"),e.$q.reject()})},e.prototype.getNewsDetail=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.researchHost+this.urlStore.RESEARCH_NEWS_DETAIL_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){return e.data},function(){return console.error("Connection Error!"),t.$q.reject()})},e.prototype.getNewsDetailBySrc=function(e){var t=this;return this.$http({method:"POST",url:""+this.streamingAttribute.researchHost+this.urlStore.RESEARCH_NEWS_DETAIL_BY_SRC_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),withCredentials:!0}).then(function(e){return e.data},function(){return console.error("Connection Error!"),t.$q.reject()})},e.$inject=["StreamingAttribute","$http","$q","$httpParamSerializerJQLike","AlertService","URLStore"],e}(),Bo=function(){function e(){this.systemId="ITP"}return e}(),xo=function(){function e(e,t,i,r,n){this.$q=e,this.$http=t,this.$httpParamSerializerJQLike=i,this.streamingAttribute=r,this.urlStore=n,this.TOKEN_PREFIX="Bearer";
}return e.prototype.requestUpdateAccountScore=function(e){var t=this;return this.$http({method:"POST",url:this.streamingAttribute.senseHost+this.urlStore.SENSE_SCORE_URL,headers:{"Content-Type":"application/json",Authorization:this.TOKEN_PREFIX+" "+this.streamingAttribute.senseToken},data:{brokerId:this.streamingAttribute.brokerId,userref:this.streamingAttribute.userref,accountList:e.accountList},withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.requestUpdatePortScore=function(e){var t=this;return this.$http({method:"POST",url:this.streamingAttribute.senseHost+this.urlStore.SENSE_SCORE_URL,headers:{"Content-Type":"application/json",Authorization:this.TOKEN_PREFIX+" "+this.streamingAttribute.senseToken},data:{brokerId:this.streamingAttribute.brokerId,userref:this.streamingAttribute.userref,accountPortfolios:e},withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.requestUpdateCurrentSymbolScore=function(e){var t=this;return this.$http({method:"POST",url:this.streamingAttribute.senseHost+this.urlStore.SENSE_TRACK_URL,headers:{"Content-Type":"application/json",Authorization:this.TOKEN_PREFIX+" "+this.streamingAttribute.senseToken},data:{brokerId:this.streamingAttribute.brokerId,userref:this.streamingAttribute.userref,action:e.action},withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return t.$q.reject()})},e.prototype.requestNotificationGreeting=function(e,t){var i=this;return this.$http({method:"POST",url:this.streamingAttribute.senseHost+this.urlStore.SENSE_NOTI_PATH,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:this.TOKEN_PREFIX+" "+this.streamingAttribute.senseToken},data:{brokerId:this.streamingAttribute.brokerId,userref:this.streamingAttribute.userref,sense_type:"greeting",alertMsg:e,hashtag:["Greeting"],detail:t},withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){return i.$q.reject()})},e.$inject=["$q","$http","$httpParamSerializerJQLike","StreamingAttribute","URLStore"],e}(),Fo=function(){function e(){}return e.BY_CRITERIA="BY_CRITERIA",e.BY_MARKET="BY_MARKET",e}(),Uo=(function(){function e(){}return e}(),function(){function e(){}return e}()),qo=function(){function e(){}return e}(),jo=function(){function e(){}return e}(),Ho=function(){function e(e,t,i,r,n,o,s){this.streamingAttribute=e,this.$http=t,this.$q=i,this.$httpParamSerializerJQLike=r,this.alertService=n,this.urlStore=o,this.mmHost=s}return e.prototype.updatePredefinedClickVolume=function(e,t,i){var r=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_CLICK_PREDEFINED_VOLUME,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({market:i,volume:e,index:t}),withCredentials:!0}).then(function(e){var t={};return t},function(e){return r.alertService.showErrorAlert("Connection Error!"),r.$q.reject(e)})},e.prototype.updateAllNotificationSettings=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_ALL_NOTIFICATION_SETTING,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({data:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.updateLastTimeReadNotificationMessage=function(){var e=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_LAST_TIME_READ_NOTIFICATION_MESSAGE,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){var t={};return t},function(t){return e.alertService.showErrorAlert("Connection Error!"),e.$q.reject(t)})},e.prototype.updateOrderEntrySettings=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_ORDER_ENTRY_SETTING,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({data:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.updateDisplaySetting=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_DISPLAY_SETTING,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({data:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.updateAccountShortcut=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_ACCOUNT_SHORTCUT_SETTING,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({data:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(e){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.updateKeyboardShortcutSetting=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_KEYBOARD_SHORTCUT_SETTING,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({data:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.updateTickerFilter=function(e,t){var i=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_TICKER_FILTER,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({data:JSON.stringify(e),page:t}),withCredentials:!0}).then(function(e){var t={};return t},function(e){return i.alertService.showErrorAlert("Connection Error!"),i.$q.reject(e)})},e.prototype.updateMultiOrderSaveList=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_MULTI_ORDER_LIST,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({data:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.updateTfexWatchPageData=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_TFEX_PAGE_DATA,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({watchTab:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(i){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject(e)})},e.prototype.updateTfexGreekSummaryPageData=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_UPDATE_TFEX_GREEK_SUMMARY_PAGE_DATA,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({optionsSummaryTab:JSON.stringify(e)}),withCredentials:!0}).then(function(e){var t={};return t},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.loadSimulatedTfexPayoffList=function(){var e=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_LOAD_SIMULATED_PAYOFF_LIST,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){var t=e.data;return t},function(t){var i=new Rt("loadSimulatedTfexPayoffList: Connection Error!",t.status);return e.$q.reject(i)})},e.prototype.loadSimulatedTfexPayoffListMarketRep=function(e){var t=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_MARKETREP_LOAD_SIMULATED_PAYOFF_LIST,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({accountNo:e}),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){var i=new Rt("loadSimulatedTfexPayoffListMarketRep: Connection Error!",e.status);return t.$q.reject(i)})},e.prototype.saveSimulatedPayoffList=function(e,t,i,r,n){var o=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_SAVE_SIMULATED_PAYOFF_LIST,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({rowData:JSON.stringify(e),name:t,underlying:i,id:r,lastSavedTimestamp:n}),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){var t=new Rt("saveSimulatedPayoffList: Connection Error!",e.status);return o.$q.reject(t)})},e.prototype.saveSimulatedPayoffListMktRep=function(e,t,i,r,n,o){var s=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_SAVE_SIMULATED_PAYOFF_LIST_MKT_REP,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({accountNo:e,rowData:JSON.stringify(t),name:i,underlying:r,id:n,lastSavedTimestamp:o}),withCredentials:!0}).then(function(e){var t=e.data;return t},function(e){var t=new Rt("saveSimulatedPayoffList: Connection Error!",e.status);return s.$q.reject(t)})},e.prototype.getDisclaimer=function(){var e=this;return this.$http({method:"POST",url:""+this.mmHost+this.urlStore.MM_MONGO_STREAMING_DISCLAIMER,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(function(e){var t=e.data;return t},function(t){var i=new Rt("getDisclaimer: Connection Error!",t.status);return e.$q.reject(i)})},e.$inject=["StreamingAttribute","$http","$q","$httpParamSerializerJQLike","AlertService","URLStore","MM_HOST"],e}(),Wo=function(){function e(e,t,i,r,n){this.mmService=e,this.$q=t,this.alertService=i,this.urlStore=r,this.mmHost=n}return e.prototype.requestQuoteFundamental=function(e){var t=this;return this.mmService.requestQuoteFundamental(e).then(function(e){return e},function(){return t.alertService.showErrorAlert("Connection Error!"),t.$q.reject()})},e.$inject=["MMService","$q","AlertService","URLStore","MM_HOST"],e}(),Yo=function(){function e(e,t,r,n,o){this.$q=e,this.$http=t,this.streamingAttribute=r,this.urlStore=n,this.$interval=o,this.TOKEN_PREFIX="Bearer",this.$root=i(/*! ../../protobuf/compiled */35),this.currentUserstatAPIList=[]}return e.prototype.startProcess=function(){this.isEnableSenseAnalytics&&(this.intervalSenseAnalytic=1e3*this.intervalSenseAnalytic,this.startInterval())},e.prototype.startInterval=function(){var e=this;this.intervalPromise=this.$interval(function(){if(!e.isSendRequestWaitting&&0!==e.currentUserstatAPIList.length){var t=angular.copy(e.currentUserstatAPIList);e.currentUserstatAPIList=[];var i=e.createUserStat();i.apis=t;var r=e.$root.UserStat,n=r.encode(i).finish();e.isSendRequestWaitting=!0,e.sendRequest(n).then(null,function(){e.currentUserstatAPIList=t.concat(e.currentUserstatAPIList)})["finally"](function(){e.isSendRequestWaitting=!1})}},this.intervalSenseAnalytic)},e.prototype.appendToRequestQueue=function(e){this.currentUserstatAPIList.push(e)},e.prototype.createUserStat=function(){var e=new cs,t=this.$root.UserStat,i=t.create();return i.brokerId=this.streamingAttribute.brokerId,i.browserName=e.getBrowser().name,i.browserVersion=e.getBrowser().version,i.osName=e.getOS().name,i.osVersion=e.getOS().version,i.screenHeight=screen.availHeight.toString(),i.screenWidth=screen.availWidth.toString(),i.sessionId=this.streamingAttribute.sessionId,i.terminalType="PC",i.userAgent=navigator.userAgent,i.userref=parseInt(this.streamingAttribute.userref),i.apiVersion=1,i.appName="Streaming for PC",i},e.prototype.sendRequest=function(e){var t=this;return this.streamingAttribute.senseAnalyticsIsEnable?this.$http({method:"POST",url:this.streamingAttribute.senseAnalyticsHost+this.urlStore.SENSE_ANALYTICS_PATH,headers:{"Content-Type":"application/x-protobuf",Authorization:this.TOKEN_PREFIX+" "+this.streamingAttribute.senseAnalyticsToken},transformRequest:[],data:e}).then(function(e){var t=e.data;return t},function(e){var i=new Rt("Connection Error!",e.status);return t.$q.reject(i)}):this.$q.reject()},e.$inject=["$q","$http","StreamingAttribute","URLStore","$interval"],e}();angular.module("web-api",["multi-market","alert"]).service("URLStore",So).service("ITPService",jt).service("ITPDService",ai).service("MongoService",Ho).service("ResearchService",Vo).service("SenseAPIService",xo).service("SenseAnalyticsAPIService",Yo).service("DispatcherJSONService",Wo);var Go=function(){function e(e){this.name=e.name,this.message=e.message,this.stack=e.stack}return e}(),Ko=function(){function e(){this.errorLogList=[]}return e.prototype.addLog=function(t){this.errorLogList.length===e.MAX_ERROR_LOG&&this.errorLogList.shift(),this.errorLogList.push(t)},e.prototype.getErrorList=function(){return this.errorLogList},e.MAX_ERROR_LOG=5,e}(),zo=function(){function e(e,t,i){this.streamingAttribute=e,this.currentAccountChangeEvent=t,this.exceptionStore=i,this.onCurrentAccountChangeCallback=this.onCurrentAccountChange.bind(this),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallback)}return e.prototype.onCurrentAccountChange=function(e){this.currentAccount=e},e.prototype.getUserEnvironment=function(){var e=this.streamingAttribute.userref,t=this.streamingAttribute.itpRole,i=this.streamingAttribute.itpdRole,r=this.streamingAttribute.brokerId,n=this.currentAccount.accountNo,o=this.currentAccount.systemType,s=navigator.userAgent,a={width:window.outerWidth,height:window.outerHeight,availWidth:window.innerWidth,availHeight:window.innerHeight},c={width:window.screen.width,height:window.screen.height,availWidth:window.screen.availWidth,availHeight:window.screen.availHeight},l=window.location.href,u=this.streamingAttribute.activingMarketDataMMHost,d=this.exceptionStore.getErrorList();return{userref:e,itpRole:t,itpdRole:i,brokerId:r,accountNo:n,system:o,userAgent:s,browserSize:a,screenSize:c,tier:l,mmTier:u,logError:d}},e.$inject=["StreamingAttribute","CurrentAccountChangeEvent","ExceptionStore"],e}(),Qo=function(){function e(e,t){this.$window=e,this.streamingAttribute=t,this.isEnable=!1}return e.prototype.init=function(){var e=this.streamingAttribute.initDataAttr.googleAnalyticsConfiguration;if(this.isEnable=e.isEnable,this.isEnable){this.trackingId=e.trackingId,this.ga=this.$window.ga,this.ga("create",this.trackingId,"auto");var t=this.streamingAttribute.brokerId+"_"+this.streamingAttribute.userref;this.ga("set","userId",t)}},e.prototype.pageTrack=function(e,t){try{this.isEnable&&(this.ga("send",{hitType:"pageview",page:e,title:t}),this.ga("set",{dimension1:this.streamingAttribute.brokerId,dimension2:this.streamingAttribute.userref,dimension3:e,dimension4:(new Date).getTime(),dimension6:"-",dimension7:"-",dimension8:"-"}))}catch(i){console.warn("GA cannot send pageview"),console.warn(i)}},e.prototype.setProperties=function(e){try{this.isEnable&&this.ga("set",{dimension1:this.streamingAttribute.brokerId,dimension2:this.streamingAttribute.userref,dimension3:e.page,dimension4:(new Date).getTime(),dimension6:e.accountNo,dimension7:e.system,dimension8:e.frontType})}catch(t){console.warn("GA cannot send properties"),console.warn(t)}},e.prototype.eventTrack=function(e,t){try{this.isEnable&&this.ga("send","event",e,t)}catch(i){console.warn("GA cannot send event"),console.warn(i)}},e.$inject=["$window","StreamingAttribute"],e}(),Xo=function(){function e(){}return e.TODAY_RECOMMENDED_STOCK="today_recommended_stock",e.GREETING="greeting",e.STOCK_CALENDAR="stock_calendar",e.TURNOVER_LIST="turnover_list",e.SET_NEWS="set_news",e.BROKER_RESEARCH="broker_research",e.JITTA="jitta",e.LAST_TRADING_DATE_ALERT="last_trading_date_alert",e.STOCK_ALERT="stock_alert",e.TECHNICAL_ALERT="technical_alert",e.BROKER_STOCK_IMAGE="broker_stock_image",e.BROKER_STOCK_ANNOUNCEMENT="broker_stock_announcement",e.MONEY_CHANNEL="money_channel",e.IAA_CONSENSUS="iaa_consensus",e.MAJOR_SHARE_HOLDER="major_share_holder",e.TRENDING_WITH_RELATED_NEWS="trending",e.IPO_STOCK="ipo_stock",e}(),Jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.STANDARD_TEXT="text_std",t.STANDARD_IMAGE="image_std",t.STANDARD_TEXT_IMAGE="text_image_std",t}(Xo),Zo=function(){function e(){}return e.PAGE_QUOTE="page_quote",e.PAGE_BUYSELL="page_buysell",e.PAGE_STOCK_SCREENER="page_sss",e.SENSE_REDIRECT="sense_redirect",e.OPEN_LINK="link",e.NON_STD_PAGE_MARKET="page_market",e.NON_STD_NEWS_MODAL="news_modal",e.piorityList=[e.OPEN_LINK,e.SENSE_REDIRECT,e.PAGE_STOCK_SCREENER,e.PAGE_QUOTE,e.PAGE_BUYSELL],e.lookupPriority={link:0,sense_redirect:1,page_sss:2,page_quote:3,page_buysell:3},e}(),es=function(){function e(){}return e.ITP="itp",e.DERIV="deriv",e.MM="mm",e.none="none",e}(),ts=function(){function e(){}return e.TRUE="true",e.FALSE="false",e}(),is=function(){function e(){}return e.NO_SUB_TYPE="",e}(),rs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.MOST_ACTIVE_VOLUME="most_active_volume",t.MOST_ACTIVE_VALUE="most_active_volume",t.TOP_GAINER="top_gainer",t.TOP_LOSER="top_loser",t.TOP_SWING="top_swing",t.BIG_LOT="big_lot",t}(is),ns=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.BREAK_52_WEEKS_HIGH="break_52_weeks_high",t.BREAK_52_WEEKS_LOW="break_52_weeks_low",t.BREAK_5_DAYS_AVG_VOLUME="break_5_days_avg_volume",t}(is),function(){function e(){}return e.BREAK_52_WEEKS_HIGH="break_52_weeks_high",e.BREAK_52_WEEKS_LOW="break_52_weeks_low",e.BREAK_5_DAYS_AVG_VOLUME="break_5_days_avg_volume",e}(),function(){function e(){}return e}()),os=function(){function e(){this.symbol="",this.senseActions=[]}return e}(),ss=function(){function e(){}return e.NOTI_INBOX="NOTI_INBOX",e.OTHER="OTHER",e.NOTI_SETTING="NOTI_SETTING",e.MARKET="MARKET",e.TFEX_WATCH="TFEX-WATCH",e.TFEX_PAYOFF_CHART="TFEX-PAYOFF_CHART",e.TFEX_OPTIONS_SUMMARY="TFEX-OPTIONS_SUMMARY",e.EQUITY_PORTFOLIO="PORTFOLIO-PORTFOLIO",e.EQUITY_DEAL_SUMMARY="PORTFOLIO-DEAL_SUMMARY",e.DERIVATIVES_PORTFOLIO_COST="PORTFOLIO-COST",e.DERIVATIVES_PORTFOLIO_SETTLE="PORTFOLIO-SETTLE",e.DERIVATIVES_DEAL_SUMMARY="PORTFOLIO-DEAL",e.QUOTE_INTRADAY="QUOTE-INTRADAY",e.QUOTE_FUNDAMENTAL="QUOTE-FUNDAMENTAL",e.CLICK="CLICK",e.BIDS_OFFERS_THREE_BIDS="BIDS_OFFERS-3_BIDS",e.BIDS_OFFERS_FIVE_BIDS="BIDS_OFFERS-5_BIDS",e.TICKER_THREE_COLUMNS="TICKER-3_COLUMNS",e.TICKER_FOUR_COLUMNS="TICKER-4_COLUMNS",e.TECHNICAL="TECHNICAL",e.INFO_NEWS="INFO-NEWS",e.INFO_RESEARCH="INFO-RESEARCH",e.DCA_DISCLAIMER="DCA-DISCLAIMER",e.DCA_ERROR="DCA-ERROR",e.DCA_PLACE_ORDER="DCA-PLACE_ORDER",e.DCA_BACK_TESTING="DCA-BACK_TESTING",e.COND_ORDER_WEB="COND_ORDER_WEB",e.COND_ORDER_DGW="COND_ORDER_DGW",e.STOCK_SCREENER="STOCK_SCREENER",e.MAI_SNAPSHOT="MAI_SNAPSHOT",e.JITTA="FUNDAMENTAL_ANALYSIS",e.STARTER="STARTER",e.SENSE="SENSE",e.FEEDBACK="FEEDBACK",e.LOGOUT="LOGOUT",e.BROKER_CUSTOMIZED_MENU="BROKER_CUSTOMIZED_MENU",e.SETTINGS_DISPLAY="SETTINGS-DISPLAY",e.SETTINGS_SENSE_NOTI="SETTINGS-SENSE_NOTI",e.SETTINGS_ORDER_ENTRY="SETTINGS-ORDER_ENTRY",e.SETTINGS_KEYBOARD_SHORTCUT="SETTINGS-KEYBOARD_SHORTCUT",e.SETTINGS_TERMS_CONDITIONS="SETTINGS-TERMS_CONDITIONS",e.SETTINGS_OTHER_INFORMATION="SETTINGS-OTHER_INFORMATION",e.SETTINGS_ABOUT="SETTINGS-ABOUT",e.IALGO="IALGO",e.BLS="BLS",e.TRADE_CODE="TRADE_CODE",e.ASL_ONNET="ASL_ONNET",e.ASL_B_News="ASL_B-News",e.ASL_B_Chart="ASL_B-Chart",e}(),as=(function(){function e(e,t){this.analyticsScreenName=e,this.tags=t}return e.MARKET=new e(ss.MARKET,null),e.TFEX_WATCH=new e(ss.TFEX_WATCH,null),e.TFEX_PAYOFF_CHART=new e(ss.TFEX_PAYOFF_CHART,null),e.TFEX_OPTIONS_SUMMARY=new e(ss.TFEX_OPTIONS_SUMMARY,null),e.EQUITY_PORTFOLIO=new e(ss.EQUITY_PORTFOLIO,null),e.EQUITY_DEAL_SUMMARY=new e(ss.EQUITY_DEAL_SUMMARY,null),e.DERIVATIVES_PORTFOLIO_COST=new e(ss.DERIVATIVES_PORTFOLIO_COST,null),e.DERIVATIVES_PORTFOLIO_SETTLE=new e(ss.DERIVATIVES_PORTFOLIO_SETTLE,null),e.DERIVATIVES_DEAL_SUMMARY=new e(ss.DERIVATIVES_DEAL_SUMMARY,null),e.QUOTE_INTRADAY=new e(ss.QUOTE_INTRADAY,null),e.QUOTE_FUNDAMENTAL=new e(ss.QUOTE_FUNDAMENTAL,null),e.CLICK=new e(ss.CLICK,null),e.BIDS_OFFERS_THREE_BIDS=new e(ss.BIDS_OFFERS_THREE_BIDS,null),e.BIDS_OFFERS_FIVE_BIDS=new e(ss.BIDS_OFFERS_FIVE_BIDS,null),e.TICKER_THREE_COLUMNS=new e(ss.TICKER_THREE_COLUMNS,null),e.TICKER_FOUR_COLUMNS=new e(ss.TICKER_FOUR_COLUMNS,null),e.TECHNICAL=new e(ss.TECHNICAL,null),e.INFO_NEWS=new e(ss.INFO_NEWS,null),e.INFO_RESEARCH=new e(ss.INFO_RESEARCH,null),e.DCA_DISCLAIMER=new e(ss.DCA_DISCLAIMER,null),e.DCA_ERROR=new e(ss.DCA_ERROR,null),e.DCA_PLACE_ORDER=new e(ss.DCA_PLACE_ORDER,null),e.DCA_BACK_TESTING=new e(ss.DCA_BACK_TESTING,null),e.COND_ORDER_WEB=new e(ss.COND_ORDER_WEB,null),e.COND_ORDER_DGW=new e(ss.COND_ORDER_DGW,null),e.STOCK_SCREENER=new e(ss.STOCK_SCREENER,null),e.MAI_SNAPSHOT=new e(ss.MAI_SNAPSHOT,null),e.JITTA=new e(ss.JITTA,null),e.STARTER=new e(ss.STARTER,null),e.SENSE=new e(ss.SENSE,["sense"]),e.FEEDBACK=new e(ss.FEEDBACK,null),e.LOGOUT=new e(ss.LOGOUT,null),e.BROKER_CUSTOMIZED_MENU=new e(ss.BROKER_CUSTOMIZED_MENU,null),e.SETTINGS_DISPLAY=new e(ss.SETTINGS_DISPLAY,null),e.SETTINGS_SENSE_NOTI=new e(ss.SETTINGS_SENSE_NOTI,null),e.SETTINGS_ORDER_ENTRY=new e(ss.SETTINGS_ORDER_ENTRY,null),e.SETTINGS_KEYBOARD_SHORTCUT=new e(ss.SETTINGS_KEYBOARD_SHORTCUT,null),e.SETTINGS_TERMS_CONDITIONS=new e(ss.SETTINGS_TERMS_CONDITIONS,null),e.SETTINGS_OTHER_INFORMATION=new e(ss.SETTINGS_OTHER_INFORMATION,null),e.SETTINGS_ABOUT=new e(ss.SETTINGS_ABOUT,null),e.IALGO=new e(ss.IALGO,null),e.BLS=new e(ss.BLS,null),e.TRADE_CODE=new e(ss.TRADE_CODE,null),e.ASL_ONNET=new e(ss.ASL_ONNET,null),e.ASL_B_News=new e(ss.ASL_B_News,null),e.ASL_B_Chart=new e(ss.ASL_B_Chart,null),e.TFEX=new e(null,null),e.PORTFOLIO=new e(null,null),e.QUOTE=new e(null,null),e.INFO=new e(null,null),e.TICKER=new e(null,null),e.BIDS_OFFERS=new e(null,null),e}(),function(){function e(){}return e.SENSE_LIKE="SENSE_LIKE",e.SENSE_UNLIKE="SENSE_UNLIKE",e.SENSE_HIDE_FROM_SCREEN="SENSE_HIDE_FROM_SCREEN",e.SENSE_NOT_A_FAN="SENSE_NOT_A_FAN",e.SENSE_READ="SENSE_READ",e.SENSE_ACTION="SENSE_ACTION",e.SENSE_ENABLE="SENSE_ENABLE",e.SENSE_DISABLE="SENSE_DISABLE",e.CHANGE_SYMBOL="CHANGE_SYMBOL",e}()),cs=window.UAParser,ls=function(){function e(e,t,r){this.userInfoService=e,this.streamingAttribute=t,this.senseAnalyticsAPIService=r,this.$root=i(/*! ../../protobuf/compiled */35),this.ProtobufTrack=this.$root.Track,this.ProtobufAPI=this.$root.API,this.ProtobufScreen=this.$root.Screen}return e.prototype.createProtobufAPI=function(){var e=this.ProtobufAPI.create();return e.createTime=Date.now(),e},e.prototype.createProtobufTrack=function(){var e=this.ProtobufTrack.create();return e},e.prototype.createProtobufScreen=function(){var e=this.ProtobufScreen.create();return e},e.prototype.appendTrackObjectToRequestQueue=function(e){var t=this.createProtobufAPI();t.track=e,this.senseAnalyticsAPIService.appendToRequestQueue(t)},e.prototype.appendScreenObjectToRequestQueue=function(e){var t=this.createProtobufAPI();t.screen=e,this.senseAnalyticsAPIService.appendToRequestQueue(t)},e.prototype.trackSenseLike=function(e){var t=this.createNotificationTrackObject(as.SENSE_LIKE,e);this.appendTrackObjectToRequestQueue(t)},e.prototype.trackSenseUnlike=function(e){var t=this.createNotificationTrackObject(as.SENSE_UNLIKE,e);this.appendTrackObjectToRequestQueue(t)},e.prototype.trackSenseHideFromScreen=function(e){var t=this.createNotificationTrackObject(as.SENSE_HIDE_FROM_SCREEN,e);this.appendTrackObjectToRequestQueue(t)},e.prototype.trackSenseNotAFan=function(e){var t=this.createNotificationTrackObject(as.SENSE_NOT_A_FAN,e);this.appendTrackObjectToRequestQueue(t)},e.prototype.trackPerformSenseAction=function(e,t){var i=this.createSenseActionNotificationTrackObject(as.SENSE_ACTION,e,t);this.appendTrackObjectToRequestQueue(i)},e.prototype.trackSenseAction=function(e,t,i){var r=this.createSenseActionTrackObject(e,t,i);this.appendTrackObjectToRequestQueue(r)},e.prototype.trackSenseRead=function(e,t){var i=this;e.forEach(function(e){var r=i.createReadTrackObject(as.SENSE_READ,e,t);i.appendTrackObjectToRequestQueue(r)})},e.prototype.trackSenseChangeScreen=function(e,t,i){var r=this.createProtobufScreen();r.screenName=""+e,r.tags=t,r.properties=i,this.appendScreenObjectToRequestQueue(r)},e.prototype.trackSenseEnable=function(){this.trackSenseEnableDisable(!0)},e.prototype.trackSenseDisable=function(){this.trackSenseEnableDisable(!1)},e.prototype.trackChangeSymbol=function(e){var t=this.createProtobufTrack();t.atScreen="",t.tags=[],t.eventName=as.CHANGE_SYMBOL,t.properties={symbol:e.toUpperCase()},this.appendTrackObjectToRequestQueue(t)},e.prototype.trackSenseEnableDisable=function(e){var t=this.createProtobufTrack();t.atScreen=ss.NOTI_SETTING,t.tags=["sense"],t.eventName=e?as.SENSE_ENABLE:as.SENSE_DISABLE,this.appendTrackObjectToRequestQueue(t)},e.prototype.createNotificationTrackObject=function(e,t){var i=this.createProtobufTrack();return i.atScreen=ss.NOTI_INBOX,i.eventName=e,i.tags=["sense"],i.properties=this.createPropertiesOfNotificationTrack(t),i},e.prototype.createSenseActionNotificationTrackObject=function(e,t,i){var r=this.createProtobufTrack();r.atScreen=ss.NOTI_INBOX,r.eventName=e,r.tags=["sense"];var n=this.createPropertiesOfNotificationTrack(t);switch(t.originalDisplayType){case Jo.STANDARD_TEXT:case Jo.STANDARD_TEXT_IMAGE:case Jo.STANDARD_IMAGE:n.displayText=i.displayText,n.actionType=i.actionType,n.screenerId=i.screenerId,n.linkUrl=i.linkUrl,n.sourceId=i.redirectSourceId,n.contentId=i.redirectContentId;break;default:n.displayText=i.displayText}return r.properties=n,r},e.prototype.createSenseActionTrackObject=function(e,t,i){var r=this.createProtobufTrack();return r.atScreen=t,r.eventName=e,r.tags=["sense"],r.properties=i,r},e.prototype.createPropertiesOfNotificationTrack=function(e){var t={id:e.id,senseType:e.originalSenseType||"",senseSubType:e.originalSenseSubType||"",symbol:e.detail.symbol||"",alert:e.alert,time:e.time.format("YYYYMMDDHHmmss")};return t},e.prototype.createReadTrackObject=function(e,t,i){var r=this.createNotificationTrackObject(e,t);return r.properties.readTime=""+i,r},e.$inject=["UserInfoService","StreamingAttribute","SenseAnalyticsAPIService"],e}(),us=function(){function e(e,t,i){this.senseAnalyticsService=e,this.gaService=t,this.userInfoService=i,this.screenTrackerMap={},this.currentScreenName=ss.MARKET,this.currentTags=[],this.currentProperties=null}return e.prototype.subscribe=function(e,t){var i=this.getCallbackList(e);i.push(t),this.screenTrackerMap[e]=i},e.prototype.unsubscribe=function(e,t){this.screenTrackerMap[e]=this.screenTrackerMap[e].filter(function(e){return e!==t})},e.prototype.getCallbackList=function(e){var t=this.screenTrackerMap[e];return void 0===t&&(t=[]),t},e.prototype.getComponentState=function(e){var t=this.getCallbackList(e),i=[];return t.forEach(function(e){if(e){var t=e();void 0!==t&&i.push(e())}}),i},e.prototype.checkDuplicateScreen=function(e,t,i){return e===this.lastScreenName&&JSON.stringify(this.lastTags)===JSON.stringify(t)&&JSON.stringify(i)===JSON.stringify(this.lastProperties)},e.prototype.sendAnalyticsScreenChange=function(e,t,i){this.checkDuplicateScreen(e,t,i)||(this.userInfoService.isMarketRep()||(this.gaService.pageTrack(e,e),i&&this.gaService.setProperties(i),this.senseAnalyticsService.trackSenseChangeScreen(e,t,i)),this.lastScreenName=e,this.lastTags=t,this.lastProperties=i)},e.prototype.changeToScreen=function(e,t,i){this.currentScreenName=e,this.currentTags=t,this.currentProperties=i,this.sendAnalyticsScreenChange(e,t,i)},e.prototype.onOpenModal=function(e,t,i){this.sendAnalyticsScreenChange(e,t,i)},e.prototype.onCloseModal=function(){this.trackReturnToLatestScreen()},e.prototype.changeComponent=function(){this.changeToScreen(""+this.currentScreenName,[],null)},e.prototype.trackReturnToLatestScreen=function(){this.sendAnalyticsScreenChange(""+this.currentScreenName,this.currentTags,this.currentProperties)},e.$inject=["SenseAnalyticsService","GAService","UserInfoService"],e}(),ds=function(){function e(e,t,i,r,n,o){this.$uibModalInstance=e,this.$uibModal=t,this.mmService=i,this.userEnvironmentService=r,this.$document=n,this.screenTrackerService=o,this.score=[0,0,0,0],this.success=!1,this.txtComment="",this.limitComment=500,this.modalLayerElement=this.$document.find("modal-layer").eq(0)}return e.prototype.$onInit=function(){this.screenTrackerService.onOpenModal(ss.FEEDBACK,[],null)},e.prototype.setScore=function(e,t){this.score[e-1]=t},e.prototype.getStarClass=function(e,t){return this.score[e-1]>=t?"fa-star":"fa-star-o"},e.prototype.close=function(){this.$uibModalInstance.close(),this.screenTrackerService.onCloseModal()},e.prototype.sendRating=function(){var e=new Hi;e.topic="overall",e.rating=this.score[0];var t=new Hi;t.topic="menu",t.rating=this.score[1];var i=new Hi;i.topic="easy",i.rating=this.score[2];var r=new Hi;r.topic="clarity",r.rating=this.score[3];var n=this.userEnvironmentService.getUserEnvironment(),o=new Wi;return o.ratings=[e,t,i,r],o.suggestion=this.txtComment,o.userEnv=n,this.mmService.requestApplicationRating(o),this.$uibModalInstance.close(),this.$uibModal.open({animation:!1,backdrop:!1,templateUrl:"assets/pages/feedback/page-rating-success.html",controller:"PageRatingSuccessController",controllerAs:"ratingSuccessCtrl",windowClass:"page-rating-success",appendTo:this.modalLayerElement,resolve:{}}).result},e.prototype.isDisableSendRatingButton=function(){return 0===this.score[0]&&0===this.score[1]&&0===this.score[2]&&0===this.score[3]},e.prototype.isSuccess=function(){return this.success},e.prototype.getRemainingCommentLength=function(){return this.limitComment-this.txtComment.length},e.$inject=["$uibModalInstance","$uibModal","MMService","UserEnvironmentService","$document","ScreenTrackerService"],e}(),hs=function(){function e(e,t,i){this.$uibModalInstance=e,this.timeService=t,this.screenTrackerService=i,this.currentDateTimestamp=this.getDateTimestamp()}return e.prototype.ok=function(){this.$uibModalInstance.close(),this.screenTrackerService.onCloseModal()},e.prototype.getDateTimestamp=function(){var e=this.timeService.getTime();if(!e.isTimeSync)return"";var t=e.syncDate;return"เมื่อ "+t.format("DD/MM/YYYY HH:mm:ss")},e.$inject=["$uibModalInstance","TimeService","ScreenTrackerService"],e}(),ps=function(){function e(e,t){this.mmService=e,this.timeService=t,this.txtComment="",this.limitComment=500,this.selectedLevel=-1}return e.prototype.selectLevel=function(e){this.selectedLevel=e},e.prototype.isThisLevelActive=function(e){return this.selectedLevel===e},e.prototype.isSendFeedBackButtonEnable=function(){return this.selectedLevel!==-1},e.prototype.sendFeedback=function(){var e=new Lr;e.page=this.pagename,e.rating=this.selectedLevel,e.suggestion=this.txtComment,this.currentDateTimestamp=this.getDateTimestamp(),this.mmService.requestPageFeedback(e),this.isFeedbackSend=!0},e.prototype.getRemainingCommentLength=function(){return this.limitComment-this.txtComment.length},e.prototype.getDateTimestamp=function(){var e=this.timeService.getTime(),t=e.syncDate;return t.format("DD/MM/YYYY HH:mm:ss")},e.$inject=["MMService","TimeService"],e}(),ms=function(){function e(e,t){this.$uibModal=e,this.$document=t,this.modalLayerElement=this.$document.find("modal-layer").eq(0)}return e.prototype.open=function(){return this.$uibModal.open({animation:!1,backdrop:!1,templateUrl:"assets/pages/feedback/page-rating.html",controller:"PageRatingController",controllerAs:"ratingCtrl",windowClass:"page-rating",appendTo:this.modalLayerElement,resolve:{}}).result},e.$inject=["$uibModal","$document"],e}(),vs=function(){function e(e,t,i){this.$interval=e,this.initDataEvent=t,this.menuService=i,this.onInitDataCompleteCallback=this.onInitDataComplete.bind(this)}return e.prototype.$onInit=function(){this.initDataEvent.subscribe(this.onInitDataCompleteCallback)},e.prototype.$onDestroy=function(){this.initDataEvent.unsubscribe(this.onInitDataCompleteCallback)},e.prototype.onInitDataComplete=function(){this.showBubble()},e.prototype.openRatingPage=function(){this.hideBubble(),
this.menuService.openRatingPage()},e.prototype.showBubble=function(){var e=this,t=5e3;this.isShowBubble=!0,this.intervalServicePromise=this.$interval(function(){e.hideBubble()},t,1,!1)},e.prototype.hideBubble=function(){this.isShowBubble=!1,this.$interval.cancel(this.intervalServicePromise)},e.$inject=["$interval","InitDataEvent","MenuService"],e}();angular.module("feedback",["multi-market"]).component("feedback",{template:i(/*! ../../html/feedback/feedback.html */54),controller:vs}).component("pageFeedback",{bindings:{pagename:"@"},template:i(/*! ../../html/feedback/page-feedback.html */55),controller:ps}).service("PageRating",ms).controller("PageRatingController",ds).controller("PageRatingSuccessController",hs);var fs=function(){function e(){this.componentStructure={},this.currentPage="NONE"}return e.prototype.subscribe=function(e,t){this.currentPage===e&&t.startService(),this.componentStructure[e]||(this.componentStructure[e]=[]),this.componentStructure[e].push(t)},e.prototype.unsubscribe=function(e,t){if(this.componentStructure[e]){var i=-1;this.componentStructure[e].some(function(e,r){return e===t&&(i=r,!0)}),i!==-1&&this.componentStructure[e].splice(i,1)}},e.prototype.switchToPage=function(e){this.stopServicePage(this.currentPage),this.startServicePage(e),this.currentPage=e},e.prototype.stopServicePage=function(e){void 0!==e&&this.componentStructure[e]&&this.componentStructure[e].forEach(function(e){e.stopService()})},e.prototype.startServicePage=function(e){void 0!==e&&this.componentStructure[e]&&this.componentStructure[e].forEach(function(e){e.startService()})},e}(),ys=function(){function e(e){this.pageService=e}return e.prototype.$onInit=function(){this.pageService.subscribe(this.page,this),this.viewDidLoad()},e.prototype.$onDestroy=function(){this.pageService.unsubscribe(this.page,this),this.stopService()},e}(),gs=function(){function e(){}return e.prototype.$onInit=function(){this.startService()},e.prototype.$onDestroy=function(){this.stopService()},e}(),Ss=function(){function e(){}return e.prototype.$onInit=function(){this.startService()},e.prototype.$onDestroy=function(){this.stopService()},e}(),bs=function(){function e(){this.timeZoneString="Asia/Bangkok|ICT|-70|0|",this.timeZoneName="Asia/Bangkok"}return e}(),Cs=function(){function e(){}return e}(),Es=function(){function e(e,t,i,r){this.mmService=e,this.$q=t,this.$interval=i,this.connectionStatusChangeEvent=r,this.MAX_SYNC_ROUND_LIMIT=5,this.MAX_SECOND_FORCE_SYNC=300,this.THRESHOLD_MILLISEC_FORCE_SYNC=11e3,this.ONE_SECOND_TO_MILLISEC=1e3,this.onPushConnectedCallBack=this.onPushConnected.bind(this),this.EMPTY_LAST_UPDATE="",this.requestResponseData=[],this.diffTime=0,this.calculatedTimeOffsetArray=[],moment.tz.add("Asia/Bangkok|ICT|-70|0|"),this.connectionStatusChangeEvent.subscribePushSuccess(this.onPushConnectedCallBack)}return e.prototype.startSyncTime=function(){var e=this;this.$q.defer();this.requestResponseData=[],this.calculatedTimeOffsetArray=[];for(var t=[],i=0;i<this.MAX_SYNC_ROUND_LIMIT;i++){var r=this.sendSyncTime().then(function(){return e.$q.resolve()});t.push(r)}this.$q.all(t)["finally"](function(){e.diffTime=e.calculateTimeDiff(),e.startValidateDiffTime()})},e.prototype.calculateEachOffset=function(e){return(e.serverReceiveTimeArray-e.clientSendTimeArray+(e.serverSendTimeArray-e.clientReceiveTimeArray))/2},e.prototype.calculateTimeDiff=function(){var e=this,t=[];if(0===this.requestResponseData.length)return this.diffTime;t=this.requestResponseData.reduce(function(t,i){return t.concat(e.calculateEachOffset(i))},[]),this.calculatedTimeOffsetArray=t.sort();var i=this.getSE(this.calculatedTimeOffsetArray),r=Math.min(i[0],i[1],i[2]),n=0;return n=r===i[0]?this.findMean(this.calculatedTimeOffsetArray):r===i[2]?this.findMean(this.calculatedTimeOffsetArray.slice(0,this.calculatedTimeOffsetArray.length-1)):this.findMean(this.calculatedTimeOffsetArray.slice(1)),void 0===n?this.diffTime:n},e.prototype.getSE=function(e){var t=e.slice(0,this.calculatedTimeOffsetArray.length-1),i=e.slice(1),r=this.findSE(e),n=this.findSE(t),o=this.findSE(i);return[r,n,o]},e.prototype.findSE=function(e){if(0===e.length||1===e.length)return 1/0;for(var t=this.findMean(e),i=0,r=0;r<e.length;r++)i+=Math.pow(t-e[r],2);var n=Math.sqrt(i/(e.length-1))/Math.sqrt(e.length);return n},e.prototype.findMean=function(e){if(0!==e.length){for(var t=0,i=0;i<e.length;i++)t+=e[i];return t/e.length}},e.prototype.sendSyncTime=function(){var e=this,t=(new Date).getTime();return this.mmService.requestSyncTime().then(function(i){var r=i.split(hi.LV1);if("T"===r[0]){var n=new Cs;n.clientSendTimeArray=t,n.clientReceiveTimeArray=(new Date).getTime(),n.serverReceiveTimeArray=parseInt(r[1],10),n.serverSendTimeArray=parseInt(r[2],10),e.requestResponseData.push(n)}return e.$q.resolve()},function(){return e.$q.resolve()})["finally"](function(){})},e.prototype.getTime=function(){if(this.diffTime){var e=new bs;return e.isTimeSync=!0,e.syncDate=moment.tz(new Date(this.getSyncTimeStamp()),"Asia/Bangkok"),e}var t=new bs;return t.isTimeSync=!1,t},e.prototype.startValidateDiffTime=function(){var e=this;this.stopValidateDiffTime(),this.startValidateSyncTimeStamp=this.getSyncTimeStamp(),this.interValDiffTimeCheckPromise=this.$interval(function(){e.validateSyncTimeWithLocalTime()},1e3),this.counterNotSyncRound=0},e.prototype.validateSyncTimeWithLocalTime=function(){var e=this.getSyncTimeStamp();return Math.abs(e-this.startValidateSyncTimeStamp)>this.THRESHOLD_MILLISEC_FORCE_SYNC||this.counterNotSyncRound>=this.MAX_SECOND_FORCE_SYNC?(this.stopValidateDiffTime(),void this.startSyncTime()):(this.startValidateSyncTimeStamp=this.startValidateSyncTimeStamp+this.ONE_SECOND_TO_MILLISEC,void(this.counterNotSyncRound+=1))},e.prototype.stopValidateDiffTime=function(){this.interValDiffTimeCheckPromise&&this.$interval.cancel(this.interValDiffTimeCheckPromise)},e.prototype.getSyncTimeStamp=function(){return Date.now()+this.diffTime},e.prototype.onPushConnected=function(){this.startSyncTime()},e.$inject=["MMService","$q","$interval","ConnectionStatusChangeEvent"],e}(),As=function(){function e(e,t){this.$interval=e,this.timeService=t,this.updateTimeCallBack=this.updateTime.bind(this),this.initClock()}return e.prototype.initClock=function(){this.$interval(this.updateTimeCallBack,1e3)},e.prototype.updateTime=function(){var e=this.timeService.getTime();e.isTimeSync&&(this.date=this.getDate(e.syncDate),this.time=this.getTime(e.syncDate))},e.prototype.getTime=function(e){return e.format("HH:mm:ss")},e.prototype.getDate=function(e){return e.format("ddd MMM D YYYY")},e.prototype.formatMinOrSec=function(e){return e<10?"0"+e:e.toString()},e.$inject=["$interval","TimeService"],e}(),ws=function(){function e(e,t,i,r,n){this.connectionStatus=e,this.piwikService=t,this.connectionStatusChangeEvent=i,this.$timeout=r,this.mmConnectionState=n,this.SHOW_CONNECTED_TOOLTIP_TIMEOUT_MILLISECOND=3e3,this.onPushSuccessCallback=this.onPushSuccess.bind(this),this.onPushConnectingCallback=this.onPushConnecting.bind(this),this.onPushOfflineCallback=this.onPushOffline.bind(this),this.connectionStatusChangeEvent.subscribePushSuccess(this.onPushSuccessCallback),this.connectionStatusChangeEvent.subscribePushConnecting(this.onPushConnectingCallback),this.connectionStatusChangeEvent.subscribeOffline(this.onPushOfflineCallback)}return Object.defineProperty(e.prototype,"state",{get:function(){return this.connectionStatus.getState()},enumerable:!0,configurable:!0}),e.prototype.getState=function(){switch(this.state){case Kr.PUSH:return"push";case Kr.CONNECTING:return"connecting"}return"undefined"},e.prototype.reconnect=function(){this.state===Kr.PUSH&&this.mmConnectionState.reconnect()},e.prototype.onPushSuccess=function(){var e=this;this.isShowConnectingTooltip=!1,this.isShowConnectedTooltip=!0,this.$timeout(function(){e.isShowConnectedTooltip=!1},this.SHOW_CONNECTED_TOOLTIP_TIMEOUT_MILLISECOND)},e.prototype.onPushConnecting=function(){this.isShowConnectedTooltip=!1,this.isShowConnectingTooltip=!0},e.prototype.onPushOffline=function(){this.isShowConnectedTooltip=!1,this.isShowConnectingTooltip=!1},e.prototype.onClickPushStatus=function(){this.reconnect(),this.sendAnalytics()},e.prototype.sendAnalytics=function(){this.piwikService.eventTrack(nt.CLICK_PUSH,rt.MARKET_SUMMARY)},e.$inject=["ConnectionStatus","PiwikService","ConnectionStatusChangeEvent","$timeout","MMConnectionState"],e}(),Ts=function(){function e(e,t,i,r,n,o,s,a,c,l){var u=this;this.initDataEvent=e,this.marketSummaryStore=t,this.$scope=i,this.$interval=r,this.snapshotPublishSubscriber=n,this.newMarketSummaryPublishSubscriber=o,this.colorService=s,this.userInfoService=a,this.$window=c,this.urlStore=l,this.onReceiveSnapshotCallBack=this.onReceiveSnapshot.bind(this),this.onReceiveMarketSummaryCallBack=this.onReceiveMarketSummary.bind(this),this.initialIndexListCallBack=this.initialIndexList.bind(this),this.marketSummary=new ph,this.snapshotPublishSubscriber.subscribe([".SET"],this.onReceiveSnapshotCallBack),this.newMarketSummaryPublishSubscriber.subscribe(this.onReceiveMarketSummaryCallBack),this.initDataEvent.subscribe(this.initialIndexListCallBack),this.tfexSummaryShowHide=!1,r(function(){u.tfexSummaryShowHide=!u.tfexSummaryShowHide,u.changeMaketStatusTfexShow()},5e3),this.tfexMktStatusShowIndex=0}return e.prototype.changeMaketStatusTfexShow=function(){if(this.marketSummary.marketStatusDerivatives&&0!==this.marketSummary.marketStatusDerivatives.length){if(this.tfexMktStatusShowIndex+1<this.marketSummary.marketStatusDerivatives.length)return void this.tfexMktStatusShowIndex++;this.tfexMktStatusShowIndex=0}},e.prototype.onReceiveSnapshot=function(e){".SET"===e.instrumentID&&(this.marketSummary=yh.updateSETPercentChange(e,this.marketSummary))},e.prototype.onReceiveMarketSummary=function(e){this.marketSummary=yh.parseNewMarketSummaryToMarketSummaryView(e,this.marketSummary)},e.prototype.isEnableDerivativesMarketStatus=function(){return!this.userInfoService.isEquityOnly},e.prototype.isEnableEquityMarketStatus=function(){return!this.userInfoService.isDerivativesOnly},e.prototype.$onDestroy=function(){this.snapshotPublishSubscriber.unsubscribe([".SET"],this.onReceiveSnapshotCallBack),this.initDataEvent.unsubscribe(this.initialIndexListCallBack)},e.prototype.showEquityChart=function(){this.$window.open(""+this.urlStore.EQUITY_CHART_URL,"_blank","scrollbars=yes,resizable=yes,height=180,width=280")},e.prototype.initialIndexList=function(){this.indexDropDown=this.marketSummaryStore.getIndexDropdownData(),this.selectedIndex=this.indexDropDown[0]},e.$inject=["InitDataEvent","MarketSummaryStore","$scope","$interval","SnapshotPublishSubscriber","NewMarketSummaryPublishSubscriber","ColorService","UserInfoService","$window","URLStore"],e}(),Ds=function(){function e(){}return e.prototype.setIndexDropdownData=function(e){this.indexList=e},e.prototype.getIndexDropdownData=function(){var e=[];return this.indexList.forEach(function(t){var i={};i.key=t,e.push(i)}),e},e}();angular.module("market-summary",["binary","number-formatter","hilight-font-blink","color-formatter","feedback"]).component("marketSummary",{template:i(/*! ../../html/market-summary/market-summary.html */56),controller:Ts}).component("time",{template:i(/*! ../../html/market-summary/time.html */57),controller:As}).component("pushStatus",{template:i(/*! ../../html/market-summary/push-status.html */58),controller:ws}).service("MarketSummaryStore",Ds),U.$inject=["$rootScope"];var Is,Ps=function(){function e(){}return e}(),Os=function(){function e(e,t,i,r,n,o){this.streamingAttribute=e,this.urlStore=t,this.$http=i,this.$q=r,this.$interval=n,this.$httpParamSerializerJQLike=o,this.SESSION_VALIDATE_INTERVAL_TIME=18e4,this.checkUserPrimaryCallback=this.checkUserPrimary.bind(this),this.checkUserSecondaryCallback=this.checkUserSecondary.bind(this)}return e.prototype.clearAllRegisteration=function(){this.disconnectPrimaryCallback=void 0,this.disconnectSecondaryCallback=void 0,this.connectPrimaryCallback=void 0},e.prototype.registerCheckUserPrimary=function(e){this.disconnectPrimaryCallback=e},e.prototype.startCheckUserPrimary=function(){this.primaryTimer=this.$interval(this.checkUserPrimaryCallback,this.SESSION_VALIDATE_INTERVAL_TIME)},e.prototype.stopCheckUserPrimary=function(){void 0!==this.primaryTimer&&this.$interval.cancel(this.primaryTimer),this.disconnectPrimaryCallback=void 0},e.prototype.checkUserPrimary=function(){this.checkUser(this.createParamsForPrimaryHost())},e.prototype.registerCheckUserSecondary=function(e,t){this.disconnectSecondaryCallback=e,this.connectPrimaryCallback=t},e.prototype.startCheckUserSecondary=function(){this.secondaryTimer=this.$interval(this.checkUserSecondaryCallback,this.SESSION_VALIDATE_INTERVAL_TIME)},e.prototype.stopCheckUserSecondary=function(){void 0!==this.secondaryTimer&&this.$interval.cancel(this.secondaryTimer),this.connectPrimaryCallback=void 0,this.disconnectSecondaryCallback=void 0},e.prototype.checkUserSecondary=function(){this.checkUser(this.createParamsForPrimaryHost()),this.checkUser(this.createParamsForSecondaryHost())},e.prototype.requestCheckUser=function(e){return this.$http({method:"POST",url:""+e+this.urlStore.MM_USERCHECK_URL,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({clientType:Dr.getClientType(),APIVersion:me,time:(new Date).getTime()}),withCredentials:!0})},e.prototype.checkUser=function(e){var t=this;this.requestCheckUser(e.mmHost).then(function(i){var r=i.data.trim().toUpperCase(),n=r.split(hi.LV1);0===n.length||""===n[0]?t.shouldUpdateConnectionState(e.disconnectCallback,et.CONNECTION_FAIL):"F"===n[0]?t.shouldUpdateConnectionState(e.disconnectCallback,et.NO_SESSION):"F"===n[1]?t.shouldUpdateConnectionState(e.disconnectCallback,et.CONNECTION_FAIL):t.shouldUpdateConnectionState(e.connectCallback)},function(){t.shouldUpdateConnectionState(e.disconnectCallback,et.CONNECTION_FAIL)})},e.prototype.shouldUpdateConnectionState=function(e,t){e&&(t?e(t):e())},e.prototype.createParamsForPrimaryHost=function(){var e=new Ps;return e.mmHost=this.streamingAttribute.primaryMMHost,e.connectCallback=this.connectPrimaryCallback,e.disconnectCallback=this.disconnectPrimaryCallback,e},e.prototype.createParamsForSecondaryHost=function(){var e=new Ps;return e.mmHost=this.streamingAttribute.secondaryMMHost,e.connectCallback=void 0,e.disconnectCallback=this.disconnectSecondaryCallback,e},e.$inject=["StreamingAttribute","URLStore","$http","$q","$interval","$httpParamSerializerJQLike"],e}(),ks=function(){function e(){}return e.PROMISE_PENDING=0,e.PROMISE_RESOLVED=1,e.PROMISE_REJECTED=2,e}(),$s=function(){function e(e,t,i,r,n,o,s,a){var c=this;this.streamingAttribute=e,this.$rootScope=t,this.ws=i,this.protocol=r,this.binarySpliter=n,this.$q=o,this.$http=s,this.$httpParamSerializerJQLike=a,this.isPushConnected=!1,this.messageQueue=[],this.$rootScope.$on("writeSubscribeMessageToDispatcher",function(e,t){return c.onReceiveSubscribeMessage(t)}),this.socketFailCallBacks=[]}return e.prototype.startPrimaryPush=function(){return this.startPushEngine(this.streamingAttribute.primaryMMHost)},e.prototype.startSecondaryPush=function(){return this.startPushEngine(this.streamingAttribute.secondaryMMHost)},e.prototype.startPushEngine=function(e){var t=this;return this.isPushConnected=!1,this.clarConnectingOfficer(),this.newConnectingOfficer(),this.$http({method:"POST",url:e+"/realtime/streaming5/streamingGenKey.jsp",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike({clientType:Dr.getClientType(),txtSETNET3:"F",time:Date.now(),isForTestWebMobile:"true"}),withCredentials:!0}).then(function(e){var i=e.data,r=i.split("|");if("T"!==r[0])return t.connectingOfficer.reject("Cannot get key"),t.$q.reject();var n=[r[2],r[1]],o=n[0],s=n[1];return{addr:o,key:s}},function(e){return t.connectingOfficer.reject("Cannot get key"),t.$q.reject()}).then(function(e){t.connect(e.addr,e.key)},function(){}),this.connectingOfficer.promise},e.prototype.stopPushEngine=function(){this.isPushConnected=!1,this.ws.close()},e.prototype.connect=function(e,t){this.ws.onOpen(this.onOpen.bind(this)),this.ws.onReceiveMessage(this.onReceiveMessage.bind(this)),this.ws.onClose(this.onClose.bind(this)),this.ws.connect(this.protocol+"://"+e+"/websocket/dispatch",{userref:this.streamingAttribute.userref,brokerId:this.streamingAttribute.brokerId,opentime:Date.now(),clientType:Dr.getClientType(),password:t,version:me})},e.prototype.close=function(){this.ws.close()},e.prototype.onOpen=function(){this.isPushConnected=!0,this.flushMessageInQueue(),this.connectingOfficer.resolve()},e.prototype.onReceiveSubscribeMessage=function(e){return this.isPushConnected?void this.ws.send(e):void this.messageQueue.push(e)},e.prototype.onClose=function(){!this.isPushConnected&&this.connectingOfficer&&this.getOfficerStatus(this.connectingOfficer)===ks.PROMISE_PENDING&&this.connectingOfficer.reject(),this.isPushConnected=!1,this.flushSocketFailCallBack()},e.prototype.flushMessageInQueue=function(){for(;this.messageQueue.length>0;)this.ws.send(this.messageQueue.shift())},e.prototype.onReceiveMessage=function(e){this.binarySpliter.split(new un(e.data))},e.prototype.clarConnectingOfficer=function(){this.connectingOfficer=void 0},e.prototype.newConnectingOfficer=function(){this.connectingOfficer=this.$q.defer()},e.prototype.getOfficerStatus=function(e){return 0===e.promise.$$state.status?ks.PROMISE_PENDING:1===e.promise.$$state.status?ks.PROMISE_RESOLVED:2===e.promise.$$state.status?ks.PROMISE_REJECTED:void 0},e.prototype.registerSocketFail=function(e){this.socketFailCallBacks.push(e)},e.prototype.flushSocketFailCallBack=function(){this.socketFailCallBacks.forEach(function(e){e&&e()})},e.prototype.clearSocketFailCallBack=function(){this.socketFailCallBacks=[]},e.$inject=["StreamingAttribute","$rootScope","websocket","WS_PROTOCOL","BinarySpliter","$q","$http","$httpParamSerializerJQLike"],e}();!function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"}(Is||(Is={}));var Ls=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d){this.$q=e,this.$http=t,this.$httpParamSerializerJQLike=i,this.pushEngine=r,this.streamingAttribute=n,this.connectionStatus=o,this.$rootScope=s,this.mmPullEngine=a,this.$timeout=c,this.userCheckService=l,this.alerService=u,this.$window=d,this.pushStatus=Is.NOT_CONNECTED,this.numberOfRetry=0}return e.prototype.reconnect=function(){var e=this;this.pushEngine.clearSocketFailCallBack(),this.userCheckService.clearAllRegisteration(),this.pushEngine.stopPushEngine(),this.connectionStatus.setConnecting(),this.$timeout(function(){e.setState(Gr.INITIAL_PRIMARY_PUSH)},3e3)},e.prototype.initialPrimaryPush=function(){var e=this;this.pushEngine.stopPushEngine(),this.connectionStatus.setConnecting(),this.pushEngine.startPrimaryPush().then(function(){e.setState(Gr.PRIMARY_PUSH)},function(){e.setState(Gr.SECONDARY_BUFFER)})},e.prototype.onPrimaryPush=function(){var e=this;this.streamingAttribute.activePrimaryMM(),this.connectionStatus.setPush(),this.numberOfRetry=0,this.pushEngine.registerSocketFail(function(){e.connectionStatus.setPushLost(),e.setState(Gr.SECONDARY_BUFFER)}),this.userCheckService.registerCheckUserPrimary(function(t){return t===et.CONNECTION_FAIL?void e.setState(Gr.SECONDARY_BUFFER):t===et.NO_SESSION?void e.setState(Gr.OFFLINE):void 0}),this.userCheckService.startCheckUserPrimary()},e.prototype.startSecondaryBuffer=function(){var e=this,t=this.getRandomTime();this.connectionStatus.setConnecting(),this.$timeout(function(){e.setState(Gr.INITIAL_SECONDARY_PUSH)},t)},e.prototype.initialSecondaryPush=function(){var e=this;this.connectionStatus.setConnecting(),this.pushEngine.startSecondaryPush().then(function(){e.setState(Gr.SECONDARY_PUSH)},function(){e.setState(Gr.RETRY)})},e.prototype.onSecondaryPush=function(){var e=this;this.streamingAttribute.activeSecondaryMM(),this.connectionStatus.setPush(),this.numberOfRetry=0,this.pushEngine.registerSocketFail(function(){e.connectionStatus.setPushLost(),e.setState(Gr.RETRY)}),this.userCheckService.registerCheckUserSecondary(function(t){return t===et.CONNECTION_FAIL?void e.setState(Gr.RETRY):t===et.NO_SESSION?void e.setState(Gr.OFFLINE):void 0},function(){e.pushEngine.stopPushEngine(),e.connectionStatus.setPushLost(),e.setState(Gr.PRIMARY_BUFFER)}),this.userCheckService.startCheckUserSecondary()},e.prototype.startPrimaryBuffer=function(){var e=this,t=this.getRandomTime();this.connectionStatus.setConnecting(),this.$timeout(function(){e.setState(Gr.INITIAL_PRIMARY_PUSH)},t)},e.prototype.offline=function(){this.pushEngine.stopPushEngine(),this.connectionStatus.setOffline(),this.alerService.showOfflineAlert().then(function(){location.reload()})},e.prototype.retry=function(){return 10===this.numberOfRetry?void this.setState(Gr.OFFLINE):(this.connectionStatus.setConnecting(),this.numberOfRetry++,void this.setState(Gr.PRIMARY_BUFFER))},e.prototype.logout=function(){this.pushEngine.stopPushEngine(),this.connectionStatus.setOffline()},e.prototype.setState=function(e){this.currentState=e,this.pushEngine.clearSocketFailCallBack(),this.userCheckService.stopCheckUserPrimary(),this.userCheckService.stopCheckUserSecondary(),this.doJob()},e.prototype.doJob=function(){switch(this.currentState){case Gr.INITIAL_PRIMARY_PUSH:this.initialPrimaryPush(),this.setPageTitle("(Connecting) "+this.streamingAttribute.primaryMMHost);break;case Gr.PRIMARY_PUSH:this.onPrimaryPush(),this.setPageTitle(this.streamingAttribute.primaryMMHost);break;case Gr.SECONDARY_BUFFER:this.startSecondaryBuffer(),this.setPageTitle("(Waiting) "+this.streamingAttribute.secondaryMMHost);break;case Gr.INITIAL_SECONDARY_PUSH:this.initialSecondaryPush(),this.setPageTitle("(Connecting) "+this.streamingAttribute.secondaryMMHost);break;case Gr.SECONDARY_PUSH:this.onSecondaryPush(),this.setPageTitle(this.streamingAttribute.secondaryMMHost);break;case Gr.OFFLINE:this.offline(),this.setPageTitle("(Offline) ");break;case Gr.PRIMARY_BUFFER:this.startPrimaryBuffer(),this.setPageTitle("(Waiting) "+this.streamingAttribute.primaryMMHost);break;case Gr.RETRY:this.retry();break;case Gr.LOGOUT:this.logout(),this.setPageTitle("(Offline) ")}},e.prototype.setPageTitle=function(e){this.$window.document.title="Settrade Streaming for PC - "+e},e.prototype.getRandomTime=function(){var t=Math.floor(Math.random()*(e.MAX_TIME_OUT_DELAY-e.MIN_TIME_OUT_DELAY))+e.MIN_TIME_OUT_DELAY;return t},e.prototype.forceLogout=function(){this.setState(Gr.LOGOUT)},e.$inject=["$q","$http","$httpParamSerializerJQLike","MMPushEngine","StreamingAttribute","ConnectionStatus","$rootScope","MMPullEngine","$timeout","UserCheckService","AlertService","$window"],e.MIN_TIME_OUT_DELAY=5e3,e.MAX_TIME_OUT_DELAY=11e3,e}(),Ns=(function(){function e(){}return e}(),function(){function e(e,t,i,r,n){var o=this;this.streamingAttribute=e,this.$rootScope=t,this.binarySpliter=i,this.$http=r,this.$httpParamSerializerJQLike=n,this.$rootScope.$on("writeSubscribeMessageToPullDispatcher",function(e,t){return o.requestStreaming5DataProviderBinary(t)})}return e.prototype.requestStreaming5DataProviderBinary=function(e){var t=this;e.APIVersion=me,this.$http({method:"POST",url:this.streamingAttribute.activingMarketDataMMHost+"/realtime/streaming5/Streaming5DataProviderBinary.jsp",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e),responseType:"arraybuffer",withCredentials:!0}).then(function(e){var t=e.data;return t}).then(function(e){t.binarySpliter.split(new un(e))})},e.$inject=["StreamingAttribute","$rootScope","BinarySpliter","$http","$httpParamSerializerJQLike"],e}());angular.module("multi-market",["new-realtime-config","web-api","favourite","binary","order"]).factory("websocket",U).service("StreamingAttribute",Er).service("MMService",Br).service("MMPushEngine",$s).service("MMConnectionState",Ls).service("MMPullEngine",Ns).service("UserCheckService",Os);var Ms,Rs=function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,a)||this;return h.$scope=t,h.colorService=i,h.marketTickerPubSub=r,h.userInfoService=n,h.instrumentService=o,h.piwikService=s,h.pageService=a,h.userApplicationProfileService=c,h.alertService=l,h.marketTickerFilterService=u,h.mostActiveListTimerPublishSubscriber=d,h.onReceiveEquityMarketTickerCallBack=h.onReceiveEquityMarketTicker.bind(h),h.onReceiveDerivativeMarketTickerCallBack=h.onReceiveDerivativeMarketTicker.bind(h),h.onTriggerSETActiveListCallBack=h.onTriggerSETActiveList.bind(h),h}return ne(t,e),t.prototype.startService=function(){this.initialFilterConfig(),this.currentEquityTickerIndex=-1,this.nextEquityTickerIndex=0,this.currentDerivativeTickerIndex=-1,this.nextDerivativeTickerIndex=0,this.lastEquityTickerSeqId=-1,this.lastDerivativeTickerSeqId=-1,this.initialColumn(),this.registerMarketTicker()},t.prototype.stopService=function(){this.unsubscribeOldActiveListTimer(this.filterConfig),this.unregisterMarketTicker()},t.prototype.viewDidLoad=function(){},t.prototype.initialFilterConfig=function(){this.filterConfig=this.marketTickerFilterService.filterInMarketPage,this.filterConfig.isEquityOnly=this.userInfoService.isEquityOnly,this.filterConfig.isDerivativesOnly=this.userInfoService.isDerivativesOnly,this.subscribeNewActiveListTimer(this.filterConfig)},t.prototype.onFilterConfigChange=function(e){this.unsubscribeOldActiveListTimer(this.filterConfig),this.filterConfig=e,this.subscribeNewActiveListTimer(e),this.marketTickerFilterService.saveTickerFilterConfigurtion(this.filterConfig,zs.MARKET),this.unregisterMarketTicker(),this.initialColumn(),this.registerMarketTicker(),this.filterConfig.isSumMode&&this.piwikService.eventTrack(nt.MODE_SUM,rt.TICKER)},t.prototype.subscribeNewActiveListTimer=function(e){e.byMarketConfig.isFilterBySETActiveList&&(e.byMarketConfig.selectedActiveList&&e.byMarketConfig.selectedActiveList.refresh?this.mostActiveListTimerPublishSubscriber.subscribe(e.byMarketConfig.selectedActiveList,this.onTriggerSETActiveListCallBack):this.updateActiveListInstruments())},t.prototype.unsubscribeOldActiveListTimer=function(e){e.byMarketConfig.isFilterBySETActiveList&&e.byMarketConfig.selectedActiveList&&e.byMarketConfig.selectedActiveList.refresh&&this.mostActiveListTimerPublishSubscriber.unsubscribe(e.byMarketConfig.selectedActiveList,this.onTriggerSETActiveListCallBack)},t.prototype.updateActiveListInstruments=function(){var e=this,t=this.filterConfig.byMarketConfig.generateSelectedActiveListInstrumentRequest();this.instrumentService.getInstrumentList(t).then(function(t){e.filterConfig.byMarketConfig.updateActiveListInstrumentMap(t)})},t.prototype.initialColumn=function(){this.currentEquityTickerIndex=-1,this.nextEquityTickerIndex=0,this.currentDerivativeTickerIndex=-1,this.nextDerivativeTickerIndex=0,this.lastEquityTickerSeqId=-1,this.lastDerivativeTickerSeqId=-1,this.isEnableEquity()?(this.EQ_MAX_ROW=21,this.DERIV_MAX_ROW=0):this.isEnableDerivatives()?(this.EQ_MAX_ROW=0,this.DERIV_MAX_ROW=21):(this.EQ_MAX_ROW=15,this.DERIV_MAX_ROW=6),this.equityTickers=new Array(this.EQ_MAX_ROW),this.derivativeTickers=new Array(this.DERIV_MAX_ROW)},t.prototype.registerMarketTicker=function(){this.isEnableEquity()?this.marketTickerPubSub.subscribe(Qe.EQUITY,this.filterConfig.isSumMode,this.onReceiveEquityMarketTickerCallBack):this.isEnableDerivatives()?this.marketTickerPubSub.subscribe(Qe.DERIVATIVE,this.filterConfig.isSumMode,this.onReceiveDerivativeMarketTickerCallBack):(this.marketTickerPubSub.subscribe(Qe.EQUITY,this.filterConfig.isSumMode,this.onReceiveEquityMarketTickerCallBack),this.marketTickerPubSub.subscribe(Qe.DERIVATIVE,this.filterConfig.isSumMode,this.onReceiveDerivativeMarketTickerCallBack))},t.prototype.isEnableEquity=function(){return this.userInfoService.isEquityOnly||!this.userInfoService.isDerivativesOnly&&this.filterConfig.isByMarketMode()&&this.filterConfig.byMarketConfig.isValidEquityOnly()},t.prototype.isEnableDerivatives=function(){return this.userInfoService.isDerivativesOnly||!this.userInfoService.isEquityOnly&&this.filterConfig.isByMarketMode()&&this.filterConfig.byMarketConfig.isDerivativesOnly()},t.prototype.unregisterMarketTicker=function(){this.marketTickerPubSub.unsubscribe(Qe.EQUITY,!1,this.onReceiveEquityMarketTickerCallBack),this.marketTickerPubSub.unsubscribe(Qe.DERIVATIVE,!1,this.onReceiveDerivativeMarketTickerCallBack),this.marketTickerPubSub.unsubscribe(Qe.EQUITY,!0,this.onReceiveEquityMarketTickerCallBack),this.marketTickerPubSub.unsubscribe(Qe.DERIVATIVE,!0,this.onReceiveDerivativeMarketTickerCallBack)},t.prototype.onReceiveEquityMarketTicker=function(e){e.sequenceID>this.lastEquityTickerSeqId&&(this.marketTickerFilterService.filter(this.filterConfig,e)&&this.updateEquityTicker(e),this.lastEquityTickerSeqId=e.sequenceID)},t.prototype.onReceiveDerivativeMarketTicker=function(e){e.sequenceID>this.lastDerivativeTickerSeqId&&(this.marketTickerFilterService.filter(this.filterConfig,e)&&this.updateDerivativeTicker(e),this.lastDerivativeTickerSeqId=e.sequenceID)},t.prototype.isShowUnchangeIcon=function(e){return e===se.UNCHANGE},t.prototype.highlightRow=function(e,t){return e===t?"highlight":""},t.prototype.moveEquityTicker=function(){this.currentEquityTickerIndex++,this.nextEquityTickerIndex++,this.currentEquityTickerIndex===this.EQ_MAX_ROW&&(this.currentEquityTickerIndex=0),this.nextEquityTickerIndex===this.EQ_MAX_ROW&&(this.nextEquityTickerIndex=0)},t.prototype.moveDerivativeTicker=function(){this.currentDerivativeTickerIndex++,this.nextDerivativeTickerIndex++,this.currentDerivativeTickerIndex===this.DERIV_MAX_ROW&&(this.currentDerivativeTickerIndex=0),this.nextDerivativeTickerIndex===this.DERIV_MAX_ROW&&(this.nextDerivativeTickerIndex=0)},t.prototype.updateEquityTicker=function(e){this.equityTickers[this.nextEquityTickerIndex]=e,this.moveEquityTicker()},t.prototype.updateDerivativeTicker=function(e){this.derivativeTickers[this.nextDerivativeTickerIndex]=e,this.moveDerivativeTicker()},t.prototype.onClickSymbol=function(e){var t=this;this.instrumentService.searchSymbol(e.instrumentID,Qe.ALL).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e),e.isEquity()?t.piwikService.eventTrack(nt.CLICK_SYMBOL_EQUITY,rt.TICKER):e.isDerivatives()&&t.piwikService.eventTrack(nt.CLICK_SYMBOL_DERIV,rt.TICKER)})},t.prototype.openFilterModal=function(){var e=this;this.alertService.showTickerFilterModal(this.filterConfig.clone()).then(function(t){e.onFilterConfigChange(t)})},t.prototype.isOnPrimaryScreen=function(){return!this.userApplicationProfileService.isSecondaryWindow},t.prototype.onTriggerSETActiveList=function(){this.updateActiveListInstruments()},t.$inject=["$scope","ColorService","MarketTickerPublishSubscriber","UserInfoService","InstrumentService","PiwikService","PageService","UserApplicationProfileService","AlertService","MarketTickerFilterService","MostActiveListTimerPublishSubscriber"],t}(ys),_s=function(){function e(e,t){this.element=e,this.colorService=t}return e.prototype.$onChanges=function(e){this.onTickerChange(e.ticker.previousValue,e.ticker.currentValue)},e.prototype.onTickerChange=function(e,t){if(void 0===this.ticker){var i=this.getChangeTrendElement(),r=i.getElementsByTagName("i");return void this.resetElClass(i,r)}if(this.isSideChange(e,t)&&this.toggleSideElClass(),this.isTrendChange(e,t)){var i=this.getChangeTrendElement(),r=i.getElementsByTagName("i");this.toggleTrendClass(r),this.toggleTrendEl(i,r)}},e.prototype.resetElClass=function(e,t){this.resetClass(this.element[0].children[1]),this.resetClass(this.element[0].children[2]),this.resetClass(this.element[0].children[3]),this.resetClass(this.element[0].children[4]),this.element[0].children.length>5&&this.resetClass(this.element[0].children[5]),this.resetClass(t[0]),t.length>1&&e.removeChild(t[1])},e.prototype.toggleSideElClass=function(){this.toggleClass(this.element[0].children[1],this.ticker.summary.side.classname),this.toggleClass(this.element[0].children[2],this.ticker.summary.side.classname)},e.prototype.toggleTrendClass=function(e){
this.toggleClass(this.element[0].children[3],this.colorService.trendColor(this.ticker.summary.trend)),this.toggleClass(this.element[0].children[4],this.colorService.trendColor(this.ticker.summary.trend)),this.element[0].children.length>5&&this.toggleClass(this.element[0].children[5],this.colorService.trendColor(this.ticker.summary.trend)),this.toggleClass(e[0],this.colorService.trendIcon(this.ticker.summary.trend))},e.prototype.toggleTrendEl=function(e,t){if(this.ticker.summary.trend===se.UNCHANGE&&1===t.length){var i=angular.copy(t[0]);this.toggleClass(i,"fa-caret-right"),e.appendChild(i)}else this.ticker.summary.trend!==se.UNCHANGE&&t.length>1&&e.removeChild(t[1])},e.prototype.toggleClass=function(e,t){var i=angular.copy(e.classList);e.removeAttribute("class"),e.setAttribute("class",i[0]+" "+i[1]+" "+t)},e.prototype.resetClass=function(e){this.toggleClass(e,"")},e.prototype.getChangeTrendElement=function(){return this.trendElement||(this.trendElement=this.element.find(".change")),this.trendElement[0]},e.prototype.isSideChange=function(e,t){try{return void 0===e||void 0===t||e.summary.side.shortname!==t.summary.side.shortname}catch(i){return!0}},e.prototype.isTrendChange=function(e,t){try{return void 0===e||void 0===t||e.summary.trend!==t.summary.trend}catch(i){return!0}},e.$inject=["$element","ColorService"],e}(),Vs=function(e){function t(t,i){var r=e.call(this,i)||this;return r.instrumentTickerPubSub=t,r.pageService=i,r.onReceiveInstrumentTickerCallBack=r.onReceiveInstrumentTicker.bind(r),r}return ne(t,e),t.prototype.startService=function(){},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.prototype.unsubscribeSymbol=function(e){e&&0!==e.length&&this.instrumentTickerPubSub.unsubscribe(e,this.onReceiveInstrumentTickerCallBack)},t.prototype.subscribeSymbol=function(e){e&&0!==e.length&&(this.lastTickerSeqId=-1,this.instrumentTickerPubSub.subscribe(e,this.onReceiveInstrumentTickerCallBack))},t.prototype.onReceiveInstrumentTicker=function(e){var t=this,i=[];e.forEach(function(e,r){e.sequenceID>t.lastTickerSeqId&&(i.push(e),t.lastTickerSeqId=e.sequenceID)});var r=i.reverse().concat(this.tickers);this.tickers=r.slice(0,this.TOTAL_ROWS)},t}(ys),Bs=function(e){function t(t,i,r){var n=e.call(this,t,r)||this;return n.instrumentPubSub=t,n.currentSymbolChangeEvent=i,n.pageService=r,n.TOTAL_ROWS=5,n.onCurrentSymbolChangeCallBack=n.onCurrentSymbolChange.bind(n),n.onReceiveInstrumentTickerCallBack=n.onReceiveInstrumentTicker.bind(n),n.currentSymbol=dt.empty(),n}return ne(t,e),t.prototype.startService=function(){this.initTicker(),this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.unsubscribeSymbol(this.currentSymbol.name),this.currentSymbol=dt.empty()},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentSymbolChange=function(e){e.isEqual(this.currentSymbol)||(this.initTicker(),this.unsubscribeSymbol(this.currentSymbol.name),this.subscribeSymbol(e.name),this.currentSymbol=e)},t.prototype.initTicker=function(){this.tickers=[]},t.$inject=["InstrumentTickerPublishSubscriber","CurrentSymbolChangeEvent","PageService"],t}(Vs),xs=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.element=t,r.colorService=i,r}return ne(t,e),t.$inject=["$element","ColorService"],t}(_s),Fs=function(e){function t(t,i,r,n){var o=e.call(this,t,i)||this;return o.element=t,o.colorService=i,o.$filter=r,o.$timeout=n,o.volumeFormatter=o.$filter("volume"),o.priceFormatter=o.$filter("price"),o.randomNumber=10*Math.random()*o.index,o.resetPreviousTickerState(),o}return ne(t,e),t.prototype.$onChanges=function(t){var i=this;clearTimeout(this.renderPromise),this.renderPromise=setTimeout(function(){return e.prototype.onTickerChange.call(i,i.previousTickerState,t.ticker.currentValue),void 0===t.ticker.currentValue?(i.clearTextViewElement(),i.resetClass(i.element[0].children[0]),void i.resetPreviousTickerState()):(t.ticker&&i.updateTextViewElement(),e.prototype.isTrendChange.call(i,i.previousTickerState,t.ticker.currentValue)&&i.toggleClass(i.element[0].children[0],i.colorService.trendColor(i.ticker.summary.trend)),void(void 0!==t.ticker.currentValue?(i.previousTickerState.summary.side=t.ticker.currentValue.summary.side,i.previousTickerState.summary.trend=t.ticker.currentValue.summary.trend):i.resetPreviousTickerState()))},this.randomNumber)},t.prototype.resetPreviousTickerState=function(){this.previousTickerState={},this.previousTickerState.summary={}},t.prototype.clearTextViewElement=function(){this.symbolElement||(this.symbolElement=this.element.find(".instrumentID")),this.sideElement||(this.sideElement=this.element.find("[name='side']")),this.volumeElement||(this.volumeElement=this.element.find("[name='volume']")),this.priceElement||(this.priceElement=this.element.find("[name='price']")),this.symbolElement.text(""),this.sideElement.text(""),this.volumeElement.text(""),this.priceElement.text("")},t.prototype.updateTextViewElement=function(){this.symbolElement||(this.symbolElement=this.element.find(".instrumentID")),this.sideElement||(this.sideElement=this.element.find("[name='side']")),this.volumeElement||(this.volumeElement=this.element.find("[name='volume']")),this.priceElement||(this.priceElement=this.element.find("[name='price']")),this.symbolElement.text(this.ticker.instrumentID),this.sideElement.text(this.ticker.summary.side.shortname),this.volumeElement.text(this.volumeFormatter(this.ticker.volume)),this.priceElement.text(this.priceFormatter(this.ticker.price,this.ticker.priceDigit))},t.$inject=["$element","ColorService","$filter","$timeout"],t}(_s),Us=function(){function e(){this.currentToggleColumn1Index=0,this.toggleColumn1List=al.WATCH_LIST,this.currentToggleColumn2Index=0,this.lastToggleColumn2Index=0,this.toggleColumn2List=al.WATCH_LIST_COL2}return e.prototype.setCurrentFavouriteDropdown=function(e){this.selectedFavouriteDropdown=e},e.prototype.getCurrentFavouriteDropdown=function(){return this.selectedFavouriteDropdown},e.prototype.getFavouriteByListName=function(e){var t=this.findIndexByListNameWithHeader(e);return this.favouriteList[t]},e.prototype.findIndexByListNameWithHeader=function(e){for(var t=0,i=this.favouriteList.length;t<i;t++)if(e===this.favouriteList[t].listName)return t},e.prototype.getToggleColumn2Index=function(e){var t=al.lookup[e],i=0;return t&&al.WATCH_LIST_COL2.some(function(e,r){if(e===t)return i=r,!0}),i},e.prototype.showTotalVolumeInColumn2=function(){this.currentToggleColumn2Index=this.getToggleColumn2Index(al.TOTAL_VOLUME)},e.prototype.showTotalValueInColumn2=function(){this.currentToggleColumn2Index=this.getToggleColumn2Index(al.TOTAL_VALUE)},e.prototype.showLastSelectedToggleColumn2=function(){this.currentToggleColumn2Index=this.lastToggleColumn2Index},e.$inject=[],e}(),qs=function(){function e(){this.mode=Fo.BY_MARKET,this.isSumMode=!1,this.byCriteriaConfig=new js,this.byMarketConfig=new Hs}return e.prototype.initial=function(e,t){this.isEquityOnly=e,this.isDerivativesOnly=t,this.mode=Fo.BY_MARKET,t||(this.byMarketConfig.isFilterBySET=!0,this.byMarketConfig.checkAllSET()),e||(this.byMarketConfig.isFilterByTFEX=!0,this.byMarketConfig.checkAllTFEX())},e.prototype.isByCriteriaMode=function(){return this.mode===Fo.BY_CRITERIA},e.prototype.isDisabledTFEX=function(){return this.isByCriteriaMode()||this.isEquityOnly},e.prototype.isDisabledSET=function(){return this.isByCriteriaMode()||this.isDerivativesOnly},e.prototype.isByMarketMode=function(){return this.mode===Fo.BY_MARKET},e.prototype.clone=function(){return angular.copy(this)},e}(),js=function(){function e(){this.isFilterByFavourite=!1,this.isFilterByValue=!1,this.isFilterByVolume=!1,this.limitValueStr="",this.limitVolumeStr=""}return Object.defineProperty(e.prototype,"limitValue",{get:function(){return yt.toNumber(this.limitValueStr)},set:function(e){this.limitValueStr=this.formatVolume(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitVolume",{get:function(){return yt.toNumber(this.limitVolumeStr)},set:function(e){this.limitVolumeStr=this.formatVolume(e)},enumerable:!0,configurable:!0}),e.prototype.foundUnexpectedValue=function(e){return void 0===e||null===e||isNaN(e)},e.prototype.formatVolume=function(e){return r(e)?"":numeral(e).format("0,0")},e}(),Hs=function(){function e(){this.isFilterBySET=!1,this.isFilterByTFEX=!1,this.isFilterBySETActiveList=!1,this.setFilterList=[new Ys("Common Stock",Ms.common),new Ys("Foreign Common Stock",Ms.foreign),new Ys("Convertible",Ms.convertible),new Ys("Warrant",Ms.warrant),new Ys("Derivatives Warrant",Ms.dw),new Ys("Preferred",Ms.preferred),new Ys("ETF",Ms.etf),new Ys("Unit Trust",Ms.unitTrust)],this.futuresFilterList=[new Gs("Equity Index",ce.FUTURES,Ks.index),new Gs("Single Stock",ce.FUTURES,Ks.stock),new Gs("Metal",ce.FUTURES,Ks.metal),new Gs("Agricultural",ce.FUTURES,Ks.agricultural),new Gs("Currency",ce.FUTURES,Ks.currency),new Gs("Interest Rate",ce.FUTURES,Ks.interest),new Gs("Deferred Contract",ce.FUTURES,Ks.deffred)],this.activeListInstrumentMap=new ut((!1))}return Object.defineProperty(e.prototype,"isFilterBySETSecuritiesType",{get:function(){var e=!1;return this.setFilterList.forEach(function(t){e=e||t.isChecked}),e},set:function(e){this.setFilterList.forEach(function(t){t.isChecked=e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFilterByTFEXFuturesType",{get:function(){var e=!1;return this.futuresFilterList.forEach(function(t){e=e||t.isChecked}),e},set:function(e){this.futuresFilterList.forEach(function(t){t.isChecked=e})},enumerable:!0,configurable:!0}),e.prototype.checkAllSET=function(){this.isFilterBySET=!0,this.setFilterList.forEach(function(e){e.isChecked=!0}),this.isFilterBySETActiveList=!1},e.prototype.uncheckAllSET=function(){this.isFilterBySET=!1,this.setFilterList.forEach(function(e){e.isChecked=!1}),this.isFilterBySETActiveList=!1},e.prototype.checkAllTFEX=function(){this.isFilterByTFEX=!0,this.isFilterByTFEXOptions=!0,this.futuresFilterList.forEach(function(e){e.isChecked=!0})},e.prototype.uncheckAllTFEX=function(){this.isFilterByTFEX=!1,this.isFilterByTFEXOptions=!1,this.futuresFilterList.forEach(function(e){e.isChecked=!1})},e.prototype.updateActiveListInstrumentMap=function(e){var t=this;this.activeListInstrumentMap=new ut((!1)),e.forEach(function(e){t.activeListInstrumentMap[e.name]=!0})},e.prototype.generateSelectedActiveListInstrumentRequest=function(){var e=new $r,t=this.selectedActiveList;if(t.refresh){var i=[];this.setFilterList.forEach(function(t){if(t.isChecked)switch(t.instrumentSubType){case Ms.common:i.push("common stock");break;case Ms.convertible:i.push("convertible");break;case Ms.dw:i.push("derivatives warrant");break;case Ms.etf:i.push("etf");break;case Ms.foreign:i.push("foreign common stock");break;case Ms.preferred:i.push("preferred");break;case Ms.unitTrust:i.push("unit trust");break;case Ms.warrant:i.push("warrant")}e.boardSubType=i.join(",")})}else e.boardSubType=t.request.boardSubType;return e.boardType=t.request.boardType,e.mainListName=t.request.mainListName,e.subListName=t.request.subListName,e},Object.defineProperty(e.prototype,"isSETChecked",{get:function(){var e=!1;return this.setFilterList.forEach(function(t){e=e||t.isChecked}),e=e||this.isFilterBySETActiveList,this.isFilterBySET=e,e},set:function(e){e?this.checkAllSET():this.uncheckAllSET()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTFEXChecked",{get:function(){var e=!1;return this.futuresFilterList.forEach(function(t){e=e||t.isChecked}),this.isFilterByTFEX=e||this.isFilterByTFEXOptions,this.isFilterByTFEX},set:function(e){e?this.checkAllTFEX():this.uncheckAllTFEX()},enumerable:!0,configurable:!0}),e.prototype.isValidEquityOnly=function(){return this.isFilterBySET&&!this.isFilterByTFEX},e.prototype.isDerivativesOnly=function(){return this.isFilterByTFEX&&!this.isFilterBySET},e}(),Ws=function(){function e(e,t){this.instrumentType=e,this.isChecked=!1,this.name=t,this.key=this.name.toLowerCase().split(" ").join("-")}return e}(),Ys=function(e){function t(t,i){var r=e.call(this,ce.EQUITY,t)||this;return r.instrumentSubType=i,r}return ne(t,e),t}(Ws),Gs=(function(e){function t(t,i){return e.call(this,i,t)||this}return ne(t,e),t}(Ws),function(e){function t(t,i,r){var n=e.call(this,i,t)||this;return n.instrumentSubType=r,n}return ne(t,e),t}(Ws));!function(e){e[e.common=0]="common",e[e.foreign=1]="foreign",e[e.etf=2]="etf",e[e.dw=3]="dw",e[e.warrant=4]="warrant",e[e.convertible=5]="convertible",e[e.preferred=6]="preferred",e[e.unitTrust=7]="unitTrust"}(Ms||(Ms={}));var Ks;!function(e){e[e.index=0]="index",e[e.metal=1]="metal",e[e.stock=2]="stock",e[e.interest=3]="interest",e[e.energy=4]="energy",e[e.currency=5]="currency",e[e.agricultural=6]="agricultural",e[e.deffred=7]="deffred"}(Ks||(Ks={}));var zs=function(){function e(){}return e.MARKET="market",e.TICKER="ticker",e}(),Qs=function(){function e(e,t){this.watchStore=e,this.mongoService=t,this.filterInMarketPage=new qs,this.filterInTickerPage=new qs}return e.prototype.filter=function(e,t){switch(e.mode){case Fo.BY_CRITERIA:return this.filterByCriteria(e.byCriteriaConfig,t);case Fo.BY_MARKET:return this.filterByMarket(e.byMarketConfig,t)}return!0},e.prototype.filterByCriteria=function(e,t){var i=!0;e.isFilterByFavourite&&(i=this.filterByFavouriteDropdownItem(e,t));var r=!0;e.isFilterByValue&&(r=this.filterByValueCriteria(e,t));var n=!0;return e.isFilterByVolume&&(n=this.filterByVolumeCriteria(e,t)),i&&r&&n},e.prototype.filterByMarket=function(e,t){if(e.isFilterBySET&&t.instrumentType===ce.EQUITY){var i=!0,r=!0;return e.isFilterBySETActiveList&&(i=this.filterBySETActiveList(e,t)),e.isFilterBySETSecuritiesType&&(r=this.filterBySETInstrumentSubType(e,t)),i&&r}return!(!e.isFilterByTFEX||t.instrumentType!==ce.FUTURES&&t.instrumentType!==ce.OPTIONS)&&this.filterByTFEXInstrumentType(e,t)},e.prototype.filterByFavouriteDropdownItem=function(e,t){var i=!1;switch(e.selectedFilterFavourite.mode){case yr.FAVOURITE:var r=this.watchStore.getFavouriteByListName(e.selectedFilterFavourite.key);r.symbolList.some(function(e){return e.toUpperCase()===t.instrumentID.toUpperCase()&&(i=!0,!0)});break;case yr.MY_PORT:var n=this.watchStore.myPortSymbolList;n.some(function(e){return e.toUpperCase()===t.instrumentID.toUpperCase()&&(i=!0,!0)})}return i},e.prototype.filterByValueCriteria=function(e,t){return t.price*t.volume>=e.limitValue},e.prototype.filterByVolumeCriteria=function(e,t){return t.volume>=e.limitVolume},e.prototype.filterBySETInstrumentSubType=function(e,t){var i=!1;return e.setFilterList.some(function(e){return!(!e.isChecked||e.instrumentSubType!==t.summary.subType)&&(i=!0,!0)}),i},e.prototype.filterBySETActiveList=function(e,t){return e.activeListInstrumentMap.value(t.instrumentID)},e.prototype.filterByTFEXInstrumentType=function(e,t){if(e.isFilterByTFEXOptions&&t.instrumentType===ce.OPTIONS)return!0;var i=!1;return e.isFilterByTFEXFuturesType&&t.instrumentType===ce.FUTURES&&e.futuresFilterList.some(function(e){if(e.instrumentSubType===t.summary.subType&&e.isChecked)return i=!0,!0}),i},e.prototype.saveTickerFilterConfigurtion=function(e,t){t===zs.MARKET?this.filterInMarketPage=e:t===zs.TICKER&&(this.filterInTickerPage=e);var i=this.generateSaveTickerFilterRequest(e);this.mongoService.updateTickerFilter(i,t)},e.prototype.generateSaveTickerFilterRequest=function(e){var t={};t.mode=e.mode,t.isSumMode=e.isSumMode,t.criteriaFilter={},t.criteriaFilter.isFavourite=e.byCriteriaConfig.isFilterByFavourite,t.criteriaFilter.isValue=e.byCriteriaConfig.isFilterByValue,t.criteriaFilter.isVolume=e.byCriteriaConfig.isFilterByVolume,t.criteriaFilter.favouriteFilter=this.watchStore.findIndexByListNameWithHeader(e.byCriteriaConfig.selectedFilterFavourite.showName),t.criteriaFilter.valueFilter=e.byCriteriaConfig.limitValue,t.criteriaFilter.volumeFilter=e.byCriteriaConfig.limitVolume,t.marketFilter={},t.marketFilter.isSET=e.byMarketConfig.isFilterBySET,t.marketFilter.isFilterBySETActiveList=e.byMarketConfig.isFilterBySETActiveList,t.marketFilter.isFilterBySETActiveList?t.marketFilter.selectedActiveListName=e.byMarketConfig.selectedActiveList.name:t.marketFilter.selectedActiveListName="",t.marketFilter.isTFEX=e.byMarketConfig.isFilterByTFEX,t.marketFilter.setFilter={isCommonStock:!1,isConvertible:!1,isDerivativesWarrant:!1,isETF:!1,isForeignStock:!1,isPreferred:!1,isUnitTrust:!1,isWarrant:!1},t.marketFilter.futuresFilter={isEquityIndex:!1,isSingleStock:!1,isMetal:!1,isAgricultural:!1,isCurrency:!1,isInterestRest:!1,isDefferedContact:!1},e.byMarketConfig.setFilterList.forEach(function(e){switch(e.instrumentSubType){case Ms.common:e.isChecked&&(t.marketFilter.setFilter.isCommonStock=!0);break;case Ms.convertible:e.isChecked&&(t.marketFilter.setFilter.isConvertible=!0);break;case Ms.dw:e.isChecked&&(t.marketFilter.setFilter.isDerivativesWarrant=!0);break;case Ms.etf:e.isChecked&&(t.marketFilter.setFilter.isETF=!0);break;case Ms.foreign:e.isChecked&&(t.marketFilter.setFilter.isForeignStock=!0);break;case Ms.preferred:e.isChecked&&(t.marketFilter.setFilter.isPreferred=!0);break;case Ms.unitTrust:e.isChecked&&(t.marketFilter.setFilter.isUnitTrust=!0);break;case Ms.warrant:e.isChecked&&(t.marketFilter.setFilter.isWarrant=!0)}});var i;return e.byMarketConfig.futuresFilterList.forEach(function(e){switch(i=i||e.isChecked,e.instrumentSubType){case Ks.index:t.marketFilter.futuresFilter.isEquityIndex=e.isChecked;break;case Ks.agricultural:t.marketFilter.futuresFilter.isAgricultural=e.isChecked;break;case Ks.currency:t.marketFilter.futuresFilter.isCurrency=e.isChecked;break;case Ks.interest:t.marketFilter.futuresFilter.isInterestRest=e.isChecked;break;case Ks.metal:t.marketFilter.futuresFilter.isMetal=e.isChecked;break;case Ks.stock:t.marketFilter.futuresFilter.isSingleStock=e.isChecked;break;case Ks.deffred:t.marketFilter.futuresFilter.isDefferedContact=e.isChecked}}),t.marketFilter.tfexFilter={isFutures:i,isOptions:e.byMarketConfig.isFilterByTFEXOptions},t},e.$inject=["WatchStore","MongoService"],e}(),Xs=function(){function e(){}return e.SHOW_3_COLUMNS_BTN_LABEL="Show 3 Columns",e.SHOW_4_COLUMNS_BTN_LABEL="Show 4 Columns",e}(),Js=function(){function e(){}return e.FOR_3_COLUMN=66,e.FOR_4_COLUMN=88,e}(),Zs=function(e){function t(t,i){var r=e.call(this,t)||this;return r.pageService=t,r.screenTrackerService=i,r}return ne(t,e),t.prototype.startService=function(){this.changeToPage()},t.prototype.changeToPage=function(){this.screenTrackerService.changeToScreen(this.getAnalyticsScreenName(),this.getAnalyticsTagName(),this.getAnalyticsProperties())},t.$inject=["PageService","ScreenTrackerService"],t}(ys),ea=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this,i,u)||this;return d.marketTickerPubSub=t,d.pageService=i,d.userInfoService=r,d.instrumentService=n,d.userApplicationProfileService=o,d.piwikService=s,d.alertService=a,d.marketTickerFilterService=c,d.mostActiveListTimerPublishSubscriber=l,d.screenTrackerService=u,d.onReceiveMarketTickerCallBack=d.onReceiveMarketTicker.bind(d),d.onTriggerSETActiveListCallBack=d.onTriggerSETActiveList.bind(d),d.clearColumn(),d.initialDefaultDisplayMode(),d}return ne(t,e),t.prototype.initialDefaultDisplayMode=function(){this.isShow3Columns=!1,t.MAX_ROW=Js.FOR_4_COLUMN,this.modeToggleButtonLabel=Xs.SHOW_3_COLUMNS_BTN_LABEL},t.prototype.startService=function(){this.clearColumn(),this.initialFilterConfig(),this.registerMarketTicker(),this.changeToPage()},t.prototype.stopService=function(){this.unsubscribeOldActiveListTimer(this.filterConfig),this.unregisterMarketTicker(),this.clearColumn()},t.prototype.viewDidLoad=function(){},t.prototype.initialFilterConfig=function(){this.filterConfig=this.marketTickerFilterService.filterInTickerPage,this.filterConfig.isEquityOnly=this.userInfoService.isEquityOnly,this.filterConfig.isDerivativesOnly=this.userInfoService.isDerivativesOnly,this.subscribeNewActiveListTimer(this.filterConfig)},t.prototype.clearColumn=function(){this.data=new Array(t.MAX_ROW),this.currentTickerIndex=-1,this.nextTickerIndex=0,this.lastEquityTickerSeqId=-1,this.lastDerivativeTickerSeqId=-1},t.prototype.onFilterConfigChange=function(e){this.unsubscribeOldActiveListTimer(this.filterConfig),this.filterConfig=e,this.subscribeNewActiveListTimer(e),this.marketTickerFilterService.saveTickerFilterConfigurtion(this.filterConfig,zs.TICKER),this.unregisterMarketTicker(),this.clearColumn(),this.registerMarketTicker()},t.prototype.subscribeNewActiveListTimer=function(e){e.byMarketConfig.isFilterBySETActiveList&&(e.byMarketConfig.selectedActiveList&&e.byMarketConfig.selectedActiveList.refresh?this.mostActiveListTimerPublishSubscriber.subscribe(e.byMarketConfig.selectedActiveList,this.onTriggerSETActiveListCallBack):this.updateActiveListInstruments())},t.prototype.unsubscribeOldActiveListTimer=function(e){e.byMarketConfig.isFilterBySETActiveList&&e.byMarketConfig.selectedActiveList&&e.byMarketConfig.selectedActiveList.refresh&&this.mostActiveListTimerPublishSubscriber.unsubscribe(e.byMarketConfig.selectedActiveList,this.onTriggerSETActiveListCallBack)},t.prototype.updateActiveListInstruments=function(){var e=this,t=this.filterConfig.byMarketConfig.generateSelectedActiveListInstrumentRequest();this.instrumentService.getInstrumentList(t).then(function(t){e.filterConfig.byMarketConfig.updateActiveListInstrumentMap(t)})},t.prototype.registerMarketTicker=function(){this.isEnableEquity()?this.marketTickerPubSub.subscribe(Qe.EQUITY,this.filterConfig.isSumMode,this.onReceiveMarketTickerCallBack):this.isEnableDerivatives()?this.marketTickerPubSub.subscribe(Qe.DERIVATIVE,this.filterConfig.isSumMode,this.onReceiveMarketTickerCallBack):(this.marketTickerPubSub.subscribe(Qe.EQUITY,this.filterConfig.isSumMode,this.onReceiveMarketTickerCallBack),this.marketTickerPubSub.subscribe(Qe.DERIVATIVE,this.filterConfig.isSumMode,this.onReceiveMarketTickerCallBack))},t.prototype.isEnableEquity=function(){return this.userInfoService.isEquityOnly||!this.userInfoService.isDerivativesOnly&&this.filterConfig.isByMarketMode()&&this.filterConfig.byMarketConfig.isValidEquityOnly()},t.prototype.isEnableDerivatives=function(){return this.userInfoService.isDerivativesOnly||!this.userInfoService.isEquityOnly&&this.filterConfig.isByMarketMode()&&this.filterConfig.byMarketConfig.isDerivativesOnly()},t.prototype.unregisterMarketTicker=function(){this.marketTickerPubSub.unsubscribe(Qe.EQUITY,!1,this.onReceiveMarketTickerCallBack),this.marketTickerPubSub.unsubscribe(Qe.DERIVATIVE,!1,this.onReceiveMarketTickerCallBack),this.marketTickerPubSub.unsubscribe(Qe.EQUITY,!0,this.onReceiveMarketTickerCallBack),this.marketTickerPubSub.unsubscribe(Qe.DERIVATIVE,!0,this.onReceiveMarketTickerCallBack)},t.prototype.onReceiveMarketTicker=function(e){if(e.instrumentType===ce.EQUITY){if(e.sequenceID<=this.lastEquityTickerSeqId)return;this.lastEquityTickerSeqId=e.sequenceID}if(e.instrumentType===ce.FUTURES||e.instrumentType===ce.INDEX||e.instrumentType===ce.OPTIONS){if(e.sequenceID<=this.lastDerivativeTickerSeqId)return;this.lastDerivativeTickerSeqId=e.sequenceID}this.marketTickerFilterService.filter(this.filterConfig,e)&&this.updateTicker(e)},t.prototype.updateTicker=function(e){this.data[this.nextTickerIndex]=e,this.moveEquityTicker()},t.prototype.moveEquityTicker=function(){this.currentTickerIndex++,this.nextTickerIndex++,this.currentTickerIndex===t.MAX_ROW&&(this.currentTickerIndex=0),this.nextTickerIndex===t.MAX_ROW&&(this.nextTickerIndex=0)},t.prototype.highlightRow=function(e){return e===this.currentTickerIndex?"highlight":""},t.prototype.onClickSymbol=function(e){var t=this;this.instrumentService.searchSymbol(e.instrumentID,Qe.ALL).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e),e.isEquity()?t.piwikService.eventTrack(nt.CLICK_SYMBOL_EQUITY,rt.TICKER):e.isDerivatives()&&t.piwikService.eventTrack(nt.CLICK_SYMBOL_DERIV,rt.TICKER)})},t.prototype.openFilterModal=function(){var e=this;this.alertService.showTickerFilterModal(this.filterConfig.clone()).then(function(t){e.onFilterConfigChange(t)})},t.prototype.isOnPrimaryScreen=function(){return!this.userApplicationProfileService.isSecondaryWindow},t.prototype.onTriggerSETActiveList=function(){this.updateActiveListInstruments()},t.prototype.toggleDisplayMode=function(){this.stopService(),this.isShow3Columns?(this.isShow3Columns=!1,t.MAX_ROW=Js.FOR_4_COLUMN,this.modeToggleButtonLabel=Xs.SHOW_3_COLUMNS_BTN_LABEL):(this.isShow3Columns=!0,t.MAX_ROW=Js.FOR_3_COLUMN,this.modeToggleButtonLabel=Xs.SHOW_4_COLUMNS_BTN_LABEL),this.startService()},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.getAnalyticsScreenName=function(){return this.isShow3Columns?ss.TICKER_THREE_COLUMNS:ss.TICKER_FOUR_COLUMNS},t.$inject=["MarketTickerPublishSubscriber","PageService","UserInfoService","InstrumentService","UserApplicationProfileService","PiwikService","AlertService","MarketTickerFilterService","MostActiveListTimerPublishSubscriber","ScreenTrackerService"],t.MAX_ROW=Js.FOR_4_COLUMN,t}(Zs),ta=(function(){function e(){}return e}(),function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.instrumentTickerPubSub=t,r.pageService=i,r.TOTAL_ROWS=6,r.tickers=[],r}return ne(t,e),t.prototype.startService=function(){this.tickers=[],this.symbol&&0!==this.symbol.length&&this.subscribeSymbol(this.symbol)},t.prototype.stopService=function(){this.symbol&&this.unsubscribeSymbol(this.symbol)},t.prototype.$onChanges=function(e){e.symbol&&!e.symbol.isFirstChange()&&e.symbol.previousValue!==e.symbol.currentValue&&(e.symbol.previousValue&&0!==e.symbol.previousValue.length&&this.unsubscribeSymbol(e.symbol.previousValue),this.tickers=[],e.symbol.currentValue&&0!==e.symbol.currentValue.length&&this.subscribeSymbol(e.symbol.currentValue))},t.prototype.viewDidLoad=function(){},t.$inject=["InstrumentTickerPublishSubscriber","PageService"],t}(Vs));angular.module("ticker",["new-realtime-config","number-formatter","color-formatter","multi-market","binary","ui.bootstrap"]).service("MarketTickerFilterService",Qs).component("marketTicker",{template:i(/*! ../../html/ticker/ticker-push.html */59),controller:Rs,bindings:{page:"@"}}).component("instrumentTicker",{template:i(/*! ../../html/ticker/instrument-ticker.html */60),controller:Bs,bindings:{page:"@"}}).component("bidsOffersItemInstrumentTicker",{template:i(/*! ../../html/ticker/bids-offers-item-instrument-ticker.html */61),controller:ta,bindings:{page:"@",symbol:"<",isShorterMode:"<"}}).component("instrumentTickerRow",{template:i(/*! ../../html/ticker/instrument-ticker-row.html */62),controller:xs,bindings:{ticker:"<"}}).component("equityTickerRow",{template:i(/*! ../../html/ticker/equity-ticker-row.html */63),controller:Fs,bindings:{index:"<",ticker:"<"}}).component("derivativesTickerRow",{template:i(/*! ../../html/ticker/derivatives-ticker-row.html */64),controller:Fs,bindings:{index:"<",ticker:"<"}}).component("marketTickerPage",{template:i(/*! ../../html/ticker/market-ticker-page.html */65),controller:ea,bindings:{page:"@"}}).component("marketTickerPageRow",{template:i(/*! ../../html/ticker/market-ticker-page-row.html */66),controller:Fs,bindings:{ticker:"<"}}).component("marketTickerPageRowWithChange",{template:i(/*! ../../html/ticker/market-ticker-page-row-with-change.html */67),controller:Fs,bindings:{ticker:"<"}});var ia=function(){function e(){}return e}(),ra=function(){function e(){}return e.Favourite="Favourite",e.MyPort="MyPort",e.Blank="Blank",e}(),na=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Sr),oa=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,t,l)||this;return u.pageService=t,u.favouriteService=i,u.$q=r,u.portfolioService=n,u.accountService=o,u.$scope=s,u.currentSymbolChangeEvent=a,u.userApplicationProfileService=c,u.screenTrackerService=l,u.bidsOffersRows=[],u.isThreeBidsOffers=!1,u.tempIsThreeBidsOffers=u.isThreeBidsOffers,u.isLoadingInstrument=!0,u}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.initialDropdownList(),this.setDefaultMode(),this.updateViewByCurrentMode()},t.prototype.stopService=function(){},t.prototype.initialDropdownList=function(){this.userApplicationProfileService.isSecondaryWindow?this.favouriteDropdownItemList=this.favouriteService.getFavouriteDropdownItemListWithHeaderAndMyPort():this.favouriteDropdownItemList=[this.createBlankModeDropdownItem()].concat(this.favouriteService.getFavouriteDropdownItemListWithHeaderAndMyPort())},t.prototype.setDefaultMode=function(){switch(this.currentMode){case ra.MyPort:case ra.Favourite:case ra.Blank:break;default:this.userApplicationProfileService.isSecondaryWindow?(this.currentMode=ra.Favourite,this.currentFavouriteDropdown=this.favouriteDropdownItemList[1]):(this.currentMode=ra.Blank,this.currentFavouriteDropdown=this.favouriteDropdownItemList[0])}},t.prototype.createBlankModeDropdownItem=function(){var e=new na;return e.key="blank",e.mode=ra.Blank,e.showName="Custom Lists",e.type=fr.DATA,e},t.prototype.getKey=function(e){return""+e.rowIndex+e.symbolFirst+e.symbolSecond+e.symbolThird},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.getAnalyticsScreenName=function(){return this.isThreeBidsOffers?ss.BIDS_OFFERS_THREE_BIDS:ss.BIDS_OFFERS_FIVE_BIDS},t.prototype.toggleShowingRowsBidsOffers=function(){this.isThreeBidsOffers=!this.isThreeBidsOffers,this.tempIsThreeBidsOffers=this.isThreeBidsOffers,this.updateViewByCurrentMode()},t.prototype.getClassRowHeight=function(){return this.isThreeBidsOffers?"three-bids":"five-bids"},t.prototype.onFavouriteChange=function(e){this.isLoadingInstrument=!0,e.mode===yr.FAVOURITE?this.currentMode=ra.Favourite:e.mode===yr.MY_PORT?this.currentMode=ra.MyPort:e.mode===ra.Blank?this.currentMode=ra.Blank:this.currentMode=null,this.currentFavouriteDropdown=e,this.updateViewByCurrentMode(),this.$scope.$broadcast("vsRepeatReCalculateScroll")},t.prototype.createBidsOffersRows=function(){var e=this;this.getInstrumentsByCurrentMode().then(function(t){e.bidsOffersRows=[],e.parseSymbolsIntoBidsOffersRows(t)})},t.prototype.updateViewByCurrentMode=function(){switch(this.currentMode){case ra.Favourite:this.createBidsOffersRows(),this.isThreeBidsOffers=this.tempIsThreeBidsOffers;break;case ra.MyPort:this.createBidsOffersRows(),this.isThreeBidsOffers=this.tempIsThreeBidsOffers;break;case ra.Blank:this.createBlankModeRows(),this.tempIsThreeBidsOffers=this.isThreeBidsOffers,this.isThreeBidsOffers=!0}this.changeToPage()},t.prototype.createBlankModeRows=function(){this.bidsOffersRows=[];for(var e=0;e<3;e++){var t=new ia;t.rowIndex=e,this.bidsOffersRows.push(t)}this.isLoadingInstrument=!1},t.prototype.getInstrumentsByCurrentMode=function(){var e=this;switch(this.currentMode){case ra.Favourite:var t=this.favouriteService.getFavouriteByListName(this.currentFavouriteDropdown.key),i=t.symbolList;return this.$q.resolve(i);case ra.MyPort:return this.portfolioService.getAllUniquePortfolioSymbolList(this.accountService.accountEquityList,this.accountService.accountDerivList).then(function(t){return e.$q.resolve(t)});default:return this.$q.reject()}},t.prototype.parseSymbolsIntoBidsOffersRows=function(e){for(var t=0,i=0,r=e.length;i<r;i+=3){var n=new ia,o=[];o=i+3<e.length?e.slice(i,i+3):e.slice(i,e.length),o[0]&&(n.symbolFirst=o[0]),o[1]&&(n.symbolSecond=o[1]),o[2]&&(n.symbolThird=o[2]),n.rowIndex=t,t++,this.bidsOffersRows.push(n)}this.isLoadingInstrument=!1},t.prototype.isContainAnySymbol=function(){return 0!==this.bidsOffersRows.length},t.prototype.isViewingFavourite=function(){return this.currentMode===ra.Favourite},t.prototype.isViewingMyPort=function(){return this.currentMode===ra.MyPort},t.prototype.isViewingBlank=function(){return this.currentMode===ra.Blank},t.$inject=["PageService","FavouriteService","$q","PortfolioService","AccountService","$scope","CurrentSymbolChangeEvent","UserApplicationProfileService","ScreenTrackerService"],
t}(Zs),sa=function(){function e(e){this.mmService=e,this.signals=new li,this.instruments=new ut}return e.prototype.subscribe=function(e,t,i){this.signals.add(this.generateKey(e,t),i)},e.prototype.unsubscribe=function(e,t,i){this.signals.remove(this.generateKey(e,t),i)},e.prototype.publish=function(e,t,i){this.signals.dispatch(this.generateKey(e,t),angular.copy(i))},e.prototype.setBidsOffersSymbolList=function(e){var t=this;e.map(function(e,i){var r=Math.floor(i/3),n=i%3;t.onInstrumentChange(r,n,e)})},e.prototype.onSymbolInputChange=function(e,t,i){this.onInstrumentChange(e,t,i),this.saveNewBidsOffersSymbolList()},e.prototype.saveNewBidsOffersSymbolList=function(){var e=this,t=new _r;t.bidsOffersSymbolList=[];var i=this.instruments.getAllKeys();i.forEach(function(i,r){var n=e.instruments.value(i);n&&t.bidsOffersSymbolList.push(n.name)}),this.mmService.requestSaveBidsOffersSymbolList(t)},e.prototype.onInstrumentChange=function(e,t,i){this.instruments.add(this.generateKey(e,t),i),this.publish(e,t,i)},e.prototype.generateKey=function(e,t){return"bidsoffers"+e+"-"+t},e.$inject=["MMService"],e}(),aa=function(){function e(){}return e.prototype.isItemIndexValid=function(e){switch(e){case 1:return void 0!==this.symbolList.symbolFirst;case 2:return void 0!==this.symbolList.symbolSecond;case 3:return void 0!==this.symbolList.symbolThird}},e.prototype.$onChanges=function(e){},e}(),ca=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this,i)||this;return c.infoPubsub=t,c.pageService=i,c.instrumentService=r,c.colorService=n,c.currentSymbolChangeEvent=o,c.piwikService=s,c.bidsOffersViewModeStore=a,c.onRecieveInfoCallback=c.onRecieveInfo.bind(c),c.currentSymbol=void 0,c.isSubscribed=!1,c.bidOffer=new ht,c.overview=new xi,c}return ne(t,e),t.prototype.startService=function(){this.symbol&&(this.currentSymbol=this.symbol,this.subscribeCurrentSymbol()),this.currentBidsOffersItemViewMode=this.bidsOffersViewModeStore.getViewMode(this.listShowName,this.rowIndex,this.colIndex)},t.prototype.stopService=function(){this.unsubscribeCurrentSymbol()},t.prototype.viewDidLoad=function(){},t.prototype.isShowBidsOffersViewMode=function(){return this.currentBidsOffersItemViewMode===da.BidsOffers},t.prototype.isShowTickerViewMode=function(){return this.currentBidsOffersItemViewMode===da.Ticker},t.prototype.setViewMode=function(e){this.currentBidsOffersItemViewMode=e,this.bidsOffersViewModeStore.setViewMode(this.listShowName,this.rowIndex,this.colIndex,e)},t.prototype.subscribeCurrentSymbol=function(){this.infoPubsub.subscribe(this.currentSymbol,Hr.Market,this.onRecieveInfoCallback)},t.prototype.unsubscribeCurrentSymbol=function(){this.currentSymbol&&this.infoPubsub.unsubscribe(this.currentSymbol,this.onRecieveInfoCallback)},t.prototype.onRecieveInfo=function(e){this.overview=Fi.parse(e,this.overview),this.overview&&(this.overview.tsLevel=this.instrumentService.getTSLevel(this.currentSymbol)),this.bidOffer=Cl.parseBidOffer(e,this.bidOffer,this.totalVolume),this.totalVolume=Cl.parseTotalVolume(e,this.totalVolume)},t.prototype.getBidOfferCategory=function(){return rt.BIDS_OFFERS},t.prototype.$onChanges=function(e){},t.prototype.getSymbolName=function(){return this.currentSymbol?this.currentSymbol:""},t.prototype.getDisplaySymbol=function(){return".MAI"===this.symbol?".mai":this.symbol},t.prototype.syncSymbol=function(){var e=this;this.instrumentService.searchSymbol(this.currentSymbol,Qe.ALL).then(function(t){e.currentSymbolChangeEvent.publish(t),e.piwikService.eventTrack(nt.CLICK_SYMBOL,e.getBidOfferCategory())})},t.$inject=["InstrumentInfoPublishSubscriber","PageService","InstrumentService","ColorService","CurrentSymbolChangeEvent","PiwikService","BidsOffersViewModeStore"],t}(ys),la=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t)||this;return l.pageService=t,l.instrumentService=i,l.infoPubsub=r,l.bidsOffersPageService=n,l.colorService=o,l.userApplicationProfileService=s,l.piwikService=a,l.bidsOffersViewModeStore=c,l.onRecieveInfoCallback=l.onRecieveInfo.bind(l),l.onSymbolForThisItemChangeCallBack=l.onSymbolForThisItemChange.bind(l),l.currentSymbol=dt.empty(),l.clearBidOffer(),l}return ne(t,e),t.prototype.startService=function(){this.bidsOffersPageService.subscribe(this.rowIndex,this.colIndex,this.onSymbolForThisItemChangeCallBack),this.currentBidsOffersItemViewMode=this.bidsOffersViewModeStore.getViewMode(this.listShowName,this.rowIndex,this.colIndex)},t.prototype.stopService=function(){this.bidsOffersPageService.unsubscribe(this.rowIndex,this.colIndex,this.onSymbolForThisItemChangeCallBack),this.unsubscribeCurrentSymbol()},t.prototype.viewDidLoad=function(){},t.prototype.isShowBidsOffersViewMode=function(){return this.currentBidsOffersItemViewMode===da.BidsOffers},t.prototype.isShowTickerViewMode=function(){return this.currentBidsOffersItemViewMode===da.Ticker},t.prototype.setViewMode=function(e){this.currentBidsOffersItemViewMode=e,this.bidsOffersViewModeStore.setViewMode(this.listShowName,this.rowIndex,this.colIndex,e)},t.prototype.onSubmitSymbol=function(e){this.bidsOffersPageService.onSymbolInputChange(this.rowIndex,this.colIndex,e),this.userApplicationProfileService.setCurrentSymbol(e),this.piwikService.eventTrack(nt.FILL_SYMBOL,rt.BIDS_OFFERS)},t.prototype.onDeleteSymbol=function(){this.bidsOffersPageService.onSymbolInputChange(this.rowIndex,this.colIndex,dt.empty()),this.clearBidOffer()},t.prototype.onSymbolForThisItemChange=function(e){this.currentSymbol.isEmpty()||this.unsubscribeCurrentSymbol(),this.currentSymbol=e,e.isEmpty()||this.subscribeCurrentSymbol()},t.prototype.subscribeCurrentSymbol=function(){this.infoPubsub.subscribe(this.currentSymbol.name,Hr.Market,this.onRecieveInfoCallback)},t.prototype.unsubscribeCurrentSymbol=function(){this.currentSymbol&&this.infoPubsub.unsubscribe(this.currentSymbol.name,this.onRecieveInfoCallback)},t.prototype.onRecieveInfo=function(e){this.overview=Fi.parse(e,this.overview),this.overview&&(this.overview.tsLevel=this.instrumentService.getTSLevel(this.currentSymbol.name)),this.bidOffer=Cl.parseBidOffer(e,this.bidOffer,this.totalVolume),this.totalVolume=Cl.parseTotalVolume(e,this.totalVolume)},t.prototype.getSymbolName=function(){return this.currentSymbol?this.currentSymbol.name:""},t.prototype.clearBidOffer=function(){this.overview=new xi,this.bidOffer=new ht,this.totalVolume=void 0},t.$inject=["PageService","InstrumentService","InstrumentInfoPublishSubscriber","BidsOffersPageService","ColorService","UserApplicationProfileService","PiwikService","BidsOffersViewModeStore"],t}(ys),ua=function(){function e(){}return e}(),da=function(){function e(){}return e.BidsOffers="BidsOffers",e.Ticker="Ticker",e}(),ha=function(){function e(){this.viewModeList=new ut(da.BidsOffers)}return e.prototype.getViewMode=function(e,t,i){var r=""+e+t+i;return this.viewModeList.value(r)},e.prototype.setViewMode=function(e,t,i,r){var n=""+e+t+i;this.viewModeList[n]=r},e}(),pa=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i,r,n,o)||this;return s.$element=t,s.$window=i,s.$scope=r,s.uiComponentsEventEmitter=n,s.$rootScope=o,s.BIDS_OFFERS_MODE=da.BidsOffers,s.TICKER_MODE=da.Ticker,s.isShowDropdownMode=!1,s}return ne(t,e),t.prototype.shouldShowComponent=function(){this.isShowDropdownMode=!0},t.prototype.shouldHideComponent=function(){this.isShowDropdownMode=!1},t.prototype.changeMode=function(e){this.onChangeMode&&this.onChangeMode({newMode:e}),this.isShowDropdownMode=!1},t.$inject=["$element","$window","$scope","UIComponentsEventEmitter","$rootScope"],t}(je);angular.module("bids-offers",["new-realtime-config","number-formatter","color-formatter","multi-market","binary"]).service("BidsOffersPageService",sa).service("BidsOffersViewModeStore",ha).component("bidsOffersPage",{template:i(/*! ../../html/bids-offers/bids-offers-page.html */68),controller:oa,bindings:{page:"@"}}).component("bidsOffersRow",{template:i(/*! ../../html/bids-offers/bids-offers-row.html */69),controller:aa,bindings:{symbolList:"<",isThreeBidsOffers:"<",page:"@",listShowName:"<"}}).component("bidsOffersBlankRow",{template:i(/*! ../../html/bids-offers/bids-offers-blank-row.html */70),controller:ua,bindings:{symbolList:"<",isThreeBidsOffers:"<",page:"@",listShowName:"<"}}).component("bidsOffersItem",{template:i(/*! ../../html/bids-offers/bids-offers-item.html */71),controller:ca,bindings:{symbol:"<",isThreeBidsOffers:"<",page:"@",listShowName:"<",rowIndex:"<",colIndex:"<"}}).component("bidsOffersBlankItem",{template:i(/*! ../../html/bids-offers/bids-offers-blank-item.html */72),controller:la,bindings:{isThreeBidsOffers:"<",rowIndex:"<",colIndex:"<",page:"@",canClear:"<",listShowName:"<"}}).component("bidsOffersModeDropdown",{template:i(/*! ../../html/bids-offers/bids-offers-mode-dropdown.html */73),controller:pa,bindings:{onChangeMode:"&",currentMode:"<"}});var ma=function(){function e(e,t,i,r,n){this.$timeout=e,this.$interval=t,this.streamingAttribute=i,this.senseAPIService=r,this.accountService=n,this.WAIT_FOR_COUNT_INTERVAL=5e3,this.currentSymbolCountMap={},this.equityPortfolioMap={}}return e.prototype.initialUpdateScoreTimer=function(){this.startUpdateCurrentSymbolScoreTimer(),this.startUpdateEquityPortfolioScoreTimer()},e.prototype.addCurrentSymbol=function(e){var t=this;e.name!==this.countingSymbol&&(this.resetCountCurrentSymbolTimer(),this.countingSymbol=e.name,this.countCurrentSymbolTimer=this.$timeout(function(){void 0===t.currentSymbolCountMap[e.name]?t.currentSymbolCountMap[e.name]=1:t.currentSymbolCountMap[e.name]++},this.WAIT_FOR_COUNT_INTERVAL))},e.prototype.resetCountCurrentSymbolTimer=function(){this.countCurrentSymbolTimer&&(this.$timeout.cancel(this.countCurrentSymbolTimer),this.countCurrentSymbolTimer=null)},e.prototype.updateScoreWithEquityPortfolio=function(e,t){var i=[];t.forEach(function(e){var t=e.symbol+e.nvdrFlag;i.push(t.trim())});var r=new Bo;r.accountNo=e.accountNo,r.frontType=e.frontType,r.portSymbols=i,this.equityPortfolioMap[e.accountNo]=r},e.prototype.updateScoreWithAllEquityAccount=function(){var e=[];this.accountService.accountEquityList.forEach(function(t){e.push({accountNo:t.accountNo,systemId:"ITP"})});var t={accountList:e};this.senseAPIService.requestUpdateAccountScore(t)},e.prototype.startUpdateCurrentSymbolScoreTimer=function(){var e=this;this.dispatchUpdateCurrentSymbolMapTimer=this.$interval(function(){var t={};t.action={searchFrequency:e.currentSymbolCountMap,clickFrequency:{}},e.senseAPIService.requestUpdateCurrentSymbolScore(t),e.currentSymbolCountMap={}},this.senseDispatchTime)},e.prototype.startUpdateEquityPortfolioScoreTimer=function(){var e=this;this.dispatchUpdateCurrentSymbolMapTimer=this.$interval(function(){var t=[];for(var i in e.equityPortfolioMap)e.equityPortfolioMap.hasOwnProperty(i)&&(t.push(e.equityPortfolioMap[i]),delete e.equityPortfolioMap[i]);e.senseAPIService.requestUpdatePortScore(t),e.equityPortfolioMap={}},this.senseDispatchTime)},e.$inject=["$timeout","$interval","StreamingAttribute","SenseAPIService","AccountService"],e}(),va=function(){function e(e,t,i,r,n,o,s){this.currentSymbolChangeEvent=e,this.$timeout=t,this.userInfoService=i,this.mmService=r,this.senseService=n,this.instrumentService=o,this.senseAnalyticsService=s,this.lastSelectedSymbolList=[],this.acceptMultiOrderDisclaimer=!1,this.predefinedClickVolumeEquity=[new Yi,new Yi,new Yi,new Yi,new Yi],this.predefinedClickVolumeDerivatives=[new Yi,new Yi,new Yi,new Yi,new Yi],this.isSecondaryWindow=!1,this.isEnableTrackPageAndEvent=!1}return e.prototype.setCurrentSymbol=function(e,t,i){var r=this,n=new dt(e.name,e.type,e.underlying);this.currentSymbolChangeEvent.publish(n,t,i),this.senseService.addCurrentSymbol(n),this.changeSymbolTimeout&&this.$timeout.cancel(this.changeSymbolTimeout),this.changeSymbolTimeout=this.$timeout(function(){r.senseAnalyticsService.trackChangeSymbol(n.name)}.bind(this),5e3)},e.prototype.getLastSelectedSymbolListByMarket=function(e){var t=[],i=[];switch(e){case Qe.EQUITY:t=this.lastSelectedSymbolList.filter(function(e){return e.isEquity()});break;case Qe.DERIVATIVE:t=this.lastSelectedSymbolList.filter(function(e){return e.isDerivatives()})}return t.forEach(function(e){i.push(e.name)}),i.slice(0,5)},e.prototype.getLastSelectedSymbolListByBrokerLicense=function(){var e=[],t=[];return e=this.userInfoService.isEquityOnly?this.lastSelectedSymbolList.filter(function(e){return e.isEquity()||e.isIndex()}):this.userInfoService.isDerivativesOnly?this.lastSelectedSymbolList.filter(function(e){return e.isDerivatives()||e.isIndex()}):this.lastSelectedSymbolList,e.forEach(function(e){t.push(e.name)}),t.slice(0,5)},e.prototype.getLastSelectedEquitySymbolListWithIndex=function(e){var t=[],i=this.lastSelectedSymbolList.filter(function(t){return t.isEquity()||e.indexOf(t.name)>=0});return i.forEach(function(e){t.push(e.name)}),t.slice(0,5)},e.prototype.getLastSelectedSymbolListWithOutIndexByBrokerLicense=function(){var e=[],t=[];return e=this.userInfoService.isEquityOnly?this.lastSelectedSymbolList.filter(function(e){return e.isEquity()}):this.userInfoService.isDerivativesOnly?this.lastSelectedSymbolList.filter(function(e){return e.isDerivatives()}):this.lastSelectedSymbolList.filter(function(e){return e.isEquity()||e.isDerivatives()}),e.forEach(function(e){t.push(e.name)}),t.slice(0,5)},e.prototype.getLastSelectedSymbolListByStopSymbol=function(){var e=this.instrumentService.filterStopSymbolList(this.lastSelectedSymbolList);return e.slice(0,5)},e.prototype.getLastSelectedSymbolListByUnderying=function(e){var t=[];return this.lastSelectedSymbolList.forEach(function(i){i.underlying===e&&t.push(i.name),i.isOptions()&&"SET50"===e&&t.push(i.name)}),t},e.prototype.addLastSearchSymbol=function(e){this.lastSelectedSymbolList=this.lastSelectedSymbolList.filter(function(t){return t.name!==e.name}),this.lastSelectedSymbolList.length+1>=20&&this.lastSelectedSymbolList.pop(),this.lastSelectedSymbolList.unshift(e),this.lastSelectedSymbolTimeout||(this.lastSelectedSymbolTimeout=this.$timeout(this.onLastSearchSymbolTimeoutComplete.bind(this),5e3))},e.prototype.onLastSearchSymbolTimeoutComplete=function(){var e=new Rr;e.lastSelectedSymbolList=[],this.lastSelectedSymbolList.forEach(function(t){e.lastSelectedSymbolList.push(t.name)}),this.mmService.requestSaveLastSelectedSymbolList(e),this.lastSelectedSymbolTimeout=void 0},e.$inject=["CurrentSymbolChangeEvent","$timeout","UserInfoService","MMService","SenseService","InstrumentService","SenseAnalyticsService"],e}(),fa=function(){function e(){this.isEnable=!1}return e}(),ya=function(){function e(){}return e.NORMAL="normal",e.TFEX="tfex",e.CLICK="click",e}(),ga=function(){function e(e){this.$window=e,this.MAIN_PAGE_EVENT="main_page",this.SUB_PAGE_EVENT="sub_page",this.PLACE_ORDER_EQUITY_EVENT="placeorder_equity",this.PLACE_ORDER_DERIVATIVES_EVENT="placeorder_derivatives",this.isEnable=!1}return e.prototype.init=function(){this.isEnable=!0,this.FB=this.$window.FB},e.prototype.pageTrack=function(e){try{this.isEnable&&this.FB.AppEvents.logEvent(this.MAIN_PAGE_EVENT,null,{page_id:e})}catch(t){console.warn("FB service Error:pageTrack"),console.warn(t)}},e.prototype.subPageTrack=function(e,t){try{this.isEnable&&this.FB.AppEvents.logEvent(this.SUB_PAGE_EVENT,null,{page_id:e,subpage_id:t})}catch(i){console.warn("FB service Error:subPageTrack"),console.warn(i)}},e.prototype.placeOrderEquityTrack=function(e,t){try{this.isEnable&&this.FB.AppEvents.logEvent(this.PLACE_ORDER_EQUITY_EVENT,null,{page_id:e,source:t})}catch(i){console.warn("FB service Error:placeOrderEquityTrack"),console.warn(i)}},e.prototype.placeOrderDerivativesTrack=function(e,t){try{this.isEnable&&this.FB.AppEvents.logEvent(this.PLACE_ORDER_DERIVATIVES_EVENT,null,{page_id:e,source:t})}catch(i){console.warn("FB service Error:placeOrderDerivativesTrack"),console.warn(i)}},e.$inject=["$window"],e}(),Sa=function(){function e(){this.data=new ut(null)}return e}(),ba=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.publish=function(e){this.signal.dispatch(angular.copy(e))},e}(),Ca=function(){function e(e,t,i,r,n,o,s,a,c,l,u){this.$uibModal=e,this.$q=t,this.itpService=i,this.mongoService=r,this.allNotificationSettingChangeEvent=n,this.orderEntrySettingChangeEvent=o,this.displaySettingChangeEvent=s,this.$document=a,this.userInfoService=c,this.accountService=l,this.keyboardShortcutSettingChangeEvent=u,this.accountShortcutConfiguration=new Sa,this.displayConfiguration=new Tr,this.modalLayerElement=this.$document.find("modal-layer").eq(0),this.initialDefaultKeyboardShortcutConfiguration()}return e.prototype.initialAllNotificationSettingConfiguration=function(e){this.allNotificationConfiguration=e,this.allNotificationSettingChangeEvent.publish(e)},e.prototype.initialOrderEntryConfiguration=function(e){this.orderEntryConfiguration=new _a;var t=new Ba;t.accountNo=e.defaultAccountConfiguration.accountNo,t.enableDefaultAccount=e.defaultAccountConfiguration.enableDefaultAccount,t.systemType=e.defaultAccountConfiguration.systemType===bi.EQUITY?mi.EQUITY:mi.DERIVATIVES,this.orderEntryConfiguration.defaultAccountConfiguration=t;var i=new Va(e.autoNVDRConfiguration.enable);this.orderEntryConfiguration.autoNVDRConfiguration=i,this.orderEntryConfiguration.defaultOrderPosition=this.parseUserDefaultPosition(this.accountService.getDefaultDerivativesAccount(),e.defaultOrderPosition),this.orderEntrySettingChangeEvent.publish(this.orderEntryConfiguration)},e.prototype.initialDisplayConfiguration=function(e){this.displayConfiguration=new Tr,this.displayConfiguration.isWideScreen=e.isWideScreen,this.displayConfiguration.isTechnicalChartFullScreen=e.isTechnicalChartFullScreen,this.displayConfiguration.isFontBold=e.isFontBold,this.displayConfiguration.fontSize=e.fontSize,this.displayConfiguration.isBasicMode=e.isBasicMode,this.displaySettingChangeEvent.publish(this.displayConfiguration)},e.prototype.initialAccountShortcutConfiguration=function(e){var t=this;this.accountShortcutConfiguration=new Sa,e.accountShortcuts.forEach(function(e){t.accountShortcutConfiguration.data.add(e.shortcut,e.value)})},e.prototype.initialDefaultKeyboardShortcutConfiguration=function(){this.keyboardShortcutConfiguration=new fa,this.keyboardShortcutConfiguration.isEnable=!1},e.prototype.initialKeyboardShortcutConfiguration=function(e){this.keyboardShortcutConfiguration=new fa,this.keyboardShortcutConfiguration.isEnable=e.isEnable,this.keyboardShortcutSettingChangeEvent.publish(this.keyboardShortcutConfiguration)},e.prototype.openSettingsModal=function(){return this.$uibModal.open({animation:!1,backdrop:!1,template:i(/*! ../../html/settings/settings-modal.html */74),controller:"SettingsController",controllerAs:"settingsCtrl",windowClass:"modal-settings",appendTo:this.modalLayerElement,resolve:{}}).result.then(function(){})},e.prototype.getWhatsNewInfo=function(){var e=this;return void 0!==this.whatsNewsInfo?this.$q.resolve(this.whatsNewsInfo):this.itpService.getWhatsNew().then(function(t){return e.whatsNewsInfo=t,e.$q.resolve(t)},function(){return e.$q.reject()})},e.prototype.updateAllNotificationSettings=function(e){var t=this;this.allNotificationConfiguration=angular.copy(e),this.mongoService.updateAllNotificationSettings(this.allNotificationConfiguration)["finally"](function(){t.allNotificationSettingChangeEvent.publish(t.allNotificationConfiguration)})},e.prototype.updateOrderEntrySettings=function(e){var t=this;this.orderEntryConfiguration=e;var i=this.generateRequestUpdateOrderEntry(e);this.mongoService.updateOrderEntrySettings(i)["finally"](function(){t.orderEntrySettingChangeEvent.publish(e)})},e.prototype.generateRequestUpdateOrderEntry=function(e){var t=new Uo;return t.defaultAccountConfiguration={accountNo:e.defaultAccountConfiguration.accountNo,systemType:e.defaultAccountConfiguration.systemType===mi.EQUITY?bi.EQUITY:bi.DERIVATIVES,enableDefaultAccount:e.defaultAccountConfiguration.enableDefaultAccount},t.autoNVDRConfiguration=e.autoNVDRConfiguration,t.defaultOrderPosition=e.defaultOrderPosition.shortname,t},e.prototype.updateDisplaySetting=function(e){return this.displayConfiguration=e,this.mongoService.updateDisplaySetting(e)},e.prototype.updateKeyboardShortcutSettings=function(e){return this.keyboardShortcutConfiguration=e,this.keyboardShortcutSettingChangeEvent.publish(e),this.mongoService.updateKeyboardShortcutSetting(e)},e.prototype.updateAccountShortcutsSetting=function(e){return this.accountShortcutConfiguration=e,this.mongoService.updateAccountShortcut(this.generateRequestUpdateAccountShortcut(e))},e.prototype.generateRequestUpdateAccountShortcut=function(e){var t=[],i=e.data.getAllKeys();i.forEach(function(i){if(""!==e.data.value(i)){var r=new jo;r.shortcut=i,r.value=e.data.value(i),t.push(r)}});var r=new qo;return r.accountShortcuts=t,r},e.prototype.getApplicationDefaultPositionByPermission=function(e){return e.hasAutoNet?Ye.OPEN_CLOSE:this.userInfoService.enableAutoPosition?Ye.AUTO:Ye.OPEN},e.prototype.getVerifiedUserDefaultPosition=function(e,t){return e.hasAutoNet?Ye.OPEN_CLOSE:this.userInfoService.enableAutoPosition?t:t===Ye.AUTO?Ye.OPEN:t},e.prototype.parseUserDefaultPosition=function(e,t){var i=Ye.lookup[t];return i===Ye.NONE||void 0===i?this.getApplicationDefaultPositionByPermission(e):this.getVerifiedUserDefaultPosition(e,i)},e.prototype.getDisclaimerMessage=function(){return this.mongoService.getDisclaimer().then(function(e){return e.message})},e.$inject=["$uibModal","$q","ITPService","MongoService","AllNotificationSettingChangeEvent","OrderEntrySettingChangeEvent","DisplaySettingChangeEvent","$document","UserInfoService","AccountService","KeyboardShortcutSettingChangeEvent"],e}(),Ea=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.dispatchEvent=function(e){this.signal.dispatch(e)},e}(),Aa=function(){function e(e,t,i,r,n,o,s,a,c){this.piwikService=e,this.settingsService=t,this.$timeout=i,this.pageService=r,this.pageRating=n,this.processMenuEvent=o,this.facebookService=s,this.gaService=a,this.screenTrackerService=c,this.MAX_SHOWING_MENU=11,this.onProcessMenuCompleteCallback=this.onProcessMenuComplete.bind(this),this.menuList=new ut,this.page=new Ui,this.pageElement={},this.isMenuListReady=!1,this.processMenuEvent.subscribe(this.onProcessMenuCompleteCallback)}return e.prototype.reactiveCurrentDisplayPage=function(){this.activatePage(this.displayPage)},e.prototype.onProcessMenuComplete=function(e){var t=this;void 0!==e&&(e.allMenuList.forEach(function(e){t.menuList.add(e.id,e)}),this.showNormalMenuList=e.showNormalMenuList,this.showMoreMenuList=e.showMoreMenuList,this.isMenuListReady=!0,this.reactiveCurrentDisplayPage())},e.prototype.activatePage=function(e){if(void 0!==e&&!this.isShowing(e)){if(!this.isMenuListReady)return void(this.displayPage=e);var t=this.isInNormalMenu(e),i=this.isInMoreMenu(e);e!==Ui.SETTINGS&&(t?this.isMenuInMoreActive=!1:i&&(this.isMenuInMoreActive=!0)),this.switchToPage(e)}},e.prototype.switchToPage=function(e){var t=this;switch(this.timeOutPromise&&this.$timeout.cancel(this.timeOutPromise),e){case Ui.SETTINGS:this.settingsService.openSettingsModal();break;case Ui.RATING:this.openRatingPage();break;case Ui.VIEW_ALL_ORDERS:case Ui.MULTI_ORDER:this.changeDisplayPage(e),this.pageService.switchToPage(e);break;default:this.changeDisplayPage(e);var i=this.showPage(e);if(!i)return;this.timeOutPromise=this.$timeout(function(){t.pageService.switchToPage(e)},200),this.hidePlaceOrderComponent=this.getIsHidePlaceOrderComponent(e),this.showAllOrder=!1,this.showMultiOrder=!1,this.selectedPage=e,this.trackChangeToScreen(e)}this.piwikService.pageTrack(this.getMenuName(e)),this.facebookService.pageTrack(this.getMenuName(e))},e.prototype.trackChangeToScreen=function(e){var t=this.getMenuName(e);"Market"===t&&this.screenTrackerService.changeToScreen(ss.MARKET,[],null)},e.prototype.getPageId=function(e){var t=this,i=this.menuList.getAllKeys(),r="0";return i.some(function(i){var n=t.menuList.value(i);if(n.name===e)return r=n.id,!0}),r},e.prototype.showPage=function(e){var t=this.getElement(e);return!!t&&(t.removeClass("hide"),!0)},e.prototype.hidePage=function(e){var t=this.getElement(e);t&&t.addClass("hide")},e.prototype.isShowing=function(e){var t=this.getElement(e);return void 0!==t&&!t.hasClass("hide")},e.prototype.getElement=function(e){if(!this.pageElement[e]){var t=this.getRealDomElementByAngular("#page-"+e+"-container"),i=t.length;i>0&&(this.pageElement[e]=t)}return this.pageElement[e]},e.prototype.getRealDomElementByAngular=function(e){return angular.element(document.querySelector(""+e))},e.prototype.getMenuName=function(e){return e=""+e,this.page[e]?this.page[e]:this.menuList.value(e)?this.menuList.value(e).name:void 0},e.prototype.getKeyName=function(e){return e=""+e,this.page[e]?this.page[e]:this.menuList.value(e)?this.menuList.value(e).key:void 0},e.prototype.getCurrentMenuName=function(){return this.getMenuName(this.selectedPage)},e.prototype.isInNormalMenu=function(e){if(void 0!==this.showNormalMenuList){var t,i=this.showNormalMenuList.some(function(i,r){return t=r,i.id===e});return i?this.showNormalMenuList[t]:void 0}},e.prototype.isInMoreMenu=function(e){if(void 0!==this.showMoreMenuList){var t,i=this.showMoreMenuList.some(function(i,r){return t=r,i.id===e});return i?this.showMoreMenuList[t]:void 0}},Object.defineProperty(e.prototype,"isMenuInMoreActive",{get:function(){return this._moreMenuIsActive},set:function(e){e||(this.selectedInMoreMenuList=this.showMoreMenuList.length>0?this.showMoreMenuList[0]:void 0),this._moreMenuIsActive=e},enumerable:!0,configurable:!0}),e.prototype.openRatingPage=function(){this.pageRating.open()},e.prototype.changeDisplayPage=function(e){void 0!==this.displayPage&&this.hidePage(this.displayPage),this.displayPage=e},e.prototype.getIsHidePlaceOrderComponent=function(e){return this.menuList.value(e).hidePlaceOrder},e.prototype.toggleViewAllOrder=function(){this.showAllOrder=!this.showAllOrder,this.showAllOrder?this.activatePage(Ui.VIEW_ALL_ORDERS):this.activatePage(this.selectedPage)},e.prototype.toggleMultiOrder=function(){this.showMultiOrder=!this.showMultiOrder,this.showMultiOrder?this.activatePage(Ui.MULTI_ORDER):this.activatePage(this.selectedPage)},e.prototype.isDisplayPage=function(e){return e=""+e,this.displayPage===e},e.prototype.isDisplayViewAllOrders=function(){return this.isDisplayPage(Ui.VIEW_ALL_ORDERS)},e.prototype.isExpandOrder=function(){return this.isDisplayViewAllOrders()||this.showMultiOrder},e.prototype.isShowPlaceOrder=function(){return!this.hidePlaceOrderComponent},e.prototype.isShowAllOrder=function(){return this.showAllOrder},e.prototype.isShowMultiOrder=function(){return this.showMultiOrder},e.prototype.isMenuActive=function(e){return e=""+e,this.selectedPage===e},Object.defineProperty(e.prototype,"currentDisplayPage",{get:function(){return this.displayPage},enumerable:!0,configurable:!0}),e.$inject=["PiwikService","SettingsService","$timeout","PageService","PageRating","ProcessMenuEvent","FacebookService","GAService","ScreenTrackerService"],e}(),wa=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(){this.signal.dispatch("")},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),Ta=function(){function e(e,t,i,r,n){this.mmService=e,this.userInfoService=t,this.alertService=i,this.$q=r,this.savePinChangeEvent=n}return e.prototype.validateAndSavePin=function(e){var t=this;this.validatePin(e).then(function(){return t.alertService.showSavePinDisclaimerAlert().then(function(){t.pin=e,t.savePinChangeEvent.publish()})},function(e){t.alertService.showErrorAlert(e).then(function(){t.pin="",t.savePinChangeEvent.publish()})})},e.prototype.validatePin=function(e){var t=this;if(void 0===e||null===e||0===e.length)return this.$q.reject("Please insert PIN.");var i=new kr;return i.pin=e,this.userInfoService.isDerivativesOnly&&(i.system="D"),this.mmService.requestValidatePin(i).then(function(e){var i=""===e.strMsg?"Pin validation failed.":e.strMsg;return"F"===e.result||"F"===e.data.result?t.$q.reject(i):t.$q.resolve("")})},e.prototype.isSavePin=function(){return void 0!==this.pin&&null!=this.pin&&this.pin.length>0},e.prototype.isNotSavePin=function(){return!this.isSavePin()&&this.userInfoService.isInvestor()},e.prototype.clearSavePin=function(){this.pin="",this.savePinChangeEvent.publish()},e.prototype.getPin=function(e){return this.isSavePin()?this.pin:e},e.prototype.getPinWhenClearForm=function(){return this.getPin(null)},e.$inject=["MMService","UserInfoService","AlertService","$q","SavePinChangeEvent"],e}(),Da=function(){function e(e,t,i){this.investorName=e,this.marketRepName=t,this.vipName=i}return e.prototype.getPageNameInvestor=function(){return this.investorName},e.prototype.getPageNameMarketrep=function(){return this.marketRepName},e.prototype.getPageNameVIP=function(){return this.vipName},e.prototype.isEqual=function(e){return this.investorName===e.investorName},e}(),Ia=function(){function e(){}return e.DISPLAY=new Da("Display","Display","Display"),e.NOTIFICATION=new Da("Sense & Notifications","Notifications","Notifications"),e.ORDER_ENTRY=new Da("Order Entry","Order Entry","Order Entry"),e.ACCOUNT_SHORTCUT=new Da("Account Shortcut","Account Shortcut","Account Shortcut"),e.KEYBOARD_SHORTCUT=new Da("Keyboard Shortcut","Keyboard Shortcut","Keyboard Shortcut"),e.TERMS_AND_CONDITIONS=new Da("Terms & Conditions","Terms & Conditions","Terms & Conditions"),e.OTHER_INFORMATION=new Da("Other Information","Other Information","Other Information"),e.ABOUT=new Da("About","About","About"),e.ALL_INVESTOR=[e.DISPLAY,e.NOTIFICATION,e.ORDER_ENTRY,e.KEYBOARD_SHORTCUT,e.TERMS_AND_CONDITIONS,e.OTHER_INFORMATION,e.ABOUT],e.ALL_MARKETREP=[e.DISPLAY,e.NOTIFICATION,e.ORDER_ENTRY,e.ACCOUNT_SHORTCUT,e.KEYBOARD_SHORTCUT,e.TERMS_AND_CONDITIONS,e.OTHER_INFORMATION,e.ABOUT],e.ALL_VIP=[e.DISPLAY,e.NOTIFICATION,e.ORDER_ENTRY,e.KEYBOARD_SHORTCUT,e.TERMS_AND_CONDITIONS,e.ABOUT],e}(),Pa=function(){function e(e,t,i){this.$uibModalInstance=e,this.userInfoService=t,this.screenTrackerService=i,this.activePage(Ia.DISPLAY),this.SETTINGS_PAGE_ID=Ia,this.userInfoService.isMarketRep()?this.allPages=Ia.ALL_MARKETREP:this.userInfoService.isVIP()?this.allPages=Ia.ALL_VIP:this.allPages=Ia.ALL_INVESTOR}return e.prototype.ok=function(){this.$uibModalInstance.close(),this.screenTrackerService.onCloseModal()},e.prototype.isMenuActive=function(e){return this.pageSetting.isEqual(e)},e.prototype.activePage=function(e){this.pageSetting=e;var t=this.getAnalyticsScreenName();this.screenTrackerService.onOpenModal(t,[],null)},e.prototype.getPageName=function(e){return this.userInfoService.isInvestor()?e.getPageNameInvestor():this.userInfoService.isMarketRep()?e.getPageNameMarketrep():this.userInfoService.isVIP()?e.getPageNameVIP():void 0},e.prototype.getAnalyticsTagName=function(){return[]},e.prototype.getAnalyticsProperties=function(){return null},e.prototype.getAnalyticsScreenName=function(){switch(this.pageSetting){case Ia.DISPLAY:return ss.SETTINGS_DISPLAY;case Ia.NOTIFICATION:return ss.SETTINGS_SENSE_NOTI;case Ia.ORDER_ENTRY:return ss.SETTINGS_ORDER_ENTRY;case Ia.KEYBOARD_SHORTCUT:return ss.SETTINGS_KEYBOARD_SHORTCUT;case Ia.TERMS_AND_CONDITIONS:return ss.SETTINGS_TERMS_CONDITIONS;case Ia.OTHER_INFORMATION:return ss.SETTINGS_OTHER_INFORMATION;case Ia.ABOUT:return ss.SETTINGS_ABOUT;default:return ss.SETTINGS_DISPLAY}},e.$inject=["$uibModalInstance","UserInfoService","ScreenTrackerService"],e}(),Oa=function(){function e(e,t,i,r){this.$location=e,this.$anchorScroll=t,this.settingService=i,this.$sce=r,this.startService()}return e.prototype.viewDidLoad=function(){},e.prototype.startService=function(){var e=this;this.settingService.getDisclaimerMessage().then(function(t){e.message=e.$sce.trustAsHtml(t);
})},e.prototype.stopService=function(){},e.prototype.gotoPrivacy=function(){this.$location.hash("privacy-policy"),this.$anchorScroll()},e.$inject=["$location","$anchorScroll","SettingsService","$sce"],e}(),ka=function(){function e(e){this.settingsService=e}return e.prototype.$onInit=function(){var e=this;this.settingsService.getWhatsNewInfo().then(function(t){e.whatsNewVersion=t.activeVersion;var i=t.message||"";e.whatsNewMessageList=i.split("\n")})},e.$inject=["SettingsService"],e}(),$a=function(){function e(e,t,i,r,n){this.userInfoService=e,this.streamingAttribute=t,this.$window=i,this.accountService=r,this.currentAccountChangeEvent=n,this.onAccountChangeCallBack=this.onAccountChange.bind(this),this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack)}return e.prototype.$onDestroy=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack)},e.prototype.onAccountChange=function(e){this.currentAccount=e},e.prototype.enableSurveillanceSecuritiesLink=function(){return!this.isDerivOnly()},e.prototype.onClickSurveillanceSecuritiesLink=function(){this.$window.open(this.streamingAttribute.itpHost+"/TurnoverListStocks.jsp?T2Level=1&T1Level=1","_blank","location=0,width=500,height=470,scrollbars=yes,resizable=1")},e.prototype.onClickOrderStatusLink=function(){this.$window.open(this.getOrderStatusLinkPath(),"_blank","location=0,width=500,height=665,scrollbars=yes,resizable=1")},e.prototype.getOrderStatusLinkPath=function(){return this.isDerivOnly()?this.streamingAttribute.derivHost+"/Derivatives/OrderStatusMeaning.jsp":this.streamingAttribute.itpHost+"/OrderStatusMeaning.jsp"},e.prototype.isEquityOnly=function(){return this.isEquityOnlyInvestor()||this.isEquityOnlyMarketRep()},e.prototype.isEquityOnlyInvestor=function(){return this.userInfoService.isInvestor()&&0===this.accountService.accountDerivList.length},e.prototype.isEquityOnlyMarketRep=function(){return this.userInfoService.isMarketRep()&&!this.userInfoService.hasMarketRepDerivatives&&this.userInfoService.hasMarketRepEquity},e.prototype.isDerivOnly=function(){return this.isDerivOnlyInvestor()||this.isDerivOnlyMarketRep()},e.prototype.isDerivOnlyMarketRep=function(){return this.userInfoService.isMarketRep()&&this.userInfoService.hasMarketRepDerivatives&&!this.userInfoService.hasMarketRepEquity},e.prototype.isDerivOnlyInvestor=function(){return this.userInfoService.isInvestor()&&0===this.accountService.accountEquityList.length},e.prototype.enablePositionLimitLink=function(){return this.isInvestorDerivAndSEOSDAccount()||this.userInfoService.isMarketRep()&&this.userInfoService.hasMarketRepDerivatives},e.prototype.isInvestorDerivAndSEOSDAccount=function(){return this.userInfoService.isInvestor()&&this.accountService.accountDerivList.length>0&&this.isDerivSEOSDAccount()},e.prototype.isDerivSEOSDAccount=function(){return this.accountService.accountDerivList[0].frontType===fi.SEOSD},e.prototype.onClickCircuitBreakerLink=function(){this.$window.open(this.streamingAttribute.itpHost+"/Derivatives/helpPage/helpPageCircuitBreakerT.html","_blank","location=0,width=650,height=500,resizable=1,scrollbars=yes")},e.prototype.enableMarginRateLink=function(){return!this.isEquityOnly()},e.prototype.onClickMarginRateLink=function(){var e="";e=this.userInfoService.isMarketRep()?this.streamingAttribute.derivHost+"/Derivatives/C16_MarginContract.jsp":this.streamingAttribute.derivHost+"/Derivatives/C15_MarginContract.jsp",this.$window.open(e,"_blank","location=0,width=720,height=420,resizable=1,scrollbars=1")},e.prototype.getAccountNoPositionLimit=function(){return!this.enablePositionLimitLink()||this.isMarketRepAndCurrentAccountIsEquity()||this.isMarketRepNoLastDerivativeAccount()?"":this.isInverstorAndCurrentAccountIsEquity()?this.accountService.accountDerivList[0].accountNo:this.currentAccountChangeEvent.getLatestDerivativesAccount().accountNo},e.prototype.hasLatestDerivativesAccount=function(){var e=this.currentAccountChangeEvent.getLatestDerivativesAccount();return void 0!==e&&!e.isEmptyAccount},e.prototype.isInverstorAndCurrentAccountIsEquity=function(){return!this.hasLatestDerivativesAccount()&&this.userInfoService.isInvestor()},e.prototype.isMarketRepNoLastDerivativeAccount=function(){return!this.hasLatestDerivativesAccount()&&this.userInfoService.isMarketRep()},e.prototype.isMarketRepAndCurrentAccountIsEquity=function(){return this.currentAccount.isEquity()&&this.userInfoService.isMarketRep()},e.prototype.onClickPositionLimitLink=function(){this.$window.open(this.streamingAttribute.derivHost+"/Derivatives/C16_PositionLimit.jsp?accountNo="+this.getAccountNoPositionLimit(),"_blank","location=0,width=650,height=520,resizable=1,scrollbars=yes")},e.prototype.enableMultiOrderEquityLink=function(){return!this.isDerivOnly()},e.prototype.onClickMultiOrderEquityLink=function(){this.$window.open(this.streamingAttribute.itpHost+"/helpPageMultiOrder.html","_blank","location=0,width=650,height=520,resizable=1,scrollbars=yes")},e.prototype.enableMultiOrderEquityDerivativesLink=function(){return!this.isEquityOnly()},e.prototype.onClickMultiOrderDerivativesLink=function(){this.$window.open(this.streamingAttribute.derivHost+"/Derivatives/helpPageMultiOrderDeriv.html","_blank","location=0,width=650,height=520,resizable=1,scrollbars=yes")},e.prototype.onClickManualLink=function(){this.$window.open("http://portal.settrade.com/StaticPage/products/manual/Manual_Streaming_for_PC_new_version.pdf","_blank")},e.$inject=["UserInfoService","StreamingAttribute","$window","AccountService","CurrentAccountChangeEvent"],e}(),La=function(){function e(e,t,i,r,n,o){this.settingService=e,this.userInfoService=t,this.alertService=i,this.allNotificationSettingChangeEvent=r,this.accountService=n,this.senseAnalyticsService=o,this.onSettingChangeCallBack=this.onSettingChange.bind(this),this.allNotificationSettingChangeEvent.subscribe(this.onSettingChangeCallBack),this.isChanged=!1,this.isShowCriteriaSettings=!1}return e.prototype.onSettingChange=function(e){this.setting=angular.copy(e)},Object.defineProperty(e.prototype,"senseSetting",{get:function(){if(this.setting)return this.setting.senseConfiguration.enable},set:function(e){var t=this;return this.isChanged=!0,e?void this.alertService.showSenseDisclaimerAlert().then(function(){t.setting.senseConfiguration.enable=!0,t.senseAnalyticsService.trackSenseEnable()}):(this.setting.senseConfiguration.enable=!1,void this.senseAnalyticsService.trackSenseDisable())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notificationSetting",{get:function(){if(this.setting)return this.setting.notificationConfiguration.enable},set:function(e){var t=this;return this.isChanged=!0,e?void this.alertService.showNotificationDisclaimerAlert().then(function(){t.setting.notificationConfiguration.enable=!0}):void(this.setting.notificationConfiguration.enable=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soundAlertSetting",{get:function(){if(this.setting)return this.setting.notificationConfiguration.enableSoundAlert},set:function(e){this.isChanged=!0,this.setting.notificationConfiguration.enableSoundAlert=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderAlertSetting",{get:function(){if(this.setting)return this.setting.notificationConfiguration.orderAlertConfiguration.enable},set:function(e){this.isChanged=!0,e?this.orderAlertPopupSetting=!0:this.orderAlertPopupSetting=!1,this.setting.notificationConfiguration.orderAlertConfiguration.enable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderAlertPopupSetting",{get:function(){if(this.setting)return this.setting.notificationConfiguration.orderAlertConfiguration.enablePopUp},set:function(e){this.isChanged=!0,this.setting.notificationConfiguration.orderAlertConfiguration.enablePopUp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priceVolumeAlertSetting",{get:function(){if(this.setting)return this.setting.notificationConfiguration.priceVolumeAlertConfiguration.enable},set:function(e){this.isChanged=!0,e?this.priceVolumeAlertPopupSetting=!0:this.priceVolumeAlertPopupSetting=!1,this.setting.notificationConfiguration.priceVolumeAlertConfiguration.enable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priceVolumeAlertPopupSetting",{get:function(){if(this.setting)return this.setting.notificationConfiguration.priceVolumeAlertConfiguration.enablePopUp},set:function(e){this.isChanged=!0,this.setting.notificationConfiguration.priceVolumeAlertConfiguration.enablePopUp=e},enumerable:!0,configurable:!0}),e.prototype.isShowSenseConfig=function(){return this.userInfoService.isInvestor()},e.prototype.getAllPushableAccount=function(){var e=this,t=[],i=this.accountService.getAllAccount();return t=i.filter(function(t,i,r){switch(t.systemType){case mi.DERIVATIVES:if(t.frontType===fi.SEOSD)return!0;break;case mi.EQUITY:if(t.frontType===fi.SEOS)return!0;if(t.frontType===fi.FIS&&e.userInfoService.orderPushStatusFIS)return!0;if(t.frontType===fi.DGW&&e.userInfoService.orderPushStatusDGW)return!0}return!1})},e.prototype.getAllPushableAccountAnnouceMessage=function(){var e="",t=this.getAllPushableAccount();return t.length>0&&(e+="(For A/C no. ",t.forEach(function(i){0!==t.indexOf(i)&&(e+=", "),e+=i.accountNo+"("+(i.systemType===mi.EQUITY?"E":"D")+")"}),e+=" only.)"),e},e.prototype.showNotificationAlertCriteriaSettings=function(){this.isShowCriteriaSettings=!0,this.isChanged=!0},e.prototype.closeCriteriaSettings=function(){this.isShowCriteriaSettings=!1},e.prototype.onClickBackFromConfigCriteria=function(){this.closeCriteriaSettings()},e.prototype.onClickSaveFromConfigCriteria=function(e,t){this.setting.notificationConfiguration.priceVolumeAlertConfiguration.rules=e,this.setting.notificationConfiguration.newsConfiguration.rules=t,this.closeCriteriaSettings(),this.settingService.updateAllNotificationSettings(this.setting),this.isChanged=!1},e.prototype.$onDestroy=function(){this.isChanged&&this.settingService.updateAllNotificationSettings(this.setting),this.allNotificationSettingChangeEvent.unsubscribe(this.onSettingChangeCallBack)},e.$inject=["SettingsService","UserInfoService","AlertService","AllNotificationSettingChangeEvent","AccountService","SenseAnalyticsService"],e}(),Na=function(){function e(e,t,i,r){this.instrumentService=e,this.alertService=t,this.allNotificationSettingChangeEvent=i,this.$q=r,this.onSettingChangeCallBack=this.onReceiveSetting.bind(this),this.priceVolRules=[],this.newsRules=[],this.allNotificationSettingChangeEvent.subscribe(this.onSettingChangeCallBack)}return e.prototype.$onDestroy=function(){this.allNotificationSettingChangeEvent.unsubscribe(this.onSettingChangeCallBack)},e.prototype.onReceiveSetting=function(e){var t=angular.copy(e);this.priceVolRules=t.notificationConfiguration.priceVolumeAlertConfiguration.rules,this.newsRules=t.notificationConfiguration.newsConfiguration.rules},e.prototype.addMorePriceVolRule=function(){if(this.canAddMoreCriteria()){var e={condition:Ar.PriceLessEqual,enable:!0,value:"0.00",symbol:""};this.priceVolRules.push(e)}},e.prototype.addMoreNewsRule=function(){if(this.canAddMoreCriteria()){var e={enable:!0,symbol:""};this.newsRules.push(e)}},e.prototype.isShowAdd=function(){return this.canAddMoreCriteria()},e.prototype.canAddMoreCriteria=function(){return this.newsRules.length+this.priceVolRules.length<10},e.prototype.clickBack=function(){this.onClickBack()},e.prototype.clickSave=function(){var e=this;this.validatePriceVol().then(function(){e.validateNews().then(function(){e.onClickSave({newPriceVolRule:e.priceVolRules,newNewsRule:e.newsRules})})})},e.prototype.validatePriceVol=function(){var e=this;return this.validatePriceVolSymbol().then(function(t){var i=!1,r="";return e.priceVolRules.some(function(t,n){if(""===t.value)return i=!0,r="Please insert amount at row "+(n+1),e.alertService.showErrorAlert(r),!0}),i?e.$q.reject(r):e.$q.resolve(null)},function(t){return e.alertService.showErrorAlert(t),e.$q.reject(t)})},e.prototype.validatePriceVolSymbol=function(){var e=this,t=this.$q.defer(),i=[];return this.priceVolRules.forEach(function(r,n){""===r.symbol&&t.reject("Please insert symbol at row "+(n+1));var o=e.instrumentService.searchSymbolByBrokerLicense(r.symbol).then(function(e){e.isIndex()&&t.reject("Symbol not found at row "+(n+1))},function(){t.reject("Symbol not found at row "+(n+1))});i.push(o)}),this.$q.all(i).then(function(){t.resolve(null)}),t.promise},e.prototype.validateNews=function(){var e=this;return this.validateNewsSymbol().then(function(){return e.$q.resolve(null)},function(t){return e.alertService.showErrorAlert(t),e.$q.reject(t)})},e.prototype.validateNewsSymbol=function(){var e=this,t=this.$q.defer(),i=[];return this.newsRules.forEach(function(r,n){""===r.symbol&&t.reject("Please insert symbol at row "+(n+1));var o=e.instrumentService.searchSymbolByBrokerLicense(r.symbol).then(function(e){e.isIndex()&&t.reject("Symbol not found at row "+(n+1))},function(){t.reject("Symbol not found at row "+(n+1))});i.push(o)}),this.$q.all(i).then(function(){t.resolve(null)}),t.promise},e.prototype.onPriceVolClickDelete=function(e){this.priceVolRules.splice(e,1)},e.prototype.onNewsClickDelete=function(e){this.newsRules.splice(e,1)},e.$inject=["InstrumentService","AlertService","AllNotificationSettingChangeEvent","$q"],e}(),Ma=function(){function e(e){this.instrumentService=e,this.instrument=dt.empty()}return e.prototype.$onInit=function(){this.onSymbolChange(this.rule.symbol),this.setIsPrice()},Object.defineProperty(e.prototype,"priceVolumeCondition",{get:function(){return wr.ALL},enumerable:!0,configurable:!0}),e.prototype.onValidateSuccess=function(e){this.rule.symbol=e.name,this.setValidInstrument(e)},e.prototype.onSymbolChange=function(e){var t=this;this.rule.symbol=e,""===e?this.clearData():this.instrumentService.searchSymbolByBrokerLicense(e).then(function(e){t.setValidInstrument(e)},function(){t.clearData()})},e.prototype.clearData=function(){this.instrument=dt.empty(),this.setStaticData(void 0)},e.prototype.setValidInstrument=function(e){this.instrument=e,this.setStaticData(void 0),this.getStaticData(e)},e.prototype.setIsPrice=function(){var e=wr.lookup[""+this.rule.condition];this.isPrice=e.isPrice()},e.prototype.setStaticData=function(e){this.instrumentStaticData=e,this.priceDigit=this.getPriceDigit()},e.prototype.getStaticData=function(e){var t=this;e.isDerivatives()&&this.instrumentService.getInstrumentStaticData(e.name,Qe.DERIVATIVE).then(function(e){t.setStaticData(e)})},e.prototype.getPriceDigit=function(){if(!this.instrument.isEmpty())return this.instrument.isEquity()?2:this.instrumentStaticData&&this.instrumentStaticData.isSuccess?this.instrumentStaticData.data.derivativesPriceDigit:void 0},e.prototype.onConditionChange=function(e){this.rule.condition=e.constant,this.setIsPrice()},Object.defineProperty(e.prototype,"selectedCondition",{get:function(){return wr.lookup[""+this.rule.condition]},enumerable:!0,configurable:!0}),e.prototype.clickDelete=function(){this.onClickDelete({index:this.index})},e.$inject=["InstrumentService"],e}(),Ra=function(){function e(){}return e.prototype.clickDelete=function(){this.onClickDelete({index:this.index})},e.prototype.onValidateSuccess=function(e){this.rule.symbol=e.name},e.prototype.onSymbolChange=function(e){this.rule.symbol=e},e.$inject=[],e}(),_a=function(){function e(){this.confirmPopUp=new Va((!0)),this.rememberLastOrderConfiguration=new Va((!1)),this.autoNVDRConfiguration=new Va((!1)),this.autoFillPriceConfiguration=new Va((!1)),this.isEmpty=!1}return e.empty=function(){var t=new e;return t.isEmpty=!0,t},e}(),Va=function(){function e(e){this.enable=e}return e}(),Ba=function(){function e(){}return e}(),xa=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){this.signal.dispatch(angular.copy(e))},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),Fa=function(){function e(e,t,i,r,n,o){this.settingsService=e,this.orderEntrySettingChangeEvent=t,this.alertService=i,this.userInfoService=r,this.accountService=n,this.initDataEvent=o,this.onSettingChangeCallBack=this.onSettingChange.bind(this),this.onInitDataCompleteCallback=this.onInitDataComplete.bind(this),this.isChanged=!1,this.accountList=[],this.initDataEvent.subscribe(this.onInitDataCompleteCallback),this.orderEntrySettingChangeEvent.subscribe(this.onSettingChangeCallBack)}return e.prototype.onInitDataComplete=function(){this.initAccountInfomation(),this.resetDefaultAccount(),this.initOrderPosition()},e.prototype.initAccountInfomation=function(){this.accountList=this.accountService.getAllAccount()},e.prototype.initOrderPosition=function(){var e=this.accountService.getDefaultDerivativesAccount();this.orderPositionList=Ye.getDerivativesPositionDropdownList(e.hasAutoNet,this.userInfoService.enableAutoPosition)},e.prototype.isShowSetDefaultAccountConfig=function(){return this.userInfoService.isInvestor()},e.prototype.onSettingChange=function(e){this.settings=e,this.resetDefaultAccount()},e.prototype.resetDefaultAccount=function(){var e=this;this.defaultAccount=null,this.accountList&&this.accountList.length>0&&this.settings&&(this.accountList.forEach(function(t){t.accountNo===e.settings.defaultAccountConfiguration.accountNo&&t.systemType===e.settings.defaultAccountConfiguration.systemType&&(e.defaultAccount=t)}),null===this.defaultAccount&&(this.defaultAccount=this.accountList[0]))},Object.defineProperty(e.prototype,"confirmPopupSetting",{get:function(){return!!this.settings&&this.settings.confirmPopUp.enable},set:function(e){this.isChanged=!0,this.settings.confirmPopUp.enable=e,this.isChanged=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rememberLastOrderSetting",{get:function(){return!!this.settings&&this.settings.rememberLastOrderConfiguration.enable},set:function(e){var t=this;return this.isChanged=!0,e?void this.alertService.showRememberLastOrderDisclaimerAlert().then(function(){t.settings.rememberLastOrderConfiguration.enable=!0}):void(this.settings.rememberLastOrderConfiguration.enable=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedAccount",{get:function(){return this.defaultAccount},set:function(e){this.isChanged=!0,this.settings.defaultAccountConfiguration.accountNo=e.accountNo,this.settings.defaultAccountConfiguration.systemType=e.systemType,this.resetDefaultAccount()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultAccountSetting",{get:function(){return this.settings.defaultAccountConfiguration.enableDefaultAccount},set:function(e){this.isChanged=!0,this.settings.defaultAccountConfiguration.enableDefaultAccount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoNVDRSetting",{get:function(){return this.settings.autoNVDRConfiguration.enable},set:function(e){this.isChanged=!0,this.settings.autoNVDRConfiguration.enable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoFillPriceSetting",{get:function(){return this.settings.autoFillPriceConfiguration.enable},set:function(e){this.isChanged=!0,this.settings.autoFillPriceConfiguration.enable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedPosition",{get:function(){return this.settings.defaultOrderPosition},set:function(e){this.isChanged=!0,this.settings.defaultOrderPosition=e},enumerable:!0,configurable:!0}),e.prototype.$onDestroy=function(){this.isChanged&&this.settingsService.updateOrderEntrySettings(this.settings),this.orderEntrySettingChangeEvent.unsubscribe(this.onSettingChangeCallBack),this.initDataEvent.unsubscribe(this.onInitDataCompleteCallback)},e.$inject=["SettingsService","OrderEntrySettingChangeEvent","AlertService","UserInfoService","AccountService","InitDataEvent"],e}(),Ua=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){this.signal.dispatch(angular.copy(e))},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),qa=function(){function e(e,t,i,r,n,o,s){var a=this;this.element=e,this.settingService=t,this.alertService=i,this.accountService=r,this.displaySettingChangeEvent=n,this.userInfoService=o,this.displayService=s,this.onSettingChangeCallBack=this.onSettingChange.bind(this),this.displaySettingChangeEvent.subscribe(this.onSettingChangeCallBack),this.isChanged=!1,this.isShowTechnicalChartScreenSetting=this.userInfoService.canUseTechnicalChart,this.slider={value:this.setting.getFontSizeWithoutVH(),options:{showTicks:!0,showTicksValues:!1,stepsArray:[{value:1.38},{value:1.55,legend:"Best Fit"},{value:1.61}],onChange:function(){a.displayService.adjustFontSize(a.slider.value+"vh"),a.setting.setFontSize(a.slider.value),a.isChanged=!0}}}}return e.prototype.onSettingChange=function(e){this.setting=e},Object.defineProperty(e.prototype,"currentDisplayMode",{get:function(){return this.setting?this.setting.isWideScreen?"wide":"normal":""},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.changeToNormalScreen=function(e){var t=this;"normal"!==this.currentDisplayMode&&(this.alertService.showPlaceOrderWarningAlert("Do you confirm to change the mode of display screen ? Streaming will be re-opened in order to apply changes.").then(function(){t.setting.isWideScreen=!1,t.settingService.updateDisplaySetting(t.setting).then(null)["finally"](function(){location.reload()})}),e.preventDefault())},e.prototype.changeToWideScreen=function(e){var t=this;"wide"!==this.currentDisplayMode&&(this.alertService.showPlaceOrderWarningAlert("Do you confirm to change the mode of display screen ? Streaming will be re-opened in order to apply changes.").then(function(){t.setting.isWideScreen=!0,t.settingService.updateDisplaySetting(t.setting).then(null)["finally"](function(){location.reload()})}),e.preventDefault())},Object.defineProperty(e.prototype,"isTechnicalChartFullScreen",{get:function(){if(this.setting)return this.setting.isTechnicalChartFullScreen},set:function(e){var t=this;this.alertService.showPlaceOrderWarningAlert("Do you confirm to change the mode of display screen in Technical Chart? Streaming will be re-opened in order to apply changes.").then(function(){t.setting.isTechnicalChartFullScreen=e,t.settingService.updateDisplaySetting(t.setting).then(null)["finally"](function(){location.reload()})})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFontBold",{get:function(){if(this.setting)return this.setting.isFontBold?"bold":"normal"},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBasicMode",{get:function(){if(this.setting)return this.setting.isBasicMode},set:function(e){var t=this;this.alertService.showPlaceOrderWarningAlert("Do you confirm to change to the basic mode? Streaming will be re-opened in order to apply changes.").then(function(){t.setting.isBasicMode=e,t.settingService.updateDisplaySetting(t.setting).then(null)["finally"](function(){location.reload()})})},enumerable:!0,configurable:!0}),e.prototype.changeToFontNormalMode=function(e){var t=this;"normal"!==this.isFontBold&&(this.alertService.showPlaceOrderWarningAlert("Do you confirm to change font weight in Streaming? Streaming will be re-opened in order to apply changes.").then(function(){t.setting.isFontBold=!1,t.settingService.updateDisplaySetting(t.setting).then(null)["finally"](function(){location.reload()})}),e.preventDefault())},e.prototype.changeToFontBoldMode=function(e){var t=this;"bold"!==this.isFontBold&&(this.alertService.showPlaceOrderWarningAlert("Do you confirm to change font weight in Streaming? Streaming will be re-opened in order to apply changes.").then(function(){t.setting.isFontBold=!0,t.settingService.updateDisplaySetting(t.setting).then(null)["finally"](function(){location.reload()})}),e.preventDefault())},e.prototype.restoreToDefault=function(){var e=this;this.alertService.showPlaceOrderWarningAlert("Do you confirm to restore display settings to default ? Streaming will be re-opened in order to apply changes.").then(function(){e.setting.resetFontSize(),e.setting.resetFontBold(),e.settingService.updateDisplaySetting(e.setting)["finally"](function(){location.reload()})})},e.prototype.$onDestroy=function(){this.isChanged&&this.settingService.updateDisplaySetting(this.setting)},e.$inject=["$element","SettingsService","AlertService","AccountService","DisplaySettingChangeEvent","UserInfoService","DisplayService"],e}(),ja=function(){function e(){}return e}(),Ha=function(){function e(e,t){this.settingsService=e,this.alertService=t,this.isChanged=!1,this.initiateComponent()}return e.prototype.initiateComponent=function(){var e=this;this.allShortcuts=[];var t=this.settingsService.accountShortcutConfiguration.data.getAllKeys();t.forEach(function(i,r){if(""!==t[r]){var n=new ja;n.shortcut=i,n.value=e.settingsService.accountShortcutConfiguration.data.value(i),e.allShortcuts.push(n)}})},e.prototype.isShowAdd=function(){return this.allShortcuts.length<50},e.prototype.addMoreShortcut=function(){var e=new ja;this.allShortcuts.push(e),this.isChanged=!0},e.prototype.onClickDelete=function(e){this.allShortcuts.splice(e,1),this.isChanged=!0},e.prototype.onClickSave=function(){var e=new Sa;this.validateAccountShortcut()&&(this.allShortcuts.forEach(function(t){e.data.add(t.shortcut,t.value)}),this.settingsService.updateAccountShortcutsSetting(e),this.isChanged=!1)},e.prototype.validateAccountShortcut=function(){for(var e=0;e<this.allShortcuts.length;e++){for(var t=0;t<this.allShortcuts.length;t++)if(e!==t&&this.allShortcuts[e].shortcut===this.allShortcuts[t].shortcut)return this.alertService.showValidationErrorAlert(["Duplicate shortcut at row "+(e+1)]),!1;if(""===this.allShortcuts[e].shortcut||!this.allShortcuts[e].shortcut)return this.alertService.showValidationErrorAlert(["Please insert shortcut at row "+(e+1)]),!1;if(""===this.allShortcuts[e].value||!this.allShortcuts[e].value)return this.alertService.showValidationErrorAlert(["Please insert account at row "+(e+1)]),!1}return!0},e.prototype.$onDestroy=function(){},e.$inject=["SettingsService","AlertService"],e}(),Wa=function(){function e(){}return e.prototype.clickDelete=function(){this.onClickDelete({index:this.index})},e.prototype.onValueChange=function(){this.isChanged=!0},e.prototype.onShortcutChange=function(){this.isChanged=!0},e.$inject=[],e}(),Ya=function(){function e(e,t){this.keyboardShortcutSettingChangeEvent=e,this.settingsService=t,this.onKeyboardShortcutSettingChangeCallback=this.onKeyboardShortcutSettingChange.bind(this),this.keyboardShortcutSettingChangeEvent.subscribe(this.onKeyboardShortcutSettingChangeCallback)}return Object.defineProperty(e.prototype,"isEnable",{get:function(){return!!this.settings&&this.settings.isEnable},set:function(e){this.settings?this.settings.isEnable=e:(this.settings=new fa,this.settings.isEnable=e)},enumerable:!0,configurable:!0}),e.prototype.onKeyboardShortcutSettingChange=function(e){this.settings=e},e.prototype.$onDestroy=function(){this.settingsService.updateKeyboardShortcutSettings(this.settings),this.keyboardShortcutSettingChangeEvent.unsubscribe(this.onKeyboardShortcutSettingChangeCallback)},e.$inject=["KeyboardShortcutSettingChangeEvent","SettingsService"],e}();angular.module("settings",["ngAnimate","ui.bootstrap","order","number-formatter","web-api","service","event-emitter"]).service("SettingsService",Ca).controller("SettingsController",Pa).controller("TermsAndConditionsController",Oa).component("termsAndConditions",{templateUrl:"assets/pages/settings/terms-and-conditions.html",controller:Oa,controllerAs:"termsCtrl"}).component("otherInformation",{template:i(/*! ../../html/settings/other-information.html */75),controller:$a}).component("about",{template:i(/*! ../../html/settings/about.html */76),controller:ka}).component("notification",{template:i(/*! ../../html/settings/notification.html */77),controller:La}).component("notificationAlertCriteria",{template:i(/*! ../../html/settings/notification-alert-criteria.html */78),controller:Na,bindings:{onClickBack:"&",onClickSave:"&"}}).component("notificationAlertCriteriaPriceVolumeRow",{template:i(/*! ../../html/settings/notification-alert-criteria-price-volume-row.html */79),controller:Ma,bindings:{rule:"=",onClickDelete:"&",index:"<"}}).component("notificationAlertCriteriaNewsRow",{template:i(/*! ../../html/settings/notification-alert-criteria-news-row.html */80),controller:Ra,bindings:{rule:"=",onClickDelete:"&",index:"<"}}).component("orderEntry",{template:i(/*! ../../html/settings/order-entry.html */81),controller:Fa}).component("display",{template:i(/*! ../../html/settings/display.html */82),controller:qa}).component("accountShortcut",{template:i(/*! ../../html/settings/account-shortcut.html */83),controller:Ha}).component("accountShortcutRow",{template:i(/*! ../../html/settings/account-shortcut-row.html */84),controller:Wa,bindings:{data:"=",onClickDelete:"&",index:"<",isChanged:"="}}).component("keyboardShortcut",{template:i(/*! ../../html/settings/keyboard-shortcut.html */85),controller:Ya,bindings:{}});var Ga=function(){function e(){}return e.prototype.playNotificationSound=function(){var e=new Audio("assets/sound/notification-sound.wav");e.play()},e.$inject=[],e}(),Ka=function(){function e(){}return e}(),za=function(){function e(){}return e.prototype.getOrderTime=function(){var e=this.orderTimeHour<=9?"0"+this.orderTimeHour:this.orderTimeHour,t=this.orderTimeMin<=9?"0"+this.orderTimeMin:this.orderTimeMin,i=this.orderTimeSec<=9?"0"+this.orderTimeSec:this.orderTimeSec;return e+":"+t+":"+i},e}(),Qa=function(){function e(){this.blink=!1,this.isChecked=!1,this.isChanging=!1,this.isMarkDragged=!1}return Object.defineProperty(e.prototype,"displaySymbol",{get:function(){return""+this.symbol+this.nvdrFlag.trim()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this.orderNo===e.orderNo&&this.orderNoFis===e.orderNoFis&&this.orderNoSeos===e.orderNoSeos&&this.symbol===e.symbol&&this.accountNo===e.accountNo&&this.nvdrFlag===e.nvdrFlag&&Be.lookup[this.side.fullname]===Be.lookup[e.side.fullname]},e.prototype.getIndexFromList=function(e){var t=this,i=-1;return e.some(function(e,r){if(e.isEqual(t))return i=r,!0}),i},e}(),Xa=function(){function e(){}return e.parseNullableString=function(e){return"null"===e?"":e},e.parseCancelOrderStatusStreaminSEOSResponse=function(t){for(var i=new ic,r=t.split(hi.LV3),n=parseInt(r[1]),o=2;o<2+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.EQUITY_PLACE_ORDER_SERVICE_ID){var l=a[2],u="T"===l,d="W"===l;return i.isSuccess=u,i.isWarning=d,u&&(i.successMessage=a[5]),d&&(i.warnMessage=a[5]),i.errorMessage=a[5],i}}},e.parseDerivativesOrderStatusResponse=function(t,i){var r=new tc;r.orderStatusList=[];for(var n=t.split(hi.LV3),o=(n[1],parseInt(n[2])),s=3;s<3+o;s++){var a=n[s],c=a.split(hi.LV2),l=c[1];if(l===e.ITPD_ORDER_URL_STATUS_SERVICE_ID||l===e.DERIVATIVES_PLACE_ORDER_FAIL_SERVICE_ID){var u=c[2],d="T"===u,h="W"===u;if(r.isSuccess=d,r.isWarning=h,d)for(var p=5;p<c.length;p++){var m={},v=c[p].split(hi.LV1);m.orderNo=e.parseNullableString(v[0]),m.seriesId=e.parseNullableString(v[1]),m.time=e.parseNullableString(v[2]),m.side=e.parseNullableString(v[3]),m.price=e.parseNullableString(v[4]),m.volume=parseInt(v[5]),m.matchedVolume=parseInt(v[6]),m.balance=parseInt(v[7]),m.cancelledVolume=parseInt(v[8]),m.valid=e.parseNullableString(v[9]),m.until=e.parseNullableString(v[10]),m.status=e.parseNullableString(v[11]),m.canCancelled="Y"===e.parseNullableString(v[12]),m.canChanged="Y"===e.parseNullableString(v[13]),m.position=e.parseNullableString(v[14]),m.enterId=e.parseNullableString(v[15]),m.accountNo=e.parseNullableString(v[16]),m.canApprove="Y"===e.parseNullableString(v[17]),m.delFlag="Y"===e.parseNullableString(v[18]),m.priceDigit=parseInt(v[19]),m.tfexOrderNo=e.parseNullableString(v[20]),m.isStopOrder="Y"===e.parseNullableString(v[21]),
m.date=e.parseNullableString(v[22]),m.isStopOrderNotActivate="Y"===e.parseNullableString(v[23]),m.isTradeReport="Y"===e.parseNullableString(v[24]),m.version=parseInt(v[25]),m.sendDate=e.parseNullableString(v[26]),r.orderStatusList.push(m)}return h&&(r.warnMessage=c[3]),r.errorMessage=c[3],r}}},e.parseOrderStatusStreamingSEOSResponse=function(t,i){var r=new ec;r.orderStatusList=[];for(var n=t.split(hi.LV3),o=parseInt(n[1]),s=2;s<2+o;s++){var a=n[s],c=a.split(hi.LV2),l=c[1];if(l===e.EQUITY_ORDER_STATUS_SERVICE_ID||l===e.EQUITY_ORDER_STATUS_FAIL_SERVICE_ID){var u=c[2],d=parseInt(c[3]),h="T"===u,p="W"===u;if(r.isSuccess=h,r.isWarning=p,h)for(var m=0;m<d;m++){var v=new Ka,f=c[5+m].split(hi.LV1);v.orderNo=e.parseNullableString(f[0]),v.nvdrFlag=e.parseNullableString(f[1]),v.symbol=e.parseNullableString(f[2]),v.orderTime=e.parseNullableString(f[3]),v.side=Be.lookup[e.parseNullableString(f[4])],0===e.parseNullableString(f[11]).length?v.price=parseFloat(f[5]):v.price=0,v.volume=parseInt(f[6]),v.matchedVolume=parseInt(f[7]),v.balanceVolume=parseInt(f[8]),v.cancelledVolume=parseInt(f[9]),v.status=e.parseNullableString(f[10]),v.priceType=e.parseNullableString(f[11]),v.canCancel="Y"===e.parseNullableString(f[12]),v.canChange="Y"===e.parseNullableString(f[13]),v.tradeDate=e.parseNullableString(f[14]),v.sequenceNumber=parseInt(f[15]),v.accountNo=e.parseNullableString(f[16]),v.accountNo=""===v.accountNo?i:v.accountNo,v.delFlag=e.parseNullableString(f[17]),v.orderNoSeos=e.parseNullableString(f[18]),v.orderNoFis=e.parseNullableString(f[19]),v.validity=e.parseNullableString(f[20]),v.canChangePriceVol="Y"===e.parseNullableString(f[21]),v.version=parseInt(f[22]),r.orderStatusList.push(v)}return p&&(r.warnMessage=c[5]),r.errorMessage=c[5],r}}},e.parseCancelOrderDerivativesResponse=function(t){for(var i=new rc,r=t.split(hi.LV3),n=(r[1],parseInt(r[2])),o=3;o<3+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.DERIVATIVES_PLACE_ORDER_SERVICE_ID){var l=a[2],u="T"===l,d="W"===l;return i.isSuccess=u,i.isWarning=d,u?i.successMessage=a[5]:d?i.warnMessage=a[3]:i.errorMessage=a[3],i}}},e.EQUITY_PLACE_ORDER_SERVICE_ID="PlaceOrder",e.EQUITY_ORDER_STATUS_SERVICE_ID="OrderStatus",e.EQUITY_ORDER_STATUS_FAIL_SERVICE_ID="PlaceOrder",e.DERIVATIVES_PLACE_ORDER_SERVICE_ID="PlaceOrder",e.DERIVATIVES_PLACE_ORDER_FAIL_SERVICE_ID="PlaceOrder",e.ITPD_ORDER_URL_STATUS_SERVICE_ID="OrderInfo",e}(),Ja=function(){function e(){this.blink=!1,this.isChecked=!1,this.isChanging=!1,this.isMarkDragged=!1}return e.prototype.isEqual=function(e){return this.orderNo===e.orderNo&&this.symbol===e.symbol&&this.time===e.time&&this.date===e.date&&Be.lookup[this.side.fullname]===Be.lookup[e.side.fullname]},e.prototype.getIndexFromList=function(e){var t=this,i=-1;return e.some(function(e,r){if(e.isEqual(t))return i=r,!0}),i},e}(),Za=function(){function e(){}return e.parseEquity=function(e){var t=new Qa;if(t.orderNo=e.orderNo,t.nvdrFlag=e.nvdrFlag,t.symbol=e.symbol,t.orderTime=e.orderTime,t.side=e.side,t.price=e.price,t.volume=e.volume,t.matchedVolume=e.matchedVolume,t.balanceVolume=e.balanceVolume,t.cancelledVolume=e.cancelledVolume,t.status=e.status,t.priceType=e.priceType,t.canCancel=e.canCancel,t.canChange=e.canChange,t.tradeDate=e.tradeDate,t.sequenceNumber=e.sequenceNumber,t.accountNo=e.accountNo,t.orderNoSeos=e.orderNoSeos,t.orderNoFis=e.orderNoFis,t.validity=e.validity,t.canChangePriceVol=e.canChangePriceVol,t.version=e.version,e.tradeDate.indexOf("-")!==-1){var i=e.tradeDate.split("-"),r=i[0],n=i[1],o=i[2];t.key=""+e.orderNo+r+n+o}else{var s=e.tradeDate.split("/"),o=s[0],n=s[1],r=s[2];t.key=""+e.orderNo+r+n+o}return t},e.parseEquityPush=function(e){var t=new Qa;t.orderNo=e.orderNo,t.nvdrFlag=e.nvdrFlag,t.symbol=e.symbol,t.orderTime=e.getOrderTime(),t.side=Be.lookup[Xa.parseNullableString(e.side)],t.price=e.price,t.volume=e.volume,t.matchedVolume=e.matchedVolume,t.balanceVolume=e.balanceVolume,t.cancelledVolume=e.cancelledVolume,t.status=e.status,t.priceType=0===e.priceType?"":Ge.lookup[e.priceType].fullname,t.canCancel=e.canCancel,t.canChange=e.canChange,t.tradeDate=e.tradeDate,t.sequenceNumber=e.sequenceNumber,t.accountNo=e.accountNo,t.orderNoSeos=e.orderNoSeos,t.orderNoFis=e.orderNoFis,t.validity=e.validity,t.canChangePriceVol=e.canChangePriceVol,t.version=e.version;var i=e.tradeDate.split("/"),r=i[0],n=i[1],o=i[2];return t.key=""+e.orderNo+o+n+r,t},e.parseEquityFake=function(e){var t=new Qa;t.orderNo=e.orderNo,t.symbol=e.symbol,t.price=e.price;var i=Ge.lookup[e.priceType];return t.priceType=i===Ge.LIMIT?"":i.fullname,t.volume=e.volume,t.side=Be.lookup[e.side],t.status="Pending(S)",t.key=""+e.orderNo,t.matchedVolume=0,t.balanceVolume=e.volume,t.cancelledVolume=0,t.version=-1,t},e.parseDerivFake=function(e){var t=new Ja;return t.orderNo=e.orderNo,t.symbol=e.symbol,t.price=e.price,t.priceType=Ge.lookup[e.priceType],t.volume=e.volume,t.side=Be.lookup[e.side],t.position=Ye.lookup[e.position],t.status="Pending(S)",t.shortStatus="S",t.longStatus="Pending",t.key=e.orderNo,t.version=-1,t},e.parseNullableString=function(e){return"null"===e?"":e},e.parseDeriv=function(e){var t=new Ja;t.orderNo=e.orderNo,t.date=e.date,t.time=e.time,t.position=Ye.lookup[e.position],t.symbol=e.seriesId,t.side=Be.lookup[e.side];var i=parseFloat(e.price);if(isNaN(i)?(t.price=0,t.priceType=Ge.lookup[e.price]):(t.price=i,t.priceType=Ge.LIMIT),t.volume=e.volume,t.matchedVolume=e.matchedVolume,t.balanceVolume=e.balance,t.cancelledVolume=e.cancelledVolume,t.valid=Ke.lookup[e.valid],t.isStopOrder=e.isStopOrder,t.status=e.status,t.status.length>1){var r=e.status.split("(");r.length>=2&&(t.shortStatus=r[1].replace(")",""),t.longStatus=r[0])}t.canChanged=e.canChanged,t.canCancelled=e.canCancelled,t.priceDigit=e.priceDigit,t.version=e.version,t.sendDate=e.sendDate,t.accountNo=e.accountNo,t.enterID=e.enterId;var n=e.date.split("/"),o=n[0],s=n[1];return t.key=""+e.orderNo+s+o,t},e.parseDerivPush=function(e){var t=new Ja;t.orderNo=e.orderNo.toString(),t.time=e.time,t.position=Ye.lookup[e.position],t.symbol=e.seriesID,t.side=Be.lookup[e.side];var i=e.price;if(isNaN(i)?t.price=0:t.price=i,t.priceType=Ge.lookup[e.priceType],t.volume=e.volume,t.matchedVolume=e.matchedVolume,t.balanceVolume=e.balance,t.cancelledVolume=e.cancelledVolume,t.valid=Ke.lookup[e.valid],t.isStopOrder=e.isStopOrderNotActivate,t.status=e.status,t.status.length>1){var r=e.status.split("(");r.length>=2&&(t.shortStatus=r[1].replace(")",""),t.longStatus=r[0])}t.canChanged=e.canChange,t.canCancelled=e.canCancel,t.priceDigit=e.priceDigit,t.version=e.version,t.date=e.date,t.sendDate="",t.accountNo=e.accountNo,t.enterID=e.enterID;var n=e.date.split("/"),o=n[0],s=n[1];return t.key=""+e.orderNo+s+o,t},e}(),ec=function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),tc=function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),ic=function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),rc=function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),nc=function(){function e(){}return e}(),oc=function(){function e(){}return e}(),sc=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d,h,p){this.orderPushPubSub=e,this.derivOrderPushPubSub=t,this.itpService=i,this.itpdService=r,this.alertService=n,this.userInfoService=o,this.$q=s,this.$rootScope=a,this.currentOrderStatusChangeEvent=c,this.refreshEvent=l,this.refreshAccountEvent=u,this.currentAccountChangeEvent=d,this.$filter=h,this.marketrepHierarchyService=p,this.onRecieveEquityOrderPushCallBack=this.onRecieveEquityOrderPush.bind(this),this.onRecieveDerivativesOrderPushCallBack=this.onRecieveDerivativesOrderPush.bind(this),this.onCurrentAccountChangeCallBack=this.onCurrentAccountChange.bind(this),this.orderEquityPriceFilter=this.$filter("orderEquityPrice"),this.volumeFilter=this.$filter("volume"),this.isRequestingEquity=!1,this.isRequestingDerivatives=!1,this.currentEquityOrderStatusList=[],this.currentDerivOrderStatusList=[],this.isCheckedAllEquity=!1,this.isCheckedAllDerivatives=!1,this.numberCheckedCancelEquityOrder=0,this.numberCheckedCancelDerivativesOrder=0,this.sortMode=new er,this.onOrderStatusReplacedSignal=new signals.Signal,this.isLockChangeOrderEquity=!1,this.isLockChangeOrderDerivatives=!1,this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack)}return e.prototype.setShowRequestingEquity=function(){this.isRequestingEquity=!0},e.prototype.setStopShowRequestingEquity=function(){this.isRequestingEquity=!1},e.prototype.setShowRequestingDerivatives=function(){this.isRequestingDerivatives=!0},e.prototype.setStopShowRequestingDerivatives=function(){this.isRequestingDerivatives=!1},Object.defineProperty(e.prototype,"checkedEquityOrderStatusList",{get:function(){for(var e=[],t=0,i=this.currentEquityOrderStatusList.length;t<i;t++)this.currentEquityOrderStatusList[t].isChecked&&e.push(this.currentEquityOrderStatusList[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedDerivativesOrderStatusList",{get:function(){for(var e=[],t=0,i=this.currentDerivOrderStatusList.length;t<i;t++)this.currentDerivOrderStatusList[t].isChecked&&e.push(this.currentDerivOrderStatusList[t]);return e},enumerable:!0,configurable:!0}),e.prototype.subscribeOnOrderStatusReplaced=function(e){this.onOrderStatusReplacedSignal.add(e)},e.prototype.unsubscribeOnOrderStatusReplaced=function(e){this.onOrderStatusReplacedSignal.remove(e)},e.prototype.dispatchOnOrderStatusReplaced=function(){this.onOrderStatusReplacedSignal.dispatch("")},e.prototype.onCurrentAccountChange=function(e){e&&this.changeCurrentAccount(e)},e.prototype.changeCurrentAccount=function(e){var t=this;!this.currentAccount||this.currentAccount.isEmptyAccount&&!this.currentAccount.isAllDerivatives()||this.unsubscribeCurrentAccountOrderPush(),this.clearApplicationOrderStatusList(e),this.currentAccount=e,e.isEmptyAccount&&!e.isAllDerivatives()||(this.subscribeCurrentAccountOrderPush(),this.updateOrderStatusByCurrentAccount().then(function(e){e.result||(e.requestedAccount.systemType===mi.EQUITY?t.orderPushPubSub.unsubscribe([e.requestedAccount],t.onRecieveEquityOrderPushCallBack):e.requestedAccount.systemType!==mi.DERIVATIVES||e.requestedAccount.isAllDerivatives()||t.derivOrderPushPubSub.unsubscribe([e.requestedAccount],t.onRecieveDerivativesOrderPushCallBack))}))},e.prototype.onDerivativesMarketrepAccountInfoError=function(e){this.derivOrderPushPubSub.unsubscribe([e],this.onRecieveDerivativesOrderPushCallBack)},e.prototype.onEquityMarketrepAccountInfoError=function(e){this.orderPushPubSub.unsubscribe([e],this.onRecieveEquityOrderPushCallBack)},e.prototype.subscribeCurrentAccountOrderPush=function(){var e=this;this.currentAccount&&(this.currentAccount.systemType===mi.EQUITY?this.orderPushPubSub.subscribe([this.currentAccount],this.onRecieveEquityOrderPushCallBack):this.currentAccount.systemType===mi.DERIVATIVES&&(this.currentAccount.isAllDerivatives()?this.currentDerivativesAccountsUnderHierarchy?this.derivOrderPushPubSub.subscribeAccountListUnderMarketRepHierarchy(this.currentDerivativesAccountsUnderHierarchy,this.onRecieveDerivativesOrderPushCallBack):this.marketrepHierarchyService.getAllAccountsUnderHierarchy().then(function(t){e.currentAccount.isAllDerivatives()&&(e.currentDerivativesAccountsUnderHierarchy=t,e.derivOrderPushPubSub.subscribeAccountListUnderMarketRepHierarchy(e.currentDerivativesAccountsUnderHierarchy,e.onRecieveDerivativesOrderPushCallBack))}):this.derivOrderPushPubSub.subscribe([this.currentAccount],this.onRecieveDerivativesOrderPushCallBack)))},e.prototype.unsubscribeCurrentAccountOrderPush=function(){this.currentAccount&&(this.currentAccount.systemType===mi.EQUITY?this.orderPushPubSub.unsubscribe([this.currentAccount],this.onRecieveEquityOrderPushCallBack):this.currentAccount.systemType===mi.DERIVATIVES&&(this.currentAccount.isAllDerivatives()?this.currentDerivativesAccountsUnderHierarchy&&this.derivOrderPushPubSub.unsubscribeAccountListUnderHierarchy(this.currentDerivativesAccountsUnderHierarchy,this.onRecieveDerivativesOrderPushCallBack):this.derivOrderPushPubSub.unsubscribe([this.currentAccount],this.onRecieveDerivativesOrderPushCallBack)))},e.prototype.clearApplicationOrderStatusList=function(e){switch(e.systemType){case mi.EQUITY:this.currentOrderStatusChangeEvent.dispatchEquity([]);break;case mi.DERIVATIVES:this.currentOrderStatusChangeEvent.dispatchDerivatives([])}this.currentEquityOrderStatusList=[],this.currentDerivOrderStatusList=[],this.isCheckedAllEquity=!1,this.isCheckedAllDerivatives=!1,this.numberCheckedCancelEquityOrder=0,this.numberCheckedCancelDerivativesOrder=0},e.prototype.updateOrderStatusByCurrentAccount=function(){return!this.currentAccount||this.currentAccount.isEmptyAccount&&!this.currentAccount.isAllDerivatives()?this.$q.reject({requestedAccount:this.currentAccount,result:!1}):this.currentAccount.systemType===mi.EQUITY?this.updateCurrentEquityOrderStatus():this.updateCurrentDerivOrderStatus()},e.prototype.createOrderStatusMap=function(e){for(var t={},i=0,r=e.length;i<r;i++)t[e[i].key]=i;return t},e.prototype.updateCurrentEquityOrderStatus=function(){var e=this;this.isCheckedAllEquity=!1,this.numberCheckedCancelEquityOrder=0,this.sortMode.clear(),this.isRequestingEquity=!0;var t=angular.copy(this.currentAccount);return this.itpService.getOrderStatus(this.currentAccount.accountNo).then(function(i){var r=Xa.parseOrderStatusStreamingSEOSResponse(i.message,i.accountNo);if(r.isSuccess&&i.accountNo===e.currentAccount.accountNo){e.currentEquityOrderStatusList=[];for(var n=r.orderStatusList.length,o=0;o<n;o++){var s=Za.parseEquity(r.orderStatusList[o]);e.currentEquityOrderStatusList.push(s)}return e.currentOrderStatusChangeEvent.dispatchEquity(e.currentEquityOrderStatusList),e.dispatchOnOrderStatusReplaced(),e.$q.resolve({requestedAccount:t,result:!0})}return r.isWarning?(e.alertService.showPlaceOrderWarningAlert(r.warnMessage),e.$q.resolve({requestedAccount:t,result:!1})):r.isSuccess?e.$q.resolve({requestedAccount:t,result:!1}):(e.alertService.showErrorAlert(r.errorMessage),e.$q.resolve({requestedAccount:t,result:!1}))})["finally"](function(){e.isRequestingEquity=!1})},e.prototype.updateDirtyEquityOrderStatus=function(){var e=this;this.setShowRequestingEquity();var t=this.createOrderStatusMap(this.currentEquityOrderStatusList);this.isCheckedAllEquity=!1,this.numberCheckedCancelEquityOrder=0,this.sortMode.dirty(),this.itpService.getOrderStatus(this.currentAccount.accountNo).then(function(i){var r=Xa.parseOrderStatusStreamingSEOSResponse(i.message,i.accountNo);r.isSuccess&&i.accountNo===e.currentAccount.accountNo?(e.sortDirtyEquityOrderStatus(r.orderStatusList,t),e.currentOrderStatusChangeEvent.dispatchEquity(e.currentEquityOrderStatusList)):r.isWarning?e.alertService.showPlaceOrderWarningAlert(r.warnMessage):r.isSuccess||e.alertService.showErrorAlert(r.errorMessage)})["finally"](function(){e.setStopShowRequestingEquity()})},e.prototype.sortDirtyEquityOrderStatus=function(e,t){this.currentEquityOrderStatusList=[];for(var i=e.length,r=0;r<i;r++){var n=Za.parseEquity(e[r]),o=t[n.key];void 0!==o?this.currentEquityOrderStatusList[o]=n:this.currentEquityOrderStatusList.unshift(n)}},e.prototype.updateCurrentDerivOrderStatus=function(){var e=this;this.isCheckedAllDerivatives=!1,this.numberCheckedCancelDerivativesOrder=0,this.sortMode.clear(),this.setShowRequestingDerivatives();var t=new Kt(this.userInfoService.getApplicationRole());t.accountNo=this.currentAccount.isAllDerivativesAccount?"_ALL":this.currentAccount.accountNo;var i=angular.copy(this.currentAccount);return this.itpdService.getOrderStatus(t).then(function(t){var r=Xa.parseDerivativesOrderStatusResponse(t.message,t.accountNo);if(r.isSuccess&&(t.accountNo===e.currentAccount.accountNo||"_ALL"===t.accountNo&&e.currentAccount.isAllDerivatives())){e.currentDerivOrderStatusList=[];for(var n=r.orderStatusList.length,o=0;o<n;o++){var s=Za.parseDeriv(r.orderStatusList[o]);e.currentDerivOrderStatusList.push(s)}return e.currentOrderStatusChangeEvent.dispatchDerivatives(e.currentDerivOrderStatusList),e.dispatchOnOrderStatusReplaced(),e.$q.resolve({requestedAccount:i,result:!0})}return r.isWarning?(e.alertService.showPlaceOrderWarningAlert(r.warnMessage),e.$q.resolve({requestedAccount:i,result:!1})):r.isSuccess?e.$q.resolve({requestedAccount:i,result:!1}):(e.alertService.showErrorAlert(r.errorMessage),e.$q.resolve({requestedAccount:i,result:!1}))})["finally"](function(){e.setStopShowRequestingDerivatives()})},e.prototype.updateDirtyDerivativesOrderStatus=function(){var e=this;this.setShowRequestingDerivatives();var t=this.createOrderStatusMap(this.currentDerivOrderStatusList);this.isCheckedAllDerivatives=!1,this.numberCheckedCancelDerivativesOrder=0,this.sortMode.dirty();var i=new Kt(this.userInfoService.getApplicationRole());i.accountNo=this.currentAccount.isAllDerivativesAccount?"_ALL":this.currentAccount.accountNo,this.itpdService.getOrderStatus(i).then(function(i){var r=Xa.parseDerivativesOrderStatusResponse(i.message,i.accountNo);r.isSuccess&&(i.accountNo===e.currentAccount.accountNo||"_ALL"===i.accountNo&&e.currentAccount.isAllDerivatives())?(e.sortDirtyDerivativesOrderStatus(r.orderStatusList,t),e.currentOrderStatusChangeEvent.dispatchDerivatives(e.currentDerivOrderStatusList)):r.isWarning?e.alertService.showPlaceOrderWarningAlert(r.warnMessage):r.isSuccess||e.alertService.showErrorAlert(r.errorMessage)})["finally"](function(){e.setStopShowRequestingDerivatives()})},e.prototype.sortDirtyDerivativesOrderStatus=function(e,t){this.currentDerivOrderStatusList=[];for(var i=e.length,r=0;r<i;r++){var n=Za.parseDeriv(e[r]),o=t[n.key];void 0!==o?this.currentDerivOrderStatusList[o]=n:this.currentDerivOrderStatusList.unshift(n)}},e.prototype.addFakeEquityOrder=function(e){var t=Za.parseEquityFake(e),i=this.checkIfRealOrderIsInEquityList(t);i||(t.blink=!0,this.insertNewOrderStatusEquity(t),this.checkIfAllEquityOrdersChecked(),this.currentOrderStatusChangeEvent.dispatchEquity(this.currentEquityOrderStatusList))},e.prototype.addFakeDerivativesOrder=function(e){var t=Za.parseDerivFake(e);this.checkIfRealOrderIsInDerivativesList(t)||(t.blink=!0,this.insertNewOrderStatusDerivatives(t),this.checkIfAllDerivativesOrdersChecked(),this.currentOrderStatusChangeEvent.dispatchDerivatives(this.currentDerivOrderStatusList))},e.prototype.checkIfRealOrderIsInEquityList=function(e){for(var t=this.currentEquityOrderStatusList.length,i=0;i<t;i++)if(this.currentEquityOrderStatusList[i].orderNo===e.orderNo)return!0;return!1},e.prototype.checkIfRealOrderIsInDerivativesList=function(e){for(var t=this.currentDerivOrderStatusList.length,i=0;i<t;i++)if(this.currentDerivOrderStatusList[i].orderNo===e.orderNo)return!0;return!1},e.prototype.onRecieveEquityOrderPush=function(e){var t=Za.parseEquityPush(e);t.blink=!0;var i=this.updateOrderStatusPushEquity(t);i||this.insertNewOrderStatusEquity(t),this.checkIfAllEquityOrdersChecked(),this.sortMode.dirty(),this.currentOrderStatusChangeEvent.dispatchEquity(this.currentEquityOrderStatusList)},e.prototype.updateOrderStatusPushEquity=function(e){for(var t=this.currentEquityOrderStatusList.length,i=0;i<t;i++)if(this.currentEquityOrderStatusList[i].key===e.key)return e.version>=this.currentEquityOrderStatusList[i].version&&(this.currentEquityOrderStatusList[i]=e,this.currentEquityOrderStatusList[i].isChanging=!1),!0;for(var i=0;i<t;i++)if(this.currentEquityOrderStatusList[i].orderNo===e.orderNo)return this.currentEquityOrderStatusList[i]=e,!0;return!1},e.prototype.insertNewOrderStatusEquity=function(e){this.currentEquityOrderStatusList.unshift(e)},e.prototype.onRecieveDerivativesOrderPush=function(e){var t=Za.parseDerivPush(e);t.blink=!0;var i=this.updateOrderStatusDerivatives(t);i||this.insertNewOrderStatusDerivatives(t),this.checkIfAllDerivativesOrdersChecked(),this.sortMode.dirty(),this.currentOrderStatusChangeEvent.dispatchDerivatives(this.currentDerivOrderStatusList)},e.prototype.updateOrderStatusDerivatives=function(e){for(var t=this.currentDerivOrderStatusList.length,i=0;i<t;i++)if(this.currentDerivOrderStatusList[i].key===e.key)return e.version>=this.currentDerivOrderStatusList[i].version&&(this.currentDerivOrderStatusList[i]=e,this.currentDerivOrderStatusList[i].isChanging=!1),!0;for(var i=0;i<t;i++)if(this.currentDerivOrderStatusList[i].orderNo===e.orderNo)return this.currentDerivOrderStatusList[i]=e,this.currentDerivOrderStatusList[i].isChanging=!1,!0;return!1},e.prototype.insertNewOrderStatusDerivatives=function(e){this.currentDerivOrderStatusList.unshift(e)},e.prototype.toggleField=function(e){this.sortMode.toggleDirection(e),this.sortMode.sortField=e},e.prototype.sortEquityOrder=function(){tr.sort(this.sortMode,this.currentEquityOrderStatusList),this.dispatchOnOrderStatusReplaced()},e.prototype.sortDerivativesOrder=function(){tr.sort(this.sortMode,this.currentDerivOrderStatusList),this.dispatchOnOrderStatusReplaced()},e.prototype.sortEquityOrderByPriceThenPriceType=function(){ir.sortEquity(this.sortMode,this.currentEquityOrderStatusList),this.dispatchOnOrderStatusReplaced()},e.prototype.sortDerivativesOrderByPriceThenPriceType=function(){ir.sortDerivatives(this.sortMode,this.currentDerivOrderStatusList),this.dispatchOnOrderStatusReplaced()},e.prototype.sortDerivativesOrderByYearMonth=function(){var e;e=this.currentDerivOrderStatusList.sort(function(e,t){var i=e.date.split("/").reverse().join("/"),r=t.date.split("/").reverse().join("/");return i<r?-1:i>r?1:0}),this.sortMode.direction===Vi.ASC?this.currentDerivOrderStatusList=e:this.currentDerivOrderStatusList=e.reverse(),this.dispatchOnOrderStatusReplaced()},e.prototype.resetSortMode=function(){this.sortMode.clear()},e.prototype.clearFlagBlinkEquityOrderStatus=function(e){for(var t=this.currentEquityOrderStatusList.length,i=0;i<t;i++)this.currentEquityOrderStatusList[i].orderNo===e&&(this.currentEquityOrderStatusList[i].blink=!1)},e.prototype.clearFlagBlinkDerivativesOrderStatus=function(e){for(var t=this.currentDerivOrderStatusList.length,i=0;i<t;i++)this.currentDerivOrderStatusList[i].key===e&&(this.currentDerivOrderStatusList[i].blink=!1)},e.prototype.changeDerivativesOrderStatus=function(e){var t=this,i=new Zt;return this.setShowRequestingDerivatives(),e.currentPriceType.value===Ge.LIMIT.value&&(i.old_price=e.oldPrice,i.price=e.newPrice),e.isConfirmWarning&&i.setConfirmWarn(),i.old_volume=e.oldVolume,i.volume=e.newVolume,i.old_openClose=Jt.lookup[e.oldPosition.shortname],i.openClose=Jt.lookup[e.newPosition.shortname],i.accountNo=e.accountNo,i.orderNo=e.orderNo,i.txtPIN=e.pin,this.itpdService.changeOrder(i).then(function(e){t.updateDirtyDerivativesOrderStatus(),t.refreshAccountEvent.dispatchEvent();var i={isSuccess:"T"===e.result,isWarning:"W"===e.result,message:e.message};return i.isSuccess?t.$q.resolve(i):t.$q.reject(i)})["finally"](function(){t.uncheckedCancelFlagAllDerivatives(),t.setStopShowRequestingDerivatives()})},e.prototype.generateChangeEquityOrderStatusRequestParam=function(e){var t=new Ft;return this.userInfoService.isInvestor()?t.extOrderNo=e.orderNoFis:this.userInfoService.isMarketRep()&&(t.extOrderNo=e.orderNoSeos),e.priceType.value===Ge.LIMIT.value&&(t.price=e.price),e.isConfirmWarning&&t.setConfirmWarn(),e.accountFrontType===fi.DGW?(t.orderNo=e.orderNo,void 0!==e.tradeDate&&(t.tradeDate=e.tradeDate.split("/").reverse().join("-"))):t.orderNo=e.orderNoSeos,t.txtAccountNo=e.txtAccountNo,t.txtPIN=e.txtPIN,t.volume=e.volume,t},e.prototype.changeEquityOrderStatus=function(e){var t=this,i=this.generateChangeEquityOrderStatusRequestParam(e);return this.setShowRequestingEquity(),this.itpService.changeOrder(i).then(function(e){t.updateDirtyEquityOrderStatus(),t.refreshAccountEvent.dispatchEvent();var i={isSuccess:"T"===e.result,isWarning:"W"===e.result,message:e.message};return i.isSuccess?t.$q.resolve(i):t.$q.reject(i)})["finally"](function(){t.uncheckedCancelFlagAllDerivatives(),t.setStopShowRequestingEquity()})},e.prototype.cancelOrderEquity=function(e){var t=this,i=this.generateCancelOrderEquityRequestData(e);return this.setShowRequestingEquity(),this.itpService.cancelOrder(i).then(function(e){t.updateDirtyEquityOrderStatus(),t.refreshAccountEvent.dispatchEvent();var i=Xa.parseCancelOrderStatusStreaminSEOSResponse(e);return i.isSuccess?i:t.$q.reject(i)})["finally"](function(){t.uncheckedCancelFlagAllEquity(),t.setStopShowRequestingEquity()})},e.prototype.cancelOrderDerivatives=function(e){var t=this,i=this.generateCancelOrderDerivativesRequestData(e);return this.setShowRequestingDerivatives(),this.itpdService.cancelOrder(i).then(function(e){t.updateDirtyDerivativesOrderStatus(),t.refreshAccountEvent.dispatchEvent();var i=Xa.parseCancelOrderDerivativesResponse(e);return i.isSuccess?i:t.$q.reject(i)})["finally"](function(){t.uncheckedCancelFlagAllDerivatives(),t.setStopShowRequestingDerivatives()})},e.prototype.generateCancelOrderEquityRequestData=function(e){var t=[],i=[],r=[];e.orders.forEach(function(n){var o=n.orderNo+"|"+n.sequenceNumber+"|"+n.tradeDate;t.push(e.accountFrontType===fi.DGW?o:n.orderNoSeos),e.accountFrontType!==fi.DGW&&i.push(n.orderNoFis),r.push(n.symbol)});var n=new xt;return n.txtAccountNo=e.accountNo,n.txtPIN_new=e.pin,n.txtOrderNo=t.join(","),0!==i.length&&(n.extOrderNo=i.join(",")),n.txtCancelSymbol=r.join(","),n},e.prototype.generateCancelOrderDerivativesRequestData=function(e){var t=[],i=[],r=[];e.orders.forEach(function(e){t.push(e.orderNo),i.push(e.seriesId),r.push(e.sendDate)});var n=new Xt;return this.currentAccount.isAllDerivatives()?n.accountNo=e.accountNo.join(","):n.accountNo=e.accountNo[0],n.pin=e.pin,n.orderNo=t.join(","),n.seriesId=i.join(","),n.sendDate=r.join(","),n},e.prototype.checkedCancelFlagEquity=function(e){var t=this;this.currentEquityOrderStatusList.some(function(i){if(i.orderNo===e&&i.canCancel)return i.isChecked=!0,t.checkIfAllEquityOrdersChecked(),!0})},e.prototype.uncheckedCancelFlagEquity=function(e){var t=this;this.currentEquityOrderStatusList.some(function(i){if(i.orderNo===e)return i.isChecked=!1,t.checkIfAllEquityOrdersChecked(),!0})},e.prototype.checkedCancelFlagDerivatives=function(e){var t=this;this.currentDerivOrderStatusList.some(function(i){if(i.orderNo===e&&i.canCancelled)return i.isChecked=!0,t.checkIfAllDerivativesOrdersChecked(),!0})},e.prototype.uncheckedCancelFlagDerivatives=function(e){var t=this;this.currentDerivOrderStatusList.some(function(i){if(i.orderNo===e)return i.isChecked=!1,t.checkIfAllDerivativesOrdersChecked(),!0})},e.prototype.checkIfAllEquityOrdersChecked=function(){for(var e=0,t=0,i=0;i<this.currentEquityOrderStatusList.length;i++)this.currentEquityOrderStatusList[i].canCancel===!0&&e++,this.currentEquityOrderStatusList[i].isChecked===!0&&t++;e===t&&0!==e?this.isCheckedAllEquity=!0:this.isCheckedAllEquity=!1,this.numberCheckedCancelEquityOrder=t},e.prototype.checkIfAllDerivativesOrdersChecked=function(){for(var e=0,t=0,i=0;i<this.currentDerivOrderStatusList.length;i++)this.currentDerivOrderStatusList[i].canCancelled===!0&&e++,this.currentDerivOrderStatusList[i].isChecked===!0&&t++;e===t&&0!==e?this.isCheckedAllDerivatives=!0:this.isCheckedAllDerivatives=!1,this.numberCheckedCancelDerivativesOrder=t},e.prototype.checkedCancelFlagAllEquity=function(){this.numberCheckedCancelEquityOrder=0;for(var e=0;e<this.currentEquityOrderStatusList.length;e++)this.currentEquityOrderStatusList[e].canCancel&&(this.currentEquityOrderStatusList[e].isChecked=!0,this.numberCheckedCancelEquityOrder++);this.isCheckedAllEquity=!0},e.prototype.uncheckedCancelFlagAllEquity=function(){for(var e=0;e<this.currentEquityOrderStatusList.length;e++)this.currentEquityOrderStatusList[e].canCancel&&(this.currentEquityOrderStatusList[e].isChecked=!1);this.numberCheckedCancelEquityOrder=0,this.isCheckedAllEquity=!1},e.prototype.checkedCancelFlagAllDerivatives=function(){this.numberCheckedCancelDerivativesOrder=0;for(var e=0;e<this.currentDerivOrderStatusList.length;e++)this.currentDerivOrderStatusList[e].canCancelled&&(this.currentDerivOrderStatusList[e].isChecked=!0,this.numberCheckedCancelDerivativesOrder++);this.isCheckedAllDerivatives=!0},e.prototype.uncheckedCancelFlagAllDerivatives=function(){for(var e=0;e<this.currentDerivOrderStatusList.length;e++)this.currentDerivOrderStatusList[e].canCancelled&&(this.currentDerivOrderStatusList[e].isChecked=!1);this.isCheckedAllDerivatives=!1,this.numberCheckedCancelDerivativesOrder=0},e.prototype.clearCurrentDerivativesIsChangingFlag=function(){var e=this;this.changingRowKey&&(this.currentDerivOrderStatusList.some(function(t){return t.key===e.changingRowKey&&(t.isChanging=!1,!0)}),this.changingRowKey=void 0)},e.prototype.clearAllDerivativesIsChangingFlag=function(){this.currentDerivOrderStatusList.forEach(function(e){e.isChanging=!1}),this.changingRowKey=void 0},e.prototype.setCurrentDerivativesIsChangingFlag=function(e){var t=this;this.clearCurrentDerivativesIsChangingFlag(),this.currentDerivOrderStatusList.some(function(i){return!(e!==i.key||!i.canChanged)&&(i.isChanging=!0,t.changingRowKey=i.key,!0)})},e.prototype.clearCurrentEquityIsChangingFlag=function(){var e=this;this.changingRowKey&&(this.currentEquityOrderStatusList.some(function(t){return t.key===e.changingRowKey&&(t.isChanging=!1,!0)}),this.changingRowKey=void 0)},e.prototype.clearAllEquityIsChangingFlag=function(){this.currentEquityOrderStatusList.forEach(function(e){e.isChanging=!1}),this.changingRowKey=void 0},e.prototype.setCurrentEquityIsChangingFlag=function(e){var t=this;this.clearCurrentEquityIsChangingFlag(),this.currentEquityOrderStatusList.some(function(i){return!(e!==i.key||!i.canChangePriceVol)&&(i.isChanging=!0,t.changingRowKey=i.key,!0)})},e.prototype.getEquityOrderStatusViewByKey=function(e){var t;return this.currentEquityOrderStatusList.forEach(function(i){return e===i.key&&(t=i,!0)}),t},e.prototype.getDerivativesOrderStatusViewByKey=function(e){var t;return this.currentDerivOrderStatusList.forEach(function(i){return e===i.key&&(t=i,!0)}),t},e.$inject=["EquityOrderPushPublishSubscriber","DerivativesOrderPushPublishSubscriber","ITPService","ITPDService","AlertService","UserInfoService","$q","$rootScope","CurrentOrderStatusChangeEvent","RefreshEvent","RefreshAccountEvent","CurrentAccountChangeEvent","$filter","MarketrepHierarchyService"],e}(),ac=function(){function e(e,t){this.requestParamValue=e,this.dropdownDisplayValue=t}return Object.defineProperty(e,"lookup",{get:function(){var t={Normal:e.NORMAL,Deposit:e.DEPOSIT,Collateral:e.COLLATERAL};return t},enumerable:!0,configurable:!0}),e.prototype.equal=function(e){return this.dropdownDisplayValue===e.dropdownDisplayValue},e.NORMAL=new e("","Normal"),e.DEPOSIT=new e("D","Deposit"),e.COLLATERAL=new e("C","Collateral"),e.ALL_LIST=[e.NORMAL,e.DEPOSIT,e.COLLATERAL],e.COLLATERAL_ONLY_LIST=[e.NORMAL,e.COLLATERAL],e.DEPOSIT_ONLY_LIST=[e.NORMAL,e.DEPOSIT],e}(),cc=function(){function e(){}return e.generateCancelDerivativesOrdersParams=function(e,t){for(var i=[],r=[],n=0,o=e.length;n<o;n++)i.push({orderNo:e[n].orderNo,sendDate:e[n].sendDate,seriesId:e[n].symbol}),r.push(e[n].accountNo);return{accountNo:r,pin:t,orders:i}},e}(),lc=function(){function e(){}return e}(),uc=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d){this.$q=e,this.userInfoService=t,this.initDataEvent=i,this.orderStatusService=r,this.alertService=n,this.refreshEvent=o,this.piwikService=s,this.pinService=a,this.orderEntrySettingChangeEvent=c,this.currentAccountChangeEvent=l,this.settingsService=u,this.menuService=d,this.setUserRoleCallBack=this.setUserRole.bind(this),this.onOrderEntrySettingChangeCallBack=this.onOrderEntrySettingChange.bind(this),this.onCurrentAccountChangeCallBack=this.onCurrentAccountChange.bind(this),this._currentSystem=new lc,this._currentSystem.equitySide=Be.lookup[""],this._currentSystem.equitySymbol="",this._currentSystem.equityPrice="",this._currentSystem.equityVolume="",this._currentSystem.equityIceberg="",this._currentSystem.equityCondition=Ke.lookup.DAY,this._currentSystem.equityPriceType=Ge.lookup.limit,this._currentSystem.equityIsShowCondition=!1,this._currentSystem.isEquityHasLastOrder=!1,
this._currentSystem.derivSide=Be.lookup[""],this._currentSystem.derivSymbol="",this._currentSystem.derivPrice="",this._currentSystem.derivVolume="",this._currentSystem.derivIceberg="",this._currentSystem.derivIsStopOrderChecked=!1,this._currentSystem.derivCondition=Ke.lookup.DAY,this._currentSystem.derivPriceType=Ge.lookup.limit,this._currentSystem.derivIsShowCondition=!1,this._currentSystem.derivSelectedSession=null,this._currentSystem.derivSessionDate=new Date,this._currentSystem.isDerivativesHasLastOrder=!1,this._currentSystem.derivStopConditionList=Je.ALL;var h=new Date;h.setHours(23),h.setMinutes(59),h.setSeconds(0),this._currentSystem.pin=null,this._currentSystem.derivSessionTime=h,this._currentSystem.isNvdr=!1,this._currentSystem.sblPositioType=ac.NORMAL,this._currentSystem.derivStopCondition=Je.LastHigherThanStopPrice,this.initialSubscribe(),this.onCancelOrderCompleteSignal=new signals.Signal}return e.prototype.initialSubscribe=function(){this.currentOrderEntrySetting=_a.empty(),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack),this.initDataEvent.subscribe(this.setUserRoleCallBack),this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChangeCallBack)},e.prototype.setUserRole=function(){this.isInvestor=this.userInfoService.isInvestor(),this.isMarketRep=this.userInfoService.isMarketRep(),this.isVIP=this.userInfoService.isVIP()},e.prototype.setDerivativesPositionList=function(){this.currentAccount.hasAutoNet?(this._currentSystem.derivPositionList=Ye.ALL_AUTO_NET,this._currentSystem.derivPosition=Ye.OPEN_CLOSE):this.userInfoService.enableAutoPosition?this._currentSystem.derivPositionList=Ye.ALL:this._currentSystem.derivPositionList=Ye.ALL_NO_AUTO},e.prototype.clearDerivativesPositionToDefault=function(){this._currentSystem.derivPosition=this.currentOrderEntrySetting.defaultOrderPosition},e.prototype.onCurrentAccountChange=function(e){this.currentAccount=e,this.clearFormWhenAccountChange(),e.isDerivatives()&&(this.setDerivativesPositionList(),this._currentSystem.derivPosition||this.clearDerivativesPositionToDefault())},e.prototype.getSavePin=function(e){return this.pinService.isSavePin()?this.pinService.pin:e},e.prototype.onOrderEntrySettingChange=function(e){e.autoNVDRConfiguration.enable?this.isNvdr=!0:this.isNvdr=!1,this.currentOrderEntrySetting=e,this._currentSystem.isEquityHasLastOrder=!1,this._currentSystem.isDerivativesHasLastOrder=!1,this._currentSystem.derivPosition=e.defaultOrderPosition},e.prototype.subscribeOnCancelOrderCompleteSignal=function(e){this.onCancelOrderCompleteSignal.add(e)},e.prototype.unsubscribeOnCancelOrderCompleteSignal=function(e){this.onCancelOrderCompleteSignal.remove(e)},Object.defineProperty(e.prototype,"side",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equitySide:this._currentSystem.derivSide:Be.NONE},set:function(e){this.currentAccount&&(this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equitySide=e:this._currentSystem.derivSide=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sidename",{get:function(){return this.side.shortname},set:function(e){this.side=Be.lookup[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.DERIVATIVES?this._currentSystem.derivPosition:void 0:Ye.NONE},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivPosition=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionList",{get:function(){if(this.currentAccount)return this.currentAccount.systemType===mi.DERIVATIVES?this._currentSystem.derivPositionList:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"price",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityPrice:this._currentSystem.derivPrice:""},set:function(e){e||(e=""),this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityPrice=e.toString():this._currentSystem.derivPrice=e.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priceValue",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?yt.toNumber(this._currentSystem.equityPrice):yt.toNumber(this._currentSystem.derivPrice):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityVolume:this._currentSystem.derivVolume:""},set:function(e){e||(e=""),this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityVolume=e.toString():this._currentSystem.derivVolume=e.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeValue",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?yt.toNumber(this._currentSystem.equityVolume):yt.toNumber(this._currentSystem.derivVolume):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iceberg",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityIceberg:this._currentSystem.derivIceberg:""},set:function(e){e||(e=""),this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityIceberg=e.toString():this._currentSystem.derivIceberg=e.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icebergValue",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?yt.toNumber(this._currentSystem.equityIceberg):yt.toNumber(this._currentSystem.derivIceberg):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"condition",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityCondition:this._currentSystem.derivCondition:Ke.DAY},set:function(e){this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityCondition=e:this._currentSystem.derivCondition=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbol",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equitySymbol:this._currentSystem.derivSymbol:""},set:function(e){this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equitySymbol=e:this._currentSystem.derivSymbol=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priceType",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityPriceType:this._currentSystem.derivPriceType:Ge.lookup.limit},set:function(e){this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityPriceType=e:this._currentSystem.derivPriceType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowCondition",{get:function(){return!!this.currentAccount&&(this.currentAccount.systemType===mi.EQUITY?this.currentAccount.sblFlagStatus||this.currentAccount.canTradeSBL||this._currentSystem.equityIsShowCondition||this.currentAccount.hasSBLPositiobTypeDropdownLicense():this._currentSystem.derivIsShowCondition)},set:function(e){this.currentAccount.systemType===mi.EQUITY?this._currentSystem.equityIsShowCondition=e:this._currentSystem.derivIsShowCondition=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pin",{get:function(){return this._currentSystem.pin},set:function(e){this._currentSystem.pin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNvdr",{get:function(){return this._currentSystem.isNvdr},set:function(e){this._currentSystem.isNvdr=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sblPositionType",{get:function(){return this._currentSystem.sblPositioType},set:function(e){this._currentSystem.sblPositioType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStopOrderChecked",{get:function(){return!!this.currentAccount&&(this.currentAccount.systemType===mi.DERIVATIVES?this._currentSystem.derivIsStopOrderChecked:void 0)},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivIsStopOrderChecked=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopSymbol",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivStopSymbol},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivStopSymbol=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopPrice",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivStopPrice},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivStopPrice=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopPriceValue",{get:function(){return this.currentAccount?this.currentAccount.systemType===mi.DERIVATIVES?yt.toNumber(this._currentSystem.derivStopPrice):void 0:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCondition",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivStopCondition},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivStopCondition=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopConditionList",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivStopConditionList},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivStopConditionList=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedSession",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivSelectedSession},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivSelectedSession=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionDate",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivSessionDate},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivSessionDate=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionTime",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivSessionTime},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivSessionTime=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopInstrumentMarketType",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivStopInstrumentMarketType},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivStopInstrumentMarketType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopInstrumentStaticData",{get:function(){if(this.currentAccount.systemType===mi.DERIVATIVES)return this._currentSystem.derivStopInstrumentStaticData},set:function(e){this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES&&(this._currentSystem.derivStopInstrumentStaticData=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"systemType",{get:function(){return this.currentAccount?this.currentAccount.systemType.toString().toLowerCase():""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasLastOrder",{get:function(){return!!this.currentAccount&&(this.currentAccount.systemType===mi.EQUITY?this._currentSystem.isEquityHasLastOrder:this._currentSystem.isDerivativesHasLastOrder)},set:function(e){this.currentAccount.systemType===mi.EQUITY?this._currentSystem.isEquityHasLastOrder=e:this._currentSystem.isDerivativesHasLastOrder=e},enumerable:!0,configurable:!0}),e.prototype.processStopConditionList=function(e){this.stopConditionList;return e===Be.BUY?(this.stopConditionList=Je.FOR_LONG,void(this.stopCondition=this.stopConditionList[0])):e===Be.SELL?(this.stopConditionList=Je.FOR_SHORT,void(this.stopCondition=this.stopConditionList[0])):e===Be.NONE?(this.stopConditionList=Je.ALL,void(this.stopCondition=this.stopConditionList[0])):void 0},e.prototype.cancelMultipleOrders=function(){this.currentAccount.systemType===mi.EQUITY&&this.cancelOrdersEquity(this.orderStatusService.checkedEquityOrderStatusList),this.currentAccount.systemType===mi.DERIVATIVES&&this.cancelOrdersDerivatives(this.orderStatusService.checkedDerivativesOrderStatusList),this.piwikService.eventTrack(nt.CLICK_MULTICANCEL,rt.ORDER_STATUS)},e.prototype.cancelOrdersDerivatives=function(e){var t=this,i=!(null===this.pin||void 0!==this.pin&&0===this.pin.length),r=!i&&!this.pinService.isSavePin()&&this.isInvestorApplicationRole();this.currentOrderEntrySetting.confirmPopUp.enable||r?this.alertService.showCancelOrderConfirmAlert(null,e,r).then(function(r){i||(t.pin=t.pinService.getPin(r)),t.doCancelOrderDerivatives(e)}):this.doCancelOrderDerivatives(e)},e.prototype.doCancelOrderDerivatives=function(e){var t=this,i=cc.generateCancelDerivativesOrdersParams(e,this.pin);this.orderStatusService.cancelOrderDerivatives(i).then(function(e){},function(e){t.alertService.showErrorAlert(e.errorMessage).then(null,null)["finally"](function(){t.onCancelOrderCompleteSignal.dispatch()})})["finally"](function(){t.processPinWhenClearPin(),t.onCancelOrderCompleteSignal.dispatch()})},e.prototype.cancelOrdersEquity=function(e){var t=this,i=!(null===this.pin||void 0!==this.pin&&0===this.pin.length),r=!i&&!this.pinService.isSavePin()&&this.isInvestorApplicationRole();this.currentOrderEntrySetting.confirmPopUp.enable||r?this.alertService.showCancelOrderConfirmAlert(e,null,r).then(function(r){i||(t.pin=t.pinService.getPin(r)),t.doCancelOrderEquity(e)},function(){t.onCancelOrderCompleteSignal.dispatch()}):this.doCancelOrderEquity(e)},e.prototype.doCancelOrderEquity=function(e){var t=this,i=this.generateCancelEquityOrdersParams(e);this.orderStatusService.cancelOrderEquity(i).then(function(e){},function(e){t.alertService.showErrorAlert(e.errorMessage).then(null,null)["finally"](function(){t.onCancelOrderCompleteSignal.dispatch()})})["finally"](function(){t.processPinWhenClearPin(),t.clearNVDR(),t.onCancelOrderCompleteSignal.dispatch()})},e.prototype.changeOrderDerivatives=function(e,t,i){var r=this;if(this.orderStatusService.isLockChangeOrderDerivatives)return this.alertService.showErrorAlert("Order cannot be changed at this moment. Please wait until previous order is completed."),this.$q.reject();var n=this.checkIsRequiredPin();if(this.currentOrderEntrySetting.confirmPopUp.enable||n)return this.alertService.showChangeOrderConfirmAlert(e.orderNo,t,i,e.priceType,n).then(function(n){var o=r.generateChangeOrderDerivativesParam(e,t,i,r.checkIsPinFilled(),n);return r.lockChangeOrderDerivatives(o),r.sendChangeDerivativesOrder(o),r.processPinWhenClearPin(),r.$q.resolve()},function(){return r.$q.reject()});var o=this.generateChangeOrderDerivativesParam(e,t,i,this.checkIsPinFilled(),null);return this.lockChangeOrderDerivatives(o),this.sendChangeDerivativesOrder(o),this.processPinWhenClearPin(),this.$q.resolve()},e.prototype.sendChangeDerivativesOrder=function(e){var t=this;this.orderStatusService.changeDerivativesOrderStatus(e).then(function(e){t.unlockChangeOrderDerivatives()},function(e){return e.isWarning?void t.onWarningChangeOrderDerivatives(e.message):(t.alertService.showErrorAlert(e.message),void t.unlockChangeOrderDerivatives())})},e.prototype.onWarningChangeOrderDerivatives=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e).then(function(){var e=t.lastSubmitChangeOrderDerivativesParameters;e.isConfirmWarning=!0,t.sendChangeDerivativesOrder(e)},function(){t.unlockChangeOrderDerivatives()})},e.prototype.generateChangeOrderDerivativesParam=function(e,t,i,r,n){var o="";this.isInvestorApplicationRole()&&(o=r?this.pin:this.pinService.isSavePin()?this.pinService.pin:n);var s={orderNo:e.orderNo,newVolume:yt.toNumber(t),oldVolume:e.volume,newPrice:yt.toNumber(i),oldPrice:e.price,newPosition:e.position,oldPosition:e.position,currentPriceType:e.priceType,accountNo:e.accountNo,pin:o};return s},e.prototype.lockChangeOrderDerivatives=function(e){this.orderStatusService.isLockChangeOrderDerivatives=!0,this.lastSubmitChangeOrderDerivativesParameters=e},e.prototype.unlockChangeOrderDerivatives=function(){this.orderStatusService.isLockChangeOrderDerivatives=!1,this.lastSubmitChangeOrderDerivativesParameters=void 0},e.prototype.changeOrderEquity=function(e,t,i){var r=this;if(this.orderStatusService.isLockChangeOrderEquity)return this.alertService.showErrorAlert("Order cannot be changed at this moment. Please wait until previous order is completed."),this.$q.reject();var n=this.checkIsRequiredPin(),o=this.getEquityPriceTypeFromString(e.priceType);if(this.currentOrderEntrySetting.confirmPopUp.enable||n)return this.alertService.showChangeOrderConfirmAlert(e.orderNo,t,i,o,n).then(function(n){var o=r.generateChangeOrderEquityParam(e,t,i,r.checkIsPinFilled(),n);return r.lockChangeOrderEquity(o),r.sendChangeEquityOrder(o),r.processPinWhenClearPin(),r.clearNVDR(),r.$q.resolve()},function(){return r.$q.reject()});var s=this.generateChangeOrderEquityParam(e,t,i,this.checkIsPinFilled(),this.pinService.getPin(null));return this.lockChangeOrderEquity(s),this.sendChangeEquityOrder(s),this.processPinWhenClearPin(),this.clearNVDR(),this.$q.resolve()},e.prototype.sendChangeEquityOrder=function(e){var t=this;this.orderStatusService.changeEquityOrderStatus(e).then(function(e){t.unlockChangeOrderEquity()},function(e){return e.isWarning?void t.onWarningChangeOrderEquity(e.message):(e.isSuccess||t.alertService.showErrorAlert(e.message),void t.unlockChangeOrderEquity())})},e.prototype.onWarningChangeOrderEquity=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e).then(function(){var e={};angular.copy(t.lastSubmitChangeOrderEquityParameters,e),e.isConfirmWarning=!0,t.sendChangeEquityOrder(e)},function(){t.unlockChangeOrderEquity()})},e.prototype.lockChangeOrderEquity=function(e){this.orderStatusService.isLockChangeOrderEquity=!0,this.lastSubmitChangeOrderEquityParameters=e},e.prototype.unlockChangeOrderEquity=function(){this.orderStatusService.isLockChangeOrderEquity=!1,this.lastSubmitChangeOrderEquityParameters=void 0},e.prototype.generateChangeOrderEquityParam=function(e,t,i,r,n){var o="";this.isInvestorApplicationRole()&&(o=r?this.pin:this.pinService.isSavePin()?this.pinService.pin:n);var s=this.getEquityPriceTypeFromString(e.priceType),a={volume:yt.toNumber(t),txtAccountNo:this.currentAccount.accountNo,txtPIN:o,orderNo:e.orderNo,price:yt.toNumber(i),orderNoFis:e.orderNoFis,orderNoSeos:e.orderNoSeos,priceType:s,tradeDate:e.tradeDate,accountFrontType:this.currentAccount.frontType};return a},e.prototype.getEquityPriceTypeFromString=function(e){var t;return t=""!==e?Ge.lookup[e]:Ge.LIMIT},e.prototype.checkIsPinFilled=function(){return!(null===this.pin||void 0!==this.pin&&0===this.pin.length)},e.prototype.checkIsRequiredPin=function(){var e=this.checkIsPinFilled();return!e&&!this.pinService.isSavePin()&&this.isInvestorApplicationRole()},e.prototype.isInvestorApplicationRole=function(){return this.userInfoService.isInvestor()},e.prototype.generateCancelEquityOrdersParams=function(e){for(var t=[],i=0,r=e.length;i<r;i++)t.push({orderNo:e[i].orderNo,orderNoSeos:e[i].orderNoSeos,orderNoFis:e[i].orderNoFis,sequenceNumber:e[i].sequenceNumber,tradeDate:e[i].tradeDate,symbol:e[i].symbol});return{accountNo:this.currentAccount.accountNo,accountFrontType:this.currentAccount.frontType,pin:this.pin,orders:t}},Object.defineProperty(e.prototype,"validityList",{get:function(){return Ke.ALL_EQUITY},enumerable:!0,configurable:!0}),e.prototype.isCurrentAccountIsEquity=function(){return!!this.currentAccount&&this.currentAccount.isEquity()},e.prototype.isCurrentAccountIsDerivative=function(){return!!this.currentAccount&&(this.currentAccount.isDerivatives()&&!this.currentAccount.isAllDerivativesAccount)},e.prototype.isCurrentAccountIsAllDerivative=function(){return!!this.currentAccount&&(this.currentAccount.isAllDerivatives()&&this.currentAccount.isAllDerivativesAccount)},e.prototype.clearValueInStopOrder=function(){this.stopSymbol="",this.stopPrice="",this.processStopConditionList(this.side)},e.prototype.clearFormWhenAccountChange=function(){this.processPinWhenClearPin(),this.currentAccount.isEquity()&&(!this.currentOrderEntrySetting.rememberLastOrderConfiguration.enable||this.currentOrderEntrySetting.rememberLastOrderConfiguration.enable&&!this.hasLastOrder)&&this.clearNVDR()},e.prototype.clearPriceWhenCurrentSymbolChange=function(e,t,i){i||""===e&&this.currentOrderEntrySetting.rememberLastOrderConfiguration.enable&&this.hasLastOrder||e===t&&this.hasLastOrder||e!==t&&this.clearPrice()},e.prototype.clearFormDataAfterCompleteOrderTransaction=function(){this.currentOrderEntrySetting.rememberLastOrderConfiguration.enable||this.clearFormDataWithSettingCriteria(),this.processPinWhenClearPin()},e.prototype.clearFormDataByClearBtn=function(){this.clearFormDataWithSettingCriteria()},e.prototype.clearFormDataWithSettingCriteria=function(){this.side=Be.NONE,this.currentAccount.systemType===mi.DERIVATIVES&&(this.clearDerivativesPositionToDefault(),this.clearValueInStopOrder()),this.symbol="",this.price="",this.volume="",this.iceberg="",this.processPinWhenClearPin(),this.priceType=Ge.lookup.limit,this.condition=Ke.lookup.DAY,this.sessionDate=new Date;var e=new Date;e.setHours(23),e.setMinutes(59),e.setSeconds(0),this.sessionTime=e,this.currentAccount.isEquity()&&(this.clearNVDR(),this.clearDeposit()),this.isStopOrderChecked=!1},e.prototype.processPinWhenClearPin=function(){this.pin=this.pinService.getPinWhenClearForm()},e.prototype.clearNVDR=function(){this.currentOrderEntrySetting.autoNVDRConfiguration.enable?this.isNvdr=!0:this.isNvdr=!1},e.prototype.clearDeposit=function(){this.sblPositionType=ac.NORMAL},e.prototype.clearPrice=function(){this.price=""},e.prototype.clearStopPrice=function(){this.stopPrice=""},e.prototype.shouldShowPinInput=function(){return this.isInvestorApplicationRole()},e.prototype.getOrderStatusClass=function(){return this.settingsService.displayConfiguration.isWideScreen?this.menuService.isShowAllOrder()?this.isShowCondition&&!this.currentAccount.isAllDerivatives()?st.WideScreen.VIEW_ALL_ORDER_STATUS_LIST_SHOW_CONDITION:st.WideScreen.VIEW_ALL_ORDER_STATUS_LIST:this.isShowCondition&&!this.currentAccount.isAllDerivatives()?st.WideScreen.ORDER_STATUS_LIST_SHOW_CONDITION:st.WideScreen.ORDER_STATUS_LIST:this.menuService.isShowAllOrder()?this.isShowCondition&&!this.currentAccount.isAllDerivatives()?st.NormalScreen.VIEW_ALL_ORDER_STATUS_LIST_SHOW_CONDITION:st.NormalScreen.VIEW_ALL_ORDER_STATUS_LIST:this.isShowCondition&&!this.currentAccount.isAllDerivatives()?st.NormalScreen.ORDER_STATUS_LIST_SHOW_CONDITION:st.NormalScreen.ORDER_STATUS_LIST},e.prototype.getTfexOrderStatusClass=function(){return this.settingsService.displayConfiguration.isWideScreen?this.isMarketRep?st.WideScreen.TFEX_ORDER_STATUS_LIST_MARKET_REP:st.WideScreen.TFEX_ORDER_STATUS_LIST:this.isMarketRep?st.NormalScreen.TFEX_ORDER_STATUS_LIST_MARKET_REP:st.NormalScreen.TFEX_ORDER_STATUS_LIST},e.$inject=["$q","UserInfoService","InitDataEvent","OrderStatusService","AlertService","RefreshEvent","PiwikService","PinService","OrderEntrySettingChangeEvent","CurrentAccountChangeEvent","SettingsService","MenuService"],e}(),dc=function(){function e(e){this.$document=e}return e.prototype.adjustFontSize=function(e){this.currentWide&&document.getElementsByTagName("body")[0].removeChild(this.currentWide),this.currenNormal&&document.getElementsByTagName("body")[0].removeChild(this.currenNormal);var t=parseFloat(e.replace("vh","")),i=t-.33,r=document.createElement("style");r.type="text/css",r.innerHTML=".font-base { font-size: "+t+"vh; }",document.getElementsByTagName("body")[0].appendChild(r),this.currentWide=r;var n=document.createElement("style");n.type="text/css",n.media="screen and (max-aspect-ratio: 5/3)",n.innerHTML=" @media screen and (max-aspect-ratio: 5/3) { .font-base { font-size: "+i+"vh; } }",document.getElementsByTagName("body")[0].appendChild(n),this.currenNormal=n},e.prototype.setFontBold=function(e){this.isFontBold=!!e},e.$inject=["$document"],e}(),hc=function(){function e(){}return e}(),pc=function(){function e(e,t){this.itpdService=e,this.$q=t}return e.prototype.getAllAccountsUnderHierarchy=function(){var e=this;return this.accountsUnderHierarchy?this.$q.resolve(this.accountsUnderHierarchy):this.itpdService.getAllAccountsUnderHierarchy().then(function(t){if("T"===t.result){var i=t.accountList.map(function(e){var t=new hc;return t.accountNo=e,t.systemType=mi.DERIVATIVES,t});return e.accountsUnderHierarchy=i,e.$q.resolve(i)}},function(t){return e.$q.reject(t)})},e.$inject=["ITPDService","$q"],e}(),mc=function(){function e(e,t,i){this.$q=e,this.mmService=t,this.alertService=i}return e.prototype.logout=function(){var e=this;return this.mmService.logout().then(function(t){return e.$q.resolve(t)},function(t){return t.message&&t.message.length>0&&e.alertService.showErrorAlert(t.message),e.$q.reject()})},e.$inject=["$q","MMService","AlertService"],e}();angular.module("service",["multi-market","event-emitter","piwik","feedback","settings"]).service("InstrumentService",qr).service("AccountService",pi).service("UserInfoService",hr).service("PinService",Ta).service("TimeService",Es).service("PageService",fs).service("MenuService",Aa).service("SenseService",ma).service("UserEnvironmentService",zo).service("UserApplicationProfileService",va).service("ExceptionStore",Ko).service("SoundService",Ga).service("OrderProcessor",uc).service("DisplayService",dc).service("FacebookService",ga).service("MarketrepHierarchyService",pc).service("SessionService",mc).service("SenseAnalyticsService",ls).service("GAService",Qo).service("ScreenTrackerService",us);var vc=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){var t=new vi;t.accountNo=e.accountNo,t.accountType=e.accountType,t.canTrade=e.canTrade,t.frontType=e.frontType,t.systemType=e.systemType,t.isEmptyAccount=e.isEmptyAccount,t.canUseBasket=e.canUseBasket,t.hasAutoNet=e.hasAutoNet,t.sblFlag=e.sblFlag,t.canTradeSellCollateral=e.canTradeSellCollateral,t.canTradeSellDeposit=e.canTradeSellDeposit,t.clientType=e.clientType,t.accountName=e.accountName,t.canTradeSBL=e.canTradeSBL,t.isAllDerivativesAccount=e.isAllDerivativesAccount,this.currentAccount=t,t.isDerivatives()&&(this.latestDerivAccount=t),this.signal.dispatch(t)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.getCurrentAccount=function(){return this.currentAccount},e.prototype.getLatestDerivativesAccount=function(){return this.latestDerivAccount},e}(),fc=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.initDataComplete=function(){this.signal.dispatch(e.INIT_DATA_COMPLETE)},e.INIT_DATA_COMPLETE=!0,e}(),yc=function(){function e(){}return e}(),gc=function(){function e(e){this.$rootScope=e,this.onScrollEventCallBack=this.onScrollEvent.bind(this),this.signal=new ci,this.$rootScope.$on("vsRepeatOnScrollEnd",this.onScrollEventCallBack)}return e.prototype.subscribeOnScroll=function(e,t){this.signal.add(e,t),this.signal.getSignal(e).memorize=!0},e.prototype.unsubscribeOnScroll=function(e,t){this.signal.remove(e,t)},e.prototype.onScrollEvent=function(e,t){this.signal.dispatch(t.elementId,t)},e.prototype.reCalculateScroll=function(e){e.$broadcast("vsRepeatReCalculateScrollPosition")},e.$inject=["$rootScope"],e}(),Sc=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.dispatchEvent=function(){this.signal.dispatch()},e}(),bc=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){this.signal.dispatch(angular.copy(e))},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),Cc=function(){function e(){this.signal=new li}return e.prototype.subscribeEquity=function(e){this.signal.add("Equity",e)},e.prototype.subscribeDerivatives=function(e){this.signal.add("Derivatives",e)},e.prototype.unsubscribeEquity=function(e){this.signal.remove("Equity",e)},e.prototype.unsubscribeDerivatives=function(e){this.signal.remove("Derivatives",e)},e.prototype.dispatchEquity=function(e){this.signal.dispatch("Equity",e)},e.prototype.dispatchDerivatives=function(e){this.signal.dispatch("Derivatives",e)},e}(),Ec=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(){this.signal.dispatch()},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),Ac=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(){this.signal.dispatch()},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),wc=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.dispatchEvent=function(){this.signal.dispatch()},e}(),Tc=function(){function e(){}return e.EditFavourite="EditFavourite",e.Favourite="Favourite",e.MyPort="MyPort",e.SET="SET",e.TFEX="TFEX",e.FUTURES="FUTURES",e.OPTIONS="Options",e}(),Dc=function(){function e(){}return e.Favourite="Favourite",e.MyPort="MyPort",e.Equity="Equity",e.Derivative="Derivatives",e.EditFavourite="EditFavourite",e.OptionsList="OptionsList",e}(),Ic=function(){function e(){}return e.PRICE="price",e.VOLATILITY="volatility",e}(),Pc=function(){function e(e,t){this.showName=e,this.key=t}return e.prototype.isByPrice=function(){return this.key===Ic.PRICE},e.prototype.isVolatility=function(){return this.key===Ic.VOLATILITY},e.PRICE=new e("Price",Ic.PRICE),e.VOLATILITY=new e("Volatility",Ic.VOLATILITY),e.LIST=[e.PRICE,e.VOLATILITY],e.lookup={Price:e.PRICE,price:e.PRICE,Volatility:e.VOLATILITY,volatility:e.VOLATILITY},e}(),Oc=function(){function e(e,t,i,r){this.newCurrentMode=e,this.currentCategory=t,this.currentFavouriteDropdown=i,this.optionsListMode=r}return e}(),kc=function(){function e(){this.signal=new li}return e.prototype.subscribe=function(e,t){this.signal.add(e,t)},e.prototype.publish=function(e,t){this.signal.dispatch(e,t)},e.prototype.unsubscribe=function(e,t){this.signal.remove(e,t)},e}(),$c=function(){function e(e,t){this.$rootScope=e,this.keyboardShortcutSettingChangeEvent=t,this.onKeyDownCallback=this.onKeyDown.bind(this),this.onKeyUpCallback=this.onKeyUp.bind(this),this.onKeyPressCallback=this.onKeyPress.bind(this),this.onKeyboardShortcutSettingChangeCallback=this.onKeyboardShortcutSettingChange.bind(this),this.ctrlDown=!1,this.signal=new ci,this.keyboardShortcutSettingChangeEvent.subscribe(this.onKeyboardShortcutSettingChangeCallback)}return e.prototype.onKeyboardShortcutSettingChange=function(e){e.isEnable?this.detectKBShortCut():this.stopDetectKBShortCut()},e.prototype.subscribeChangeSide=function(t){this.signal.add(e.CHANGE_SIDE,t)},e.prototype.unsubscribeChangeSide=function(t){this.signal.remove(e.CHANGE_SIDE,t)},e.prototype.subscribeNeedFocusMarketrepAccountNoInput=function(t){this.signal.add(e.FOCUS_ACCOUNT_INPUT,t)},e.prototype.unsubscribeNeedFocusMarketrepAccountNoInput=function(t){
this.signal.remove(e.FOCUS_ACCOUNT_INPUT,t)},e.prototype.subscribeGoToLastOrderStatus=function(t){this.signal.add(e.GO_TO_LAST_ORDER_STATUS,t)},e.prototype.unsubscribeGoToLastOrderStatus=function(t){this.signal.remove(e.GO_TO_LAST_ORDER_STATUS,t)},e.prototype.detectKBShortCut=function(){document.addEventListener("keydown",this.onKeyDownCallback),document.addEventListener("keyup",this.onKeyUpCallback),document.addEventListener("keypress",this.onKeyPressCallback)},e.prototype.stopDetectKBShortCut=function(){document.removeEventListener("keydown",this.onKeyDownCallback),document.removeEventListener("keyup",this.onKeyUpCallback),document.removeEventListener("keypress",this.onKeyPressCallback)},e.prototype.onKeyDown=function(t){this.ctrlDown&&t.which===e.qKey&&this.onNeedFocusMarketrepAccountNoInput(),t.which===e.ctrlKey&&(this.ctrlDown=!0)},e.prototype.onKeyUp=function(t){t.which===e.ctrlKey&&(this.ctrlDown=!1)},e.prototype.onKeyPress=function(t){t.which===e.MULTIPLY_KEY&&this.onNeedGoToLastOrderStatus(),t.which===e.PLUS_KEY&&(t.preventDefault(),this.onChangeSideToBuy()),t.which===e.DIVIDE_KEY&&(t.preventDefault(),this.onChangeSideToSell())},e.prototype.onChangeSideToBuy=function(){var t=this;this.$rootScope.$$phase?this.signal.dispatch(e.CHANGE_SIDE,Be.BUY):this.$rootScope.$apply(function(){t.signal.dispatch(e.CHANGE_SIDE,Be.BUY)})},e.prototype.onChangeSideToSell=function(){var t=this;this.$rootScope.$$phase?this.signal.dispatch(e.CHANGE_SIDE,Be.SELL):this.$rootScope.$apply(function(){t.signal.dispatch(e.CHANGE_SIDE,Be.SELL)})},e.prototype.onNeedFocusMarketrepAccountNoInput=function(){var t=this;this.$rootScope.$$phase?this.signal.dispatch(e.FOCUS_ACCOUNT_INPUT,!0):this.$rootScope.$apply(function(){t.signal.dispatch(e.FOCUS_ACCOUNT_INPUT,!0)})},e.prototype.onNeedGoToLastOrderStatus=function(){var t=this;this.$rootScope.$$phase?this.signal.dispatch(e.GO_TO_LAST_ORDER_STATUS,!0):this.$rootScope.$apply(function(){t.signal.dispatch(e.GO_TO_LAST_ORDER_STATUS,!0)})},e.$inject=["$rootScope","KeyboardShortcutSettingChangeEvent"],e.ctrlKey=17,e.qKey=81,e.PLUS_KEY=43,e.DIVIDE_KEY=47,e.MULTIPLY_KEY=42,e.CHANGE_SIDE="CHANGE_SIDE",e.FOCUS_ACCOUNT_INPUT="FOCUS_ACCOUNT_INPUT",e.GO_TO_LAST_ORDER_STATUS="GO_TO_LAST_ORDER_STATUS",e}(),Lc=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){var t=angular.copy(e);this.lastApplied=t,this.signal.dispatch(t)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),Nc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Sc),Mc=function(){function e(e){this.timeService=e,this.signal=new signals.Signal,this.signal.memorize=!1}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(){var e=this.timeService.getTime();if(e.isTimeSync){var t=e.syncDate;this.signal.dispatch(t.format("HH:mm:ss"))}else this.signal.dispatch("")},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.$inject=["TimeService"],e}(),Rc=function(){function e(){this.signal=new signals.Signal,this.signal.memorize=!0}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){this.signal.dispatch(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),_c=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){var t=new vi;t.accountNo=e.accountNo,t.accountType=e.accountType,t.canTrade=e.canTrade,t.frontType=e.frontType,t.systemType=e.systemType,t.isEmptyAccount=e.isEmptyAccount,t.canUseBasket=e.canUseBasket,t.hasAutoNet=e.hasAutoNet,t.sblFlag=e.sblFlag,t.canTradeSellCollateral=e.canTradeSellCollateral,t.canTradeSellDeposit=e.canTradeSellDeposit,t.clientType=e.clientType,t.accountName=e.accountName,t.canTradeSBL=e.canTradeSBL,t.isAllDerivativesAccount=e.isAllDerivativesAccount,this.currentAccount=t,t.isDerivatives()&&(this.latestDerivAccount=t),this.signal.dispatch(t)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e.prototype.getCurrentAccount=function(){return this.currentAccount},e.prototype.getLatestDerivativesAccount=function(){return this.latestDerivAccount},e}();angular.module("event-emitter",[]).service("InitDataEvent",fc).service("VirtualScrollEvent",gc).service("CurrentSymbolChangeEvent",dr).service("CurrentAccountChangeEvent",vc).service("CurrentAccountDCAChangeEvent",_c).service("RefreshEvent",Sc).service("RefreshAccountEvent",wc).service("ConnectionStatusChangeEvent",Yr).service("SavePinChangeEvent",wa).service("ProcessMenuEvent",Ea).service("CurrentOrderStatusChangeEvent",Cc).service("AllNotificationSettingChangeEvent",bc).service("ForceOpenNotificationInboxEvent",Ec).service("OrderEntrySettingChangeEvent",xa).service("DisplaySettingChangeEvent",Ua).service("TradeReportClearEvent",Ac).service("WatchModeChangeEvent",kc).service("KeyboardShortcutSettingChangeEvent",ba).service("GlobalKeyboardShortcutEvent",$c).service("OptionsSummaryAppliedConditionChangeEvent",Lc).service("OptionsSummaryRefreshEvent",Nc).service("OpenStockScreenerBySenseNotificationActionEvent",Rc).service("OptionsSummaryTableDataChangeEvent",Mc);var Vc=function(){function e(e){this.refreshEvent=e}return e.prototype.onClickButton=function(){this.refreshEvent.dispatchEvent()},e.$inject=["RefreshEvent"],e}(),Bc=function(){function e(){var e=this;this.restrict="A",this.link=function(t,i,r,n){var o=e.calculateFontSize;t.$watch(r.value,function(e,t){if(void 0!==e&&e!==t){i.removeAttr("style");var r=parseFloat(i.parent().css("width")),n=parseFloat(i.css("width"));if(n<=r)return;var s=parseFloat(i.css("font-size").split("px")[0]),a=parseFloat(i.parents("body").css("font-size").split("px")[0]);i.css("font-size",o(r,n,a,s)+"rem")}})}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.calculateFontSize=function(e,t,i,r){var n=t-e,o=t/r,s=n/o,a=Math.round((r-s)/i*100)/100;return""+a},e}(),xc=function(){function e(){var e=this;this.restrict="A",this.link=function(t,i,r,n){e.addRemoveHide(r.sttShow,i),t.$watch(r.sttShow,function(t,r){e.addRemoveHide(t,i)})}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.addRemoveHide=function(e,t){e?t.removeClass("hide"):t.addClass("hide")},e}(),Fc=function(){function e(){var e=this;this.restrict="A",this.link=function(t,i,r,n){e.addRemoveActive(r.sttActiveElement,i),t.$watch(r.sttActiveElement,function(t,r){e.addRemoveActive(t,i)})}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.addRemoveActive=function(e,t){e?t.addClass("active"):t.removeClass("active")},e}(),Uc=function(){function e(){}return e.toUnreadOrBottom=function(t){var i=t.find("notification-message .unread")[0];void 0===i?e.toBottom(t):i.scrollIntoView(!0)},e.toBottom=function(e){var t=e.find("notification-message:last")[0];t.scrollIntoView()},e}(),qc=function(){function e(){this.restrict="A",this.link=function(e,t,i,r){t.on("load",function(){t.off("load");var e=t.parents("notification-inbox ul.scroll-container");Uc.toUnreadOrBottom(e)})}}return e.factory=function(){var t=function(){return new e};return t},e}(),jc=function(){function e(e,t){this.streamingAttribute=e,this.$window=t}return e.prototype.openTSLevel=function(){this.$window.open(this.streamingAttribute.itpHost+"/TurnoverListStocks.jsp","_blank","scrollbars=yes,resizable=yes,height=550,width=700")},e.$inject=["StreamingAttribute","$window"],e}(),Hc=function(){function e(e,t,i,r,n){this.$element=e,this.$window=t,this.$scope=i,this.uiComponentsEventEmitter=r,this.$rootScope=n,this.isShowPopover=!1,this.buttonClassName="mdi mdi-close sense-dislike-button"}return e.prototype.showComponent=function(){this.isShowPopover=!this.isShowPopover},e.prototype.shouldShowComponent=function(){this.isShowPopover=!0},e.prototype.shouldHideComponent=function(){this.isShowPopover=!1},e.$inject=["$element","$window","$scope","UIComponentsEventEmitter","$rootScope"],e}();(function(){function e(){}return e})();angular.module("ui-component",["event-emitter"]).directive("dynamicFontSize",Bc.factory()).directive("sttShow",xc.factory()).directive("sttActiveElement",Fc.factory()).directive("scrollOnLoadImage",qc.factory()).component("refreshUiComponent",{template:i(/*! ../../html/ui-component/refresh.html */86),controller:Vc,bindings:{isRequesting:"<"}}).component("tsLevel",{template:i(/*! ../../html/ui-component/ts-level.html */87),controller:jc,bindings:{level:"<"}}).component("buttonWithPopover",{template:i(/*! ../../html/ui-component/button-with-popover.html */88),controller:Hc,bindings:{buttonClassName:"<",actionOptions:"<"}}).service("UIComponentsEventEmitter",xe),W.$inject=["$filter"],Y.$inject=["$filter"],G.$inject=["$filter"],K.$inject=["$filter"],z.$inject=["$filter"],Q.$inject=["$filter"],angular.module("number-formatter",[]).filter("price",a).filter("volume",c).filter("pov",function(){return s}).filter("change",function(){return m}).filter("percent",function(){return y}).filter("percentChange",function(){return f}).filter("bidOffer",function(){return S}).filter("orderEquityPrice",function(){return l}).filter("orderDerivPrice",function(){return u}).filter("priceWithPriceType",function(){return d}).filter("nullableChange",T).filter("nullablePercentChange",D).filter("nullablePercentChangeWithParenthesis",I).filter("nanableChangeByTrend",z).filter("nanablePercentChangeByTrend",Q).filter("elipsis",J).filter("emptyPrice",P).filter("emptyTotalVol",O).filter("nanableChange",W).filter("nanablePercentChange",Y).filter("nanablePrice",G).filter("nanableCurrencyPrice",K).filter("padZero",function(){return b}).filter("currencyPrice",function(){return g}).filter("formatWithoutDigit",function(){return o}).filter("formatVolumeKM",function(){return C});var Wc=function(){function e(e,t,i,r,n,o){this.colorService=e,this.$q=t,this.userInfo=i,this.instrumentService=r,this.piwikService=n,this.userApplicationProfileService=o,this.editMode=!1,this.isFavouriteMode=!0,this.favourite&&!this.favourite.isAddRow?this.currentSymbol=this.favourite.symbol:this.currentSymbol=""}return e.prototype.onClickSymbol=function(){var e=this;this.instrumentService.searchSymbol(this.favourite.symbol,Qe.ALL).then(function(t){e.userApplicationProfileService.setCurrentSymbol(t)}),this.piwikService.eventTrackLabel(nt.CLICK_SYMBOL,rt.FAVOURITE,this.favourite.symbol)},e.prototype.$onInit=function(){this.isFavouriteMode=this.currentMode===Dc.Favourite},e.prototype.isEditMode=function(){return!this.favourite.isAddRow&&this.editMode},e.prototype.isAddMode=function(){return this.favourite.isAddRow},e.prototype.isViewMode=function(){return!this.favourite.isAddRow&&!this.editMode},e.prototype.isSupportEditSymbol=function(){return this.isFavouriteMode&&!this.userApplicationProfileService.isSecondaryWindow},e.prototype.onDelete=function(){this.watchListController.onDelete(this.favourite.symbol)},e.prototype.onUpdateSymbol=function(e){var t=this.watchListController.replaceSymbol(this.currentSymbol,e.name);return t&&(this.currentSymbol=e.name),t},e.prototype.emitBestOfferWithSideBuyEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.favourite.symbol,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.BUY)}),this.piwikService.eventTrack(nt.CLICK_BESTOFFER,rt.FAVOURITE)},e.prototype.emitBestBidWithSideSellEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.favourite.symbol,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.SELL)}),this.piwikService.eventTrack(nt.CLICK_BESTBID,rt.FAVOURITE)},e.prototype.isMustShowTooltip=function(){return this.favourite.name.length>12},e.prototype.getFavouriteCategory=function(){return rt.FAVOURITE},e.prototype.getDoubleClickSymbolAction=function(){return nt.DOUBLECLICK_SYMBOL},e.$inject=["ColorService","$q","UserInfoService","InstrumentService","PiwikService","UserApplicationProfileService"],e}(),Yc=function(){function e(){this.isChecked=!1}return e}(),Gc=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h){var p=e.call(this,l)||this;return p.$scope=t,p.$interval=i,p.favouriteService=r,p.initDataEvent=n,p.$q=o,p.userInfoService=s,p.piwikService=a,p.uiComponentsEventEmitter=c,p.pageService=l,p.watchStore=u,p.userApplicationProfileService=d,p.watchModeChangeEvent=h,p.initialSymbolListCallBack=p.initialSymbolList.bind(p),p.onFilterMustCloseCallBack=p.onFilterMustClose.bind(p),p}return ne(t,e),t.prototype.startService=function(){this.initDataEvent.subscribe(this.initialSymbolListCallBack),this.uiComponentsEventEmitter.subscribe(this.onFilterMustCloseCallBack)},t.prototype.stopService=function(){this.initDataEvent.unsubscribe(this.initialSymbolListCallBack),this.uiComponentsEventEmitter.unsubscribe(this.onFilterMustCloseCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.initialSymbolList=function(){this.menu=this.favouriteService.equityCategoryList,this.favouriteDropdownItemList=this.favouriteService.getFavouriteDropdownItemListWithHeaderAndMyPort(),this.initialCurrentMode(),this.initialFilterList(),this.onCurrentSelectorModeChange()},t.prototype.initialCurrentMode=function(){switch(this.currentMode=this.favouriteService.getCurrentWatchMode(),this.currentMode){case Dc.MyPort:case Dc.Favourite:this.currentSelectorMode=Tc.Favourite,this.currentFavouriteDropdownItem=this.watchStore.getCurrentFavouriteDropdown();break;case Dc.Equity:this.currentSelectorMode=Tc.SET;break;case Dc.Derivative:case Dc.OptionsList:this.currentSelectorMode=Tc.TFEX;break;default:this.currentSelectorMode=Dc.Favourite,this.currentFavouriteDropdownItem=this.favouriteDropdownItemList[1],this.watchStore.setCurrentFavouriteDropdown(this.currentFavouriteDropdownItem)}},t.prototype.initialFilterList=function(){this.filterList=this.favouriteService.getFilterList()},t.prototype.registerClickDoneCallBack=function(e){this.onClickDoneRegisteredCallBack=e},t.prototype.onFavoriteChange=function(e){this.watchStore.setCurrentFavouriteDropdown(e),this.currentFavouriteDropdownItem=e,this.currentSelectorMode=Tc.Favourite,this.onCurrentSelectorModeChange(),this.piwikService.eventTrackLabel(nt.SELECT_FAVOURITE,rt.FAVOURITE,e.showName)},t.prototype.onCategoryChange=function(e){switch(this.currentCategoryItem=e,this.currentMode===Dc.Derivative&&e.type===ue.OPTION_REQUEST&&this.changeModeToOptionsListTable(),this.currentMode===Dc.OptionsList&&e.type!==ue.OPTION_REQUEST&&this.changeModeToDerivativesWatchTable(),this.currentMode){case Dc.Equity:this.favouriteService.setCurrentEquityCategory(this.currentCategoryItem),this.dispatchOnViewMustUpdate(new Oc(this.currentMode,this.currentCategoryItem,null,null)),this.piwikService.eventTrackLabel(nt.SELECT_SET_TFEX_LIST,rt.FAVOURITE,"SET_"+this.currentCategoryItem.name);break;case Dc.Derivative:this.favouriteService.setCurrentDerivativesCategory(this.currentCategoryItem),this.dispatchOnViewMustUpdate(new Oc(this.currentMode,this.currentCategoryItem,null,null)),this.piwikService.eventTrackLabel(nt.SELECT_SET_TFEX_LIST,rt.FAVOURITE,"TFEX_"+this.currentCategoryItem.name);break;case Dc.OptionsList:this.clearOptionsLastTradingDate(),this.favouriteService.setCurrentDerivativesCategory(this.currentCategoryItem),this.dispatchOnViewMustUpdate(new Oc(this.currentMode,this.currentCategoryItem,null,Pc.PRICE)),this.piwikService.eventTrackLabel(nt.SELECT_SET_TFEX_LIST,rt.FAVOURITE,"TFEX_"+this.currentCategoryItem.name)}},t.prototype.changeModeToOptionsListTable=function(){this.currentMode=Dc.OptionsList,this.favouriteService.setCurrentWatchMode(Dc.OptionsList)},t.prototype.changeModeToDerivativesWatchTable=function(){this.currentMode=Dc.Derivative,this.favouriteService.setCurrentWatchMode(Dc.Derivative)},t.prototype.resetSelectedFavouriteDropdown=function(){this.favouriteDropdownItemList[0]&&(this.currentFavouriteDropdownItem=this.favouriteDropdownItemList[0])},t.prototype.onCurrentSelectorModeChange=function(){switch(this.currentSelectorMode){case Tc.Favourite:switch(this.currentFavouriteDropdownItem.mode){case yr.FAVOURITE:this.currentMode=Dc.Favourite;break;case yr.MY_PORT:this.currentMode=Dc.MyPort}this.favouriteService.setCurrentWatchMode(this.currentMode),this.dispatchOnViewMustUpdate(new Oc(this.currentMode,null,this.currentFavouriteDropdownItem,null));break;case Tc.SET:this.currentMode=Dc.Equity,this.resetSelectedFavouriteDropdown(),this.menu=this.favouriteService.equityCategoryList,this.currentCategoryItem=this.favouriteService.getCurrentEquityCategory(),this.favouriteService.setCurrentWatchMode(this.currentMode),this.dispatchOnViewMustUpdate(new Oc(this.currentMode,this.currentCategoryItem,null,null)),this.piwikService.eventTrackLabel(nt.SELECT_SET_TFEX_LIST,rt.FAVOURITE,"SET_"+this.currentCategoryItem.name);break;case Tc.TFEX:this.resetSelectedFavouriteDropdown(),this.menu=this.favouriteService.derivCategoryList,this.currentCategoryItem=this.favouriteService.getCurrentDerivativesCategory(),this.currentCategoryItem.type===ue.OPTION_REQUEST?this.currentMode=Dc.OptionsList:this.currentMode=Dc.Derivative,this.favouriteService.setCurrentWatchMode(this.currentMode);var e=new Oc(this.currentMode,this.currentCategoryItem,null,null);this.currentCategoryItem.type===ue.OPTION_REQUEST&&(e.optionsListMode=Pc.PRICE),this.dispatchOnViewMustUpdate(e),this.piwikService.eventTrackLabel(nt.SELECT_SET_TFEX_LIST,rt.FAVOURITE,"TFEX_"+this.currentCategoryItem.name);break;case Dc.EditFavourite:this.currentMode=Dc.EditFavourite,this.piwikService.eventTrack(nt.CLICK_EDIT,rt.FAVOURITE)}},t.prototype.changeCurrentModeToSET=function(){this.currentSelectorMode=Tc.SET,this.onCurrentSelectorModeChange()},t.prototype.changeCurrentModeToTFEX=function(){this.currentSelectorMode=Tc.TFEX,this.onCurrentSelectorModeChange()},t.prototype.changeCurrentModeToFavourite=function(){this.currentSelectorMode=Tc.Favourite,this.onCurrentSelectorModeChange()},t.prototype.changeCurrentModeToEditFavourite=function(){this.currentSelectorMode=Tc.EditFavourite,this.onCurrentSelectorModeChange()},t.prototype.onClickDoneInEditMode=function(){this.onClickDoneRegisteredCallBack&&this.onClickDoneRegisteredCallBack()},t.prototype.isFavouriteMode=function(){return this.currentMode===Dc.Favourite&&!this.userApplicationProfileService.isSecondaryWindow},t.prototype.isWatchListMode=function(){return this.currentMode===Dc.Favourite||this.currentMode===Dc.Equity||this.currentMode===Dc.Derivative},t.prototype.isMyPortMode=function(){return this.currentMode===Dc.MyPort},t.prototype.isEditFavouriteMode=function(){return this.currentMode===Dc.EditFavourite},t.prototype.isOptionsListMode=function(){return this.currentMode===Dc.OptionsList},t.prototype.setOptionsLastTradingDate=function(e){this.optionsLastTradingDay=e},t.prototype.clearOptionsLastTradingDate=function(){this.optionsLastTradingDay=""},t.prototype.dispatchOnViewMustUpdate=function(e){null!==e.currentCategory&&e.currentCategory.canFilter&&(e.currentCategory.request.boardSubType=this.favouriteService.getSelectedFilterBoardSubTypeList()),this.watchModeChangeEvent.publish(this.page,e)},t.prototype.isEquityOnly=function(){return this.userInfoService.isEquityOnly},t.prototype.isDerivativesOnly=function(){return this.userInfoService.isDerivativesOnly},t.prototype.onFilterChange=function(){this.favouriteService.setFilterList(this.filterList),this.dispatchOnViewMustUpdate(new Oc(this.currentMode,this.currentCategoryItem,null,this.isOptionsListMode()?Pc.PRICE:null))},t.prototype.isCurrentCategoryFilterable=function(){switch(this.currentSelectorMode){case Tc.SET:if(this.currentCategoryItem=this.favouriteService.getCurrentEquityCategory(),this.currentCategoryItem&&this.currentCategoryItem.canFilter)return!0;break;case Tc.TFEX:if(this.currentCategoryItem=this.favouriteService.getCurrentDerivativesCategory(),this.currentCategoryItem&&this.currentCategoryItem.canFilter)return!0}return!1},t.prototype.restoreFilterToDefault=function(){this.favouriteService.restoreFilterToDefault(),this.onFilterChange()},t.prototype.onFilterMustClose=function(){this.isFilterOpen=!1},t.$inject=["$scope","$interval","FavouriteService","InitDataEvent","$q","UserInfoService","PiwikService","UIComponentsEventEmitter","PageService","WatchStore","UserApplicationProfileService","WatchModeChangeEvent"],t.REFRESH_SYMBOL_LIST_INTERVAL=18e4,t}(ys),Kc=function(){function e(){}return e.prototype.isNVDR=function(){return"-R"===this.nvdrFlag},e}(),zc=function(){function e(){this.amount=0,this.marketValue=0,this.unrealizedPL=0,this.percentUnrealizedPL=0,this.realizedPL=0}return e}(),Qc=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h){var p=e.call(this,a,d)||this;return p.$window=t,p.currentAccountChangeEvent=i,p.portfolioService=r,p.refreshEvent=n,p.dealSummaryService=o,p.piwikService=s,p.pageService=a,p.userInfoService=c,p.streamingAttribute=l,p.urlStore=u,p.screenTrackerService=d,p.userEnvironmentService=h,p.EQUITY_PORTFOLIO_TAB_ID=0,p.EQUITY_DEAL_SUMMARY_TAB_ID=1,p.DERIVATIVES_PORTFOLIO_COST_TAB_ID=2,p.DERIVATIVES_PORTFOLIO_SETTLE_TAB_ID=3,p.DERIVATIVES_DEAL_SUMMARY_TAB_ID=4,p.onAccountChangeCallBack=p.onAccountChange.bind(p),p.onRefreshCallBack=p.onRefresh.bind(p),p}return ne(t,e),t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack),this.refreshEvent.subscribe(this.onRefreshCallBack)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.refreshEvent.unsubscribe(this.onRefreshCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){var e={page:this.getAnalyticsScreenName(),accountNo:this.userEnvironmentService.currentAccount.accountNo,system:""+this.userEnvironmentService.currentAccount.systemType,frontType:""+this.userEnvironmentService.currentAccount.frontType};return e},t.prototype.getAnalyticsScreenName=function(){switch(this.active){case this.EQUITY_PORTFOLIO_TAB_ID:return ss.EQUITY_PORTFOLIO;case this.EQUITY_DEAL_SUMMARY_TAB_ID:return ss.EQUITY_DEAL_SUMMARY;case this.DERIVATIVES_PORTFOLIO_COST_TAB_ID:return ss.DERIVATIVES_PORTFOLIO_COST;case this.DERIVATIVES_PORTFOLIO_SETTLE_TAB_ID:return ss.DERIVATIVES_PORTFOLIO_SETTLE;case this.DERIVATIVES_DEAL_SUMMARY_TAB_ID:return ss.DERIVATIVES_DEAL_SUMMARY;default:return ss.EQUITY_PORTFOLIO}},t.prototype.onClickTab=function(){this.changeToPage(),this.trackPagePiwik()},t.prototype.trackPagePiwik=function(){switch(this.active){case this.EQUITY_PORTFOLIO_TAB_ID:this.piwikService.pageTrack(it.PORTFOLIO_EQUITY_PORTFOLIO);break;case this.EQUITY_DEAL_SUMMARY_TAB_ID:this.piwikService.pageTrack(it.PORTFOLIO_EQUITY_DEAL_SUMMARY);break;case this.DERIVATIVES_PORTFOLIO_COST_TAB_ID:this.piwikService.pageTrack(it.PORTFOLIO_DERIVATIVES_PORTFOLIO_COST);break;case this.DERIVATIVES_PORTFOLIO_SETTLE_TAB_ID:this.piwikService.pageTrack(it.PORTFOLIO_DERIVATIVES_PORTFOLIO_SETTLE);break;case this.DERIVATIVES_DEAL_SUMMARY_TAB_ID:this.piwikService.pageTrack(it.PORTFOLIO_DERIVATIVES_DEAL_SUMMARY)}},t.prototype.onAccountChange=function(e){var t=this.currentAccount;switch(this.currentAccount=e,this.currentAccount.systemType){case mi.EQUITY:e.isEmptyAccount||(this.portfolioService.updateEquityPortfolioList(this.currentAccount),this.dealSummaryService.updateEquityDealSummaryList(this.currentAccount)),t&&t.systemType===this.currentAccount.systemType||(this.active=this.EQUITY_PORTFOLIO_TAB_ID);break;case mi.DERIVATIVES:e.isEmptyAccount||(this.portfolioService.updateDerivativesPortfolioList(this.currentAccount),this.dealSummaryService.updateDerivativesDealSummaryList(this.currentAccount)),t&&t.systemType===this.currentAccount.systemType||(this.active=this.DERIVATIVES_PORTFOLIO_COST_TAB_ID)}this.changeToPage()},t.prototype.onRefresh=function(){switch(this.currentAccount.systemType){case mi.EQUITY:this.portfolioService.updateEquityPortfolioList(this.currentAccount),this.dealSummaryService.updateEquityDealSummaryList(this.currentAccount);break;case mi.DERIVATIVES:this.portfolioService.updateDerivativesPortfolioList(this.currentAccount),this.dealSummaryService.updateDerivativesDealSummaryList(this.currentAccount)}},t.prototype.getAccountOutStandingPositionParam=function(){return this.currentAccount.isAllDerivativesAccount?"_ALL":this.currentAccount.isEmptyAccount?"":this.currentAccount.accountNo},t.prototype.onClickOutstandingPosition=function(){this.openPopupWindow(this.makePopupURLfor(this.urlStore.ITPD_OUTSTANDING_POSITION))},t.prototype.onClickPositionClosing=function(){this.openPopupWindow(this.makePopupURLfor(this.urlStore.ITPD_POSITION_CLOSING))},t.prototype.makePopupURLfor=function(e){return this.streamingAttribute.derivHost+e+"&accountNo="+this.getAccountOutStandingPositionParam()},t.prototype.openPopupWindow=function(e){this.popupWindow&&this.popupWindow.close(),this.popupWindow=this.$window.open(e,"DerivativesPopup","scrollbars=yes,resizable=yes,height=400,width=1000")},t.prototype.isShowOutstandingPositionAndPositionClosingButton=function(){return this.userInfoService.isMarketRep()&&void 0!==this.currentAccount&&this.currentAccount.isDerivatives()},t.$inject=["$window","CurrentAccountChangeEvent","PortfolioService","RefreshEvent","DealSummaryService","PiwikService","PageService","UserInfoService","StreamingAttribute","URLStore","ScreenTrackerService","UserEnvironmentService"],t}(Zs),Xc=function(){function e(){}return e.calculateMarketPrice=function(e){var t=Number.NaN;return e.hasSummaryData()&&!isNaN(e.summary.lastDone)&&0!==e.summary.lastDone?t=e.summary.lastDone:e.hasInitData()&&!isNaN(e.initData.previousClose)&&0!==e.initData.previousClose&&(t=e.initData.previousClose),t},e.calculateMktvalue=function(e,t){return isNaN(t)?0:e*t},e.calculateCommission=function(e,t){return Math.abs(e)*t},e.calculateVat=function(e,t){return e*t},e.calculateUnPL=function(e,t,i,r,n){t=isNaN(t)?0:t;var o=e-t-i-r;switch(n){case"B":return 0;case"S":return-o}return o},e.calculatePercentUnPL=function(e,t){return isNaN(e)?Number.NaN:0===t||isNaN(t)||Math.abs(e)<1e-4?0:100*e/Math.abs(t)},e}(),Jc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.START_VOLUME="startVolume",t.AVAILABLE_VOLUME="availVolume",t.ACTUAL_VOLUME="actualVolume",t.AVERAGE_COST="averageCost",t.AVERAGE_PRICE="averagePrice",t.MARKET_PRICE="marketPrice",t.MARKET_VALUE="marketValue",t.UNREALIZED_PL="unrealizedPL",t.PERCENT_UNREALIZED_PL="percentUnrealizedPL",t.REALIZED_PL="realizedPL",t.UNREALIZED_PL_BY_COST="unrealizePLByCost",t.PERCENT_UNREALIZED_PL_BY_COST="percentUnrealizePLByCost",t.REALIZED_PL_BY_COST="realizePLByCost",t.AMOUNT="amount",t.AMOUNT_BY_COST="amountByCost",t.SYMBOL="symbol",t.SIDE="side",t.OPTIONS_VALUE="optionsValue",t}(Ji),Zc=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this,l)||this;return d.currentAccountChangeEvent=t,d.portfolioService=i,d.colorService=r,d.snapshotPubsub=n,d.instrumentService=o,d.userInfo=s,d.portfolioEquityViewParser=a,d.piwikService=c,d.pageService=l,d.userApplicationProfileService=u,d.onAccountChangeCallBack=d.onAccountChange.bind(d),d.onReceiveEquityPortListCallBack=d.onReceiveEquityPortList.bind(d),d.onReceiveSnapshotCallback=d.onReceiveSnapshot.bind(d),d.allSymbolList=[],d.sortMode=new er,d}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack)},t.prototype.stopService=function(){this.unsubscribePreviousSymbols(),this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.currentAccount&&this.portfolioService.unsubscribeGetEquityPortList(this.currentAccount.accountNo,this.onReceiveEquityPortListCallBack),this.equityTotal=new Rh},t.prototype.onAccountChange=function(e){this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.portfolioService.unsubscribeGetEquityPortList(this.currentAccount.accountNo,this.onReceiveEquityPortListCallBack),this.currentAccount=e,this.clearPortfolioData(),e.isEmptyAccount||this.portfolioService.subscribeGetEquityPortList(e.accountNo,this.onReceiveEquityPortListCallBack)},t.prototype.clearPortfolioData=function(){this.equityList=[],this.equityTotal=new Rh},t.prototype.onReceiveEquityPortList=function(e){var t=e.list;this.equityList=this.portfolioEquityViewParser(t),this.equityTotal=_h.parseTotalEquityView(e.total),this.sortMode.clear(),this.currentAccount&&this.currentAccount.frontType===fi.DGW&&(this.sortMode.direction=Vi.ASC,this.sortMode.sortField=Jc.SYMBOL,tr.sort(this.sortMode,this.equityList)),this.unsubscribePreviousSymbols(),this.allSymbolList=this.equityList.map(function(e){return e.symbol}),this.subscribeNewSymbols()},t.prototype.onReceiveSnapshot=function(e){var t=this;this.equityList.forEach(function(i){if(e.instrumentID.toUpperCase()===i.symbol.toUpperCase()){t.addSymbolInformation(i,e);var r=t.calculate(e,i);r&&(t.calculateTotalPortfolio(),t.sortMode.dirty())}})},t.prototype.subscribeNewSymbols=function(){this.snapshotPubsub.subscribe(this.allSymbolList,this.onReceiveSnapshotCallback)},t.prototype.unsubscribePreviousSymbols=function(){this.snapshotPubsub.unsubscribe(this.allSymbolList,this.onReceiveSnapshotCallback)},t.prototype.addSymbolInformation=function(e,t){t.hasInitData()&&(e.caFlags=t.initData.caFlag,e.isCa=e.caFlags.length>0),t.hasSummaryData()&&(e.status=t.summary.status)},t.prototype.calculate=function(e,t){var i=!1,r=Xc.calculateMarketPrice(e);if(!isNaN(r)&&t.marketPrice!==r){i=!0;var n=t.actualVolume,o=t.amount,s=Xc.calculateMktvalue(r,n),a=Xc.calculateCommission(s,t.commRate),c=Xc.calculateVat(a,t.vatRate),l=Xc.calculateUnPL(s,o,a,c,t.portFlag),u=Xc.calculatePercentUnPL(l,o);t.marketPrice=r,t.marketValue=s,t.unrealizedPL=l,t.percentUnrealizedPL=u,t.unrealizedPLColor=this.colorService.changeWithNaNColor(t.unrealizedPL),t.percentUnrealizedPLColor=this.colorService.changeWithNaNColor(t.percentUnrealizedPL)}return i},t.prototype.calculateTotalPortfolio=function(){for(var e,t=0,i=0,r=0,n=0,o=0,s=this.equityList.length;o<s;o++)e=this.equityList[o],t+=isNaN(e.amount)?0:Math.abs(e.amount),i+=isNaN(e.marketValue)?0:Math.abs(e.marketValue),r+=isNaN(e.unrealizedPL)?0:e.unrealizedPL,n+=isNaN(e.realizedPL)?0:e.realizedPL;this.equityTotal.amount=t,this.equityTotal.marketValue=i,this.equityTotal.unrealizedPL=r,this.equityTotal.realizedPL=n,this.equityTotal.percentUnrealizedPL=0===t?0:r/t*100,this.equityTotal.percentUnrealizedPLColor=this.colorService.changeWithNaNColor(this.equityTotal.percentUnrealizedPL),this.equityTotal.unrealizedPLColor=this.colorService.changeWithNaNColor(this.equityTotal.unrealizedPL),this.equityTotal.realizedPLColor=this.colorService.changeWithNaNColor(this.equityTotal.realizedPL)},t.prototype.onSelectedRowChangeByPressUpDown=function(e){e<=this.equityList.length-1&&this.onSelectRow(this.equityList[e])},t.prototype.onSelectRow=function(e){var t=this;this.keyOfSelectedRow=e.name,this.instrumentService.searchSymbol(e.symbol,Qe.ALL).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)}),this.piwikService.eventTrack(nt.CLICK_SYMBOL,rt.PORTFOLIO_EQUITY)},t.prototype.isSelectedRow=function(e){return this.keyOfSelectedRow===e},t.prototype.sortOrderBySymbol=function(){this.sortMode.toggleDirection(Jc.SYMBOL),this.sortMode.sortField=Jc.SYMBOL,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconBySymbol=function(){return this.sortMode.getSortIconClass(Jc.SYMBOL)},t.prototype.sortOrderByStartVolume=function(){this.sortMode.toggleDirection(Jc.START_VOLUME),this.sortMode.sortField=Jc.START_VOLUME,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByStartVolume=function(){return this.sortMode.getSortIconClass(Jc.START_VOLUME)},t.prototype.sortOrderByAvailableVolume=function(){this.sortMode.toggleDirection(Jc.AVAILABLE_VOLUME),this.sortMode.sortField=Jc.AVAILABLE_VOLUME,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByAvailableVolume=function(){
return this.sortMode.getSortIconClass(Jc.AVAILABLE_VOLUME)},t.prototype.sortOrderByActualVolume=function(){this.sortMode.toggleDirection(Jc.ACTUAL_VOLUME),this.sortMode.sortField=Jc.ACTUAL_VOLUME,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByActualVolume=function(){return this.sortMode.getSortIconClass(Jc.ACTUAL_VOLUME)},t.prototype.sortOrderByAverageCost=function(){this.sortMode.toggleDirection(Jc.AVERAGE_COST),this.sortMode.sortField=Jc.AVERAGE_COST,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByAverageCost=function(){return this.sortMode.getSortIconClass(Jc.AVERAGE_COST)},t.prototype.sortOrderByMarketPrice=function(){this.sortMode.toggleDirection(Jc.MARKET_PRICE),this.sortMode.sortField=Jc.MARKET_PRICE,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByMarketPrice=function(){return this.sortMode.getSortIconClass(Jc.MARKET_PRICE)},t.prototype.sortOrderByAmount=function(){this.sortMode.toggleDirection(Jc.AMOUNT),this.sortMode.sortField=Jc.AMOUNT,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByAmount=function(){return this.sortMode.getSortIconClass(Jc.AMOUNT)},t.prototype.sortOrderByMarketValue=function(){this.sortMode.toggleDirection(Jc.MARKET_VALUE),this.sortMode.sortField=Jc.MARKET_VALUE,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByMarketValue=function(){return this.sortMode.getSortIconClass(Jc.MARKET_VALUE)},t.prototype.sortOrderByUnrealizedPL=function(){this.sortMode.toggleDirection(Jc.UNREALIZED_PL),this.sortMode.sortField=Jc.UNREALIZED_PL,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByUnrealizedPL=function(){return this.sortMode.getSortIconClass(Jc.UNREALIZED_PL)},t.prototype.sortOrderByPercentUnrealizedPL=function(){this.sortMode.toggleDirection(Jc.PERCENT_UNREALIZED_PL),this.sortMode.sortField=Jc.PERCENT_UNREALIZED_PL,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByPercentUnrealizedPL=function(){return this.sortMode.getSortIconClass(Jc.PERCENT_UNREALIZED_PL)},t.prototype.sortOrderByRealizedPL=function(){this.sortMode.toggleDirection(Jc.REALIZED_PL),this.sortMode.sortField=Jc.REALIZED_PL,tr.sort(this.sortMode,this.equityList)},t.prototype.getSortIconByRealizedPL=function(){return this.sortMode.getSortIconClass(Jc.REALIZED_PL)},t.$inject=["CurrentAccountChangeEvent","PortfolioService","ColorService","SnapshotPublishSubscriber","InstrumentService","UserInfoService","PortfolioEquityViewParser","PiwikService","PageService","UserApplicationProfileService"],t}(ys),el=function(){function e(){}return e.parseEquityResponse=function(t){var i=new il;i.portfolioList=[];for(var r=t.split(hi.LV3),n=parseInt(r[1]),o=2;o<2+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.PORTFOLIO_SERVICE_ID||c===e.PORTFOLIO__FAIL_RESPONSE_SERVICE_ID){var l=a[2],u=parseInt(a[3]),d="T"===l;if(i.isSuccess=d,d){for(var h=0;h<u-1;h++){var p=a[5+h].split(hi.LV1);i.portfolioList.push(e.parserEquity(p))}var m=5+(u-1),v=a[m].split(hi.LV1);i.totalPortfolio=e.parseTotalEquity(v)}else i.errorMessage=a[5];return i}}},e.parseDerivativesResponse=function(t){var i=new nl;i.portfolioList=[];for(var r=t.split(hi.LV3),n=parseInt(r[2]),o=3;o<3+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.DERIVATIVES_PORTFOLIO_SERVICE||c===e.DERIVATIVES_PORTFOLIO_FAIL_SERVICE_ID){var l=a[2],u=parseInt(a[3]),d="T"===l;if(i.isSuccess=d,d){for(var h=0;h<u-1;h++){var p=a[5+h].split(hi.LV1);i.portfolioList.push(e.parserDerivatives(p))}var m=5+(u-1),v=a[m].split(hi.LV1);i.totalPortfolio=e.parseTotalDerivatives(v)}else i.errorMessage=a[3];return i}}},e.parserEquity=function(e){var t=new Kc;return t.symbol=ct.parseNullableString(e[0]),t.nvdrFlag=ct.parseNullableString(e[1]),t.nvdrFlag=t.nvdrFlag.trim(),t.showNA="N/A"===e[2],t.showNA||(t.marketPrice=parseFloat(e[2]),t.amount=parseFloat(e[3]),t.marketValue=parseFloat(e[4]),t.unrealizedPL=parseFloat(e[5]),t.percentUnrealizedPL=parseFloat(e[6]),t.realizedPL=parseFloat(e[7])),t.startVolume=parseFloat(e[8]),t.currentVolume=parseFloat(e[9]),t.actualVolume=parseFloat(e[10]),t.averagePrice=parseFloat(e[11]),t.flag=ct.parseNullableString(e[12]),t.flag=t.flag.trim(),t.portFlag=ct.parseNullableString(e[13]),t.marginRate=parseFloat(e[14]),t.liabilities=parseFloat(e[15]),t.commRate=parseFloat(e[16]),t.vatRate=parseFloat(e[17]),t},e.parseTotalEquity=function(t){var i=e.parserEquity(t),r=new zc;return r.marketValue=i.marketValue,r.amount=i.amount,r.unrealizedPL=i.unrealizedPL,r.percentUnrealizedPL=i.percentUnrealizedPL,r.realizedPL=i.realizedPL,r.marginRate=i.marginRate,r.liabilities=i.liabilities,r},e.parserDerivatives=function(e){var t=new Sh;t.seriesId=ct.parseNullableString(e[0]),t.side=Be.lookup[ct.parseNullableString(e[1])],t.startVolume=parseFloat(e[2]),t.availableVolume=parseFloat(e[3]),t.actualVolume=parseFloat(e[4]),t.averagePrice=parseFloat(e[5]),t.marketPrice=parseFloat(e[6]),t.amount=parseFloat(e[7]),t.marketValue=parseFloat(e[8]),t.unrealizePL=parseFloat(e[9]),t.percentUnrealizePL=parseFloat(e[10]);var i=e[11];"-"!==i?t.realizePL=parseFloat(i):t.realizePL=0,t.multipiler=parseFloat(e[12]),t.optionsValue=parseFloat(e[13]),t.unrealizePLByCost=parseFloat(e[14]),t.percentUnrealizePLByCost=parseFloat(e[15]);var r=e[16];return"-"!==r?t.realizePLByCost=parseFloat(r):t.realizePLByCost=0,t.averageCost=parseFloat(e[17]),t.amountByCost=parseFloat(e[18]),t.priceDigit=parseInt(e[19]),t.settleDigit=parseInt(e[20]),t.asOfDate=ct.parseNullableString(e[21]),t.asOfTime=ct.parseNullableString(e[22]),t.currency=ct.parseNullableString(e[23]),t.currentXRT=parseFloat(e[24]),t.settlementXRT=parseFloat(e[25]),t.costXRT=parseFloat(e[26]),t.amountCurrency=parseFloat(e[27]),t.marketValueCurrency=parseFloat(e[28]),t.unrealizePLCurrency=parseFloat(e[29]),t.realizePLCurrency=parseFloat(e[30]),t.unrealizePLByCostCurrency=parseFloat(e[31]),t.realizePLByCostCurrency=parseFloat(e[32]),t.amountByCostCurrency=parseFloat(e[33]),t.averagePriceTHB=parseFloat(e[34]),t.averageCostTHB=parseFloat(e[35]),t},e.parseTotalDerivatives=function(t){var i=e.parserDerivatives(t),r=new bh;return r.marketValue=i.marketValue,r.amount=i.amount,r.unrealizePL=i.unrealizePL,r.percentUnrealizePL=i.percentUnrealizePL,r.realizePL=i.realizePL,r.amountByCost=i.amountByCost,r.unrealizePLByCost=i.unrealizePLByCost,r.percentUnrealizePLByCost=i.percentUnrealizePLByCost,r.realizePLByCost=i.realizePLByCost,r.optionsValue=i.optionsValue,r},e.PORTFOLIO__FAIL_RESPONSE_SERVICE_ID="PlaceOrder",e.PORTFOLIO_SERVICE_ID="Portfolio",e.DERIVATIVES_PORTFOLIO_FAIL_SERVICE_ID="PlaceOrder",e.DERIVATIVES_PORTFOLIO_SERVICE="PortInfo",e}(),tl=function(){function e(){this.account=null,this.symbol="",this.volume=0,this.isNVDR=!1}return e}(),il=function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),rl=function(){function e(){}return e}(),nl=function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),ol=function(){function e(){}return e}(),sl=function(){function e(e,t,i,r,n,o){this.$q=e,this.iTPService=t,this.iTPDService=i,this.alertService=r,this.userInfoService=n,this.senseService=o,this.signals=new li}return e.prototype.requestEquityPortfolio=function(e){var t=this;return this.iTPService.getPortfolio(e).then(function(e){var i=el.parseEquityResponse(e.message);if(i.isSuccess){var r=new rl;return r.list=i.portfolioList,r.total=i.totalPortfolio,t.$q.resolve(r)}return t.$q.reject(i.errorMessage)})},e.prototype.requestDerivativesPortfolio=function(e){var t=this,i=new Yt(this.userInfoService.getApplicationRole());return i.accountNo=e.accountNo,this.iTPDService.getPortfolio(i).then(function(e){var i=el.parseDerivativesResponse(e.message);if(i.isSuccess){var r=new ol;return r.list=i.portfolioList,r.total=i.totalPortfolio,t.$q.resolve(r)}return t.$q.reject(i.errorMessage)})},e.prototype.updateEquityPortfolioList=function(e){var t=this;this.iTPService.getPortfolio(e).then(function(i){var r=el.parseEquityResponse(i.message);if(r.isSuccess){var n=new rl;n.list=r.portfolioList,n.total=r.totalPortfolio,t.publishGetEquityPortList(i.accountNo,n),t.updateSenseScoreByEquityPortfolio(e,r.portfolioList)}else r.isSuccess||(t.clearMemorizedEquityPortList(e.accountNo),t.alertService.showErrorAlert(r.errorMessage))})},e.prototype.updateDerivativesPortfolioList=function(e){var t=this,i=new Yt(this.userInfoService.getApplicationRole());i.accountNo=e.accountNo,this.iTPDService.getPortfolio(i).then(function(i){var r=el.parseDerivativesResponse(i.message);if(r.isSuccess){var n=new ol;n.list=r.portfolioList,n.total=r.totalPortfolio,t.publishGetDerivativePortList(i.accountNo,n)}else r.isSuccess||(t.clearMemorizedDerivativesPortList(e.accountNo),t.alertService.showErrorAlert(r.errorMessage))})},e.prototype.getAllUniquePortfolioSymbolList=function(e,t){var i=this,r=[],n=[],o=[],s=[],a=[];return e&&e.forEach(function(e,t,o){var s=i.requestEquityPortfolio(e).then(function(e){var t=e.list.map(function(e){return e.symbol});n=n.concat(t)},function(e){i.alertService.showErrorAlert(e)})["finally"](function(){return i.$q.resolve()});r.push(s)}),t&&t.forEach(function(e,t,n){var s=i.requestDerivativesPortfolio(e).then(function(e){var t=e.list.map(function(e){return e.seriesId});o=o.concat(t)},function(e){i.alertService.showErrorAlert(e)})["finally"](function(){return i.$q.resolve()});r.push(s)}),this.$q.all(r).then(function(e){s=n.concat(o),a=s.sort();var t=a.filter(function(e,t,i){return i.indexOf(e)===t});return t})},e.prototype.getVolumeFromPortfolioEquity=function(e,t,i){var r=this;return this.requestEquityPortfolio(e).then(function(n){var o=void 0;if(n.list.some(function(r){if(r.symbol===t&&r.isNVDR()===i&&void 0!==r.flag&&0===r.flag.length){var n=new tl;return n.symbol=t,n.account=e,n.volume=Math.abs(r.currentVolume),n.isNVDR=r.isNVDR(),o=n,!0}}),void 0===o){var s=new tl;s.symbol=t,s.account=e,s.volume=0,s.isNVDR=i,o=s}return r.$q.resolve(o)},function(e){var t=new Up(e);return r.$q.reject(t)})},e.prototype.publishGetDerivativePortList=function(e,t){this.signals.dispatch(e+"~D",t)},e.prototype.publishGetEquityPortList=function(e,t){this.signals.dispatch(e+"~E",t)},e.prototype.subscribeGetEquityPortList=function(e,t){this.signals.add(e+"~E",t)},e.prototype.unsubscribeGetEquityPortList=function(e,t){var i=e+"~E";this.signals.remove(i,t),0===this.signals.getNumListeners(i)&&this.userInfoService.isMarketRep()&&this.signals.destroy(i)},e.prototype.subscribeGetDerivativesPortList=function(e,t){this.signals.add(e+"~D",t)},e.prototype.unsubscribeGetDerivativesPortList=function(e,t){var i=e+"~D";this.signals.remove(i,t),0===this.signals.getNumListeners(i)&&this.userInfoService.isMarketRep()&&this.signals.destroy(i)},e.prototype.updateSenseScoreByEquityPortfolio=function(e,t){this.userInfoService.isInvestor()&&this.senseService.updateScoreWithEquityPortfolio(e,t)},e.prototype.clearMemorizedEquityPortList=function(e){this.signals.clearMemorize(e+"~E")},e.prototype.clearMemorizedDerivativesPortList=function(e){this.signals.clearMemorize(e+"~D")},e.$inject=["$q","ITPService","ITPDService","AlertService","UserInfoService","SenseService"],e}(),al=function(){function e(){}return e.PREVIOUS_CLOSE="previous-close",e.PROJECTED_PRICE="projected-price",e.TOTAL_VOLUME="total-volume",e.TOTAL_VALUE="total-value",e.WATCH_LIST=[e.PREVIOUS_CLOSE,e.PROJECTED_PRICE],e.WATCH_LIST_COL2=[e.TOTAL_VOLUME,e.TOTAL_VALUE],e.TFEX_WATCH_LIST=[e.TOTAL_VOLUME,e.PREVIOUS_CLOSE,e.PROJECTED_PRICE],e.lookup={"previous-close":e.PREVIOUS_CLOSE,"projected-price":e.PROJECTED_PRICE,"total-volume":e.TOTAL_VOLUME,"total-value":e.TOTAL_VALUE},e}(),cl=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S,b){var C=e.call(this,u)||this;return C.$scope=t,C.$interval=i,C.snapshotPubsub=r,C.favouriteService=n,C.initDataEvent=o,C.virtualScrollEvent=s,C.$q=a,C.instrumentService=c,C.alertService=l,C.pageService=u,C.portfolioService=d,C.accountService=h,C.watchStore=p,C.tfexWatchStore=m,C.userApplicationProfileService=v,C.piwikService=f,C.$timeout=y,C.mostActiveListTimerPublishSubscriber=g,C.watchModeChangeEvent=S,C.settingsService=b,C.onCurrentModeChangeCallBack=C.onviewMustUpdate.bind(C),C.onRecieveSnapshotCallback=C.onRecieveSnapshot.bind(C),C.onTriggerSETActiveListCallBack=C.onTriggerSETActiveList.bind(C),C.onScrollCallBack=C.onScroll.bind(C),C.isIE=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),C.currentSubscribeStartIndex=-1,C.currentSubscribeEndIndex=-1,C.feedOffset=0,C.DELAY_SCROLL_TIME=C.isIE?300:200,C}return ne(t,e),t.prototype.toggleColumn1=function(){this.isInTfexPage?(this.tfexWatchStore.currentToggleColumn1Index++,this.tfexWatchStore.currentToggleColumn1Index===this.tfexWatchStore.toggleColumn1List.length&&(this.tfexWatchStore.currentToggleColumn1Index=0),this.tfexWatchStore.updateCurrentToggleColumnIndexToMongo()):(this.watchStore.currentToggleColumn1Index++,this.watchStore.currentToggleColumn1Index===this.watchStore.toggleColumn1List.length&&(this.watchStore.currentToggleColumn1Index=0))},t.prototype.isToggleColumn1=function(e){return this.isInTfexPage?e===this.tfexWatchStore.toggleColumn1List[this.tfexWatchStore.currentToggleColumn1Index]:e===this.watchStore.toggleColumn1List[this.watchStore.currentToggleColumn1Index]},t.prototype.toggleColumn2=function(){this.watchStore.currentToggleColumn2Index++,this.watchStore.currentToggleColumn2Index===this.watchStore.toggleColumn2List.length&&(this.watchStore.currentToggleColumn2Index=0),this.isOnDerivativeMode||this.isSETMostActiveValue()||this.isSETMostActiveVolume()||(this.watchStore.lastToggleColumn2Index=this.watchStore.currentToggleColumn2Index)},t.prototype.isToggleColumn2=function(e){return this.isOnDerivativeMode?"total-volume"===e:e===this.watchStore.toggleColumn2List[this.watchStore.currentToggleColumn2Index]},Object.defineProperty(t.prototype,"isOnDerivativeMode",{get:function(){return this.currentMode===Dc.OptionsList||this.currentMode===Dc.Derivative},enumerable:!0,configurable:!0}),t.prototype.startService=function(){this.watchModeChangeEvent.subscribe(this.page,this.onCurrentModeChangeCallBack)},t.prototype.stopService=function(){this.watchModeChangeEvent.unsubscribe(this.page,this.onCurrentModeChangeCallBack),this.virtualScrollEvent.unsubscribeOnScroll("watch-"+this.page,this.onScrollCallBack),this.unsubscribeAllVisibleSymbol()},t.prototype.viewDidLoad=function(){},t.prototype.onviewMustUpdate=function(e){if(this.currentMode&&this.currentMode===e.newCurrentMode)switch(this.currentMode){case Dc.Equity:case Dc.Derivative:if(void 0!==this.currentCategoryItem&&this.currentCategoryItem.name===e.currentCategory.name&&this.currentCategoryItem.request.mainListName===e.currentCategory.request.mainListName&&this.currentCategoryItem.request.subListName===e.currentCategory.request.subListName&&this.currentCategoryItem.request.boardType===e.currentCategory.request.boardType&&this.currentCategoryItem.request.boardSubType===e.currentCategory.request.boardSubType&&this.currentCategoryItem&&!this.currentCategoryItem.refresh)return this.virtualScrollEvent.subscribeOnScroll("watch-"+this.page,this.onScrollCallBack),this.processSubscribeSymbols(),void this.$scope.$broadcast("vsRepeatReCalculateScrollPosition")}if(this.currentMode)switch(this.currentMode){case Dc.Equity:this.currentCategoryItem&&this.currentCategoryItem.refresh&&this.unsubscribeActiveListTimer(this.currentCategoryItem)}switch(e.newCurrentMode){case Dc.Equity:this.currentMode=angular.copy(e.newCurrentMode),this.currentCategoryItem=angular.copy(e.currentCategory),this.currentFavouriteDropdown=angular.copy(e.currentFavouriteDropdown),e.currentCategory&&e.currentCategory.refresh?this.subscribeActiveListTimer(e.currentCategory):this.updateSymbolList();break;case Dc.Favourite:case Dc.Derivative:case Dc.MyPort:this.currentMode=angular.copy(e.newCurrentMode),this.currentCategoryItem=angular.copy(e.currentCategory),this.currentFavouriteDropdown=angular.copy(e.currentFavouriteDropdown),this.updateSymbolList()}},t.prototype.updateSymbolList=function(){this.unsubscribeAllVisibleSymbol(),this.getSymbolList()},t.prototype.subscribeActiveListTimer=function(e){this.mostActiveListTimerPublishSubscriber.subscribe(e,this.onTriggerSETActiveListCallBack)},t.prototype.unsubscribeActiveListTimer=function(e){this.mostActiveListTimerPublishSubscriber.unsubscribe(e,this.onTriggerSETActiveListCallBack)},t.prototype.onTriggerSETActiveList=function(){this.updateSymbolList()},t.prototype.getSymbolList=function(){var e=this;this.virtualScrollEvent.unsubscribeOnScroll("watch-"+this.page,this.onScrollCallBack),this.$scope.$broadcast("vsRepeatReCalculateScroll"),this.processToggleColumn2(),this.getInstrumentsByCurrentMode().then(function(){e.reinitVirtualScroll(),e.processSubscribeSymbols(),e.virtualScrollEvent.subscribeOnScroll("watch-"+e.page,e.onScrollCallBack)})},t.prototype.reinitVirtualScroll=function(){this.$scope.$broadcast("vsRepeatReCalculateScroll"),this.virtualScrollState=new yc,this.virtualScrollState.startIndex=-1,this.virtualScrollState.endIndex=-1,this.currentSubscribeStartIndex=-1,this.currentSubscribeEndIndex=-1,this.virtualScrollState.startIndex=0,this.isInTfexPage?this.settingsService.displayConfiguration.isWideScreen?t.MAX_SHOWING_ROW=17:t.MAX_SHOWING_ROW=26:t.MAX_SHOWING_ROW=9;var e=this.watchItems.length>=t.MAX_SHOWING_ROW?t.MAX_SHOWING_ROW:this.watchItems.length-1;this.virtualScrollState.endIndex=e},t.prototype.onScroll=function(e){var t=this;this.$timeout.cancel(this.delayedScrollPromise),this.delayedScrollPromise=this.$timeout(function(){var i=new yc;i.startIndex=e.startIndex,i.endIndex=t.getAccurateEndIndex(e.startIndex,e.endIndex,t.watchItems.length),i.elementId=e.elementId,t.virtualScrollState=i,t.processSubscribeSymbols()},this.DELAY_SCROLL_TIME,!1)},t.prototype.getAccurateEndIndex=function(e,t,i){var r=t;return e+9>t&&(r=e+9,r>i-1&&(r=i-1)),r},t.prototype.processSubscribeSymbols=function(){for(var e=angular.copy(this.virtualScrollState.startIndex),t=angular.copy(this.virtualScrollState.endIndex),i=new ut(null),r=this.currentSubscribeStartIndex;r<=this.currentSubscribeEndIndex&&r<this.watchItems.length&&r>=0;r++)this.watchItems[r].isAddRow||i.add(this.watchItems[r].symbol.toUpperCase(),this.watchItems[r].symbol.toUpperCase());for(var n=[],r=e;r<=t&&r<this.watchItems.length&&r>=0;r++)this.watchItems[r].isAddRow||(null!==i.value(this.watchItems[r].symbol.toUpperCase())?i["delete"](this.watchItems[r].symbol.toUpperCase()):n.push(this.watchItems[r].symbol.toUpperCase()));var o=i.getAllKeys();this.snapshotPubsub.unsubscribe(o,this.onRecieveSnapshotCallback),this.snapshotPubsub.subscribe(n,this.onRecieveSnapshotCallback),this.currentSubscribeStartIndex=e,this.currentSubscribeEndIndex=t},t.prototype.unsubscribeAllVisibleSymbol=function(){if(this.watchItems){for(var e=[],t=this.currentSubscribeStartIndex;t<=this.currentSubscribeEndIndex&&t<this.watchItems.length&&t>=0;t++)this.watchItems[t].isAddRow||e.push(this.watchItems[t].symbol.toUpperCase());0!==e.length&&this.snapshotPubsub.unsubscribe(e,this.onRecieveSnapshotCallback),this.currentSubscribeStartIndex=-1,this.currentSubscribeEndIndex=-1}},t.prototype.onRecieveSnapshot=function(e){var t=this.findIndexBySymbol(e.instrumentID);void 0!==t&&(this.watchItems[t]=this.favouriteService.parseFavourite(e,this.watchItems[t]))},t.prototype.checkDuplicateInstrument=function(e){return this.findIndexBySymbol(e)},t.prototype.findIndexBySymbol=function(e){for(var t=this.watchItems.length,i=0;i<t;i++)if(!this.watchItems[i].isAddRow&&this.watchItems[i].symbol.toUpperCase()===e.toUpperCase())return i},t.prototype.getInstrumentsByCurrentMode=function(){var e=this;switch(this.currentMode){case Dc.Favourite:var t=this.favouriteService.getFavouriteByListName(this.currentFavouriteDropdown.key);return this.updateViewListFromSelectedFavourite(t),this.$q.resolve();case Dc.MyPort:return this.portfolioService.getAllUniquePortfolioSymbolList(this.accountService.accountEquityList,this.accountService.accountDerivList).then(function(t){return e.updateViewListFromPortfolioService(t),e.watchStore.myPortSymbolList=t,e.$q.resolve()});case Dc.Equity:case Dc.Derivative:var i=new $r;return i.boardSubType=this.currentCategoryItem.request.boardSubType,i.boardType=this.currentCategoryItem.request.boardType,i.mainListName=this.currentCategoryItem.request.mainListName,i.subListName=this.currentCategoryItem.request.subListName,this.instrumentService.getInstrumentList(i).then(function(t){e.updateViewListFromInstrumentService(t)})["finally"](function(){return e.$q.resolve()});default:return this.$q.reject()}},t.prototype.updateViewListFromSelectedFavourite=function(e){if(this.watchItems=[],"HEADER"!==e.type){for(var t=e.symbolList.length,i=0;i<t;i++){var r=new ur;r.symbol=e.symbolList[i],r.status="",r.tsLevel=this.instrumentService.getTSLevel(r.symbol),r.isTs=!!r.tsLevel,this.watchItems.push(r)}this.addFavouriteAdderRow(t)}},t.prototype.addFavouriteAdderRow=function(e){if(e<20&&!this.userApplicationProfileService.isSecondaryWindow){var t=new ur;t.isAddRow=!0,t.symbol="",this.watchItems.push(t)}},t.prototype.updateViewListFromInstrumentService=function(e){var t=this;this.watchItems=[];var i={};e.forEach(function(e){if(!i[e.name]){var r=new ur;r.symbol=e.name,r.status="",r.tsLevel=t.instrumentService.getTSLevel(e.name),r.isTs=!!r.tsLevel,t.watchItems.push(r),i[e.name]=1}})},t.prototype.updateViewListFromPortfolioService=function(e){var t=this;this.watchItems=[],e.forEach(function(e){var i=new ur;i.symbol=e,i.status="",i.tsLevel=t.instrumentService.getTSLevel(e),i.isTs=!!i.tsLevel,t.watchItems.push(i)})},t.prototype.isSETMostActiveValue=function(){return this.currentMode===Dc.Equity&&void 0!==this.currentCategoryItem&&".Most Active Value"===this.currentCategoryItem.name},t.prototype.isSETMostActiveVolume=function(){return this.currentMode===Dc.Equity&&void 0!==this.currentCategoryItem&&".Most Active Volume"===this.currentCategoryItem.name},t.prototype.processToggleColumn2=function(){switch(this.currentMode){case Dc.Equity:if(this.isSETMostActiveValue()){this.watchStore.showTotalValueInColumn2();break}if(this.isSETMostActiveVolume()){this.watchStore.showTotalVolumeInColumn2();break}this.watchStore.showLastSelectedToggleColumn2();break;case Dc.Derivative:break;case Dc.Favourite:case Dc.MyPort:this.watchStore.showLastSelectedToggleColumn2()}},t.prototype.activateRefreshSymbolListTimer=function(){var e=this;this.refreshSymbolListTimer=this.$interval(function(){e.getSymbolList()},Gc.REFRESH_SYMBOL_LIST_INTERVAL)},t.prototype.deactivateRefreshSymbolListTimer=function(){this.refreshSymbolListTimer&&this.$interval.cancel(this.refreshSymbolListTimer)},t.prototype.onDelete=function(e){var t=this.findIndexBySymbol(e);this.snapshotPubsub.unsubscribe([e],this.onRecieveSnapshotCallback),this.watchItems.splice(t,1);var i=this.favouriteService.getFavouriteByListName(this.currentFavouriteDropdown.key);i.symbolList.splice(t,1),this.favouriteService.saveFavourite(i),this.watchItems.length>0&&this.watchItems[this.watchItems.length-1].isAddRow!==!0&&this.addFavouriteAdderRow(this.watchItems.length),this.virtualScrollEvent.reCalculateScroll(this.$scope)},t.prototype.replaceSymbol=function(e,t){var i=this.findIndexBySymbol(t);if(void 0===i){var r=this.findIndexBySymbol(e);this.snapshotPubsub.unsubscribe([e],this.onRecieveSnapshotCallback);var n=new ur;n.symbol=t,n.tsLevel=this.instrumentService.getTSLevel(n.symbol),n.isTs=!!n.tsLevel,this.watchItems.splice(r,1,n);var o=this.favouriteService.getFavouriteByListName(this.currentFavouriteDropdown.key);return o.symbolList.splice(r,1,t),this.favouriteService.saveFavourite(o),this.snapshotPubsub.subscribe([t],this.onRecieveSnapshotCallback),this.virtualScrollEvent.reCalculateScroll(this.$scope),!0}return this.alertService.showErrorAlert("Duplicate Symbol"),!1},t.prototype.insertFavourite=function(e,t){var i=this.favouriteService.getFavouriteByListName(this.currentFavouriteDropdown.key),r=new ur;r.symbol=e,r.tsLevel=this.instrumentService.getTSLevel(r.symbol),r.isTs=!!r.tsLevel,void 0===t?(this.watchItems[this.watchItems.length-1]=r,this.addFavouriteAdderRow(this.watchItems.length),i.symbolList.push(e)):(this.watchItems.splice(t,1,r),i.symbolList.splice(t,1,e)),this.virtualScrollEvent.reCalculateScroll(this.$scope),this.favouriteService.saveFavourite(i),this.snapshotPubsub.subscribe([e],this.onRecieveSnapshotCallback)},t.prototype.addFavourite=function(e){this.insertFavourite(e)},t.prototype.editFavourite=function(e,t){var i=this.watchItems[t].symbol;this.snapshotPubsub.unsubscribe([i],this.onRecieveSnapshotCallback),this.insertFavourite(e,t)},t.prototype.onEnterForAddNewFavourite=function(e){var t=this;return this.instrumentService.searchSymbol(e,Qe.ALL).then(function(e){var i=t.findIndexBySymbol(e.name);return void 0===i?(t.addFavourite(e.name),t.$q.resolve()):(t.alertService.showErrorAlert("Duplicate Symbol"),t.$q.reject())})},t.prototype.getKey=function(e){return""+e.symbol+this.currentMode},t.prototype.onSelectedRowChangeByPressUpDown=function(e){e<=this.watchItems.length-1&&this.onClickSymbol(this.watchItems[e].symbol)},t.prototype.onClickSymbol=function(e){var t=this;this.instrumentService.searchSymbol(e,Qe.ALL).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)}),this.piwikService.eventTrackLabel(nt.CLICK_SYMBOL,rt.FAVOURITE,e),this.keyOfSelectedRow=e},t.prototype.getListClassToControlHeight=function(){return this.isInTfexPage?this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.TFEX_WATCH_LIST:st.NormalScreen.TFEX_WATCH_LIST:st.WideScreen.MARKET_WATCH_LIST},t.$inject=["$scope","$interval","SnapshotPublishSubscriber","FavouriteService","InitDataEvent","VirtualScrollEvent","$q","InstrumentService","AlertService","PageService","PortfolioService","AccountService","WatchStore","TfexWatchStore","UserApplicationProfileService","PiwikService","$timeout","MostActiveListTimerPublishSubscriber","WatchModeChangeEvent","SettingsService"],t}(ys),ll=function(){function e(e,t){return{symbol:e,key:e+"-"+t}}return e}(),ul=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this,a)||this;return c.$q=t,c.$element=i,c.$timeout=r,c.alertService=n,c.instrumentService=o,c.favouriteService=s,c.pageService=a,c.onDoneCallBack=c.onDoneClicked.bind(c),c.editedSymbolFavouriteList=[],c.showAddButton=!0,c.symbolForAddInput="",c.sortableOptions={stop:function(e,t){c.recalculateKey()}.bind(c)},c}return ne(t,e),t.prototype.startService=function(){this.favouriteCtrl.registerClickDoneCallBack(this.onDoneCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.prototype.$onChanges=function(e){if(e.selectedFavouriteDropdownItem){var t=e.selectedFavouriteDropdownItem.currentValue,i=t.key,r=this.favouriteService.getFavouriteByListName(i);this.editedSymbolFavouriteList=r.symbolList.map(function(e,t){return new ll(e,t)})}},t.prototype.onDeleteSymbol=function(e){var t=e.split("-");if(!(t.length<2)){var i=parseInt(t[t.length-1],10);isNaN(i)||(this.editedSymbolFavouriteList.splice(i,1),this.editedSymbolFavouriteList=this.editedSymbolFavouriteList.map(function(e,t){return new ll(e.symbol,t)}))}},t.prototype.addSymbol=function(e){var t=this.editedSymbolFavouriteList.length;this.editedSymbolFavouriteList.push(new ll(e.name,t)),this.showAddButton=!0,this.symbolForAddInput=""},t.prototype.showInput=function(){var e=this;this.showAddButton=!1,this.$timeout(function(){var t=e.$element.find(".add-favourite-row edit-favourite-symbol-input input.main-input");t&&t.focus()})},t.prototype.onInputBlur=function(){this.showAddButton=!0},t.prototype.checkDuplicateInstrument=function(e){return this.getSymbolIndexRows(e.name)},t.prototype.getSymbolIndexRows=function(e){var t=[];return this.editedSymbolFavouriteList.forEach(function(i,r){i.symbol.toUpperCase()===e.toUpperCase()&&t.push(r+1)}),t},t.prototype.onDoneClicked=function(){var e=this;this.validate().then(function(){var t=new gr;t.listName=e.selectedFavouriteDropdownItem.key,t.symbolList=e.editedSymbolFavouriteList.map(function(e){return e.symbol}),e.favouriteService.saveFavourite(t),e.favouriteCtrl.changeCurrentModeToFavourite()},function(t){e.alertService.showMutipleErrorTopicAlert(t)})},t.prototype.canAddMoreSymbol=function(){return this.editedSymbolFavouriteList.length<20},t.prototype.validate=function(){var e=this,t=[];return this.validateInvalidSymbol().then(function(i){var r=e.validateDuplicateSymbol();if(0!==r.length){var n=new Eo;n.header="Duplicate Symbol",n.msgList=r,t.push(n)}if(0!==i.length){var o=new Eo;o.header="Symbol not found",o.msgList=i,t.push(o)}var s=e.validateEmptySymbol();if(0!==s.length){var a=new Eo;a.header=s[0],t.push(a)}return t.length>0?e.$q.reject(t):e.$q.resolve(t)})},t.prototype.validateDuplicateSymbol=function(){var e=this,t=[],i=[];return this.editedSymbolFavouriteList.forEach(function(r,n){var o=i.indexOf(r.symbol)>-1;if(!o&&""!==r.symbol){var s=e.getSymbolIndexRows(r.symbol);if(s.length>1){var a=s.join(","),c=r.symbol+" in row "+a;t.push(c)}i.push(r.symbol)}}),t},t.prototype.validateInvalidSymbol=function(){var e=this,t=this.$q.defer(),i=[],r=[],n=[];return this.editedSymbolFavouriteList.forEach(function(t,o){var s=e.instrumentService.searchSymbolByBrokerLicense(t.symbol).then(function(t){e.editedSymbolFavouriteList[o]=new ll(t.name,o)},function(n){var o=r.indexOf(t.symbol)>-1;if(!o&&""!==t.symbol){var s=e.getSymbolIndexRows(t.symbol),a=s.join(","),c=t.symbol+" in row "+a;i.push(c)}r.push(t.symbol)});n.push(s)}),this.$q.all(n).then(function(){t.resolve(i)}),t.promise},t.prototype.validateEmptySymbol=function(){var e=[],t=[];if(this.editedSymbolFavouriteList.forEach(function(e,i){""===e.symbol.trim()&&t.push(i+1)}),t.length>0){var i=t.join(",");e.push("Please insert symbol in row "+i)}return e},t.prototype.recalculateKey=function(){var e=[];this.editedSymbolFavouriteList.forEach(function(t,i){e.push(new ll(t.symbol,i))}),this.editedSymbolFavouriteList=e},t.$inject=["$q","$element","$timeout","AlertService","InstrumentService","FavouriteService","PageService"],t}(ys),dl=function(){function e(){}return e}(),hl=function(){function e(){}return e}(),pl=function(){function e(){}return e}(),ml=function(e){function t(t,i,r,n,o,s){var a=e.call(this,n)||this;return a.optionsStrikePriceListPublishSubscriber=t,a.optionsStrikePriceListViewParser=i,a.snapshotPublishSubscriber=r,a.pageService=n,a.watchModeChangeEvent=o,a.settingsService=s,a.onReceiveStrikePriceListCallback=a.onReceiveStrikePriceList.bind(a),a.onViewMustUpdateCallback=a.onViewMustUpdate.bind(a),a.onRecieveSnapshotCallback=a.onRecieveSnapshot.bind(a),a.optionsStrikePriceList=[],a.lastATMPriceIndex=-1,a}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.watchModeChangeEvent.subscribe(this.page,this.onViewMustUpdateCallback)},t.prototype.stopService=function(){this.watchStateData&&this.watchStateData.currentCategory&&this.optionsStrikePriceListPublishSubscriber.unsubscribe(this.watchStateData.currentCategory.name,this.onReceiveStrikePriceListCallback),this.watchModeChangeEvent.unsubscribe(this.page,this.onViewMustUpdateCallback),this.unsubScribeAllSeriesId()},t.prototype.onViewMustUpdate=function(e){e.newCurrentMode===Dc.OptionsList&&(this.watchStateData&&this.watchStateData.currentCategory&&(this.optionsStrikePriceListPublishSubscriber.unsubscribe(this.watchStateData.currentCategory.name,this.onReceiveStrikePriceListCallback),this.unsubScribeAllSeriesId(),this.optionsStrikePriceList=[],this.lastATMPriceIndex=-1,this.selectedIndex=-1,this.currentATMPrice=-1),this.watchStateData=e,this.optionsStrikePriceListPublishSubscriber.subscribe(this.watchStateData.currentCategory.name,this.onReceiveStrikePriceListCallback))},t.prototype.subscribeAllSeriesId=function(){var e=this.getAllSeriesId();this.snapshotPublishSubscriber.subscribe(e,this.onRecieveSnapshotCallback)},t.prototype.getAllSeriesId=function(){var e=[];return this.optionsStrikePriceList.forEach(function(t){t.callOptionsDetail&&e.push(t.callSeriesId),t.putOptionsDetail&&e.push(t.putSeriesId)}),e},t.prototype.unsubScribeAllSeriesId=function(){
var e=this.getAllSeriesId();this.snapshotPublishSubscriber.unsubscribe(e,this.onRecieveSnapshotCallback)},t.prototype.onReceiveStrikePriceList=function(e){this.optionsStrikePriceList=this.optionsStrikePriceListViewParser.parseInitial(e,this.watchStateData.optionsListMode),this.subscribeAllSeriesId(),this.setLastTradingdateLabel(e)},t.prototype.calculateATM=function(e){var t=25;return Math.ceil(e/t-.5)*t},t.prototype.onRecieveSnapshot=function(e){for(var t=this.findIndexBySeriesIdInCall(e.instrumentID),i=0;i<t.length;i++){var r=t[i];this.watchStateData.optionsListMode.isByPrice()?this.optionsStrikePriceList[r].callOptionsDetail=this.optionsStrikePriceListViewParser.parseSnaspshotDetail(e,this.optionsStrikePriceList[r].callOptionsDetail):this.watchStateData.optionsListMode.isVolatility()&&(this.optionsStrikePriceList[r].callOptionsDetail=this.optionsStrikePriceListViewParser.parseSnapshotVolatilityDetail(e,this.optionsStrikePriceList[r].callOptionsDetail))}for(var n=this.findIndexBySeriesIdInPut(e.instrumentID),i=0;i<n.length;i++){var r=n[i];this.watchStateData.optionsListMode.isByPrice()?this.optionsStrikePriceList[r].putOptionsDetail=this.optionsStrikePriceListViewParser.parseSnaspshotDetail(e,this.optionsStrikePriceList[r].putOptionsDetail):this.watchStateData.optionsListMode.isVolatility()&&(this.optionsStrikePriceList[r].putOptionsDetail=this.optionsStrikePriceListViewParser.parseSnapshotVolatilityDetail(e,this.optionsStrikePriceList[r].putOptionsDetail))}this.processATMRowsAndIntheMoneyFlag(e)},t.prototype.processATMRowsAndIntheMoneyFlag=function(e){if(e.hasSummaryData()){var t=this.calculateATM(e.summary.underlyingPrice);t===this.currentATMPrice&&this.currentATMPrice!==-1||(this.updateATMRows(t),this.currentATMPrice=t,this.updateIsInTheMoneyFlags())}},t.prototype.updateIsInTheMoneyFlags=function(){var e=this;this.optionsStrikePriceList.map(function(t){t.strikePrice<e.currentATMPrice?(t.isCallInTheMoney=!0,t.isPutInTheMoney=!1):t.strikePrice>e.currentATMPrice?(t.isCallInTheMoney=!1,t.isPutInTheMoney=!0):(t.isCallInTheMoney=!0,t.isPutInTheMoney=!0)})},t.prototype.updateATMRows=function(e){this.lastATMPriceIndex!==-1&&(this.optionsStrikePriceList[this.lastATMPriceIndex].isATM=!1);var t=this.findATMRowByStrikePrice(e);t!==-1&&(this.optionsStrikePriceList[t].isATM=!0),this.lastATMPriceIndex=t},t.prototype.setLastTradingdateLabel=function(e){var t=e.fullDate+" ("+e.daysToExpire+" days to last trading date)";this.onSetOptionsLastTradingDate&&this.onSetOptionsLastTradingDate({label:t})},t.prototype.onClickRow=function(e){this.selectedIndex=e},t.prototype.findIndexBySeriesIdInCall=function(e){var t=[];return this.optionsStrikePriceList.forEach(function(i,r){i.callOptionsDetail&&i.callSeriesId&&i.callSeriesId.toUpperCase()===e.toUpperCase()&&t.push(r)}),t},t.prototype.findIndexBySeriesIdInPut=function(e){var t=[];return this.optionsStrikePriceList.forEach(function(i,r){i.putOptionsDetail&&i.putSeriesId&&i.putSeriesId.toUpperCase()===e.toUpperCase()&&t.push(r)}),t},t.prototype.findATMRowByStrikePrice=function(e){var t=-1;return this.optionsStrikePriceList.some(function(i,r){return i.strikePrice===e&&(t=r,!0)}),t},t.prototype.getListClassToControlHeight=function(){return this.isInTfexPage?this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.TFEX_WATCH_OPTION_LIST:st.NormalScreen.TFEX_WATCH_OPTION_LIST:st.WideScreen.MARKET_OPTION_LIST},t.prototype.isPriceOptionsChainMode=function(){return this.watchStateData.optionsListMode&&this.watchStateData.optionsListMode.isByPrice()},t.prototype.isVolatilityOptionsChainMode=function(){return this.watchStateData.optionsListMode&&this.watchStateData.optionsListMode.isVolatility()},t.$inject=["OptionsStrikePriceListPublishSubscriber","OptionsStrikePriceListViewParser","SnapshotPublishSubscriber","PageService","WatchModeChangeEvent","SettingsService"],t}(ys),vl=function(){function e(e){this.elipsis=e("elipsis"),this.showTooltip=!1}return e.prototype.init=function(){var e=new ru(this.name,this.status);this.symbol=e.toString(),this.showTooltip=this.ifSymbolIsTooLong(this.symbol)},e.prototype.ifSymbolIsTooLong=function(e){return e.length>12},e.prototype.$onInit=function(){this.init()},e.prototype.$onChanges=function(){this.init()},Object.defineProperty(e.prototype,"elipsisSymbol",{get:function(){return this.elipsis(this.symbol,12)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipSymbol",{get:function(){return this.symbol},enumerable:!0,configurable:!0}),e.$inject=["$filter"],e}(),fl=function(){function e(){}return e.prototype.displayTooltip=function(){return this.flags.map(function(e){return e.sign+" "+e.date}).join(", ")},e}(),yl=function(){function e(){}return e}(),gl=function(){function e(e,t){this.$element=e,this.$timeout=t,this.mainInput="#add-favourite-symbol-input input.main-input",this.showSymbolInput=!1,this.marketType=Qe.ALL,this.addBtn=this.$element.find("button"),this.isValidating=!1,this.focusFactory=focus}return e.prototype.showInput=function(){var e=this;this.showSymbolInput=!0,this.$timeout(function(){e.$element.find(e.mainInput).focus()})},e.prototype.onValidateSymbolSuccess=function(e){var t=this;this.isValidating=!0,this.watchListController.onEnterForAddNewFavourite(e).then(null,function(){t.$timeout(function(){t.$element.find(t.mainInput).focus()})})["finally"](function(){t.isValidating=!1}),this.clear()},e.prototype.onBlur=function(){this.clear()},e.prototype.clear=function(){this.showSymbolInput=!1},e.$inject=["$element","$timeout"],e}(),Sl=(function(){function e(){}return e}(),function(){function e(){}return e.prototype.isInTheMoneyCall=function(){return this.data.isCallInTheMoney},e.prototype.isInTheMoneyPut=function(){return this.data.isPutInTheMoney},e.prototype.isByPriceMode=function(){return this.mode&&this.mode.isByPrice()},e.prototype.isByVolatilityMode=function(){return this.mode&&this.mode.isVolatility()},e}()),bl=function(){function e(e,t,i,r,n){this.colorService=e,this.instrumentService=t,this.userInfoService=i,this.piwikService=r,this.userApplicationProfileService=n}return e.prototype.onClickOptionsRow=function(){var e=this;this.instrumentService.searchSymbol(this.seriesId,Qe.ALL).then(function(t){e.userApplicationProfileService.setCurrentSymbol(t)})},e.prototype.emitBestBidWithSideSellEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.seriesId,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.SELL)}),this.piwikService.eventTrack(nt.CLICK_BESTBID,rt.FAVOURITE)},e.prototype.emitBestOfferWithSideBuyEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.seriesId,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.BUY)}),this.piwikService.eventTrack(nt.CLICK_BESTOFFER,rt.FAVOURITE)},e.$inject=["ColorService","InstrumentService","UserInfoService","PiwikService","UserApplicationProfileService"],e}();angular.module("favourite",["multi-market","color-formatter","number-formatter","hilight-font-blink","input","event-emitter","service","piwik","binary","portfolio","ui-component","tfex"]).factory("OptionsStrikePriceListViewParser",Z).component("favourite",{template:i(/*! ../../html/favourite/favourite.html */89),controller:Gc,bindings:{page:"@"}}).component("favouriteList",{template:i(/*! ../../html/favourite/favourite-list.html */90),controller:cl,bindings:{page:"@",isInTfexPage:"<"}}).component("favouriteRow",{template:i(/*! ../../html/favourite/favourite-row.html */91),controller:Wc,require:{watchListController:"^favouriteList"},bindings:{favourite:"<",isValueCategory:"<",currentMode:"<",isInTfexPage:"<"}}).component("ca",{template:i(/*! ../../html/favourite/ca.html */92),controller:fl,bindings:{flags:"<"}}).component("ltd",{template:i(/*! ../../html/favourite/ltd.html */93),controller:yl,bindings:{lastTradingDate:"<"}}).component("symbol",{template:i(/*! ../../html/favourite/symbol.html */94),controller:vl,bindings:{name:"<",status:"<"}}).component("add",{template:i(/*! ../../html/favourite/add.html */95),controller:gl,require:{watchListController:"^favouriteList"}}).component("editFavouriteList",{template:i(/*! ../../html/favourite/edit-favourite-list.html */96),controller:ul,require:{favouriteCtrl:"^favourite"},bindings:{selectedFavouriteDropdownItem:"<",page:"@"}}).component("optionsList",{template:i(/*! ../../html/favourite/options-list.html */97),controller:ml,bindings:{page:"@",onSetOptionsLastTradingDate:"&",isInTfexPage:"<"}}).component("optionsRow",{template:i(/*! ../../html/favourite/options-row.html */98),controller:Sl,bindings:{data:"<",mode:"<"}}).component("optionsPutSide",{template:i(/*! ../../html/favourite/options-put-side.html */99),controller:bl,bindings:{data:"<",seriesId:"<"}}).component("optionsCallSide",{template:i(/*! ../../html/favourite/options-call-side.html */100),controller:bl,bindings:{data:"<",seriesId:"<"}}).component("optionsVolatilitySide",{template:i(/*! ../../html/favourite/options-volatility-side.html */101),controller:bl,bindings:{data:"<",seriesId:"<"}}).service("FavouriteService",br).service("WatchStore",Us);var Cl=function(){function e(){}return e.parseBidOffer=function(e,t,i){if(e.instrumentType===ce.INDEX)return new ht;var r;if(r=angular.copy(t,r),r.priceDigit=e.priceDigit,r.isBidMatch=!1,r.isOfferMatch=!1,e.hasMatchedData()){var n=i<e.summaryData.totalVolume,o=t.bidVolume1>e.bidofferData.bidVolume1,s=t.offerVolume1>e.bidofferData.askVolume1;n&&(o&&(r.isBidMatch=!0),s&&(r.isOfferMatch=!0))}return e.hasInitMarketData()&&(e.instrumentType===ce.EQUITY?r.previousClose=e.initMarketData.previousClose:e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(r.previousClose=e.initMarketData.previousSettle)),e.hasBidOfferData()&&(r.bidFlag=e.bidofferData.bidFlag,r.offerFlag=e.bidofferData.askFlag,r.bidVolume1=e.bidofferData.bidVolume1,r.bidPrice1=e.bidofferData.bidPrice1,r.offerPrice1=e.bidofferData.askPrice1,r.offerVolume1=e.bidofferData.askVolume1,r.bidVolume2=e.bidofferData.bidVolume2,r.bidPrice2=e.bidofferData.bidPrice2,r.offerPrice2=e.bidofferData.askPrice2,r.offerVolume2=e.bidofferData.askVolume2,r.bidVolume3=e.bidofferData.bidVolume3,r.bidPrice3=e.bidofferData.bidPrice3,r.offerPrice3=e.bidofferData.askPrice3,r.offerVolume3=e.bidofferData.askVolume3,r.bidVolume4=e.bidofferData.bidVolume4,r.bidPrice4=e.bidofferData.bidPrice4,r.offerPrice4=e.bidofferData.askPrice4,r.offerVolume4=e.bidofferData.askVolume4,r.bidVolume5=e.bidofferData.bidVolume5,r.bidPrice5=e.bidofferData.bidPrice5,r.offerPrice5=e.bidofferData.askPrice5,r.offerVolume5=e.bidofferData.askVolume5),r},e.parseTotalVolume=function(e,t){return e.hasSummaryData()?e.summaryData.totalVolume:t},e}(),El=function(){function e(){}return e}(),Al=(function(){function e(){}return e}(),function(){function e(){}return e.parse=function(e){var t=new El;t.pointData=[];for(var i=e.buySellDetails.length-1;i>=0;i--)t.pointData.push({price:e.buySellDetails[i].price,buyVol:e.buySellDetails[i].buyVol,noSideVol:e.buySellDetails[i].noSideVol,sellVol:e.buySellDetails[i].sellVol,totalVol:e.buySellDetails[i].totalVol});return t.instrumentID=e.instrumentID,t.lastDone=e.lastDone,t.priceDigit=e.priceDigit,t.percentBuyVol=e.percentBuyVol,t.percentNoSideVol=e.percentNoSideVol,t.percentSellVol=e.percentSellVol,t},e}()),wl=function(){function e(){}return e}(),Tl=function(){function e(){}return e}(),Dl=function(){function e(){}return e}(),Il=function(){function e(){}return e}(),Pl=function(){function e(){}return e}(),Ol=function(){function e(){}return e}(),kl=function(){function e(){}return e}(),$l=function(){function e(){}return e}(),Ll=function(){function e(){}return e}(),Nl=function(){function e(){}return e}(),Ml=function(){function e(){}return e.parse=function(e){var t=new Il;return t.symbol=e.instrumentID,t.pointData=e.otherValueChartDatas.map(function(t,i,r){var n=new Ll;n.isUnChangePoint=!1,t.showLabel&&(n.forceShowLabel=t.timeHour.toString()),t.dataType===ze.NORMAL&&(n.value=t.value);var o="0"+t.timeMinute;return o=o.substring(o.length-2,o.length),t.dataType===ze.BREAK?n.label="BREAK":n.label=t.timeHour+":"+o,n.forceShowField=t.showLabel,n.value===e.prevClose&&(n.valueUnChange=t.value,n.isUnChangePoint=!0),n}),t.vLines=e.otherValueChartDatas.filter(function(e,t,i){return e.isVLine}).map(function(e,t,i){var r=new Nl,n="0"+e.timeMinute;return n=n.substring(n.length-2,n.length),r.catagoryValue=e.timeHour+":"+n,r}),t.low=e.low,t.high=e.high,t.spread=e.spread,t.prevClose=e.prevClose,t.priceDigit=e.priceDigit,t.timeHour=e.timeHour,t.timeMinute=e.timeMinute,t.timeSeconds=e.timeSeconds,t.last=e.last,t},e.parseMiniChart=function(e){var t=new kl;return t.maxVolume=e.maxVolume,t.prevClose=e.prevClose,t.spread=e.spread,t.high=e.high,t.low=e.low,t.last=e.last,t.pointData=[],t.labels=[],e.otherValueChartDatas.forEach(function(e,i,r){var n=new $l;e.dataType===ze.NORMAL&&(n.y=e.value);var o="0"+e.timeMinute;o=o.substring(o.length-2,o.length),e.dataType===ze.BREAK?n.x="BREAK":n.x=e.timeHour+":"+o,t.pointData.push(n),t.labels.push(n.x)}),t},e.mergeCompareChart=function(e,t){var i=new Pl;return i.primarySymbol=e.instrumentID,i.underlyingSymbol=t.instrumentID,i.pointData=[],e.otherValueChartDatas.forEach(function(e,r){var n=new Ol;e.showLabel&&(n.forceShowLabel=e.timeHour.toString()),e.dataType===ze.NORMAL&&(n.valuePrimary=e.value,r<t.otherValueChartDatas.length&&(n.valueUnderlying=t.otherValueChartDatas[r].value));var o="0"+e.timeMinute;o=o.substring(o.length-2,o.length),e.dataType===ze.BREAK?n.label="BREAK":n.label=e.timeHour+":"+o,n.forceShowField=e.showLabel,i.pointData.push(n)}),i.vLines=e.otherValueChartDatas.filter(function(e,t,i){return e.isVLine}).map(function(e,t,i){var r=new Nl,n="0"+e.timeMinute;return n=n.substring(n.length-2,n.length),r.catagoryValue=e.timeHour+":"+n,r}),i.primaryPriceDigit=e.priceDigit,i.underlyingPriceDigit=t.priceDigit,i.timeHour=e.timeHour,i.timeMinute=e.timeMinute,i.timeSeconds=e.timeSeconds,i.primaryPrevClose=e.prevClose,i.underlyingPrevClose=t.prevClose,i},e}(),Rl=function(){function e(e,t,i,r,n){this.colorService=e,this.userInfoService=t,this.piwikService=i,this.userApplicationProfileService=r,this.instrumentService=n}return e.prototype.emitBestOfferWithSideBuyEvent=function(e){var t=this;"true"===this.isEnableEmitBestBidOffer&&this.instrumentService.searchSymbol(this.symbolName,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.BUY),t.piwikService.eventTrack(nt.CLICK_BESTOFFER,t.analyticsCategory)})},e.prototype.emitBestBidWithSideSellEvent=function(e){var t=this;"true"===this.isEnableEmitBestBidOffer&&this.instrumentService.searchSymbol(this.symbolName,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.SELL),t.piwikService.eventTrack(nt.CLICK_BESTBID,t.analyticsCategory)})},e.$inject=["ColorService","UserInfoService","PiwikService","UserApplicationProfileService","InstrumentService"],e}(),_l=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,a)||this;return l.infoPubsub=t,l.colorService=i,l.currentSymbolChange=r,l.userInfoService=n,l.instrumentService=o,l.piwikService=s,l.pageService=a,l.userApplicationProfileService=c,l.onCurrentSymbolChangeCallBack=l.onCurrentSymbolChange.bind(l),l.onRecieveInfoCallback=l.onRecieveInfo.bind(l),l.symbol=dt.empty(),l.bidOffer=new ht,l.overview=new _i,l.isThreeBidsOffers=!1,l}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChange.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){this.infoPubsub.unsubscribe(this.symbol.name,this.onRecieveInfoCallback),this.currentSymbolChange.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.onCurrentSymbolChange=function(e){this.retrieveNewSymbolData(e)},t.prototype.onSubmitSymbol=function(e){return this.userApplicationProfileService.setCurrentSymbol(e),this.piwikService.eventTrack(nt.FILL_SYMBOL,rt.MINI_QUOTE),!0},t.prototype.retrieveNewSymbolData=function(e){this.infoPubsub.unsubscribe(this.symbol.name,this.onRecieveInfoCallback),e.name!==this.symbol.name&&this.clearData(),this.symbol=e,this.infoPubsub.subscribe(e.name,Hr.Intraday,this.onRecieveInfoCallback)},t.prototype.onRecieveInfo=function(e){this.overview=Bi.parse(e,this.overview),this.overview&&(this.overview.tsLevel=this.instrumentService.getTSLevel(this.symbol.name)),this.bidOffer=Cl.parseBidOffer(e,this.bidOffer,this.totalVolume),this.totalVolume=Cl.parseTotalVolume(e,this.totalVolume)},t.prototype.clearData=function(){this.bidOffer=new ht,this.overview=new _i,this.totalVolume=void 0},t.prototype.getBidOfferCategory=function(){return rt.MINI_QUOTE},t.prototype.getSymbolName=function(){return this.symbol?this.symbol.name:""},t.$inject=["InstrumentInfoPublishSubscriber","ColorService","CurrentSymbolChangeEvent","UserInfoService","InstrumentService","PiwikService","PageService","UserApplicationProfileService"],t}(ys),Vl=function(e){function t(t,i,r,n){var o=e.call(this,t)||this;return o.pageService=t,o.userInfoService=i,o.currentSymbolChangeEvent=r,o.streamingAttribute=n,o.NON_TAB_ID=-1,o.TICKER_TAB_ID=0,o.CHART_TAB_ID=1,o.NEWS_BY_SYMBOL_TAB_ID=2,o.MINI_QUOTE_BRAIN_BOX_TAB_ID=3,o.currentSymbol=dt.empty(),o}return ne(t,e),t.prototype.startService=function(){return this.pageBeforeStopService?void(this.active=this.pageBeforeStopService):void(this.active=this.TICKER_TAB_ID)},t.prototype.stopService=function(){this.pageBeforeStopService=this.active,this.active=this.NON_TAB_ID},t.prototype.viewDidLoad=function(){},t.prototype.hasBrainBoxTab=function(){return this.userInfoService.hasBrainBox()},t.prototype.getClassForTabWidth=function(){if(this.streamingAttribute.initDataAttr)return this.hasBrainBoxTab()?"col-10":"col-12"},t.$inject=["PageService","UserInfoService","CurrentSymbolChangeEvent","StreamingAttribute"],t}(ys),Bl=function(e){function t(t,i,r,n){var o=e.call(this,n)||this;return o.volByPricePubSub=t,o.currentSymbolChangeEvent=i,o.$timeout=r,o.pageService=n,o.onReceiveVolumeByPriceDetailCallBack=o.onReceiveVolumeByPriceDetail.bind(o),o.onCurrentSymbolChangeCallBack=o.onCurrentSymbolChange.bind(o),o.isShowLoading=!1,o.isShowNoData=!1,o}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.symbol&&this.volByPricePubSub.unsubscribe(this.symbol.name.toUpperCase(),this.onReceiveVolumeByPriceDetailCallBack),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentSymbolChange=function(e){this.symbol&&e.name===this.symbol.name||(this.isShowLoading=!1,this.isShowNoData=!1,this.unsubscribePreviousSymbol(this.symbol),this.symbol=e,this.subscribeCurrentSymbol(this.symbol))},t.prototype.unsubscribePreviousSymbol=function(e){if(e&&0!==e.name.length){var t=e.name;t=t?t.toUpperCase():t,t&&0!==t.length&&this.volByPricePubSub.unsubscribe(t,this.onReceiveVolumeByPriceDetailCallBack)}},t.prototype.subscribeCurrentSymbol=function(e){var t=this;if(e&&0!==e.name.length){this.timeOutPromise&&this.$timeout.cancel(this.timeOutPromise);var i=angular.copy(e);i.type=ar.lookup[i.type.value];var r=i?i.name.toUpperCase():i.name;i.isIndex()?this.isShowNoData=!0:(this.isShowLoading=!0,this.timeOutPromise=this.$timeout(function(){t.volByPricePubSub.subscribe(r,t.onReceiveVolumeByPriceDetailCallBack)},500))}},t.prototype.onReceiveVolumeByPriceDetail=function(e){this.isShowLoading=!1,this.volumeByPriceView=Al.parse(e)},t.$inject=["VolumeByPriceDetailPublishSubscriber","CurrentSymbolChangeEvent","$timeout","PageService"],t}(ys),xl=function(){function e(e,t,i,r){this.$element=e,this.$filter=t,this.timeService=i,this.streamingAttribute=r,this.filterPrice=this.$filter("price"),this.filterVolume=this.$filter("volume")}return e.prototype.$onChanges=function(e){if(e.volumeByPriceView&&e.volumeByPriceView.currentValue){var t={pointData:this.volumeByPriceView.pointData,instrumentID:this.volumeByPriceView.instrumentID,lastDone:this.volumeByPriceView.lastDone,priceDigit:this.volumeByPriceView.priceDigit};this.writeChart(t)}},e.prototype.writeChart=function(e){this.chart&&this.chart.clear();var t=this.filterPrice,i=this.filterVolume,r=e.pointData.length<=5?1===e.pointData.length?.2:.5:.8,n=0===e.pointData.length;if(n){var o={price:0,buyVol:0,noSideVol:0,sellVol:0};e.pointData.push(o)}this.chart=new AmCharts.AmSerialChart,this.chart.marginTop=25,this.chart.marginBottom=0,this.chart.dataProvider=e.pointData,this.chart.categoryField="price",this.chart.balloon.cornerRadius=6,this.chart.balloon.fontSize=8,this.chart.responsive={enabled:!1};var s=this.getTime();this.chart.allLabels=[{color:"#696969",text:"Last Update "+s,x:"3%",y:"-2.5%",bold:!1}];var a=new AmCharts.ValueAxis;a.stackType="regular",a.inside=!1,a.axisAlpha=0,a.color="#DADADA",a.gridColor="#DADADA",a.labelFunction=function(e,t,r){return n?0:i(e)},a.labelFrequency=1,this.chart.addValueAxis(a);var c=this.chart.categoryAxis;c.gridPosition="start",c.axisAlpha=0,c.gridAlpha=0,c.color="#DADADA",c.axisThickness=0,c.offset=-10,c.labelFunction=function(i,r,o){return n?"":t(i,e.priceDigit)};var l=new AmCharts.Guide;l.category=e.lastDone,l.lineColor="white",l.lineAlpha=1,l.dashLength=0,l.inside=!1,l.label="Last",l.labelRotation=0,l.position="top",c.addGuide(l);var u=new AmCharts.AmGraph;u.fillAlphas=.8,u.title="Buy",u.type="column",u.valueField="buyVol",u.fillColors="#58ACFA",u.lineThickness=0,u.columnWidth=r,u.balloonColor="black",u.balloonFunction=function(r,n,o){var s=r.dataContext;return"<div style='font-size:9px'>"+e.instrumentID+"<br>Price: <b>"+t(s.price,e.priceDigit)+"</b><br>Buy: <b>"+i(s.buyVol)+"</b><br>Non-side: <b>"+i(s.noSideVol)+"</b><br>Sell: <b>"+i(s.sellVol)+"</b><br>Total: <b>"+i(s.totalVol)+"</b></div>"},this.chart.addGraph(u);var d=new AmCharts.AmGraph;d.fillAlphas=.8,d.title="Non-side",d.type="column",d.valueField="noSideVol",d.fillColors="#B4B4B4",d.lineThickness=0,d.columnWidth=r,d.balloonColor="black",d.balloonFunction=function(r,n,o){var s=r.dataContext;return"<div style='font-size:9px'>"+e.instrumentID+"<br>Price: <b>"+t(s.price,e.priceDigit)+"</b><br>Buy: <b>"+i(s.buyVol)+"</b><br>Non-side: <b>"+i(s.noSideVol)+"</b><br>Sell: <b>"+i(s.sellVol)+"</b><br>Total: <b>"+i(s.totalVol)+"</b></div>"},this.chart.addGraph(d);var h=new AmCharts.AmGraph;h.fillAlphas=.8,h.title="Sell",h.type="column",h.valueField="sellVol",h.fillColors="#FA58AC",h.lineThickness=0,h.columnWidth=r,h.balloonColor="black",h.balloonFunction=function(r,n,o){var s=r.dataContext;return"<div style='font-size:9px'>"+e.instrumentID+"<br>Price: <b>"+t(s.price,e.priceDigit)+"</b><br>Buy: <b>"+i(s.buyVol)+"</b><br>Non-side: <b>"+i(s.noSideVol)+"</b><br>Sell: <b>"+i(s.sellVol)+"</b><br>Total: <b>"+i(s.totalVol)+"</b></div>"},this.chart.addGraph(h);var p=new AmCharts.AmBalloon;p.drop=!1,p.pointerOrientation="up",p.pointerWidth=0,p.fixedPosition=!1,p.offsetX=-50,this.chart.balloon=p,this.chart.write(this.$element[0])},e.prototype.getTime=function(){var e=this.timeService.getTime();if(e.isTimeSync){var t=e.syncDate;return t.format("HH:mm:ss")}return this.timeService.EMPTY_LAST_UPDATE},e.$inject=["$element","$filter","TimeService","StreamingAttribute"],e}(),Fl=function(){function e(e){this.$element=e,this.percentBuyVol=0,this.percentSellVol=0,this.percentNoSideVol=0,this.percentBarBuy="0%",this.percentBarSell="0%",this.percentBarNoside="0%"}return e.prototype.$onChanges=function(e){e.volumeByPriceView&&e.volumeByPriceView.currentValue&&(this.percentBuyVol=void 0===this.volumeByPriceView.percentBuyVol?0:this.volumeByPriceView.percentBuyVol,this.percentSellVol=void 0===this.volumeByPriceView.percentSellVol?0:this.volumeByPriceView.percentSellVol,this.percentNoSideVol=void 0===this.volumeByPriceView.percentNoSideVol?0:this.volumeByPriceView.percentNoSideVol,this.percentBarBuy=this.percentBuyVol+"%",this.percentBarSell=this.percentSellVol+"%",this.percentBarNoside=this.percentNoSideVol+"%",this.percentNoSideVol>1&&this.percentNoSideVol<100?0===this.percentBuyVol||0===this.percentSellVol?this.percentBarNoside=this.percentBarNoside+" - 4px - 0.2em":this.percentBarNoside=this.percentBarNoside+" - 2px - 0.2em":100===this.percentNoSideVol?this.percentBarNoside=this.percentBarNoside+" - 4px - 0.4em":0===this.percentBuyVol?this.percentBarSell=this.percentBarSell+" - 4px - 0.2em":0===this.percentSellVol?this.percentBarBuy=this.percentBarBuy+" - 4px - 0.2em":(this.percentBarBuy=this.percentBarBuy+" - 0.2em",this.percentBarSell=this.percentBarSell+" - 0.2em"))},e.$inject=["$element"],e}(),Ul=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this)||this;return c.$element=t,c.$filter=i,c.intradayChartPubSub=r,c.currentSymbolChangeEvent=n,c.$timeout=o,c.pageService=s,c.streamingAttribute=a,c.onReceiveIntradayChartCallBack=c.onReceiveIntradayChart.bind(c),c.onCurrentSymbolChangeCallBack=c.onCurrentSymbolChange.bind(c),c.filterPrice=c.$filter("price"),c}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.clearChart(),this.currentSymbol&&this.intradayChartPubSub.unsubscribe(this.currentSymbol.name,pe.PRICE,this.onReceiveIntradayChartCallBack),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.onCurrentSymbolChange=function(e){var t=this;if(!this.currentSymbol||e.name!==this.currentSymbol.name){this.clearChart(),this.timeOutPromise&&this.$timeout.cancel(this.timeOutPromise);var i=this.currentSymbol;i&&0!==i.name.length&&this.intradayChartPubSub.unsubscribe(i.name,pe.PRICE,this.onReceiveIntradayChartCallBack),this.currentSymbol=e,this.currentSymbol&&0!==this.currentSymbol.name.length&&(this.timeOutPromise=this.$timeout(function(){t.intradayChartPubSub.subscribe(t.currentSymbol.name,pe.PRICE,t.onReceiveIntradayChartCallBack)},500))}},t.prototype.clearChart=function(){this.chart&&this.chart.clear()},t.prototype.writeChart=function(){this.clearChart();var e=this.intradayChart,t=this.filterPrice;this.chart=new AmCharts.AmSerialChart,this.chart.path="assets/amcharts",this.chart.addClassNames=!0,this.chart.classNamePrefix="intraday-chart",this.chart.marginTop=10,this.chart.marginRight=10,this.chart.autoMargins=!0,this.chart.dataProvider=e.pointData,this.chart.categoryField="label",this.chart.balloon.cornerRadius=6,this.chart.responsive={enabled:!1};var i=this.padZeroTimestamp(e.timeHour,e.timeMinute,e.timeSeconds);this.chart.allLabels=[{color:"#696969",text:"Last Update "+i.timeHour+":"+i.timeMinute+":"+i.timeSeconds,x:"65%",y:"0%",bold:!1}];var r=this.chart.categoryAxis;r.parseDates=!1,r.minPeriod="mm",r.axisThickness=.5,r.minorGridEnabled=!1,r.axisColor="#DADADA",r.color="#DADADA",r.gridAlpha=0,r.forceShowField="forceShowField",r.labelFunction=function(e,t,i){if(t.dataContext.forceShowField)return t.dataContext.forceShowLabel};for(var n,o=e.vLines,s=0;s<o.length;s++)n=new AmCharts.Guide,n.category=o[s].catagoryValue,n.lineColor="#DADADA",n.lineAlpha=.3,n.dashLength=0,n.inside=!0,r.addGuide(n);var a=new AmCharts.ValueAxis;a.dashLength=0,a.inside=!1,a.color="#DADADA",a.gridColor="#DADADA",a.labelFunction=function(i,r,n){var o="";if(i.toString().indexOf(".")!==-1){var s=i.toString().split(".")[1].length;o=s>e.priceDigit?"":t(i,e.priceDigit)}else o=t(i,e.priceDigit);return o};var c;c=new AmCharts.Guide,c.value=e.prevClose,c.lineColor="#DADADA",c.lineAlpha=1,c.dashLength=2,c.inside=!0,c.position="right",c.above=!0,c.gridCount=3,a.addGuide(c),this.chart.addValueAxis(a);var l=new AmCharts.AmGraph;l.lineColor="#45F906",l.fillColors="#45F906",l.fillAlphas=.3,l.negativeBase=e.prevClose,l.negativeLineColor="#FF0202",l.negativeFillColors="#FF0202",l.negativeLineAlpha=.4,l.connect=!1,l.lineThickness=1.5,l.valueField="value",l.balloonColor="black",l.balloonFunction=function(i,r,n){return e.symbol+"<br>Time: "+i.category+"<br>Price: <b>"+t(i.dataContext.value,e.priceDigit)+"</b>"},this.chart.addGraph(l);var u=new AmCharts.AmGraph;u.lineColor="yellow",u.fillColors="yellow",u.fillAlphas=.3,u.negativeBase=e.prevClose,u.connect=!1,u.lineThickness=1.5,u.valueField="valueUnChange",u.showBalloon=!1,this.chart.addGraph(u);var d=new AmCharts.ChartCursor;d.cursorAlpha=1,d.cursorPosition="mouse",d.categoryBalloonDateFormat="YYYY",d.graphBulletSize=3,this.chart.addChartCursor(d),this.chart.creditsPosition="bottom-right",this.chart.write(this.$element[0])},t.prototype.onReceiveIntradayChart=function(e){this.intradayChart=Ml.parse(e),this.writeChart()},t.prototype.padZeroTimestamp=function(e,t,i){return{timeHour:e<10?"0"+e:e,timeMinute:t<10?"0"+t:t,timeSeconds:i<10?"0"+i:i}},t.$inject=["$element","$filter","IntradayChartPublishSubscriber","CurrentSymbolChangeEvent","$timeout","PageService","StreamingAttribute"],t}(gs),ql=function(e){function t(t,i,r,n,o){var s=e.call(this,n)||this;return s.$element=t,s.intradayChartPubSub=i,s.$timeout=r,s.pageService=n,s.currentSymbolChangeEvent=o,s.onReceiveIntradayChartCallBack=s.onReceiveIntradayChart.bind(s),s.onCurrentSymbolChangeCallBack=s.onCurrentSymbolChange.bind(s),s}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.clearChartImage(),this.currentSymbol&&this.intradayChartPubSub.unsubscribe(this.currentSymbol.name,pe.PRICE,this.onReceiveIntradayChartCallBack),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.onCurrentSymbolChange=function(e){this.clearChartImage(),this.timeOutPromise&&this.$timeout.cancel(this.timeOutPromise);var t=this.currentSymbol;t&&0!==t.name.length&&this.intradayChartPubSub.unsubscribe(t.name,pe.PRICE,this.onReceiveIntradayChartCallBack),this.currentSymbol=e,this.currentSymbol.name&&0!==this.currentSymbol.name.length&&this.intradayChartPubSub.subscribe(this.currentSymbol.name,pe.PRICE,this.onReceiveIntradayChartCallBack)},t.prototype.clearChartImage=function(){var e=this.$element.find("img");e.length>0&&e.remove()},t.prototype.onReceiveIntradayChart=function(e){this.intradayChart=Ml.parseMiniChart(e),this.clearChartImage(),0!==e.maxVolume&&this.writeChart(this.intradayChart.pointData,this.intradayChart.labels)},t.prototype.writeChart=function(e,t){var i=document.createElement("canvas");this.$element.append(i);var r,n,o=i.getContext("2d"),s="#000000";this.intradayChart.last>this.intradayChart.prevClose?(r="#80E85C",n="#2CAE00"):this.intradayChart.last===this.intradayChart.prevClose?(r="yellow",n="yellow"):(r="#FF0202",n="#FF0202");var a=o.createLinearGradient(0,0,0,90);a.addColorStop(0,n),a.addColorStop(1,s);var c={labels:t,datasets:[{data:e,fill:!0,backgroundColor:a,borderColor:r,borderWidth:.5,pointRadius:0,showLine:!0,tension:.1}]},l={responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:this.intradayChart.low-this.intradayChart.spread}}]},tooltips:{enabled:!1},legend:{display:!1}},u={type:"line",data:c,options:l};this.chart=new Chart(o,u);var d=document.createElement("img");d.src=this.chart.toBase64Image(),this.$element.append(d),this.chart.destroy();var h=this.$element.find("canvas").remove();h.length>0&&h.remove()},t.$inject=["$element","IntradayChartPublishSubscriber","$timeout","PageService","CurrentSymbolChangeEvent"],t}(ys),jl=function(){function e(e){this.colorService=e}return e.$inject=["ColorService"],e}(),Hl=function(){function e(e){this.colorService=e}return e.prototype.onSubmitSymbolInput=function(e){this.onSubmitSymbol&&this.onSubmitSymbol({newSymbol:e})},e.$inject=["ColorService"],e}(),Wl=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t)||this;return l.pageService=t,l.currentSymbolChangeEvent=i,l.userInfoService=r,l.newsService=n,l.$scope=o,l.$window=s,l.streamingAttribute=a,l.urlStore=c,l.onCurrentSymbolChangeCallback=l.onCurrentSymbolChange.bind(l),
l}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){var e=this;this.setNews||this.userInfoService.newsSoureList.some(function(t){if(t.isSET())return e.setNews=t,!0}),this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallback)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallback)},t.prototype.onCurrentSymbolChange=function(e){this.getNewsList(e.name)},t.prototype.getNewsList=function(e){var t=this;this.newsContentList=[],this.newsService.getNewsList(this.setNews,e).then(function(e){var i=qn.parseNewsItemResponseMessage(e);t.newsContentList=i.slice(0,10),t.$scope.$broadcast("vsRepeatReCalculateScroll")})},t.prototype.openNewsDetail=function(e){this.$window.open(""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_NEWS_FORWARD_URL+"?newsId="+e.id+"&filePath="+e.filePath+"&attachment="+e.hasAttach,"_blank","scrollbars=yes,resizable=yes,height=550,width=700")},t.$inject=["PageService","CurrentSymbolChangeEvent","UserInfoService","NewsService","$scope","$window","StreamingAttribute","URLStore"],t}(ys),Yl=function(){function e(){}return e}();angular.module("mini-quote",["binary","hilight-font-blink","number-formatter","input","customized-dbsv"]).component("miniQuote",{template:i(/*! ../../html/mini-quote/mini-quote.html */102),controller:_l,bindings:{page:"@"}}).component("bidOffer",{template:i(/*! ../../html/mini-quote/bid-offer.html */103),controller:Rl,bindings:{bidOffer:"<",symbolName:"<",analyticsCategory:"@",isEnableEmitBestBidOffer:"@",isThreeBidsOffers:"<"}}).component("volumeByPrice",{template:i(/*! ../../html/mini-quote/volume-by-price.html */104),controller:Bl,bindings:{isShowPercent:"<",page:"@"}}).component("stackedBarChart",{controller:xl,bindings:{volumeByPriceView:"<"}}).component("percentBuySell",{template:i(/*! ../../html/mini-quote/percent-buy-sell.html */105),controller:Fl,bindings:{volumeByPriceView:"<"}}).component("miniQuoteTabs",{template:i(/*! ../../html/mini-quote/mini-quote-tabs.html */106),controller:Vl,require:{miniQuoteCtrl:"^miniQuote"},bindings:{page:"@"}}).component("intradayChart",{controller:Ul}).component("miniIntradayChart",{controller:ql,require:{miniQuoteCtrl:"^miniQuote"},bindings:{symbol:"<"}}).component("miniQuoteOverview",{controller:jl,template:i(/*! ../../html/mini-quote/mini-quote-overview.html */107),bindings:{overview:"<",dynamicLabelPosition:"@"}}).component("miniQuoteSymbolInfo",{controller:Hl,template:i(/*! ../../html/mini-quote/mini-quote-symbol-info.html */108),bindings:{overview:"<",initSymbol:"<",onSubmitSymbol:"&",id:"@"}}).component("newsBySymbolRow",{controller:Yl,template:i(/*! ../../html/mini-quote/news-by-symbol-row.html */109),bindings:{data:"<"}}).component("newsBySymbol",{controller:Wl,template:i(/*! ../../html/mini-quote/news-by-symbol.html */110),bindings:{id:"@",page:"@"}});var Gl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(We),Kl=function(){function e(e,t,i,r){this.$element=e,this.$window=t,this.$scope=i,this.uiComponentsEventEmitter=r,this.DATA_TYPE=ji,this.hideDropdownCallBack=this.hideDropdown.bind(this),this.isShow=!1,this.hover={},this.dropdown=this.$element.find("li"),this.uiComponentsEventEmitter.subscribe(this.hideDropdownCallBack)}return e.prototype.isParentOf=function(e){return angular.element(e).parents("menu-more-dropdown").length>0},e.prototype.toggleDropdown=function(e){if(this.isParentOf(e.target)){var t=this.getSelectedElement();this.showDropdown(),this.scrollToSelectedMenu(t),this.showSelectedSubmenu(t)}},e.prototype.getSelectedElement=function(){return this.selected&&this.selected.element?this.selected.element:this.$element[0].children[0].lastChild.firstChild},e.prototype.scrollToSelectedMenu=function(e){e&&e.parentElement&&(e.parentElement.scrollTop=e.offsetTop)},e.prototype.showSelectedSubmenu=function(e){if(this.selected&&this.selected.hover);},e.prototype.showDropdown=function(){this.uiComponentsEventEmitter.dispatchCloseAll(),this.dropdown.addClass("expand"),this.isShow=!0,this.detectClickEvent()},e.prototype.hideDropdown=function(){this.isShow&&(this.dropdown.removeClass("expand"),this.isShow=!1,this.undetectClickEvent())},e.prototype.detectClickEvent=function(){angular.element(this.$window).on("mouseover",this.detectClickOuterDropdown.bind(this)),this.$element.on("mouseover",this.stopClickEventPropogation.bind(this))},e.prototype.undetectClickEvent=function(){angular.element(this.$window).off("mouseover",this.detectClickOuterDropdown.bind(this)),this.$element.off("mouseover",this.stopClickEventPropogation.bind(this))},e.prototype.stopClickEventPropogation=function(e){e.stopPropagation()},e.prototype.detectClickOuterDropdown=function(e){this.hideDropdown()},e.prototype.$onChanges=function(e){e.model&&e.model.currentValue&&this.onChangeModel(e.model.currentValue)},e.prototype.$onDestroy=function(){this.uiComponentsEventEmitter.unsubscribe(this.hideDropdownCallBack)},e.prototype.onChangeModel=function(e){!this.selected&&e.length>0&&(this.selected=e[0]),this.model=e},e.prototype.changeSelected=function(e,t){this.onUpdate&&this.onUpdate({model:e}),e.menuType!==ji.UNABLE_TO_SELECT&&(this.selected=e,this.selected.element=t)},e.prototype.menuSelected=function(e,t){var i=e.currentTarget;this.hideDropdown(),this.changeSelected(t,i)},Object.defineProperty(e.prototype,"id",{get:function(){return this.dropdownName+"-dropdown-"},enumerable:!0,configurable:!0}),e.prototype.isNotInList=function(e){return!(!e||void 0===e.menuType)&&e.menuType===ji.HEADER},e.prototype.isSelected=function(e){return void 0!==this.selected&&void 0!==e&&this.isSelectedSameAs(e)},e.prototype.isSelectedSameAs=function(e){return this.selected[this.keyName]===e[this.keyName]&&this.selected.id===e.id},e.$inject=["$element","$window","$scope","UIComponentsEventEmitter"],e}(),zl=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t,r,i,n,s)||this;return a.element=t,a.$scope=i,a.$window=r,a.uiComponentEventEmitter=n,a.$q=o,a.$rootScope=s,a.allSymbols=[],a.filteredSymbols=[],a.indexSelected=-1,a.indexSeparateLine=-1,a.$window.isBasicMode?a.ngModelOptions={updateOn:"default",debounce:250}:a.ngModelOptions={},a}return ne(t,e),t.prototype.$onInit=function(){var e=this.$element.find("input");e.bind("keyup",this.onKeyUp.bind(this)),e.bind("keydown",this.onKeyDown.bind(this))},t.prototype.$onChanges=function(e){e.initSymbol&&(this.symbol=e.initSymbol.currentValue),e.selectedSymbolList&&(this.symbol=this.symbol?this.symbol:"",this.filterAutoComplete(this.symbol)),e.isDisabled&&e.isDisabled.currentValue===!0&&(this.symbol=""),e.allSymbols&&(this.allSymbols=e.allSymbols.currentValue)},Object.defineProperty(t.prototype,"displayPlaceholder",{get:function(){return this.hintSymbol?"":this.placeholder},enumerable:!0,configurable:!0}),t.prototype.startDetectOnElementBlur=function(){e.prototype.showComponent.call(this)},t.prototype.stopDetectOnElementBlurThenBlurElement=function(){e.prototype.undetectClickEvent.call(this),this.hideAutoComplete(),this.hintSymbol=""},t.prototype.shouldShowComponent=function(){},t.prototype.shouldHideComponent=function(){this.onMainInputBlur()},t.prototype.showAutoComplete=function(){this.isAutoCompleteShown=!0},t.prototype.hideAutoComplete=function(){this.isAutoCompleteShown=!1},t.prototype.onScroll=function(){this.hideAutoComplete()},t.prototype.onFocusInput=function(){this.hintSymbol="",this.indexSelected=-1,this.selected={},this.startDetectOnElementBlur(),this.onFocusMainInput(),this.symbol||this.updateAutoComplete("")},t.prototype.onInputBlur=function(){return this.onInputChange(),this.isSubmitSymbol||this.isSelectInAutoComplete?(this.isSubmitSymbol=!1,void(this.isSelectInAutoComplete=!1)):(this.stopDetectOnElementBlurThenBlurElement(),void(this.onMainInputBlur&&this.onMainInputBlur({symbol:this.symbol})))},t.prototype.onKeyDown=function(e){e.which===Se?(e.preventDefault(),e.stopPropagation(),this.updateSelectedAutoCompleteToDown()):e.which===be&&(e.preventDefault(),e.stopPropagation(),this.updateSelectedAutoCompleteToUp())},t.prototype.onKeyUp=function(e){var t=this.element.find(".main-input");if(!t.is("[readonly]")){var i=t.val();e.which===ge&&(this.updateAutoComplete(i),this.checkifAutoCompleteMustShow(i))}},t.prototype.onInputChange=function(){this.updateAutoComplete(this.symbol.toUpperCase())},t.prototype.onUserSubmitSymbol=function(){this.isSubmitSymbol=!0;var e=this.indexSelected===-1?this.symbol:this.selected.symbol;this.selectAutoCompleteKey(e)},t.prototype.selectAutoCompleteKey=function(e){this.isSelectInAutoComplete=!0,this.symbol=e,this.onAutoCompleteSubmitNewSymbol&&this.onAutoCompleteSubmitNewSymbol({symbol:e}),this.onInputBlur(),this.stopDetectOnElementBlurThenBlurElement()},t.prototype.updateSelectedAutoCompleteToUp=function(){var e=this;this.$scope.$apply(function(){var t=e.element.find(".scroll-container"),i=t.scrollTop(),r=t.children()[1].clientHeight;if(e.indexSelected=e.indexSelected>0?e.indexSelected-1:0,e.selected=e.filteredSymbols[e.indexSelected]?e.filteredSymbols[e.indexSelected]:{symbol:"",isLastSearch:!1},e.updateAutoCompleteHint(e.selected.symbol),e.indexSelected*r<=i){var n=t.scrollTop()-r;t.scrollTop(n)}})},t.prototype.updateSelectedAutoCompleteToDown=function(){var e=this;this.$scope.$apply(function(){var t=e.element.find(".scroll-container"),i=t.scrollTop(),r=t.height(),n=t.children()[1].clientHeight;e.indexSelected=e.indexSelected===e.filteredSymbols.length-1?e.indexSelected:e.indexSelected+1,e.selected=e.filteredSymbols[e.indexSelected]?e.filteredSymbols[e.indexSelected]:{symbol:"",isLastSearch:!1},e.updateAutoCompleteHint(e.selected.symbol),(e.indexSelected+1)*n>i+r&&t.scrollTop(t.scrollTop()+n)})},t.prototype.updateAutoComplete=function(e){this.checkifAutoCompleteMustShow(e),this.filterAutoComplete(e),this.processSelectedSymbolAndIndexSelectedSymbol(e),this.updateAutoCompleteHint(this.selected.symbol),this.$scope.$broadcast("vsRepeatReCalculateScroll")},t.prototype.processSelectedSymbolAndIndexSelectedSymbol=function(e){if(this.filteredSymbols.length>0&&e){for(var t=0;t<this.filteredSymbols.length;t++)if(this.filteredSymbols[t].symbol===e)return this.selected=this.filteredSymbols[t],void(this.indexSelected=t);this.selected=this.filteredSymbols[0],this.indexSelected=0}else this.selected={symbol:"",isLastSearch:!1},this.indexSelected=-1},t.prototype.filterAutoComplete=function(e){var t=[];if(""!==e){e=e.replace(".","\\.");var i=new RegExp("^"+e,"i");t=t.concat(this.selectedSymbolList.filter(function(e){return i.test(e.toUpperCase())}).map(function(e){return{symbol:e,isLastSearch:!1}}));var r=t.pop();r&&(r.isLastSearch=!0,t.push(r)),t=t.concat(this.allSymbols.filter(function(e){return i.test(e.toUpperCase())}).map(function(e){return{symbol:e,isLastSearch:!1}}))}else t=t.concat(this.selectedSymbolList.map(function(e){return{symbol:e,isLastSearch:!1}}));this.filteredSymbols=t},t.prototype.checkifAutoCompleteMustShow=function(e){this.showAutoComplete()},t.prototype.updateAutoCompleteHint=function(e){var t=this.element.find(".main-input");t.val();this.hintSymbol=e},t.$inject=["$element","$scope","$window","UIComponentsEventEmitter","$q","$window","$rootScope"],t}(Fe),Ql=function(){function e(e,t,i,r,n){this.element=e,this.$timeout=t,this.instrumentService=i,this.alertService=r,this.userApplicationProfileService=n,this.onKeyPressCallback=this.onKeyPress.bind(this),this.isIE=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),this.element.bind("keypress",this.onKeyPressCallback),this.isModalShown=!1,this.lastSelectedSymbolList=[],this.shouldPreventBlur=!1}return e.prototype.validateSymbolSuccess=function(e){},e.prototype.validateSymbolFail=function(e,t){},e.prototype.validateSymbolDismissAlert=function(){},e.prototype.validateSymbol=function(e){var t=this;this.searchSymbol(e,this.marketType).then(function(e){t.symbol=e.name,t.validateSymbolSuccess(e),t.userApplicationProfileService.addLastSearchSymbol(e)},function(i){t.isModalShown=!0,t.validateSymbolFail(i,e),t.alertService.showErrorAlert(i).then(function(){var e=t.element.find(".main-input");t.isModalShown=!1,t.shouldPreventBlur=!0,t.isIE&&e.blur(),e.select(),t.isIE||(t.shouldPreventBlur=!1),t.validateSymbolDismissAlert()})})},e.prototype.onKeyPress=function(e){rr.matchSpecialKeysKeypress(e)||this.detectSymbol(e)},e.prototype.onMainInputBlur=function(e){return this.isModalShown||this.shouldPreventBlur?void(this.shouldPreventBlur=!1):void this.onFocusOutside(e)},e.prototype.onMainInputFocus=function(){this.updateLastSelectedSymbolList()},e.prototype.onAutoCompleteSubmitNewSymbol=function(e){var t=this;return!e||""===e||e.length<=0?(this.isModalShown=!0,void this.alertService.showErrorAlert("Please Insert Symbol").then(function(){var e=t.element.find(".main-input");t.isModalShown=!1,t.shouldPreventBlur=!0,t.isIE&&e.blur(),t.$timeout(function(){e.focus()}),t.isIE||(t.shouldPreventBlur=!1),t.validateSymbolDismissAlert()})):void this.validateSymbol(e)},e.prototype.detectSymbol=function(e){var t=String.fromCharCode(e.charCode);this.matchSymbol(t)||e.preventDefault&&e.preventDefault()},e}(),Xl=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,i,r,n,o,c)||this;return l.focus=t,l.element=i,l.$timeout=r,l.instrumentService=n,l.alertService=o,l.$scope=s,l.initDataEvent=a,l.userApplicationProfileService=c,l.initialAllSymbolListCallBack=l.initialAllSymbolList.bind(l),l.focusFactory=t,l.focusElements=[],l.initDataEvent.subscribe(l.initialAllSymbolListCallBack),l}return ne(t,e),t.prototype.$onInit=function(){this.nextFocusElements&&(this.focusElements=this.nextFocusElements)},t.prototype.$onDestroy=function(){this.initDataEvent.unsubscribe(this.initialAllSymbolListCallBack)},t.prototype.focusNextElement=function(e,t){var i=this;this.focusElements.some(function(e){var r=i.element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)}),e.preventDefault()},t.prototype.onKeyPress=function(t){e.prototype.onKeyPress.call(this,t)},t.prototype.validateSymbol=function(t){e.prototype.validateSymbol.call(this,t)},t.prototype.validateSymbolSuccess=function(e){this.focusNextElement({preventDefault:function(){}},this.focusFactory.focusElement),this.onValidatedSymbol({instrument:e})},t.prototype.validateSymbolFail=function(e,t){this.onValidatedSymbolFail(),this.onInputSymbolChange&&this.onInputSymbolChange({inputStr:t})},t.prototype.onFocusOutside=function(e){this.onInputSymbolChange&&void 0!==e&&this.onInputSymbolChange({inputStr:e}),this.onBlur&&void 0!==e&&this.onBlur({symbol:e})},t.prototype.matchSymbol=function(e){return/[a-zA-Z0-9@&#\- ]/.test(e)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbol(e,t)},t.prototype.initialAllSymbolList=function(){switch(this.marketType){case Qe.EQUITY:this.allSymbols=this.instrumentService.getInstrumentListForTradeByMarketType(Qe.EQUITY);break;case Qe.DERIVATIVE:this.allSymbols=this.instrumentService.getInstrumentListForTradeByMarketType(Qe.DERIVATIVE)}},t.prototype.updateLastSelectedSymbolList=function(){var e=[];switch(this.marketType){case Qe.EQUITY:e.push.apply(e,this.userApplicationProfileService.getLastSelectedSymbolListByMarket(Qe.EQUITY));break;case Qe.DERIVATIVE:e.push.apply(e,this.userApplicationProfileService.getLastSelectedSymbolListByMarket(Qe.DERIVATIVE))}var t=parseInt(this.lastSearch,10)||5;this.lastSelectedSymbolList=e.slice(0,t)},t.$inject=["focus","$element","$timeout","InstrumentService","AlertService","$scope","InitDataEvent","UserApplicationProfileService"],t}(Ql),Jl=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t,i,r,n,o,s,a,c)||this;return l.focus=t,l.element=i,l.$timeout=r,l.instrumentService=n,l.alertService=o,l.$scope=s,l.initDataEvent=a,l.userApplicationProfileService=c,l.initialAllSymbolList(),l.focusElements=[],l}return ne(t,e),t.prototype.initialAllSymbolList=function(){this.allSymbols=this.instrumentService.getInstrumentByBoardType(ar.STOP_SYMBOL_LIST)},t.prototype.searchSymbol=function(e){return this.instrumentService.searchStopSymbol(e)},t.prototype.updateLastSelectedSymbolList=function(){var e=[];e.push.apply(e,this.userApplicationProfileService.getLastSelectedSymbolListByStopSymbol()),this.lastSelectedSymbolList=e.slice(0,2)},t.$inject=["focus","$element","$timeout","InstrumentService","AlertService","$scope","InitDataEvent","UserApplicationProfileService"],t}(Xl),Zl=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t,n,i,r,s)||this;return a.element=t,a.instrumentService=i,a.alertService=r,a.$timeout=n,a.$q=o,a.userApplicationProfileService=s,a.mainInput="input.main-input",a.initialAllSymbolList(),a}return ne(t,e),t.prototype.showInput=function(){this.showSymbolInput=!0;var e=this.element.find(this.mainInput);this.$timeout(function(){return e.focus()},100,!1)},t.prototype.callCheckDuplicateSymbol=function(e){var t=this,i=this.checkDuplicateSymbol({symbol:e.name});if(void 0!==i){var r="Duplicate Symbol";return this.isModalShown=!0,this.alertService.showErrorAlert(r).then(function(){t.isModalShown=!1,t.shouldPreventBlur=!0;var e=t.element.find(t.mainInput);return e.blur(),e.select(),t.$q.reject()})}return this.$q.resolve()},t.prototype.clearSymbol=function(){var e=this;this.$timeout(function(){return e.symbol=""}),this.showSymbolInput=!1},t.prototype.onKeyPress=function(t){e.prototype.onKeyPress.call(this,t)},t.prototype.validateSymbol=function(t){e.prototype.validateSymbol.call(this,t)},t.prototype.validateSymbolSuccess=function(e){var t=this;this.callCheckDuplicateSymbol(e).then(function(){t.onCheckDuplicateSymbolSuccess({symbol:e.name});var i=t.element.find(t.mainInput);i.blur(),t.clearSymbol()})},t.prototype.validateSymbolDismissAlert=function(){},t.prototype.onFocusOutside=function(){this.clearSymbol()},t.prototype.matchSymbol=function(e){return/[a-zA-Z0-9@&#\- .]/.test(e)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbolByBrokerLicense(e)},t.prototype.initialAllSymbolList=function(){this.allSymbols=this.instrumentService.getInstrumentListByBrokerLicense()},t.prototype.updateLastSelectedSymbolList=function(){this.lastSelectedSymbolList=this.userApplicationProfileService.getLastSelectedSymbolListByBrokerLicense()},t.$inject=["$element","InstrumentService","AlertService","$timeout","$q","UserApplicationProfileService"],t}(Ql),eu=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t,i,r,n,s)||this;return a.element=t,a.$timeout=i,a.instrumentService=r,a.alertService=n,a.$q=o,a.userApplicationProfileService=s,a.initialAllSymbolList(),a}return ne(t,e),t.prototype.callCheckDuplicateSymbol=function(e){var t=this,i=this.checkDuplicateSymbol({instrument:e});if(0!==i.length){if(1===i.length&&i[0].toString()===this.rowIndex)return this.$q.resolve();var r=i.join(","),n="Duplicate Symbol "+e.name+" in row "+r;return this.alertService.showErrorAlert(n).then(function(){var e=t.element.find(".main-input");return e.select(),t.$q.reject()})}return this.$q.resolve()},t.prototype.onKeyPress=function(t){e.prototype.onKeyPress.call(this,t)},t.prototype.validateSymbol=function(t){e.prototype.validateSymbol.call(this,t)},t.prototype.validateSymbolSuccess=function(e){var t=this;this.symbol=e.name,this.$timeout(function(){t.callCheckDuplicateSymbol(e).then(function(){t.onCheckDuplicateSymbolSuccess({instrument:e})})})},t.prototype.validateSymbolFail=function(e,t){this.symbol=t.toUpperCase(),this.onValidatedSymbolFail()},t.prototype.onFocusOutside=function(e){void 0!==e&&(this.symbol=e)},t.prototype.matchSymbol=function(e){return/[a-zA-Z0-9@&#\- .]/.test(e)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbolByBrokerLicense(e)},t.prototype.initialAllSymbolList=function(){this.allSymbols=this.instrumentService.getInstrumentListByBrokerLicense()},t.prototype.updateLastSelectedSymbolList=function(){this.lastSelectedSymbolList=this.userApplicationProfileService.getLastSelectedSymbolListByBrokerLicense()},t.$inject=["$element","$timeout","InstrumentService","AlertService","$q","UserApplicationProfileService"],t}(Ql),tu=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i,r,n,o)||this;return s.element=t,s.$timeout=i,s.instrumentService=r,s.alertService=n,s.userApplicationProfileService=o,s.onClickCallBack=s.onClick.bind(s),s.mainInput="input.main-input",s.element.find("input").bind("click",s.onClickCallBack),s}return ne(t,e),t.prototype.$onChanges=function(e){void 0!==e.initSymbol&&(this.symbol=e.initSymbol.currentValue),void 0!==e.initSymbol&&this.isInitSymbolChange(e.initSymbol)&&this.removeBlankModeClass(),""===e.initSymbol.currentValue&&this.addBlankModeClass()},t.prototype.isInitSymbolChange=function(e){return(e.isFirstChange()||""===e.previousValue)&&void 0!==e.currentValue&&e.currentValue.length>0},t.prototype.onClick=function(e){this.editOnClick&&(this.initSymbol=this.symbol,this.onEditMode(e),this.isAllSymbolListInitialized||(this.allSymbols=this.getInstrumentList(),this.isAllSymbolListInitialized=!1))},t.prototype.getInstrumentList=function(){return this.instrumentService.getInstrumentListByBrokerLicense()},t.prototype.clearSymbol=function(){void 0===this.initSymbol?this.initSymbol="":delete this.initSymbol},Object.defineProperty(t.prototype,"displaySymbol",{get:function(){return this.symbol&&""!==this.symbol?this.symbol:this.placeholder},enumerable:!0,configurable:!0}),t.prototype.removeBlankModeClass=function(){var e=this.element.find("p");e.removeClass("blank-mode")},t.prototype.addBlankModeClass=function(){var e=this.element.find("p");e.addClass("blank-mode")},t.prototype.onEditMode=function(e){if(!this.isEditMode){this.isEditMode=!0,this.updateEditModeElementView();var t=this.element.find(".main-input");this.$timeout(function(){return t.select()})}},t.prototype.onKeyPress=function(t){e.prototype.onKeyPress.call(this,t)},t.prototype.validateSymbol=function(t){e.prototype.validateSymbol.call(this,t)},t.prototype.validateSymbolSuccess=function(e){this.onValidatedSymbol({instrument:e});var t=this.element.find(this.mainInput);t.blur()},t.prototype.onFocusOutside=function(){this.isEditMode&&(this.initSymbol=angular.copy(this.symbol),this.isEditMode=!1,this.updateEditModeElementView(),this.clearSymbol())},t.prototype.matchSymbol=function(e){return/[a-zA-Z0-9@&#\- .]/.test(e)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbolByBrokerLicense(e)},t.prototype.initialAllSymbolList=function(){this.isAllSymbolListInitialized=!1},t.prototype.updateLastSelectedSymbolList=function(){this.lastSelectedSymbolList=this.userApplicationProfileService.getLastSelectedSymbolListByBrokerLicense()},t.prototype.updateEditModeElementView=function(){this.autoCompleteElement||(this.autoCompleteElement=this.element.find("auto-complete")),this.isEditMode?(this.autoCompleteElement.addClass("edit-mode"),this.autoCompleteElement.removeClass("hide")):(this.autoCompleteElement.removeClass("edit-mode"),this.autoCompleteElement.addClass("hide"))},t.$inject=["$element","$timeout","InstrumentService","AlertService","UserApplicationProfileService"],t}(Ql),iu=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i,r,n,o)||this;return s.element=t,s.$timeout=i,s.instrumentService=r,s.alertService=n,s.userApplicationProfileService=o,s.onClickCallBack=s.onClick.bind(s),s.mainInput="input.main-input",s.element.find("input").bind("click",s.onClickCallBack),s}return ne(t,e),t.prototype.$onChanges=function(e){void 0!==e.initSymbol&&(this.symbol=e.initSymbol.currentValue),void 0!==e.initSymbol&&""===e.initSymbol.previousValue&&e.initSymbol.currentValue.length>0&&this.removeBlankModeClass(),void 0!==e.initSymbol&&void 0!==e.initSymbol.previousValue&&e.initSymbol.previousValue.length>0&&""===e.initSymbol.currentValue&&this.addBlankModeClass()},t.prototype.onClick=function(e){this.editOnClick&&(this.initSymbol=this.symbol,this.onEditMode(e),this.isAllSymbolListInitialized||(this.allSymbols=this.instrumentService.getInstrumentListForTradeByMarketType(this.marketType),this.isAllSymbolListInitialized=!1))},t.prototype.clearSymbol=function(){void 0===this.initSymbol?this.initSymbol="":delete this.initSymbol},Object.defineProperty(t.prototype,"displaySymbol",{get:function(){return this.symbol&&""!==this.symbol?this.symbol:"Symbol"},enumerable:!0,configurable:!0}),t.prototype.removeBlankModeClass=function(){var e=this.element.find("p");e.removeClass("blank-mode")},t.prototype.addBlankModeClass=function(){var e=this.element.find("p");e.addClass("blank-mode")},t.prototype.onEditMode=function(e){if(!this.isEditMode){this.isEditMode=!0,this.updateEditModeElementView();var t=this.element.find(this.mainInput);t.show(),this.$timeout(function(){return t.select()})}},t.prototype.onKeyPress=function(t){e.prototype.onKeyPress.call(this,t)},t.prototype.validateSymbol=function(t){e.prototype.validateSymbol.call(this,t)},t.prototype.validateSymbolSuccess=function(e){this.onValidatedSymbol({instrument:e});var t=this.element.find(this.mainInput);t.blur()},t.prototype.onFocusOutside=function(){this.isEditMode&&(this.initSymbol=angular.copy(this.symbol),this.isEditMode=!1,this.updateEditModeElementView(),this.clearSymbol())},t.prototype.matchSymbol=function(e){return/[a-zA-Z0-9@&#\- ]/.test(e)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbol(e,t)},t.prototype.initialAllSymbolList=function(){switch(this.marketType){case Qe.EQUITY:this.allSymbols=this.instrumentService.getInstrumentListForTradeByMarketType(Qe.EQUITY);break;case Qe.DERIVATIVE:this.allSymbols=this.instrumentService.getInstrumentListForTradeByMarketType(Qe.DERIVATIVE)}},t.prototype.updateLastSelectedSymbolList=function(){var e=[];switch(this.marketType){case Qe.EQUITY:e.push.apply(e,this.userApplicationProfileService.getLastSelectedSymbolListByMarket(Qe.EQUITY));break;case Qe.DERIVATIVE:e.push.apply(e,this.userApplicationProfileService.getLastSelectedSymbolListByMarket(Qe.DERIVATIVE))}var t=5;this.lastSelectedSymbolList=e.slice(0,t)},t.prototype.updateEditModeElementView=function(){this.autoCompleteElement||(this.autoCompleteElement=this.element.find("auto-complete")),this.isEditMode?(this.autoCompleteElement.addClass("edit-mode"),this.autoCompleteElement.removeClass("hide")):(this.autoCompleteElement.removeClass("edit-mode"),this.autoCompleteElement.addClass("hide"))},t.$inject=["$element","$timeout","InstrumentService","AlertService","UserApplicationProfileService"],t}(Ql),ru=function(){function e(e,t){this.name=e,this.status=t,".MAI"===this.name&&(this.name=".mai")}return e.prototype.toString=function(){return void 0===this.status||0===this.status.length?this.name:this.name+" ("+this.status+")"},e}(),nu=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t,s,i,r,c)||this;return l.$element=t,l.instrumentService=i,l.alertService=r,l.$filter=n,l.$q=o,l.$timeout=s,l.piwikService=a,l.userApplicationProfileService=c,l.MAIN_INPUT_ID=".main-input",l.$element.bind("keypress",l.onKeyPressCallback),l.elipsisFilter=n("elipsis"),l.showTooltip=!1,l.isEditMode=!1,l}return ne(t,e),t.prototype.$onChanges=function(e){void 0!==e.initSymbol&&this.processDisplaySymbol(),void 0!==e.status&&this.processDisplaySymbol()},t.prototype.processDisplaySymbol=function(){var e="";e=new ru(this.initSymbol,this.status).toString(),this.displaySymbol=this.elipsisFilter(e,12),this.tooltipsSymbol=e,this.showTooltip=this.ifSymbolIsTooLong(this.displaySymbol)},t.prototype.onDblClick=function(e){this.onEditMode(e),this.sendAnalytic()},t.prototype.onEditMode=function(e){this.isEditMode||(this.isEditMode=!0,this.actualIndex=this.findIndex({symbol:this.initSymbol}),this.isAllSymbolListInitialized||(this.allSymbols=this.instrumentService.getInstrumentListByBrokerLicense()))},t.prototype.onSymbolInputInitiated=function(){var e=this.$element.find(".main-input");this.$timeout(function(){return e.select()},0)},t.prototype.sendAnalytic=function(){this.analyticsCategory&&""!==this.analyticsCategory&&this.analyticsAction&&""!==this.analyticsAction&&this.piwikService.eventTrack(this.analyticsAction,this.analyticsCategory)},t.prototype.callCheckDuplicateSymbol=function(e){var t=this,i=this.findIndex({symbol:e.name});if(void 0!==i&&i!==this.actualIndex){var r="Duplicate Symbol";return this.isModalShown=!0,this.alertService.showErrorAlert(r).then(function(){t.shouldPreventBlur=!0,t.isModalShown=!1;var e=t.element.find(t.MAIN_INPUT_ID);return e.blur(),t.$timeout(function(){return e.select()}),t.$q.reject()})}return this.$q.resolve()},t.prototype.isEnableTooltip=function(){return this.showTooltip&&!this.isEditMode},t.prototype.ifSymbolIsTooLong=function(e){return e.length>12},t.prototype.onKeyPress=function(t){e.prototype.onKeyPress.call(this,t)},t.prototype.validateSymbol=function(t){e.prototype.validateSymbol.call(this,t)},t.prototype.validateSymbolSuccess=function(e){var t=this;this.callCheckDuplicateSymbol(e).then(function(){t.onCheckDuplicateSymbolSuccess({symbol:e.name,index:t.actualIndex});var i=t.element.find(t.MAIN_INPUT_ID);i.blur()})},t.prototype.onFocusOutside=function(){this.isEditMode&&(this.isEditMode=!1)},t.prototype.matchSymbol=function(e){return/[a-zA-Z0-9@&#\- .]/.test(e)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbolByBrokerLicense(e)},t.prototype.initialAllSymbolList=function(){this.isAllSymbolListInitialized=!1},t.prototype.updateLastSelectedSymbolList=function(){this.lastSelectedSymbolList=this.userApplicationProfileService.getLastSelectedSymbolListByBrokerLicense()},t.$inject=["$element","InstrumentService","AlertService","$filter","$q","$timeout","PiwikService","UserApplicationProfileService"],t}(Ql),ou=function(){function e(e,t,i){this.$element=e,this.$timeout=t,this.userApplicationProfileService=i}return e.prototype.$onInit=function(){this.index=parseInt(this.name.split("-")[2],10),this.hideMainInput()},e.prototype.onKeyPress=function(e,t){rr.matchSpecialKeysKeypress(e)||this.detectNumeric(e)},e.prototype.onKeyDown=function(e){e.which!==fe&&e.which!==ye||(e.preventDefault(),this.onInputBlur())},e.prototype.onInputChange=function(){this.currentVolume=yt.formatVolume(yt.toNumber(this.currentVolume))},e.prototype.onInputBlur=function(){this.hideMainInput();var e=this.$element.find(".container");this.$timeout(function(){return e.focus()}),this.onBlur&&this.onBlur({index:this.index,volume:this.currentVolume})},e.prototype.onMouseDown=function(e){this.onActivate({index:this.index})},e.prototype.onInputMouseDown=function(e){e.stopPropagation()},e.prototype.onDoubleClickContainer=function(){this.userApplicationProfileService.isSecondaryWindow||(this.showMainInput(),this.currentVolume=this.data.value)},e.prototype.detectNumeric=function(e){String.fromCharCode(e.charCode).match(/[0-9]/)||e.preventDefault()},e.prototype.getDisplayVolume=function(){return this.data.displayValue},e.prototype.getClass=function(){return this.data.isEmpty()?"blank-mode":""},e.prototype.hideMainInput=function(){var e=this.$element.find("input");e.hide()},e.prototype.showMainInput=function(){var e=this.$element.find("input");e.show(),this.$timeout(function(){return e.select()})},e.$inject=["$element","$timeout","UserApplicationProfileService"],e}(),su=function(){function e(e,t,i,r,n){this.$element=e,this.focus=t,this.$filter=i,this.piwikService=r,this.$window=n,this.filterVolume=i("volume"),this.focusFactory=t,this.$window.isBasicMode?this.ngModelOptions={updateOn:"default",debounce:250}:this.ngModelOptions={}}return e.prototype.$onInit=function(){"price-volume-condition-volume"===this.name&&(this.volume=yt.formatVolume(yt.toNumber(this.volume))),this.nextFocusElements&&(this.focusElements=this.nextFocusElements);var e=this.$element.find("input");e.bind("keypress",this.onKeyPress.bind(this)),e.bind("keydown",this.onKeydown.bind(this))},e.prototype.onKeyPress=function(e,t){return rr.matchEnterKeyKeypress(e)?void this.focusNextElement(e,this.focusFactory.enterKey):void(rr.matchSpecialKeysKeypress(e)||this.detectNumeric(e))},e.prototype.onKeydown=function(e){return e.which===ye?void this.focusNextElement(e,this.focusFactory.tabKey):(e.which===be&&(this.onInputArrowUp&&this.onInputArrowUp(),
e.preventDefault(),e.stopPropagation()),void(e.which===Se&&(this.onInputArrowDown&&this.onInputArrowDown(),e.preventDefault(),e.stopPropagation())))},e.prototype.onInputChange=function(){this.volume=this.filterVolume(yt.toNumber(this.volume))},e.prototype.onBlur=function(){this.onInputChange(),this.piwikService.eventTrack(this.analyticsAction,this.analyticsCategory),this.onInputBlur&&this.onInputBlur()},e.prototype.focusNextElement=function(e,t){var i=this;this.focusElements&&(this.focusElements.some(function(e){var r=i.$element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)}),e.preventDefault())},e.prototype.detectNumeric=function(e){String.fromCharCode(e.charCode).match(/[0-9]/)||e.preventDefault()},e.prototype.isInMultiOrder=function(){var e=this.name.search("multi-order");return e!==-1},e.prototype.onFocus=function(){this.onInputFocus&&this.onInputFocus()},e.$inject=["$element","focus","$filter","PiwikService","$window"],e}(),au=function(){function e(){}return e}(),cu=new au;cu[Ae]=Ge.ATO,cu[we]=Ge.ATC,cu[De]=Ge.MP,cu[Ie]=Ge.MP_MKT,cu[Pe]=Ge.MP_MTL;var lu=new au;lu[Ae]=Ge.ATO,lu[De]=Ge.MP,lu[Ie]=Ge.MP_MKT,lu[Pe]=Ge.MP_MTL;var uu=function(){function e(){}return e.EQUITY_PRICE_TYPE=cu,e.DERIVATIVES_PRICE_TYPE=lu,e}(),du=function(){function e(e,t,i,r,n,o,s){this.focus=e,this.$filter=t,this.piwikService=i,this.$element=r,this.$scope=n,this.$window=o,this.settingService=s,this.priceFilter=t("price"),this.focusFactory=e,this.$window.isBasicMode?this.ngModelOptions={updateOn:"default",debounce:250}:this.ngModelOptions={}}return e.prototype.$onInit=function(){"change-order-price"===this.name&&(this.focusElements=[{parent:"div.change-order",focusElement:"volume-input input"}]),this.nextFocusElements&&(this.focusElements=this.nextFocusElements),this.inputElement=this.$element.find("input"),this.inputElement.bind("keypress",this.onKeyPress.bind(this)),this.inputElement.bind("keydown",this.onKeydown.bind(this))},e.prototype.$onChanges=function(e){e.priceDigit&&void 0!==this.price&&(this.price=yt.formatPrice(yt.toNumber(this.price),this.priceDigit))},e.prototype.onKeyPress=function(e){return rr.matchEnterKeyKeypress(e)?void this.focusNextElement(e,this.focusFactory.enterKey):void(rr.matchSpecialKeysKeypress(e)||this.detectPrice(e))},e.prototype.onKeydown=function(e){if(e.which===ye)return void this.focusNextElement(e,this.focusFactory.tabKey);if(e.which===be?(this.onInputArrowUp&&this.onInputArrowUp(),e.preventDefault(),e.stopPropagation()):e.which===Se&&(this.onInputArrowDown&&this.onInputArrowDown(),e.preventDefault(),e.stopPropagation()),this.settingService.keyboardShortcutConfiguration.isEnable&&this.onInputPriceTypeShortcut&&this.priceTypeShortcutMapping){var t=this.priceTypeShortcutMapping[e.which];t&&(this.onInputPriceTypeShortcut({priceType:t}),this.inputElement.blur(),this.focusNextElement(e,this.focusFactory.tabKey))}},e.prototype.onBlur=function(){this.detectMouseClickForIE=!1,this.price=this.formatPriceStr(this.price),this.piwikService.eventTrack(this.analyticsAction,this.analyticsCategory),this.onInputBlur&&this.onInputBlur()},e.prototype.onMousedown=function(){this.detectMouseClickForIE=!0,this.unformat()},e.prototype.onFocus=function(){return this.detectMouseClickForIE?void(this.detectMouseClickForIE=!1):void this.unformat()},e.prototype.formatPriceStr=function(e){if(!e)return"";var t,i=new Big(yt.toNumber(e));return Big.RM=0,void 0===this.priceDigit?numeral(e).format("0,0.[0000000000]"):(t=i.toFixed(this.priceDigit),this.priceFilter(t,this.priceDigit))},e.prototype.focusNextElement=function(e,t){var i=this;this.focusElements&&(this.focusElements.some(function(e){var r=i.$element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)}),e.preventDefault())},e.prototype.detectPrice=function(e){String.fromCharCode(e.charCode).match(/-/)&&this.canNegative||String.fromCharCode(e.charCode).match(/[0-9.]/)||e.preventDefault()},e.prototype.unformat=function(){this.price&&""!==this.price&&(this.price=yt.toNumber(this.price).toString())},e.$inject=["focus","$filter","PiwikService","$element","$scope","$window","SettingsService"],e}(),hu=function(){function e(e,t,i,r,n){this.focus=e,this.$filter=t,this.piwikService=i,this.$element=r,this.$window=n,this.priceFilter=t("price"),this.focusFactory=e,this.$window.isBasicMode?this.ngModelOptions={updateOn:"default",debounce:250}:this.ngModelOptions={}}return e.prototype.$onInit=function(){this.nextFocusElements&&(this.focusElements=this.nextFocusElements);var e=this.$element.find("input");e.bind("keypress",this.onKeyPress.bind(this)),e.bind("keydown",this.onKeydown.bind(this))},e.prototype.onKeyPress=function(e){return rr.matchEnterKeyKeypress(e)?void this.focusNextElement(e,this.focusFactory.enterKey):void(rr.matchSpecialKeysKeypress(e)||this.detectPrice(e))},e.prototype.onKeydown=function(e){return e.which===ye?void this.focusNextElement(e,this.focusFactory.tabKey):void(e.which!==Se&&e.which!==be||(e.preventDefault(),e.stopPropagation()))},e.prototype.onBlur=function(){this.detectMouseClickForIE=!1,this.price=this.formatPriceStr(this.price),this.piwikService.eventTrack(this.analyticsAction,this.analyticsCategory),this.onInputBlur&&this.onInputBlur()},e.prototype.onMousedown=function(){this.detectMouseClickForIE=!0,this.unformat()},e.prototype.onFocus=function(){return this.detectMouseClickForIE?void(this.detectMouseClickForIE=!1):void this.unformat()},e.prototype.formatPriceStr=function(e){if(!e)return"";new Big(yt.toNumber(e));return Big.RM=0,numeral(e).format("0,0.[0000000000]")},e.prototype.focusNextElement=function(e,t){var i=this;this.focusElements.some(function(e){var r=i.$element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)}),e.preventDefault()},e.prototype.detectPrice=function(e){String.fromCharCode(e.charCode).match(/-/)&&this.canNegative||String.fromCharCode(e.charCode).match(/[0-9.]/)||e.preventDefault()},e.prototype.unformat=function(){this.price&&""!==this.price&&(this.price=yt.toNumber(this.price).toString())},e.$inject=["focus","$filter","PiwikService","$element","$window"],e}(),pu=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t,i,r,n,c)||this;return l.$element=t,l.$window=i,l.$scope=r,l.uiComponentEventEmitter=n,l.$filter=o,l.alertService=s,l.piwikService=a,l.$rootScope=c,l.isShow=!1,l.filterPrice=l.$filter("price"),l}return ne(t,e),t.prototype.shouldHideComponent=function(){this.isShow=!1},t.prototype.shouldShowComponent=function(){this.isDisabled?this.isShow=!1:this.stockData?this.stockData.isSuccess?(this.isShow=!0,this.$element.find("input").focus(),this.smartPrice=this.getSmartPrice()):(this.isShow=!1,this.alertService.showErrorAlert(this.stockData.errorMsg)):(this.isShow=!1,this.alertService.showErrorAlert("Please insert symbol.")),this.piwikService.eventTrack(this.analyticsActionForSmart,this.analyticsCategory)},t.prototype.getSmartPrice=function(){if(this.inputPrice&&0!==this.inputPrice.length)return yt.toNumber(this.inputPrice);if(this.stockData.data.symbolMarketType===Qe.EQUITY){var e=jr.getEquityPriceNumber(this.stockData,this.side);return isNaN(e)?0:e}return this.stockData.data.symbolMarketType===Qe.DERIVATIVE?jr.getDerivativesPriceNumber(this.stockData,this.side):NaN},t.prototype.updatePriceInput=function(e){this.inputPrice=this.filterPrice(e,this.priceDigit)},t.prototype.selectPrice=function(){this.updatePriceInput(this.smartPrice),this.hideComponent()},t.prototype.increasePrice=function(){var e=this.stockData.data.isFixedSpread()?this.stockData.data.spread:Ve.getEquitySpread(this.smartPrice,!0),t=this.stockData.data.ceiling,i=this.stockData.data.floor,r=this.smartPrice+e||1/0;this.inRangeCeilFloor(r,i,t)?this.smartPrice=r:r<i?this.smartPrice=i:r>t&&(this.smartPrice=t),this.$element.find("input").focus(),this.updatePriceInput(this.smartPrice)},t.prototype.decreasePrice=function(){var e=this.stockData.data.isFixedSpread()?this.stockData.data.spread:Ve.getEquitySpread(this.smartPrice,!1),t=this.stockData.data.ceiling,i=this.stockData.data.floor,r=this.smartPrice-e||-(1/0);this.inRangeCeilFloor(r,i,t)?this.smartPrice=r:r<i?this.smartPrice=i:r>t&&(this.smartPrice=t),this.$element.find("input").focus(),this.updatePriceInput(this.smartPrice)},t.prototype.onInputPriceTypeShortcutChange=function(e){this.onInputPriceTypeShortcut({priceType:e}),this.hideComponent()},t.prototype.inRangeCeilFloor=function(e,t,i){var r=!0;if(e<t&&(r=!1),e>i&&(r=!1),!r){var n=this.filterPrice(t,this.priceDigit),o=this.filterPrice(i,this.priceDigit);this.alertService.showErrorAlert("Price should be between "+n+" and "+o)}return r},t.prototype.isShouldDisableSmartPrice=function(){return this.isDisabled},t.prototype.onArrowUp=function(){this.stockData?this.stockData.isSuccess?(this.smartPrice=this.getSmartPrice(),this.increasePrice()):this.alertService.showErrorAlert(this.stockData.errorMsg):this.alertService.showErrorAlert("Please insert symbol.")},t.prototype.onArrowDown=function(){this.stockData?this.stockData.isSuccess?(this.smartPrice=this.getSmartPrice(),this.decreasePrice()):this.alertService.showErrorAlert(this.stockData.errorMsg):this.alertService.showErrorAlert("Please insert symbol.")},t.$inject=["$element","$window","$scope","UIComponentsEventEmitter","$filter","AlertService","PiwikService","$rootScope"],t}(Fe),mu=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,t,i,r,n,l)||this;return u.$element=t,u.$window=i,u.$scope=r,u.uiComponentEventEmitter=n,u.$filter=o,u.piwikService=s,u.portfolioService=a,u.alertService=c,u.$rootScope=l,u.isShow=!1,u.filterVolume=u.$filter("volume"),u.isShowVolumeFromPortPopover=!1,u.isEnableVolumeFromPort&&(u.volumeFromPortPopoverHandler=new qe(u.$element,u.$window,u.$scope,u.uiComponentEventEmitter,u.volumeFromPortPopOverShouldShow.bind(u),u.volumeFromPortPopOverShouldHide.bind(u))),u}return ne(t,e),t.prototype.shouldHideComponent=function(){this.isShow=!1},t.prototype.shouldShowComponent=function(){this.isDisabled?this.isShow=!1:(this.setVolumeStep(),this.isShow=!0,this.$element.find("input").focus()),this.piwikService.eventTrack(this.analyticsActionForSmart,this.analyticsCategory)},t.prototype.volumeFromPortPopOverShouldShow=function(){this.isShowVolumeFromPortPopover=!0},t.prototype.volumeFromPortPopOverShouldHide=function(){this.isShowLoadingInVolumeFromPortPopover||(this.isShowVolumeFromPortPopover=!1)},t.prototype.onVolumeInputFocus=function(){this.isEnableVolumeFromPort&&this.volumeFromPortPopoverHandler.wantToShowComponent()},t.prototype.fillVolumeFromPortfolio=function(){var e=this;this.validateRequiredDatasForVolumeFromPortfolio()&&(this.isShowLoadingInVolumeFromPortPopover=!0,this.portfolioService.getVolumeFromPortfolioEquity(this.currentAccount,this.currentSymbol,this.isNvdr).then(function(t){e.currentAccount.accountNo===t.account.accountNo&&e.currentSymbol===t.symbol&&e.isNvdr===t.isNVDR&&(e.inputVolume=yt.formatVolume(t.volume))},function(t){e.alertService.showErrorAlert(t.message)})["finally"](function(){e.isShowLoadingInVolumeFromPortPopover=!1,e.volumeFromPortPopoverHandler.wantToHideComponent()}))},t.prototype.validateRequiredDatasForVolumeFromPortfolio=function(){var e=[];return this.currentAccount.isEmptyAccount&&e.push("Please insert trading account."),""===this.currentSymbol&&e.push("Please insert symbol."),0===e.length||(this.alertService.showValidationErrorAlert(e),!1)},t.prototype.setVolumeStep=function(){this.marketType===Qe.DERIVATIVE?(this.level1=1,this.level2=10):(this.level1=100,this.level2=1e3)},t.prototype.increase=function(e){var t=yt.toNumberOrZero(this.inputVolume);t+=e,this.$element.find("input").focus(),this.updateVolume(t)},t.prototype.decrease=function(e){var t=yt.toNumberOrZero(this.inputVolume);t-=e,t=t<0?0:t,this.$element.find("input").focus(),this.updateVolume(t)},t.prototype.updateVolume=function(e){this.inputVolume=this.filterVolume(e)},t.prototype.isShouldDisableSmartVolume=function(){return this.isDisabled},t.prototype.onArrowUp=function(){this.setVolumeStep(),this.increase(this.level1)},t.prototype.onArrowDown=function(){this.setVolumeStep(),this.decrease(this.level1)},t.$inject=["$element","$window","$scope","UIComponentsEventEmitter","$filter","PiwikService","PortfolioService","AlertService","$rootScope"],t}(Fe),vu=function(){function e(e,t,i,r,n){this.$element=e,this.focus=t,this.pinService=i,this.savePinChangeEvent=r,this.$window=n,this.onSavePinChangeByOtherCallBack=this.onSavePinChangeByOther.bind(this),this.onMouseDownCallBack=this.onMouseDown.bind(this),this.pinService.isSavePin()&&(this.pin=this.pinService.pin),this.focusFactory=t,this.savePinChangeEvent.subscribe(this.onSavePinChangeByOtherCallBack)}return e.prototype.$onInit=function(){this.isPinInputInModal()&&this.$element.bind("mousedown",this.onMouseDownCallBack),this.nextFocusElements&&(this.focusElements=this.nextFocusElements);var e=this.$element.find("input");e.bind("keypress",this.onKeyPress.bind(this)),e.bind("keydown",this.onKeyDown.bind(this))},e.prototype.$onDestroy=function(){this.savePinChangeEvent.unsubscribe(this.onSavePinChangeByOtherCallBack)},e.prototype.onMouseDown=function(e){e.stopPropagation()},e.prototype.onKeyPress=function(e){return rr.matchEnterKeyKeypress(e)?void(this.isPinInputInModal()&&0===this.pin.length?e.preventDefault():this.focusNextElement(e,this.focusFactory.enterKey)):void(rr.matchSpecialKeysKeypress(e)||this.detectPIN(e))},e.prototype.onKeyDown=function(e){if(e.which===ye)return void this.focusNextElement(e,this.focusFactory.tabKey)},e.prototype.detectPIN=function(e){String.fromCharCode(e.charCode).match(/\d/)||e.preventDefault()},e.prototype.focusNextElement=function(e,t){var i=this;this.focusElements.some(function(e){var r=i.$element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)}),e.preventDefault()},e.prototype.switchSavePin=function(){this.pinService.isSavePin()?(this.pinService.clearSavePin(),this.pin=""):this.pinService.validateAndSavePin(this.pin)},e.prototype.onSavePinChangeByOther=function(){this.pin=this.pinService.pin},e.prototype.isPinSave=function(){return this.pinService.isSavePin()},e.prototype.isShowSavePinIcon=function(){return this.isShowSavePin},e.prototype.getTooltipMessage=function(){return this.isPinSave()?"Click to unsave PIN.":"Click to save PIN."},e.prototype.onPinChanged=function(){void 0===this.pin&&(this.pin=this.$element.find("input").val())},e.prototype.isPinInputInModal=function(){return"true"===this.isInModal},e.$inject=["$element","focus","PinService","SavePinChangeEvent","$window"],e}(),fu=function(){function e(e,t){this.focus=e,this.element=t,this.onKeyPressCallback=this.onKeyPress.bind(this),this.onKeydownCallBack=this.onKeydown.bind(this),this.element.bind("keypress",this.onKeyPressCallback),this.element.bind("keydown",this.onKeydownCallBack),this.isModalShown=!1,this.focusFactory=e,this.focusElements=[]}return e.prototype.$onInit=function(){this.nextFocusElements&&(this.focusElements=this.nextFocusElements)},e.prototype.onKeyPress=function(e){return e.which===fe?(this.focusNextElement(e,this.focusFactory.enterKey),void e.preventDefault()):void(rr.matchSpecialKeysKeypress(e)||this.detectSymbol(e))},e.prototype.onKeydown=function(e){if(e.which===ye)return void this.focusNextElement(e,this.focusFactory.tabKey)},e.prototype.detectSymbol=function(e){String.fromCharCode(e.charCode).match(/[0-9\/]/)||e.preventDefault()},e.prototype.focusNextElement=function(e,t){var i=this,r=this.focusElements.some(function(e){var r=i.element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)});r&&e.preventDefault()},e.$inject=["focus","$element"],e}(),yu=function(){function e(e,t){this.focus=e,this.element=t,this.onKeyPressCallback=this.onKeyPress.bind(this),this.onKeydownCallBack=this.onKeydown.bind(this),this.element.bind("keypress",this.onKeyPressCallback),this.element.bind("keydown",this.onKeydownCallBack),this.isModalShown=!1,this.focusFactory=e,this.focusElements=[]}return e.prototype.$onInit=function(){this.nextFocusElements&&(this.focusElements=this.nextFocusElements)},e.prototype.onKeyPress=function(e){return e.which===fe?(this.focusNextElement(e,this.focusFactory.enterKey),void e.preventDefault()):void(rr.matchSpecialKeysKeypress(e)||this.detectSymbol(e))},e.prototype.onKeydown=function(e){if(e.which===ye)return void this.focusNextElement(e,this.focusFactory.tabKey)},e.prototype.detectSymbol=function(e){String.fromCharCode(e.charCode).match(/[0-9:]/)||e.preventDefault()},e.prototype.focusNextElement=function(e,t){var i=this,r=this.focusElements.some(function(e){var r=i.element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)});r&&e.preventDefault()},e.$inject=["focus","$element"],e}(),gu=function(){function e(e,t){this.element=e,this.settingsService=t}return e.prototype.onKeyDown=function(e){if(e.which===fe||e.which===ye){this.onUserSubmitSuggestedAccountNo();var t=this.element.find("input");return void t.blur()}},e.prototype.onInnerComponentInputBlur=function(){this.isHasSuggestedAccountNo&&(this.accountNo=this.currentSuggestedAccountNo),this.onUpdate&&this.onUpdate({newAccountNo:this.accountNo}),this.isHasSuggestedAccountNo=!1,this.currentSuggestedAccountNo=""},e.prototype.onInnerAccountNoInputChange=function(){if(this.settingsService.accountShortcutConfiguration){var e=this.settingsService.accountShortcutConfiguration.data.value(this.accountNo);null!==e?(this.currentSuggestedAccountNo=e,this.isHasSuggestedAccountNo=!0):(this.currentSuggestedAccountNo="",this.isHasSuggestedAccountNo=!1)}},e.prototype.onUserSubmitSuggestedAccountNo=function(){this.isHasSuggestedAccountNo&&(this.accountNo=this.currentSuggestedAccountNo,this.isHasSuggestedAccountNo=!1)},e.$inject=["$element","SettingsService"],e}(),Su=function(){function e(e,t){this.focus=e,this.$element=t,this.focusFactory=e}return e.prototype.$onInit=function(){this.isInMultiOrder()&&(this.focusElements=[{parent:'ul[name="multi-order-row"]',focusElement:"symbol-input input.main-input"}]),this.nextFocusElements&&(this.focusElements=this.nextFocusElements)},e.prototype.onKeyPress=function(e,t){if(rr.matchEnterKeyKeypress(e))return void this.focusNextElement(e,this.focusFactory.enterKey)},e.prototype.onKeyDown=function(e){if(e.which===ye)return void this.focusNextElement(e,this.focusFactory.tabKey)},e.prototype.focusNextElement=function(e,t){var i=this;this.focusElements.some(function(e){var r=i.$element.parents(e.parent).first(),n=r.find(e.focusElement);return t(n)}),e.preventDefault()},e.prototype.onClickEvent=function(){void 0!==this.onClick&&this.onClick()},e.prototype.isInMultiOrder=function(){var e=this.name.search("multi-order-side");return e!==-1},e.$inject=["focus","$element"],e}(),bu=function(){function e(e,t){this.focus=e,this.$element=t,this.focusFactory=e,this.focusElements=[]}return e.prototype.$onInit=function(){if(void 0===this.label||0===this.label.length){var e=this.$element.find("label").last();e.css("vertical-align","middle"),e.css("height","100%")}this.checkboxId=this.name+"-checkbox",this.labelClass=this.name+"-checkbox-label","nvdr"===this.name?this.focusElements=["smart-volume-input#place-order-volume volume-input > input"]:"stop-order"===this.name&&(this.focusElements=["#cond-order-symbol input.main-input"])},e.prototype.onKeyPress=function(e,t){if(rr.matchEnterKeyKeypress(e))return void this.focusNextElement(e,this.focusFactory.enter)},e.prototype.onKeyDown=function(e){if(e.which===ye)return e.preventDefault(),void this.focusNextElement(e,this.focusFactory.tab)},e.prototype.onClickEvent=function(e){var t=this;void 0!==this.onClick&&this.onClick(),this.nextFocusElementsAfterClick&&this.nextFocusElementsAfterClick.some(function(e){return t.focusFactory.enter(e)})},e.prototype.focusNextElement=function(e,t){var i=this.focusElements.some(function(e){return t(e)});i&&e.preventDefault()},e.$inject=["focus","$element"],e}(),Cu=function(){function e(){this.restrict="A",this.scope={detectScroll:"&"},this.link=function(e,t,i,r){var n=t.parents(".scroll-container");if(n.length>0){var o=n[0].scrollTop*-1;t.css("transform","translateY("+o+"px)"),angular.element(n).on("scroll",e.detectScroll),e.$on("$destroy",function(){angular.element(n).off("scroll",e.detectScroll)})}}}return e.factory=function(){var t=function(){return new e};return t},e}(),Eu=function(){function e(e){var t=this;this.$timeout=e,this.focus=function(e){if(t.element=document.querySelector(e),!t.element)return!1;if("INPUT"===t.element.nodeName){var i=t.element;if(!i.disabled)return i.select(),t.$timeout(function(){i.select()}),!0}return!1},this.enter=function(e){var i=t.focus(e);if(void 0!==i)return i;if("BUTTON"===t.element.nodeName&&t.element.classList.contains("ok-button")){var r=t.element;return t.$timeout(function(){r.focus(),r.click()}),!0}return!1},this.tab=function(e){var i=t.focus(e);if(void 0!==i)return i;if("BUTTON"===t.element.nodeName){var r=t.element;return r.focus(),!0}return!1},this.focusElement=function(e){if(0===e.length)return!1;if(e.is("input")){var i=e[0];if(!i.disabled)return e.select(),t.$timeout(function(){e.select()}),!0}},this.enterKey=function(e){var i=t.focusElement(e);if(void 0!==i)return i;var r=e[0];return!(!e.is("button")||r.disabled)&&(e.is('[type="submit"]')?t.$timeout(function(){e.submit()}):t.$timeout(function(){e.focus(),e.click()}),!0)},this.tabKey=function(e){var i=t.focusElement(e);if(void 0!==i)return i;var r=e[0];return!(!e.is("button")||r.disabled)&&(e.focus(),!0)}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$timeout"],t},e}(),Au=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t,i,r,n,s)||this;return a.element=t,a.$timeout=i,a.instrumentService=r,a.alertService=n,a.$q=o,a.userApplicationProfileService=s,a.initialAllSymbolList(),a}return ne(t,e),t.prototype.$onInit=function(){this.initSymbol&&(this.symbol=this.initSymbol)},t.prototype.onKeyPress=function(t){e.prototype.onKeyPress.call(this,t)},t.prototype.validateSymbol=function(t){e.prototype.validateSymbol.call(this,t)},t.prototype.validateSymbolSuccess=function(e){this.initSymbol=e.name,this.onValidatedSymbol({instrument:e})},t.prototype.validateSymbolFail=function(e,t){this.onInputSymbolChange&&this.onInputSymbolChange({symbol:t.toUpperCase()})},t.prototype.onFocusOutside=function(e){this.onInputSymbolChange&&void 0!==e&&this.onInputSymbolChange({symbol:e.toUpperCase()})},t.prototype.matchSymbol=function(e){return/[a-zA-Z0-9@&#\- ]/.test(e)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbolByBrokerLicense(e)},t.prototype.initialAllSymbolList=function(){this.allSymbols=this.instrumentService.getInstrumentListWithOutIndexByBrokerLicense()},t.prototype.updateLastSelectedSymbolList=function(){this.lastSelectedSymbolList=this.userApplicationProfileService.getLastSelectedSymbolListWithOutIndexByBrokerLicense()},t.$inject=["$element","$timeout","InstrumentService","AlertService","$q","UserApplicationProfileService"],t}(Ql),wu=function(){function e(e){this.element=e}return e.prototype.onKeyPress=function(e){if(rr.matchEnterKeyKeypress(e)){var t=this.element.find("input");return void t.blur()}rr.matchSpecialKeysKeypress(e)},e.prototype.onInputBlur=function(){this.onBlur&&this.onBlur({newAccountNo:this.accountNo})},e.$inject=["$element"],e}(),Tu=function(){function e(){}return e.prototype.getUnderlyingAsParameter=function(){return this.name.indexOf(" ")>=0?this.name.substring(1,this.name.indexOf(" ")):this.name.substring(1,this.name.length)},e}(),Du=function(){function e(){this.isAddRow=!1,this.isChecked=!1,this.isShowRowEdit=!1,this.volume=""}return e}(),Iu=function(){function e(){}return e}(),Pu=function(){function e(){}return e.PORTFOLIO="Portfolio",e.ORDER="Order",e.SIMULATED="Simulated",e}(),Ou=function(){function e(){this.id="",this.name="",this.underlying="",this.showUnderlying="",this.showLastSavedTimestamp="",this.lastSavedTimestamp=""}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return""===this.lastSavedTimestamp},enumerable:!0,configurable:!0}),e}(),ku=function(){function e(){}return e.COST="cost",e.SETTLE="settle",e.TOGGLE_LIST=[e.COST,e.SETTLE],e.lookup={cost:e.COST,settle:e.SETTLE},e}(),$u=function(){function e(e,t){this.tfexPayoffService=e,this.$q=t,this.isFirstLoaded=!0,this.isEnableDrawChart=!1,this.isCheckedAll=!1,this.SELECT_UNDERLYING_HEADER=new Tu,this.SELECT_UNDERLYING_HEADER.name="--- Select ---",this.SELECT_UNDERLYING_HEADER.type=ue.HEADER,this.toggleColumn1List=ku.TOGGLE_LIST,this.currentToggleColumn1Index=0,this.payoffChartSignal=new li,this.payoffChartDetailSignal=new li,this.simulatedInstrumentsByUnderlying=new ut([]),this.isUnauthorizedAccount=!1}return e.prototype.getUnderlyingDropdownItemByUnderlyingName=function(e){var t=null;return this.underlyingDropdownList.some(function(i){return!(i.type!==ue.GROUP||(i.childs.some(function(i){if(i.name===e)return t=i,!0}),!t))}),t},e.prototype.initialPayoffUnderlying=function(e){var t=this;this.underlyingDropdownList=[],this.underlyingDropdownList.push(this.SELECT_UNDERLYING_HEADER),e.forEach(function(e){switch(e.type){case ue.GROUP:var i=new Tu;i.type=ue.GROUP,i.name=e.name.replace("Futures","").trim(),i.childs=[],e.childs.forEach(function(e){var t=new Tu;t.type=e.type,t.name=e.name.replace("Futures","").trim(),i.childs.push(t)}),t.underlyingDropdownList.push(i);break;case ue.REQUEST:var r=new Tu;r.type=ue.REQUEST,r.name=e.name.replace("Futures","").trim(),t.underlyingDropdownList.push(r)}})},e.prototype.initiateSimulatedDropdownByCurrentAccount=function(){var e=this;return this.tfexPayoffService.loadSavedSimulated(this.currentAccount.accountNo).then(function(t){e.strategyDropdownList=tf.parse(t),e.selectedStrategyDropdown=e.strategyDropdownList[0]},function(t){return e.$q.reject(t)})},e.prototype.clearSimulatedDropdown=function(){this.strategyDropdownList=[],this.selectedStrategyDropdown=void 0},e.prototype.addSimulatedBySelectedUnderlying=function(e){e.isChecked=!0;var t=this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter());t.unshift(e),t.forEach(function(e,t){e.simulatedIndex=t}),this.simulatedInstrumentsByUnderlying.add(this.selectedUnderlyingDropdown.getUnderlyingAsParameter(),t)},e.prototype.editSimulatedBySelectedUnderlying=function(e,t){var i=this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter());i[t].position=e.position,i[t].settle=e.price,i[t].cost=e.price,i[t].side=e.side,i[t].symbol=e.symbol,i[t].type=e.type,i[t].volume=e.volume,this.simulatedInstrumentsByUnderlying.add(this.selectedUnderlyingDropdown.getUnderlyingAsParameter(),i)},e.prototype.deleteSimulatedBySelectedUnderlying=function(e){var t,i=this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter()),r=0;i.forEach(function(i,n){i.simulatedIndex===e&&(t=n,r=-1),i.simulatedIndex=n+r}),i.splice(t,1),this.simulatedInstrumentsByUnderlying.add(this.selectedUnderlyingDropdown.getUnderlyingAsParameter(),i)},e.prototype.updatePortsAndOrders=function(e){this.portsAndOrdersBySelectedUnderlying=e,this.portsAndOrdersBySelectedUnderlying.forEach(function(e,t){e.portAndOrderIndex=t})},e.prototype.mergePortsAndOrdersWithSimulate=function(){var e=new Du;e.isAddRow=!0,e.type=Pu.SIMULATED;var t=[e].concat(this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter()),this.portsAndOrdersBySelectedUnderlying);void 0!==this.currentAccount&&void 0!==this.currentAccount.accountNo&&""!==this.currentAccount.accountNo||(t=[]),t.forEach(function(e,t){e.index=t}),this.currentList=t,this.checkIfAllCheckboxChecked()},e.prototype.getSET50UnderlyingItemInDropdown=function(){var e;return this.underlyingDropdownList.some(function(t){return t.type===ue.GROUP&&t.childs.some(function(t){return t.name.indexOf("SET50")>=0?(e=t,!0):!e||void 0}),!1}),e},e.prototype.isShowCost=function(){return this.toggleColumn1List[this.currentToggleColumn1Index]===ku.COST},e.prototype.isShowSettle=function(){return this.toggleColumn1List[this.currentToggleColumn1Index]===ku.SETTLE},e.prototype.checkAll=function(){var e=this,t=this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter());this.currentList.forEach(function(i){if(!i.isAddRow)switch(i.type){case Pu.SIMULATED:t[i.simulatedIndex].isChecked=!0,e.currentList[i.index].isChecked=!0;break;case Pu.ORDER:case Pu.PORTFOLIO:e.portsAndOrdersBySelectedUnderlying[i.portAndOrderIndex].isChecked=!0,e.currentList[i.index].isChecked=!0}}),this.simulatedInstrumentsByUnderlying.add(this.selectedUnderlyingDropdown.getUnderlyingAsParameter(),t),this.currentList.length>1?this.isCheckedAll=!0:this.isCheckedAll=!1},e.prototype.uncheckAll=function(){var e=this,t=this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter());this.currentList.forEach(function(i){if(!i.isAddRow)switch(i.type){case Pu.SIMULATED:t[i.simulatedIndex].isChecked=!1,e.currentList[i.index].isChecked=!1;break;case Pu.ORDER:case Pu.PORTFOLIO:e.portsAndOrdersBySelectedUnderlying[i.portAndOrderIndex].isChecked=!1,e.currentList[i.index].isChecked=!1}}),this.simulatedInstrumentsByUnderlying.add(this.selectedUnderlyingDropdown.getUnderlyingAsParameter(),t),this.isCheckedAll=!1},e.prototype.toggleCheckAll=function(){return this.isCheckedAll?(this.uncheckAll(),void(this.isCheckedAll=!1)):(this.checkAll(),void(this.isCheckedAll=!0))},e.prototype.checkPayoffCheckbox=function(e){switch(e.type){case Pu.SIMULATED:var t=this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter());t[e.simulatedIndex].isChecked=!0,this.simulatedInstrumentsByUnderlying.add(this.selectedUnderlyingDropdown.getUnderlyingAsParameter(),t),this.currentList[e.index].isChecked=!0;break;case Pu.ORDER:case Pu.PORTFOLIO:this.portsAndOrdersBySelectedUnderlying[e.portAndOrderIndex].isChecked=!0,this.currentList[e.index].isChecked=!0}this.checkIfAllCheckboxChecked()},e.prototype.uncheckPayoffCheckbox=function(e){switch(e.type){case Pu.SIMULATED:var t=this.simulatedInstrumentsByUnderlying.value(this.selectedUnderlyingDropdown.getUnderlyingAsParameter());t[e.simulatedIndex].isChecked=!1,this.simulatedInstrumentsByUnderlying.add(this.selectedUnderlyingDropdown.getUnderlyingAsParameter(),t),this.currentList[e.index].isChecked=!1;break;case Pu.ORDER:case Pu.PORTFOLIO:this.portsAndOrdersBySelectedUnderlying[e.portAndOrderIndex].isChecked=!1,this.currentList[e.index].isChecked=!1}this.checkIfAllCheckboxChecked()},e.prototype.checkIfAllCheckboxChecked=function(){var e=this;return this.currentList&&0===this.currentList.length?void(this.isCheckedAll=!1):this.currentList&&1===this.currentList.length&&this.currentList[0].isAddRow?void(this.isCheckedAll=!1):void this.currentList.some(function(t){return t.isAddRow||t.isChecked!==!1?void(e.isCheckedAll=!0):(e.isCheckedAll=!1,!0)})},e.prototype.subscribePayoffChartSignal=function(e){this.payoffChartSignal.add("payoffChart",e)},e.prototype.unsubscribePayoffChartSignal=function(e){this.payoffChartSignal.remove("payoffChart",e)},e.prototype.updatePayoffChartSignal=function(e){this.payoffChartSignal.dispatch("payoffChart",e)},e.prototype.subscribePayoffChartDetailSignal=function(e){this.payoffChartSignal.add("payoffChartDetail",e)},e.prototype.unsubscribePayoffChartDetailSignal=function(e){this.payoffChartSignal.remove("payoffChartDetail",e)},e.prototype.updatePayoffChartDetailSignal=function(e){this.payoffChartSignal.dispatch("payoffChartDetail",e)},e.prototype.showEditRow=function(e){this.currentList.forEach(function(t){t.isShowRowEdit=e===t.index})},e.prototype.hideEditRow=function(e){this.currentList[e].isShowRowEdit=!1},e.prototype.clearAllEditRow=function(){this.currentList.forEach(function(e){e.isShowRowEdit=!1})},e.$inject=["TfexPayoffService","$q"],e}(),Lu=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,t,i,r,n,o,s,a,c)||this;return u.focus=t,u.$element=i,u.$timeout=r,u.instrumentService=n,u.alertService=o,u.$scope=s,u.initDataEvent=a,
u.userApplicationProfileService=c,u.tfexPayoffStore=l,u.mainInput="input.main-input",u.currentUnderlying="",u.initialAllSymbolList(),u}return ne(t,e),t.prototype.$onInit=function(){var t=this;e.prototype.$onInit.call(this),this.$timeout(function(){t.$element.find(t.mainInput).select()})},t.prototype.onMainInputFocus=function(){e.prototype.onMainInputFocus.call(this)},t.prototype.initialAllSymbolList=function(){void 0!==this.tfexPayoffStore&&this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter()!==this.currentUnderlying&&(this.allSymbols=this.instrumentService.getInstrumentListByUnderlying(this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter()).map(function(e){return e.name}),this.currentUnderlying=this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter())},t.prototype.updateLastSelectedSymbolList=function(){var e=[];e.push.apply(e,this.userApplicationProfileService.getLastSelectedSymbolListByUnderying(this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter())),this.lastSelectedSymbolList=e.slice(0,5)},t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchSymbolByUnderlying(e,this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter())},t.$inject=["focus","$element","$timeout","InstrumentService","AlertService","$scope","InitDataEvent","UserApplicationProfileService","TfexPayoffStore"],t}(Xl),Nu=function(){function e(e,t){var i=this;this.$compile=e,this.$rootScope=t,this.restrict="A",this.require="ngModel",this.scope={sttNgModelDebounceOnBlur:"&",sttNgModelDebounceOnEnterKey:"&",sttNgModelDebounceOnTabKey:"&"},this.link=function(e,t,r,n){t.bind("blur",function(){i.$rootScope.$$phase?(n.$commitViewValue(),e.sttNgModelDebounceOnBlur()):e.$apply(function(){n.$commitViewValue(),e.sttNgModelDebounceOnBlur()})}),(r.sttNgModelDebounceOnEnterKey||r.sttNgModelDebounceOnTabKey)&&t.bind("keydown",function(t){t.which===fe&&r.sttNgModelDebounceOnEnterKey?i.$rootScope.$$phase?(n.$commitViewValue(),t.preventDefault(),e.sttNgModelDebounceOnEnterKey()):e.$apply(function(){n.$commitViewValue(),t.preventDefault(),e.sttNgModelDebounceOnEnterKey()}):t.which===ye&&r.sttNgModelDebounceOnTabKey&&(i.$rootScope.$$phase?(n.$commitViewValue(),t.preventDefault(),e.sttNgModelDebounceOnTabKey()):e.$apply(function(){n.$commitViewValue(),t.preventDefault(),e.sttNgModelDebounceOnTabKey()}))})}}return e.factory=function(){var t=function(t,i){return new e(t,i)};return t.$inject=["$compile","$rootScope"],t},e}(),Mu=function(){function e(e,t,i,r,n,o){this.element=e,this.$timeout=t,this.instrumentService=i,this.alertService=r,this.userApplicationProfileService=n,this.$window=o}return e.prototype.$onChanges=function(e){void 0!==e.initSymbol&&(this.symbol=e.initSymbol.currentValue)},e.prototype.onKeyPress=function(e){rr.matchSpecialKeysKeypress(e)||e.which!==fe&&e.which!==ye||this.element.find("input").blur()},e.prototype.onUserSubmitSymbol=function(){this.onInputSymbolChange&&this.onInputSymbolChange({inputStr:this.symbol})},e.prototype.onBlur=function(){this.onUserSubmitSymbol()},e.prototype.onClick=function(){this.element.find("input").select()},e.$inject=["$element","$timeout","InstrumentService","AlertService","UserApplicationProfileService","$window"],e}(),Ru=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.searchSymbol=function(e,t){return this.instrumentService.searchEquitySymbolWithIndex(e,this.allowIndexList)},t.prototype.getInstrumentList=function(){return this.instrumentService.getEquityWithIndex(this.allowIndexList)},t.prototype.updateLastSelectedSymbolList=function(){this.lastSelectedSymbolList=this.userApplicationProfileService.getLastSelectedEquitySymbolListWithIndex(this.allowIndexList)},t}(tu);angular.module("input",["service","ui-component","settings"]).factory("focus",Eu.factory()).directive("detectScroll",Cu.factory()).component("autoComplete",{template:i(/*! ../../html/input/auto-complete.html */111),controller:zl,bindings:{initSymbol:"<",isDisabled:"<",placeholder:"<",allSymbols:"<",selectedSymbolList:"<",onAutoCompleteSubmitNewSymbol:"&",onMainInputBlur:"&",onFocusMainInput:"&"}}).component("volumeInput",{template:i(/*! ../../html/input/volume-input.html */112),controller:su,bindings:{name:"@",placeholder:"@",volume:"=",isDisabled:"<",analyticsCategory:"@",analyticsAction:"@",onInputBlur:"&",nextFocusElements:"<",onInputArrowUp:"&",onInputArrowDown:"&",onInputFocus:"&"}}).component("smartVolumeInput",{template:i(/*! ../../html/input/smart-volume-input.html */113),controller:mu,bindings:{name:"@",placeholder:"@",inputVolume:"=",isDisabled:"<",marketType:"@",isEnableVolumeFromPort:"<",currentSymbol:"<",currentAccount:"<",isNvdr:"<",analyticsCategory:"@",analyticsAction:"@",analyticsActionForSmart:"@",nextFocusElements:"<"}}).component("priceInput",{template:i(/*! ../../html/input/price-input.html */114),controller:du,bindings:{name:"@",priceDigit:"<",price:"=",placeholder:"@",isDisabled:"<",canNegative:"<",analyticsCategory:"@",analyticsAction:"@",onInputBlur:"&",onInputArrowUp:"&",onInputArrowDown:"&",nextFocusElements:"<",onInputPriceTypeShortcut:"&",priceTypeShortcutMapping:"<"}}).directive("sttNgModelDebounce",Nu.factory()).component("priceInputWithoutDigits",{template:i(/*! ../../html/input/price-input.html */114),controller:hu,bindings:{name:"@",price:"=",placeholder:"@",isDisabled:"<",canNegative:"<",analyticsCategory:"@",analyticsAction:"@",onInputBlur:"&",nextFocusElements:"<"}}).component("smartPriceInput",{template:i(/*! ../../html/input/smart-price-input.html */115),controller:pu,bindings:{name:"@",stockData:"<",priceDigit:"<",inputPrice:"=",placeholder:"@",isDisabled:"<",canNegative:"<",side:"<",analyticsCategory:"@",analyticsAction:"@",analyticsActionForSmart:"@",nextFocusElements:"<",onInputPriceTypeShortcut:"&",priceTypeShortcutMapping:"<"}}).component("symbolInput",{template:i(/*! ../../html/input/symbol-input.html */116),controller:Xl,bindings:{name:"@",symbol:"<",placeholder:"@",lastSearch:"@",onValidatedSymbol:"&",onValidatedSymbolFail:"&",onInputSymbolChange:"&",onBlur:"&",isDisabled:"<",marketType:"@",nextFocusElements:"<"}}).component("stopSymbolInput",{template:i(/*! ../../html/input/symbol-input.html */116),controller:Jl,bindings:{symbol:"=",placeholder:"@",onValidatedSymbol:"&",onValidatedSymbolFail:"&",onValidatedSymbolFinally:"&",onInputSymbolChange:"&",onBlur:"&",isDisabled:"<",marketType:"@",nextFocusElements:"<"}}).component("addFavouriteSymbolInput",{template:i(/*! ../../html/input/add-favourite-symbol-input.html */117),controller:Zl,bindings:{placeholder:"@",checkDuplicateSymbol:"&",onCheckDuplicateSymbolSuccess:"&",marketType:"@"}}).component("editFavouriteSymbolInput",{template:i(/*! ../../html/input/symbol-input.html */116),controller:eu,bindings:{symbol:"=",placeholder:"@",onValidatedSymbol:"&",onValidatedSymbolFail:"&",checkDuplicateSymbol:"&",onCheckDuplicateSymbolSuccess:"&",onInputBlur:"&",rowIndex:"@"}}).component("editPriceVolumeRuleSymbolInput",{template:i(/*! ../../html/input/symbol-input.html */116),controller:Au,bindings:{initSymbol:"<",placeholder:"@",onValidatedSymbol:"&",onInputSymbolChange:"&",rowIndex:"@"}}).component("quoteSymbolInput",{template:i(/*! ../../html/input/quote-symbol-input.html */118),controller:tu,bindings:{initSymbol:"<",placeholder:"@",onValidatedSymbol:"&",editOnClick:"<",isDisabled:"<"}}).component("dgwConditionQuoteSymbolInput",{template:i(/*! ../../html/input/quote-symbol-input.html */118),controller:Ru,bindings:{initSymbol:"<",placeholder:"@",onValidatedSymbol:"&",editOnClick:"<",allowIndexList:"<"}}).component("newsSymbolInput",{template:i(/*! ../../html/input/news-symbol-input.html */119),controller:Mu,bindings:{initSymbol:"<",placeholder:"@",onInputSymbolChange:"&",editOnClick:"<",isDisabled:"<"}}).component("clickSymbolInput",{template:i(/*! ../../html/input/quote-symbol-input.html */118),controller:iu,bindings:{initSymbol:"<",placeholder:"@",onValidatedSymbol:"&",editOnClick:"<",isDisabled:"<",marketType:"@"}}).component("clickVolumeInput",{template:i(/*! ../../html/input/click-volume-input.html */120),controller:ou,bindings:{data:"<",onBlur:"&",onActivate:"&",name:"@"}}).component("editableSymbolInput",{template:i(/*! ../../html/input/editable-symbol-input.html */121),controller:nu,bindings:{onSubmitSymbol:"&",initSymbol:"<",isEditMode:"=",status:"<",findIndex:"&",onCheckDuplicateSymbolSuccess:"&",analyticsCategory:"@",analyticsAction:"@"}}).component("pinInput",{template:i(/*! ../../html/input/pin-input.html */122),controller:vu,bindings:{pin:"=",name:"@",placeholder:"@",isShowSavePin:"<",nextFocusElements:"<",isInModal:"@"}}).service("UIComponentsEventEmitter",xe).component("indexDropdown",{template:i(/*! ../../html/input/index-dropdown.html */123),controller:We,bindings:{model:"<",selected:"=?",keyName:"@",dropdownName:"@",onUpdate:"&",isUp:"<",stockData:"<",onSelected:"&"}}).component("payoffStrategyDropdown",{template:i(/*! ../../html/input/payoff-strategy-dropdown.html */124),controller:Gl,bindings:{model:"<",selected:"=?",keyName:"@",dropdownName:"@",onUpdate:"&",isUp:"<",stockData:"<",onSelected:"&"}}).component("menuMoreDropdown",{template:i(/*! ../../html/input/menu-more-dropdown.html */125),controller:Kl,bindings:{model:"<",selected:"= ",keyName:"@",dropdownName:"@",onUpdate:"&"}}).component("dateInput",{template:i(/*! ../../html/input/date-input.html */126),controller:fu,bindings:{date:"=",isOpen:"=",showButtonBar:"<",popupPlacement:"@",datepickerOptions:"=",appendToBody:"@",placeholder:"@",openCalendar:"&",nextFocusElements:"<"}}).component("timeInput",{template:i(/*! ../../html/input/time-input.html */127),controller:yu,bindings:{placeholder:"@",showSeconds:"<",buttonBar:"<",time:"=",isOpen:"=",timepickerOptions:"<",nextFocusElements:"<",openTimepicker:"&"}}).component("accountNoInput",{template:i(/*! ../../html/input/account-no-input.html */128),controller:gu,bindings:{accountNo:"<",onUpdate:"&",isDisabled:"<",id:"@"}}).component("dcaAccountNoInput",{template:i(/*! ../../html/input/account-no-input.html */128),controller:gu,bindings:{accountNo:"=",onUpdate:"&",isDisabled:"<"}}).component("tradeReportAccountNoInput",{template:i(/*! ../../html/input/trade-report-account-no-input.html */129),controller:wu,bindings:{accountNo:"=",onBlur:"&"}}).component("radioButton",{template:i(/*! ../../html/input/radio-button.html */130),controller:Su,bindings:{name:"@",elementId:"@",value:"@",label:"@",sidename:"=",onClick:"&",nextFocusElements:"<"}}).component("checkbox",{template:i(/*! ../../html/input/checkbox.html */131),controller:bu,bindings:{name:"@",label:"@",isCheck:"=",isDisabled:"<",onClick:"&",nextFocusElementsAfterClick:"<"}}).component("underlyingSymbolInput",{template:i(/*! ../../html/input/underlying-symbol-input.html */132),controller:Lu,bindings:{name:"@",symbol:"<",placeholder:"@",lastSearch:"@",onValidatedSymbol:"&",onValidatedSymbolFail:"&",onInputSymbolChange:"&",onBlur:"&",isDisabled:"<",marketType:"@",nextFocusElements:"<"}});var _u=function(){function e(e,t,i,r,n,o,s,a,c,l,u){this.$scope=e,this.accountService=t,this.alertService=i,this.initDataEvent=r,this.orderStatusService=n,this.currentAccountChangeEvent=o,this.refreshEvent=s,this.userInfoService=a,this.pinService=c,this.refreshAccountEvent=l,this.orderProcessor=u,this.onCurrentAccountChangeCallBack=this.onReceiveCurrentAccountChangeByOther.bind(this),this.onRefreshAEventCallBack=this.getAccountInfo.bind(this),this.onRefreshAccountEventCallBack=this.getAccountInfo.bind(this)}return e.prototype.$onInit=function(){this.refreshEvent.subscribe(this.onRefreshAEventCallBack),this.refreshAccountEvent.subscribe(this.onRefreshAccountEventCallBack),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack)},e.prototype.$onDestroy=function(){this.refreshEvent.unsubscribe(this.onRefreshAEventCallBack),this.refreshAccountEvent.unsubscribe(this.onRefreshAccountEventCallBack),this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallBack)},e.prototype.onAccountChangedByOther=function(e){this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.unsubscribeGetAccountInfo(this.selectedAccount),this.setSelectedAccount(e),this.orderProcessor.clearFormWhenAccountChange(),e.isEmptyAccount||(this.subscribeGetAccountInfo(e),this.getAccountInfo(),this.getAccountName())},e.prototype.onAccountChanged=function(e){this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.unsubscribeGetAccountInfo(this.selectedAccount),this.setAndPublishSelectedAccount(e),e.isEmptyAccount||(this.subscribeGetAccountInfo(e),this.getAccountInfo(),this.getAccountName())},e.prototype.getSavePin=function(e){return this.pinService.isSavePin()?this.pinService.pin:e},e.prototype.setAndPublishSelectedAccount=function(e){this.selectedAccount=e,this.currentAccountChangeEvent.publish(e)},e.prototype.setSelectedAccount=function(e){this.selectedAccount=e},e.prototype.getAccountName=function(){var e=this;if(this.selectedAccount){var t=this.selectedAccount.systemType===mi.EQUITY?Qe.EQUITY:Qe.DERIVATIVE;this.accountService.requestAccountName(this.selectedAccount.accountNo,t).then(function(t){e.accountNameForSelectedAccount=t})}},e.prototype.getCheckedCancelOrders=function(){if(this.selectedAccount)switch(this.selectedAccount.systemType){case mi.EQUITY:return this.isCanCancel=this.orderStatusService.numberCheckedCancelEquityOrder>0,this.orderStatusService.numberCheckedCancelEquityOrder;case mi.DERIVATIVES:return this.isCanCancel=this.orderStatusService.numberCheckedCancelDerivativesOrder>0,this.orderStatusService.numberCheckedCancelDerivativesOrder}},e.prototype.clearAccountInfo=function(){this.accountInfoForSelectedAccount=new Ci,this.accountNameForSelectedAccount=new di},e.prototype.onRecieveAccountInfoMock=function(){},e.prototype.subscribeGetAccountInfo=function(e){e.systemType===mi.EQUITY?this.accountService.subscribeGetEquityAccountInfo(e.accountNo,this.onRecieveAccountInfoMock):e.systemType===mi.DERIVATIVES&&this.accountService.subscribeGetDerivativesAccountInfo(e.accountNo,this.onRecieveAccountInfoMock)},e.prototype.unsubscribeGetAccountInfo=function(e){e.systemType===mi.EQUITY?this.accountService.unsubscribeGetEquityAccountInfo(e.accountNo,this.onRecieveAccountInfoMock):e.systemType===mi.DERIVATIVES&&this.accountService.unsubscribeGetDerivativesAccountInfo(e.accountNo,this.onRecieveAccountInfoMock)},e}(),Vu=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p){var m=e.call(this,t,i,r,n,o,s,a,c,l,d,h)||this;return m.$scope=t,m.accountService=i,m.alertService=r,m.initDataEvent=n,m.orderStatusService=o,m.currentAccountChangeEvent=s,m.refreshEvent=a,m.userInfoService=c,m.pinService=l,m.userApplicationProfileService=u,m.refreshAccountEvent=d,m.orderProcessor=h,m.menuService=p,m.onInitDataCompleteCallback=m.onInitDataComplete.bind(m),m.accountList=[],m.isCanCancel=!1,m.initDataEvent.subscribe(m.onInitDataCompleteCallback),m}return ne(t,e),t.prototype.onReceiveCurrentAccountChangeByOther=function(e){this.selectedAccount&&this.selectedAccount.equals(e)||(this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.unsubscribeGetAccountInfo(this.selectedAccount),this.setSelectedAccount(e),e.isEmptyAccount||(this.subscribeGetAccountInfo(e),this.getAccountInfo(),this.getAccountName()))},t.prototype.getAccountInfo=function(){var e=this;this.selectedAccount&&(this.accountInfoForSelectedAccount=new Ci,this.selectedAccount.systemType===mi.EQUITY?this.accountService.requestEquityAccountInfo(this.selectedAccount.accountNo).then(function(t){t.accountInfo.accountNo===e.selectedAccount.accountNo&&(e.accountInfoForSelectedAccount=Ci.parseEquity(t.accountInfo,e.selectedAccount.frontType,e.selectedAccount.accountType))},function(t){t.errorMessage&&e.alertService.showErrorAlert(t.errorMessage)}):this.selectedAccount.systemType===mi.DERIVATIVES&&this.accountService.requestDerivativeAccountInfo(this.selectedAccount.accountNo).then(function(t){t.accountInfo.accountNo===e.selectedAccount.accountNo&&(e.accountInfoForSelectedAccount=Ci.parseDerivatives(t.accountInfo,e.selectedAccount.frontType,e.selectedAccount.accountType))},function(t){t.errorMessage&&e.alertService.showErrorAlert(t.errorMessage)}))},t.prototype.onInitDataComplete=function(){this.initAccountInfomation(),null!==this.accountService.defaultAccount&&this.setAndPublishSelectedAccount(this.accountService.defaultAccount),this.getAccountInfo(),this.getAccountName()},t.prototype.initAccountInfomation=function(){this.accountList=this.accountService.accountEquityList,this.accountList=this.accountList.concat(this.accountService.accountDerivList)},t.prototype.showMultiOrderButton=function(){return this.selectedAccount.canUseBasket},t.prototype.clickMultiOrder=function(){var e=this;this.userApplicationProfileService.acceptMultiOrderDisclaimer?this.menuService.toggleMultiOrder():this.alertService.showMultiOrderDisclaimerAlert().then(function(){e.userApplicationProfileService.acceptMultiOrderDisclaimer=!0,e.menuService.toggleMultiOrder()})},t.prototype.$onDestroy=function(){e.prototype.$onDestroy.call(this),this.initDataEvent.unsubscribe(this.onInitDataCompleteCallback)},t.$inject=["$scope","AccountService","AlertService","InitDataEvent","OrderStatusService","CurrentAccountChangeEvent","RefreshEvent","UserInfoService","PinService","UserApplicationProfileService","RefreshAccountEvent","OrderProcessor","MenuService"],t}(_u),Bu=function(){function e(e,t){this.name=e,this.value=t}return e.prototype.isEquity=function(){return this.value===mi.EQUITY},e.prototype.isDerivatives=function(){return this.value===mi.DERIVATIVES&&"Derivatives"===this.name},e.prototype.isAllDerivatives=function(){return this.value===mi.DERIVATIVES&&"Deriv (All)"===this.name},Object.defineProperty(e.prototype,"fullName",{get:function(){return this.name},enumerable:!0,configurable:!0}),e.EQUITY=new e("Equity",mi.EQUITY),e.DERIVATIVES=new e("Derivatives",mi.DERIVATIVES),e.ALL_DERIVATIVES=new e("Deriv (All)",mi.DERIVATIVES),e}(),xu=function(){function e(){}return e.TRADING_ACCOUNT_NOT_FOUND_EQUITY="Get Account Info : Trading account not found",e.TRADING_ACCOUNT_NOT_FOUND_DERIVATIVES="G001: Account not found",e}(),Fu=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f){var y=e.call(this,t,i,r,n,o,s,a,c,l,d,h)||this;return y.$scope=t,y.accountService=i,y.alertService=r,y.initDataEvent=n,y.orderStatusService=o,y.currentAccountChangeEvent=s,y.refreshEvent=a,y.userInfoService=c,y.pinService=l,y.userApplicationProfileService=u,y.refreshAccountEvent=d,y.orderProcessor=h,y.menuService=p,y.globalKeyboardShortcutEvent=m,y.$element=v,y.focus=f,y.onInitDataCompleteCallback=y.onInitDataComplete.bind(y),y.onNeedFocusMarketrepAccountNoInputCallBack=y.onNeedFocusMarketrepAccountNoInput.bind(y),y.focusAccountNoInputElements=[{focusElement:"account-no-input input"}],y.focusFactory=f,y.initDataEvent.subscribe(y.onInitDataCompleteCallback),y}return ne(t,e),t.prototype.$onInit=function(){e.prototype.$onInit.call(this),this.globalKeyboardShortcutEvent.subscribeNeedFocusMarketrepAccountNoInput(this.onNeedFocusMarketrepAccountNoInputCallBack)},t.prototype.$onDestroy=function(){e.prototype.$onDestroy.call(this),this.initDataEvent.unsubscribe(this.onInitDataCompleteCallback),this.globalKeyboardShortcutEvent.unsubscribeNeedFocusMarketrepAccountNoInput(this.onNeedFocusMarketrepAccountNoInputCallBack)},t.prototype.onInitDataComplete=function(){if(this.clearSelectedEquityAccount(),this.clearSelectedDerivativesAccount(),this.authorizedSystemTypes=[],this.userInfoService.hasMarketRepEquity&&!this.userInfoService.isDerivativesOnly&&this.authorizedSystemTypes.push(Bu.EQUITY),this.userInfoService.hasMarketRepDerivatives&&(this.authorizedSystemTypes.push(Bu.DERIVATIVES),this.authorizedSystemTypes.push(Bu.ALL_DERIVATIVES)),this.authorizedSystemTypes[0]){if(this.selectedSystemType=this.authorizedSystemTypes[0],this.selectedSystemType.isEquity())return void this.setAndPublishSelectedAccount(this.selectedEquityAccount);if(this.selectedSystemType.isDerivatives())return void this.setAndPublishSelectedAccount(this.selectedDerivativesAccount)}},t.prototype.onReceiveCurrentAccountChangeByOther=function(e){this.selectedAccount&&this.selectedAccount.equals(e)||(e.systemType===mi.EQUITY?(this.selectedEquityAccount=e,this.selectedSystemType=new Bu("Equity",mi.EQUITY)):e.systemType===mi.DERIVATIVES&&(this.selectedDerivativesAccount=e,this.selectedSystemType=new Bu("Derivatives",mi.DERIVATIVES)),this.onAccountChangedByOther(e))},t.prototype.onAccountNoChange=function(e){this.clearAccountInfo();var t=new vi;t.accountNo=e,t.systemType=this.selectedSystemType.isEquity()?mi.EQUITY:mi.DERIVATIVES,t.frontType=fi.SEOS,e&&""!==e||(t.isEmptyAccount=!0,t.accountNo=""),this.selectedSystemType.isEquity()?this.selectedEquityAccount=t:this.selectedSystemType.isDerivatives&&(this.selectedDerivativesAccount=t),this.onAccountChanged(t)},t.prototype.onSystemTypeChange=function(e){return this.selectedSystemType=e,this.clearAccountInfo(),this.selectedSystemType.isEquity()?void this.onAccountChanged(this.selectedEquityAccount):this.selectedSystemType.isDerivatives()?void this.onAccountChanged(this.selectedDerivativesAccount):this.selectedSystemType.isAllDerivatives()?void this.onAccountChanged(vi.createAllDerivativesAccount()):void 0},t.prototype.onNeedFocusMarketrepAccountNoInput=function(){var e=this;this.focusAccountNoInputElements.some(function(t){var i=e.$element.find(t.focusElement);return e.focusFactory.enterKey(i)})},t.prototype.getAccountInfo=function(){var e=this;this.selectedAccount&&(this.selectedAccount.isEmptyAccount||(this.accountInfoForSelectedAccount=new Ci,this.selectedAccount.systemType===mi.EQUITY?this.accountService.requestEquityAccountInfo(this.selectedAccount.accountNo).then(function(t){if(t.accountInfo.accountNo===e.selectedAccount.accountNo){var i=t.accountInfo.accountType;e.accountInfoForSelectedAccount=Ci.parseEquity(t.accountInfo,e.selectedAccount.frontType,i)}},function(t){t.errorMessage&&(e.alertService.showErrorAlert(t.errorMessage),e.orderStatusService.onEquityMarketrepAccountInfoError(e.selectedAccount)),t.errorMessage===xu.TRADING_ACCOUNT_NOT_FOUND_EQUITY&&(e.clearSelectedEquityAccount(),e.onAccountChanged(e.selectedEquityAccount))}):this.selectedAccount.systemType===mi.DERIVATIVES&&this.accountService.requestDerivativeAccountInfo(this.selectedAccount.accountNo).then(function(t){t.accountInfo.accountNo===e.selectedAccount.accountNo&&(e.accountInfoForSelectedAccount=Ci.parseDerivatives(t.accountInfo,e.selectedAccount.frontType,e.selectedAccount.accountType))},function(t){t.errorMessage&&(e.alertService.showErrorAlert(t.errorMessage),e.orderStatusService.onDerivativesMarketrepAccountInfoError(e.selectedAccount)),t.errorMessage===xu.TRADING_ACCOUNT_NOT_FOUND_DERIVATIVES&&(e.clearSelectedDerivativesAccount(),e.onAccountChanged(e.selectedDerivativesAccount))})))},t.prototype.clickMultiOrder=function(){var e=this;this.userApplicationProfileService.acceptMultiOrderDisclaimer?this.menuService.toggleMultiOrder():this.alertService.showMultiOrderDisclaimerAlert().then(function(){e.userApplicationProfileService.acceptMultiOrderDisclaimer=!0,e.menuService.toggleMultiOrder()})},t.prototype.clearSelectedEquityAccount=function(){var e=new vi;e.systemType=mi.EQUITY,e.isEmptyAccount=!0,this.selectedEquityAccount=e},t.prototype.clearSelectedDerivativesAccount=function(){var e=new vi;e.systemType=mi.DERIVATIVES,e.isEmptyAccount=!0,this.selectedDerivativesAccount=e},t.prototype.isDisableAccountNumberInput=function(){return this.selectedSystemType.isAllDerivatives()},t.$inject=["$scope","AccountService","AlertService","InitDataEvent","OrderStatusService","CurrentAccountChangeEvent","RefreshEvent","UserInfoService","PinService","UserApplicationProfileService","RefreshAccountEvent","OrderProcessor","MenuService","GlobalKeyboardShortcutEvent","$element","focus"],t}(_u),Uu=function(){function e(){this.confirmedWarn=!1,this.isSupportSBLPositionType=!1}return e}(),qu=function(){function e(){this.confirmedWarn=!1}return e}(),ju=function(){function e(){}return e}(),Hu=function(){function e(){}return e}(),Wu=function(){function e(e,t,i,r){this.itpService=e,this.itpdService=t,this.$q=i,this.orderStatusService=r}return e.prototype.requestPlaceOrderEquity=function(e){var t=this,i=this.generatePlaceOrderEquityRequestData(e);return this.itpService.placeOrder(i).then(function(i){if(i){var r=t.parsePlaceOrderEquityResponseMessage(i);if(!r.isSuccess)return t.$q.reject(r);var n=t.generateFakeEquityOrder(r.orderNo,e);return t.orderStatusService.addFakeEquityOrder(n),r}return t.$q.reject()},function(){return t.$q.reject()})},e.prototype.requestPlaceOrderDeriv=function(e){var t=this,i=this.generatePlaceOrderDerivRequestData(e);return this.itpdService.placeOrder(i).then(function(i){if(i){var r=t.parsePlaceOrderDerivResponseMessage(i);if(!r.isSuccess)return t.$q.reject(r);var n=t.generateFakeDerivativesOrder(r.orderNo,e);return t.orderStatusService.addFakeDerivativesOrder(n),r}return t.$q.reject()},function(){return t.$q.reject()})},e.prototype.generatePlaceOrderEquityRequestData=function(e){var t=new Bt;return t.txtAccountNo=e.accountNo,t.txtBorS=e.side,t.txtSymbol=e.symbol,t.txtPrice=e.price,t.txtQty=e.volume,t.txtPIN_new=e.pin,t.txtPriceType=e.priceType,t.txtCondition=e.condition,t.txtPublishVol=e.iceberg,t.txtClientType=e.clientType,t.txtNvdr=e.isNvdr?"2":void 0,e.isSupportSBLPositionType&&(t.positionType=""+e.sblPositionType.requestParamValue),e.confirmedWarn&&(t.confirmedWarn="Y"),t},e.prototype.generatePlaceOrderDerivRequestData=function(e){var t=new zt;return t.accountNo=e.accountNo,t.side=e.side,t.seriesId=e.seriesId,t.price=e.price,t.volume=e.volume,t.pin=e.pin,t.priceType=e.priceType,t.stopSeriesId=e.stopSeriesId,t.stopPrice=e.stopPrice,t.stopCondition=e.stopCondition,t.stopSeriesId=e.stopSeriesId,t.position=e.position,t.publishVolume=e.publishVolume,t.validityType=e.validityType,t.validTillDate=e.validTillDate,t.validTillTime=e.validTillTime,t.validTillSession=e.validTillSession,e.confirmedWarn&&(t.confirmedWarn="Y"),t},e.prototype.generateFakeEquityOrder=function(e,t){var i=new nc;return i.orderNo=e,i.side=t.side,i.price=t.price,i.priceType=t.priceType,i.volume=t.volume,i.symbol=t.isNvdr?t.symbol+"-R":t.symbol,i},e.prototype.generateFakeDerivativesOrder=function(e,t){var i=new oc;return i.orderNo=e,i.side=t.side,i.price=t.price,i.priceType=t.priceType,i.volume=t.volume,i.position=t.position,i.symbol=t.seriesId,i},e.prototype.parsePlaceOrderEquityResponseMessage=function(t){for(var i=new ju,r=t.split(hi.LV3),n=parseInt(r[1]),o=2;o<2+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.EQUITY_PLACE_ORDER_SERVICE_ID){var l=a[2],u="T"===l,d="W"===l;return i.isSuccess=u,i.isWarning=d,u?(i.successMessage=a[5],i.orderNo=a[6].replace(/\0/g,"").trim()):d?i.warnMessage=a[5]:i.errorMessage=a[5],i}}},e.prototype.parsePlaceOrderDerivResponseMessage=function(t){for(var i=new Hu,r=t.split(hi.LV3),n=parseInt(r[2]),o=3;o<3+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.DERIVATIVES_PLACE_ORDER_SERVICE_ID){var l=a[2],u="T"===l,d="W"===l;return i.isSuccess=u,i.isWarning=d,u?(i.successMessage=a[5],i.orderNo=a[6]):d?i.warnMessage=a[3]:i.errorMessage=a[3],i}}},e.$inject=["ITPService","ITPDService","$q","OrderStatusService"],e.EQUITY_PLACE_ORDER_SERVICE_ID="PlaceOrder",e.DERIVATIVES_PLACE_ORDER_SERVICE_ID="PlaceOrder",e}(),Yu=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S){var b=e.call(this)||this;return b.placeOrderService=t,b.alertService=i,b.focus=r,b.instrumentService=n,b.userInfoService=o,b.initDataEvent=s,b.snapshotPubsub=a,b.currentSymbolChangeEvent=c,b.refreshEvent=l,b.piwikService=u,b.pinService=d,b.userApplicationProfileService=h,b.orderEntrySettingChangeEvent=p,b.orderProcessor=m,b.menuService=v,b.facebookService=f,b.orderStatusService=y,b.globalKeyboardShortcutEvent=g,b.$element=S,b.onCurrentSymbolChangeCallBack=b.onCurrentSymbolChange.bind(b),b.callback=b.onRecieveSnapshot.bind(b),b.onOrderEntrySettingChangeCallback=b.onOrderEntrySettingChange.bind(b),b.onGlobalKeyboardShortcutChangeSideEventCallBack=b.onGlobalKeyboardShortcutChangeSideEvent.bind(b),b.datePickerConfig={popupPlacement:"top-left",showButtonBar:!1,appendToBody:!0,datepickerOptions:{maxDate:null,minDate:new Date,showWeeks:!1,startingDay:0}},b.timePickerConfig={timepickerOptions:{readonlyInput:!1,showMeridian:!1,showSeconds:!0,buttonBar:{show:!1},arrowkeys:!0}},b.priceInputNextFocusElements=[{parent:"derivative-place-order",focusElement:"#place-order-pin input"},{parent:"derivative-place-order",focusElement:"#place-order-submit"}],b.stopPriceInputNextFocusElements=[{parent:"derivative-place-order",focusElement:"date-input > input"},{parent:"derivative-place-order",focusElement:"#place-order-pin input"},{parent:"derivative-place-order",focusElement:"#place-order-submit"}],b.symbolNextFocusElements=[{parent:"derivative-place-order",focusElement:"#place-order-volume input"}],b.stopSymbolNextFocusElements=[{parent:"derivative-place-order .place-order-cond",focusElement:"#cond-order-price price-input input"}],b.volumeInputNextFocusElements=[{parent:"derivative-place-order",focusElement:"#place-order-price input"},{parent:"derivative-place-order",focusElement:"#place-order-pin input"},{parent:"derivative-place-order",focusElement:"#place-order-submit"}],b.icebergVolumeInputNextFocusElements=[{parent:"derivative-place-order",focusElement:"#place-order-pin input"},{parent:"derivative-place-order",focusElement:"#place-order-submit"}],b.stopOrderCheckboxNextFocusElements=["#cond-order-symbol input.main-input"],b.sideNextFocusElements=[{parent:'div[name="place-order"]',focusElement:"symbol-input#place-order-symbol input.main-input"}],b.dateInputNextFocusElements=[{parent:"derivative-place-order",focusElement:"time-input input"},{parent:"derivative-place-order",focusElement:"#place-order-pin input"},{parent:"derivative-place-order",focusElement:"#place-order-submit"}],b.timeInputNextFocusElements=[{parent:"derivative-place-order",focusElement:"#place-order-pin input"},{parent:"derivative-place-order",focusElement:"#place-order-submit"}],b.pinNextFocusElement=[{parent:"derivative-place-order",focusElement:'button[name="submit"]'}],b.isLockPlaceOrder=!1,b.priceTypeList=Ge.ALL_DERIV,b.validityList=Ke.ALL_DERIVATIVE,b.openTimePicker=!1,b.isFirstCurrentSymbolChange=!0,b.currentSymbol="",b.currentStopSymbol="",b.isRequesting=!1,b.priceTypeShortcutMapping=uu.DERIVATIVES_PRICE_TYPE,b.focusFactory=r,b.element=S,b}return ne(t,e),t.prototype.startService=function(){this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChangeCallback),this.updateInstrumentStaticData(this.orderProcessor.symbol),void 0!==this.orderProcessor.stopSymbol&&""!==this.orderProcessor.stopSymbol&&this.getStopSymbolStaticData(this.orderProcessor.stopSymbol),this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack),this.orderProcessor.condition===Ke.SESSION&&this.orderProcessor.symbol&&this.orderProcessor.symbol.length>0&&this.getSessionData(this.orderProcessor.symbol),this.globalKeyboardShortcutEvent.subscribeChangeSide(this.onGlobalKeyboardShortcutChangeSideEventCallBack)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.orderEntrySettingChangeEvent.unsubscribe(this.onOrderEntrySettingChangeCallback),this.globalKeyboardShortcutEvent.unsubscribeChangeSide(this.onGlobalKeyboardShortcutChangeSideEventCallBack)},t.prototype.onOrderEntrySettingChange=function(e){this.orderEntrySetting=e},t.prototype.onGlobalKeyboardShortcutChangeSideEvent=function(e){this.orderProcessor.side=e,this.onSideChange(e.toString()),this.focusFactory.focusElement(this.element.find("symbol-input input.main-input"))},t.prototype.openCalendar=function(e,t){this[t].open=!this[t].open},t.prototype.openTimepicker=function(){this.openTimePicker=!this.openTimePicker},t.prototype.submitOrder=function(){
var e=this;if(this.validateDerivativeForm()&&this.validateDerivativeStopOrderForm()&&!this.isLockPlaceOrder){this.isLockPlaceOrder=!0;var t=new qu;switch(t.accountNo=this.orderProcessor.currentAccount.accountNo,t.side=this.orderProcessor.side.shortname,t.position=this.orderProcessor.position.shortname,t.seriesId=this.orderProcessor.symbol.toUpperCase(),t.volume=this.orderProcessor.volumeValue,t.price=this.orderProcessor.priceValue,t.pin=this.getPin(),t.publishVolume=this.orderProcessor.icebergValue,t.priceType=this.orderProcessor.priceType.derivativeValue,t.validityType=this.orderProcessor.condition.value,this.orderProcessor.condition){case Ke.DATE:var i=this.orderProcessor.sessionDate.getDate()>=10?""+this.orderProcessor.sessionDate.getDate():"0"+this.orderProcessor.sessionDate.getDate(),r=this.orderProcessor.sessionDate.getMonth()+1>=10?""+(this.orderProcessor.sessionDate.getMonth()+1):"0"+(this.orderProcessor.sessionDate.getMonth()+1),n=""+this.orderProcessor.sessionDate.getFullYear(),o=i+"/"+r+"/"+n;t.validTillDate=o;break;case Ke.SESSION:t.validTillSession=this.orderProcessor.selectedSession.valueMsg;break;case Ke.TIME:var s=this.orderProcessor.sessionDate.getDate()>=10?""+this.orderProcessor.sessionDate.getDate():"0"+this.orderProcessor.sessionDate.getDate(),a=this.orderProcessor.sessionDate.getMonth()+1>=10?""+(this.orderProcessor.sessionDate.getMonth()+1):"0"+(this.orderProcessor.sessionDate.getMonth()+1),c=""+this.orderProcessor.sessionDate.getFullYear(),l=this.orderProcessor.sessionTime.getHours()>=10?""+this.orderProcessor.sessionTime.getHours():"0"+this.orderProcessor.sessionTime.getHours(),u=this.orderProcessor.sessionTime.getMinutes()>=10?""+this.orderProcessor.sessionTime.getMinutes():"0"+this.orderProcessor.sessionTime.getMinutes(),d=this.orderProcessor.sessionTime.getSeconds()>=10?""+this.orderProcessor.sessionTime.getSeconds():"0"+this.orderProcessor.sessionTime.getSeconds(),h=s+"/"+a+"/"+c+" "+l+":"+u+":"+d;t.validTillTime=h}if(this.orderProcessor.isStopOrderChecked&&(t.stopCondition=this.orderProcessor.stopCondition.value,t.stopPrice=this.orderProcessor.stopPriceValue,t.stopSeriesId=this.orderProcessor.stopSymbol.toUpperCase()),this.lastSubmitOrderParameter=t,this.orderEntrySetting.confirmPopUp.enable){var p=this.generateConfirmAlertInfo(t);this.alertService.showPlaceOrderDerivConfirmAlert(p,this.getPriceDigit(),this.getStopOrderPriceDigit(),this.orderProcessor.position).then(function(){e.placeOrder(t),e.orderProcessor.hasLastOrder=!0},function(){e.isLockPlaceOrder=!1})}else this.placeOrder(t)}this.facebookService.placeOrderDerivativesTrack(this.menuService.getCurrentMenuName(),this.source),this.piwikService.eventTrack(nt.SUBMIT_ORDER,rt.PLACE_ORDER_DERIVATIVES)},t.prototype.getPin=function(){return this.pinService.isSavePin()?this.pinService.pin:this.orderProcessor.pin},t.prototype.generateConfirmAlertInfo=function(e){var t=new qu;return angular.copy(e,t),void 0!==e.validTillSession&&(t.validTillSession=this.orderProcessor.selectedSession.showMsg),t},t.prototype.placeOrder=function(e){var t=this;this.isRequesting=!0,this.placeOrderService.requestPlaceOrderDeriv(e).then(function(){t.isLockPlaceOrder=!1},function(e){if(e){if(e.isWarning)return t.onWarning(e);e.isSuccess||t.alertService.showErrorAlert(e.errorMessage)}t.isLockPlaceOrder=!1})["finally"](function(){t.isRequesting=!1,t.orderProcessor.clearFormDataAfterCompleteOrderTransaction(),t.orderEntrySetting.rememberLastOrderConfiguration.enable||(t.currentSymbol=t.orderProcessor.symbol,t.instrumentStaticData=void 0,t.orderProcessor.stopInstrumentStaticData=void 0),t.refreshPageData()})},t.prototype.onWarning=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e.warnMessage).then(function(){var e=new qu;angular.copy(t.lastSubmitOrderParameter,e),e.confirmedWarn=!0,t.placeOrder(e)},function(){t.isLockPlaceOrder=!1})},t.prototype.validateDerivativeForm=function(){var e=[];if(this.orderProcessor.currentAccount.isEmptyAccount&&e.push("Please insert trading account."),this.orderProcessor.side===Be.NONE&&e.push("Please select Long or Short."),""===this.orderProcessor.symbol&&e.push("Please insert symbol."),null===this.orderProcessor.volumeValue&&e.push("Please insert volume."),null===this.orderProcessor.priceValue&&this.orderProcessor.priceType===Ge.LIMIT&&e.push("Please insert price."),this.shouldShowPinInput()!==!0||this.pinService.isSavePin()||null!==this.orderProcessor.pin&&""!==this.orderProcessor.pin||e.push("Please insert PIN."),this.orderProcessor.condition===Ke.DATE)try{this.orderProcessor.sessionDate.getDate()>=10?""+this.orderProcessor.sessionDate.getDate():"0"+this.orderProcessor.sessionDate.getDate(),this.orderProcessor.sessionDate.getMonth()+1>=10?""+(this.orderProcessor.sessionDate.getMonth()+1):"0"+(this.orderProcessor.sessionDate.getMonth()+1),""+this.orderProcessor.sessionDate.getFullYear()}catch(t){e.push("Invalid Date Format.")}else if(this.orderProcessor.condition===Ke.TIME)try{this.orderProcessor.sessionDate.getDate()>=10?""+this.orderProcessor.sessionDate.getDate():"0"+this.orderProcessor.sessionDate.getDate(),this.orderProcessor.sessionDate.getMonth()+1>=10?""+(this.orderProcessor.sessionDate.getMonth()+1):"0"+(this.orderProcessor.sessionDate.getMonth()+1),""+this.orderProcessor.sessionDate.getFullYear(),this.orderProcessor.sessionTime.getHours()>=10?""+this.orderProcessor.sessionTime.getHours():"0"+this.orderProcessor.sessionTime.getHours(),this.orderProcessor.sessionTime.getMinutes()>=10?""+this.orderProcessor.sessionTime.getMinutes():"0"+this.orderProcessor.sessionTime.getMinutes(),this.orderProcessor.sessionTime.getSeconds()>=10?""+this.orderProcessor.sessionTime.getSeconds():"0"+this.orderProcessor.sessionTime.getSeconds()}catch(t){e.push("Invalid Date or Time Format.")}return 0===e.length||(this.alertService.showValidationErrorAlert(e),!1)},t.prototype.validateDerivativeStopOrderForm=function(){var e=[];return!this.orderProcessor.isStopOrderChecked||(""===this.orderProcessor.stopSymbol&&e.push("Please insert Stop Condition Symbol."),""===this.orderProcessor.stopPrice&&e.push("Please insert Stop Condition Price."),0===e.length||(this.alertService.showValidationErrorAlert(e),!1))},t.prototype.onCurrentSymbolChange=function(e,t,i){if(e.isDerivatives()){this.orderProcessor.clearPriceWhenCurrentSymbolChange(this.currentSymbol,e.name,this.isFirstCurrentSymbolChange),this.orderProcessor.isStopOrderChecked&&(this.orderProcessor.stopSymbol=e.name,this.getStopSymbolStaticData(this.orderProcessor.stopSymbol));var r=this.processChangePriceSide(e,t,i);if(this.isFirstCurrentSymbolChange||this.currentSymbol===e.name.toUpperCase()||(this.orderProcessor.hasLastOrder=!1),this.currentSymbol!==e.name.toUpperCase()&&(this.orderProcessor.symbol=e.name,this.currentSymbol=e.name,this.clearSessionData(),this.getSessionDataAndSetDefault(e.name),this.subscribeSnapshotService(),this.updateInstrumentStaticData(e.name),!r&&this.orderEntrySetting.autoFillPriceConfiguration.enable)){if(this.orderProcessor.hasLastOrder&&this.isFirstCurrentSymbolChange)return void(this.isFirstCurrentSymbolChange=!1);this.processAutoFillPrice(e.name)}r&&this.focusFactory.focusElement(this.element.find(this.symbolNextFocusElements[0].focusElement)),this.isFirstCurrentSymbolChange=!1}},t.prototype.processChangePriceSide=function(e,t,i){var r=!1;if(this.orderProcessor.isCurrentAccountIsDerivative()&&e.isDerivatives()&&(void 0!==i&&(this.orderProcessor.side=i,r=!0,this.orderProcessor.processStopConditionList(i)),void 0!==t)){var n=Ge.lookup[t];n===Ge.ATO?(this.orderProcessor.price="",this.orderProcessor.priceType=Ge.ATO):(this.orderProcessor.price=t,this.orderProcessor.priceType=Ge.LIMIT),r=!0}return r},t.prototype.onValidatedSymbol=function(e){e&&this.userApplicationProfileService.setCurrentSymbol(e)},t.prototype.onBlurSymbolInput=function(e){this.updateInstrumentStaticData(e),this.piwikService.eventTrack(nt.FILL_SYMBOL,rt.PLACE_ORDER_DERIVATIVES)},t.prototype.onBlurConditionSymbolInput=function(e){this.getStopSymbolStaticData(e),this.piwikService.eventTrack(nt.FILL_STOPSYMBOL,rt.PLACE_ORDER_DERIVATIVES)},t.prototype.processAutoFillPrice=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e,Qe.DERIVATIVE).then(function(e){t.orderProcessor.price=jr.getDerivativesPrice(e,t.orderProcessor.side)})},t.prototype.getStopSymbolStaticData=function(e){var t=this;this.instrumentService.searchStopSymbol(e).then(function(e){var i=e.name;e.isStockUnderlying()?t.orderProcessor.stopInstrumentMarketType=Qe.EQUITY:t.orderProcessor.stopInstrumentMarketType=Qe.DERIVATIVE,t.instrumentService.getInstrumentStaticData(i,t.orderProcessor.stopInstrumentMarketType).then(function(e){t.orderProcessor.stopInstrumentStaticData=e})},function(i){0===e.length?t.orderProcessor.stopInstrumentStaticData={isSuccess:!1,errorMsg:"Please insert symbol."}:t.orderProcessor.stopInstrumentStaticData={isSuccess:!1,errorMsg:"Series not found"}})},t.prototype.onSideChange=function(e){var t=Be.lookup[e];this.orderProcessor.symbol&&""!==this.orderProcessor.symbol&&this.orderEntrySetting.autoFillPriceConfiguration.enable&&this.processAutoFillPrice(this.orderProcessor.symbol),this.orderProcessor.processStopConditionList(t)},t.prototype.onValidatedStopSymbol=function(e){this.currentStopSymbol!==e&&(this.currentStopSymbol=e,this.orderProcessor.clearStopPrice()),this.piwikService.eventTrack(nt.FILL_STOPSYMBOL,rt.PLACE_ORDER_DERIVATIVES)},t.prototype.onValidatedSymbolFail=function(){this.clearSessionData()},t.prototype.clearSessionData=function(){this.sessionList=null,this.orderProcessor.selectedSession=null},t.prototype.toggleCondition=function(){this.orderProcessor.isShowCondition=!this.orderProcessor.isShowCondition},t.prototype.clearFormDataByClearBtn=function(){this.orderProcessor.hasLastOrder=!1,this.orderProcessor.clearFormDataByClearBtn(),this.orderProcessor.processStopConditionList(Be.NONE),this.currentSymbol=this.orderProcessor.symbol,this.instrumentStaticData=void 0,this.orderProcessor.stopInstrumentStaticData=void 0,this.piwikService.eventTrack(nt.CLICK_CLEAR,rt.PLACE_ORDER_DERIVATIVES)},t.prototype.refreshPageData=function(){this.refreshEvent.dispatchEvent()},t.prototype.checkPriceTypeNotLimit=function(){return this.orderProcessor.priceType!==Ge.LIMIT},t.prototype.checkPriceTypeNotATO=function(){return this.orderProcessor.priceType!==Ge.ATO},t.prototype.checkValidityIsSession=function(){return this.orderProcessor.condition===Ke.SESSION},t.prototype.checkEnableIceberg=function(){return this.orderProcessor.priceType!==Ge.LIMIT},t.prototype.isShowDateInput=function(){return this.orderProcessor.condition===Ke.DATE||this.orderProcessor.condition===Ke.TIME},t.prototype.isShowTimeInput=function(){return this.orderProcessor.condition===Ke.TIME},t.prototype.isShowSessionInput=function(){return this.orderProcessor.condition===Ke.SESSION},t.prototype.onToggleEnableStopOrder=function(){this.orderProcessor.clearValueInStopOrder(),this.orderProcessor.isStopOrderChecked&&this.orderProcessor.symbol&&this.orderProcessor.symbol.length>0&&(this.orderProcessor.stopSymbol=this.orderProcessor.symbol)},t.prototype.onPositionChanged=function(e){this.orderProcessor.position=e},t.prototype.onPriceTypeChanged=function(e){this.orderProcessor.priceType=e,this.orderProcessor.price="",this.orderProcessor.iceberg="",this.orderProcessor.condition=Ke.DAY,this.orderProcessor.priceType===Ge.ATO&&(this.orderProcessor.condition=Ke.AUTO_M,this.disableStopOrder()),this.piwikService.eventTrackLabel(nt.SELECT_PRICETYPE,rt.PLACE_ORDER_DERIVATIVES,e.fullname)},t.prototype.onInputPriceTypeShortcut=function(e){(e.isATO()||e.isMP()||e.isMPMKT()||e.isMPMTL())&&this.onPriceTypeChanged(e)},t.prototype.onValidityChanged=function(e){this.orderProcessor.condition=e,this.orderProcessor.condition===Ke.SESSION&&this.sessionList&&this.sessionList.length>0&&(this.orderProcessor.selectedSession=this.sessionList[0]),this.piwikService.eventTrackLabel(nt.SELECT_VALIDITY,rt.PLACE_ORDER_DERIVATIVES,e.fullname)},t.prototype.onStopConditionChanged=function(e){this.orderProcessor.stopCondition=e},t.prototype.onSelectedSessionChanged=function(e){this.orderProcessor.selectedSession=e},Object.defineProperty(t.prototype,"submitLabel",{get:function(){return this.orderProcessor.side!==Be.NONE?this.orderProcessor.side.derivativeFullname:"Submit"},enumerable:!0,configurable:!0}),t.prototype.disableStopOrder=function(){this.orderProcessor.isStopOrderChecked=!1,this.orderProcessor.clearValueInStopOrder()},t.prototype.getSessionDataAndSetDefault=function(e){var t=this;this.instrumentService.getDerivativesSymbolStaticData(e).then(function(e){t.sessionList=e.derivativesSessionList,e.derivativesSessionList.length>0&&(t.orderProcessor.selectedSession=e.derivativesSessionList[0])})},t.prototype.getSessionData=function(e){var t=this;this.instrumentService.getDerivativesSymbolStaticData(e).then(function(e){t.sessionList=e.derivativesSessionList})},t.prototype.subscribeSnapshotService=function(){this.snapshotPubsub.subscribe([this.currentSymbol],this.callback)},t.prototype.onRecieveSnapshot=function(e){if(e.hasInitData()){var t=Number(e.initData.lastTradingDate.substring(0,2)),i=Number(e.initData.lastTradingDate.substring(3,5))-1,r=Number(e.initData.lastTradingDate.substring(6,10)),n=new Date(r,i,t,23,59,59,999);this.datePickerConfig.datepickerOptions.maxDate=n}this.unsubscribeSnapshotService()},t.prototype.onInputUpdate=function(e){this.orderProcessor.symbol=e},t.prototype.onStopSymbolUpdate=function(e){this.orderProcessor.stopSymbol=e},t.prototype.unsubscribeSnapshotService=function(){this.snapshotPubsub.unsubscribe([this.currentSymbol],this.callback)},t.prototype.updateInstrumentStaticData=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e.toUpperCase(),Qe.DERIVATIVE).then(function(e){t.instrumentStaticData=e})},t.prototype.getPriceDigit=function(){return this.instrumentStaticData&&this.instrumentStaticData.isSuccess?this.instrumentStaticData.data.derivativesPriceDigit:void 0},t.prototype.getStopOrderPriceDigit=function(){return this.orderProcessor.stopInstrumentStaticData&&this.orderProcessor.stopInstrumentStaticData.isSuccess?this.orderProcessor.stopInstrumentMarketType===Qe.DERIVATIVE?this.orderProcessor.stopInstrumentStaticData.data.derivativesPriceDigit:2:void 0},t.prototype.shouldShowPinInput=function(){return this.userInfoService.isInvestor()},t.prototype.isUserMarketRep=function(){return this.userInfoService.isMarketRep()},t.prototype.getPlaceOrderCategory=function(){return rt.PLACE_ORDER_DERIVATIVES},t.prototype.getSmartPriceAction=function(){return nt.CLICK_SMARTPRICE},t.prototype.getPriceAction=function(){return nt.FILL_PRICE},t.prototype.getSmartVolumeAction=function(){return nt.CLICK_SMARTVOLUME},t.prototype.getVolumeAction=function(){return nt.FILL_VOLUME},t.prototype.getSmartStopPriceAction=function(){return nt.CLICK_STOPSMARTPRICE},t.prototype.getStopPriceAction=function(){return nt.FILL_STOPPRICE},t.prototype.getSmartIcebergAction=function(){return nt.CLICK_ICEBERGSMARTVOLUME},t.prototype.getIcebergAction=function(){return nt.FILL_ICEBERGVOLUME},t.prototype.viewAllOrder=function(){this.menuService.toggleViewAllOrder()},t.$inject=["PlaceOrderService","AlertService","focus","InstrumentService","UserInfoService","InitDataEvent","SnapshotPublishSubscriber","CurrentSymbolChangeEvent","RefreshEvent","PiwikService","PinService","UserApplicationProfileService","OrderEntrySettingChangeEvent","OrderProcessor","MenuService","FacebookService","OrderStatusService","GlobalKeyboardShortcutEvent","$element"],t}(Ss),Gu=function(e){function t(t){var i=e.call(this)||this;return i.orderProcessor=t,i.NORMAL_PAGE_PLACE_ORDER_SOURCE_ID=ya.NORMAL,i}return ne(t,e),t.prototype.startService=function(){},t.prototype.stopService=function(){},t.$inject=["OrderProcessor"],t}(Ss),Ku=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S,b){var C=e.call(this)||this;return C.placeOrderService=t,C.alertService=i,C.focus=r,C.currentSymbolChangeEvent=n,C.userInfoService=o,C.instrumentService=s,C.$filter=a,C.refreshEvent=c,C.piwikService=l,C.pinService=u,C.userApplicationProfileService=d,C.orderEntrySettingChangeEvent=h,C.currentAccountChangeEvent=p,C.streamingAttribute=m,C.orderProcessor=v,C.menuService=f,C.facebookService=y,C.orderStatusService=g,C.globalKeyboardShortcutEvent=S,C.$element=b,C.onCurrentSymbolChangeCallBack=C.onCurrentSymbolChange.bind(C),C.onOrderEntrySettingChangeCallBack=C.onOrderEntrySettingChange.bind(C),C.onCurrentAccountChangeEventCallBack=C.onCurrentAccountChange.bind(C),C.onGlobalKeyboardShortcutChangeSideEventCallBack=C.onGlobalKeyboardShortcutChangeSideEvent.bind(C),C.priceInputNextFocusElements=[{parent:"place-order",focusElement:"#place-order-pin input"},{parent:"place-order",focusElement:"#place-order-submit"}],C.symbolNextFocusElements=[{parent:"place-order",focusElement:"#place-order-volume input"}],C.volumeInputNextFocusElements=[{parent:"place-order",focusElement:"price-input > input"},{parent:"place-order",focusElement:"#place-order-pin input"},{parent:"place-order",focusElement:"#place-order-submit"}],C.icebergVolumeInputNextFocusElements=[{parent:"place-order",focusElement:"#place-order-pin input"},{parent:"place-order",focusElement:"#place-order-submit"}],C.sideNextFocusElements=[{parent:'div[name="place-order"]',focusElement:"symbol-input#place-order-symbol input.main-input"}],C.pinNextFocusElement=[{parent:"place-order",focusElement:'button[name="submit"]'}],C.isLockPlaceOrder=!1,C.priceTypeList=Ge.ALL_EQUITY,C.validityList=Ke.ALL_EQUITY,C.priceFilter=a("price"),C.isAccountHasSBLFlag=!1,C.isAccountHasDepositCheckbox=!1,C.isShowSBLPositionTypeDropdown=!1,C.sblPositionTypeDropdownList=[],C.currentSymbol="",C.isFirstCurrentSymbolChange=!0,C.isRequesting=!1,C.priceTypeShortcutMapping=uu.EQUITY_PRICE_TYPE,C.element=b,C.focusFactory=r,C}return ne(t,e),t.prototype.startService=function(){this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChangeCallBack),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeEventCallBack),this.updateInstrumentStaticData(this.orderProcessor.symbol),this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack),this.globalKeyboardShortcutEvent.subscribeChangeSide(this.onGlobalKeyboardShortcutChangeSideEventCallBack)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeEventCallBack),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.orderEntrySettingChangeEvent.unsubscribe(this.onOrderEntrySettingChangeCallBack),this.globalKeyboardShortcutEvent.unsubscribeChangeSide(this.onGlobalKeyboardShortcutChangeSideEventCallBack)},t.prototype.onOrderEntrySettingChange=function(e){this.currentOrderEntrySetting=e},t.prototype.onCurrentAccountChange=function(e){this.isAccountHasSBLFlag=e.sblFlagStatus||e.canTradeSBL,this.isAccountHasDepositCheckbox=e.hasCNSSBLDeposit(this.streamingAttribute.brokerId),this.isShowSBLPositionTypeDropdown=e.hasSBLPositiobTypeDropdownLicense(),this.sblPositionTypeDropdownList=this.getSBLPositionTypeDropdownList(e),this.isAccountHasSBLFlag||!this.orderProcessor.side.isEqual(Be.SBL_COVER)&&!this.orderProcessor.side.isEqual(Be.SBL_SHORT)||(this.orderProcessor.side=Be.NONE)},t.prototype.onGlobalKeyboardShortcutChangeSideEvent=function(e){this.orderProcessor.side=e,this.onSideChange(),this.focusFactory.focusElement(this.$element.find("symbol-input input.main-input"))},t.prototype.getSBLPositionTypeDropdownList=function(e){return e.hasSBLPositiobTypeDropdownLicense()?e.isSBLDepositOnly()?ac.DEPOSIT_ONLY_LIST:e.isSBLCollateralOnly()?ac.COLLATERAL_ONLY_LIST:ac.ALL_LIST:[]},t.prototype.submitOrder=function(){var e=this;if(this.validateEquityForm()&&!this.isLockPlaceOrder){var t=this.generatePlaceOrderEquityParam();if(this.lockPlaceOrder(t),this.currentOrderEntrySetting.confirmPopUp.enable){var i=new Uu;angular.copy(t,i),this.alertService.showPlaceOrderConfirmAlert(i).then(function(){e.placeOrder(t)},function(){e.unlockPlaceOrder()})}else this.placeOrder(t)}this.facebookService.placeOrderEquityTrack(this.menuService.getCurrentMenuName(),this.source),this.piwikService.eventTrack(nt.SUBMIT_ORDER,rt.PLACE_ORDER_EQUITY)},t.prototype.lockPlaceOrder=function(e){this.isLockPlaceOrder=!0,this.lastSubmitOrderParameter=e},t.prototype.unlockPlaceOrder=function(){this.isLockPlaceOrder=!1,this.lastSubmitOrderParameter=void 0},t.prototype.generatePlaceOrderEquityParam=function(){var e=new Uu;return e.accountNo=this.orderProcessor.currentAccount.accountNo,e.clientType=this.orderProcessor.currentAccount.clientType,e.side=this.orderProcessor.side.shortname,e.symbol=this.orderProcessor.symbol.toUpperCase(),e.price=this.orderProcessor.priceValue,e.volume=this.orderProcessor.volumeValue,e.pin=this.getPin(),e.priceType=this.orderProcessor.priceType.value,e.condition=this.orderProcessor.condition.value,e.iceberg=this.orderProcessor.icebergValue,e.isNvdr=this.orderProcessor.isNvdr,e.sblPositionType=this.orderProcessor.sblPositionType,e.isSupportSBLPositionType=this.orderProcessor.currentAccount.hasCNSSBLDeposit(this.streamingAttribute.brokerId)||this.orderProcessor.currentAccount.hasSBLPositiobTypeDropdownLicense(),e},Object.defineProperty(t.prototype,"isDeposit",{get:function(){return this.orderProcessor.sblPositionType===ac.DEPOSIT},set:function(e){this.orderProcessor.sblPositionType=e?ac.DEPOSIT:ac.NORMAL},enumerable:!0,configurable:!0}),t.prototype.getPin=function(){return this.pinService.isSavePin()?this.pinService.pin:this.orderProcessor.pin},t.prototype.placeOrder=function(e){var t=this;this.orderProcessor.hasLastOrder=!0,this.isRequesting=!0,this.placeOrderService.requestPlaceOrderEquity(e).then(function(e){t.unlockPlaceOrder()},function(e){if(e){if(e.isWarning)return t.onWarning(e);e.isSuccess||t.alertService.showErrorAlert(e.errorMessage)}t.unlockPlaceOrder()})["finally"](function(){t.isRequesting=!1,t.orderProcessor.clearFormDataAfterCompleteOrderTransaction(),t.currentSymbol=t.orderProcessor.symbol,t.refreshPageData()})},t.prototype.onWarning=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e.warnMessage).then(function(){var e=new Uu;angular.copy(t.lastSubmitOrderParameter,e),e.confirmedWarn=!0,t.placeOrder(e)},function(){t.unlockPlaceOrder()})},t.prototype.onPriceTypeChanged=function(e){this.orderProcessor.priceType=e,this.orderProcessor.price="",this.orderProcessor.condition=Ke.DAY,this.checkEnableIceberg()&&(this.orderProcessor.iceberg=""),this.piwikService.eventTrackLabel(nt.SELECT_PRICETYPE,rt.PLACE_ORDER_EQUITY,e.fullname)},t.prototype.onValidityChanged=function(e){this.orderProcessor.condition=e,this.checkEnableIceberg()&&(this.orderProcessor.iceberg=""),this.piwikService.eventTrackLabel(nt.SELECT_VALIDITY,rt.PLACE_ORDER_EQUITY,e.fullname)},t.prototype.onSBLPositionTypeChanged=function(e){this.orderProcessor.sblPositionType=e},t.prototype.onSideChange=function(){this.orderProcessor.side!==Be.SELL&&this.orderProcessor.clearDeposit(),this.orderProcessor.symbol&&""!==this.orderProcessor.symbol&&this.currentOrderEntrySetting.autoFillPriceConfiguration.enable&&this.processAutoFillPrice(this.orderProcessor.symbol)},t.prototype.checkEnableIceberg=function(){return this.orderProcessor.priceType!==Ge.LIMIT||this.orderProcessor.condition!==Ke.DAY},t.prototype.checkPriceTypeNotLimit=function(){return this.orderProcessor.priceType!==Ge.LIMIT},t.prototype.onInputPriceTypeShortcut=function(e){this.onPriceTypeChanged(e)},t.prototype.validateEquityForm=function(){var e=[];return this.orderProcessor.currentAccount.isEmptyAccount&&e.push("Please insert trading account."),this.orderProcessor.side===Be.NONE&&(this.isAccountHasSBLFlag?e.push("Please select Buy, Sell, Short and Cover."):e.push("Please select Buy or Sell.")),""===this.orderProcessor.symbol&&e.push("Please insert symbol."),null===this.orderProcessor.volumeValue&&e.push("Please insert volume."),null===this.orderProcessor.priceValue&&"limit"===this.orderProcessor.priceType.value&&e.push("Please insert price."),this.shouldShowPinInput()!==!0||this.pinService.isSavePin()||null!==this.orderProcessor.pin&&""!==this.orderProcessor.pin||e.push("Please insert PIN."),0===e.length||(this.alertService.showValidationErrorAlert(e),!1)},t.prototype.processChangePriceSide=function(e,t,i){var r=!1;if(this.orderProcessor.isCurrentAccountIsEquity()&&e.isEquity()){if(void 0!==t){var n=Ge.lookup[t];n===Ge.ATO||n===Ge.ATC?(this.orderProcessor.price="",this.orderProcessor.priceType=n):(this.orderProcessor.price=t,this.orderProcessor.priceType=Ge.LIMIT),r=!0}void 0!==i&&(this.orderProcessor.side=i,r=!0)}return r},t.prototype.onCurrentSymbolChange=function(e,t,i){if(e.isEquity()){this.orderProcessor.clearPriceWhenCurrentSymbolChange(this.currentSymbol,e.name,this.isFirstCurrentSymbolChange),this.isFirstCurrentSymbolChange||this.currentSymbol===e.name.toUpperCase()||(this.orderProcessor.hasLastOrder=!1);var r=this.processChangePriceSide(e,t,i);if(this.currentSymbol!==e.name.toUpperCase()&&(this.currentSymbol=e.name,this.orderProcessor.symbol=e.name,this.updateInstrumentStaticData(e.name),!r&&this.currentOrderEntrySetting.autoFillPriceConfiguration.enable)){if(this.orderProcessor.hasLastOrder&&this.isFirstCurrentSymbolChange)return void(this.isFirstCurrentSymbolChange=!1);this.processAutoFillPrice(e.name)}r&&(this.focusFactory.focusElement(this.element.find(this.symbolNextFocusElements[0].focusElement)),this.element.find(this.symbolNextFocusElements[0].focusElement).blur()),this.isFirstCurrentSymbolChange=!1}},t.prototype.onInputSymbolChange=function(e){this.orderProcessor.symbol=e},t.prototype.onValidatedSymbol=function(e){e&&this.userApplicationProfileService.setCurrentSymbol(e)},t.prototype.onBlurSymbolInput=function(e){this.updateInstrumentStaticData(e),this.piwikService.eventTrack(nt.FILL_SYMBOL,rt.PLACE_ORDER_EQUITY)},t.prototype.processAutoFillPrice=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e,Qe.EQUITY).then(function(e){t.orderProcessor.price=jr.getEquityPrice(e,t.orderProcessor.side)})},t.prototype.toggleCondition=function(){this.orderProcessor.isShowCondition=!this.orderProcessor.isShowCondition},t.prototype.clearFormDataByClearBtn=function(){this.orderProcessor.hasLastOrder=!1,this.orderProcessor.clearFormDataByClearBtn(),this.currentSymbol=this.orderProcessor.symbol,this.piwikService.eventTrack(nt.CLICK_CLEAR,rt.PLACE_ORDER_EQUITY)},t.prototype.refreshPageData=function(){this.refreshEvent.dispatchEvent()},t.prototype.submitLabel=function(){return this.orderProcessor.side!==Be.NONE?this.orderProcessor.side.fullname:"Submit"},t.prototype.updateInstrumentStaticData=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e,Qe.EQUITY).then(function(e){t.instrumentStaticData=e})},t.prototype.shouldShowPinInput=function(){return this.userInfoService.isInvestor()},t.prototype.isUserMarketRep=function(){return this.userInfoService.isMarketRep()},t.prototype.getPlaceOrderCategory=function(){return rt.PLACE_ORDER_EQUITY},t.prototype.getSmartPriceAction=function(){return nt.CLICK_SMARTPRICE},t.prototype.getPriceAction=function(){return nt.FILL_PRICE},t.prototype.getSmartVolumeAction=function(){return nt.CLICK_SMARTVOLUME},t.prototype.getVolumeAction=function(){return nt.FILL_VOLUME},t.prototype.getSmartIcebergAction=function(){return nt.CLICK_ICEBERGSMARTVOLUME},t.prototype.getIcebergAction=function(){return nt.FILL_ICEBERGVOLUME},t.prototype.viewAllOrder=function(){this.menuService.toggleViewAllOrder()},t.prototype.isShowShortCover=function(){return this.isAccountHasSBLFlag},t.prototype.isEnableDepositCheckbox=function(){return this.orderProcessor.side===Be.SELL},t.prototype.isDisabledSBLPositionTypeDropdown=function(){return this.orderProcessor.side!==Be.SELL},t.$inject=["PlaceOrderService","AlertService","focus","CurrentSymbolChangeEvent","UserInfoService","InstrumentService","$filter","RefreshEvent","PiwikService","PinService","UserApplicationProfileService","OrderEntrySettingChangeEvent","CurrentAccountChangeEvent","StreamingAttribute","OrderProcessor","MenuService","FacebookService","OrderStatusService","GlobalKeyboardShortcutEvent","$element"],t}(Ss),zu=function(){function e(e,t,i,r,n,o,s,a,c,l,u){this.streamingAttribute=e,this.orderStatusService=t,this.$window=i,this.$element=r,this.userInfoService=n,this.piwikService=o,this.$q=s,this.$filter=a,this.alertService=c,this.$timeout=l,this.orderProcessor=u,this.focusElements=["price-input input","volume-input input"],this.volumeInputNextFocusElements=[{parent:"div.change-order",focusElement:"button.ok-button"}],this.orderEquityPriceFilter=this.$filter("orderEquityPrice"),this.volumeFilter=this.$filter("volume"),this.priceDigit=2}return e.prototype.popupOrderDetail=function(e,t){t.stopPropagation();var i;this.userInfoService.isInvestor()?i=this.getOrderDetailInvestorUrl():this.userInfoService.isMarketRep()&&(i=this.getOrderDetailMarketrepUrl());var r;"orderNo"===e?r=nt.CLICK_ORDERNO:"orderDetail"===e&&(r=nt.CLICK_DETAIL),r&&this.piwikService.eventTrack(r,rt.ORDER_STATUS),this.$window.open(i,"_blank","scrollbars=1,resizable=1,height=500,width=650")},e.prototype.getOrderDetailInvestorUrl=function(){var e=this.data.tradeDate.split("/").reverse().join("-"),t=this.orderProcessor.currentAccount&&this.orderProcessor.currentAccount.frontType===fi.DGW?this.data.orderNo:this.data.orderNoSeos;return this.streamingAttribute.itpHost+"/daytradeflex/streamingOrderDetail.jsp?orderNo="+t+"&txtAccountNo="+this.data.accountNo+"&extOrderNo="+this.data.orderNoFis+"&tradeDate="+e+"&opener=streaming&txtTerminalType="+Xe},e.prototype.getOrderDetailMarketrepUrl=function(){var e=this.data.tradeDate.split("/").reverse().join("-");return this.streamingAttribute.itpHost+"/SEOS_MktOutstandingOrderDetail.jsp?orderNo="+this.data.orderNoSeos+"&txtAccountNo="+this.data.accountNo+"&tradeDate="+e+"&opener=streaming&txtTerminalType="+Xe},e.prototype.changeChecked=function(){switch(this.data.isChecked){case!0:this.orderStatusService.uncheckedCancelFlagEquity(this.data.orderNo);break;case!1:this.orderStatusService.checkedCancelFlagEquity(this.data.orderNo)}},e.prototype.cancelOrder=function(e){this.orderProcessor.cancelOrdersEquity([this.data]),this.piwikService.eventTrack(nt.CLICK_CANCEL,rt.ORDER_STATUS),e.stopPropagation()},e.prototype.changeOrder=function(e){var t=this;e.stopPropagation();var i=[];return this.isUndefinedValue(this.newPrice)&&i.push("Please insert price"),this.isUndefinedValue(this.newVolume)&&i.push("Please insert volume"),0!==i.length?void this.alertService.showValidationErrorAlert(i).then(function(){t.focusElement()}):void this.orderProcessor.changeOrderEquity(this.data,this.newVolume,this.newPrice).then(function(){t.focusOrderStatusList()},function(){t.focusElement()})},e.prototype.onClickChangePriceInput=function(e){e.stopPropagation()},e.prototype.onClickChangeVolumeInput=function(e){e.stopPropagation()},e.prototype.$onChanges=function(e){var t=this;e.data&&(e.data.currentValue.blink&&(this.$element.removeClass("highlight_row_animation"),this._promiseA&&clearTimeout(this._promiseA),this.$element.addClass("highlight_row_animation"),this.orderStatusService.clearFlagBlinkEquityOrderStatus(this.data.orderNo),this._promiseA=setTimeout(function(){t.$element.removeClass("highlight_row_animation")},1e3)),this.newPrice=this.orderEquityPriceFilter(this.data.price,2,this.data.priceType),this.newVolume=this.volumeFilter(this.data.volume))},e.prototype.$onDestroy=function(){this.orderStatusService.changingRowKey===this.data.key&&this.orderStatusService.clearCurrentEquityIsChangingFlag(),this.$element.removeClass("highlight_row_animation")},e.prototype.showChangeOrder=function(e){this.data&&this.orderStatusService.setCurrentEquityIsChangingFlag(this.data.key),e.stopPropagation()},e.prototype.onShowChangeOrder=function(){this.focusElement()},e.prototype.focusElement=function(){var e,t=this,i=this.focusElements.some(function(i){return e=t.$element.find(i),
void 0!==e[0]});i&&this.$timeout(function(){e.select(),t.$timeout(function(){e.select()})})},e.prototype.focusOrderStatusList=function(){var e=this.$element.parents(".scroll-container");e.focus()},e.prototype.isChangingOrder=function(){return!!this.data&&this.data.isChanging},e.prototype.isUndefinedValue=function(e){return""===e||void 0===e||void 0!==e&&0===e.length},e.prototype.hideChangeOrder=function(e){this.data.isChanging=!1,this.focusOrderStatusList(),e.stopPropagation()},e.prototype.canChangePrice=function(){return!!this.data&&(this.data.canChangePriceVol&&""===this.data.priceType)},e.prototype.getPlaceOrderCategory=function(){return rt.PLACE_ORDER_EQUITY},e.prototype.getChangePriceAction=function(){return nt.FILL_CHANGE_PRICE},e.prototype.getChangeVolumeAction=function(){return nt.FILL_CHANGE_VOLUME},e.$inject=["StreamingAttribute","OrderStatusService","$window","$element","UserInfoService","PiwikService","$q","$filter","AlertService","$timeout","OrderProcessor"],e}(),Qu=function(){function e(e,t,i,r,n,o,s,a){this.streamingAttribute=e,this.$window=t,this.userInfoService=i,this.piwikService=r,this.orderProcessor=n,this.orderStatusService=o,this.$element=s,this.$filter=a,this.orderDerivPriceFilter=this.$filter("orderDerivPrice"),this.volumeFilter=this.$filter("volume")}return e.prototype.popupOrderDetail=function(e,t){t.stopPropagation();var i;this.userInfoService.isInvestor()?i=this.getOrderDetailInvestorUrl():this.userInfoService.isMarketRep()&&(i=this.getOrderDetailMarketrepUrl());var r;"orderNo"===e?r=nt.CLICK_ORDERNO:"orderDetail"===e&&(r=nt.CLICK_DETAIL),r&&this.piwikService.eventTrack(r,rt.ORDER_STATUS),this.$window.open(i,"_blank","scrollbars=1,resizable=1,height=500,width=650")},e.prototype.getOrderDetailInvestorUrl=function(){return this.streamingAttribute.derivHost+"/Derivatives/C15_OrderDetail.jsp?orderNo="+this.data.orderNo+"&sendDate="+this.data.sendDate},e.prototype.getOrderDetailMarketrepUrl=function(){return this.streamingAttribute.derivHost+"/Derivatives/C16_OrderDetail.jsp?orderNo="+this.data.orderNo+"&accountNo="+this.orderProcessor.currentAccount.accountNo},e.prototype.changeChecked=function(){switch(this.data.isChecked){case!0:this.orderStatusService.uncheckedCancelFlagDerivatives(this.data.orderNo);break;case!1:this.orderStatusService.checkedCancelFlagDerivatives(this.data.orderNo)}},e.prototype.$onChanges=function(e){var t=this;e.data&&e.data.currentValue.blink&&(this.$element.removeClass("highlight_row_animation"),this._promiseA&&clearTimeout(this._promiseA),this.$element.addClass("highlight_row_animation"),this.orderStatusService.clearFlagBlinkDerivativesOrderStatus(this.data.key),this._promiseA=setTimeout(function(){t.$element.removeClass("highlight_row_animation")},1e3)),this.newPrice=this.orderDerivPriceFilter(this.data.price,this.data.priceDigit,this.data.priceType),this.newVolume=this.volumeFilter(this.data.volume)},e.prototype.$onDestroy=function(){this.orderStatusService.changingRowKey===this.data.key&&this.orderStatusService.clearCurrentDerivativesIsChangingFlag(),this.$element.removeClass("highlight_row_animation")},e}(),Xu=function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,t,n,a,c,d,i,o,l)||this;return h.streamingAttribute=t,h.orderStatusService=i,h.alertService=r,h.$window=n,h.$element=o,h.refreshEvent=s,h.userInfoService=a,h.piwikService=c,h.$filter=l,h.$timeout=u,h.orderProcessor=d,h.focusElements=["price-input input","volume-input input"],h.volumeInputNextFocusElements=[{parent:"div.change-order",focusElement:"button.ok-button"}],h.changeableOrderPosition=[Ye.OPEN,Ye.CLOSE],h}return ne(t,e),t.prototype.cancelOrder=function(e){e.stopPropagation(),this.orderProcessor.cancelOrdersDerivatives([this.data]),this.piwikService.eventTrack(nt.CLICK_CANCEL,rt.ORDER_STATUS)},t.prototype.showChangeOrder=function(e){e.stopPropagation(),this.data&&(this.orderStatusService.setCurrentDerivativesIsChangingFlag(this.data.key),this.focusElement())},t.prototype.onClickChangePriceInput=function(e){e.stopPropagation()},t.prototype.onClickChangeVolumeInput=function(e){e.stopPropagation()},t.prototype.focusElement=function(){var e,t=this,i=this.focusElements.some(function(i){return e=t.$element.find(i),void 0!==e[0]});i&&this.$timeout(function(){e.select(),t.$timeout(function(){e.select()})})},t.prototype.focusOrderStatusList=function(){var e=this.$element.parents(".scroll-container");e.focus()},t.prototype.hideChangeOrder=function(e){e.stopPropagation(),this.focusOrderStatusList(),this.data.isChanging=!1},t.prototype.changeOrder=function(e){var t=this;e.stopPropagation();var i=[];return this.isUndefinedValue(this.newPrice)&&i.push("Please insert price"),this.isUndefinedValue(this.newVolume)&&i.push("Please insert volume"),0!==i.length?void this.alertService.showValidationErrorAlert(i).then(function(){t.focusElement()}):void this.orderProcessor.changeOrderDerivatives(this.data,this.newVolume,this.newPrice).then(function(){t.focusOrderStatusList()},function(){t.focusElement()})},t.prototype.isUndefinedValue=function(e){return""===e||void 0===e||void 0!==e&&0===e.length},t.prototype.isChangingOrder=function(){return!!this.data&&this.data.isChanging},t.prototype.canChangePrice=function(){return!!this.data&&(this.data.canChanged&&this.data.priceType===Ge.LIMIT)},t.prototype.getPlaceOrderCategory=function(){return rt.PLACE_ORDER_DERIVATIVES},t.prototype.getChangePriceAction=function(){return nt.FILL_CHANGE_PRICE},t.prototype.getChangeVolumeAction=function(){return nt.FILL_CHANGE_VOLUME},t.prototype.onShowChangeOrder=function(){this.focusElement()},t.$inject=["StreamingAttribute","OrderStatusService","AlertService","$window","$element","RefreshEvent","UserInfoService","PiwikService","$filter","$timeout","OrderProcessor"],t}(Qu),Ju=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.SYMBOL_WITH_NVDR="displaySymbol",t.SYMBOL="symbol",t.STATUS="status",t.SIDE="side",t.PRICE="price",t.ORDER_NO="orderNo",t.VOLUME="volume",t.BALANCE_VOLUME="balanceVolume",t.CANCELLED_VOLUME="cancelledVolume",t.MATCHED_VOLUME="matchedVolume",t.ORDER_TIME="orderTime",t.TIME="time",t.DATE="date",t.POSITION="position",t.VALIDITY="valid",t.STOP="isStopOrder",t.ENTER_ID="enterID",t.ACCOUNT_NO="accountNo",t}(Ji),Zu=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this)||this;return d.$scope=t,d.orderStatusService=i,d.userInfoService=r,d.instrumentService=n,d.refreshEvent=o,d.piwikService=s,d.userApplicationProfileService=a,d.orderProcessor=c,d.globalKeyboardShortcutEvent=l,d.$element=u,d.refreshOrderStatusEventCallBack=d.updateCurrentOrderStatus.bind(d),d.orderUpdateCallBack=d.rerenderOrderStatus.bind(d),d.onNeedGoToLastOrderStatusCallBack=d.onNeedGoToLastOrderStatus.bind(d),d.onCancelOrChangeOrderCompleteCallBack=d.onCancelOrChangeOrderComplete.bind(d),d}return ne(t,e),t.prototype.startService=function(){this.refreshEvent.subscribe(this.refreshOrderStatusEventCallBack),this.orderStatusService.subscribeOnOrderStatusReplaced(this.orderUpdateCallBack),this.globalKeyboardShortcutEvent.subscribeGoToLastOrderStatus(this.onNeedGoToLastOrderStatusCallBack)},t.prototype.stopService=function(){this.refreshEvent.unsubscribe(this.refreshOrderStatusEventCallBack),this.orderStatusService.subscribeOnOrderStatusReplaced(this.orderUpdateCallBack),this.globalKeyboardShortcutEvent.unsubscribeGoToLastOrderStatus(this.onNeedGoToLastOrderStatusCallBack)},t.prototype.isCheckedAllEquity=function(){return this.orderStatusService.isCheckedAllEquity},t.prototype.isCheckedAllDerivatives=function(){return this.orderStatusService.isCheckedAllDerivatives},t.prototype.toggleCancelAlEquity=function(){switch(this.orderStatusService.isCheckedAllEquity){case!1:this.orderStatusService.checkedCancelFlagAllEquity();break;case!0:this.orderStatusService.uncheckedCancelFlagAllEquity()}},t.prototype.toggleCancelAllDerivatives=function(){switch(this.orderStatusService.isCheckedAllDerivatives){case!1:this.orderStatusService.checkedCancelFlagAllDerivatives();break;case!0:this.orderStatusService.uncheckedCancelFlagAllDerivatives()}},t.prototype.updateCurrentOrderStatus=function(){this.orderStatusService.updateOrderStatusByCurrentAccount()},t.prototype.onEquitySelectedRowChangeByPressUpDown=function(e){var t=this.orderStatusService.currentEquityOrderStatusList;e<=t.length-1&&this.onClickSymbolEquity(t[e])},t.prototype.onDerivativesSelectedRowChangeByPressUpDown=function(e){var t=this.orderStatusService.currentDerivOrderStatusList;e<=t.length-1&&this.onClickSymbolDerivatives(t[e])},t.prototype.onClickSymbolEquity=function(e){var t=this;this.selectedRow=e.key,this.instrumentService.searchSymbol(e.symbol,Qe.EQUITY).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e),t.piwikService.eventTrack(nt.CLICK_SYMBOL,rt.ORDER_STATUS)})},t.prototype.onClickSymbolDerivatives=function(e){var t=this;this.selectedRow=e.key,this.instrumentService.searchSymbol(e.symbol,Qe.DERIVATIVE).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e),t.piwikService.eventTrack(nt.CLICK_SYMBOL,rt.ORDER_STATUS)})},t.prototype.rerenderOrderStatus=function(){this.selectedRow=null,this.$scope.$broadcast("vsRepeatReCalculateScroll")},t.prototype.onNeedGoToLastOrderStatus=function(){this.selectedRow=void 0,this.orderStatusService.currentAccount&&(this.orderStatusService.currentAccount.isEquity()?this.orderStatusService.currentEquityOrderStatusList.length>0&&(this.selectedRow=this.orderStatusService.currentEquityOrderStatusList[0].key):this.orderStatusService.currentAccount.isDerivatives()&&this.orderStatusService.currentDerivOrderStatusList.length>0&&(this.selectedRow=this.orderStatusService.currentDerivOrderStatusList[0].key),this.$scope.$broadcast("vsRepeatReCalculateScroll"),this.$element.find(".scroll-container").focus())},t.prototype.onCancelOrChangeOrderComplete=function(){this.$element.find(".scroll-container").focus()},t.prototype.onInputKeyboardShortcutChangeEquityOrder=function(){this.orderStatusService.setCurrentEquityIsChangingFlag(this.selectedRow)},t.prototype.sortEquityOrderBySymbol=function(){this.sortEquityOrderBy(Ju.SYMBOL_WITH_NVDR)},t.prototype.sortDerivativesOrderBySymbol=function(){this.sortDerivativesOrderBy(Ju.SYMBOL)},t.prototype.getSortIconByEquitySymbol=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.SYMBOL_WITH_NVDR)},t.prototype.getSortIconByDerivativesSymbol=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.SYMBOL)},t.prototype.sortEquityOrderByVolume=function(){this.sortEquityOrderBy(Ju.VOLUME)},t.prototype.sortDerivativesOrderByVolume=function(){this.sortDerivativesOrderBy(Ju.VOLUME)},t.prototype.sortEquityOrderByBalanceVolume=function(){this.sortEquityOrderBy(Ju.BALANCE_VOLUME)},t.prototype.sortDerivativesOrderByBalanceVolume=function(){this.sortDerivativesOrderBy(Ju.BALANCE_VOLUME)},t.prototype.sortEquityOrderByCancelledVolume=function(){this.sortEquityOrderBy(Ju.CANCELLED_VOLUME)},t.prototype.sortDerivativesOrderByCancelledVolume=function(){this.sortDerivativesOrderBy(Ju.CANCELLED_VOLUME)},t.prototype.sortEquityOrderByMatchedVolume=function(){this.sortEquityOrderBy(Ju.MATCHED_VOLUME)},t.prototype.sortDerivativesOrderByMatchedVolume=function(){this.sortDerivativesOrderBy(Ju.MATCHED_VOLUME)},t.prototype.sortEquityOrderBySide=function(){this.sortEquityOrderBy(Ju.SIDE)},t.prototype.sortDerivativesOrderBySide=function(){this.sortDerivativesOrderBy(Ju.SIDE)},t.prototype.getSortIconBySide=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.SIDE)},t.prototype.sortEquityOrderByPrice=function(){this.orderStatusService.toggleField(Ju.PRICE),this.orderStatusService.sortEquityOrderByPriceThenPriceType()},t.prototype.sortDerivativesOrderByPrice=function(){this.orderStatusService.toggleField(Ju.PRICE),this.orderStatusService.sortDerivativesOrderByPriceThenPriceType()},t.prototype.getSortIconByPrice=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.PRICE)},t.prototype.sortEquityOrderByOrderNo=function(){this.sortEquityOrderBy(Ju.ORDER_NO)},t.prototype.sortDerivativesOrderByOrderNo=function(){this.sortDerivativesOrderBy(Ju.ORDER_NO)},t.prototype.getSortIconByOrderNo=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.ORDER_NO)},t.prototype.sortEquityOrderByOrderTime=function(){this.sortEquityOrderBy(Ju.ORDER_TIME)},t.prototype.getSortIconByEquityOrderTime=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.ORDER_TIME)},t.prototype.sortDerivativesOrderByOrderTime=function(){this.sortDerivativesOrderBy(Ju.TIME)},t.prototype.getSortIconByDerivativesOrderTime=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.TIME)},t.prototype.sortDerivativesOrderByOrderDate=function(){this.orderStatusService.toggleField(Ju.DATE),this.orderStatusService.sortDerivativesOrderByYearMonth()},t.prototype.getSortIconByDate=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.DATE)},t.prototype.sortEquityOrderByStatus=function(){this.sortEquityOrderBy(Ju.STATUS)},t.prototype.sortDerivativesOrderByStatus=function(){this.sortDerivativesOrderBy(Ju.STATUS)},t.prototype.sortDerivativesOrderByPosition=function(){this.sortDerivativesOrderBy(Ju.POSITION)},t.prototype.getSortIconByOrderPosition=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.POSITION)},t.prototype.sortDerivativesOrderByValidity=function(){this.sortDerivativesOrderBy(Ju.VALIDITY)},t.prototype.getSortIconByOrderByValidity=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.VALIDITY)},t.prototype.sortDerivativesOrderByStop=function(){this.sortDerivativesOrderBy(Ju.STOP)},t.prototype.getSortIconByOrderByStop=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.STOP)},t.prototype.sortDerivativesOrderByAccountNo=function(){this.sortDerivativesOrderBy(Ju.ACCOUNT_NO)},t.prototype.getSortIconByAccountNo=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.ACCOUNT_NO)},t.prototype.sortDerivativesOrderByEnterID=function(){this.sortDerivativesOrderBy(Ju.ENTER_ID)},t.prototype.getSortIconByEnterID=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.ENTER_ID)},t.prototype.sortEquityOrderBy=function(e){this.orderStatusService.toggleField(e),this.orderStatusService.sortEquityOrder()},t.prototype.sortDerivativesOrderBy=function(e){this.orderStatusService.toggleField(e),this.orderStatusService.sortDerivativesOrder()},t.prototype.getSortIconClass=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.STATUS)},t.prototype.getSortIconClassByVolume=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.VOLUME)},t.prototype.getSortIconClassByBalanceVolumeEquity=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.BALANCE_VOLUME)},t.prototype.getSortIconClassByBalanceVolumeDerivatives=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.BALANCE_VOLUME)},t.prototype.getSortIconClassByCancelledVolume=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.CANCELLED_VOLUME)},t.prototype.getSortIconClassByMatchedVolume=function(){return this.orderStatusService.sortMode.getSortIconClass(Ju.MATCHED_VOLUME)},t.prototype.onInputKeyboardShortcutChangeDerivativesOrder=function(){this.orderStatusService.setCurrentDerivativesIsChangingFlag(this.selectedRow)},t.prototype.onInputKeyboardShortcutCancelEquityOrder=function(){var e=this.orderStatusService.getEquityOrderStatusViewByKey(this.selectedRow);e&&e.canCancel&&this.orderProcessor.cancelOrdersEquity([e])},t.prototype.onInputKeyboardShortcutCancelDerivativesOrder=function(){var e=this.orderStatusService.getDerivativesOrderStatusViewByKey(this.selectedRow);e&&e.canCancelled&&this.orderProcessor.cancelOrdersDerivatives([e])},t.$inject=["$scope","OrderStatusService","UserInfoService","InstrumentService","RefreshEvent","PiwikService","UserApplicationProfileService","OrderProcessor","GlobalKeyboardShortcutEvent","$element"],t}(Ss),ed=function(){function e(e){var t=this;this.keyboardShortcutSettingChangeEvent=e,this.restrict="A",this.scope={onInputKeyboardShortcutChangeOrder:"&",onInputKeyboardShortcutCancelOrder:"&"},this.link=function(e,i,r,n){var o=function(t){switch(t.which){case we:e.$$phase?e.onInputKeyboardShortcutCancelOrder():e.$apply(function(){e.onInputKeyboardShortcutCancelOrder()});break;case Te:e.$$phase?e.onInputKeyboardShortcutChangeOrder():e.$apply(function(){e.onInputKeyboardShortcutChangeOrder()})}}.bind(t),s=function(e){var t=i.find(".scroll-container")[0];e.isEnable?t.addEventListener("keydown",o):t.removeEventListener("keydown",o)}.bind(t);t.keyboardShortcutSettingChangeEvent.subscribe(s),e.$on("$destroy",function(){t.keyboardShortcutSettingChangeEvent.unsubscribe(s)})}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["KeyboardShortcutSettingChangeEvent"],t},e}(),td=function(){function e(e,t){this.orderStatusService=e,this.menuService=t}return e.prototype.viewAllOrder=function(){this.menuService.toggleViewAllOrder()},e.$inject=["OrderStatusService","MenuService"],e}(),id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Xu),rd=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d){this.$scope=e,this.accountService=t,this.alertService=i,this.initDataEvent=r,this.orderStatusService=n,this.currentAccountChangeEvent=o,this.refreshEvent=s,this.userInfoService=a,this.pinService=c,this.userApplicationProfileService=l,this.refreshAccountEvent=u,this.orderProcessor=d,this.onInitDataCompleteCallback=this.onInitDataComplete.bind(this),this.initDataEvent.subscribe(this.onInitDataCompleteCallback)}return e.prototype.onInitDataComplete=function(){this.clearSelectedEquityAccount(),this.clearSelectedDerivativesAccount(),this.authorizedSystemTypes=[],this.authorizedSystemTypes.push(Bu.EQUITY),this.authorizedSystemTypes.push(Bu.DERIVATIVES),this.selectedSystemType=Bu.EQUITY,this.setAndPublishSelectedAccount(this.selectedEquityAccount)},e.prototype.onSystemTypeChange=function(e){return this.selectedSystemType=e,this.selectedSystemType.isEquity()?void this.setAndPublishSelectedAccount(this.selectedEquityAccount):this.selectedSystemType.isDerivatives()?void this.setAndPublishSelectedAccount(this.selectedDerivativesAccount):void 0},e.prototype.setAndPublishSelectedAccount=function(e){this.selectedAccount=e,this.currentAccountChangeEvent.publish(e)},e.prototype.clearSelectedEquityAccount=function(){var e=new vi;e.systemType=mi.EQUITY,e.isEmptyAccount=!0,this.selectedEquityAccount=e},e.prototype.clearSelectedDerivativesAccount=function(){var e=new vi;e.systemType=mi.DERIVATIVES,e.isEmptyAccount=!0,this.selectedDerivativesAccount=e},e.$inject=["$scope","AccountService","AlertService","InitDataEvent","OrderStatusService","CurrentAccountChangeEvent","RefreshEvent","UserInfoService","PinService","UserApplicationProfileService","RefreshAccountEvent","OrderProcessor"],e}();angular.module("order",["multi-market","web-api","alert","number-formatter","service","binary","input","event-emitter","ui.bootstrap","ui.bootstrap.datetimepicker","ui-component"]).service("OrderStatusService",sc).component("accountInfo",{template:i(/*! ../../html/order/account-info.html */133),controller:Vu,bindings:{selectedAccount:"="}}).component("marketrepAccountInfo",{template:i(/*! ../../html/order/marketrep-account-info.html */134),controller:Fu,bindings:{selectedAccount:"="}}).component("order",{template:i(/*! ../../html/order/order.html */135),controller:Gu,bindings:{}}).component("placeOrder",{template:i(/*! ../../html/order/place-order.html */136),controller:Ku,bindings:{source:"<"}}).component("derivativePlaceOrder",{controller:Yu,template:i(/*! ../../html/order/derivatives-place-order.html */137),bindings:{source:"<"}}).component("allDerivativesPlaceOrder",{controller:td,template:i(/*! ../../html/order/all-derivatives-place-order.html */138),bindings:{source:"<"}}).component("orderStatus",{template:i(/*! ../../html/order/order-status.html */139),controller:Zu,bindings:{selectedAccount:"<"}}).component("equityOrderStatusRow",{template:i(/*! ../../html/order/equity-order-status-row.html */140),controller:zu,bindings:{data:"<"}}).component("normalDerivativesOrderStatusRow",{template:i(/*! ../../html/order/normal-derivatives-order-status-row.html */141),controller:Xu,bindings:{data:"<"}}).component("allDerivativesOrderStatusRow",{template:i(/*! ../../html/order/all-derivatives-order-status-row.html */142),controller:id,bindings:{data:"<"}}).component("vipAccountInfo",{template:i(/*! ../../html/order/vip-account-info.html */143),controller:rd,bindings:{selectedAccount:"="}}).service("PlaceOrderService",Wu);var nd=function(e){function t(t,i,r){var n=e.call(this,t,r)||this;return n.$uibModalInstance=t,n.errorMsg=i,n.focus=r,n.msg=i,n}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".error-alert")},t.prototype.ok=function(){this.$uibModalInstance.close()},t.$inject=["$uibModalInstance","errorMsg","focus"],t}(Co),od=function(e){function t(t,i,r){var n=e.call(this,t,r)||this;return n.$uibModalInstance=t,n.successMsg=i,n.focus=r,n.msg=i,n.nextElements=["button.ok-button"],n.isEnablePreventEnterEvent=!0,n}return ne(t,e),t.prototype.initModal=function(){var e,t=this;this.nextElements.some(function(i){return e=t.modal.find(i),t.focusFactory.tabKey(e)})},t.prototype.setModalElement=function(){this.modal=angular.element(".success-alert")},t.prototype.ok=function(){this.$uibModalInstance.close()},t.$inject=["$uibModalInstance","successMsg","focus"],t}(Po),sd=function(e){function t(t,i,r){var n=e.call(this,t,r)||this;return n.$uibModalInstance=t,n.errorMsgList=i,n.focus=r,n.msgList=i,n}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".multiple-error-alert")},t.prototype.ok=function(){this.$uibModalInstance.close()},t.$inject=["$uibModalInstance","errorMsgList","focus"],t}(Co),ad=function(e){function t(t,i,r,n){var o=e.call(this,t,i)||this;return o.$uibModalInstance=t,o.focus=i,o.orderData=r,o.$filter=n,o.priceFilter=n("price"),o.priceDigit=2,o}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".place-order-equity-confirmation")},t.prototype.confirm=function(){this.$uibModalInstance.close()},t.prototype.getSymbol=function(){return this.orderData.isNvdr?this.orderData.symbol+"-R":this.orderData.symbol},t.prototype.getSide=function(){return Be.lookup[this.orderData.side]},t.prototype.getPriceType=function(){return Ge.lookup[this.orderData.priceType]},t.prototype.getValidity=function(){return Ke.lookup[this.orderData.condition]},t.prototype.getTotalAmount=function(){return this.isLimitPriceType()?this.priceFilter(this.orderData.price*this.orderData.volume,this.priceDigit):"N/A"},t.prototype.isLimitPriceType=function(){return this.getPriceType()===Ge.LIMIT},t.prototype.isDayValidity=function(){return this.getValidity()===Ke.DAY},t.$inject=["$uibModalInstance","focus","orderData","$filter"],t}(Oo),cd=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this,t,i)||this;return c.$uibModalInstance=t,c.focus=i,c.$filter=r,c.orderData=n,c.priceDigit=o,c.stopOrderPriceDigit=s,c.orderPosition=a,c.priceFilter=r("price"),c}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".place-order-derivatives-confirmation")},t.prototype.confirm=function(){this.$uibModalInstance.close()},t.prototype.formatDerivPriceIfnoreDigit=function(e,t){return this.priceFilter(e,t)},t.prototype.getSide=function(){return Be.lookup[this.orderData.side]},t.prototype.getOrderPosition=function(){return this.orderPosition},t.prototype.getPrice=function(){return this.formatDerivPriceIfnoreDigit(this.orderData.price,this.priceDigit)},t.prototype.getPriceType=function(){return Ge.lookup[this.orderData.priceType]},t.prototype.getValidity=function(){return Ke.lookup[this.orderData.validityType]},t.prototype.getValidityFullname=function(){var e=Ke.lookup[this.orderData.validityType];switch(e){case Ke.DATE:return{name:e.fullname,detail:"["+this.orderData.validTillDate+"]"};case Ke.TIME:return{name:e.fullname,detail:"["+this.orderData.validTillTime.split(" ").join(" at ")+"]"};case Ke.SESSION:return{name:e.fullname,detail:"["+this.orderData.validTillSession+"]"};default:return{name:e.fullname}}},t.prototype.getStopCondition=function(){var e=Je.lookup[this.orderData.stopCondition];return void 0!==e?{hasStopCondition:!0,stopCondition:this.orderData.stopSeriesId+" - "+e.detail+" "+this.formatDerivPriceIfnoreDigit(this.orderData.stopPrice,this.stopOrderPriceDigit)}:{hasStopCondition:!1}},t.prototype.isLimitPriceType=function(){return this.getPriceType()===Ge.LIMIT},t.prototype.isDayValidity=function(){return this.getValidity()===Ke.DAY},t.$inject=["$uibModalInstance","focus","$filter","orderData","priceDigit","stopOrderPriceDigit","orderPosition"],t}(Oo),ld=function(e){function t(t,i,r,n,o){var s=e.call(this,i,t)||this;return s.focus=t,s.$uibModalInstance=i,s.equityOrderData=r,s.derivOrderData=n,s.isRequiredPin=o,s.pinNextFocusElement=[{parent:".modal-footer",focusElement:".confirm-button"},{parent:".modal-footer",focusElement:".cancel-button"}],s.modalPin="",s}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".cancel-order-confirmation")},t.prototype.confirm=function(){this.$uibModalInstance.close(this.modalPin)},t.prototype.isDisabledConfirmButton=function(){return this.isRequiredPin&&0===this.modalPin.length},t.prototype.hasEquityOrder=function(){return this.equityOrderData&&this.equityOrderData.length>0},t.prototype.hasDerivOrder=function(){return this.derivOrderData&&this.derivOrderData.length>0},t.prototype.isShouldShowPin=function(){return this.isRequiredPin},t.$inject=["focus","$uibModalInstance","equityOrderData","derivOrderData","isRequiredPin"],t}(Oo),ud=function(e){function t(t,i,r,n){var o=e.call(this,i,t)||this;return o.focus=t,o.$uibModalInstance=i,o.orderData=r,o.isRequiredPin=n,o.pinNextFocusElement=[{parent:".modal-footer",focusElement:".confirm-button"},{parent:".modal-footer",focusElement:".cancel-button"}],o.modalPin="",o.confirmChangeList=[],o.appendToConfirmChangeList(),o}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".change-order-confirmation")},t.prototype.confirm=function(){this.$uibModalInstance.close(this.modalPin)},t.prototype.isDisabledConfirmButton=function(){return this.isRequiredPin&&0===this.modalPin.length},t.prototype.appendToConfirmChangeList=function(){this.confirmChangeList.push(Ai.orderNo(this.orderData.orderNo)),void 0!==this.orderData.newPrice&&this.orderData.currentPriceType.isEqual(Ge.LIMIT)&&this.confirmChangeList.push(Ai.price(this.orderData.newPrice)),void 0!==this.orderData.newVolume&&this.confirmChangeList.push(Ai.volume(this.orderData.newVolume))},t.$inject=["focus","$uibModalInstance","orderData","isRequiredPin"],t}(Oo),dd=function(){function e(e,t){this.$uibModalInstance=e,this.warningMsgList=t}return e.prototype.confirm=function(){this.$uibModalInstance.close()},e.prototype.cancel=function(){this.$uibModalInstance.dismiss()},e.$inject=["$uibModalInstance","warningMsgList"],e}(),hd=function(){function e(){}return e}(),pd=function(){function e(){}return e}(),md=function(){function e(e,t){this.$scope=e,this.orderStatusService=t}return e.$inject=["$scope","OrderStatusService"],e}(),vd=function(){function e(e,t){this.$uibModalInstance=e,this.whatsNewInfo=t,this.version=t.activeVersion,this.messageList=t.message.split("\n")}return e.prototype.ok=function(){this.$uibModalInstance.close()},e.$inject=["$uibModalInstance","whatsNewInfo"],e}(),fd=function(){function e(e){this.$uibModalInstance=e,this.agreeBox=!1}return e.prototype.getFocusButton=function(){var e=this.getModalElement();return this.agreeBox?e.find(".confirm-button"):e.find(".cancel-button")},e.prototype.isAgree=function(){return this.agreeBox},e.prototype.confirm=function(){this.isAgree()&&this.$uibModalInstance.close()},e.prototype.cancel=function(){this.$uibModalInstance.dismiss()},e}(),yd=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.$uibModalInstance=t,n.focus=i,n.$window=r,n.focusFactory=i,n}return ne(t,e),t.prototype.gotoInstruction=function(){var e="http://www.settrade.com/streaming";this.$window.open(e)},t.prototype.clickAgree=function(){var e=this.getFocusButton();this.focusFactory.tabKey(e)},t.prototype.getModalElement=function(){return angular.element(".multi-order-disclaimer-alert")},t.$inject=["$uibModalInstance","focus","$window"],t}(fd),gd=function(){function e(e,t){var i=this;this.$uibModalInstance=e,this.orderResultData=t,this.submitOrderAmount=0,this.errorAmount=0,this.warningAmount=0,this.orderResultData.forEach(function(e){e.isSuccess?i.submitOrderAmount++:e.isWarnning?i.warningAmount++:i.errorAmount++})}return e.prototype.close=function(){this.$uibModalInstance.dismiss()},e.$inject=["$uibModalInstance","orderResultData"],e}(),Sd=function(){function e(){this.name="",this.list=[]}return e}(),bd=function(){function e(){this.name="",this.list=[]}return e}(),Cd=function(){function e(){this.list=[]}return e.prototype.isSuccess=function(){return"T"===this.status},e.prototype.isWaiting=function(){return"W"===this.status},e.prototype.isError=function(){return"F"===this.status},e}(),Ed=function(){function e(){this.list=[]}return e.prototype.isSuccess=function(){return"T"===this.status},e.prototype.isWaiting=function(){return"W"===this.status},e.prototype.isError=function(){return"F"===this.status},e}(),Ad=function(){function e(){}return e}(),wd=function(){function e(){}return e}(),Td=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.init=function(e){this.side=e.side,this.symbol=e.symbol,this.isNVDR=e.isNVDR,this.volume=e.volume,this.icebergVolume=e.icebergVolume,this.price=e.price,this.priceType=e.priceType,this.validity=e.validity},t}(Ad),Dd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.init=function(e){this.isChecked=!1,this.isSuccess=e.isSuccess,this.isWarnning=e.isWarnning,this.message=e.message,this.side=e.side,this.symbol=e.symbol,this.isNVDR=e.isNVDR,this.volume=e.volume,this.icebergVolume=e.icebergVolume,this.price=e.price,this.priceType=e.priceType,this.validity=e.validity},t}(Td),Id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.init=function(e){this.side=e.side,this.position=e.position,this.symbol=e.symbol,this.volume=e.volume,this.icebergVolume=e.icebergVolume,this.price=e.price,this.priceType=e.priceType,this.validity=e.validity},t}(wd),Pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.init=function(e){this.isChecked=!1,this.isSuccess=e.isSuccess,this.isWarnning=e.isWarnning,this.message=e.message,this.side=e.side,this.position=e.position,this.symbol=e.symbol,this.volume=e.volume,this.icebergVolume=e.icebergVolume,this.price=e.price,this.priceType=e.priceType,this.validity=e.validity},t}(Id),Od=function(){function e(e,t,i,r,n){this.itpService=e,this.$q=t,this.itpdService=i,this.mongoService=r,this.userInfoService=n}return e.prototype.placeEquityOrder=function(e,t,i,r){for(var n=this,o=[],s=[],a=[],c=[],l=0;l<e.length;l++)l<25?o.push(e[l]):s.push(e[l]);var u=[],d=this.generateRequestPlaceEquityOrder(o,t,i,r),h=this.itpService.placeEquityMultiOrder(d).then(function(e){a=n.parsePlaceEquityResponseMessage(e,o)});if(u.push(h),s.length>0){var p=this.generateRequestPlaceEquityOrder(s,t,i,r),m=this.itpService.placeEquityMultiOrder(p).then(function(e){c=n.parsePlaceEquityResponseMessage(e,s)});u.push(m)}return this.$q.all(u).then(function(){var e=a.concat(c);return e})},e.prototype.generateRequestPlaceEquityOrder=function(e,t,i,r){var n=new Ut;return n.txtPin=t,n.accountNo=i.accountNo,n.txtClientType=i.clientType,r&&n.setConfirmWarn(),e.forEach(function(e){n.appendOrder(e)}),n},e.prototype.parsePlaceEquityResponseMessage=function(e,t){
for(var i=[],r=e.split(hi.LV2),n=r[3],o=5;o<5+parseInt(n);o++){var s=r[o].split(hi.LV1),a="T"===s[0],c="W"===s[0],l=s[1],u=new Td;u.init(t[o-5]),u.isSuccess=a,u.isWarnning=c,u.message=l,a&&(u.message="Request Submitted"),i.push(u)}return i},e.prototype.placeDerivativesOrder=function(e,t,i,r){for(var n=this,o=[],s=[],a=[],c=[],l=0;l<e.length;l++)l<25?o.push(e[l]):s.push(e[l]);var u=[],d=this.generateRequestPlaceDerivativesOrder(o,t,i,r),h=this.itpdService.placeDerivativesMultiOrder(d).then(function(e){a=n.parsePlaceDerivativesResponseMessage(e,o)});if(u.push(h),s.length>0){var p=this.generateRequestPlaceDerivativesOrder(s,t,i,r),m=this.itpdService.placeDerivativesMultiOrder(p).then(function(e){c=n.parsePlaceDerivativesResponseMessage(e,s)});u.push(m)}return this.$q.all(u).then(function(){var e=a.concat(c);return e})},e.prototype.generateRequestPlaceDerivativesOrder=function(e,t,i,r){var n=new ei;return n.txtPin=t,n.accountNo=i.accountNo,e.forEach(function(e){n.appendOrder(e)}),r&&n.setConfirmWarn(),n},e.prototype.parsePlaceDerivativesResponseMessage=function(e,t){for(var i=[],r=e.split(hi.LV2),n=r[3],o=5;o<5+parseInt(n);o++){var s=r[o].split(hi.LV1),a="T"===s[0],c="W"===s[0],l=s[1],u=new Id;u.init(t[o-5]),u.isSuccess=a,u.isWarnning=c,u.message=l,a&&(u.message="Request Submitted"),i.push(u)}return i},e.prototype.updateMultiOrderSaveList=function(e,t){var i=this.parseUpdateMultiOrderSaveListRequest(e,t);return this.mongoService.updateMultiOrderSaveList(i)},e.prototype.parseUpdateMultiOrderSaveListRequest=function(e,t){var i=[];e.forEach(function(e){var t={};t.name=e.name,t.list=[],e.list.forEach(function(e){t.list.push(wi.parseForUpdate(e))}),i.push(t)});var r=[];return t.forEach(function(e){var t={};t.name=e.name,t.list=[],e.list.forEach(function(e){t.list.push(Ti.parseForUpdate(e))}),r.push(t)}),{equity:i,derivatives:r}},e.prototype.getEquityMultiOrderExtractData=function(e){var t=this;return this.itpService.getEquityMultiOrderExtractData(e).then(function(e){var i=t.parseEquityMultiOrderExtractResponse(e);if(i.isError()){var r=new Up(i.errorMsg);return t.$q.reject(r)}return t.$q.resolve(i)},function(e){return t.$q.reject(e)})},e.prototype.parseEquityMultiOrderExtractResponse=function(e){var t=new Cd,i=e.split(hi.LV2);if(t.status=i[2],t.isSuccess())for(var r=parseInt(i[3]),n=5;n<5+r;n++){var o=i[n].split(hi.LV1),s=new wi;s.side=Be.lookup[o[0]],s.isCheck=!0,s.symbol=o[1],s.isNVDR=1===parseInt(o[2]),s.volume=yt.formatVolume(yt.toNumberOrZero(o[3])),s.price=yt.formatPrice(yt.toNumberOrZero(o[4]),2),s.priceType=Ge.lookup[o[5]],s.validity=Ke.lookup[o[6]],s.icebergVolume=yt.formatVolume(yt.toNumberOrZero(o[7])),s.calculateAmount(),t.list.push(s)}else t.isError()?t.errorMsg=i[5]:t.isWaiting()&&(t.waitingMsg=i[5]);return t},e.prototype.getDerivativesMultiOrderExtractData=function(e){var t=this;return this.itpdService.getDerivativesMultiOrderExtractData(e).then(function(e){var i=t.parseDerivativesMultiOrderExtractResponse(e);if(i.isError()){var r=new Up(i.errorMsg);return t.$q.reject(r)}return t.$q.resolve(i)},function(e){return t.$q.reject(e)})},e.prototype.parseDerivativesMultiOrderExtractResponse=function(e){var t=new Ed,i=e.split(hi.LV2);if(t.status=i[2],t.isSuccess())for(var r=parseInt(i[3]),n=5;n<5+r;n++){var o=i[n].split(hi.LV1),s=new Ti;s.side=Be.lookup[o[1]],s.isCheck=!0,s.symbol=o[0],s.volume=yt.formatVolume(yt.toNumberOrZero(o[2])),s.price=yt.formatPrice(yt.toNumberOrZero(o[3]),yt.toNumberOrZero(o[8])),s.position=Ye.lookup[o[4]],s.position.isEqual(Ye.AUTO)&&!this.userInfoService.enableAutoPosition&&(s.position=Ye.OPEN),s.priceType=Ge.lookup[o[5]],s.validity=Ke.lookup[o[6]],s.icebergVolume=yt.formatVolume(yt.toNumberOrZero(o[7])),t.list.push(s)}else t.isError()?t.errorMsg=i[5]:t.isWaiting()&&(t.waitingMsg=i[5]);return t},e.$inject=["ITPService","$q","ITPDService","MongoService","UserInfoService"],e}(),kd=function(){function e(){}return e.prototype.$onInit=function(){this.order&&this.order.message&&(this.splitMessage=this.order.message.split("\n"),this.message=""===this.splitMessage[0]?this.splitMessage.length>=2&&""!==this.splitMessage[1]?this.splitMessage[1]:"Error":this.splitMessage[0],this.isToolTipEnable=this.splitMessage.length>1||this.splitMessage[0].length>35,this.showPrice=this.order.priceType.value===Ge.LIMIT.value?this.order.price:this.order.priceType.fullname,this.showSymbol=this.order.isNVDR===!0?this.order.symbol+"-R":this.order.symbol)},e.prototype.getColor=function(){if(this.order)return this.order.isSuccess?"success":this.order.isWarnning?"warning":"error"},e.$inject=[],e}(),$d=function(){function e(e,t){var i=this;this.$uibModalInstance=e,this.orderResultData=t,this.submitOrderAmount=0,this.errorAmount=0,this.warningAmount=0,this.orderResultData.forEach(function(e){e.isSuccess?i.submitOrderAmount++:e.isWarnning?i.warningAmount++:i.errorAmount++})}return e.prototype.close=function(){this.$uibModalInstance.dismiss()},e.$inject=["$uibModalInstance","orderResultData"],e}(),Ld=function(){function e(){}return e.prototype.$onInit=function(){this.order&&this.order.message&&(this.splitMessage=this.order.message.split("\n"),this.message=""===this.splitMessage[0]?this.splitMessage.length>=2&&""!==this.splitMessage[1]?this.splitMessage[1]:"Error":this.splitMessage[0],this.isToolTipEnable=this.splitMessage.length>1||this.splitMessage[0].length>35,this.showPrice=this.order.priceType.value===Ge.LIMIT.value?this.order.price:this.order.priceType.fullname)},e.prototype.getColor=function(){if(this.order)return this.order.isSuccess?"success":this.order.isWarnning?"warning":"error"},e.$inject=[],e}(),Nd=function(){function e(e,t,i){this.$uibModalInstance=e,this.favouriteService=t,this.currentSettings=i,this.favouriteDropdownItemList=this.favouriteService.getFavouriteDropdownItemListWithHeader(),this.currentConfig=i,this.setActiveList=[],this.initialSETActiveList()}return e.prototype.confirm=function(){this.$uibModalInstance.close(this.currentConfig)},e.prototype.cancel=function(){this.$uibModalInstance.dismiss()},e.prototype.initialSETActiveList=function(){var e=this,t=[".Most Active Value",".Most Active Volume",".Top Gainer",".Top Loser",".Top Swing",".SET50",".SET100",".sSET",".SETHD",".mai"];t.forEach(function(t){var i=e.favouriteService.getEquityCategoryItemsByName(t);i&&e.setActiveList.push(i)})},e.prototype.onCheckFilterByFavourite=function(){this.currentConfig.byCriteriaConfig.selectedFilterFavourite&&this.currentConfig.byCriteriaConfig.selectedFilterFavourite!==this.favouriteDropdownItemList[0]||this.onFavoriteChange(this.favouriteDropdownItemList[1])},e.prototype.onFavoriteChange=function(e){this.currentConfig.byCriteriaConfig.selectedFilterFavourite=e},e.prototype.onSETActiveListChange=function(e){this.currentConfig.byMarketConfig.selectedActiveList=e},e.prototype.onValueKeyPress=function(e){this.detectValue(e)},e.prototype.onVolumeKeyPress=function(e){this.detectVolume(e)},e.prototype.detectValue=function(e){String.fromCharCode(e.charCode).match(/[0-9.]/)||e.preventDefault()},e.prototype.detectVolume=function(e){String.fromCharCode(e.charCode).match(/[0-9]/)||e.preventDefault()},Object.defineProperty(e.prototype,"isFilterBySETActiveList",{get:function(){return this.currentConfig.byMarketConfig.isFilterBySETActiveList},set:function(e){this.currentConfig.byMarketConfig.isFilterBySETActiveList=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFilterBySETSecuritiesType",{get:function(){return this.currentConfig.byMarketConfig.isFilterBySETSecuritiesType},set:function(e){this.currentConfig.byMarketConfig.isFilterBySETSecuritiesType=e},enumerable:!0,configurable:!0}),e.$inject=["$uibModalInstance","FavouriteService","currentSettings"],e}(),Md=function(){function e(){}return e.SENSE="sense",e}(),Rd=function(){function e(e){this.value=e}return e.prototype.isNone=function(){return"none"===this.value},e.prototype.isChangePage=function(){return"change_page"===this.value},e.prototype.isChangePageAndSymbol=function(){return"change_page_and_symbol"===this.value},e.prototype.isPopup=function(){return"popup"===this.value},e.prototype.isNewsModal=function(){return"news_modal"===this.value},e.NONE=new e("none"),e.CHG_PAGE=new e("change_page"),e.CHG_PAGE_AND_SYMBOL=new e("change_page_and_symbol"),e.POPUP=new e("popup"),e.NEWS_MODAL=new e("news_modal"),e}(),_d=function(){function e(){}return e.createGoToMarketPageAction=function(e){var t={};return t.displayText="Watch",t.actionType=Zo.NON_STD_PAGE_MARKET,t.symbol=e,t},e.createGoToQuotePageAction=function(e){var t={};return t.displayText="Quote",t.actionType=Zo.PAGE_QUOTE,t.symbol=e,t},e.createBuySellAction=function(e){var t={};return t.displayText="Buy/Sell",t.actionType=Zo.PAGE_BUYSELL,t.symbol=e,t},e.createNewsModalAction=function(e,t,i){var r={};return r.displayText="Read More..",r.actionType=Zo.NON_STD_NEWS_MODAL,r.symbol=i,r.nonStdNewsTarget={contentId:t,source:e},r},e.createExternalPopupAction=function(e){var t={};return t.displayText="Read More..",t.actionType=Zo.OPEN_LINK,t.linkUrl=e,t},e.createBaseNotiMessage=function(e){var t=e.param;void 0===t.display_type&&(t.display_type=t.sense_type);var i=new os;return i.id=e.id,i.isLiked=e.isLiked,i.senseActions=[],i.hashTag=t.hashtag,i.time=moment.tz(moment(e.time,"YYYYMMDDHHmmss"),"Asia/Bangkok"),i.alert=e.alert,i.detail=t,i.originalDisplayType=t.display_type,i},e.parseSenseGreeting=function(t){var i=e.createBaseNotiMessage(t);return i.originalSenseType=Xo.GREETING,i.originalSenseSubType=is.NO_SUB_TYPE,i.type=Ud.SENSE_INBOX_DETAIL,i.id="",i.senseActions=[],i},e.parseSenseStockAlert=function(t,i){var r=e.createBaseNotiMessage(t),n=t.param;return r.originalSenseType=Xo.STOCK_ALERT,r.originalSenseSubType=n.sense_subtype,r.type=Ud.SENSE_INBOX,n.sense_subtype===rs.BIG_LOT?r.senseActions=[e.createGoToQuotePageAction(n.symbol),e.createBuySellAction(n.symbol)]:r.senseActions=[e.createGoToMarketPageAction(n.symbol),e.createBuySellAction(n.symbol)],r},e.parseSenseSETNews=function(t){var i=e.createBaseNotiMessage(t);i.originalSenseType=Xo.SET_NEWS,i.originalSenseSubType=is.NO_SUB_TYPE,i.type=Ud.SENSE_INBOX_DETAIL;var r=t.param;return i.senseActions=[e.createNewsModalAction(Wn.SET_NEWS,r.content_id)],i},e.parseSenseMoneyChannel=function(t){var i=e.createBaseNotiMessage(t);i.originalSenseType=Xo.MONEY_CHANNEL,i.originalSenseSubType=is.NO_SUB_TYPE,i.type=Ud.SENSE_INBOX_DETAIL;var r=t.param;return i.senseActions=[e.createNewsModalAction(Wn.MONEY_CHANNEL,r.content_id)],i},e.parseSenseTechnicalAlert=function(t,i){var r=t.param,n=e.createBaseNotiMessage(t);return n.originalSenseType=Xo.TECHNICAL_ALERT,n.originalSenseSubType=r.sense_subtype,n.type=Ud.SENSE_INBOX_DETAIL,n.senseActions=[e.createGoToQuotePageAction(r.symbol),e.createBuySellAction(r.symbol)],n},e.parseSenseLastTradingDateAlert=function(t,i){var r=e.createBaseNotiMessage(t);return r.originalSenseType=Xo.LAST_TRADING_DATE_ALERT,r.originalSenseSubType=is.NO_SUB_TYPE,r.type=Ud.SENSE_INBOX,r.senseActions=[],r},e.parseSenseTurnoverList=function(t){var i=e.createBaseNotiMessage(t);return i.originalSenseType=Xo.TURNOVER_LIST,i.originalSenseSubType=is.NO_SUB_TYPE,i.type=Ud.SENSE_INBOX,i.action=Rd.NONE,i.senseActions=[],i},e.parseSenseTodayRecommendedStock=function(t,i){var r=e.createBaseNotiMessage(t);return r.originalSenseType=Xo.TODAY_RECOMMENDED_STOCK,r.originalSenseSubType=is.NO_SUB_TYPE,r.type=Ud.SENSE_INBOX_RECOMMEND,r.senseActions=[e.createExternalPopupAction(i.activingMarketDataMMHost+"/realtime/sense/senseDetail.jsp?sourceID=today_recommended_stock&contentID=null&symbol=null")],r},e.parseSenseStockCalendar=function(t,i){var r=t.param,n=e.createBaseNotiMessage(t);return n.originalSenseType=Xo.STOCK_CALENDAR,n.originalSenseSubType=is.NO_SUB_TYPE,n.type=Ud.SENSE_INBOX,n.senseActions=[e.createExternalPopupAction(i.activingMarketDataMMHost+"/realtime/sense/senseDetail.jsp?sourceID=stock_calendar&contentID="+r.content_id),e.createBuySellAction(r.symbol)],n},e.parseSenseBrokerStockAnnouncement=function(t){var i=e.createBaseNotiMessage(t);return i.originalSenseType=Xo.BROKER_STOCK_ANNOUNCEMENT,i.originalSenseSubType=is.NO_SUB_TYPE,i.type=Ud.SENSE_INBOX,i.senseActions=[],i},e.parseSenseBrokerStockImage=function(t){var i=e.createBaseNotiMessage(t);i.originalSenseType=Xo.BROKER_STOCK_IMAGE,i.originalSenseSubType=is.NO_SUB_TYPE;t.param;return i.type=Ud.SENSE_INBOX_DETAIL,i.senseActions=[],i},e.parseSenseBrokerResearch=function(t){var i=e.createBaseNotiMessage(t),r=t.param;return i.originalSenseType=Xo.BROKER_RESEARCH,i.originalSenseSubType=is.NO_SUB_TYPE,i.type=Ud.SENSE_INBOX_DETAIL,i.senseActions=[e.createExternalPopupAction(r.url_pdf)],i},e.parseSenseIAAConsensus=function(t){var i=e.createBaseNotiMessage(t);i.originalSenseType=Xo.IAA_CONSENSUS,i.originalSenseSubType=is.NO_SUB_TYPE;var r=t.param;return i.type=Ud.SENSE_INBOX_IAA_CONSENSUS,i.senseActions=[e.createExternalPopupAction(r.url_link)],i},e.parseSenseStandardMessage=function(t,i,r,n){var o=e.createBaseNotiMessage(t),s=t.param;o.originalSenseType=s.sense_type,o.originalSenseSubType=is.NO_SUB_TYPE;var a=t.param.display_type;switch(a){case Jo.STANDARD_TEXT:o.type=Ud.SENSE_INBOX;break;case Jo.STANDARD_IMAGE:o.type=Ud.SENSE_INBOX_DETAIL;break;case Jo.STANDARD_TEXT_IMAGE:o.type=Ud.SENSE_INBOX_DETAIL}return o.senseActions=e.createStandardAction(t),o},e.createStandardAction=function(e){var t=e.param.actions||[],i=[];return t.forEach(function(e,t){var r=new ns;r.displayText=e.display_text,r.actionType=e.action_type,r.symbol=e.symbol,r.screenerId=e.screener_id,r.linkUrl=e.link_url,r.redirectSourceId=e.source_id,r.redirectContentId=e.content_id,i.push(r)}),i},e.parsePullNotification=function(t,i,r,n){var o=[];return t.forEach(function(t){var s;if(t.type===Md.SENSE){var a=t.param;switch(a.display_type){case Jo.TODAY_RECOMMENDED_STOCK:s=e.parseSenseTodayRecommendedStock(t,i);break;case Jo.GREETING:s=e.parseSenseGreeting(t);break;case Jo.STOCK_CALENDAR:s=e.parseSenseStockCalendar(t,i);break;case Jo.TURNOVER_LIST:s=e.parseSenseTurnoverList(t);break;case Jo.SET_NEWS:s=e.parseSenseSETNews(t);break;case Jo.BROKER_RESEARCH:s=e.parseSenseBrokerResearch(t);break;case Jo.STOCK_ALERT:s=e.parseSenseStockAlert(t,r);break;case Jo.LAST_TRADING_DATE_ALERT:s=e.parseSenseLastTradingDateAlert(t,r);break;case Jo.TECHNICAL_ALERT:s=e.parseSenseTechnicalAlert(t,r);break;case Jo.BROKER_STOCK_IMAGE:s=e.parseSenseBrokerStockImage(t);break;case Jo.BROKER_STOCK_ANNOUNCEMENT:s=e.parseSenseBrokerStockAnnouncement(t);break;case Jo.MONEY_CHANNEL:s=e.parseSenseMoneyChannel(t);break;case Jo.IAA_CONSENSUS:s=e.parseSenseIAAConsensus(t);break;case Jo.STANDARD_TEXT:case Jo.STANDARD_IMAGE:case Jo.STANDARD_TEXT_IMAGE:s=e.parseSenseStandardMessage(t,i,r,n);break;default:return}o.push(s)}}),o},e.getNotificationAction=function(e){switch(e){case Zo.OPEN_LINK:case Zo.SENSE_REDIRECT:case Zo.PAGE_STOCK_SCREENER:return Rd.POPUP;case Zo.PAGE_BUYSELL:return Rd.NONE;case Zo.PAGE_QUOTE:return Rd.CHG_PAGE_AND_SYMBOL;default:return Rd.NONE}},e.getNotificationActionAndTargetFromSenseAction=function(e,t,i,r){switch(e.action_type){case Zo.OPEN_LINK:var n=e;return{action:Rd.POPUP,actionTarget:n.link_url,symbolTarget:""};case Zo.SENSE_REDIRECT:var o=e;return{action:Rd.POPUP,actionTarget:t.activingMarketDataMMHost+"/realtime/sense/senseDetail.jsp?sourceID="+o.source_id+"&contentID="+o.content_id+"&symbol="+o.symbol,symbolTarget:""};case Zo.PAGE_STOCK_SCREENER:return{action:Rd.NONE,actionTarget:"",symbolTarget:""};case Zo.PAGE_QUOTE:var s=e;return{action:Rd.CHG_PAGE_AND_SYMBOL,actionTarget:r.getPageId("Quote"),symbolTarget:s.symbol};case Zo.PAGE_BUYSELL:return{action:Rd.NONE,actionTarget:"",symbolTarget:""};default:return{action:Rd.NONE,actionTarget:"",symbolTarget:""}}},e.parseEquityOrderPush=function(e){var t=new os,i=""===e.nvdrFlag?e.symbol:""+e.symbol+e.nvdrFlag;return t.alert="Order No. "+e.orderNo+" "+e.status+" : "+Be.lookup[e.side].fullname+" "+i+" "+p(e.matchedVolume),t.type=Ud.ORDER_ALERT_INBOX,t.hashTag="#MatchedOrderAlert",t.time=moment.tz(new Date,"Asia/Bangkok"),t},e.parseDerivativesOrderPush=function(e){var t=new os;return t.alert="Order No. "+e.orderNo+" "+e.status+" : "+Be.lookup[e.side].derivativeFullname+" "+Ye.lookup[e.position].fullname+" "+e.seriesID+" "+p(e.matchedVolume),t.type=Ud.ORDER_ALERT_INBOX,t.hashTag="#MatchedOrderAlert",t.time=moment.tz(new Date,"Asia/Bangkok"),t},e.parsePriceAlert=function(e){var t=new os;return t.alert="["+e.symbol+"] : Price has reached "+e.snapShotPriceFormatted+" (Price "+e.condition.getShowSide()+" "+e.value+")",t.type=Ud.PRICE_ALERT_INBOX,t.hashTag="#PriceVolAlert",t.time=moment.tz(new Date,"Asia/Bangkok"),t.detail=e,t},e.parseVolAlert=function(e){var t=new os;return t.alert="["+e.symbol+"] : Volume has reached "+e.snapShotVolumeFormatted+" (Vol. "+e.condition.getShowSide()+" "+e.value+")",t.type=Ud.VOLUME_ALERT_INBOX,t.hashTag="#PriceVolAlert",t.time=moment.tz(new Date,"Asia/Bangkok"),t.detail=e,t},e.parseNewsAlert=function(e,t){var i=new os;i.alert="["+e.instrumentID+"] : "+e.title,i.type=Ud.NEWS_INBOX,i.hashTag="#NewsAlert",i.time=moment.tz(new Date,"Asia/Bangkok");var r=({contentId:e.id,source:Wn.lookup[e.source]},Wn.lookup[e.source]),n=this.createNewsModalAction(r,e.id,e.instrumentID?e.instrumentID:"");return i.senseActions=[n],i},e}(),Vd=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){this.signal.dispatch(angular.copy(e))},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),Bd=function(){function e(e,t,i,r){this.enable=t,this.value=i,this.symbol=r,this.isActive=!0,this.numberValue=""===i?Number.NaN:parseFloat(i.replace(/[,]/g,"")),this.condition=wr.lookup[""+e]}return e.prototype.isMatchedPrice=function(e){if(this.isActive&&e.hasSummaryData()){if(this.condition.isEqual(wr.PriceLessEqual)&&e.summary.lastDone<=this.numberValue)return!0;if(this.condition.isEqual(wr.PriceMoreEqual)&&e.summary.lastDone>=this.numberValue)return!0}return!1},e.prototype.isMatchedVolume=function(e){return!!(this.isActive&&e.hasSummaryData()&&this.condition.isEqual(wr.VolumeMoreEqual)&&e.summary.totalVolume>=this.numberValue)},e.prototype.isByPriceCondition=function(){return this.condition.isEqual(wr.PriceLessEqual)||this.condition.isEqual(wr.PriceMoreEqual)},e.prototype.isByVolumeCondition=function(){return this.condition.isEqual(wr.VolumeMoreEqual)},e.prototype.setUnActive=function(){this.isActive=!1},e}(),xd=function(){function e(e,t){this.notiConfiguration=e,this.userRole=t,this.priceVolumeEnabledRules=new ut([]),this.newsRule=new ut([])}return e.prototype.isEnableSense=function(){return this.userRole===tt.INVESTOR&&this.notiConfiguration.senseConfiguration.enable},e.prototype.isEnableOrderAlert=function(){return this.userRole===tt.INVESTOR&&this.notiConfiguration.notificationConfiguration.enable&&this.notiConfiguration.notificationConfiguration.orderAlertConfiguration.enable},e.prototype.isEnableOrderAlertPopup=function(){return this.userRole===tt.INVESTOR&&this.notiConfiguration.notificationConfiguration.enable&&this.notiConfiguration.notificationConfiguration.orderAlertConfiguration.enable&&this.notiConfiguration.notificationConfiguration.orderAlertConfiguration.enablePopUp},e.prototype.isEnableSoundAlert=function(){return this.notiConfiguration.notificationConfiguration.enable&&this.notiConfiguration.notificationConfiguration.enableSoundAlert},e.prototype.isEnablePriceVol=function(){return this.notiConfiguration.notificationConfiguration.enable&&this.notiConfiguration.notificationConfiguration.priceVolumeAlertConfiguration.enable},e.prototype.isEnablePriceVolPopUp=function(){return this.notiConfiguration.notificationConfiguration.enable&&this.notiConfiguration.notificationConfiguration.priceVolumeAlertConfiguration.enable&&this.notiConfiguration.notificationConfiguration.priceVolumeAlertConfiguration.enablePopUp},e.prototype.isEnableNews=function(){return this.notiConfiguration.notificationConfiguration.enable&&this.notiConfiguration.notificationConfiguration.newsConfiguration.rules&&this.notiConfiguration.notificationConfiguration.newsConfiguration.rules.length>0},e.prototype.createPriceVolRulesMap=function(){},e}(),Fd=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S,b){this.$interval=e,this.allNotificationSettingChangeEvent=t,this.userInfoService=i,this.mmService=r,this.streamingAttribute=n,this.menuService=o,this.mongoService=s,this.accountService=a,this.equityOrderPushPublishSubscriber=c,this.derivativesOrderPushPublishSubscriber=l,this.alertService=u,this.$filter=d,this.snapshotPublishSubscriber=h,this.newsPublishSubscriber=p,this.instrumentService=m,this.$q=v,this.newNotificationEvent=f,this.senseAPIService=y,this.soundService=g,this.urlStore=S,this.$timeout=b,this.onAllNotificationSettingChangeCallBack=this.onAllNotificationSettingChange.bind(this),this.UPDATE_SENSE_ACTION_INTERVAL=5e3,this.onReceiveEquityOrderPushCallBack=this.onReceiveEquityOrderPush.bind(this),this.onReceiveDerivativesOrderPushCallBack=this.onReceiveDerivativesOrderPush.bind(this),this.onRecieveSnapshotCallBack=this.onRecieveSnapshot.bind(this),this.onRecieveNewsCallBack=this.onRecieveNews.bind(this),this.sendUpdateSenseNotificationActionCallback=this.sendUpdateSenseNotificationAction.bind(this),this.PULL_NOTIFICATION_INTERVAL=3e5,this.unreadMessageCount=0,this.filterVolume=this.$filter("volume"),this.filterPrice=this.$filter("price"),this.pullNotificationInbox=[],this.orderAlertNotificationInbox=[],this.priceVolumeAlertNotificationInbox=[],this.newsAlertNotificationInbox=[],this.allNotificationInbox=[],this.lastTotalVolumeOfSymbol=new ut(null),this.senseGreetingMsg="",this.senseGreetingDetail="",this.updateSenseNotiActionList=[],this.updateSenseActionTimeoutPromise=null}return e.prototype.intialNotificationService=function(e){this.lastTimeReadNotificationMessage=moment(e,"YYYYMMDDHHmmss"),this.allNotificationSettingChangeEvent.subscribe(this.onAllNotificationSettingChangeCallBack)},e.prototype.startUpdateSenseNotificationAction=function(){null===this.updateSenseActionTimeoutPromise&&(this.updateSenseActionTimeoutPromise=this.$timeout(this.sendUpdateSenseNotificationActionCallback,this.UPDATE_SENSE_ACTION_INTERVAL))},e.prototype.sendUpdateSenseNotificationAction=function(){var e=this;if(0!==this.updateSenseNotiActionList.length){var t=angular.copy(this.updateSenseNotiActionList);this.updateSenseNotiActionList=[],this.mmService.updateSenseNotificationMessageAction(t).then(function(i){if(!i.isSuccess)return void(e.updateSenseNotiActionList=t.concat(e.updateSenseNotiActionList))},function(i){e.updateSenseNotiActionList=t.concat(e.updateSenseNotiActionList)})["finally"](function(){e.updateSenseActionTimeoutPromise=null})}},e.prototype.sendNotificationGreeting=function(e){this.notiSetting&&!this.notiSetting.isEnableSense()&&e.senseConfiguration.enable&&this.senseAPIService.requestNotificationGreeting(this.senseGreetingMsg,this.senseGreetingDetail)},e.prototype.onAllNotificationSettingChange=function(e){this.sendNotificationGreeting(e),this.notiSetting&&(this.notiSetting.isEnableSense()&&this.stopSenseService(),this.notiSetting.isEnableOrderAlert()&&this.stopOrderAlert(),this.notiSetting.isEnablePriceVol()&&this.stopPriceVol(),this.notiSetting.isEnableNews()&&this.stopNewsAlert()),this.notiSetting=new xd(angular.copy(e),this.userInfoService.getApplicationRole()),this.notiSetting.isEnableSense()&&this.startSenseService(),this.notiSetting.isEnableOrderAlert()&&this.startOrderAlert(),this.notiSetting.isEnablePriceVol()&&this.startPriceVol(),this.notiSetting.isEnableNews()&&this.startNewsAlert()},e.prototype.startSenseService=function(){var e=this;this.pullSenseNotification(),this.pullNotificationTimer=this.$interval(function(){e.pullSenseNotification()},this.PULL_NOTIFICATION_INTERVAL)},e.prototype.stopSenseService=function(){this.pullNotificationTimer&&this.$interval.cancel(this.pullNotificationTimer)},e.prototype.startOrderAlert=function(){this.equityOrderPushPublishSubscriber.subscribe(this.accountService.accountEquityList,this.onReceiveEquityOrderPushCallBack),this.derivativesOrderPushPublishSubscriber.subscribe(this.accountService.accountDerivList,this.onReceiveDerivativesOrderPushCallBack)},e.prototype.stopOrderAlert=function(){this.equityOrderPushPublishSubscriber.unsubscribe(this.accountService.accountEquityList,this.onReceiveEquityOrderPushCallBack),this.derivativesOrderPushPublishSubscriber.unsubscribe(this.accountService.accountDerivList,this.onReceiveDerivativesOrderPushCallBack)},e.prototype.startPriceVol=function(){var e=this,t=[],i=[];this.notiSetting.notiConfiguration.notificationConfiguration.priceVolumeAlertConfiguration.rules.forEach(function(r){if(r.enable){var n=e.instrumentService.searchSymbolByBrokerLicense(r.symbol).then(function(i){t.push(r.symbol);var n=e.notiSetting.priceVolumeEnabledRules.value(r.symbol);n.push(new Bd(r.condition,r.enable,r.value,r.symbol)),e.notiSetting.priceVolumeEnabledRules.add(r.symbol,n)});i.push(n)}}),this.$q.all(i).then(function(){e.snapshotPublishSubscriber.subscribe(t,e.onRecieveSnapshotCallBack)})},e.prototype.stopPriceVol=function(){var e=this.notiSetting.priceVolumeEnabledRules.getAllKeys();this.snapshotPublishSubscriber.unsubscribe(e,this.onRecieveSnapshotCallBack)},e.prototype.startNewsAlert=function(){var e=this,t=[],i=[];this.notiSetting.notiConfiguration.notificationConfiguration.newsConfiguration.rules.forEach(function(r){if(r.enable){var n=e.instrumentService.searchSymbolByBrokerLicense(r.symbol).then(function(i){t.push(r.symbol);var n=e.notiSetting.newsRule.value(r.symbol);n.push(r),e.notiSetting.newsRule.add(r.symbol,n)});i.push(n)}}),this.$q.all(i).then(function(){e.newsPublishSubscriber.subscribe(t,e.onRecieveNewsCallBack)})},e.prototype.stopNewsAlert=function(){var e=this.notiSetting.newsRule.getAllKeys();this.newsPublishSubscriber.unsubscribe(e,this.onRecieveNewsCallBack)},e.prototype.updateLastTimeReadNotification=function(){this.mongoService.updateLastTimeReadNotificationMessage(),this.lastTimeReadNotificationMessage=moment.tz(new Date,"Asia/Bangkok"),this.processNotificationInbox()},e.prototype.pullSenseNotification=function(){var e=this;this.notiSetting.isEnableSense()&&this.mmService.requestNotification().then(function(t){t.isSuccess&&(e.pullNotificationInbox=e.parsePullNotification(t.shownNotiMessage),e.processNotificationInbox())})},e.prototype.processNotificationInbox=function(){var e=this.mergerAllNotification();e=this.sortNotification(e),this.allNotificationInbox=this.addDividedLineInNotificationList(e)},e.prototype.mergerAllNotification=function(){return this.pullNotificationInbox.concat(this.orderAlertNotificationInbox,this.priceVolumeAlertNotificationInbox,this.newsAlertNotificationInbox)},e.prototype.sortNotification=function(e){return e.sort(function(e,t){return e.time.isBefore(t.time)?-1:e.time.isAfter(t.time)?1:0}),e},e.prototype.addDividedLineInNotificationList=function(e){var t,i=this,r=[],n=!1;return this.unreadMessageCount=0,e.forEach(function(e){if(e.time.isAfter(i.lastTimeReadNotificationMessage)&&!n){var o=new os;o.type=Ud.UNREAD_LINE,o.alert="Unread messages below",r.push(o),n=!0}if(n&&i.unreadMessageCount++,!t){var s=new os;return s.type=Ud.LINE,s.alert=e.time.format("D MMM YYYY"),r.push(s),r.push(e),void(t=e)}if(!t.time.isSame(e.time,"day")){var a=new os;a.type=Ud.LINE,a.alert=e.time.format("D MMM YYYY"),r.push(a)}r.push(e),t=e}),r},e.prototype.parsePullNotification=function(e){return _d.parsePullNotification(e,this.streamingAttribute,this.menuService,this.urlStore)},e.prototype.onReceiveEquityOrderPush=function(e){if(e.isMatchedOrder){if(this.notiSetting.isEnableOrderAlertPopup()){var t=new qd;t.orderNo=e.orderNo,t.price=e.price,t.priceDigit=2,t.side=Be.lookup[e.side],t.status=e.status,t.symbol=e.symbol,t.systemType=mi.EQUITY,t.volume=e.matchedVolume,t.nvdrFlag=e.nvdrFlag,t.priceType=Ge.lookup[e.priceType],t.detailLink=this.getOrderDetailEquityLink(e),this.alertService.showNotificationOrderPopupAlert(t)}var i=_d.parseEquityOrderPush(e);this.newNotificationEvent.publish(i),this.orderAlertNotificationInbox.push(i),this.processNotificationInbox(),this.notiSetting.isEnableSoundAlert()&&this.soundService.playNotificationSound()}},e.prototype.getOrderDetailEquityLink=function(e){var t;return this.userInfoService.isInvestor()?t=this.getOrderDetailEquityInvestorUrl(e):this.userInfoService.isMarketRep()&&(t=this.getOrderDetailEquityMarketrepUrl(e)),t},e.prototype.getOrderDetailDerivativesLink=function(e){var t;return this.userInfoService.isInvestor()?t=this.getOrderDetailDerivativesInvestorUrl(e):this.userInfoService.isMarketRep()&&(t=this.getOrderDetailDerivativesMarketrepUrl(e)),t},e.prototype.getOrderDetailEquityInvestorUrl=function(e){var t=e.tradeDate.split("/").reverse().join("-"),i=this.accountService.getAccountByAccountNumberAndSystemType(e.accountNo,mi.EQUITY),r=e.accountNo&&i.frontType===fi.DGW?e.orderNo:e.orderNoSeos;return this.streamingAttribute.itpHost+"/daytradeflex/streamingOrderDetail.jsp?orderNo="+r+"&txtAccountNo="+e.accountNo+"&extOrderNo="+e.orderNoFis+"&tradeDate="+t+"&opener=streaming&txtTerminalType="+Xe},e.prototype.getOrderDetailEquityMarketrepUrl=function(e){var t=e.tradeDate.split("/").reverse().join("-");return this.streamingAttribute.itpHost+"/SEOS_MktOutstandingOrderDetail.jsp?orderNo="+e.orderNoSeos+"&txtAccountNo="+e.accountNo+"&tradeDate="+t+"&opener=streaming&txtTerminalType="+Xe},e.prototype.getOrderDetailDerivativesInvestorUrl=function(e){return this.streamingAttribute.derivHost+"/Derivatives/C15_OrderDetail.jsp?orderNo="+e.orderNo},e.prototype.getOrderDetailDerivativesMarketrepUrl=function(e){return this.streamingAttribute.derivHost+"/Derivatives/C16_OrderDetail.jsp?orderNo="+e.orderNo+"&accountNo="+e.accountNo},e.prototype.onReceiveDerivativesOrderPush=function(e){if(e.isMatchOrder){if(this.notiSetting.isEnableOrderAlertPopup()){var t=new qd;t.orderNo=""+e.orderNo,t.price=e.price,t.priceDigit=e.priceDigit,t.side=Be.lookup[e.side],t.status=e.status,t.symbol=e.seriesID,t.systemType=mi.DERIVATIVES,t.volume=e.matchedVolume,t.priceType=Ge.lookup[e.priceType],t.position=Ye.lookup[e.position],t.detailLink=this.getOrderDetailDerivativesLink(e),this.alertService.showNotificationOrderPopupAlert(t)}var i=_d.parseDerivativesOrderPush(e);this.newNotificationEvent.publish(i),this.orderAlertNotificationInbox.push(i),this.processNotificationInbox(),this.notiSetting.isEnableSoundAlert()&&this.soundService.playNotificationSound()}},e.prototype.onRecieveSnapshot=function(e){var t=this;if(this.processAndCheckIfSnapshotMatched(e)){var i=this.notiSetting.priceVolumeEnabledRules.value(e.instrumentID);i.forEach(function(i,r){if(i.isMatchedPrice(e)){var n=new jd;n.isPriceAlert=!0,n.instrumentType=e.instrumentType,n.symbol=i.symbol,n.condition=i.condition,n.value=t.filterPrice(i.numberValue,e.priceDigit),n.snapShotPriceFormatted=t.filterPrice(e.summary.lastDone,e.priceDigit),t.notiSetting.isEnablePriceVolPopUp()&&t.alertService.showNotificationPriceVolPopupAlert(n),t.notiSetting.isEnableSoundAlert()&&t.soundService.playNotificationSound();var o=_d.parsePriceAlert(n);t.newNotificationEvent.publish(o),t.priceVolumeAlertNotificationInbox.push(o),i.setUnActive(),t.notiSetting.priceVolumeEnabledRules.set(e.instrumentID,r,i)}if(i.isMatchedVolume(e)){var n=new jd;n.isVolAlert=!0,n.instrumentType=e.instrumentType,n.symbol=i.symbol,n.condition=i.condition,n.value=t.filterVolume(i.numberValue),n.snapShotVolumeFormatted=t.filterVolume(e.summary.totalVolume),t.notiSetting.isEnablePriceVolPopUp()&&t.alertService.showNotificationPriceVolPopupAlert(n),t.notiSetting.isEnableSoundAlert()&&t.soundService.playNotificationSound();var o=_d.parseVolAlert(n);t.newNotificationEvent.publish(o),t.priceVolumeAlertNotificationInbox.push(o),i.setUnActive(),t.notiSetting.priceVolumeEnabledRules.set(e.instrumentID,r,i)}}),this.processNotificationInbox()}},e.prototype.processAndCheckIfSnapshotMatched=function(e){if(e.hasSummaryData()){var t=this.lastTotalVolumeOfSymbol.value(e.instrumentID);
return null===t?(this.lastTotalVolumeOfSymbol.add(e.instrumentID,e.summary.totalVolume),!1):(this.lastTotalVolumeOfSymbol.add(e.instrumentID,e.summary.totalVolume),t<e.summary.totalVolume)}return!1},e.prototype.onRecieveNews=function(e){var t=_d.parseNewsAlert(e,this.menuService);this.newsAlertNotificationInbox.push(t),this.newNotificationEvent.publish(t),this.processNotificationInbox()},e.prototype.getNumberOfUnreadMessages=function(){return this.unreadMessageCount},e.prototype.getAllNotificationMessages=function(){return this.allNotificationInbox},e.prototype.likeSenseMessage=function(e){var t=new Vr;t.id=e,t.setLike(),this.updateSenseNotiActionList.push(t),this.startUpdateSenseNotificationAction()},e.prototype.unlikeSenseMessage=function(e){var t=new Vr;t.id=e,t.setUnlike(),this.updateSenseNotiActionList.push(t),this.startUpdateSenseNotificationAction()},e.prototype.deleteSenseMessageFromInbox=function(e){this.allNotificationInbox=this.allNotificationInbox.filter(function(t){return e!==t.id});var t=new Vr;t.id=e,t.setDelete(),this.updateSenseNotiActionList.push(t),this.startUpdateSenseNotificationAction()},e.$inject=["$interval","AllNotificationSettingChangeEvent","UserInfoService","MMService","StreamingAttribute","MenuService","MongoService","AccountService","EquityOrderPushPublishSubscriber","DerivativesOrderPushPublishSubscriber","AlertService","$filter","SnapshotPublishSubscriber","NewsPublishSubscriber","InstrumentService","$q","NewNotificationEvent","SenseAPIService","SoundService","URLStore","$timeout"],e}(),Ud=function(){function e(e){this.value=e}return e.prototype.isLine=function(){return"Line"===this.value},e.prototype.isUnreadLine=function(){return"Unread_Line"===this.value},e.prototype.isSenseInbox=function(){return"Sense_Inbox"===this.value},e.prototype.isSenseInboxDetail=function(){return"Sense_Inbox_Detail"===this.value},e.prototype.isSenseInboxRecommend=function(){return"Sense_Inbox_Recommend"===this.value},e.prototype.isSenseInboxIAAConsensus=function(){return"Sense_Inbox_IAA_Consensus"===this.value},e.prototype.isOrderAlert=function(){return"Order_Alert_Inbox"===this.value},e.prototype.isPriceAlert=function(){return"Price_Alert_Inbox"===this.value},e.prototype.isVolumeAlert=function(){return"Volume_Alert_Inbox"===this.value},e.prototype.isNews=function(){return"News_Inbox"===this.value},e.prototype.isSense=function(){return this.isSenseInbox()||this.isSenseInboxDetail()||this.isSenseInboxRecommend()||this.isSenseInboxIAAConsensus()},e.LINE=new e("Line"),e.UNREAD_LINE=new e("Unread_Line"),e.SENSE_INBOX=new e("Sense_Inbox"),e.SENSE_INBOX_DETAIL=new e("Sense_Inbox_Detail"),e.SENSE_INBOX_RECOMMEND=new e("Sense_Inbox_Recommend"),e.SENSE_INBOX_IAA_CONSENSUS=new e("Sense_Inbox_IAA_Consensus"),e.ORDER_ALERT_INBOX=new e("Order_Alert_Inbox"),e.PRICE_ALERT_INBOX=new e("Price_Alert_Inbox"),e.VOLUME_ALERT_INBOX=new e("Volume_Alert_Inbox"),e.NEWS_INBOX=new e("News_Inbox"),e}(),qd=function(){function e(){}return e}(),jd=function(){function e(){this.isPriceAlert=!1,this.isVolAlert=!1}return e}(),Hd=function(){function e(e,t,i,r){this.$uibModalInstance=e,this.order=t,this.userInfoService=i,this.$window=r,this.order=t}return e.prototype.ok=function(){this.$uibModalInstance.close()},e.prototype.getSymbol=function(){return this.isDeriv()||""===this.order.nvdrFlag?this.order.symbol:""+this.order.symbol+this.order.nvdrFlag},e.prototype.isLimitPriceType=function(){return this.order.priceType===Ge.LIMIT},e.prototype.isEquity=function(){return this.order.systemType===mi.EQUITY},e.prototype.isDeriv=function(){return this.order.systemType===mi.DERIVATIVES},e.prototype.openPopupDetail=function(){this.order.detailLink&&this.$window.open(this.order.detailLink,"_blank","height=500,width=650")},e.$inject=["$uibModalInstance","order","UserInfoService","$window"],e}(),Wd=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.$uibModalInstance=t,n.focus=i,n.$window=r,n.focusFactory=i,n}return ne(t,e),t.prototype.clickAgree=function(){var e=this.getFocusButton();this.focusFactory.tabKey(e)},t.prototype.getModalElement=function(){return angular.element(".remember-last-order-disclaimer-alert")},t.$inject=["$uibModalInstance","focus","$window"],t}(fd),Yd=function(){function e(){}return e.parse=function(t){var i=new e;i.policyId=t.policyId,i.symbolWithNvdr=""+t.symbol+(t.isNVDR?"-R":""),i.amount=yt.formatPriceWithoutDigit(t.amount);var r=t.periodType.charAt(0).toUpperCase()+t.periodType.substring(1).toLowerCase();switch(i.frequency=r+" ("+t.occurrence+")",i.time=t.session,i.endDate=t.endDate,i.status=t.status,i.canCancel=t.canCancel,t.status){case"Waiting":case"Activating":i.statusColor=Gd.YELLOW;break;case"Done":i.statusColor=Gd.GREEN;break;case"P-Cancelled":case"Cancelled":i.statusColor=Gd.RED}return i},e}(),Gd=function(){function e(){}return e.GREEN="dca-green",e.YELLOW="dca-yellow",e.RED="dca-red",e}(),Kd=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i)||this;return s.$uibModalInstance=t,s.focus=i,s.orderDataList=r,s.pin=n,s.isMarKetRep=o,s.isShowPinInput=s.isDisabledConfirmButton(),s.pinNextFocusElements=[{parent:".dca-cancel-order-confirmation",focusElement:"#confirm-button"}],s}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".dca-cancel-order-confirmation")},t.prototype.confirm=function(){this.$uibModalInstance.close(this.pin)},t.prototype.isDisabledConfirmButton=function(){return!(this.isMarKetRep||!this.isPinEmpty())},t.prototype.isPinEmpty=function(){return null===this.pin||0===this.pin.length},t.$inject=["$uibModalInstance","focus","orderDataList","pin","isMarKetRep"],t}(Oo),zd=function(){function e(e){this.$uibModalInstance=e}return e.prototype.confirm=function(){this.$uibModalInstance.close()},e.prototype.cancel=function(){this.$uibModalInstance.dismiss()},e.$inject=["$uibModalInstance"],e}(),Qd=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this,t,i)||this;return c.$uibModalInstance=t,c.focus=i,c.contentId=r,c.newsSource=n,c.newsService=o,c.$window=s,c.$sce=a,c.STORY_PLACEHOLDER='<div class="story-placeholder">No News to display.</div>',c.headline="",c.story="",c.hasLink=!1,c.link="",c.requestNewsDetail(),c}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".news-detail-alert")},t.prototype.requestNewsDetail=function(){var e=this;this.newsService.getNewsDetail(this.contentId,this.newsSource).then(function(t){e.headline=t.headline,e.story=e.$sce.trustAsHtml(t.story),e.hasLink=t.hasLink,e.link=t.link},function(){e.story=e.$sce.trustAsHtml(e.STORY_PLACEHOLDER)})},t.prototype.onClickReadMoreButton=function(){this.$window.open(this.link,"_blank")},t.prototype.isMoneyChannelMode=function(){return this.newsSource===Wn.MONEY_CHANNEL},t.$inject=["$uibModalInstance","focus","contentId","newsSource","NewsService","$window","$sce"],t}(Co),Xd=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i)||this;return s.$uibModalInstance=t,s.focus=i,s.$filter=r,s.orderData=n,s.orderPosition=o,s.priceFilter=r("price"),s.isEnablePreventEnterEvent=!0,s}return ne(t,e),t.prototype.setModalElement=function(){this.modal=angular.element(".place-trade-report-order-confirmation")},t.prototype.confirm=function(){this.$uibModalInstance.close()},t.prototype.getSide=function(){return Be.lookup[this.orderData.side]},t.prototype.getOrderPosition=function(){return this.orderPosition},t.prototype.getPrice=function(){return this.orderData.price},t.$inject=["$uibModalInstance","focus","$filter","orderData","orderPosition"],t}(Oo),Jd=function(e){function t(t,i){var r=e.call(this,t)||this;return r.$uibModalInstance=t,r.focus=i,r.focusFactory=i,r}return ne(t,e),t.prototype.clickAgree=function(){var e=this.getFocusButton();this.focusFactory.tabKey(e)},t.prototype.getModalElement=function(){return angular.element(".save-pin-disclaimer-alert")},t.$inject=["$uibModalInstance","focus"],t}(fd),Zd=function(){function e(e,t){this.$uibModalInstance=e,this.ordersData=t}return e.prototype.getDisplaySymbol=function(e){return this.ordersData[e].isNVDR?this.ordersData[e].symbol+"-R":this.ordersData[e].symbol},e.prototype.getDisplayPrice=function(e){return this.ordersData[e].priceType===Ge.LIMIT?this.ordersData[e].price:this.ordersData[e].priceType.fullname},e.prototype.getDisplayIceberg=function(e){return""===this.ordersData[e].icebergVolume.trim()?"0":this.ordersData[e].icebergVolume},e.prototype.confirm=function(){this.$uibModalInstance.close()},e.prototype.close=function(){this.$uibModalInstance.dismiss()},e.$inject=["$uibModalInstance","ordersData"],e}(),eh=function(){function e(e){this.$uibModalInstance=e}return e.$inject=["$uibModalInstance"],e}(),th=function(){function e(e,t){this.$uibModalInstance=e,this.ordersData=t}return e.prototype.getDisplayPrice=function(e){return this.ordersData[e].priceType===Ge.LIMIT?this.ordersData[e].price:this.ordersData[e].priceType.fullname},e.prototype.getDisplayIceberg=function(e){return""===this.ordersData[e].icebergVolume.trim()?"0":this.ordersData[e].icebergVolume},e.prototype.confirm=function(){this.$uibModalInstance.close()},e.prototype.close=function(){this.$uibModalInstance.dismiss()},e.$inject=["$uibModalInstance","ordersData"],e}(),ih=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.$uibModalInstance=t,n.focus=i,n.$window=r,n.focusFactory=i,n}return ne(t,e),t.prototype.clickAgree=function(){var e=this.getFocusButton();this.focusFactory.tabKey(e)},t.prototype.getModalElement=function(){return angular.element(".sense-disclaimer-alert")},t.$inject=["$uibModalInstance","focus","$window"],t}(fd),rh=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.$uibModalInstance=t,n.focus=i,n.$window=r,n.focusFactory=i,n}return ne(t,e),t.prototype.clickAgree=function(){var e=this.getFocusButton();this.focusFactory.tabKey(e)},t.prototype.getModalElement=function(){return angular.element(".notification-disclaimer-alert")},t.$inject=["$uibModalInstance","focus","$window"],t}(fd),nh=function(){function e(e,t,i,r){this.$uibModalInstance=e,this.priceVolNotificationMessage=t,this.instrumentService=i,this.userApplicationProfileService=r,this.priceVolNotificationMessage=t;var n;this.priceVolNotificationMessage.isPriceAlert?n=_d.parsePriceAlert(this.priceVolNotificationMessage):this.priceVolNotificationMessage.isVolAlert&&(n=_d.parseVolAlert(this.priceVolNotificationMessage)),n?this.notiMessageStr=n.alert:this.notiMessageStr=""}return e.prototype.close=function(){this.$uibModalInstance.close()},e.prototype.getShowMessage=function(){return this.notiMessageStr},e.prototype.emitSideBuyEvent=function(){this.emitSideChangeEvent(Be.BUY)},e.prototype.emitSideSellEvent=function(){this.emitSideChangeEvent(Be.SELL)},e.prototype.emitSideChangeEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.priceVolNotificationMessage.symbol,Qe.ALL).then(function(e){var i=t.priceVolNotificationMessage.isPriceAlert?t.priceVolNotificationMessage.value:"";t.userApplicationProfileService.setCurrentSymbol(e,i,Be.SELL)}),this.$uibModalInstance.close()},e.$inject=["$uibModalInstance","priceVolNotificationMessage","InstrumentService","UserApplicationProfileService"],e}(),oh=function(){function e(e,t){var i=this;this.$uibModalInstance=e,this.orderResultData=t,this.submitOrderAmount=0,this.errorAmount=0,this.warningAmount=0,this.orderResultData.forEach(function(e){e.isSuccess?i.submitOrderAmount++:e.isWarnning?i.warningAmount++:i.errorAmount++}),this.isDisableConfirmButton=!0}return e.prototype.close=function(){this.$uibModalInstance.dismiss()},e.prototype.confirm=function(){var e=[];this.orderResultData.forEach(function(t){t.isChecked&&e.push(t)}),this.$uibModalInstance.close(e)},e.prototype.checkIfOrderChecked=function(){var e=this;this.isDisableConfirmButton=!0,this.orderResultData.some(function(t){if(t.isChecked)return e.isDisableConfirmButton=!1,!0})},e.$inject=["$uibModalInstance","orderResultData"],e}(),sh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.isShowCheckBox=function(){if(this.order)return this.order.isWarnning},t}(kd),ah=function(){function e(e,t){var i=this;this.$uibModalInstance=e,this.ordersData=t,this.submitOrderAmount=0,this.errorAmount=0,this.warningAmount=0,this.ordersData.forEach(function(e){e.isSuccess?i.submitOrderAmount++:e.isWarnning?i.warningAmount++:i.errorAmount++}),this.isDisableConfirmButton=!0}return e.prototype.close=function(){this.$uibModalInstance.dismiss()},e.prototype.confirm=function(){var e=[];this.ordersData.forEach(function(t){t.isChecked&&e.push(t)}),this.$uibModalInstance.close(e)},e.prototype.checkIfOrderChecked=function(){var e=this;this.isDisableConfirmButton=!0,this.ordersData.some(function(t){if(t.isChecked)return e.isDisableConfirmButton=!1,!0})},e.$inject=["$uibModalInstance","ordersData"],e}(),ch=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t.prototype.isShowCheckBox=function(){if(this.order)return this.order.isWarnning},t}(Ld),lh=function(){function e(e,t,i,r,n,o,s,a,c){this.$window=e,this.$timeout=t,this.$q=i,this.$uibModalInstance=r,this.streamingAttribute=n,this.urlStore=o,this.accountData=s,this.multiOrderService=a,this.alertService=c,this.onInit()}return e.prototype.onInit=function(){this.startInterval()},e.prototype.onCancel=function(){this.$timeout.cancel(this.timeOutPromise),this.$uibModalInstance.dismiss()},e.prototype.startInterval=function(){var e=this;this.timeOutPromise=this.$timeout(function(){e.multiOrderService.getEquityMultiOrderExtractData(e.accountData.accountNo).then(function(t){if(e.$timeout.cancel(e.timeOutPromise),t.isSuccess()&&e.$uibModalInstance.close(t.list),t.isError()){var i=new Up(t.errorMsg);e.$uibModalInstance.dismiss(i)}t.isWaiting()&&e.startInterval()},function(t){e.$uibModalInstance.dismiss(t)})},2e3)},e.$inject=["$window","$timeout","$q","$uibModalInstance","StreamingAttribute","URLStore","accountData","MultiOrderService","AlertService"],e}(),uh=function(){function e(e,t,i,r,n,o,s,a,c){this.$window=e,this.$timeout=t,this.$q=i,this.$uibModalInstance=r,this.streamingAttribute=n,this.urlStore=o,this.accountData=s,this.multiOrderService=a,this.alertService=c,this.onInit()}return e.prototype.onInit=function(){this.startInterval()},e.prototype.onCancel=function(){this.$uibModalInstance.dismiss()},e.prototype.startInterval=function(){var e=this;this.timeOutPromise=this.$timeout(function(){e.multiOrderService.getDerivativesMultiOrderExtractData(e.accountData.accountNo).then(function(t){if(e.$timeout.cancel(e.timeOutPromise),t.isSuccess()&&e.$uibModalInstance.close(t.list),t.isError()){var i=new Up(t.errorMsg);e.$uibModalInstance.dismiss(i)}t.isWaiting()&&e.startInterval()},function(t){e.$uibModalInstance.dismiss(t)})},2e3)},e.$inject=["$window","$timeout","$q","$uibModalInstance","StreamingAttribute","URLStore","accountData","MultiOrderService","AlertService"],e}(),dh=function(){function e(e,t){this.$uibModalInstance=e,this.store=t}return e.prototype.confirm=function(){this.$uibModalInstance.close()},e.prototype.cancel=function(){this.$uibModalInstance.dismiss()},e.$inject=["$uibModalInstance","DgwConditionalOrderStore"],e}(),hh=function(){function e(e,t){this.$uibModalInstance=e,this.message=t}return e.$inject=["$uibModalInstance","message"],e}();angular.module("alert",["ngAnimate","ui.bootstrap","order","number-formatter","service","event-emitter","input","info","multi-order"]).service("AlertService",Ro).controller("ErrorAlertController",nd).controller("ValidationErrorAlertController",sd).controller("MutipleErrorTopicAlertController",Ao).controller("PlaceOrderConfirmAlertController",ad).controller("PlaceTradeReportOrderConfirmAlertController",Xd).controller("PlaceOrderDerivConfirmAlertController",cd).controller("PlaceOrderWarningAlertController",dd).controller("ChangeOrderConfirmAlertController",ud).controller("CancelOrderConfirmAlertController",ld).controller("SavePinDisclaimerAlertController",Jd).controller("MultiOrderDisclaimerAlertController",yd).controller("SenseDisclaimerAlertController",ih).controller("RememberLastOrderDisclaimerAlertController",Wd).controller("MultiPlaceOrderResultAlertController",gd).controller("MultiPlaceOrderConfirmAlertController",Zd).controller("WhatsNewAlertController",vd).controller("MultiPlaceOrderProgressAlertController",eh).controller("MultiPlaceOrderConfirmWarningtAlertController",oh).controller("MultiPlaceDerivativesOrderConfirmAlertController",th).controller("MultiPlaceDerivativesConfirmWarningtAlertController",ah).controller("MultiPlaceDerivativesOrderResultAlertController",$d).controller("MultiPlaceDerivativesOrderResultRowController",Ld).controller("MarketTickerFilterAlertController",Nd).controller("NotificationDisclaimerAlertController",rh).controller("NotificationOrderPopupAlertController",Hd).controller("NotificationPriceVolumePopupAlertController",nh).controller("SuccessAlertController",od).controller("DCASymbolSelectorController",Io).controller("DCASubmittedTransactionResultController",No).controller("DgwConditionalOrderConfirmController",dh).controller("DCAPlaceOrderConfirmAlertController",ko).controller("DCAOrderDetailAlertController",Mo).controller("DCACancelOrderConfirmAlertController",Kd).controller("OfflineAlertController",zd).controller("SuccessfulLogoutAlertController",hh).controller("NewsDetailAlertController",Qd).controller("MultiPlaceOrderUploadAlertController",lh).controller("MultiPlaceDerivativesOrderUploadAlertController",uh).component("orderList",{template:i(/*! ../../html/alert/order-list.html */144),controller:md,bindings:{equityOrderData:"<",derivOrderData:"<"}}).component("multiPlaceOrderResultRow",{template:i(/*! ../../html/alert/multi-place-order-result-row.html */145),controller:kd,bindings:{order:"<"}}).component("multiPlaceOrderResultWithConfirmWarningRow",{template:i(/*! ../../html/alert/multi-place-order-result-with-confirm-warning-row.html */146),controller:sh,bindings:{order:"<",index:"@"}}).component("multiPlaceDerivativesOrderResultRow",{template:i(/*! ../../html/alert/multi-place-derivatives-order-result-row.html */147),controller:Ld,bindings:{order:"<"}}).component("multiPlaceDerivativesOrderResultWithConfirmWarningRow",{template:i(/*! ../../html/alert/multi-place-derivatives-order-result-with-confirm-warning-row.html */148),controller:ch,bindings:{order:"<",index:"@"}}).component("equityOrderListRow",{template:i(/*! ../../html/alert/equity-order-list-row.html */149),controller:hd,bindings:{data:"<"}}).component("derivativesOrderListRow",{template:i(/*! ../../html/alert/derivatives-order-list-row.html */150),controller:pd,bindings:{data:"<"}}).directive("uibDraggable",function(){return{restrict:"A",link:{post:function(e,t){var i=t.parent(),r=t.parents("div.modal"),n=0,o=0,s=0,a=0,c=function(e){a=e.screenY-o,s=e.screenX-n,i.css({top:a+"px",left:s+"px"})},l=function(){r.off("mousemove",c),i.off("mouseup",l),i.css("cursor","")},u=function(e){n=e.screenX-s,o=e.screenY-a,i.css("cursor","move"),r.on("mousemove",c),i.on("mouseup",l)};i.on("mousedown",u)}}}}).directive("focusModal",["$timeout","$parse","$window",function(e,t,i){return{link:{post:function(t,r,n){e(function(){var e=angular.element(document.querySelector("button[name=focus]"));e[0].focus()},50);var o=0,s=function(e){if(e=e||window.event,37===e.keyCode){o=0;var t=angular.element(document.querySelectorAll("button[name=focus]"));t[o]&&t[o].focus()}else if(39===e.keyCode){o=1;var t=angular.element(document.querySelectorAll("button[name=focus]"));t[o]&&t[o].focus()}};angular.element(i).on("keydown",s),t.$on("$destroy",function(){angular.element(i).off("keydown",s)})}}}}]),angular.module("iframe",["alert"]).directive("mi6Iframe",["$window","AlertService",ee]);var ph=function(){function e(){}return e}(),mh=function(){function e(){}return e}(),vh=function(){function e(){}return e}(),fh=function(){function e(e,t,i){this.name=e,this.shortName=t,this.value=i}return e}(),yh=function(){function e(){}return e.updateSETPercentChange=function(e,t){var i;return i=angular.copy(t,i),e.hasSummaryData()&&(i.setPercentChange=e.summary.percentChange),i},e.parseNewMarketSummaryToMarketSummaryView=function(e,t){var i=new ph;if(angular.copy(t,i),e.hasEquityData()){i.setIndex=e.equityData.setIndex,i.setHigh=e.equityData.setHigh,i.setLow=e.equityData.setLow,i.setChange=e.equityData.setChange,i.setHighChange=e.equityData.setHighChange,i.setLowChange=e.equityData.setLowChange,i.setTotalValue=e.equityData.setTotalValue,i.setTotalVolume=e.equityData.setTotalVolume,i.setGainers=e.equityData.setGainers,i.setLosers=e.equityData.setLosers,i.setUnchanged=e.equityData.setUnchanged,i.setStatus=e.equityData.setStatus,i.indexDetails={};for(var r=0,n=e.equityData.indexData;r<n.length;r++){var o=n[r];if(void 0!==o.indexType){var s=new mh;s.indexType=o.indexType.toString(),s.index=o.index,s.high=o.high,s.low=o.low,s.change=o.change,s.highChange=o.highChange,s.lowChange=o.lowChange,s.totalValue=o.totalValue,i.indexDetails[s.indexType]=s}}}if(e.hasDerivData()){var a=new vh;a.tfexTotalVolume=e.derivData.tfexTotalVolume,a.tfexTotalDeal=e.derivData.tfexTotalDeal,a.tfexTotalOI=e.derivData.tfexTotalOI,a.futuresTotalVolume=e.derivData.futuresTotalVolume,a.futuresTotalDeal=e.derivData.futuresTotalDeal,a.futuresTotalOI=e.derivData.futuresTotalOI,a.optionsTotalVolume=e.derivData.optionsTotalVolume,a.optionsTotalDeal=e.derivData.optionsTotalDeal,a.optionsTotalOI=e.derivData.optionsTotalOI;var c=e.derivData.dateAsOfDay.toString();a.dateAsOfDay=1===c.length?"0"+c:c;var l=e.derivData.dateAsOfMonth.toString();a.dateAsOfMonth=1===l.length?"0"+l:l,a.dateAsOfYear=e.derivData.dateAsOfYear,i.derivDetail=a}if(e.hasEquityData()){var u=new fh("SET","SET",e.equityData.setStatus);i.marketStatusEquity=u}if(e.hasDerivData()){i.marketStatusDerivatives=[];for(var d=e.derivData.marketTypeData.sort(function(e,t){return e.market.sequenceInMarketStatus-t.market.sequenceInMarketStatus}),h=0,p=d;h<p.length;h++){var m=p[h],v=new fh(m.market.fullname,m.market.shortname,m.status);i.marketStatusDerivatives.push(v)}}return i},e}(),gh=function(e){function t(t,i,r,n,o){var s=e.call(this,o)||this;return s.currentAccountChangeEvent=t,s.accountService=i,s.portfolioService=r,s.userInfoService=n,s.pageService=o,s.onReceiveEquityAccountInfoCallback=s.onReceiveEquityAccountInfo.bind(s),s.onReceiveDerivativesAccountInfoCallback=s.onReceiveDerivativesAccountInfo.bind(s),s.onCurrentAccountChangeCallback=s.onCurrentAccountChange.bind(s),s.onReceiveEquityPortfolioCallBack=s.onReceiveEquityPortfolio.bind(s),s}return ne(t,e),t.prototype.viewDidLoad=function(){this.items=[]},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallback)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallback),this.currentAccount&&this.unsubscribeGetEquityPortList(this.currentAccount)},t.prototype.onCurrentAccountChange=function(e){this.currentAccount&&!this.currentAccount.isEmptyAccount&&(this.unsubscribeGetAccountInfo(this.currentAccount),this.unsubscribeGetEquityPortList(this.currentAccount)),this.currentAccount=e,this.items=[],this.currentAccount.isEmptyAccount||this.subscribeGetAccountInfo(this.currentAccount)},t.prototype.onReceiveEquityAccountInfo=function(e){var t;this.userInfoService.isInvestor()?t=this.currentAccount.accountType:this.userInfoService.isMarketRep()&&(t=e.accountType),this.currentAccountType=t,this.initialAccountInfoList(this.currentAccount.systemType,this.currentAccount.frontType,t),Ci.parseEquityPort(this.items,this.currentAccount.frontType,t,e),t===yi.CREDIT_BALANCE&&this.currentAccount.frontType!==fi.DGW&&this.subscribeGetEquityPortList(this.currentAccount)},t.prototype.onReceiveDerivativesAccountInfo=function(e){this.initialAccountInfoList(this.currentAccount.systemType,null,null),Ci.parseDerivativesPort(this.items,e)},t.prototype.onReceiveEquityPortfolio=function(e){Ci.parseEquityPort(this.items,this.currentAccount.frontType,this.currentAccount.accountType,null,e.total)},t.prototype.subscribeGetAccountInfo=function(e){switch(e.systemType){case mi.EQUITY:this.accountService.subscribeGetEquityAccountInfo(e.accountNo,this.onReceiveEquityAccountInfoCallback);break;case mi.DERIVATIVES:this.accountService.subscribeGetDerivativesAccountInfo(e.accountNo,this.onReceiveDerivativesAccountInfoCallback)}},t.prototype.unsubscribeGetAccountInfo=function(e){switch(e.systemType){case mi.EQUITY:this.accountService.unsubscribeGetEquityAccountInfo(e.accountNo,this.onReceiveEquityAccountInfoCallback);break;case mi.DERIVATIVES:this.accountService.unsubscribeGetDerivativesAccountInfo(e.accountNo,this.onReceiveDerivativesAccountInfoCallback)}},t.prototype.subscribeGetEquityPortList=function(e){switch(e.systemType){case mi.EQUITY:this.portfolioService.subscribeGetEquityPortList(e.accountNo,this.onReceiveEquityPortfolioCallBack)}},t.prototype.unsubscribeGetEquityPortList=function(e){switch(e.systemType){case mi.EQUITY:this.portfolioService.unsubscribeGetEquityPortList(e.accountNo,this.onReceiveEquityPortfolioCallBack)}},t.prototype.initialAccountInfoList=function(e,t,i){switch(e){case mi.EQUITY:switch(t){case fi.FIS:i===yi.CASH_BALANCE&&(this.items=[{label:Si.CREDIT_LIMIT,value:void 0,color:ae.YELLOW},{label:Si.LINE_AVAILABLE,value:void 0,color:ae.YELLOW},{label:Si.CASH_BALANCE,value:void 0,color:ae.YELLOW}]),i===yi.CREDIT_BALANCE&&(this.items=[{label:Si.CREDIT_LIMIT,value:void 0,color:ae.YELLOW},{label:Si.LINE_AVAILABLE,value:void 0,color:ae.YELLOW},{label:Si.EXCESS_EQUITY,value:void 0,color:ae.YELLOW},{label:Si.MARGIN,value:void 0,color:ae.YELLOW},{label:Si.PERCENT_MM,value:void 0,color:ae.YELLOW},{label:Si.LIABILITIES,value:void 0,color:ae.YELLOW}]);break;case fi.SEOS:i===yi.CASH_BALANCE&&(this.items=[{label:Si.CREDIT_LIMIT,value:void 0,color:ae.YELLOW},{label:Si.LINE_AVAILABLE,value:void 0,color:ae.YELLOW},{label:Si.CASH_BALANCE,value:void 0,color:ae.YELLOW},{label:Si.NET_SETTLEMENT_LINE,value:void 0,color:ae.YELLOW}]),i===yi.CREDIT_BALANCE&&(this.items=[{label:Si.CREDIT_LIMIT,value:void 0,color:ae.YELLOW},{label:Si.LINE_AVAILABLE,value:void 0,color:ae.YELLOW},{label:Si.EXCESS_EQUITY,value:void 0,color:ae.YELLOW},{label:Si.MARGIN,value:void 0,color:ae.YELLOW},{label:Si.PERCENT_MM,value:void 0,color:ae.YELLOW},{label:Si.LIABILITIES,value:void 0,color:ae.YELLOW}]);break;case fi.DGW:i===yi.CASH_BALANCE&&(this.items=[{label:Si.CREDIT_LIMIT,value:void 0,color:ae.YELLOW},{label:Si.LINE_AVAILABLE,value:void 0,color:ae.YELLOW},{label:Si.INITIAL_CASH_AVAILABLE,value:void 0,color:ae.YELLOW}]),i===yi.CREDIT_BALANCE&&(this.items=[{label:Si.CREDIT_LIMIT,value:void 0,color:ae.YELLOW},{label:Si.LINE_AVAILABLE,value:void 0,color:ae.YELLOW},{label:Si.EXCESS_EQUITY,value:void 0,color:ae.YELLOW},{label:Si.MARGIN_REQUIRED,value:void 0,color:ae.YELLOW},{label:Si.PERCENT_MM,value:void 0,color:ae.YELLOW},{label:Si.CASH_BALANCE,value:void 0,color:ae.YELLOW},{label:Si.LIABILITIES,value:void 0,color:ae.YELLOW}])}break;case mi.DERIVATIVES:this.items=[{label:Si.LINE_AVAILABLE,value:void 0,color:ae.YELLOW},{label:Si.EXCESS_EQUITY,value:void 0,color:ae.YELLOW},{label:Si.EQUITY,value:void 0,color:ae.YELLOW},{label:Si.TOTAL_MR,value:void 0,color:ae.YELLOW},{label:Si.TOTAL_MM,value:void 0,color:ae.YELLOW},{label:Si.CALL_FORCE_FLAG,value:void 0,color:ae.WHITE},{label:Si.CALL_FORCE_MR,value:void 0,color:ae.YELLOW}]}},t.prototype.$onDestroy=function(){this.unsubscribeGetAccountInfo(this.currentAccount),this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallback)},t.$inject=["CurrentAccountChangeEvent","AccountService","PortfolioService","UserInfoService","PageService"],t}(ys),Sh=function(){function e(){}return e}(),bh=function(){function e(){this.marketValue=0,this.amount=0,this.unrealizePL=0,this.percentUnrealizePL=0,this.realizePL=0,this.amountByCost=0,this.unrealizePLByCost=0,this.percentUnrealizePLByCost=0,this.realizePLByCost=0,this.optionsValue=0}return e}(),Ch=function(){function e(){}return e.THB="THB",e.USD="USD",e}(),Eh=function(){function e(){this.data=[]}return e}(),Ah=function(){function e(){}return e.parseEquity=function(e){var t=e.filter(function(e){return void 0!==e.percentUnrealizedPL&&!isNaN(e.percentUnrealizedPL)}),i=t.sort(function(e,t){return t.percentUnrealizedPL-e.percentUnrealizedPL}),r=new Eh;return r.data=[],i.forEach(function(e){var t={},i=e.symbol;e.nvdrFlag&&e.nvdrFlag.length>0&&(i=""+i+e.nvdrFlag),e.flag&&e.flag.length>0&&(i=i+" "+e.flag),t.symbol=i,t.percentUnrealizedPL=e.percentUnrealizedPL,t.color=e.percentUnrealizedPL>0?"#45F906":"#FF0202",r.data.push(t)}),r},e.parseDerivatives=function(e){var t=e.filter(function(e){return void 0!==e.percentUnrealizePL&&!isNaN(e.percentUnrealizePL)}),i=t.sort(function(e,t){return t.percentUnrealizePL-e.percentUnrealizePL}),r=new Eh;return r.data=[],i.forEach(function(e){var t={};t.symbol=e.seriesId,t.percentUnrealizedPL=e.percentUnrealizePL,t.color=e.percentUnrealizePL>0?"#45F906":"#FF0202",r.data.push(t)}),r},e}(),wh=function(e){function t(t,i,r,n,o){var s=e.call(this,n)||this;return s.$element=t,s.currentAccountChangeEvent=i,s.portfolioService=r,s.pageService=n,s.streamingAttribute=o,s.onAccountChangeCallBack=s.onAccountChange.bind(s),s.onReceiveEquityPortListCallBack=s.onReceiveEquityPortList.bind(s),s.onReceiveDerivPortListCallBack=s.onReceiveDerivPortList.bind(s),s.isShowNoData=!1,s.view=new Eh,s}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.unsubscribeGetPortList(this.currentAccount),this.clearChart()},t.prototype.clearChart=function(){this.chart&&this.chart.clear()},t.prototype.onAccountChange=function(e){this.isShowNoData=!0,this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.unsubscribeGetPortList(this.currentAccount),this.clearChart(),this.currentAccount=e,e&&!e.isEmptyAccount&&this.subscribeGetPortList(e)},t.prototype.unsubscribeGetPortList=function(e){e.isEquity()?this.portfolioService.unsubscribeGetEquityPortList(e.accountNo,this.onReceiveEquityPortListCallBack):e.isDerivatives()&&this.portfolioService.unsubscribeGetDerivativesPortList(e.accountNo,this.onReceiveDerivPortListCallBack)},t.prototype.subscribeGetPortList=function(e){e.isEquity()?this.portfolioService.subscribeGetEquityPortList(e.accountNo,this.onReceiveEquityPortListCallBack):e.isDerivatives()&&this.portfolioService.subscribeGetDerivativesPortList(e.accountNo,this.onReceiveDerivPortListCallBack)},t.prototype.onReceiveDerivPortList=function(e){var t=Ah.parseDerivatives(e.list);this.view=t,this.checkIfDataIsAvailable(t)&&(this.writeChart(),this.isShowNoData=!1)},t.prototype.onReceiveEquityPortList=function(e){var t=Ah.parseEquity(e.list);this.view=t,this.checkIfDataIsAvailable(t)&&(this.writeChart(),this.isShowNoData=!1)},t.prototype.writeChart=function(){for(var e=!1,t=!1,i=void 0,r=void 0,n=0;n<this.view.data.length;n++)this.view.data[n].percentUnrealizedPL>0?t=!0:this.view.data[n].percentUnrealizedPL<0&&(e=!0),(!i||this.view.data[n].percentUnrealizedPL>i)&&(i=this.view.data[n].percentUnrealizedPL),(!r||this.view.data[n].percentUnrealizedPL<r)&&(r=this.view.data[n].percentUnrealizedPL);var o=.7;this.view.data.length<4&&(o=.3),this.chart=new AmCharts.AmSerialChart,this.chart.dataProvider=this.view.data,this.chart.categoryField="symbol",this.chart.startDuration=0,this.chart.sequencedAnimation=!1;var s=new AmCharts.AmGraph;s.valueField="percentUnrealizedPL",s.balloonText="[[category]] [[value]]%",s.fillAlphas=.8,s.lineAlpha=.2,s.type="column",s.fillColorsField="color",s.columnWidth=o,this.chart.addGraph(s);var a=new AmCharts.AmBalloon;a.borderAlpha=0,this.chart.balloon=a;var c=new AmCharts.ValueAxis;c.color="#DADADA",c.gridColor="#DADADA",c.gridAlpha=.2,c.dashLength=0,c.axisColor="#DADADA",c.axisThickness=.2,
e&&t?(c.maximum=i,c.minimum=r):e&&!t?(c.maximum=0,c.minimum=r):!e&&t?(c.maximum=i,c.minimum=0):(c.maximum=100,c.minimum=-100),this.chart.addValueAxis(c);var l=this.chart.categoryAxis;l.gridPosition="start",l.gridAlpha=.2,l.gridColor="#DADADA",l.color="#DADADA",l.axisColor="#DADADA",l.axisThickness=.01,l.axisAlpha=0,l.labelsEnabled=!1,this.chart.gridAboveGraphs=!1;var u=new AmCharts.ChartCursor;u.categoryBalloonEnabled=!1,u.cursorAlpha=0,u.zoomable=!1,this.chart.addChartCursor(u);var d=this.$element.find(".body");this.chart.write(d[0])},t.prototype.checkIfDataIsAvailable=function(e){return 0!==e.data.length},t.$inject=["$element","CurrentAccountChangeEvent","PortfolioService","PageService","StreamingAttribute"],t}(ys),Th=function(){function e(){this.data=[]}return e}(),Dh=function(){function e(){}return e.parseEquity=function(e){var t=e.filter(function(e){return void 0!==e.marketValue&&!isNaN(e.marketValue)}),i=t.sort(function(e,t){return Math.abs(e.marketValue)<Math.abs(t.marketValue)?1:Math.abs(e.marketValue)>Math.abs(t.marketValue)?-1:0}),r=new Th;r.data=[];var n=0;return i.forEach(function(e,t){var i=Math.abs(e.marketValue);if(t<4){var o=e.symbol;e.nvdrFlag&&e.nvdrFlag.length>0&&(o=""+o+e.nvdrFlag),e.flag&&e.flag.length>0&&(o=o+" "+e.flag),r.data.push({symbol:o,value:i})}else n+=i}),n>0&&r.data.push({symbol:"Others",value:n}),r},e.parseDerivatives=function(e){var t=e.filter(function(e){return void 0!==e.marketValue&&!isNaN(e.marketValue)}),i=t.sort(function(e,t){return Math.abs(e.marketValue)<Math.abs(t.marketValue)?1:Math.abs(e.marketValue)>Math.abs(t.marketValue)?-1:0}),r=new Th;r.data=[];var n=0;return i.forEach(function(e,t){var i=Math.abs(e.marketValue);t<4?r.data.push({symbol:""+e.seriesId,value:i}):n+=i}),n>0&&r.data.push({symbol:"Others",value:n}),r},e}(),Ih=function(e){function t(t,i,r,n,o){var s=e.call(this,o)||this;return s.$element=t,s.$filter=i,s.currentAccountChangeEvent=r,s.portfolioService=n,s.pageService=o,s.onAccountChangeCallBack=s.onAccountChange.bind(s),s.onReceiveEquityPortListCallBack=s.onReceiveEquityPortList.bind(s),s.onReceiveDerivPortListCallBack=s.onReceiveDerivPortList.bind(s),s.filterPrice=s.$filter("price"),s.isShowNoData=!1,s.view=new Th,s}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.unsubscribeGetPortList(this.currentAccount),this.clearChart()},t.prototype.onAccountChange=function(e){this.isShowNoData=!0,this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.unsubscribeGetPortList(this.currentAccount),this.clearChart(),this.currentAccount=e,e&&!e.isEmptyAccount&&this.subscribeGetPortList(e)},t.prototype.unsubscribeGetPortList=function(e){e.isEquity()?this.portfolioService.unsubscribeGetEquityPortList(e.accountNo,this.onReceiveEquityPortListCallBack):e.isDerivatives()&&this.portfolioService.unsubscribeGetDerivativesPortList(e.accountNo,this.onReceiveDerivPortListCallBack)},t.prototype.subscribeGetPortList=function(e){e.isEquity()?this.portfolioService.subscribeGetEquityPortList(e.accountNo,this.onReceiveEquityPortListCallBack):e.isDerivatives()&&this.portfolioService.subscribeGetDerivativesPortList(e.accountNo,this.onReceiveDerivPortListCallBack)},t.prototype.clearChart=function(){this.chart&&this.chart.clear()},t.prototype.onReceiveDerivPortList=function(e){var t=Dh.parseDerivatives(e.list);this.view=t,this.checkIfDataIsAvailable(t)&&(this.writeChart(),this.isShowNoData=!1)},t.prototype.onReceiveEquityPortList=function(e){var t=Dh.parseEquity(e.list);this.view=t,this.checkIfDataIsAvailable(t)&&(this.writeChart(),this.isShowNoData=!1)},t.prototype.writeChart=function(){this.clearChart();this.filterPrice;this.chart=new AmCharts.AmPieChart,this.chart.marginTop=0,this.chart.marginBottom=0,this.chart.marginLeft=0,this.chart.marginRight=0,this.chart.pullOutRadius=25,this.chart.responsive=!0,this.chart.startDuration=0,this.chart.colors=["#0A2F5E","#2B8CBE","#1DB5E0","#BDC9E1","#F1EEF6"],this.chart.dataProvider=this.view.data,this.chart.balloonText="[[title]] [[value]]",this.chart.valueField="value",this.chart.titleField="symbol",this.chart.innerRadius="45%",this.chart.color="#FBFBFB",this.chart.labelRadius=1,this.chart.radius="35%",this.chart.labelText="[[percents]]% [[title]]",this.chart.labelTickColor="#FBFBFB",this.chart.labelTickAlpha=1,this.chart.startAngle=0,this.chart.hideLabelsPercent=.01,this.chart.pullOutOnlyOne=!0;var e=new AmCharts.AmBalloon;e.adjustBorderColor=!1,e.color="#FFFFFF",this.chart.balloon=e;var t=this.$element.find(".body");this.chart.write(t[0])},t.prototype.checkIfDataIsAvailable=function(e){return 0!==e.data.length},t.$inject=["$element","$filter","CurrentAccountChangeEvent","PortfolioService","PageService"],t}(ys),Ph=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return""+this.symbol+this.side.derivativeFullname},enumerable:!0,configurable:!0}),e}(),Oh=function(){function e(){this.marketValue=0,this.amount=0,this.unrealizedPL=0,this.percentUnrealizedPL=0,this.realizedPL=0,this.amountByCost=0,this.unrealizedPLByCost=0,this.percentUnrealizedPLByCost=0,this.realizedPLByCost=0,this.optionsValue=0}return e}(),kh=function(){function e(){}return e.COST="cost",e.SETTLE="settle",e}(),$h=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this,l)||this;return d.currentAccountChangeEvent=t,d.portfolioService=i,d.snapshotPubsub=r,d.portfolioDerivativesViewParser=n,d.colorService=o,d.userInfo=s,d.instrumentService=a,d.piwikService=c,d.pageService=l,d.userApplicationProfileService=u,d.onAccountChangeCallBack=d.onAccountChange.bind(d),d.onReceiveDerivPortListCallBack=d.onReceiveDerivativesPortList.bind(d),d.onReceiveSnapshotCallback=d.onReceiveSnapshot.bind(d),d.allSymbolList=[],d.derivativesList=[],d.derivativesTotal=new Oh,d.sortMode=new er,d}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.snapshotPubsub.unsubscribe(this.allSymbolList,this.onReceiveSnapshotCallback),this.currentAccount&&this.portfolioService.unsubscribeGetDerivativesPortList(this.currentAccount.accountNo,this.onReceiveDerivPortListCallBack)},t.prototype.isCostMode=function(){return this.mode===kh.COST},t.prototype.isSettleMode=function(){return this.mode===kh.SETTLE},t.prototype.onAccountChange=function(e){this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.portfolioService.unsubscribeGetDerivativesPortList(this.currentAccount.accountNo,this.onReceiveDerivPortListCallBack),this.derivativesList=[],this.derivativesTotal=new Oh,this.currentAccount=e,e.isEmptyAccount||this.portfolioService.subscribeGetDerivativesPortList(e.accountNo,this.onReceiveDerivPortListCallBack)},t.prototype.onReceiveDerivativesPortList=function(e){this.derivativesList=this.portfolioDerivativesViewParser(e.list),this.derivativesTotal=_h.parseTotalDerivativesView(e.total),this.sortMode.clear(),this.unsubscribePreviousSymbols(),this.allSymbolList=this.derivativesList.map(function(e){return e.symbol});var t=this.currentAccount.isDerivatives()&&this.currentAccount.frontType===fi.DGW;t||this.subscribeNewSymbols()},t.prototype.subscribeNewSymbols=function(){this.snapshotPubsub.subscribe(this.allSymbolList,this.onReceiveSnapshotCallback)},t.prototype.unsubscribePreviousSymbols=function(){this.snapshotPubsub.unsubscribe(this.allSymbolList,this.onReceiveSnapshotCallback)},t.prototype.onReceiveSnapshot=function(e){var t=this;this.derivativesList.forEach(function(i){if(e.instrumentID.toUpperCase()===i.symbol.toUpperCase()){t.addSymbolInformation(i,e);var r=t.calculatePortfolio(i,e);r&&t.calculateTotalPortfolio()}}),this.sortMode.dirty()},t.prototype.calculatePortfolio=function(e,t){var i=!1,r=Vh.calculateMarketPriceCurrency(t,e.marketPrice);if(e.marketPrice!==r){i=!0;var n=Vh.calculateMarketValueCurrency(e.actualVolume,r,e.multipiler),o=Vh.calculatMarketValueTHB(r,e.currentXRT,e.currency,e.multipiler,e.actualVolume),s=Vh.calculateUnrealizePLCurrency(e.side,r,e.averageCost,e.multipiler,e.actualVolume),a=Vh.calculateUnrealizePLTHB(e.side,r,e.currentXRT,e.currency,e.averageCostTHB,e.multipiler,e.actualVolume),c=Vh.calculatePercentUnrealizePL(a,e.amountByCost),l=Vh.calculateUnrealizePLCurrency(e.side,r,e.averagePrice,e.multipiler,e.actualVolume),u=Vh.calculateUnrealizePLTHB(e.side,r,e.currentXRT,e.currency,e.averagePriceTHB,e.multipiler,e.actualVolume),d=Vh.calculatePercentUnrealizePL(u,e.amount);e.marketPrice=r,e.marketValueCurrency=n,e.marketValue=o,e.unrealizePLByCostCurrency=s,e.unrealizePLByCost=a,e.percentUnrealizePLByCost=c,e.unrealizePLCurrency=l,e.unrealizedPL=u,e.percentUnrealizedPL=d,e.unrealizedPLColor=this.colorService.changeWithNaNColor(e.unrealizedPL),e.unrealizedPLByCostColor=this.colorService.changeWithNaNColor(e.unrealizePLByCost),e.percentUnrealizedPLColor=this.colorService.changeWithNaNColor(e.percentUnrealizedPL),e.percentUnrealizedPLByCostColor=this.colorService.changeWithNaNColor(e.percentUnrealizePLByCost)}return i},t.prototype.calculateTotalPortfolio=function(){for(var e,t=0,i=0,r=0,n=0,o=0,s=0,a=0,c=0,l=0,u=this.derivativesList.length;l<u;l++)e=this.derivativesList[l],t+=isNaN(e.amount)?0:e.amount,i+=isNaN(e.amountByCost)?0:e.amountByCost,r+=isNaN(e.marketValue)?0:e.marketValue,n+=isNaN(e.optionsValue)?0:e.optionsValue,o+=isNaN(e.unrealizedPL)?0:e.unrealizedPL,s+=isNaN(e.unrealizePLByCost)?0:e.unrealizePLByCost,a+=isNaN(e.realizedPL)?0:e.realizedPL,c+=isNaN(e.realizePLByCost)?0:e.realizePLByCost;this.derivativesTotal.amount=t,this.derivativesTotal.amountByCost=i,this.derivativesTotal.marketValue=r,this.derivativesTotal.optionsValue=n,this.derivativesTotal.unrealizedPL=o,this.derivativesTotal.unrealizedPLByCost=s,this.derivativesTotal.realizedPL=a,this.derivativesTotal.realizedPLByCost=c,this.derivativesTotal.percentUnrealizedPL=0===t?0:o/Math.abs(t)*100,this.derivativesTotal.percentUnrealizedPLByCost=0===i?0:s/Math.abs(i)*100,this.derivativesTotal.percentUnrealizedPLByCostColor=this.colorService.changeWithNaNColor(this.derivativesTotal.percentUnrealizedPLByCost),this.derivativesTotal.percentUnrealizedPLColor=this.colorService.changeWithNaNColor(this.derivativesTotal.percentUnrealizedPL),this.derivativesTotal.realizedPLByCostColor=this.colorService.changeWithNaNColor(this.derivativesTotal.realizedPLByCost),this.derivativesTotal.realizedPLColor=this.colorService.changeWithNaNColor(this.derivativesTotal.realizedPL),this.derivativesTotal.unrealizedPLByCostColor=this.colorService.changeWithNaNColor(this.derivativesTotal.unrealizedPLByCost),this.derivativesTotal.unrealizedPLColor=this.colorService.changeWithNaNColor(this.derivativesTotal.unrealizedPL)},t.prototype.addSymbolInformation=function(e,t){t.hasInitData()&&(e.caFlags=t.initData.caFlag,e.isCa=e.caFlags.length>0,e.lastTradingDate=t.initData.lastTradingDate,e.isLTD=1===t.initData.ltdExpFlag)},t.prototype.getkey=function(e){return""+e+this.mode},t.prototype.onSelectedRowChangeByPressUpDown=function(e){e<=this.derivativesList.length-1&&this.onSelectRow(this.derivativesList[e])},t.prototype.onSelectRow=function(e){var t=this;this.keyOfSelectedRow=e.name,this.instrumentService.searchSymbol(e.symbol,Qe.DERIVATIVE).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)}),this.piwikService.eventTrack(nt.CLICK_SYMBOL,rt.PORTFOLIO_DERIVATIVES)},t.prototype.isSelectedRow=function(e){return this.keyOfSelectedRow===e},t.prototype.getcurrentAccount=function(){return this.currentAccount},t.prototype.getSortIconByUnrealizedPL=function(){var e=this.mode===kh.SETTLE?Jc.UNREALIZED_PL:Jc.UNREALIZED_PL_BY_COST;return this.sortMode.getSortIconClass(e)},t.prototype.getSortIconByPercentUnrealizedPL=function(){var e=this.mode===kh.SETTLE?Jc.PERCENT_UNREALIZED_PL:Jc.PERCENT_UNREALIZED_PL_BY_COST;return this.sortMode.getSortIconClass(e)},t.prototype.getSortIconByRealizedPL=function(){var e=this.mode===kh.SETTLE?Jc.REALIZED_PL:Jc.REALIZED_PL_BY_COST;return this.sortMode.getSortIconClass(e)},t.prototype.getSortIconBySymbol=function(){return this.sortMode.getSortIconClass(Jc.SYMBOL)},t.prototype.getSortIconBySide=function(){return this.sortMode.getSortIconClass(Jc.SIDE)},t.prototype.getSortIconByOptionsValue=function(){return this.sortMode.getSortIconClass(Jc.OPTIONS_VALUE)},t.prototype.getSortIconByMarketPrice=function(){return this.sortMode.getSortIconClass(Jc.MARKET_PRICE)},t.prototype.getSortIconByMarketValue=function(){return this.sortMode.getSortIconClass(Jc.MARKET_VALUE)},t.prototype.getSortIconByAveragePriceOrCost=function(){var e=this.mode===kh.SETTLE?Jc.AVERAGE_PRICE:Jc.AVERAGE_COST;return this.sortMode.getSortIconClass(e)},t.prototype.getSortIconByAmountPriceOrCost=function(){var e=this.mode===kh.SETTLE?Jc.AMOUNT:Jc.AMOUNT_BY_COST;return this.sortMode.getSortIconClass(e)},t.prototype.getSortIconByStartVolume=function(){return this.sortMode.getSortIconClass(Jc.START_VOLUME)},t.prototype.getSortIconByAvailableVolume=function(){return this.sortMode.getSortIconClass(Jc.AVAILABLE_VOLUME)},t.prototype.getSortIconByActualVolume=function(){return this.sortMode.getSortIconClass(Jc.ACTUAL_VOLUME)},t.prototype.sortOrderByUnrealizedPL=function(){var e=this.mode===kh.SETTLE?Jc.UNREALIZED_PL:Jc.UNREALIZED_PL_BY_COST;this.sortOrderBy(e)},t.prototype.sortOrderByPercentUnrealizedPL=function(){var e=this.mode===kh.SETTLE?Jc.PERCENT_UNREALIZED_PL:Jc.PERCENT_UNREALIZED_PL_BY_COST;this.sortOrderBy(e)},t.prototype.sortOrderByRealizedPL=function(){var e=this.mode===kh.SETTLE?Jc.REALIZED_PL:Jc.REALIZED_PL_BY_COST;this.sortOrderBy(e)},t.prototype.sortOrderBySymbol=function(){this.sortOrderBy(Jc.SYMBOL)},t.prototype.sortOrderBySide=function(){this.sortOrderBy(Jc.SIDE)},t.prototype.sortOrderByOptionsValue=function(){this.sortOrderBy(Jc.OPTIONS_VALUE)},t.prototype.sortOrderByMarketPrice=function(){this.sortOrderBy(Jc.MARKET_PRICE)},t.prototype.sortOrderByMarketValue=function(){this.sortOrderBy(Jc.MARKET_VALUE)},t.prototype.sortOrderByAveragePriceOrCost=function(){var e=this.mode===kh.SETTLE?Jc.AVERAGE_PRICE:Jc.AVERAGE_COST;this.sortOrderBy(e)},t.prototype.sortOrderByAmountPriceOrCost=function(){var e=this.mode===kh.SETTLE?Jc.AMOUNT:Jc.AMOUNT_BY_COST;this.sortOrderBy(e)},t.prototype.sortOrderByStartVolume=function(){this.sortOrderBy(Jc.START_VOLUME)},t.prototype.sortOrderByAvailableVolume=function(){this.sortOrderBy(Jc.AVAILABLE_VOLUME)},t.prototype.sortOrderByActualVolume=function(){this.sortOrderBy(Jc.ACTUAL_VOLUME)},t.prototype.sortOrderBy=function(e){this.sortMode.toggleDirection(e),this.sortMode.sortField=e,tr.sort(this.sortMode,this.derivativesList)},t.$inject=["CurrentAccountChangeEvent","PortfolioService","SnapshotPublishSubscriber","PortfolioDerivativesViewParser","ColorService","UserInfoService","InstrumentService","PiwikService","PageService","UserApplicationProfileService"],t}(ys),Lh=function(){function e(e,t,i){this.$window=e,this.colorService=t,this.streamingAttribute=i}return e.prototype.isCostMode=function(){return this.mode===kh.COST},e.prototype.isSettleMode=function(){return this.mode===kh.SETTLE},e.prototype.isMustShowCA=function(){return this.portfolio.isCa},e.prototype.isMustShowToolTip=function(){return this.portfolio.symbol.length>12},e.prototype.isCurrencySeries=function(){return this.portfolio.currency!==Ch.THB},e.prototype.openCurrencySeriesPopup=function(){if(this.isCurrencySeries()){var e=this.streamingAttribute.derivHost+"/Derivatives/C15_PortfolioMultiCurrency.jsp?symbol="+this.portfolio.symbol+"&side="+this.portfolio.side.derivativeFullname+"&accountNo="+this.account.accountNo;this.$window.open(e,"_blank","height=500,width=650")}},e.$inject=["$window","ColorService","StreamingAttribute"],e}(),Nh=function(){function e(e){this.colorService=e}return e.prototype.$onChanges=function(e){},e.prototype.isMustShowCA=function(){return this.portfolio.isCa},e.prototype.isMustShowToolTip=function(){return this.portfolio.name.length>12},e.prototype.isPortfolioSeos=function(){return this.portListCtrl.currentAccount.frontType===fi.SEOS},e.$inject=["ColorService"],e}(),Mh=function(){function e(){this.status="",this.flag="",this.nvdrFlag="",this.isCa=!1}return Object.defineProperty(e.prototype,"name",{get:function(){var e=this.symbol;return this.nvdrFlag&&this.nvdrFlag.length>0&&(e=""+e+this.nvdrFlag),this.flag&&this.flag.length>0&&(e=e+" "+this.flag),this.status&&this.status.length>0&&(e=e+" ("+this.status+")"),e},enumerable:!0,configurable:!0}),e}(),Rh=function(){function e(){this.amount=0,this.marketValue=0,this.unrealizedPL=0,this.percentUnrealizedPL=0,this.realizedPL=0}return e}(),_h=function(){function e(){}return e.parseTotalEquityView=function(e){var t=new Rh;return t.marketValue=e.marketValue,t.amount=e.amount,t.unrealizedPL=e.unrealizedPL,t.percentUnrealizedPL=e.percentUnrealizedPL,t.realizedPL=e.realizedPL,t.marginRate=e.marginRate,t.liabilities=e.liabilities,t.unrealizedPLColor=fo.changeWithNaNColor(t.unrealizedPL),t.percentUnrealizedPLColor=fo.changeWithNaNColor(t.percentUnrealizedPL),t.realizedPLColor=fo.changeWithNaNColor(t.realizedPL),t},e.parseTotalDerivativesView=function(e){var t=new Oh;return t.marketValue=e.marketValue,t.amount=e.amount,t.unrealizedPL=e.unrealizePL,t.percentUnrealizedPL=e.percentUnrealizePL,t.realizedPL=e.realizePL,t.amountByCost=e.amountByCost,t.unrealizedPLByCost=e.unrealizePLByCost,t.percentUnrealizedPLByCost=e.percentUnrealizePLByCost,t.realizedPLByCost=e.realizePLByCost,t.optionsValue=e.optionsValue,t.unrealizedPLColor=fo.changeWithNaNColor(t.unrealizedPL),t.percentUnrealizedPLColor=fo.changeWithNaNColor(t.percentUnrealizedPL),t.realizedPLColor=fo.changeWithNaNColor(t.realizedPL),t.unrealizedPLByCostColor=fo.changeWithNaNColor(t.unrealizedPLByCost),t.percentUnrealizedPLByCostColor=fo.changeWithNaNColor(t.percentUnrealizedPLByCost),t.realizedPLByCostColor=fo.changeWithNaNColor(t.realizedPLByCost),t},e}(),Vh=function(){function e(){}return e.calculateMarketPriceCurrency=function(t,i){if(t.hasSummaryData()){if(e.validateValueExist(t.summary.settlePrice))return t.summary.settlePrice;if(e.validateValueExist(t.summary.lastDone))return t.summary.lastDone}return t.hasInitData()&&e.validateValueExist(t.initData.previousSettle)?t.initData.previousSettle:i},e.calculateMarketValueCurrency=function(t,i,r){return isNaN(t)?0:e.round(i*r)*t},e.calculatMarketValueTHB=function(t,i,r,n,o){var s=e.calculateMarketPriceTHB(t,i,r);return e.round(s*n)*o},e.calculateMarketPriceTHB=function(t,i,r){switch(r){case Ch.THB:return t;case Ch.USD:return e.round(t*i)}},e.calculateUnrealizePLCurrency=function(t,i,r,n,o){switch(t){case Be.BUY:return e.round((i-r)*n)*o;case Be.SELL:return e.round((r-i)*n)*o}},e.calculateUnrealizePLTHB=function(t,i,r,n,o,s,a){var c=e.calculateMarketPriceTHB(i,r,n),l=e.calculateAverageCostOrPriceTHB(n,o);switch(t){case Be.BUY:return e.round((c-l)*s)*a;case Be.SELL:return e.round((l-c)*s)*a}},e.calculateAverageCostOrPriceTHB=function(t,i){switch(t){case Ch.THB:return i;case Ch.USD:return e.round(i)}},e.calculatePercentUnrealizePL=function(e,t){return 0===t||Math.abs(e)<1e-4?0:e/t*100},e.validateValueExist=function(e){return!isNaN(e)&&0!==e},e.round=function(e){return parseFloat(e.toFixed(2))},e}();angular.module("portfolio",["web-api","event-emitter","color-formatter","number-formatter","service","deal-summary"]).component("portfolio",{template:i(/*! ../../html/portfolio/portfolio.html */151),controller:Qc,bindings:{page:"@"}}).component("portfolioList",{template:i(/*! ../../html/portfolio/portfolio-list.html */152),controller:Zc,bindings:{page:"@"}}).component("derivativesPortfolioList",{template:i(/*! ../../html/portfolio/derivatives-portfolio-list.html */153),controller:$h,bindings:{mode:"@",page:"@"}}).component("portfolioRow",{require:{portListCtrl:"^portfolioList"},template:i(/*! ../../html/portfolio/portfolio-row.html */154),controller:Nh,bindings:{portfolio:"<"}}).component("derivativesPortfolioRow",{template:i(/*! ../../html/portfolio/derivatives-portfolio-row.html */155),controller:Lh,bindings:{portfolio:"<",mode:"@",account:"<"}}).component("marketValueChart",{template:i(/*! ../../html/portfolio/market-value-chart.html */156),controller:Ih,bindings:{page:"@"}}).component("percentUnrealizedPlChart",{template:i(/*! ../../html/portfolio/percent-unrealized-pl-chart.html */157),controller:wh,bindings:{page:"@"}}).component("portfolioAccountInfo",{template:i(/*! ../../html/portfolio/portfolio-account-info.html */158),controller:gh,bindings:{page:"@"}}).service("PortfolioService",sl).factory("PortfolioEquityViewParser",["InstrumentService","ColorService",function(e,t){return function(i){var r=[];return i.forEach(function(i){var n=new Mh;switch(n.symbol=i.symbol,n.nvdrFlag=i.nvdrFlag,n.flag=i.flag,n.showNA=i.showNA,n.startVolume=i.startVolume,n.availVolume=i.currentVolume,n.actualVolume=i.actualVolume,n.averageCost=i.averagePrice,n.commRate=i.commRate,n.vatRate=i.vatRate,n.portFlag=i.portFlag,n.tsLevel=e.getTSLevel(n.symbol),n.isTs=!!n.tsLevel,n.showNA){case!0:n.amount=Number.NaN,n.marketValue=Number.NaN,n.unrealizedPL=Number.NaN,n.percentUnrealizedPL=Number.NaN,n.realizedPL=Number.NaN,n.marketPrice=Number.NaN;break;case!1:n.amount=i.amount,n.marketValue=i.marketValue,n.unrealizedPL=i.unrealizedPL,n.percentUnrealizedPL=i.percentUnrealizedPL,n.realizedPL=i.realizedPL,n.marketPrice=i.marketPrice}n.unrealizedPLColor=t.changeWithNaNColor(n.unrealizedPL),n.percentUnrealizedPLColor=t.changeWithNaNColor(n.percentUnrealizedPL),n.realizedPLColor=t.changeWithNaNColor(n.realizedPL),r.push(n)}),r}}]).factory("PortfolioDerivativesViewParser",["ColorService",function(e){return function(t){var i=[];return t.forEach(function(t){var r=new Ph;r.actualVolume=t.actualVolume,r.amount=t.amount,r.amountByCost=t.amountByCost,r.amountByCostCurrency=t.amountByCostCurrency,r.amountCurrency=t.amountCurrency,r.availVolume=t.availableVolume,r.averageCost=t.averageCost,r.averagePrice=t.averagePrice,r.costXRT=t.costXRT,r.currency=t.currency,r.currentXRT=t.currentXRT,r.marketPrice=t.marketPrice,r.marketValue=t.marketValue,r.marketValueCurrency=t.marketValueCurrency,r.multipiler=t.multipiler,r.optionsValue=t.optionsValue,r.percentUnrealizedPL=t.percentUnrealizePL,r.percentUnrealizePLByCost=t.percentUnrealizePLByCost,r.priceDigit=t.priceDigit,r.realizedPL=t.realizePL,r.realizePLByCost=t.realizePLByCost,r.realizePLByCostCurrency=t.realizePLByCostCurrency,r.realizePLCurrency=t.realizePLCurrency,r.settlementXRT=t.settlementXRT,r.settleDigit=t.settleDigit,r.side=t.side,r.startVolume=t.startVolume,r.symbol=t.seriesId,r.unrealizedPL=t.unrealizePL,r.unrealizePLByCost=t.unrealizePLByCost,r.unrealizePLByCostCurrency=t.unrealizePLByCostCurrency,r.unrealizePLCurrency=t.unrealizePLCurrency,r.averagePriceTHB=t.averagePriceTHB,r.averageCostTHB=t.averageCostTHB,r.unrealizedPLColor=e.changeWithNaNColor(t.unrealizePL),r.unrealizedPLByCostColor=e.changeWithNaNColor(t.unrealizePLByCost),r.percentUnrealizedPLColor=e.changeWithNaNColor(t.percentUnrealizePL),r.percentUnrealizedPLByCostColor=e.changeWithNaNColor(t.percentUnrealizePLByCost),r.realizedPLColor=e.changeWithNaNColor(t.realizePL),r.realizedPLByCostColor=e.changeWithNaNColor(t.realizePLByCost),i.push(r)}),i}}]);var Bh=(function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),function(){function e(){this.isSuccess=!1,this.isWarning=!1}return e}(),function(){function e(){}return e}()),xh=function(){function e(){}return e}(),Fh=function(){function e(e,t,i,r){this.iTPService=e,this.iTPDService=t,this.alertService=i,this.userInfoService=r,this.signals=new li}return e.prototype.updateEquityDealSummaryList=function(e){var t=this;this.iTPService.getDealSummary(e).then(function(i){var r=Qh.parseEquityResponse(i.message);if(r.isSuccess){var n=new Bh;n.list=r.dealSummaryList,n.total=r.totalDealSummary,t.publishGetEquityDealList(i.accountNo,n)}else r.isWarning?t.alertService.showPlaceOrderWarningAlert(r.warnMessage):r.isSuccess||(t.clearMemorizedEquityDealList(e.accountNo),t.alertService.showErrorAlert(r.errorMessage))})},e.prototype.updateDerivativesDealSummaryList=function(e){var t=this,i=new Gt(this.userInfoService.getApplicationRole());i.accountNo=e.accountNo,this.iTPDService.getDealSummary(i).then(function(i){var r=Qh.parseDerivativesResponse(i.message);if(r.isSuccess){var n=new xh;n.list=r.dealSummaryList,n.total=r.totalDealSummary,t.publishGetDerivativesDealList(i.accountNo,n)}else r.isWarning?t.alertService.showPlaceOrderWarningAlert(r.warnMessage):r.isSuccess||(t.clearMemorizedDerivativesDealList(e.accountNo),t.alertService.showErrorAlert(r.errorMessage))})},e.prototype.publishGetEquityDealList=function(e,t){this.signals.dispatch(e+"~E",t)},e.prototype.publishGetDerivativesDealList=function(e,t){this.signals.dispatch(e+"~D",t)},e.prototype.subscribeGetEquityDealList=function(e,t){this.signals.add(e+"~E",t)},e.prototype.unsubscribeGetEquityDealList=function(e,t){var i=e+"~E";this.signals.remove(i,t),0===this.signals.getNumListeners(i)&&this.userInfoService.isMarketRep()&&this.signals.destroy(i)},e.prototype.subscribeGetDerivativesDealList=function(e,t){this.signals.add(e+"~D",t)},e.prototype.unsubscribeGetDerivativesDealList=function(e,t){var i=e+"~D";this.signals.remove(i,t),0===this.signals.getNumListeners(i)&&this.userInfoService.isMarketRep()&&this.signals.destroy(i)},e.prototype.clearMemorizedEquityDealList=function(e){this.signals.clearMemorize(e+"-E")},e.prototype.clearMemorizedDerivativesDealList=function(e){this.signals.clearMemorize(e+"-D")},e.$inject=["ITPService","ITPDService","AlertService","UserInfoService"],e}(),Uh=function(){function e(){this.buyAmount="-",this.sellAmount="-"}return Object.defineProperty(e.prototype,"key",{get:function(){return""+this.index},enumerable:!0,configurable:!0}),e}(),qh=function(){function e(){}return e}(),jh=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,c)||this;return u.currentAccountChangeEvent=t,u.dealSummaryService=i,u.dealSummaryEquityViewParser=r,u.instrumentService=n,u.userInfoService=o,u.colorService=s,u.piwikService=a,u.pageService=c,u.userApplicationProfileService=l,u.onAccountChangeCallBack=u.onAccountChange.bind(u),u.onReceiveEquityDealSummaryListCallBack=u.onReceiveEquityDealSummaryList.bind(u),u.equityList=[],u}return ne(t,e),t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.dealSummaryService.unsubscribeGetEquityDealList(this.currentAccount.accountNo,this.onReceiveEquityDealSummaryListCallBack)},t.prototype.onAccountChange=function(e){this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.dealSummaryService.unsubscribeGetEquityDealList(this.currentAccount.accountNo,this.onReceiveEquityDealSummaryListCallBack),this.equityList=[],this.equityTotal=this.initTotalDeal(),this.currentAccount=e,e.isEmptyAccount||this.dealSummaryService.subscribeGetEquityDealList(e.accountNo,this.onReceiveEquityDealSummaryListCallBack)},t.prototype.initTotalDeal=function(){var e=new Object;return e.buyAmount=0,e.net=0,e.sellAmount=0,e.settlementFee=0,e.totalFee=0,e.vat=0,e.volume=0,e},t.prototype.onReceiveEquityDealSummaryList=function(e){this.equityList=this.dealSummaryEquityViewParser(e.list),this.equityTotal=e.total},t.prototype.onSelectRow=function(e){var t=this;this.selectedDealSummaryKey=e.key,this.instrumentService.searchSymbol(e.symbol,Qe.ALL).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)}),this.piwikService.eventTrack(nt.CLICK_SYMBOL,rt.DEAL_SUMMARY_EQUITY)},t.prototype.isSelectedRow=function(e){return this.selectedDealSummaryKey===e},t.$inject=["CurrentAccountChangeEvent","DealSummaryService","DealSummaryEquityViewParser","InstrumentService","UserInfoService","ColorService","PiwikService","PageService","UserApplicationProfileService"],t}(ys),Hh=function(){function e(){}return e}(),Wh=function(){function e(){this.total=new Gh}return e}(),Yh=function(){function e(){}return Object.defineProperty(e.prototype,"key",{get:function(){return this.listKey+"-"+this.orderNo+"-"+this.index},enumerable:!0,configurable:!0}),e}(),Gh=function(){function e(){this.volume="0",this.comm="0.00",this.vat="0.00",this.whTax="0.00",this.amount="0.00"}return e}(),Kh=function(){function e(e){this.$window=e}return e.prototype.isCurrencySeries=function(){return this.dealSummaryItem.currency===Ch.USD},e.prototype.popupCurrencySeriesDetail=function(){var e=this.dealSummaryItem.symbol,t=this.dealSummaryItem.side,i=this.currentAccount.accountNo,r="https://derivdev.settrade.set/Derivatives/C15_PortfolioMultiCurrency.jsp?symbol="+e+"&side="+t+"&accountNo="+i;this.$window.open(r,"_blank","height=500,width=650")},e.$inject=["$window"],e}(),zh=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,a)||this;return l.currentAccountChangeEvent=t,l.dealSummaryService=i,l.dealSummaryDerivativesViewParser=r,l.instrumentService=n,l.userInfoService=o,l.piwikService=s,l.pageService=a,l.userApplicationProfileService=c,l.onAccountChangeCallBack=l.onAccountChange.bind(l),l.onReceiveDerivativesDealSummaryListCallBack=l.onReceiveDerivativesDealSummaryList.bind(l),l.derivativesList=[],l}return ne(t,e),t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.currentAccount&&this.dealSummaryService.unsubscribeGetEquityDealList(this.currentAccount.accountNo,this.onReceiveDerivativesDealSummaryListCallBack)},t.prototype.onAccountChange=function(e){this.currentAccount&&!this.currentAccount.isEmptyAccount&&this.dealSummaryService.unsubscribeGetDerivativesDealList(this.currentAccount.accountNo,this.onReceiveDerivativesDealSummaryListCallBack),this.clearDerivativesListAndSelectedItem(),e.isEmptyAccount||this.dealSummaryService.subscribeGetDerivativesDealList(e.accountNo,this.onReceiveDerivativesDealSummaryListCallBack),this.currentAccount=e},t.prototype.clearDerivativesListAndSelectedItem=function(){this.derivativesList=[],this.selectedDealSummary=new Wh},t.prototype.onReceiveDerivativesDealSummaryList=function(e){this.derivativesList=this.dealSummaryDerivativesViewParser(e),this.selectedDealSummary=this.derivativesList[0]},t.prototype.onSelectRow=function(e){var t=this;this.selectedDealSummaryKey=e.key,this.instrumentService.searchSymbol(e.symbol,Qe.ALL).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)}),this.piwikService.eventTrack(nt.CLICK_SYMBOL,rt.DEAL_SUMMARY_DERIVATIVES)},t.prototype.isSelectedRow=function(e){return this.selectedDealSummaryKey===e},t.$inject=["CurrentAccountChangeEvent","DealSummaryService","DealSummaryDerivativesViewParser","InstrumentService","UserInfoService","PiwikService","PageService","UserApplicationProfileService"],t}(ys),Qh=function(){function e(){}return e.parseEquityResponse=function(t){var i={};i.dealSummaryList=[];for(var r=t.split(hi.LV3),n=parseInt(r[1]),o=2;o<2+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.DEAL_SUMMARY_SERVICE_ID||c===e.DEAL_SUMMARY_FAIL_SERVICE_ID){var l=a[2],u=parseFloat(a[3]),d=parseInt(a[4]),h="T"===l,p="W"===l;if(i.isSuccess=h,i.isWarning=p,h){for(var m=0;m<d-1;m++){var v=a[6+m].split(hi.LV1);i.dealSummaryList.push(e.parseEquity(v))}var f=6+(d-1),y=a[f].split(hi.LV1);i.totalDealSummary=e.parseTotalEquity(y),i.totalDealSummary.settlementFee=u}else p?i.warnMessage=a[5]:i.errorMessage=a[5];return i}}},e.parseDerivativesResponse=function(t){var i={};i.dealSummaryList=[],
i.totalDealSummary=[];for(var r=t.split(hi.LV3),n=parseInt(r[2]),o=3;o<3+n;o++){var s=r[o],a=s.split(hi.LV2),c=a[1];if(c===e.DEAL_SUMMARY_SERVICE_ID||c===e.DEAL_SUMMARY_FAIL_SERVICE_ID){var l=a[2],u=parseFloat(a[3]),d=parseFloat(a[4]),h="T"===l,p="W"===l;if(i.isSuccess=h,i.isWarning=p,h){for(var m=0;m<u-d;m++){var v=a[6+m].split(hi.LV1);i.dealSummaryList.push(e.parseDerivatives(v))}for(var f=6+(u-d),m=0;m<d;m++){var v=a[f+m].split(hi.LV1);i.totalDealSummary.push(e.parseTotalDerivatives(v))}i.totalDealSummary.sort(function(e,t){var i=e.settlementDate.split("/").reverse().join("/"),r=t.settlementDate.split("/").reverse().join("/");return i<r?1:i===r?0:-1})}else p?i.warnMessage=a[3]:i.errorMessage=a[3];return i}}},e.parseEquity=function(e){var t={};return t.symbol=ct.parseNullableString(e[0]),t.side=Be.lookup[e[1]],t.volume=parseFloat(e[2]),t.price=parseFloat(e[3]),t.transactionAmount=parseFloat(e[4]),t.totalFee=parseFloat(e[5]),t.vat=parseFloat(e[6]),t.amount=parseFloat(e[7]),t},e.parseDerivatives=function(e){var t={};t.orderNo=ct.parseNullableString(e[0]),t.seriesId=ct.parseNullableString(e[1]),t.side=Be.lookup[e[2]],t.position=Ye.lookup[e[3]],t.volume=parseFloat(e[4]),t.price=parseFloat(e[5]),t.comm=parseFloat(e[6]),t.vat=parseFloat(e[7]),t.whTax=parseFloat(e[8]),t.amount=parseFloat(e[9]),t.priceDigit=parseInt(e[10]),t.dealDate=ct.parseNullableString(e[11]),t.settlementDate=ct.parseNullableString(e[12]);var i=parseInt(e[13]);return t.currency=ct.parseNullableString(e[14+i]),t},e.parseTotalEquity=function(e){var t={};return t.volume=parseFloat(e[1]),t.totalFee=parseFloat(e[2]),t.vat=parseFloat(e[3]),t.buyAmount=parseFloat(e[4]),t.sellAmount=parseFloat(e[5]),t.net=parseFloat(e[6]),t},e.parseTotalDerivatives=function(e){var t={};return t.volume=parseFloat(e[4]),t.comm=parseFloat(e[6]),t.vat=parseFloat(e[7]),t.whTax=parseFloat(e[8]),t.amount=parseFloat(e[9]),t.settlementDate=e[12],t},e.DEAL_SUMMARY_SERVICE_ID="DealSummary",e.DEAL_SUMMARY_FAIL_SERVICE_ID="PlaceOrder",e}();angular.module("deal-summary",["web-api","event-emitter","color-formatter","number-formatter","service"]).service("DealSummaryService",Fh).factory("DealSummaryEquityViewParser",function(){return te}).factory("DealSummaryDerivativesViewParser",function(){return re}).factory("TotalDealSummaryEquityViewParser",function(){return ie}).component("equityDealSummaryList",{template:i(/*! ../../html/deal-summary/equity-deal-summary-list.html */159),controller:jh,bindings:{page:"@"}}).component("equityDealSummaryRow",{template:i(/*! ../../html/deal-summary/equity-deal-summary-row.html */160),controller:Hh,bindings:{dealSummaryItem:"<"}}).component("derivativesDealSummaryList",{template:i(/*! ../../html/deal-summary/derivatives-deal-summary-list.html */161),controller:zh,bindings:{page:"@"}}).component("derivativesDealSummaryRow",{template:i(/*! ../../html/deal-summary/derivatives-deal-summary-row.html */162),controller:Kh,bindings:{dealSummaryItem:"<",currentAccount:"<"}});var Xh=function(){function e(e){this.colorService=e,this.isHiLightRow=!1}return e.prototype.$onChanges=function(e){this.volByPriceData.price&&this.lastDone&&(this.isHiLightRow=this.volByPriceData.price===this.lastDone)},e.$inject=["ColorService"],e}(),Jh=function(){function e(){}return e}(),Zh=(function(){function e(){}return e}(),function(){function e(){}return e.parse=function(e){var t=new Jh;t.rowData=[];for(var i=0;i<e.buySellDetails.length;i++)t.rowData.push({price:e.buySellDetails[i].price,buyExec:e.buySellDetails[i].buyDeal,buyVol:e.buySellDetails[i].buyVol,sellExec:e.buySellDetails[i].sellDeal,sellVol:e.buySellDetails[i].sellVol,noSideExec:e.buySellDetails[i].noSideDeal,noSideVol:e.buySellDetails[i].noSideVol,totalVol:e.buySellDetails[i].totalVol,percentTotalVol:e.buySellDetails[i].percentTotalVol});return t.instrumentID=e.instrumentID,t.lastDone=e.lastDone,t.priceDigit=e.priceDigit,t.previousClose=e.prevClose,t},e}()),ep=function(){function e(e,t){this.volByPricePubSub=e,this.currentSymbolChangeEvent=t,this.onReceiveVolumeByPriceDetailCallBack=this.onReceiveVolumeByPriceDetail.bind(this),this.onCurrentSymbolChangeCallBack=this.onCurrentSymbolChange.bind(this),this.isShowNoSide=!1,this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)}return e.prototype.onCurrentSymbolChange=function(e){this.symbol&&e.name===this.symbol.name||(this.unsubscribePreviousSymbol(this.symbol),this.symbol=e,this.subscribeCurrentSymbol(this.symbol))},e.prototype.unsubscribePreviousSymbol=function(e){if(e&&0!==e.name.length){var t=e.name;t=t?t.toUpperCase():t,t&&0!==t.length&&this.volByPricePubSub.unsubscribe(t,this.onReceiveVolumeByPriceDetailCallBack)}},e.prototype.subscribeCurrentSymbol=function(e){if(e&&0!==e.name.length){var t=angular.copy(e);t.type=ar.lookup[t.type.value];var i=t?t.name.toUpperCase():t.name;this.clearRowData(),t.isIndex()||this.volByPricePubSub.subscribe(i,this.onReceiveVolumeByPriceDetailCallBack)}},e.prototype.clearRowData=function(){this.volumeByPriceTableView&&(this.volumeByPriceTableView.rowData=[])},e.prototype.onReceiveVolumeByPriceDetail=function(e){this.volumeByPriceTableView=Zh.parse(e)},e.prototype.$onDestroy=function(){this.symbol&&this.volByPricePubSub.unsubscribe(this.symbol.name.toUpperCase(),this.onReceiveVolumeByPriceDetailCallBack),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack)},e.prototype.toggleShowNoSide=function(){this.isShowNoSide=!this.isShowNoSide},e.$inject=["VolumeByPriceDetailPublishSubscriber","CurrentSymbolChangeEvent"],e}(),tp=function(){function e(){}return e.parse=function(e){var t=[new rp,new rp,new rp];return t[0].label=e.instrumentID,t[0].buyVol=e.buyVol,t[0].sellVol=e.sellVol,t[0].noSideVol=e.noSideVol,t[0].percentBuyVol=e.percentBuyVol,t[0].percentSellVol=e.percentSellVol,t[0].percentNoSideVol=e.percentNoSideVol,t[1].label=e.sector,t[1].buyVol=e.sectorBuyVol,t[1].sellVol=e.sectorSellVol,t[0].noSideVol=e.sectorNoSideVol,t[1].percentBuyVol=e.sectorPercentBuyVol,t[1].percentSellVol=e.sectorPercentSellVol,t[1].percentNoSideVol=e.sectorPercentNoSideVol,t[2].label="Market",t[2].buyVol=e.marketBuyVol,t[2].sellVol=e.marketSellVol,t[2].noSideVol=e.marketNoSideVol,t[2].percentBuyVol=e.marketPercentBuyVol,t[2].percentSellVol=e.marketPercentSellVol,t[2].percentNoSideVol=e.marketPercentNoSideVol,t},e}(),ip=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n.currentSymbolChangeEvent=t,n.volumeByPricePublishSubscriber=i,n.pageService=r,n.onCurrentSymbolChangeCallBack=n.onCurrentSymbolChange.bind(n),n.onRecieveVolByPriceCallBack=n.onRecieveVolByPrice.bind(n),n.volBuySell=[],n}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.volumeByPricePublishSubscriber.unsubscribe(this.currentSymbol.name,this.onRecieveVolByPriceCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentSymbolChange=function(e){this.currentSymbol&&e.name===this.currentSymbol.name||(this.currentSymbol&&this.volumeByPricePublishSubscriber.unsubscribe(this.currentSymbol.name,this.onRecieveVolByPriceCallBack),this.volBuySell=[],this.currentSymbol=e,this.volumeByPricePublishSubscriber.subscribe(e.name,this.onRecieveVolByPriceCallBack))},t.prototype.onRecieveVolByPrice=function(e){this.volBuySell=tp.parse(e)},t.$inject=["CurrentSymbolChangeEvent","VolumeByPricePublishSubscriber","PageService"],t}(ys),rp=function(){function e(){}return e}(),np=function(){function e(e){this.$element=e,this.percentBuyVol=0,this.percentSellVol=0,this.percentNoSideVol=0,this.percentBarBuy="0%",this.percentBarSell="0%",this.percentBarNoside="0%"}return e.prototype.$onChanges=function(e){e.data&&e.data.currentValue&&(this.percentBuyVol=this.data.percentBuyVol,this.percentSellVol=this.data.percentSellVol,this.percentNoSideVol=this.data.percentNoSideVol,this.percentBarBuy=this.data.percentBuyVol+"%",this.percentBarSell=this.data.percentSellVol+"%",this.percentBarNoside=this.data.percentNoSideVol+"%",this.percentNoSideVol>1&&this.percentNoSideVol<100?0===this.percentBuyVol||0===this.percentSellVol?this.percentBarNoside=this.percentBarNoside+" - 4px - 0.2em":this.percentBarNoside=this.percentBarNoside+" - 2px - 0.2em":100===this.percentNoSideVol?this.percentBarNoside=this.percentBarNoside+" - 4px - 0.4em":0===this.percentBuyVol?this.percentBarSell=this.percentBarSell+" - 4px - 0.2em":0===this.percentSellVol?this.percentBarBuy=this.percentBarBuy+" - 4px - 0.2em":(this.percentBarBuy=this.percentBarBuy+" - 0.2em",this.percentBarSell=this.percentBarSell+" - 0.2em"))},e.prototype.checkSize=function(){return this.data.label.length>10?"small-size":""},e.$inject=["$element"],e}(),op=function(e){function t(i){var r=e.call(this,i)||this;return r.pageService=i,r.NON=t.NON,r.FIRST=t.FIRST,r.SECOND=t.SECOND,r}return ne(t,e),t.prototype.startService=function(){this.active=this.FIRST},t.prototype.stopService=function(){this.active=this.NON},t.prototype.viewDidLoad=function(){},t.prototype.isActive=function(e){return this.active===e},t.prototype.activePage=function(e){this.active=e},t.$inject=["PageService"],t.NON=-1,t.FIRST=1,t.SECOND=2,t}(ys),sp=function(){function e(e){this.$window=e}return e.prototype.isLabelValueTooltipData=function(){return this.rowData.type===cp.LABEL_VALUE_TOOLTIP},e.prototype.isLabelValueData=function(){return this.rowData.type===cp.LABEL_VALUE},e.prototype.isLinkData=function(){return this.rowData.type===cp.LINK},e.prototype.isLinkTooltip=function(){return this.rowData.type===cp.LINK_TOOLTIP},e.prototype.popupLink=function(e){this.$window.open(e,"_blank","height=500,width=650")},e.prototype.isDecreaseSize=function(){var e=this,t=0;return this.rowData.value.forEach(function(i,r){t+=i.value.length,r!==e.rowData.value.length-1&&(t+=3)}),this.rowData.label.length>9&&t>16},e.$inject=["$window"],e}(),ap=function(){function e(e,t,i){this.value=e,this.color=""+t,this.tooltip=i}return e}(),cp=function(){function e(){}return e.LABEL_VALUE_TOOLTIP="LABEL_VALUE_TOOLTIP",e.LABEL_VALUE="LABEL_VALUE",e.LINK="LINK",e.LINK_TOOLTIP="LINK_TOOLTIP",e}(),lp=function(){function e(){}return e}(),up=function(e){function t(t,i,r,n,o,s){var a=e.call(this,i)||this;return a.piwikService=t,a.pageService=i,a.currentSymbolChangeEvent=r,a.instrumentService=n,a.userInfoService=o,a.accountService=s,a.NON_TAB_ID=-1,a.TICKER_TAB_ID=0,a.CHART_TAB_ID=1,a.NEWS_BY_SYMBOL_TAB_ID=2,a.BY_DATE_TAB_ID=3,a.ODD_LOT_TAB_ID=4,a.UNDERLYING_TAB_ID=5,a.HISTORICAL_CHART=6,a.MARGIN_RATE=7,a.onCurrentSymbolChangeCallBack=a.onCurrentSymbolChange.bind(a),a.isCurrentSymbolHasValidUnderlyingInstrument=!1,a.isCurrentSymbolHasOddlot=!1,a.isShouldShowMarginRateTab=!1,a.isAlreadyProcessMarginRateMenuTab=!1,a}return ne(t,e),t.prototype.startService=function(){this.pageBeforeStopService?this.active=this.pageBeforeStopService:this.active=this.TICKER_TAB_ID,this.isAlreadyProcessMarginRateMenuTab||this.processMarginRateMenuTab(),this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.pageBeforeStopService=this.active,this.active=this.NON_TAB_ID,this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.processMarginRateMenuTab=function(){var e=this;this.userInfoService.isInvestor()&&this.accountService.accountEquityList.some(function(t){if(t.accountType===yi.CREDIT_BALANCE)return e.isShouldShowMarginRateTab=!0,!0}),this.userInfoService.isMarketRep()&&(this.isShouldShowMarginRateTab=this.userInfoService.hasMarketRepEquity&&!this.userInfoService.isDerivativesOnly)},t.prototype.onCurrentSymbolChange=function(e){var t=this;this.currentInstrument!==e&&(this.pageBeforeSymbolChange=this.active,e.type.equal(ar.OPTIONS)?this.isCurrentSymbolHasValidUnderlyingInstrument=!0:e.underlying&&e.underlying.length>0?this.instrumentService.validateUnderlyingSymbolByBrokerLicense(e.underlying).then(function(e){t.isCurrentSymbolHasValidUnderlyingInstrument=!0},function(){t.pageBeforeSymbolChange===t.UNDERLYING_TAB_ID&&(t.active=t.TICKER_TAB_ID),t.isCurrentSymbolHasValidUnderlyingInstrument=!1}):(this.pageBeforeSymbolChange===this.UNDERLYING_TAB_ID&&(this.active=this.TICKER_TAB_ID),this.isCurrentSymbolHasValidUnderlyingInstrument=!1),e.type.equal(ar.EQUITY)?this.isCurrentSymbolHasOddlot=!0:(this.pageBeforeSymbolChange===this.ODD_LOT_TAB_ID&&(this.active=this.TICKER_TAB_ID),this.isCurrentSymbolHasOddlot=!1),this.currentInstrument=e)},t.prototype.trackPagePiwik=function(e){switch(e){case"0":this.piwikService.pageTrack(it.QUOTE_INTRADAY_TICKER);break;case"1":this.piwikService.pageTrack(it.QUOTE_INTRADAY_CHART);break;case"2":this.piwikService.pageTrack(it.QUOTE_INTRADAY_BY_DATE);break;case"3":this.piwikService.pageTrack(it.QUOTE_INTRADAY_ODDLOT);break;case"4":this.piwikService.pageTrack(it.QUOTE_INTRADAY_UNDERLYING)}},t.prototype.shouldShowUnderlyingTab=function(){return this.isCurrentSymbolHasValidUnderlyingInstrument},t.$inject=["PiwikService","PageService","CurrentSymbolChangeEvent","InstrumentService","UserInfoService","AccountService"],t}(ys),dp=function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,l)||this;return h.infoPubsub=t,h.colorService=i,h.currentSymbolChange=r,h.userInfoService=n,h.quoteDetailViewParserService=o,h.instrumentService=s,h.streamingAttribute=a,h.$window=c,h.pageService=l,h.userApplicationProfileService=u,h.gaService=d,h.onCurrentSymbolChangeCallBack=h.onCurrentSymbolChange.bind(h),h.onReceiveInstrumentInfoCallback=h.onReceiveInstrumentInfo.bind(h),h.bidOffer=new ht,h.overview=new _i,h.symbol=dt.empty(),h.currentInstrumentInfo=new Oe,h.isThreeBidsOffers=!1,h}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChange.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.infoPubsub.unsubscribe(this.symbol.name,this.onReceiveInstrumentInfoCallback),this.currentSymbolChange.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentSymbolChange=function(e){this.retrieveNewSymbolData(e)},t.prototype.onSubmitSymbol=function(e){this.userApplicationProfileService.setCurrentSymbol(e),this.gaService.eventTrack("Quote",this.symbol.name)},t.prototype.onReceiveInstrumentInfo=function(e){this.currentInstrumentInfo.update(e),this.overview=Bi.parse(e,this.overview),this.overview&&(this.overview.tsLevel=this.instrumentService.getTSLevel(e.instrumentID)),this.bidOffer=Cl.parseBidOffer(e,this.bidOffer,this.totalVolume),this.totalVolume=Cl.parseTotalVolume(e,this.totalVolume),this.dataPages=this.quoteDetailViewParserService.getPages(this.quoteDetailViewParserService.parse(this.currentInstrumentInfo)),this.fullCompanyName=this.quoteDetailViewParserService.getFullCompanyName(this.currentInstrumentInfo)},t.prototype.retrieveNewSymbolData=function(e){this.infoPubsub.unsubscribe(this.symbol.name,this.onReceiveInstrumentInfoCallback),e.name!==this.symbol.name&&this.clearData(),this.currentInstrumentInfo=new Oe,this.currentInstrumentInfo.instrumentID=e.name,this.symbol=e,this.infoPubsub.subscribe(e.name,Hr.Intraday,this.onReceiveInstrumentInfoCallback)},t.prototype.clearData=function(){this.bidOffer=new ht,this.overview=new _i,this.totalVolume=void 0,this.dataPages=[]},t.prototype.getQuoteCategory=function(){return rt.QUOTE},t.prototype.openStockInfoScreen=function(){var e=this.streamingAttribute.activingMarketDataMMHost+"/realtime/streaming6/fundamentalRedirect.jsp?symbol="+this.symbol.name,t=this.$window.open(e,"_blank");t.focus()},t.prototype.isShowStockInfoButton=function(){return this.symbol&&""!==this.symbol.name&&this.symbol.isEquity()},t.prototype.getSymbolName=function(){return this.symbol?this.symbol.name:""},t.$inject=["InstrumentInfoPublishSubscriber","ColorService","CurrentSymbolChangeEvent","UserInfoService","QuoteDetailViewParserService","InstrumentService","StreamingAttribute","$window","PageService","UserApplicationProfileService","GAService"],t}(ys),hp=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n.instrumentPubSub=t,n.currentSymbolChangeEvent=i,n.pageService=r,n.onCurrentSymbolChangeCallBack=n.onCurrentSymbolChange.bind(n),n.onReceiveInstrumentTickerCallBack=n.onReceiveInstrumentTicker.bind(n),n}return ne(t,e),t.prototype.startService=function(){this.startComponent()},t.prototype.stopService=function(){this.stopComponent(),this.currentSymbol=dt.empty()},t.prototype.viewDidLoad=function(){},t.prototype.startComponent=function(){this.initialColumn(),this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.onCurrentSymbolChange=function(e){this.currentSymbol!==e&&(this.initialColumn(),this.unsubscribeSymbol(this.currentSymbol),this.subscribeSymbol(e),this.currentSymbol=e)},t.prototype.initialColumn=function(){this.data=new Array(t.MAX_ROW),this.currentTickerIndex=-1,this.nextTickerIndex=0,this.lastTickerSeqId=-1},t.prototype.subscribeSymbol=function(e){e&&0!==e.name.length&&this.instrumentPubSub.subscribe(e.name,this.onReceiveInstrumentTickerCallBack)},t.prototype.unsubscribeSymbol=function(e){e&&0!==e.name.length&&this.instrumentPubSub.unsubscribe(e.name,this.onReceiveInstrumentTickerCallBack)},t.prototype.onReceiveInstrumentTicker=function(e){var t=this;e.forEach(function(e){e.sequenceID>t.lastTickerSeqId&&t.updateTicker(e),t.lastTickerSeqId=e.sequenceID})},t.prototype.updateTicker=function(e){this.data[this.nextTickerIndex]=e,this.moveEquityTicker()},t.prototype.moveEquityTicker=function(){this.currentTickerIndex++,this.nextTickerIndex++,this.currentTickerIndex===t.MAX_ROW&&(this.currentTickerIndex=0),this.nextTickerIndex===t.MAX_ROW&&(this.nextTickerIndex=0)},t.prototype.stopComponent=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.unsubscribeSymbol(this.currentSymbol),this.currentSymbol=void 0},t.prototype.highlightRow=function(e){return e===this.currentTickerIndex?"highlight":""},t.$inject=["InstrumentTickerPublishSubscriber","CurrentSymbolChangeEvent","PageService"],t.MAX_ROW=33,t}(ys),pp=function(){function e(){}return e}(),mp=function(){function e(){}return e}(),vp=function(){function e(){}return e.parseEquity=function(e,t){var i=new pp;return i.date=[e.day,e.month,e.year].map(function(e){return e<10?"0"+e:""+e}).join("/"),i.open=e.open,i.todayClose=e.close,i.change=e.change,i.percentChange=e.percentChange,i.totalVolume=e.totalVolume,i.high=e.high,i.low=e.low,i.previousClose=e.close-e.change,t&&(i.marketCap=e.marketCap/1e6,i.pe=e.pe,i.dividendYield=e.dividendYield,i.totalValue=e.totalValue/1e3),i},e.parseDerivatives=function(e,t){var i=new mp;return i.date=[e.day,e.month,e.year].map(function(e){return e<10?"0"+e:""+e}).join("/"),i.open=e.open,i.todayClose=e.close,i.change=e.change,i.percentChange=e.percentChange,i.totalVolume=e.totalVolume,i.high=e.high,i.low=e.low,t&&(i.oi=e.oi,i.transaction=e.transaction,i.previousSettlementPrice=e.previousSettlementPrice,i.settlementPrice=e.settlementPrice),i},e}(),fp=function(e){function t(t,i,r){var n=e.call(this,r)||this;return n.currentSymbolChangeEvent=t,n.historicalByDatePublishSubscriber=i,n.pageService=r,n.onReceiveHistoricalByDateCallBack=n.onReceiveHistoricalByDate.bind(n),n.onCurrentSymbolChangeCallBack=n.onCurrentSymbolChange.bind(n),n}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.currentSymbol&&this.historicalByDatePublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveHistoricalByDateCallBack)},t.prototype.onCurrentSymbolChange=function(e){this.currentSymbol&&this.historicalByDatePublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveHistoricalByDateCallBack),this.currentSymbol=e,this.historicalByDatePublishSubscriber.subscribe(e.name,this.onReceiveHistoricalByDateCallBack)},t.prototype.onReceiveHistoricalByDate=function(e){var t=this;switch(this.clearData(),e.instrumentType){case ce.EQUITY:case ce.INDEX:e.value.forEach(function(i){t.equityList.push(vp.parseEquity(i,e.hasExtData()))});break;case ce.FUTURES:case ce.OPTIONS:e.value.forEach(function(i){t.derivativesList.push(vp.parseDerivatives(i,e.hasExtData()))})}},t.prototype.isCurrentSymbolEquityOrIndex=function(){return!!this.currentSymbol&&(this.currentSymbol.isEquity()||this.currentSymbol.isIndex())},t.prototype.isCurrentSymbolDerivatives=function(){return!!this.currentSymbol&&this.currentSymbol.isDerivatives()},t.prototype.clearData=function(){this.equityList=[],this.derivativesList=[]},t.prototype.isSelectedRow=function(e){return this.selectedRow===e},t.prototype.selectRow=function(e){this.selectedRow=e},t.$inject=["CurrentSymbolChangeEvent","HistoricalByDatePublishSubscriber","PageService"],t}(ys),yp=function(){function e(e){this.colorService=e}return e.$inject=["ColorService"],e}(),gp=function(){function e(e){this.colorService=e}return e.$inject=["ColorService"],e}(),Sp=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t)||this;return l.pageService=t,l.currentSymbolChangeEvent=i,l.infoPubSub=r,l.instrumentService=n,l.quoteDetailViewParserService=o,l.colorService=s,l.dispatcherJSONService=a,l.userApplicationProfileService=c,l.onCurrentSymbolChangeCallBack=l.onCurrentSymbolChange.bind(l),l.onReceiveInstrumentInfoCallBack=l.onReceiveInstrumentInfo.bind(l),l.currentSymbol=dt.empty(),l.quoteOverview=new _i,l.currentInstrumentInfo=new Oe,l.quoteFundamental=new Vp,l}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.infoPubSub.unsubscribe(this.currentSymbol.name,this.onReceiveInstrumentInfoCallBack),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.selectedRowIndex=void 0},t.prototype.viewDidLoad=function(){},t.prototype.onSubmitSymbol=function(e){this.userApplicationProfileService.setCurrentSymbol(e)},t.prototype.onCurrentSymbolChange=function(e){var t=this;this.currentSymbol&&this.infoPubSub.unsubscribe(this.currentSymbol.name,this.onReceiveInstrumentInfoCallBack),this.fullCompanyName="",this.tsLevel="",this.quoteOverview=new _i,this.quoteFundamental=new Vp,this.currentInstrumentInfo=new Oe,this.currentInstrumentInfo.instrumentID=e.name,this.currentSymbol=e,this.infoPubSub.subscribe(e.name,Hr.Intraday,this.onReceiveInstrumentInfoCallBack),this.dispatcherJSONService.requestQuoteFundamental(e.name).then(function(e){t.quoteFundamental=Fp.parse(e)})},t.prototype.onReceiveInstrumentInfo=function(e){this.currentInstrumentInfo.update(e),this.quoteOverview=Bi.parse(e,this.quoteOverview),this.tsLevel=this.instrumentService.getTSLevel(e.instrumentID),this.fullCompanyName=this.quoteDetailViewParserService.getFullCompanyName(this.currentInstrumentInfo)},t.prototype.onSelectRow=function(e,t){t!==xp.HEADER&&t!==xp.SUB_HEADER&&(this.selectedRowIndex=e)},t.$inject=["PageService","CurrentSymbolChangeEvent","InstrumentInfoPublishSubscriber","InstrumentService","QuoteDetailViewParserService","ColorService","DispatcherJSONService","UserApplicationProfileService"],t}(ys),bp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.INTRADAY_TAB_ID=0,t.FUNDAMENTAL_TAB_ID=1,t}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.getAnalyticsScreenName=function(){switch(this.active){case this.INTRADAY_TAB_ID:return ss.QUOTE_INTRADAY;case this.FUNDAMENTAL_TAB_ID:return ss.QUOTE_FUNDAMENTAL;default:return ss.QUOTE_INTRADAY}},t.prototype.onClickTab=function(){this.changeToPage()},t}(Zs),Cp=function(){function e(){}return e}(),Ep=function(e){function t(t,i,r,n,o){var s=e.call(this)||this;return s.$element=t,s.intradayChartPubSub=i,s.historicalChartPublishSubscriber=r,s.currentSymbolChangeEvent=n,s.$q=o,s.onCurrentSymbolChangeCallback=s.onCurrentSymbolChange.bind(s),s.onReceiveIntradayChartCallback=s.onReceiveIntradayChart.bind(s),s.onReceiveHistoricalChartCallback=s.onReceiveHistoricalChart.bind(s),s}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallback)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallback),this.currentSymbol&&(this.intradayChartPubSub.unsubscribe(this.currentSymbol.name,pe.PRICE_VALUE,this.onReceiveIntradayChartCallback),this.historicalChartPublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveHistoricalChartCallback))},t.prototype.isShowSuggestText=function(){return!this.currentSymbol||0===this.currentSymbol.name.length},t.prototype.onCurrentSymbolChange=function(e){var t=this;this.officerIntra=this.$q.defer(),this.officerHist=this.$q.defer();var i=this.officerIntra.promise,r=this.officerHist.promise,n=this.currentSymbol;n&&0!==n.name.length&&(this.intradayChartPubSub.unsubscribe(n.name,pe.PRICE_VALUE,this.onReceiveIntradayChartCallback),this.historicalChartPublishSubscriber.unsubscribe(n.name,this.onReceiveHistoricalChartCallback)),this.currentSymbol=e,this.intradayChartPubSub.subscribe(e.name,pe.PRICE_VALUE,this.onReceiveIntradayChartCallback),this.historicalChartPublishSubscriber.subscribe(e.name,this.onReceiveHistoricalChartCallback),this.$q.all([i,r]).then(function(){t.writeChart()})},t.prototype.onReceiveIntradayChart=function(e){this.intradayChartView=Ap.parseIntraday(e),this.officerIntra.resolve()},t.prototype.onReceiveHistoricalChart=function(e){this.historicalChartView=Ap.parseHistorical(e),this.officerHist.resolve()},t.prototype.generateChartDataSets=function(){var e={fromField:"value",toField:"value"},t={fromField:"volume",toField:"volume"},i=new AmCharts.DataSet;i.dataProvider=this.intradayChartView.pointData,i.fieldMappings=[e,t],i.categoryField="date";var r=new AmCharts.DataSet;r.dataProvider=this.historicalChartView.pointData,r.fieldMappings=[e,t],r.categoryField="date",r.color="#7f8da9";var n=new Cp;return n.dataSets=[r,i],n.priceDigit=this.historicalChartView.priceDigit,n.symbol=this.historicalChartView.symbol,n},t.prototype.writeChart=function(){this.stockChart=new AmCharts.AmStockChart;var e=this.generateChartDataSets();this.stockChart.dataSets=e.dataSets,this.stockChart.path="assets/amcharts",this.stockChart.panelsSettings=new AmCharts.PanelsSettings,this.stockChart.panelsSettings.marginLeft=60,this.stockChart.panelsSettings.marginBottom=5,this.stockChart.categoryAxesSettings={equalSpacing:!0,gridColor:"#DADADA",color:"#DADADA",gridAlpha:.3,maxSeries:0,dateFormats:[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"DD MMM"},{period:"WW",format:"DD MMM"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}]},this.stockChart.valueAxesSettings={equalSpacing:!0,gridColor:"#DADADA",color:"#DADADA",gridAlpha:.3,inside:!1};var t=new AmCharts.StockPanel;t.showCategoryAxis=!1,t.title="Value",t.percentHeight=70,t.valueAxes=[{labelFunction:function(t,i,r){return yt.formatPrice(t,e.priceDigit)}}];var i=new AmCharts.StockGraph;i.id="g1",i.connect=!0,i.valueField="value",i.comparable=!0,i.compareField="value",i.balloonText="<b>[[value]]</b>",i.balloonFunction=function(t,i,r){return e.symbol+"<br>Price: <b>"+yt.formatPrice(t.dataContext.value,e.priceDigit)+"</b>"},i.fillAlphas=.5,t.stockGraphs=[i];var r=new AmCharts.StockPanel;r.percentHeight=50,r.valueAxes=[{labelFunction:function(e,t,i){return numeral(e).format("0a").toUpperCase()}}];var n=new AmCharts.StockGraph;n.valueField="volume",n.type="column",n.connect=!0,n.showBalloon=!0,n.balloonText="<b>Volume: [[value]]</b>",n.fillAlphas=.5,r.stockGraphs=[n],this.stockChart.panels=[t,r];var o=new AmCharts.ChartScrollbarSettings;o.graph="g1",o.height=20,o.categoryBalloonDateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"DD MMM YYYY"},{period:"WW",format:"DD MMM YYYY"},{period:"MM",format:"MMM YYYY"},{period:"YYYY",format:"YYYY"}],this.stockChart.chartScrollbarSettings=o;var s=new AmCharts.ChartCursorSettings;s.fullWidth=!1,s.cursorAlpha=1,s.valueLineBalloonEnabled=!1,s.valueLineEnabled=!1,s.valueBalloonsEnabled=!0,s.volumeBalloonsEnabled=!0,s.valueLineAlpha=.5,this.stockChart.chartCursorSettings=s,this.stockChart.periodSelector={position:"right",width:90,periodsText:"",hideOutOfScopePeriods:!1,inputFieldsEnabled:!1,periods:[{period:"MM",selected:!0,count:1,label:"1 Month"},{period:"MM",count:3,label:"3 Months"},{period:"MM",count:6,label:"6 Months"},{period:"YYYY",count:1,label:"1 Year"}]};var a=this.$element.find(".chartdiv");this.stockChart.write(a[0])},t.$inject=["$element","IntradayChartPublishSubscriber","HistoricalChartPublishSubscriber","CurrentSymbolChangeEvent","$q"],t}(gs),Ap=function(){function e(){}return e.parseHistorical=function(e){var t=new wp;return t.symbol=e.instrumentID,t.priceDigit=e.priceDigit,t.pointData=e.value.map(function(e,t,i){var r=new Tp;return r.value=e.value,r.volume=e.volume,r.date=new Date(e.year,e.month-1,e.day,0,0,0,0),r}),t},e.parseIntraday=function(e){var t=new wp;return t.symbol=e.instrumentID,t.priceDigit=e.priceDigit,t.pointData=[],e.priceValueChartDatas.forEach(function(e){if(e.dataType===ze.NORMAL){var i=new Tp;i.value=e.value,i.volume=e.volume,i.date=new Date,i.date.setHours(e.timeHour),i.date.setMinutes(e.timeMinute),t.pointData.push(i)}}),t},e}(),wp=function(){function e(){}return e}(),Tp=function(){function e(){}return e}(),Dp=function(){function e(e,t,i){this.colorService=e,this.$filter=t,this.streamingAttribute=i,this.volumeFormatter=this.$filter("volume"),this.priceFilter=this.$filter("price"),this.percentChangeFilter=this.$filter("percentChange"),this.emptyPriceFilter=this.$filter("emptyPrice"),this.nullablePercentChangeFilter=this.$filter("nullablePercentChange")}return e.prototype.parse=function(e){switch(e.instrumentType){case ce.EQUITY:return e.instrumentSubType===de.ETF?this.parseETF(e):e.instrumentSubType===de.WARRANT?this.parseWarrant(e):e.instrumentSubType===de.DERIVATIVES_WARRANT?this.parseDerivativesWarrant(e):e.instrumentSubType===de.DR?this.parseDR(e):this.parseEquity(e);case ce.INDEX:return this.parseIndex(e);case ce.FUTURES:var t=Ze.lookup[e.initIntradayData.marketType];if(t===Ze.INDEX)return this.parseIndexFutures(e);if(t===Ze.CURRENCY)return this.parseCurrencyFutures(e);if(t===Ze.METAL||t===Ze.DEFERRED)return this.parseMetal(e);if(t===Ze.INTEREST_RATE)return this.parseInterestRateFutures(e);if(t===Ze.STOCK)return this.parseSingleStockFutures(e);if(t===Ze.AGRICULTURE)return"RSS3D"===e.initIntradayData.underlying?this.parseRSS3DFutures(e):this.parseRSS3Futures(e);break;case ce.OPTIONS:return this.parseOptions(e)}return[]},e.prototype.getFullCompanyName=function(e){if(!e.hasInitIntradayData())return"";var t=e.initIntradayData.instLongName;return e.instrumentType!==ce.FUTURES&&e.instrumentType!==ce.OPTIONS||(""!==e.initIntradayData.underlying&&(t+=" ("+e.initIntradayData.underlying+") "),t+=" "+e.initIntradayData.derivRemainigDays+" days to last trading date"),t},e.prototype.parseEquity=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getPrevCloseOrSettle(e),this.getAvgPrice(e),this.getAvgBuy(e),this.getAvgSell(e)];var i={};i.rows=[this.getVolume(e),this.getTotalValue(e)];var r=this.getEquityDynamicLabel(e);i.rows=i.rows.concat(r),i.rows.push(this.getOpen1(e)),i.rows.push(this.getOpen2(e));var n={},o=this.getPercentChange(e);n.rows=[this.getW52HighLow(e),o[0],o[1],o[2]];var s={};return s.rows=[this.getEps(e),this.getPE(e),this.getPBV(e),this.getYield(e)],[t,i,n,s]},e.prototype.parseETF=function(e){
var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getPrevCloseOrSettle(e),this.getAvgPrice(e),this.getAvgBuy(e),this.getAvgSell(e)];var i={},r=this.getEquityDynamicLabel(e);i.rows=[this.getVolume(e),this.getTotalValue(e)],i.rows=i.rows.concat(r),i.rows.push(this.getOpen1(e)),i.rows.push(this.getOpen2(e));var n={},o=this.getPercentChange(e);n.rows=[this.getW52HighLow(e),o[0],o[1],o[2]];var s={};return s.rows=[this.getINav(e),this.getAumSize(e)],[t,i,n,s]},e.prototype.parseWarrant=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getPrevCloseOrSettle(e),this.getAvgPrice(e),this.getAvgBuy(e),this.getAvgSell(e)];var i={},r=this.getEquityDynamicLabel(e);i.rows=[this.getVolume(e),this.getTotalValue(e)],i.rows=i.rows.concat(r),i.rows.push(this.getOpen1(e)),i.rows.push(this.getOpen2(e));var n={},o=this.getPercentChange(e);n.rows=[this.getW52HighLow(e),o[0],o[1],o[2]];var s={};return s.rows=[this.getStatus(e),this.getExerciseDate(e),this.getExerciseRatio(e),this.getExercisePrice(e),this.getTheoreticalPrice(e),this.getIntrinsicValue(e)],[t,i,n,s]},e.prototype.parseDerivativesWarrant=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getPrevCloseOrSettle(e),this.getAvgPrice(e),this.getAvgBuy(e),this.getAvgSell(e)];var i={},r=this.getEquityDynamicLabel(e);i.rows=[this.getVolume(e),this.getTotalValue(e)],i.rows=i.rows.concat(r),i.rows.push(this.getOpen1(e)),i.rows.push(this.getOpen2(e));var n={},o=this.getPercentChange(e);n.rows=[this.getW52HighLow(e),o[0],o[1],o[2]];var s={};s.rows=[this.getStatus(e),this.getMaturityDate(e),this.getLastTradeDate(e),this.getToLastTrade(e)];var a="I"===e.initIntradayData.dwType?this.getMultiplier(e):this.getExerciseRatio(e),c={};return c.rows=[a,this.getExercisePrice(e),this.getTheoreticalPrice(e),this.getIntrinsicValue(e),this.getImpVol(e)],[t,i,n,s,c]},e.prototype.parseDR=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getPrevCloseOrSettle(e),this.getAvgPrice(e),this.getAvgBuy(e),this.getAvgSell(e)];var i={};i.rows=[this.getVolume(e),this.getTotalValue(e)];var r=this.getEquityDynamicLabel(e);i.rows=i.rows.concat(r),i.rows.push(this.getOpen1(e)),i.rows.push(this.getOpen2(e));var n={},o=this.getPercentChange(e);n.rows=[this.getW52HighLow(e),o[0],o[1],o[2]];var s={};return s.rows=[this.getDRUnderlying(e),this.getDRUnderlyingExchange(e)],[t,i,n,s]},e.prototype.parseIndex=function(e){var t={};t.rows=[this.getHighLow(e),this.getMktCap(e),this.getYield(e),this.getPE(e),this.getPBV(e)];var i={};return i.rows=[this.getVolume(e),this.getTotalValue(e)],[t,i]},e.prototype.parseIndexFutures=function(e){var t=this.getDerivativesDynamicLabel(e),i={};i.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)],i.rows=i.rows.concat(t);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen1(e),this.getOpen2(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getUnderlying(e),this.getBasis(e),this.getTheoreticalPrice(e),this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getContactSpecfication(e)],[i,r,n,o]},e.prototype.parseCurrencyFutures=function(e){var t=this.getDerivativesDynamicLabel(e),i={};i.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)],i.rows=i.rows.concat(t);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen1(e),this.getOpen2(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getContactSpecfication(e),this.getSpotPriceLink(e)],[i,r,n,o]},e.prototype.parseMetal=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)];var i=this.getDerivativesDynamicLabel(e);t.rows=t.rows.concat(i);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen0(e),this.getOpen1(e),this.getOpen2(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getContactSpecfication(e)],o.rows=o.rows.concat(this.getMetalLink()),[t,r,n,o]},e.prototype.parseOptions=function(e){var t=this.getDerivativesDynamicLabel(e),i={};i.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)],i.rows=i.rows.concat(t);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen1(e),this.getOpen2(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getUnderlying(e),this.getBasis(e),this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getMoneyness(e),this.getTheoreticalPrice(e),this.getIntrinsicValue(e),this.getImpVol(e),this.getContactSpecfication(e)],[i,r,n,o]},e.prototype.parseInterestRateFutures=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)];var i=this.getDerivativesDynamicLabel(e);t.rows=t.rows.concat(i);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen1(e),this.getOpen2(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getContactSpecfication(e)],[t,r,n,o]},e.prototype.parseSingleStockFutures=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)];var i=this.getDerivativesDynamicLabel(e);t.rows=t.rows.concat(i);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen1(e),this.getOpen2(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getUnderlying(e),this.getBasis(e),this.getTheoreticalPrice(e),this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getContactSpecfication(e)],[t,r,n,o]},e.prototype.parseRSS3DFutures=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)];var i=this.getDerivativesDynamicLabel(e);t.rows=t.rows.concat(i);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen1(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getContactSpecfication(e)],[t,r,n,o]},e.prototype.parseRSS3Futures=function(e){var t={};t.rows=[this.getHighLow(e),this.getCeilingFloor(e),this.getAverage(e)];var i=this.getDerivativesDynamicLabel(e);t.rows=t.rows.concat(i);var r={};r.rows=[this.getVolume(e),this.getPreviosOI(e),this.getOpen1(e),this.getPrevCloseOrSettle(e)];var n={};n.rows=[this.getLastTradeDate(e),this.getW52HighLow(e)];var o={};return o.rows=[this.getContactSpecfication(e),this.getSpotPriceLink(e)],[t,r,n,o]},e.prototype.getPages=function(e){for(var t=[];e.length>4;){for(var i=[],r=0;r<4&&r<e.length;r++)i.push(e[r]);var n={blocks:i};t.push(n),e.shift()}if(e.length>0){for(var i=[],r=0;r<4;r++)e[r]?i.push(e[r]):i.push({});var n={blocks:i};t.push(n)}return t},e.prototype.getPreviousCloseOrSettleValue=function(e){return e.instrumentType===ce.FUTURES||e.instrumentType===ce.OPTIONS?e.initMarketData.previousSettle:e.initMarketData.previousClose},e.prototype.getHighLow=function(e){var t=[];if(!isNaN(e.initMarketData.high)&&!isNaN(e.initMarketData.low)){var i=this.colorService.priceColor(e.initMarketData.high,this.getPreviousCloseOrSettleValue(e),e.summaryData.totalVolume),r=this.colorService.priceColor(e.initMarketData.low,this.getPreviousCloseOrSettleValue(e),e.summaryData.totalVolume);t.push(new ap(this.priceFilter(e.initMarketData.high,e.priceDigit),i),new ap(this.priceFilter(e.initMarketData.low,e.priceDigit),r))}return{label:"High/Low",value:t,type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getDRUnderlying=function(e){return e.initIntradayData.underlyingUrl?{label:"Underlying",value:[new ap(""+e.initIntradayData.underlyingUrl,ae.WHITE,e.initIntradayData.underlyingCompany)],type:cp.LINK_TOOLTIP,isBlink:!1}:{label:"Underlying",value:[new ap(e.initIntradayData.underlyingCompany,ae.WHITE,e.initIntradayData.underlyingCompany)],type:cp.LABEL_VALUE_TOOLTIP,isBlink:!1}},e.prototype.getDRUnderlyingExchange=function(e){return{label:"Exchange",value:[new ap(e.initIntradayData.underlyingExchange,ae.WHITE,e.initIntradayData.underlyingExchange)],type:cp.LABEL_VALUE_TOOLTIP,isBlink:!1}},e.prototype.getCeilingFloor=function(e){return{label:"Ceiling/Floor",value:[new ap(this.priceFilter(e.initMarketData.ceiling,e.priceDigit),this.colorService.ceilFloorColor(e.initMarketData.ceiling,this.getPreviousCloseOrSettleValue(e))),new ap(this.priceFilter(e.initMarketData.floor,e.priceDigit),this.colorService.ceilFloorColor(e.initMarketData.floor,this.getPreviousCloseOrSettleValue(e)))],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getPrevCloseOrSettle=function(e){var t="";return t=e.instrumentType===ce.FUTURES||e.instrumentType===ce.OPTIONS?"Prev. Settle":"Previous Close",{label:t,value:[new ap(this.emptyPriceFilter(this.getPreviousCloseOrSettleValue(e),e.priceDigit),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getAverage=function(e){return{label:"Average",value:[new ap(this.priceFilter(e.summaryData.average,e.priceDigit),this.colorService.priceColor(e.summaryData.average,this.getPreviousCloseOrSettleValue(e),e.summaryData.totalVolume))],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getAvgPrice=function(e){return{label:"Average Price",value:[new ap(this.priceFilter(e.summaryData.average,e.priceDigit),this.colorService.priceColor(e.summaryData.average,this.getPreviousCloseOrSettleValue(e),e.summaryData.totalVolume))],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getAvgBuy=function(e){return{label:"Average Buy",value:[new ap(this.priceFilter(e.summaryData.averageBuy,e.priceDigit),this.colorService.priceColor(e.summaryData.averageBuy,this.getPreviousCloseOrSettleValue(e),e.summaryData.totalVolume))],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getAvgSell=function(e){return{label:"Average Sell",value:[new ap(this.priceFilter(e.summaryData.averageSell,e.priceDigit),this.colorService.priceColor(e.summaryData.averageSell,this.getPreviousCloseOrSettleValue(e),e.summaryData.totalVolume))],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getVolume=function(e){return{label:"Volume",value:[new ap(this.volumeFormatter(e.summaryData.totalVolume),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getTotalValue=function(e){this.priceFilter();var t=e.instrumentType===ce.EQUITY?e.summaryData.equityTotalValue:e.instrumentType===ce.INDEX?e.summaryData.indexTotalValue:e.summaryData.openInterest;return{label:"Value (K)",value:[new ap(this.volumeFormatter(t),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getW52HighLow=function(e){var t=[],i=e.instrumentType===ce.EQUITY?"52W High/Low":"Life High/Low";if(!isNaN(e.initIntradayData.w52High)&&!isNaN(e.initIntradayData.w52Low)){var r=this.colorService.ceilFloorColor(e.initIntradayData.w52High,this.getPreviousCloseOrSettleValue(e)),n=this.colorService.ceilFloorColor(e.initIntradayData.w52Low,this.getPreviousCloseOrSettleValue(e));t.push(new ap(this.priceFilter(e.initIntradayData.w52High,e.priceDigit),r,e.initIntradayData.w52HighDate),new ap(this.priceFilter(e.initIntradayData.w52Low,e.priceDigit),n,e.initIntradayData.w52LowDate))}return{label:i,value:t,type:cp.LABEL_VALUE_TOOLTIP,isBlink:!0}},e.prototype.getPercentChange=function(e){var t={label:"%Change 1W",value:[new ap(this.nullablePercentChangeFilter(e.initIntradayData.percentChg1W,e.priceDigit,this.getPreviousCloseOrSettleValue(e),e.summaryData.lastDone),this.colorService.changeWithNaNColor(e.initIntradayData.percentChg1W))],type:cp.LABEL_VALUE,isBlink:!1},i={label:"%Change 1M",value:[new ap(this.nullablePercentChangeFilter(e.initIntradayData.percentChg1M,e.priceDigit,this.getPreviousCloseOrSettleValue(e),e.summaryData.lastDone),this.colorService.changeWithNaNColor(e.initIntradayData.percentChg1M))],type:cp.LABEL_VALUE,isBlink:!1},r={label:"%Change 3M",value:[new ap(this.nullablePercentChangeFilter(e.initIntradayData.percentChg3M,e.priceDigit,this.getPreviousCloseOrSettleValue(e),e.summaryData.lastDone),this.colorService.changeWithNaNColor(e.initIntradayData.percentChg3M))],type:cp.LABEL_VALUE,isBlink:!1};return[t,i,r]},e.prototype.getOpen0=function(e){return{label:"Open0 (Night)",value:[new ap(this.priceFilter(e.projectedData.openPrice0,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice0))],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getOpen1=function(e){return{label:"Open1 (Morning)",value:[new ap(this.priceFilter(e.projectedData.openPrice1,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice1))],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getOpen2=function(e){return{label:"Open2 (Afternoon)",value:[new ap(this.priceFilter(e.projectedData.openPrice2,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice2))],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getEps=function(e){var t=e.initIntradayData.eps;return{label:"EPS",value:[new ap(this.priceFilter(t,e.priceDigit),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getPE=function(e){var t=e.initIntradayData.pe;return{label:"P/E",value:[new ap(this.priceFilter(t,e.priceDigit),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getPBV=function(e){var t=e.initIntradayData.pbv;return{label:"P/BV",value:[new ap(this.priceFilter(t,e.priceDigit),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getYield=function(e){var t=e.initIntradayData["yield"];return{label:"%YIELD",value:[new ap(this.priceFilter(t,e.priceDigit),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getMktCap=function(e){var t=e.initIntradayData.marketCap/1e6;return{label:"Market Cap. (MB)",value:[new ap(this.priceFilter(t,2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getINav=function(e){var t=e.summaryData.iNav;return{label:"iNAV",value:[new ap(this.priceFilter(t,4),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getAumSize=function(e){var t=e.initIntradayData.aumSize;return{label:"AUM Size",value:[new ap(this.priceFilter(t,e.priceDigit),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getStatus=function(e){var t=e.initIntradayData.wIsTypeCall?1:-1,i=e.summaryData.warrantUnderlyingPrice,r="ATM",n=ae.UNCHANGED;return(i-e.initIntradayData.exercisePrice)*t<0?(r="OTM",n=ae.LOSER):(i-e.initIntradayData.exercisePrice)*t>0&&(r="ITM",n=ae.GAINER),{label:"Status",value:[new ap(r,n)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getExerciseDate=function(e){return{label:"Exercise Date",value:[new ap(e.initIntradayData.exerciseDate,ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getExerciseRatio=function(e){return{label:"Exercise Ratio",value:[new ap(e.initIntradayData.wExerciseRatio,ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getExercisePrice=function(e){return{label:"Exercise Price",value:[new ap(this.priceFilter(e.initIntradayData.exercisePrice,5),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getMaturityDate=function(e){return{label:"Maturity Date",value:[new ap(e.initIntradayData.exerciseDate,ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getLastTradeDate=function(e){var t=e.instrumentType===ce.EQUITY?e.initIntradayData.dwLastTradingDate:e.initIntradayData.derivLastTradingDate;return{label:"Last Trade Date",value:[new ap(t,ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getToLastTrade=function(e){var t=e.initIntradayData.dwRemainingDays,i=1===t?"Day":"Days";return{label:"To Last Trade",value:[new ap(t+" "+i,ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getMultiplier=function(e){return{label:"Multiplier",value:[new ap(this.priceFilter(e.initIntradayData.dwMultiplier,5),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getTheoreticalPrice=function(e){var t;switch(e.instrumentType){case ce.EQUITY:t=e.summaryData.warrantTheoricalPrice;break;case ce.FUTURES:case ce.OPTIONS:t=e.summaryData.theoreticalPrice}return{label:"Theo. Price",value:[new ap(this.priceFilter(t,2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getIntrinsicValue=function(e){return{label:"Intrinsic Value",value:[new ap(this.priceFilter(this.calculateIntrinsicValue(e),2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getImpVol=function(e){var t=e.instrumentType===ce.EQUITY?e.summaryData.warrantImpliedVolatility:e.summaryData.optionsImpliedVolatility;return{label:"Implied Volatility",value:[new ap(this.priceFilter(t,2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getWarrantDelta=function(e){return{label:"Delta",value:[new ap(this.priceFilter(e.summaryData.warrantDelta,2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getOptionsDelta=function(e){return{label:"Delta",value:[new ap(this.priceFilter(e.summaryData.optionsDelta,2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getPreviosOI=function(e){return{label:"Previous OI",value:[new ap(this.volumeFormatter(e.summaryData.openInterest),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!1}},e.prototype.getContactSpecfication=function(e){return{label:"Contract Specifications",value:[new ap(this.streamingAttribute.primaryMMHost+"/realtime/streaming5/ContractSpec.jsp?symbol="+e.instrumentID,ae.WHITE)],type:cp.LINK,isBlink:!1}},e.prototype.getSpotPriceLink=function(e){var t=Ze.lookup[e.initIntradayData.marketType],i=t===Ze.CURRENCY?"Currency":t===Ze.AGRICULTURE?"Agriculture":"";return{label:i+" Spot Price",value:[new ap("http://www.tfex.co.th/th/index.html",ae.WHITE)],type:cp.LINK,isBlink:!1}},e.prototype.getMetalLink=function(){var e={label:"Kitco",value:[new ap("http://www.kitco.com/market/index.html",ae.WHITE)],type:cp.LINK,isBlink:!1},t={label:"Gold Trader",value:[new ap("http://www.goldtraders.or.th/",ae.WHITE)],type:cp.LINK,isBlink:!1},i={label:"Gold Price Converter",value:[new ap("http://www.tfex.co.th/th/education/pricing_gold.html",ae.WHITE)],type:cp.LINK,isBlink:!1};return[e,t,i]},e.prototype.getUnderlying=function(e){return{label:"Underlying",value:[new ap(this.priceFilter(e.summaryData.derivUnderlyingPrice,2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getBasis=function(e){var t=e.summaryData.lastDone||e.initMarketData.previousSettle,i=e.summaryData.derivUnderlyingPrice,r=t-i;return{label:"Basis",value:[new ap(this.priceFilter(r,2),ae.WHITE)],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getMoneyness=function(e){var t;return e.initIntradayData.isCallOptions?t=e.initIntradayData.strikePrice<e.summaryData.derivUnderlyingPrice?new ap("ITM",ae.GAINER):e.initIntradayData.strikePrice>e.summaryData.derivUnderlyingPrice?new ap("OTM",ae.LOSER):new ap("ATM",ae.UNCHANGED):e.initIntradayData.isCallOptions||(t=e.initIntradayData.strikePrice<e.summaryData.derivUnderlyingPrice?new ap("OTM",ae.LOSER):e.initIntradayData.strikePrice>e.summaryData.derivUnderlyingPrice?new ap("ITM",ae.GAINER):new ap("ATM",ae.UNCHANGED)),{label:"Moneyness",value:[t],type:cp.LABEL_VALUE,isBlink:!0}},e.prototype.getEquityDynamicLabel=function(e){var t=[],i={},r={};switch(i.isBlink=!0,i.type=cp.LABEL_VALUE,r.isBlink=!0,r.type=cp.LABEL_VALUE,e.projectedData.currentState){case Ni.PRE_OPEN_1:i.label="Proj. Open1",i.value=[new ap(this.priceFilter(e.projectedData.projectedPrice,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.projectedPrice))],t.push(i),r.label="Proj. Vol",r.value=[new ap(this.volumeFormatter(e.projectedData.projectedVolume),ae.UNCHANGED)],t.push(r);break;case Ni.OPEN_1:i.label="Open1",i.value=[new ap(this.priceFilter(e.projectedData.openPrice1,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice1))],t.push(i);break;case Ni.PRE_OPEN_2:i.label="Proj. Open2",i.value=[new ap(this.priceFilter(e.projectedData.projectedPrice,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.projectedPrice))],t.push(i),r.label="Proj. Vol",r.value=[new ap(this.volumeFormatter(e.projectedData.projectedVolume),ae.UNCHANGED)],t.push(r);break;case Ni.OPEN_2:i.label="Open2",i.value=[new ap(this.priceFilter(e.projectedData.openPrice2,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice2))],t.push(i);break;case Ni.PRE_CLOSE:i.label="Proj. Close",i.value=[new ap(this.priceFilter(e.projectedData.projectedPrice,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.projectedPrice))],t.push(i),r.label="Proj. Vol",r.value=[new ap(this.volumeFormatter(e.projectedData.projectedVolume),ae.UNCHANGED)],t.push(r);break;case Ni.CLOSE:i.label="Close",i.value=[new ap(this.priceFilter(e.summaryData.lastDone,e.priceDigit),this.getDynamicLabelPriceColor(e,e.summaryData.lastDone))],t.push(i);break;case Ni.PRE_OPEN:i.label="Proj. Open",i.value=[new ap(this.priceFilter(e.projectedData.projectedPrice,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.projectedPrice))],t.push(i),r.label="Proj. Vol",r.value=[new ap(this.volumeFormatter(e.projectedData.projectedVolume),ae.UNCHANGED)],t.push(r)}return t},e.prototype.getDynamicLabelPriceColor=function(e,t){return 0===t?ae.WHITE:this.colorService.priceColor(t,this.getPreviousCloseOrSettleValue(e),1)},e.prototype.getDerivativesDynamicLabel=function(e){var t=[],i={};switch(i.isBlink=!0,i.type=cp.LABEL_VALUE,e.projectedData.currentState){case Ni.PRE_OPEN_0:i.label="Proj. Open0",i.value=[new ap(this.priceFilter(e.projectedData.projected0,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.projected0))],t.push(i);break;case Ni.OPEN_0:i.label="Open0",i.value=[new ap(this.priceFilter(e.projectedData.openPrice0,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice0))],t.push(i);break;case Ni.PRE_OPEN_1:i.label="Proj. Open1",i.value=[new ap(this.priceFilter(e.projectedData.projectedPrice,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.projectedPrice))],t.push(i);break;case Ni.OPEN_1:i.label="Open1",i.value=[new ap(this.priceFilter(e.projectedData.openPrice1,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice1))],t.push(i);break;case Ni.PRE_OPEN_2:i.label="Proj. Open2",i.value=[new ap(this.priceFilter(e.projectedData.projected2,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.projected2))],t.push(i);break;case Ni.OPEN_2:i.label="Open2",i.value=[new ap(this.priceFilter(e.projectedData.openPrice2,e.priceDigit),this.getDynamicLabelPriceColor(e,e.projectedData.openPrice2))],t.push(i);break;case Ni.CLOSE:i.label="Close",i.value=[new ap(this.priceFilter(e.summaryData.lastDone,e.priceDigit),this.getDynamicLabelPriceColor(e,e.summaryData.lastDone))],t.push(i);break;case Ni.PREVIOUS_SETTLE:i.label="P. Settlement",i.value=[new ap(this.priceFilter(e.initMarketData.previousSettle,e.priceDigit),this.getDynamicLabelPriceColor(e,e.initMarketData.previousSettle))],t.push(i);break;case Ni.SETTLE:i.label="Settlement",i.value=[new ap(this.priceFilter(e.summaryData.settlePrice,e.priceDigit),this.getDynamicLabelPriceColor(e,e.summaryData.settlePrice))],t.push(i)}return t},e.prototype.calculateIntrinsicValue=function(e){var t,i,r,n,o,s;return e.instrumentType===ce.OPTIONS?(s=e.initIntradayData.isCallOptions,n=e.initIntradayData.strikePrice,r=1):(s=e.initIntradayData.wIsTypeCall,n=e.initIntradayData.exercisePrice,e.instrumentSubType===de.DERIVATIVES_WARRANT?e.initIntradayData.dwType===ot.INDEX_DW?r=e.initIntradayData.dwMultiplier:e.initIntradayData.dwType===ot.STOCK_DW&&(r=this.getMultiplierFromExercisRatio(e.initIntradayData.wExerciseRatio)):e.instrumentSubType===de.WARRANT&&(r=this.getMultiplierFromExercisRatio(e.initIntradayData.wExerciseRatio))),i=e.instrumentType===ce.EQUITY?e.summaryData.warrantUnderlyingPrice:e.summaryData.derivUnderlyingPrice,o=s?i-n:n-i,t=Math.max(0,o)*r},e.prototype.getMultiplierFromExercisRatio=function(e){var t=e.split(":"),i=t[0],r=t[1];return void 0===r?parseFloat(i):parseFloat(r)/parseFloat(i)},e.$inject=["ColorService","$filter","StreamingAttribute"],e}(),Ip=function(){function e(){}return e.parse=function(t){var i=new _i;i.priceDigit=2,i.previousClose=t.initMarketData.previousClose,i.label1="Vol/Value(K)",i.label2="High/Low",i.label3="Ceil/Floor",i.label4="Avg/Close",i.topValue2=t.initMarketData.high,i.bottomValue2=t.initMarketData.low,i.topValue3=t.initMarketData.ceiling,i.bottomValue3=t.initMarketData.floor,i.bottomValue4=t.initMarketData.previousClose,i.lastDone=t.summaryData.lastDone,i.change=t.summaryData.change,i.percentChange=t.summaryData.percentChange,i.totalVolume=t.summaryData.totalVolume,i.topValue1=t.summaryData.totalVolume,i.bottomValue1=t.summaryData.totalValue,i.topValue4=t.summaryData.average,t.summaryData.status.length>0?i.status="("+t.summaryData.status+")":i.status="",i.topValue2=e.getHighValue(t,i.topValue2),i.bottomValue2=e.getLowValue(t,i.bottomValue2),i.dynamicLabel=e.getEquityDynamicLabel(t,i.totalVolume);var r=new Ri((!0));r.state="Open1",r.price=t.projectedData.openPrice1;var n=new Ri((!0));return n.state="Open2",n.price=t.projectedData.openPrice2,i.statePrices=[r,n],i.isStatePricesAvail=!0,i},e.getHighValue=function(e,t){var i=e.summaryData.lastDone;return!isNaN(i)&&e.summaryData.totalVolume>0&&(isNaN(t)||i>t)?i:t},e.getLowValue=function(e,t){var i=e.summaryData.lastDone;return!isNaN(i)&&e.summaryData.totalVolume>0&&(isNaN(t)||i<t)?i:t},e.getEquityDynamicLabel=function(e,t){var i=new Mi;switch(e.projectedData.currentState){case Ni.PRE_OPEN_1:i.label="Proj. Open 1 (Price/Vol)",i.price=e.projectedData.projectedPrice,i.comparedVolume=e.projectedData.projectedVolume,i.volume=e.projectedData.projectedVolume;break;case Ni.OPEN_1:i.label="Open 1",i.price=e.projectedData.openPrice1,i.comparedVolume=t;break;case Ni.PRE_OPEN_2:i.label="Proj. Open 2 (Price/Vol)",i.price=e.projectedData.projectedPrice,i.comparedVolume=e.projectedData.projectedVolume,i.volume=e.projectedData.projectedVolume;break;case Ni.OPEN_2:i.label="Open 2",i.price=e.projectedData.openPrice2,i.comparedVolume=t;break;case Ni.PRE_CLOSE:i.label="Proj. Close (Price/Vol)",i.price=e.projectedData.projectedPrice,i.comparedVolume=e.projectedData.projectedVolume,i.volume=e.projectedData.projectedVolume;break;case Ni.CLOSE:i.label="Close",i.price=e.summaryData.lastDone,i.comparedVolume=t;break;case Ni.PRE_OPEN:i.label="Proj. Open (Price/Vol)",i.price=e.projectedData.projectedPrice,i.comparedVolume=e.projectedData.projectedVolume,i.volume=e.projectedData.projectedVolume}return i.comparedVolume=0===i.price?0:i.comparedVolume,i},e}(),Pp=function(){function e(){}return e.parseBidOffer=function(e,t,i){if(e.instrumentType===ce.INDEX)return new ht;var r;r=angular.copy(t,r),r.priceDigit=2,r.isBidMatch=!1,r.isOfferMatch=!1;var n=i<e.summaryData.totalVolume,o=t.bidVolume1>e.bidofferData.bidVolume1,s=t.offerVolume1>e.bidofferData.askVolume1;return n&&(o&&(r.isBidMatch=!0),s&&(r.isOfferMatch=!0)),r.previousClose=e.initMarketData.previousClose,r.bidFlag=e.bidofferData.bidFlag,r.offerFlag=e.bidofferData.askFlag,r.bidVolume1=e.bidofferData.bidVolume1,r.bidPrice1=e.bidofferData.bidPrice1,r.offerPrice1=e.bidofferData.askPrice1,r.offerVolume1=e.bidofferData.askVolume1,r.bidVolume2=e.bidofferData.bidVolume2,r.bidPrice2=e.bidofferData.bidPrice2,r.offerPrice2=e.bidofferData.askPrice2,r.offerVolume2=e.bidofferData.askVolume2,r.bidVolume3=e.bidofferData.bidVolume3,r.bidPrice3=e.bidofferData.bidPrice3,r.offerPrice3=e.bidofferData.askPrice3,r.offerVolume3=e.bidofferData.askVolume3,r.bidVolume4=e.bidofferData.bidVolume4,r.bidPrice4=e.bidofferData.bidPrice4,r.offerPrice4=e.bidofferData.askPrice4,r.offerVolume4=e.bidofferData.askVolume4,r.bidVolume5=e.bidofferData.bidVolume5,r.bidPrice5=e.bidofferData.bidPrice5,r.offerPrice5=e.bidofferData.askPrice5,r.offerVolume5=e.bidofferData.askVolume5,r},e}(),Op=function(){function e(){}return e.parse=function(e){var t;return t=new El,t.instrumentID=e.instrumentID,t.lastDone=e.summaryData.lastDone,t.priceDigit=2,t.percentBuyVol=e.summaryData.percentBuy,t.percentSellVol=e.summaryData.percentSell,t},e}(),kp=function(e){function t(t,i,r,n,o){var s=e.call(this)||this;return s.currentSymbolChangeEvent=t,s.instrumentOddLotInfoPublishSubscriber=i,s.colorService=r,s.instrumentOddLotTickerPublishSubscriber=n,s.timeService=o,s.onCurrentSymbolChangeCallback=s.onCurrentSymbolChange.bind(s),s.onReceiveInstrumentOddLotInfoCallback=s.onReceiveInstrumentOddLotInfo.bind(s),s.onReceiveInstrumentOddLotTickerCallBack=s.onReceiveInstrumentOddLotTicker.bind(s),s.clearView(),s}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallback)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallback),this.unsubscribeCurrentInstrumentPubSub()},t.prototype.clearView=function(){this.bidOffer=new ht,this.overview=new _i,this.volumeByPriceView=new El,this.tickers=[]},t.prototype.onCurrentSymbolChange=function(e){this.currentSymbol&&this.currentSymbol.name===e.name||(this.clearView(),this.unsubscribeCurrentInstrumentPubSub(),this.currentSymbol=e,this.instrumentOddLotInfoPublishSubscriber.subscribe(e.name,this.onReceiveInstrumentOddLotInfoCallback),this.instrumentOddLotTickerPublishSubscriber.subscribe(e.name,this.onReceiveInstrumentOddLotTickerCallBack),this.clearTimeStamp())},t.prototype.unsubscribeCurrentInstrumentPubSub=function(){this.currentSymbol&&(this.instrumentOddLotInfoPublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveInstrumentOddLotInfoCallback),this.instrumentOddLotTickerPublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveInstrumentOddLotTickerCallBack))},t.prototype.onReceiveInstrumentOddLotInfo=function(e){this.overview=Ip.parse(e),this.bidOffer=Pp.parseBidOffer(e,this.bidOffer,this.totalVolume),this.totalVolume=e.summaryData.totalVolume,this.volumeByPriceView=Op.parse(e),this.updateTimeStamp()},t.prototype.onReceiveInstrumentOddLotTicker=function(e){var i=e.reverse().concat(this.tickers);this.tickers=i.slice(0,t.NUMBER_OF_TICKERS_ROW)},t.prototype.subscribeCurrentInstrumentPubSub=function(){this.currentSymbol&&(this.instrumentOddLotInfoPublishSubscriber.subscribe(this.currentSymbol.name,this.onReceiveInstrumentOddLotInfoCallback),this.instrumentOddLotTickerPublishSubscriber.subscribe(this.currentSymbol.name,this.onReceiveInstrumentOddLotTickerCallBack))},t.prototype.refresh=function(){this.currentSymbol&&this.instrumentOddLotInfoPublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveInstrumentOddLotInfoCallback),this.subscribeCurrentInstrumentPubSub()},t.prototype.updateTimeStamp=function(){this.lastUpdateTimeStamp=this.getCurrentDateTimestamp()},t.prototype.clearTimeStamp=function(){this.lastUpdateTimeStamp="-"},t.prototype.getCurrentDateTimestamp=function(){var e=this.timeService.getTime();if(!e.isTimeSync)return this.timeService.EMPTY_LAST_UPDATE;var t=e.syncDate;return t.format("HH:mm:ss")},t.prototype.getSymbolName=function(){return this.currentSymbol?this.currentSymbol.name:""},t.$inject=["CurrentSymbolChangeEvent","InstrumentOddLotInfoPublishSubscriber","ColorService","InstrumentOddLotTickerPublishSubscriber","TimeService"],t.NUMBER_OF_TICKERS_ROW=8,t}(gs),$p=function(){function e(){}return e}(),Lp=function(){function e(){}return e}(),Np=function(){function e(){}return e}(),Mp=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this,i)||this;return c.piwikService=t,c.pageService=i,c.currentSymbolChangeEvent=r,c.instrumentService=n,c.instrumentInfoPublishSubscriber=o,c.instrumentTickerPubSub=s,c.colorService=a,c.onReceiveUnderlyingSymbolInfoCallBack=c.onReceiveUnderlyingSymbolInfo.bind(c),c.onReceiveUnderlyingSymbolTickerCallBack=c.onReceiveUnderlyingSymbolTicker.bind(c),c.onCurrentSymbolChangeCallBack=c.onCurrentSymbolChange.bind(c),c.overview=new _i,c.bidOffer=new ht,c.tickers=[],c.isThreeBidsOffers=!0,c}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.unsubscribeUnderlyingData()},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentSymbolChange=function(e){var t=this;if(this.unsubscribeUnderlyingData(),this.clearData(e),this.currentUnderlyingSymbol=void 0,e.type.equal(ar.OPTIONS)){var i=new dt(".SET50",ar.OPTIONS);this.instrumentInfoPublishSubscriber.subscribe(i.name,Hr.Market,this.onReceiveUnderlyingSymbolInfoCallBack),
this.instrumentTickerPubSub.subscribe(i.name,this.onReceiveUnderlyingSymbolTickerCallBack),this.currentUnderlyingSymbol=i}else e.underlying&&e.underlying.length>0&&this.instrumentService.validateUnderlyingSymbolByBrokerLicense(e.underlying).then(function(e){t.instrumentInfoPublishSubscriber.subscribe(e.name,Hr.Market,t.onReceiveUnderlyingSymbolInfoCallBack),t.instrumentTickerPubSub.subscribe(e.name,t.onReceiveUnderlyingSymbolTickerCallBack),t.currentUnderlyingSymbol=e});this.currentSymbol=e},t.prototype.clearData=function(e){this.currentSymbol&&this.currentSymbol.name!==e.name&&(this.overview=new _i,this.bidOffer=new ht,this.volumeByPriceView=new El),this.tickers=[]},t.prototype.unsubscribeUnderlyingData=function(){this.currentUnderlyingSymbol&&(this.instrumentInfoPublishSubscriber.unsubscribe(this.currentUnderlyingSymbol.name,this.onReceiveUnderlyingSymbolInfoCallBack),this.instrumentTickerPubSub.unsubscribe(this.currentUnderlyingSymbol.name,this.onReceiveUnderlyingSymbolTickerCallBack))},t.prototype.onReceiveUnderlyingSymbolInfo=function(e){this.overview=Bi.parse(e,this.overview),this.overview&&(this.overview.tsLevel=this.instrumentService.getTSLevel(this.currentUnderlyingSymbol.name)),this.bidOffer=Cl.parseBidOffer(e,this.bidOffer,this.totalVolume),this.totalVolume=Cl.parseTotalVolume(e,this.totalVolume),this.updatePercentBuySell(e)},t.prototype.onReceiveUnderlyingSymbolTicker=function(e){var t=e.reverse().concat(this.tickers);this.tickers=t.slice(0,8)},t.prototype.updatePercentBuySell=function(e){e.hasSummaryData()&&(this.volumeByPriceView=new El,this.volumeByPriceView.percentBuyVol=e.summaryData.percentBuy,this.volumeByPriceView.percentSellVol=e.summaryData.percentSell)},t.prototype.getBidOfferCategory=function(){return rt.QUOTE_UNDERLYING},t.prototype.getSymbolName=function(){return this.currentUnderlyingSymbol?this.currentUnderlyingSymbol.name:""},t.$inject=["PiwikService","PageService","CurrentSymbolChangeEvent","InstrumentService","InstrumentInfoPublishSubscriber","InstrumentTickerPublishSubscriber","ColorService"],t}(ys),Rp=function(){function e(e){this.colorService=e}return e.$inject=["ColorService"],e}(),_p=function(){function e(){}return e}(),Vp=function(){function e(){}return e}(),Bp=function(){function e(){}return e}(),xp=function(){function e(){}return e.HEADER="header",e.SUB_HEADER="subHeader",e.DATA="data",e}(),Fp=function(){function e(){}return e.parse=function(e){var t=new Vp;t.instrumentID=e.instrumentID,t.rowData=[];var i=["header_financial","subheader_financial_data","assets","liabilities","equity","paidupCap","revenue","netProfit","eps","subheader_financial_ratio","percentROA","percentROE","percentNetMargin"],r=["Period as of","Financial Data","Assets","Liabilities","Equity","Paid-up Capital","Revenue","Net Profit","EPS (Baht)","Financial Ratio","ROA (%)","ROE (%)","Net Profit Margin%"];i.forEach(function(n){var o=new Bp;if(o.value=[],"header_financial"===n){o.type=xp.HEADER,o.label=r[0];for(var s=0;s<e.financialAndStatistics.length;s++)e.financialAndStatistics[s].financial?o.value[s]=e.financialAndStatistics[s].financial.periodAsOfQuarter+" '"+e.financialAndStatistics[s].financial.periodAsOfYear.substring(2)+" ("+e.financialAndStatistics[s].financial.periodAsOfDate+")":o.value[s]=""}else if("subheader_financial_data"===n){o.type=xp.SUB_HEADER,o.label=r[1];for(var s=0;s<e.financialAndStatistics.length;s++)o.value[s]=""}else if("subheader_financial_ratio"===n){o.type=xp.SUB_HEADER,o.label=r[9];for(var s=0;s<e.financialAndStatistics.length;s++)o.value[s]=""}else{o.type=xp.DATA,o.label=r[i.indexOf(n)];for(var s=0;s<e.financialAndStatistics.length;s++)e.financialAndStatistics[s].financial&&e.financialAndStatistics[s].financial[n]?o.value[s]=yt.formatPrice(e.financialAndStatistics[s].financial[n],2):o.value[s]=""}t.rowData.push(o)});var n=["statisticAsOfDate","price","marketCap","fsAsOfDate","pe","pbv","valuePerShare","percentYield"],o=["Statistic as of","Last Price (Baht)","Market Cap.","F/S Period (As of date)","P/E","P/BV","Book Value per share (Baht)","Dividend Yield (%)"];return n.forEach(function(i){var r=new Bp;r.value=[],"statisticAsOfDate"===i?r.type=xp.HEADER:r.type=xp.DATA,r.label=o[n.indexOf(i)];for(var s=0;s<e.financialAndStatistics.length;s++)e.financialAndStatistics[s].statistic&&e.financialAndStatistics[s].statistic[i]?"statisticAsOfDate"===i||"fsAsOfDate"===i?r.value[s]=e.financialAndStatistics[s].statistic[i]+"":r.value[s]=yt.formatPrice(e.financialAndStatistics[s].statistic[i],2):r.value[s]="";t.rowData.push(r)}),t},e}(),Up=function(){function e(e){this.message=e}return e}(),qp=function(){function e(e,t){this.$q=e,this.itpService=t}return e.prototype.getMarginableSecurities=function(e,t){var i=this,r=new jp;return r.symbol=e,r.accNo=t,this.itpService.getMarginableSecurities(r).then(function(e){var t=Hp.parse(e);return t instanceof Wp?i.$q.resolve(t):t instanceof Up?i.$q.reject(t):void 0},function(e){return i.$q.reject(e)})},e.$inject=["$q","ITPService"],e}(),jp=function(){function e(){}return e}(),Hp=function(){function e(){}return e.parse=function(e){var t=new Wp,i=e.split(hi.LV1),r="T"===i[0];if(r){var n=i[2].split(hi.LV2),o=i[3].split(hi.LV2);return""!==n[0].trim()&&(t.brokerInitialMargin=n[0]),""!==n[1].trim()&&(t.tsfcInitialMargin=n[1]),""!==o[0].trim()&&(t.brokerGrade=o[0].trim()),""!==o[1].trim()&&(t.tsfcGrade=o[1].trim()),t}var s=new Up(i[1]);return s},e}(),Wp=function(){function e(){this.brokerInitialMargin="-",this.tsfcInitialMargin="-",this.brokerGrade="N/A",this.tsfcGrade="N/A"}return e}(),Yp=function(e){function t(t){var i=e.call(this,t)||this;return i.pageService=t,i.activatedPage=i.FIRST,i}return ne(t,e),t.prototype.startService=function(){void 0===this.lastPageIdStore&&(this.activatedPage=this.FIRST)},t.prototype.stopService=function(){void 0!==this.lastPageIdStore||(this.activatedPage=this.NON)},Object.defineProperty(t.prototype,"active",{get:function(){return void 0!==this.lastPageIdStore?this.lastPageIdStore:this.activatedPage},set:function(e){return void 0!==this.lastPageIdStore?void(this.lastPageIdStore=e):void(this.activatedPage=e)},enumerable:!0,configurable:!0}),t.$inject=["PageService"],t}(op),Gp=function(e){function t(t,i,r,n,o,s){var a=e.call(this)||this;return a.currentSymbolChangeEvent=t,a.accountService=i,a.currentAccountChangeEvent=r,a.userInfoService=n,a.marginRateService=o,a.alertService=s,a.onCurrentSymbolChangeCallBack=a.onCurrentSymbolChange.bind(a),a.onCurrentAccountChangeCallBack=a.onCurrentAccountChange.bind(a),a.onRecieveEquityAccountInfoCallBack=a.onRecieveEquityAccountInfo.bind(a),a}return ne(t,e),t.prototype.startService=function(){this.clearViewData(),this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack),this.userInfoService.isMarketRep()&&this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack),this.userInfoService.isMarketRep()&&(this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallBack),this.currentAccountInfo&&this.accountService.unsubscribeGetEquityAccountInfo(this.currentAccountInfo.accountNo,this.onRecieveEquityAccountInfoCallBack))},t.prototype.onCurrentSymbolChange=function(e){if(this.clearViewData(),this.userInfoService.isInvestor()){var t;this.accountService.accountEquityList.some(function(e){if(e.accountType===yi.CREDIT_BALANCE)return t=e,!0}),this.getMarginableSecurities(e,t.accountNo)}this.userInfoService.isMarketRep()&&this.currentAccountInfo&&this.currentAccountInfo.accountType===yi.CREDIT_BALANCE&&this.getMarginableSecurities(e,this.currentAccountInfo.accountNo),this.currentSymbol=e},t.prototype.onCurrentAccountChange=function(e){this.clearViewData(),this.userInfoService.isMarketRep()&&(this.currentAccountInfo&&this.accountService.unsubscribeGetEquityAccountInfo(this.currentAccountInfo.accountNo,this.onRecieveEquityAccountInfoCallBack),e.isEmptyAccount?this.currentAccountInfo=void 0:this.accountService.subscribeGetEquityAccountInfo(e.accountNo,this.onRecieveEquityAccountInfoCallBack))},t.prototype.onRecieveEquityAccountInfo=function(e){this.clearViewData(),this.currentAccountInfo=e,e.accountType===yi.CREDIT_BALANCE&&this.currentSymbol&&this.getMarginableSecurities(this.currentSymbol,e.accountNo)},t.prototype.getMarginableSecurities=function(e,t){var i=this;this.clearViewData(),this.marginRateService.getMarginableSecurities(e.name,t).then(function(e){i.view=e})},t.prototype.clearViewData=function(){this.view=new Wp},t.$inject=["CurrentSymbolChangeEvent","AccountService","CurrentAccountChangeEvent","UserInfoService","MarginRateService","AlertService","AccountService"],t}(gs);angular.module("quote",["event-emitter","service","web-api"]).service("QuoteDetailViewParserService",Dp).service("MarginRateService",qp).component("quote",{template:i(/*! ../../html/quote/quote.html */163),controller:bp,bindings:{page:"@"}}).component("quoteIntraday",{template:i(/*! ../../html/quote/quote-intraday.html */164),controller:lp,bindings:{page:"@"}}).component("quoteInfo",{template:i(/*! ../../html/quote/quote-info.html */165),controller:dp,bindings:{page:"@"}}).component("quoteDetailRow",{template:i(/*! ../../html/quote/quote-detail-row.html */166),controller:sp,bindings:{rowData:"<"}}).component("quoteToggle1",{template:i(/*! ../../html/quote/quote-toggle-1.html */167),controller:op,bindings:{page:"@"}}).component("quoteToggle2",{template:i(/*! ../../html/quote/quote-toggle-2.html */168),controller:Yp,bindings:{page:"@",isEnableVolByPricePercent:"<",lastPageIdStore:"="}}).component("quotePercentBuySell",{template:i(/*! ../../html/quote/quote-percent-buy-sell.html */169),controller:np,bindings:{data:"<"}}).component("quoteVolumeBuySell",{template:i(/*! ../../html/quote/quote-volume-buy-sell.html */170),controller:ip,bindings:{page:"@"}}).component("quoteIntradayTabs",{template:i(/*! ../../html/quote/quote-intraday-tabs.html */171),controller:up,bindings:{page:"@"}}).component("quoteVolumeByPriceTable",{template:i(/*! ../../html/quote/quote-volume-by-price-table.html */172),controller:ep}).component("quoteVolumeByPriceRow",{template:i(/*! ../../html/quote/quote-volume-by-price-row.html */173),controller:Xh,bindings:{volByPriceData:"<",lastDone:"<",previousClose:"<",priceDigit:"<",isShowNoSide:"<"}}).component("quoteInstrumentTicker",{template:i(/*! ../../html/quote/quote-instrument-ticker.html */174),controller:hp,bindings:{page:"@"}}).component("quoteHistoricalByDate",{template:i(/*! ../../html/quote/quote-historical-by-date.html */175),controller:fp,bindings:{page:"@"}}).component("quoteEquityByDateRow",{template:i(/*! ../../html/quote/quote-equity-by-date-row.html */176),controller:yp,bindings:{data:"<"}}).component("quoteDerivativesByDateRow",{template:i(/*! ../../html/quote/quote-derivatives-by-date-row.html */177),controller:gp,bindings:{data:"<"}}).component("quoteOddLot",{template:i(/*! ../../html/quote/quote-odd-lot.html */178),controller:kp}).component("quoteOddLotOverview",{template:i(/*! ../../html/quote/quote-odd-lot-overview.html */179),controller:$p}).component("quoteOddLotBidOffer",{template:i(/*! ../../html/quote/quote-odd-lot-bid-offer.html */180),controller:Lp,bindings:{analyticsCategory:"@"}}).component("quoteOddLotTicker",{template:i(/*! ../../html/quote/quote-odd-lot-ticker.html */181),controller:Np,bindings:{tickers:"<"}}).component("quoteUnderlying",{template:i(/*! ../../html/quote/quote-underlying.html */182),controller:Mp,bindings:{page:"@"}}).component("quoteUnderlyingOverview",{template:i(/*! ../../html/quote/quote-underlying-overview.html */183),controller:Rp,bindings:{overview:"<"}}).component("quoteUnderlyingTicker",{template:i(/*! ../../html/quote/quote-underlying-ticker.html */184),controller:_p,bindings:{tickers:"<"}}).component("quoteFundamental",{template:i(/*! ../../html/quote/quote-fundamental.html */185),controller:Sp,bindings:{page:"@"}}).component("quoteHistoricalChart",{template:i(/*! ../../html/quote/quote-historical-chart.html */186),controller:Ep,bindings:{page:"@"}}).component("quoteMarginRate",{template:i(/*! ../../html/quote/quote-margin-rate.html */187),controller:Gp,bindings:{page:"@"}});var Kp=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,o,l)||this;return u.streamingAttribute=t,u.element=i,u.initDataEvent=r,u.currentSymbolChangeEvent=n,u.pageService=o,u.$window=s,u.instrumentService=a,u.userApplicationProfileService=c,u.screenTrackerService=l,u.currentSymbolChangeCallBack=u.onCurrentSymbolChange.bind(u),u.onChartLoadedCallBack=u.onChartLoaded.bind(u),u.onRecieveNewSymbolFromChartCallBack=u.onRecieveNewSymbolFromChart.bind(u),u.isChartInitialized=!1,u}return ne(t,e),t.prototype.startService=function(){this.isChartInitialized||this.init(),this.currentSymbolChangeEvent.subscribe(this.currentSymbolChangeCallBack),this.changeToPage()},t.prototype.getAnalyticsScreenName=function(){return ss.TECHNICAL},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.viewDidLoad=function(){},t.prototype.init=function(){this.iframe=this.element.find("iframe"),this.iframe.attr("src",this.streamingAttribute.itpHost+"/C00_ChartRedirect.jsp?channel=streaming6"),this.iframe.on("load",this.onChartLoadedCallBack),this.isChartInitialized=!0},t.prototype.onChartLoaded=function(){this.currentSymbol&&this.iframe[0].contentWindow.postMessage("INST|"+this.currentSymbol.name,"*"),this.$window.addEventListener&&this.$window.addEventListener("message",this.onRecieveNewSymbolFromChartCallBack,!1)},t.prototype.onRecieveNewSymbolFromChart=function(e){var t=this;if(this.isChartInitialized){var i=e.data;if("string"==typeof i&&i.indexOf("INST")!==-1){var r=i.split("|");this.instrumentService.searchSymbolByBrokerLicense(r[2]).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)})}}},t.prototype.onCurrentSymbolChange=function(e){if(this.isChartInitialized){this.currentSymbol=e;var t=e.name;this.iframe[0].contentWindow.postMessage("INST|"+t,"*")}},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.currentSymbolChangeCallBack)},t.$inject=["StreamingAttribute","$element","InitDataEvent","CurrentSymbolChangeEvent","PageService","$window","InstrumentService","UserApplicationProfileService","ScreenTrackerService"],t}(Zs);angular.module("technical",["multi-market"]).component("technicalChart",{template:i(/*! ../../html/technical/technical-chart.html */188),controller:Kp,bindings:{page:"@"}});var zp=function(e){function t(t,i,r,n){var o=e.call(this,t,n)||this;return o.pageService=t,o.element=i,o.streamingAttribute=r,o.screenTrackerService=n,o.isIframInitialized=!1,o}return ne(t,e),t.prototype.startService=function(){if(this.changeToPage(),!this.isIframInitialized){var e=this.element.find("iframe");e.attr("src",this.streamingAttribute.itpHost+"/bisnews/bisnews.jsp?brokerid=050&platform=web&txtService=bisnews_chart"),this.isIframInitialized=!0}},t.prototype.getAnalyticsScreenName=function(){return ss.ASL_B_Chart},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.$inject=["PageService","$element","StreamingAttribute","ScreenTrackerService"],t}(Zs),Qp=function(e){function t(t,i,r,n,o){var s=e.call(this,t,o)||this;return s.pageService=t,s.element=i,s.streamingAttribute=r,s.initDataEvent=n,s.screenTrackerService=o,s.isIframInitialized=!1,s}return ne(t,e),t.prototype.startService=function(){this.changeToPage(),this.isIframInitialized||(this.iframe=this.element.find("iframe"),this.iframe.attr("src",this.streamingAttribute.itpHost+"/bisnews/bisnews.jsp?brokerid=050&platform=web&txtService=bisnews_news"),this.isIframInitialized=!0)},t.prototype.getAnalyticsScreenName=function(){return ss.ASL_B_News},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.$inject=["PageService","$element","StreamingAttribute","InitDataEvent","ScreenTrackerService"],t}(Zs),Xp=function(e){function t(t,i,r,n){var o=e.call(this,t,n)||this;return o.pageService=t,o.element=i,o.streamingAttribute=r,o.screenTrackerService=n,o.isIframInitialized=!1,o}return ne(t,e),t.prototype.startService=function(){this.changeToPage(),this.isIframInitialized||(this.iframe=this.element.find("iframe"),this.iframe.attr("src",this.streamingAttribute.itpHost+"/asl/SSORedirect.jsp?txtPage=home"),this.isIframInitialized=!0)},t.prototype.getAnalyticsScreenName=function(){return ss.ASL_ONNET},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.$inject=["PageService","$element","StreamingAttribute","ScreenTrackerService"],t}(Zs);angular.module("asl-sso",["multi-market"]).component("aslOnnetPage",{template:i(/*! ../../html/asl-sso/asl-onnet.html */189),controller:Xp,bindings:{page:"@"}}).component("aslBnewsPage",{template:i(/*! ../../html/asl-sso/asl-bnews.html */190),controller:Qp,bindings:{page:"@"}}).component("aslBchartPage",{template:i(/*! ../../html/asl-sso/asl-bchart.html */191),controller:zp,bindings:{page:"@"}});var Jp=function(e){function t(t,i,r,n){var o=e.call(this,t,n)||this;return o.pageService=t,o.element=i,o.streamingAttribute=r,o.screenTrackerService=n,o.isIframInitialized=!1,o}return ne(t,e),t.prototype.getAnalyticsScreenName=function(){return ss.IALGO},t.prototype.startService=function(){if(this.changeToPage(),!this.isIframInitialized){var e=this.element.find("iframe");e.attr("src",this.streamingAttribute.itpHost+"/bls/BLSiAlgoRedirect.jsp"),this.isIframInitialized=!0}},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.$inject=["PageService","$element","StreamingAttribute","ScreenTrackerService"],t}(Zs),Zp=function(e){function t(t,i,r,n,o){var s=e.call(this,t,o)||this;return s.pageService=t,s.element=i,s.streamingAttribute=r,s.initDataEvent=n,s.screenTrackerService=o,s.isIframInitialized=!1,s}return ne(t,e),t.prototype.startService=function(){if(!this.isIframInitialized){var e=this.element.find("iframe");e.attr("src",this.streamingAttribute.itpHost+"/bls/BLSStockSignalRedirect.jsp"),this.isIframInitialized=!0}this.changeToPage()},t.prototype.getAnalyticsScreenName=function(){return ss.BLS},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.$inject=["PageService","$element","StreamingAttribute","InitDataEvent","ScreenTrackerService"],t}(Zs);angular.module("bls-sso",["multi-market"]).component("blsIalgoPage",{template:i(/*! ../../html/bls-sso/bls-ialgo.html */192),controller:Jp,bindings:{page:"@"}}).component("blsLandingPage",{template:i(/*! ../../html/bls-sso/bls-landing.html */193),controller:Zp,bindings:{page:"@"}});var em=function(){function e(e,t){this.userApplicationProfileService=e,this.$filter=t,this.nextFocusPriceElements=[{parent:"div.multi-order-list",focusElement:'[name="multi-order-row-'+(this.index+1)+'"] symbol-input .main-input'},{parent:"equity-place-multi-order",focusElement:"pin-input input"},{parent:"equity-place-multi-order",focusElement:'button[name="submit-multi-order"]'}],this.nextFocusVolumeElement=[{parent:'ul[name="multi-order-row"]',focusElement:"price-input input"},{parent:"div.multi-order-list",focusElement:'[name="multi-order-row-'+(this.index+1)+'"] symbol-input .main-input'},{parent:"equity-place-multi-order",focusElement:"pin-input input"},{parent:"equity-place-multi-order",focusElement:'button[name="submit-multi-order"]'}],this.symbolNextFocusElements=[{parent:"equity-multi-order-row",focusElement:'volume-input[name="multi-order-volume"] > input'}],this.sideNextFocusElements=[{parent:'ul[name="multi-order-row"]',focusElement:"symbol-input input.main-input"}],this.priceTypeList=Ge.ALL_EQUITY,this.validityList=Ke.ALL_EQUITY,this.filterPrice=this.$filter("price")}return e.prototype.onValidatedSymbol=function(e){e&&this.userApplicationProfileService.setCurrentSymbol(e)},e.prototype.onSymbolInputUpdate=function(e){this.order.symbol=e},Object.defineProperty(e.prototype,"sidename",{get:function(){return this.order.side.shortname},set:function(e){this.order.side=Be.lookup[e]},enumerable:!0,configurable:!0}),e.prototype.checkEnableIceberg=function(){return!this.order.priceType.isEqual(Ge.LIMIT)||!this.order.validity.isEqual(Ke.DAY)},e.prototype.onValidityChanged=function(e){this.order.validity=e,this.checkEnableIceberg()&&(this.order.icebergVolume="")},e.prototype.checkPriceTypeNotLimit=function(){return!this.order.priceType.isEqual(Ge.LIMIT)},e.prototype.onPriceTypeChanged=function(e){this.order.priceType=e,this.order.price="",this.order.validity=Ke.DAY,this.checkEnableIceberg()&&(this.order.icebergVolume=""),this.calculateAmount(),this.equityPlaceMultiOrderCtrl.calculateTotalAmount()},e.prototype.onBlurPrice=function(){this.calculateAmount(),this.equityPlaceMultiOrderCtrl.calculateTotalAmount()},e.prototype.onBlurVolume=function(){this.calculateAmount(),this.equityPlaceMultiOrderCtrl.calculateTotalAmount()},e.prototype.calculateAmount=function(){this.order.calculateAmount()},e.$inject=["UserApplicationProfileService","$filter"],e}(),tm=function(){function e(e,t,i,r){this.streamingAttribute=e,this.userInfoService=t,this.initDataEvent=i,this.currentAccountChangeEvent=r,this.setUserRoleCallBack=this.setUserRole.bind(this),this.onCurrentAccountChangeCallBack=this.onCurrentAccountChange.bind(this),this.initDataEvent.subscribe(this.setUserRoleCallBack),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack)}return e.prototype.$onDestroy=function(){this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallBack)},e.prototype.setUserRole=function(){this.isInvestor=this.userInfoService.isInvestor(),this.isMarketRep=this.userInfoService.isMarketRep()},e.prototype.onCurrentAccountChange=function(e){this.currentAccount=e},e.prototype.isShowEquityMode=function(){return!!this.currentAccount&&this.currentAccount.systemType===mi.EQUITY},e.prototype.isShowDerivativesMode=function(){return!!this.currentAccount&&this.currentAccount.systemType===mi.DERIVATIVES},e.$inject=["StreamingAttribute","UserInfoService","InitDataEvent","CurrentAccountChangeEvent"],e}(),im=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m){var v=e.call(this)||this;return v.userInfoService=t,v.pinService=i,v.alertService=r,v.currentAccountChangeEvent=n,v.multiOrderService=o,v.refreshEvent=s,v.$filter=a,v.multiOrderStore=c,v.orderEntrySettingChangeEvent=l,v.settingsService=u,v.$window=d,v.streamingAttribute=h,v.urlStore=p,v.$timeout=m,v.maxOrder=50,v.onAccountChangeCallBack=v.onCurrentAccountChange.bind(v),v.orderEntrySettingChangeCallBack=v.orderEntrySettingChange.bind(v),v.pinNextFocusElement=[{parent:"equity-place-multi-order",focusElement:'button[name="submit-multi-order"]'}],v.equityMultiOrders=[],v.initialSubscribe(),v}return ne(t,e),t.prototype.startService=function(){this.initialComponent()},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack),this.orderEntrySettingChangeEvent.unsubscribe(this.orderEntrySettingChangeCallBack)},t.prototype.initialSubscribe=function(){this.currentOrderEntrySetting=_a.empty(),this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack),this.orderEntrySettingChangeEvent.subscribe(this.orderEntrySettingChangeCallBack)},t.prototype.orderEntrySettingChange=function(e){this.currentOrderEntrySetting=e,e.autoNVDRConfiguration.enable?this.equityMultiOrders.forEach(function(e){e.isNVDR=!0}):this.equityMultiOrders.forEach(function(e){e.isNVDR=!1})},t.prototype.initialComponent=function(){this.initialDataRows(),this.updateCanChackFlag(),this.onChangeCheckOrder(),this.clearUnsavedPin()},t.prototype.initialDataRows=function(){this.selectedDropdown=this.multiOrderStore.getDefautEquityMultiOrderListDropdown(),this.equityMultiOrders=this.multiOrderStore.getEquityOrderRowsByListName(this.selectedDropdown.name).list,this.processAfterListChange()},t.prototype.clearMultiOrderForm=function(){this.resetOrderArray(),this.updateCanChackFlag(),this.onChangeCheckOrder(),this.clearUnsavedPin()},t.prototype.uploadMultiOrderForm=function(){var e=this,t=this.$window.open(this.getPopOverURL(),"_blank","scrollbars=1,resizable=1,height=150,width=350");this.alertService.showEquityMultiPlaceOrderUploadAlert(this.currentAccount).then(function(t){e.equityMultiOrders=t,e.processAfterListChange()},function(t){e.alertService.showErrorAlert(t.message)}),this.$timeout(function(){t.focus()},1e3)},t.prototype.getPopOverURL=function(){return""+this.streamingAttribute.itpHost+this.urlStore.ITP_MULTI_ORDER_FROM_FILE_POPUP+"?accountNo="+this.currentAccount.accountNo},t.prototype.resetOrderArray=function(){this.equityMultiOrders=new Array(5);for(var e=0;e<5;e++)this.equityMultiOrders[e]=new wi,this.currentOrderEntrySetting.autoNVDRConfiguration.enable&&(this.equityMultiOrders[e].isNVDR=!0);this.totalAmount=0},t.prototype.onSaveListChange=function(e){var t=this.multiOrderStore.getEquityOrderRowsByListName(e.name);this.equityMultiOrders=t.list,this.processAfterListChange()},t.prototype.processAfterListChange=function(){return this.updateCanChackFlag(),this.onChangeCheckOrder(),this.equityMultiOrders.length>0?void this.calculateTotalAmount():void this.resetOrderArray()},t.prototype.togglecheckAllOrders=function(){switch(this.isCheckedAll){case!1:this.setCheckedAllOrders(!0);break;case!0:this.setCheckedAllOrders(!1)}this.onChangeCheckOrder()},t.prototype.setCheckedAllOrders=function(e){for(var t=0;t<this.equityMultiOrders.length;t++)this.equityMultiOrders[t].isCheck=e},t.prototype.checkIfAllOrdersChecked=function(){for(var e=0,t=0;t<this.equityMultiOrders.length;t++)this.equityMultiOrders[t].isCheck===!0&&e++;this.equityMultiOrders.length===e&&0!==this.equityMultiOrders.length?this.isCheckedAll=!0:this.isCheckedAll=!1},t.prototype.shouldShowPinInput=function(){return!this.isUserMarketRep()},t.prototype.isUserMarketRep=function(){return this.userInfoService.isMarketRep()},t.prototype.addOrderRow=function(){if(this.equityMultiOrders.length<this.maxOrder){var e=new wi;this.currentOrderEntrySetting.autoNVDRConfiguration.enable&&(e.isNVDR=!0),this.equityMultiOrders.push(e)}this.updateCanChackFlag(),this.checkIfAllOrdersChecked()},t.prototype.checkCanDeleteOrSubmit=function(){var e=!1;this.equityMultiOrders.forEach(function(t){t.isCheck&&(e=!0)}),e?this.canDeleteOrSubmit=!0:this.canDeleteOrSubmit=!1},t.prototype.onChangeCheckOrder=function(){this.checkCanDeleteOrSubmit(),this.checkIfAllOrdersChecked()},t.prototype.updateCanChackFlag=function(){this.equityMultiOrders.length>=this.maxOrder?this.canAdd=!1:this.canAdd=!0},t.prototype.deleteOrderRows=function(){var e=[];this.equityMultiOrders.forEach(function(t){t.isCheck||e.push(t)}),this.equityMultiOrders=e,this.onChangeCheckOrder(),this.updateCanChackFlag(),this.calculateTotalAmount()},t.prototype.onCurrentAccountChange=function(e){this.clearUnsavedPin(),e.systemType===mi.EQUITY&&(this.currentAccount=e)},t.prototype.saveMultiOrder=function(){var e=this;this.multiOrderStore.saveOrUpdateEquityMultiOrderList(this.selectedDropdown.name,this.equityMultiOrders).then(function(){e.alertService.showSuccessAlert("Saved.")},function(t){e.alertService.showErrorAlert(t.message)})},t.prototype.validate=function(){if(this.isUserMarketRep()&&this.currentAccount.isEmptyAccount)return this.alertService.showErrorAlert("Please insert trading account."),!1;var e=!0,t=[],i=new Eo;this.equityMultiOrders.some(function(r,n){if(t=[],i=new Eo,r.isCheck)return r.side===Be.NONE&&t.push("Please select Buy or Sell."),""===r.symbol&&t.push("Please insert symbol."),""===r.volume&&t.push("Please insert volume."),""===r.price&&"limit"===r.priceType.value&&t.push("Please insert price."),0!==t.length&&(e=!1,i.header="Error at row "+(n+1),i.msgList=t,!0)});var r=[];if(i.msgList&&i.msgList.length>0&&r.push(i),this.shouldShowPinInput()===!0&&!this.pinService.isSavePin()&&(null===this.pin||""===this.pin)){var n=new Eo;n.header="Please insert PIN.",r.push(n),e=!1}return e||this.alertService.showMutipleErrorTopicAlert(r),e},t.prototype.showResultAlert=function(){var e=new Td;e.side=Be.BUY,e.symbol="BBL",e.volume="1,200",e.price="1,300",this.alertService.showMultiPlaceOrderResultAlert([e])},t.prototype.submitOrders=function(){var e=this;if(this.validate()){var t=[];this.equityMultiOrders.forEach(function(e){if(e.isCheck){var i=new Ad;i.icebergVolume=e.icebergVolume,i.isNVDR=e.isNVDR,i.price=e.price,i.priceType=e.priceType,i.side=e.side,i.symbol=e.symbol.toUpperCase(),i.validity=e.validity,i.volume=e.volume,t.push(i)}}),this.alertService.showMultiPlaceOrderConfirmAlert(t).then(function(){var i=e.alertService.showMultiPlaceOrderProcessingAlert();i.opened.then(function(){e.multiOrderService.placeEquityOrder(t,e.getPin(),e.currentAccount,!1).then(function(t){i.close();var r=[];t.forEach(function(e){r.push(e)}),e.checkIfResultContainsWarning(t)?e.onMultipleOrderWarned(r):(e.onMultipleOrderSubmitted(r),e.clearUnsavedPin())},function(){i.close(),e.clearUnsavedPin()})["finally"](function(){e.refreshEvent.dispatchEvent()})})})}},t.prototype.checkIfResultContainsWarning=function(e){var t=!1;return e.forEach(function(e){if(e.isWarnning)return void(t=!0)}),t},t.prototype.onMultipleOrderWarned=function(e){var t=this,i=[];e.forEach(function(e){var t=new Dd;t.init(e),t.isChecked=!1,i.push(t)}),this.alertService.showMultiPlaceOrderConfirmWarningAlert(i).then(function(e){var i=t.alertService.showMultiPlaceOrderProcessingAlert();i.opened.then(function(){var r=[];e.forEach(function(e){var t=new Ad;t.side=e.side,t.symbol=e.symbol,t.isNVDR=e.isNVDR,t.volume=e.volume,t.icebergVolume=e.icebergVolume,t.price=e.price,t.priceType=e.priceType,t.validity=e.validity,r.push(t)});var n=t.getPin();t.multiOrderService.placeEquityOrder(r,n,t.currentAccount,!0).then(function(e){i.close(),t.onMultipleOrderSubmitted(e)},function(){i.close()})["finally"](function(){t.refreshEvent.dispatchEvent(),t.clearUnsavedPin()})})},function(){t.clearUnsavedPin()})},t.prototype.onMultipleOrderSubmitted=function(e){this.alertService.showMultiPlaceOrderResultAlert(e)},t.prototype.clearUnsavedPin=function(){this.pinService.isSavePin()||(this.pin="")},t.prototype.getPin=function(){return this.pinService.isSavePin()?this.pinService.pin:this.pin},t.prototype.calculateTotalAmount=function(){var e=this;this.totalAmount=0,this.equityMultiOrders.forEach(function(t){var i=t.priceType.isEqual(Ge.LIMIT)&&""!==t.price&&""!==t.volume;i&&(e.totalAmount=e.totalAmount+yt.toNumberOrNan(t.price)*yt.toNumberOrNan(t.volume))})},t.prototype.getTableHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.EQUITY_MULTI_ORDER_LIST:st.NormalScreen.EQUITY_MULTI_ORDER_LIST},t.$inject=["UserInfoService","PinService","AlertService","CurrentAccountChangeEvent","MultiOrderService","RefreshEvent","$filter","MultiOrderStore","OrderEntrySettingChangeEvent","SettingsService","$window","StreamingAttribute","URLStore","$timeout"],t}(Ss),rm=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p){var m=e.call(this)||this;return m.userInfoService=t,m.alertService=i,m.multiOrderService=r,m.pinService=n,m.currentAccountChangeEvent=o,m.initDataEvent=s,m.multiOrderStore=a,m.refreshEvent=c,m.settingsService=l,m.$window=u,m.streamingAttribute=d,m.urlStore=h,m.$timeout=p,m.MAX_ORDER=50,m.onAccountChangeCallBack=m.onCurrentAccountChange.bind(m),m.pinNextFocusElement=[{parent:"derivatives-place-multi-order",focusElement:'button[name="submit-multi-order"]'}],m.derivativesMultiOrders=[],
m}return ne(t,e),t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack),this.initialComponent()},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack)},t.prototype.initialComponent=function(){this.initialDataRows(),this.updateCanChackFlag(),this.onChangeCheckOrder(),this.clearUnsavedPin()},t.prototype.initialDataRows=function(){this.selectedDropdown=this.multiOrderStore.getDefautDerivativesMultiOrderListDropdown(),this.derivativesMultiOrders=this.multiOrderStore.getDerivativesOrderRowsByListName(this.selectedDropdown.name).list,this.processAfterListChange()},t.prototype.clearMultiOrderForm=function(){this.resetOrderArray(),this.updateCanChackFlag(),this.onChangeCheckOrder(),this.clearUnsavedPin()},t.prototype.uploadMultiOrderForm=function(){var e=this,t=this.$window.open(this.getPopOverURL(),"_blank","scrollbars=1,resizable=1,height=150,width=350");this.alertService.showDerivativesMultiPlaceOrderUploadAlert(this.currentAccount).then(function(t){e.derivativesMultiOrders=t,e.processAfterListChange()},function(t){e.alertService.showErrorAlert(t.message)}),this.$timeout(function(){t.focus()},1e3)},t.prototype.getPopOverURL=function(){return""+this.streamingAttribute.derivHost+this.urlStore.ITPD_MULTI_ORDER_FROM_FILE_POPUP+"?accountNo="+this.currentAccount.accountNo},t.prototype.onSaveListChange=function(e){var t=this.multiOrderStore.getDerivativesOrderRowsByListName(e.name);this.derivativesMultiOrders=t.list,this.processAfterListChange()},t.prototype.resetOrderArray=function(){this.derivativesMultiOrders=new Array(5);for(var e=0;e<5;e++)this.derivativesMultiOrders[e]=new Ti,this.derivativesMultiOrders[e].position=this.settingsService.orderEntryConfiguration.defaultOrderPosition},t.prototype.processAfterListChange=function(){this.updateCanChackFlag(),this.onChangeCheckOrder(),this.derivativesMultiOrders.length>0||this.resetOrderArray()},t.prototype.shouldShowPinInput=function(){return!this.isUserMarketRep()},t.prototype.isUserMarketRep=function(){return this.userInfoService.isMarketRep()},t.prototype.addOrderRow=function(){if(this.derivativesMultiOrders.length<this.MAX_ORDER){var e=new Ti;e.position=this.settingsService.orderEntryConfiguration.defaultOrderPosition,this.derivativesMultiOrders.push(e)}this.updateCanChackFlag(),this.checkIfAllOrdersChecked()},t.prototype.deleteOrderRows=function(){var e=[];this.derivativesMultiOrders.forEach(function(t){t.isCheck||e.push(t)}),this.derivativesMultiOrders=e,this.onChangeCheckOrder(),this.updateCanChackFlag()},t.prototype.updateCanChackFlag=function(){this.derivativesMultiOrders.length<this.MAX_ORDER?this.canAdd=!0:this.canAdd=!1},t.prototype.checkCanDeleteOrSubmit=function(){var e=!1;this.derivativesMultiOrders.forEach(function(t){t.isCheck&&(e=!0)}),e?this.canDeleteOrSubmit=!0:this.canDeleteOrSubmit=!1},t.prototype.togglecheckAllOrders=function(){switch(this.isCheckedAll){case!1:this.setCheckedAllOrders(!0);break;case!0:this.setCheckedAllOrders(!1)}this.onChangeCheckOrder()},t.prototype.setCheckedAllOrders=function(e){for(var t=0;t<this.derivativesMultiOrders.length;t++)this.derivativesMultiOrders[t].isCheck=e},t.prototype.saveMultiOrder=function(){var e=this;this.multiOrderStore.saveOrUpdateDerivativesMultiOrderList(this.selectedDropdown.name,this.derivativesMultiOrders).then(function(){e.alertService.showSuccessAlert("Saved.")},function(t){e.alertService.showErrorAlert(t.message)})},t.prototype.validateAutoPositionAuthorization=function(e,t){var i=this,r=!(e.position.isEqual(Ye.AUTO)&&!this.userInfoService.enableAutoPosition);if(!r){var n=new Eo;n.header="Error at row "+(t+1),n.msgList=['You don\'t have permission to use "Auto" position. Please use "Open" or "Close" position instead.'],this.alertService.showMutipleErrorTopicAlert([n]).then(function(){e.position=i.settingsService.orderEntryConfiguration.defaultOrderPosition})}return r},t.prototype.validateOrderRows=function(){var e=this,t=!0,i=[],r=new Eo;return this.derivativesMultiOrders.some(function(n,o){if(i=[],r=new Eo,n.isCheck){if(t=e.validateAutoPositionAuthorization(n,o),!t)return!0;if(n.side.isEqual(Be.NONE)&&i.push("Please select Long or Short."),""===n.symbol&&i.push("Please insert symbol."),""===n.volume&&i.push("Please insert volume."),""===n.price&&"limit"===n.priceType.value&&i.push("Please insert price."),0!==i.length)return t=!1,r.header="Error at row "+(o+1),r.msgList=i,!0}}),[t,r]},t.prototype.validate=function(){if(this.isUserMarketRep()&&this.currentAccount.isEmptyAccount)return void this.alertService.showErrorAlert("Please insert trading account.");var e=this.validateOrderRows(),t=e[0],i=e[1],r=[];if(!t){if(0===i.msgList.length)return!1;r.push(i)}if(this.shouldShowPinInput()===!0&&!this.pinService.isSavePin()&&(null===this.pin||""===this.pin)){var n=new Eo;n.header="Please insert PIN.",r.push(n)}return!(r.length>0)||(this.alertService.showMutipleErrorTopicAlert(r),!1)},t.prototype.checkIfAllOrdersChecked=function(){for(var e=0,t=0;t<this.derivativesMultiOrders.length;t++)this.derivativesMultiOrders[t].isCheck===!0&&e++;this.derivativesMultiOrders.length===e&&0!==this.derivativesMultiOrders.length?this.isCheckedAll=!0:this.isCheckedAll=!1},t.prototype.onChangeCheckOrder=function(){this.checkCanDeleteOrSubmit(),this.checkIfAllOrdersChecked()},t.prototype.clearUnsavedPin=function(){this.pinService.isSavePin()||(this.pin="")},t.prototype.submitOrders=function(){var e=this;if(this.validate()){var t=[];this.derivativesMultiOrders.forEach(function(e){if(e.isCheck){var i=new wd;i.icebergVolume=e.icebergVolume,i.position=e.position,i.price=e.price,i.priceType=e.priceType,i.side=e.side,i.symbol=e.symbol.toUpperCase(),i.validity=e.validity,i.volume=e.volume,t.push(i)}}),this.alertService.showMultiPlaceDerivativesOrderConfirmAlert(t).then(function(){var i=e.alertService.showMultiPlaceOrderProcessingAlert();i.opened.then(function(){e.multiOrderService.placeDerivativesOrder(t,e.getPin(),e.currentAccount,!1).then(function(t){i.close(),e.checkIfResultContainsWarning(t)?e.onMultipleOrderWarned(t):(e.onMultipleOrderSubmitted(t),e.clearUnsavedPin())},function(){i.close(),e.clearUnsavedPin()})["finally"](function(){e.refreshEvent.dispatchEvent()})})})}},t.prototype.checkIfResultContainsWarning=function(e){var t=!1;return e.forEach(function(e){if(e.isWarnning)return void(t=!0)}),t},t.prototype.onMultipleOrderWarned=function(e){var t=this,i=[];e.forEach(function(e){var t=new Pd;t.init(e),t.isChecked=!1,i.push(t)}),this.alertService.showMultiPlaceDerivativesOrderConfirmWarningAlert(i).then(function(e){var i=t.alertService.showMultiPlaceOrderProcessingAlert();i.opened.then(function(){var r=[];e.forEach(function(e){var t=new wd;t.side=e.side,t.position=e.position,t.symbol=e.symbol,t.volume=e.volume,t.icebergVolume=e.icebergVolume,t.price=e.price,t.priceType=e.priceType,t.validity=e.validity,r.push(t)}),t.multiOrderService.placeDerivativesOrder(r,t.getPin(),t.currentAccount,!0).then(function(e){var r=[];e.forEach(function(e){r.push(e)}),i.close(),t.onMultipleOrderSubmitted(r)},function(){i.close()})["finally"](function(){t.refreshEvent.dispatchEvent(),t.clearUnsavedPin()})})},function(){t.clearUnsavedPin()})},t.prototype.onMultipleOrderSubmitted=function(e){this.alertService.showMultiPlaceDerivativesOrderResultAlert(e)},t.prototype.getPin=function(){return this.pinService.isSavePin()?this.pinService.pin:this.pin},t.prototype.onCurrentAccountChange=function(e){this.clearUnsavedPin(),e.systemType===mi.DERIVATIVES&&(this.currentAccount=e)},t.prototype.getTableHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.DERIVATIVES_MULTI_ORDER_LIST:st.NormalScreen.DERIVATIVES_MULTI_ORDER_LIST},t.$inject=["UserInfoService","AlertService","MultiOrderService","PinService","CurrentAccountChangeEvent","InitDataEvent","MultiOrderStore","RefreshEvent","SettingsService","$window","StreamingAttribute","URLStore","$timeout"],t}(Ss),nm=function(){function e(e,t,i,r,n,o,s,a,c){this.$scope=e,this.accountService=t,this.alertService=i,this.initDataEvent=r,this.orderStatusService=n,this.currentAccountChangeEvent=o,this.refreshEvent=s,this.userInfoService=a,this.pinService=c,this.refreshAccountEventCallBack=this.getAccountInfo.bind(this),this.onCurrentAccountChangeCallBack=this.onReceiveCurrentAccountChangeByOther.bind(this),this.onInitDataCompleteCallback=this.onInitDataComplete.bind(this),this.accountList=[],this.initDataEvent.subscribe(this.onInitDataCompleteCallback)}return e.prototype.$onInit=function(){this.refreshEvent.subscribe(this.refreshAccountEventCallBack),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack)},e.prototype.onReceiveCurrentAccountChangeByOther=function(e){this.selectedAccount&&this.selectedAccount.equals(e)||(this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.unsubscribeGetAccountInfo(this.selectedAccount),this.setSelectedAccount(e),e.isEmptyAccount||(this.subscribeGetAccountInfo(e),this.getAccountInfo(),this.getAccountName()))},e.prototype.onAccountChanged=function(e){this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.unsubscribeGetAccountInfo(this.selectedAccount),this.setAndPublishSelectedAccount(e),e.isEmptyAccount||(this.subscribeGetAccountInfo(e),this.getAccountInfo(),this.getAccountName())},e.prototype.getSavePin=function(e){return this.pinService.isSavePin()?this.pinService.pin:e},e.prototype.setAndPublishSelectedAccount=function(e){this.currentAccountChangeEvent.publish(e),this.selectedAccount=e},e.prototype.setSelectedAccount=function(e){this.selectedAccount=e},e.prototype.getAccountName=function(){var e=this;if(this.selectedAccount){var t=this.selectedAccount.systemType===mi.EQUITY?Qe.EQUITY:Qe.DERIVATIVE;this.accountService.requestAccountName(this.selectedAccount.accountNo,t).then(function(t){e.accountNameForSelectedAccount=t})}},e.prototype.clearAccountInfo=function(){this.accountInfoForSelectedAccount=new Ci,this.accountNameForSelectedAccount=new di},e.prototype.onRecieveAccountInfoMock=function(){},e.prototype.subscribeGetAccountInfo=function(e){e.systemType===mi.EQUITY?this.accountService.subscribeGetEquityAccountInfo(e.accountNo,this.onRecieveAccountInfoMock):e.systemType===mi.DERIVATIVES&&this.accountService.subscribeGetDerivativesAccountInfo(e.accountNo,this.onRecieveAccountInfoMock)},e.prototype.unsubscribeGetAccountInfo=function(e){e.systemType===mi.EQUITY?this.accountService.unsubscribeGetEquityAccountInfo(e.accountNo,this.onRecieveAccountInfoMock):e.systemType===mi.DERIVATIVES&&this.accountService.unsubscribeGetDerivativesAccountInfo(e.accountNo,this.onRecieveAccountInfoMock)},e.prototype.getAccountInfo=function(){var e=this;this.selectedAccount&&(this.accountInfoForSelectedAccount=new Ci,this.selectedAccount.systemType===mi.EQUITY?this.accountService.requestEquityAccountInfo(this.selectedAccount.accountNo).then(function(t){t.accountInfo.accountNo===e.selectedAccount.accountNo&&(e.accountInfoForSelectedAccount=Ci.parseEquity(t.accountInfo,e.selectedAccount.frontType,e.selectedAccount.accountType))},function(t){t.errorMessage&&e.alertService.showErrorAlert(t.errorMessage)}):this.selectedAccount.systemType===mi.DERIVATIVES&&this.accountService.requestDerivativeAccountInfo(this.selectedAccount.accountNo).then(function(t){t.accountInfo.accountNo===e.selectedAccount.accountNo&&(e.accountInfoForSelectedAccount=Ci.parseDerivatives(t.accountInfo,e.selectedAccount.frontType,e.selectedAccount.accountType))},function(t){t.errorMessage&&e.alertService.showErrorAlert(t.errorMessage)}))},e.prototype.onInitDataComplete=function(){this.initAccountInformation(),null!==this.accountService.defaultAccount&&this.setSelectedAccount(this.accountService.defaultAccount),this.getAccountInfo(),this.getAccountName()},e.prototype.initAccountInformation=function(){var e=this;this.accountService.accountEquityList.forEach(function(t){t.canUseBasket===!0&&e.accountList.push(t)}),this.accountService.accountDerivList.forEach(function(t){t.canUseBasket===!0&&e.accountList.push(t)})},e.prototype.$onDestroy=function(){this.refreshEvent.unsubscribe(this.refreshAccountEventCallBack),this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallBack),this.initDataEvent.unsubscribe(this.onInitDataCompleteCallback)},e.$inject=["$scope","AccountService","AlertService","InitDataEvent","OrderStatusService","CurrentAccountChangeEvent","RefreshEvent","UserInfoService","PinService"],e}(),om=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this,u)||this;return d.$scope=t,d.accountService=i,d.alertService=r,d.initDataEvent=n,d.orderStatusService=o,d.currentAccountChangeEvent=s,d.refreshEvent=a,d.userInfoService=c,d.pinService=l,d.pageService=u,d.onInitDataCompleteCallback=d.onInitDataComplete.bind(d),d.refreshAccountEventCallBack=d.getAccountInfo.bind(d),d.onCurrentAccountChangeCallBack=d.onReceiveCurrentAccountChangeByOther.bind(d),d.initDataEvent.subscribe(d.onInitDataCompleteCallback),d}return ne(t,e),t.prototype.startService=function(){this.refreshEvent.subscribe(this.refreshAccountEventCallBack),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack)},t.prototype.stopService=function(){this.initDataEvent.unsubscribe(this.onInitDataCompleteCallback),this.refreshEvent.unsubscribe(this.refreshAccountEventCallBack),this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onReceiveCurrentAccountChangeByOther=function(e){this.selectedAccount&&this.selectedAccount.equals(e)||(e.systemType===mi.EQUITY?(this.selectedEquityAccount=e,this.selectedSystemType=new Bu("Equity",mi.EQUITY)):e.systemType===mi.DERIVATIVES&&(this.selectedDerivativesAccount=e,this.selectedSystemType=new Bu("Derivatives",mi.DERIVATIVES)),this.onAccountChangedByOther(e))},t.prototype.onAccountChangedByOther=function(e){this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.unsubscribeGetAccountInfo(this.selectedAccount),this.setSelectedAccount(e),e.isEmptyAccount||(this.subscribeGetAccountInfo(e),this.getAccountInfo(),this.getAccountName())},t.prototype.onAccountNoChange=function(e){this.clearAccountInfo();var t=new vi;t.accountNo=e,t.systemType=this.selectedSystemType.isEquity()?mi.EQUITY:mi.DERIVATIVES,t.frontType=fi.SEOS,e&&""!==e||(t.isEmptyAccount=!0,t.accountNo=""),this.selectedSystemType.isEquity()?this.selectedEquityAccount=t:this.selectedSystemType.isDerivatives&&(this.selectedDerivativesAccount=t),this.onAccountChanged(t)},t.prototype.onAccountChanged=function(e){this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.unsubscribeGetAccountInfo(this.selectedAccount),this.setAndPublishSelectedAccount(e),e.isEmptyAccount||(this.subscribeGetAccountInfo(e),this.getAccountInfo(),this.getAccountName())},t.prototype.setAndPublishSelectedAccount=function(e){this.selectedAccount=e,this.currentAccountChangeEvent.publish(e)},t.prototype.setSelectedAccount=function(e){this.selectedAccount=e},t.prototype.getAccountName=function(){var e=this;if(this.selectedAccount){var t=this.selectedAccount.systemType===mi.EQUITY?Qe.EQUITY:Qe.DERIVATIVE;this.accountService.requestAccountName(this.selectedAccount.accountNo,t).then(function(t){e.accountNameForSelectedAccount=t})}},t.prototype.clearAccountInfo=function(){this.accountInfoForSelectedAccount=new Ci,this.accountNameForSelectedAccount=new di},t.prototype.onRecieveAccountInfoMock=function(){},t.prototype.subscribeGetAccountInfo=function(e){e.systemType===mi.EQUITY?this.accountService.subscribeGetEquityAccountInfo(e.accountNo,this.onRecieveAccountInfoMock):e.systemType===mi.DERIVATIVES&&this.accountService.subscribeGetDerivativesAccountInfo(e.accountNo,this.onRecieveAccountInfoMock)},t.prototype.unsubscribeGetAccountInfo=function(e){e.systemType===mi.EQUITY?this.accountService.unsubscribeGetEquityAccountInfo(e.accountNo,this.onRecieveAccountInfoMock):e.systemType===mi.DERIVATIVES&&this.accountService.unsubscribeGetDerivativesAccountInfo(e.accountNo,this.onRecieveAccountInfoMock)},t.prototype.onInitDataComplete=function(){this.clearSelectedEquityAccount(),this.clearSelectedDerivativesAccount(),this.authorizedSystemTypes=[],this.userInfoService.hasMarketRepEquity&&!this.userInfoService.isDerivativesOnly&&this.authorizedSystemTypes.push(new Bu("Equity",mi.EQUITY)),this.userInfoService.hasMarketRepDerivatives&&this.authorizedSystemTypes.push(new Bu("Derivatives",mi.DERIVATIVES))},t.prototype.onSystemTypeChange=function(e){return this.selectedSystemType=e,this.clearAccountInfo(),this.selectedSystemType.isEquity()?void this.onAccountChanged(this.selectedEquityAccount):this.selectedSystemType.isDerivatives()?void this.onAccountChanged(this.selectedDerivativesAccount):void 0},t.prototype.getAccountInfo=function(){var e=this;this.selectedAccount&&(this.selectedAccount.isEmptyAccount||(this.accountInfoForSelectedAccount=new Ci,this.selectedAccount.systemType===mi.EQUITY?this.accountService.requestEquityAccountInfo(this.selectedAccount.accountNo).then(function(t){if(t.accountInfo.accountNo===e.selectedAccount.accountNo){var i=t.accountInfo.accountType;e.accountInfoForSelectedAccount=Ci.parseEquity(t.accountInfo,e.selectedAccount.frontType,i)}},function(t){t.errorMessage&&e.alertService.showErrorAlert(t.errorMessage),t.errorMessage===xu.TRADING_ACCOUNT_NOT_FOUND_EQUITY&&(e.clearSelectedEquityAccount(),e.onAccountChanged(e.selectedEquityAccount))}):this.selectedAccount.systemType===mi.DERIVATIVES&&this.accountService.requestDerivativeAccountInfo(this.selectedAccount.accountNo).then(function(t){t.accountInfo.accountNo===e.selectedAccount.accountNo&&(e.accountInfoForSelectedAccount=Ci.parseDerivatives(t.accountInfo,e.selectedAccount.frontType,e.selectedAccount.accountType))},function(t){t.errorMessage&&e.alertService.showErrorAlert(t.errorMessage),t.errorMessage===xu.TRADING_ACCOUNT_NOT_FOUND_DERIVATIVES&&(e.clearSelectedDerivativesAccount(),e.onAccountChanged(e.selectedDerivativesAccount))})))},t.prototype.clearSelectedEquityAccount=function(){var e=new vi;e.systemType=mi.EQUITY,e.isEmptyAccount=!0,this.selectedEquityAccount=e},t.prototype.clearSelectedDerivativesAccount=function(){var e=new vi;e.systemType=mi.DERIVATIVES,e.isEmptyAccount=!0,this.selectedDerivativesAccount=e},t.$inject=["$scope","AccountService","AlertService","InitDataEvent","OrderStatusService","CurrentAccountChangeEvent","RefreshEvent","UserInfoService","PinService","PageService"],t}(ys),sm=function(){function e(e,t,i){this.userApplicationProfileService=e,this.userInfoService=t,this.instrumentService=i,this.nextFocusPriceElements=[{parent:"div.multi-order-list",focusElement:'[name="multi-order-row-'+(this.index+1)+'"] symbol-input .main-input'},{parent:"derivatives-place-multi-order",focusElement:"pin-input input"},{parent:"derivatives-place-multi-order",focusElement:'button[name="submit-multi-order"]'}],this.nextFocusVolumeElement=[{parent:'ul[name="multi-order-row"]',focusElement:"price-input input"},{parent:"div.multi-order-list",focusElement:'[name="multi-order-row-'+(this.index+1)+'"] symbol-input .main-input'},{parent:"derivatives-place-multi-order",focusElement:"pin-input input"},{parent:"derivatives-place-multi-order",focusElement:'button[name="submit-multi-order"]'}],this.symbolNextFocusElements=[{parent:"derivatives-multi-order-row",focusElement:'volume-input[name="multi-order-volume"] > input'}],this.sideNextFocusElements=[{parent:'ul[name="multi-order-row"]',focusElement:"symbol-input input.main-input"}],this.priceTypeList=Ge.ALL_DERIV,this.validityList=Ke.ALL_DERIVATIVES_MULTI_ORDER}return e.prototype.$onInit=function(){this.setDefaultOrderPosition(),this.order&&this.order.symbol&&this.order.symbol.length>0&&this.getStaticData(this.order.symbol)},e.prototype.$onDestroy=function(){},e.prototype.setDefaultOrderPosition=function(){this.userInfoService.enableAutoPosition?this.positionList=Ye.ALL:this.positionList=Ye.ALL_NO_AUTO},e.prototype.onChangeCheckOrder=function(){},Object.defineProperty(e.prototype,"sidename",{get:function(){return this.order.side.shortname},set:function(e){this.order.side=Be.lookup[e]},enumerable:!0,configurable:!0}),e.prototype.onPositionChanged=function(e){this.order.position=e},e.prototype.onValidatedSymbol=function(e){e&&(this.userApplicationProfileService.setCurrentSymbol(e),this.getStaticData(e.name))},e.prototype.onBlurSymbolInput=function(e){this.getStaticData(e)},e.prototype.onSymbolInputUpdate=function(e){this.order.symbol=e},e.prototype.checkEnableIceberg=function(){return!this.order.priceType.isEqual(Ge.LIMIT)},e.prototype.checkPriceTypeNotLimit=function(){return!this.order.priceType.isEqual(Ge.LIMIT)},e.prototype.checkPriceTypeIsATO=function(){return this.order.priceType.isEqual(Ge.ATO)},e.prototype.onValidityChanged=function(e){this.order.validity=e,this.checkEnableIceberg()&&(this.order.icebergVolume="")},e.prototype.onPriceTypeChanged=function(e){this.order.priceType=e,this.order.price="",this.order.icebergVolume="",this.order.validity=Ke.DAY,this.order.priceType.isEqual(Ge.ATO)&&(this.order.validity=Ke.AUTO_M)},e.prototype.getStaticData=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e.toUpperCase(),Qe.DERIVATIVE).then(function(e){t.instrumentStaticData=e})},e.prototype.getPriceDigit=function(){return this.instrumentStaticData&&this.instrumentStaticData.isSuccess?this.instrumentStaticData.data.derivativesPriceDigit:void 0},e.$inject=["UserApplicationProfileService","UserInfoService","InstrumentService"],e}(),am=function(){function e(){}return e}(),cm=function(){function e(){}return e}(),lm=function(){function e(e){this.multiOrderService=e,this.equityMultiOrdersList=[],this.derivativesMultiOrdersList=[]}return e.prototype.initialData=function(e){var t=this;this.equityMultiOrdersList=[],this.equityMultiOrdersListDropdown=[],e.equity.forEach(function(e){var i=new Sd;i.name=e.name,i.list=[],e.list.forEach(function(e){i.list.push(wi.parse(e))}),t.equityMultiOrdersList.push(i);var r=new am;r.name=e.name,t.equityMultiOrdersListDropdown.push(r)}),this.derivativesMultiOrdersList=[],this.derivativesMultiOrdersListDropdown=[],e.derivatives.forEach(function(e){var i=new bd;i.name=e.name,i.list=[],e.list.forEach(function(e){i.list.push(Ti.parse(e))}),t.derivativesMultiOrdersList.push(i);var r=new cm;r.name=e.name,t.derivativesMultiOrdersListDropdown.push(r)})},e.prototype.getDefautEquityMultiOrderListDropdown=function(){return this.equityMultiOrdersListDropdown[0]},e.prototype.getEquityMultiOrderListDropdown=function(){return this.equityMultiOrdersListDropdown},e.prototype.getEquityMultiOrderList=function(){return this.equityMultiOrdersList},e.prototype.getDefautDerivativesMultiOrderListDropdown=function(){return this.derivativesMultiOrdersListDropdown[0]},e.prototype.getDerivativesMultiOrderListDropdown=function(){return this.derivativesMultiOrdersListDropdown},e.prototype.getDerivativesMultiOrderList=function(){return this.derivativesMultiOrdersList},e.prototype.saveOrUpdateEquityMultiOrderList=function(e,t){var i=!1;if(this.equityMultiOrdersList.forEach(function(r){if(r.name===e)return r.list=t,void(i=!0)}),!i){var r=new Sd;r.name=e,r.list=t,this.equityMultiOrdersList.push(r)}return this.multiOrderService.updateMultiOrderSaveList(this.equityMultiOrdersList,this.derivativesMultiOrdersList)},e.prototype.saveOrUpdateDerivativesMultiOrderList=function(e,t){var i=!1;if(this.derivativesMultiOrdersList.forEach(function(r){if(r.name===e)return r.list=t,void(i=!0)}),!i){var r=new bd;r.name=e,r.list=t,this.derivativesMultiOrdersList.push(r)}return this.multiOrderService.updateMultiOrderSaveList(this.equityMultiOrdersList,this.derivativesMultiOrdersList)},e.prototype.getEquityOrderRowsByListName=function(e){var t;return this.equityMultiOrdersList.forEach(function(i){if(i.name===e)return void(t=i)}),angular.copy(t)},e.prototype.getDerivativesOrderRowsByListName=function(e){var t;return this.derivativesMultiOrdersList.forEach(function(i){if(i.name===e)return void(t=i)}),angular.copy(t)},e.$inject=["MultiOrderService"],e}();angular.module("multi-order",["order"]).service("MultiOrderService",Od).service("MultiOrderStore",lm).component("multiOrder",{template:i(/*! ../../html/multi-order/multi-order.html */194),controller:tm,bindings:{toggleMultiOrder:"&",page:"@"}}).component("equityMultiOrderRow",{require:{equityPlaceMultiOrderCtrl:"^equityPlaceMultiOrder"},bindings:{index:"<",order:"="},template:i(/*! ../../html/multi-order/equity-multi-order-row.html */195),controller:em}).component("equityPlaceMultiOrder",{template:i(/*! ../../html/multi-order/equity-place-multi-order.html */196),controller:im}).component("derivativesPlaceMultiOrder",{template:i(/*! ../../html/multi-order/derivatives-place-multi-order.html */197),controller:rm}).component("investorMultiOrderAccountInfo",{require:{multiOrderCtrl:"^multiOrder"},template:i(/*! ../../html/multi-order/account-info.html */198),controller:nm}).component("marketrepMultiOrderAccountInfo",{require:{multiOrderCtrl:"^multiOrder"},template:i(/*! ../../html/multi-order/marketrep-account-info.html */199),controller:om,bindings:{page:"@"}}).component("derivativesMultiOrderRow",{require:{derivativesPlaceMultiOrderCtrl:"^derivativesPlaceMultiOrder"},bindings:{index:"<",order:"="},template:i(/*! ../../html/multi-order/derivatives-multi-order-row.html */200),controller:sm});var um=function(){function e(){}return e}(),dm=function(){function e(){this.content=[]}return e}(),hm=function(){function e(e,t,i){this.researchService=e,this.$q=t,this.timeService=i}return e.prototype.requestResearchContent=function(){var e=this;return this.researchService.getResearchContent().then(function(t){var i=e.parseResearchContent(t);return i.isSuccess?i:e.$q.reject(i)})},e.prototype.parseResearchContent=function(e){var t=e.split(hi.LV1),i="T"===t[0],r=new dm;if(i){r.isSuccess=!0;var n=t[2].split(hi.LV2),o=[],s=1;n.forEach(function(e){var t=e.split(hi.LV3),i=new um;i.lastUpdate=t[0],i.link=t[1],i.subject=t[2],i.expireDate=t[3],i.market=t[4],i.category=t[5],i.id=s,o.push(i),s++}),r.content=o}else r.isSuccess=!1,r.errorMessage=t[2];return r},e.$inject=["ResearchService","$q","TimeService"],e}(),pm=function(){function e(){}return e}(),mm=function(e){function t(t,i,r,n,o,s){var a=e.call(this,o,s)||this;return a.$window=t,a.urlStore=i,a.newsStore=r,a.streamingAttribute=n,a.pageService=o,a.screenTrackerService=s,a.NEWS_TAB_ID="0",a.RESEARCH_TAB_ID="1",a}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.getAnalyticsScreenName=function(){var e=this.active.toString();switch(e){case this.NEWS_TAB_ID:return ss.INFO_NEWS;case this.RESEARCH_TAB_ID:return ss.INFO_RESEARCH;default:return ss.INFO_NEWS}},t.prototype.onClickTab=function(){this.changeToPage()},t.prototype.onClickXCalendarButton=function(){this.$window.open(""+this.urlStore.X_CALENDAR_URL,"_blank","scrollbars=1,resizable=1")},t.prototype.onClickOppDayButton=function(){this.$window.open(""+this.streamingAttribute.thirdPartyUrls.oppDay,"_blank","scrollbars=1,resizable=1")},t.prototype.onClickMoreNewsButton=function(){switch(this.streamingAttribute.brokerId){case"016":this.$window.open(""+this.streamingAttribute.researchHost+this.urlStore.RESEARCH_TNS_IQ_NEWS_URL+"?type=IQ&lang=EN","_blank","scrollbars=yes,resizable=yes,height=520,width=620");break;case"019":this.$window.open(""+this.streamingAttribute.researchHost+this.urlStore.RESEARCH_IQ_NEWS_URL,"_blank","scrollbars=yes,resizable=yes,height=520,width=620")}},t.prototype.isShowMoreNewsButton=function(){return void 0!==this.newsStore.selectedSource&&this.newsStore.selectedSource.isIQ()},t.$inject=["$window","URLStore","NewsStore","StreamingAttribute","PageService","ScreenTrackerService"],t}(Zs),vm=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t)||this;return a.pageService=t,a.element=i,a.streamingAttribute=r,a.researchContentService=n,a.alertService=o,a.refreshEvent=s,a.onReceiveRefreshEventCallBack=a.getReseachList.bind(a),a}return ne(t,e),t.prototype.viewDidLoad=function(){this.currentIframe=this.element.find("iframe")},t.prototype.startService=function(){this.activeId=null,this.isInit=!0,this.getReseachList(),this.refreshEvent.subscribe(this.onReceiveRefreshEventCallBack)},t.prototype.stopService=function(){this.refreshEvent.unsubscribe(this.onReceiveRefreshEventCallBack)},t.prototype.getReseachList=function(){var e=this;this.researchContentService.requestResearchContent().then(function(t){e.researchData=t.content},function(e){e.errorMessage&&e.errorMessage.length>0&&console.error(e.errorMessage)})},t.prototype.changeResearchDisplayPDF=function(e){this.isInit=!1,this.currentIframe.attr("src",""+this.streamingAttribute.researchHost+e.link),this.activeId=e.id},t.prototype.isActiveRow=function(e){return e===this.activeId},t.$inject=["PageService","$element","StreamingAttribute","ResearchContentService","AlertService","RefreshEvent"],t}(ys),fm=function(){function e(){}return e}(),ym=function(){function e(){}return e}(),gm=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this,t)||this;return d.pageService=t,d.streamingAttribute=i,d.newsService=r,d.alertService=n,d.$sce=o,d.$window=s,d.$scope=a,d.userInfoService=c,d.newsStore=l,d.refreshEvent=u,d.NEWS_LANGUAGE_ENGLISH=Pr.ENGLISH,d.NEWS_LANGUAGE_THAI=Pr.THAI,d.onReceiveRefreshEventCallBack=d.getNewsList.bind(d),d.currentNewsDetail=new ym,d.currentSymbol="",d}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.newsSourceList=this.userInfoService.newsSoureList,void 0===this.newsStore.selectedSource&&(this.newsStore.selectedSource=this.newsSourceList[0]),this.initialView(),this.getNewsList(),this.refreshEvent.subscribe(this.onReceiveRefreshEventCallBack)},t.prototype.stopService=function(){this.refreshEvent.unsubscribe(this.onReceiveRefreshEventCallBack)},t.prototype.onInputSymbolChange=function(e){this.currentSymbol=e.toUpperCase(),this.getNewsList()},t.prototype.onDeleteSymbol=function(){this.currentSymbol="",this.getNewsList()},t.prototype.initialView=function(){this.activeId=null,this.isInit=!0},t.prototype.isShowThaiNews=function(){return!!this.newsStore.selectedSource&&this.newsStore.selectedSource.isSupportThaiLanguage},t.prototype.onClickLanguageButton=function(){this.onLanguageChange()},t.prototype.onLanguageChange=function(){this.initialView(),this.getNewsList()},t.prototype.getNewsList=function(){var e=this,t=""!==this.currentSymbol;this.newsContentList=[],this.newsService.getNewsList(this.newsStore.selectedSource,this.currentSymbol).then(function(i){var r=qn.parseNewsItemResponseMessage(i);e.newsContentList=t&&e.newsStore.selectedSource.isSET()?e.filterNewsByDate(r,new Date):r,e.$scope.$broadcast("vsRepeatReCalculateScroll")},function(e){e&&e.length>0&&console.error(e)})},t.prototype.filterNewsByDate=function(e,t){return e.filter(function(e){return t.setHours(0,0,0,0)===e.date.setHours(0,0,0,0)})},t.prototype.getNewsDetail=function(e){var t=this;this.currentNewsDetail=new ym,this.newsStory="",this.newsService.getNewsDetailBySource(e,this.newsStore.selectedSource).then(function(e){t.currentNewsDetail=e;var i=document.createElement("div");i.innerHTML=t.currentNewsDetail.headline,t.currentNewsDetail.headline=i.textContent,t.newsStory=t.$sce.trustAsHtml(e.story),t.isInit=!1}),this.activeId=e.id},t.prototype.isActiveRow=function(e){return e===this.activeId},t.prototype.onNewsSourceChanged=function(e){this.newsStore.selectedSource=e,this.initialView(),this.getNewsList()},t.prototype.onClickReadMoreButton=function(){this.$window.open(this.currentNewsDetail.link,"_blank")},t.prototype.isMoneyChannelMode=function(){return this.newsStore.selectedSource===Wn.MONEY_CHANNEL},Object.defineProperty(t.prototype,"selectedLanguage",{get:function(){return!!this.newsStore&&this.newsStore.selectedSource.selectedLanguage},set:function(e){
this.newsStore.selectedSource.selectedLanguage=e},enumerable:!0,configurable:!0}),t.prototype.getNewsSourceType=function(){return this.newsStore.selectedSource?this.newsStore.selectedSource.dropdoenName:""},t.$inject=["PageService","StreamingAttribute","NewsService","AlertService","$sce","$window","$scope","UserInfoService","NewsStore","RefreshEvent"],t}(ys),Sm=function(){function e(e,t,i){this.newsService=e,this.$window=t,this.streamingAttribute=i}return e.prototype.openAttachment=function(){var e=this,t=this.$window.open("","_blank","scrollbars=yes,resizable=yes,height=550,width=700");this.newsService.getNewsDetail(this.data.id,Wn.SET_NEWS).then(function(i){var r=i.detail;e.currentNewsDetail=r;var n=""+e.streamingAttribute.researchHost+e.currentNewsDetail.News.Attachments.Attachment.LinkPath;t.location.href=n})},e.$inject=["NewsService","$window","StreamingAttribute"],e}();angular.module("info",["web-api","alert","multi-market","service","parser","ui-component"]).service("ResearchContentService",hm).service("NewsService",Yn).service("NewsStore",pm).component("infoPage",{template:i(/*! ../../html/info/info-page.html */201),controller:mm,bindings:{page:"@"}}).component("researchPage",{template:i(/*! ../../html/info/research-page.html */202),controller:vm,bindings:{page:"@"}}).component("researchRow",{template:i(/*! ../../html/info/research-row.html */203),controller:fm,bindings:{data:"<"}}).component("newsPage",{template:i(/*! ../../html/info/news-page.html */204),controller:gm,bindings:{page:"@"}}).component("newsRow",{template:i(/*! ../../html/info/news-row.html */205),controller:Sm,bindings:{data:"<"}});var bm=function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,r,u)||this;return h.$element=t,h.$window=i,h.pageService=r,h.initDataEvent=n,h.streamingAttribute=o,h.currentSymbolChangeEvent=s,h.instrumentService=a,h.userApplicationProfileService=c,h.currentAccountChangeEvent=l,h.screenTrackerService=u,h.userEnvironmentService=d,h.onIframeLoadedCallBack=h.onIframeLoaded.bind(h),h.currentSymbolChangeCallBack=h.onCurrentSymbolChange.bind(h),h.currentAccountChangeCallBack=h.onCurrentAccountChange.bind(h),h.onRecieveMessageFromIframeCallBack=h.onRecieveMessageFromIframe.bind(h),h.isInitialized=!1,h}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.isInitialized||this.init(),this.currentSymbolChangeEvent.subscribe(this.currentSymbolChangeCallBack),this.currentAccountChangeEvent.subscribe(this.currentAccountChangeCallBack),this.changeToPage()},t.prototype.getAnalyticsScreenName=function(){return ss.COND_ORDER_WEB},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){var e={page:this.getAnalyticsScreenName(),accountNo:this.userEnvironmentService.currentAccount.accountNo,system:""+this.userEnvironmentService.currentAccount.systemType,frontType:""+this.userEnvironmentService.currentAccount.frontType};return e},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.currentSymbolChangeCallBack),this.currentAccountChangeEvent.unsubscribe(this.currentAccountChangeCallBack)},t.prototype.init=function(){this.iframe=this.$element.find("iframe"),this.iframe.attr("src",this.streamingAttribute.itpHost+"/ConditionOrder/C00_ConditionOrderRedirect.jsp?channel=streaming6&id=ConditionOrder"),this.iframe.on("load",this.onIframeLoadedCallBack),this.isInitialized=!0},t.prototype.onIframeLoaded=function(){this.currentSymbol&&this.iframe[0].contentWindow.postMessage("INST|"+this.currentSymbol.name,this.streamingAttribute.itpHost),this.$window.addEventListener&&this.$window.addEventListener("message",this.onRecieveMessageFromIframeCallBack,!1)},t.prototype.onRecieveMessageFromIframe=function(e){var t=this;if(this.isInitialized){var i=e.data,r="string"==typeof i&&i.indexOf("ConditionOrder")!==-1;if(r){var n=i.split("|"),o=n[1];if("INST"===o)this.instrumentService.searchSymbolByBrokerLicense(n[2]).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)});else if("ACC"===o){var s=n[2].split("^"),a=s[0],c=s[1],l=new vi;l.systemType="E"===a?mi.EQUITY:mi.DERIVATIVES,l.accountNo=c,this.currentAccountChangeEvent.publish(l)}}}},t.prototype.onCurrentSymbolChange=function(e){this.isInitialized&&(this.currentSymbol=e,this.iframe[0].contentWindow.postMessage("INST|"+e.name,this.streamingAttribute.itpHost))},t.prototype.onCurrentAccountChange=function(e){if(this.isInitialized){this.currentAccount=e;var t=e.systemType===mi.EQUITY?"E":"D";e.isEmptyAccount||this.iframe[0].contentWindow.postMessage("ACC|"+t+"^"+e.accountNo,this.streamingAttribute.itpHost)}},t.$inject=["$element","$window","PageService","InitDataEvent","StreamingAttribute","CurrentSymbolChangeEvent","InstrumentService","UserApplicationProfileService","CurrentAccountChangeEvent","ScreenTrackerService","UserEnvironmentService"],t}(Zs);angular.module("conditional-order",["service","multi-market"]).component("conditionalOrder",{template:i(/*! ../../html/conditional-order/conditional-order.html */206),controller:bm,bindings:{page:"@"}});var Cm=function(e){function t(t,i,r,n,o){var s=e.call(this,t)||this;return s.pageService=t,s.snapshotPubsub=i,s.favouriteService=r,s.colorService=n,s.instrumentService=o,s.onRecieveSnapshotCallback=s.onRecieveSnapshot.bind(s),s.view=new ur,s.symbol&&(s.view.symbol=s.symbol),s}return ne(t,e),t.prototype.startService=function(){this.view.symbol=this.symbol,this.snapshotPubsub.subscribe([this.symbol],this.onRecieveSnapshotCallback)},t.prototype.stopService=function(){this.snapshotPubsub.unsubscribe([this.symbol],this.onRecieveSnapshotCallback)},t.prototype.viewDidLoad=function(){},t.prototype.onRecieveSnapshot=function(e){this.favouriteService.parseFavourite(e,this.view),this.view.tsLevel=this.instrumentService.getTSLevel(this.symbol)},t.prototype.isMustShowToolTip=function(){return this.view.name&&this.view.name.length>12},t.$inject=["PageService","SnapshotPublishSubscriber","FavouriteService","ColorService","InstrumentService"],t}(ys),Em=function(){function e(){}return e.parseDerivativesOrderPush=function(e,t){var i=new mo,r=e.accountNo,n=e.status,o=Ye.lookup[e.position]||Ye.NONE,s=Be.lookup[e.side]||Be.NONE,a=e.seriesID,c=yt.formatVolume(e.volume),l=Ge.lookup[e.priceType],u=l&&l.isLimit()?yt.formatPrice(e.price,e.priceDigit):l.fullname;return i.time=t,i.detail=r+"-"+n+" "+o.fullname+"-"+s.derivativeFullname+" "+a+"-"+c+"-"+u,i.cssClass=s.classname,i},e.parseAnnouncementBiglotAndMarketStatus=function(e,t,i,r){var n=[];if(e.hasBigLot()){var o=new mo,s=e.bigLot.instrumentID,a=yt.formatVolume(e.bigLot.volume),c=yt.formatPrice(e.bigLot.price,e.bigLot.priceDigit);o.time=t,o.cssClass=ae.UNCHANGED,e.isEquity()&&!r?(o.detail=s+": Big Lot Transaction - "+a+" shares @ "+c+" Baht",n.push(o)):e.isDerivatives()&&!i&&(o.detail=s+": Block Trade Transaction - "+a+" contracts @ "+c+" Baht",n.push(o))}if(e.hasMarketStatus()){var o=new mo;e.marketStatus.status;if(o.time=t,o.cssClass=ae.WHITE,e.isEquity()&&!r){var l=e.marketStatus.status,u="SET";o.detail="["+u+"] "+l,n.push(o)}else if(e.isDerivatives()&&!i){var d=e.marketStatus.status,h=e.marketStatus.marketID,u="TFEX";o.detail="["+u+"-"+h+"] "+d,n.push(o)}}return n},e.parseAdminMessageInfo=function(e,t){var i=new mo;return i.cssClass=ae.WHITE,i.detail=e.detail,i.time=t,i},e}(),Am=(function(){function e(){}return e.CHANGE="change",e.MARK_CANCEL="mark_cancel",e.UNMARK_CANCEL="unmark_cancel",e}(),function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.publish=function(e){this.signal.dispatch(e)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}()),wm=function(){function e(){this.signal=new li}return e.prototype.subscribe=function(e,t,i){this.signal.add(""+e+t,i)},e.prototype.publish=function(e,t){var i=this;e.forEach(function(e,r){var n=angular.copy(e);i.signal.dispatch(""+r+t,n)})},e.prototype.unsubscribe=function(e,t,i){this.signal.remove(""+e+t,i)},e}(),Tm=function(){function e(){}return e.NON_DEFINED="NON_DEFINED",e.PUSH="PUSH",e.PULL="PULL",e}(),Dm=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p){var m=e.call(this,t)||this;return m.pageService=t,m.currentAccountChangeEvent=i,m.currentSymbolChangeEvent=r,m.instrumentInfoPublishSubscriber=n,m.userInfoService=o,m.instrumentService=s,m.currentOrderStatusChangeEvent=a,m.userApplicationProfileService=c,m.clickDroppedEvent=l,m.clickTableViewUpdateEvent=u,m.orderPushStatusPublishSubscriber=d,m.streamingAttribute=h,m.orderAnnouncementService=p,m.currentAccountChangeCallback=m.onCurrentAccountChange.bind(m),m.currentEquityAndDerivSymbolChangeCallback=m.onCurrentEquityAndDerivSymbolChange.bind(m),m.onReceiveInstrumentInfoCallback=m.onReceiveInstrumentInfo.bind(m),m.onReceiveEquityOrderStatusCallBack=m.onReceiveEquityOrderStatus.bind(m),m.onReceiveDerivativesOrderStatusCallBack=m.onReceiveDerivativesOrderStatus.bind(m),m.onReceiveOrderPushStatusStatusCallBack=m.onReceiveOrderPushStatusStatus.bind(m),m.tableViewDataArray=[],m.cancelableOrderEquityMap=new ut([]),m.cancelableOrderDerivativesMap=new ut([]),m.currentInstrumentInfo=new Oe,m.bidOffer=new ht,m.overview=new _i,m.currentSymbol=dt.empty(),m.currentAccount=new vi,m.currentAccount.isEmptyAccount=!0,m.isPreSession=!1,m.accountConnectionStatus=Tm.NON_DEFINED,m}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.currentAccountChangeCallback),this.orderPositionList||this.initialDerivativesOrderPosition(),this.userInfoService.isMarketRep()&&this.orderAnnouncementService.init()},t.prototype.stopService=function(){this.unsubscribeCurrentOrderStatusChangeEvent(),this.currentAccountChangeEvent.unsubscribe(this.currentAccountChangeCallback),this.unsubscribeCurrentEquityDerivativesSymbolEvent(),this.unsubscribeCurrentInstrumentInfo(),this.freezeAccountState()},t.prototype.freezeAccountState=function(){var e=new vi;e.systemType=this.currentAccount.systemType,e.isEmptyAccount=!0,this.currentAccount=e},t.prototype.initialDerivativesOrderPosition=function(){this.currentAccount.hasAutoNet?this.orderPositionList=Ye.ALL_AUTO_NET:this.userInfoService.enableAutoPosition?this.orderPositionList=Ye.ALL:this.orderPositionList=Ye.ALL_NO_AUTO},t.prototype.onCurrentAccountChange=function(e){if(this.accountConnectionStatus=Tm.NON_DEFINED,e.isDerivatives()&&e.frontType===fi.DGW){var t=new Gi;t.brokerId=this.streamingAttribute.brokerId,t.service=Ki.DGW,t.status=zi.PULL,this.onReceiveOrderPushStatusStatus(t)}else this.orderPushStatusPublishSubscriber.subscribe(e,this.onReceiveOrderPushStatusStatusCallBack);if(!this.currentAccount.isEmptyAccount&&!this.currentAccount.isAllDerivatives()&&!e.isAllDerivatives()&&this.currentAccount.systemType===e.systemType)return void(this.currentAccount=e);switch(this.unsubscribeCurrentOrderStatusChangeEvent(),this.unsubscribeCurrentEquityDerivativesSymbolEvent(),this.currentAccount.systemType!==e.systemType&&(this.overview=new _i,this.bidOffer=new ht,this.clearTableViewData(),this.updateViewData()),e.systemType){case mi.EQUITY:this.currentSymbolChangeEvent.subscribeEquity(this.currentEquityAndDerivSymbolChangeCallback);break;case mi.DERIVATIVES:this.currentSymbolChangeEvent.subscribeDerivatives(this.currentEquityAndDerivSymbolChangeCallback)}this.currentAccount=e,this.subscribeCurrentOrderStatusChangeEvent()},t.prototype.subscribeCurrentOrderStatusChangeEvent=function(){this.currentAccount&&(this.currentAccount.isEquity()?this.currentOrderStatusChangeEvent.subscribeEquity(this.onReceiveEquityOrderStatusCallBack):this.currentAccount.isDerivatives()&&!this.currentAccount.isAllDerivatives()&&this.currentOrderStatusChangeEvent.subscribeDerivatives(this.onReceiveDerivativesOrderStatusCallBack))},t.prototype.unsubscribeCurrentOrderStatusChangeEvent=function(){this.currentAccount&&(this.currentAccount.isEquity()?this.currentOrderStatusChangeEvent.unsubscribeEquity(this.onReceiveEquityOrderStatusCallBack):this.currentAccount.isDerivatives()&&!this.currentAccount.isAllDerivatives()&&this.currentOrderStatusChangeEvent.unsubscribeDerivatives(this.onReceiveDerivativesOrderStatusCallBack))},t.prototype.unsubscribeCurrentEquityDerivativesSymbolEvent=function(){if(this.currentAccount)switch(this.currentAccount.systemType){case mi.EQUITY:this.currentSymbolChangeEvent.unsubscribeEquity(this.currentEquityAndDerivSymbolChangeCallback);break;case mi.DERIVATIVES:this.currentSymbolChangeEvent.unsubscribeDerivatives(this.currentEquityAndDerivSymbolChangeCallback)}},t.prototype.onCurrentEquityAndDerivSymbolChange=function(e){this.currentSymbol.isEqual(e)||(this.overview=new _i,this.bidOffer=new ht,this.clearTableViewData(),this.updateViewData()),this.unsubscribeCurrentInstrumentInfo(),this.instrumentInfoPublishSubscriber.subscribe(e.name,Hr.Intraday,this.onReceiveInstrumentInfoCallback),this.currentSymbol=e,this.currentInstrumentInfo.instrumentID=e.name,this.getStaticData(e.name)},t.prototype.unsubscribeCurrentInstrumentInfo=function(){this.currentSymbol&&""!==this.currentSymbol.name&&this.instrumentInfoPublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveInstrumentInfoCallback)},t.prototype.onMiniOverviewSubmitSymbol=function(e){this.userApplicationProfileService.setCurrentSymbol(e)},t.prototype.onReceiveInstrumentInfo=function(e){this.currentInstrumentInfo.update(e),this.isPreSession=Bi.isEquityOrDerivativesOnPreOpenPreClose(e),this.bidOffer=Cl.parseBidOffer(this.currentInstrumentInfo,this.bidOffer,this.totalVolume),this.totalVolume=Cl.parseTotalVolume(this.currentInstrumentInfo,this.totalVolume),this.tableViewDataArray=vt.parse(this.currentInstrumentInfo,this.bidOffer,this.isPreSession),this.overview=Bi.parse(this.currentInstrumentInfo,this.overview),this.overview&&(this.overview.tsLevel=this.instrumentService.getTSLevel(this.currentInstrumentInfo.instrumentID)),e.isEquity()?this.updateOrderEquityInLadder():e.isDerivatives()&&this.updateOrderDerivativesInLadder(),this.updateViewData()},t.prototype.onReceiveOrderPushStatusStatus=function(e){this.accountConnectionStatus=e.status},t.prototype.isEquity=function(){return!!this.currentAccount&&this.currentAccount.isEquity()},t.prototype.isDerivatives=function(){return!!this.currentAccount&&this.currentAccount.isDerivatives()},t.prototype.getStaticData=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e.toUpperCase(),Qe.DERIVATIVE).then(function(e){t.instrumentStaticData=e})},t.prototype.updateOrderEquityInLadder=function(){var e=this;this.tableViewDataArray.forEach(function(t){t.buyOrders=[];var i=e.cancelableOrderEquityMap.value(e.getOrderKeyForMap(e.currentSymbol.name,Be.BUY,e.getEquityDisplayPrice(t.price,t.priceType)));void 0!==i&&(t.buyOrders=i,t.buyOrderItem=new pt,t.buyOrderItem.value=i),t.processBuyOrder(),t.sellOrders=[];var r=e.cancelableOrderEquityMap.value(e.getOrderKeyForMap(e.currentSymbol.name,Be.SELL,e.getEquityDisplayPrice(t.price,t.priceType)));void 0!==r&&(t.sellOrders=r,t.sellOrderItem=new pt,t.sellOrderItem.value=r),t.processSellOrder()}),this.updateViewData()},t.prototype.updateOrderDerivativesInLadder=function(){var e=this;this.tableViewDataArray.forEach(function(t){t.buyOrders=[];var i=e.cancelableOrderDerivativesMap.value(e.getOrderKeyForMap(e.currentSymbol.name,Be.BUY,e.getDerivativesDisplayPrice(t.price,t.priceType)));void 0!==i&&(t.buyOrders=i,t.buyOrderItem=new pt,t.buyOrderItem.value=i),t.processBuyOrder(),t.sellOrders=[];var r=e.cancelableOrderDerivativesMap.value(e.getOrderKeyForMap(e.currentSymbol.name,Be.SELL,e.getDerivativesDisplayPrice(t.price,t.priceType)));void 0!==r&&(t.sellOrders=r,t.sellOrderItem=new pt,t.sellOrderItem.value=r),t.processSellOrder()}),this.updateViewData()},t.prototype.onReceiveEquityOrderStatus=function(e){this.createCancelableEquityOrderStatusMap(e),this.currentSymbol.isEmpty()||this.updateOrderEquityInLadder()},t.prototype.onReceiveDerivativesOrderStatus=function(e){this.createCancelableDerivativesOrderStatusMap(e),this.currentSymbol.isEmpty()||this.updateOrderDerivativesInLadder()},t.prototype.createCancelableEquityOrderStatusMap=function(e){var t=this;this.cancelableOrderEquityMap=new ut([]),e.forEach(function(e){if(e.canCancel){var i=t.getEquityDisplayPrice(e.price,Ge.lookup[e.priceType]),r=t.cancelableOrderEquityMap[t.getOrderKeyForMap(e.symbol,e.side,i)];void 0===r&&(r=[]);var n=Ge.lookup[e.priceType];n.isLimit()||(e.price=0),r.push(e),t.cancelableOrderEquityMap.add(t.getOrderKeyForMap(e.symbol,e.side,i),r)}})},t.prototype.createCancelableDerivativesOrderStatusMap=function(e){var t=this;this.cancelableOrderDerivativesMap=new ut([]),e.forEach(function(e){if(e.canCancelled){var i=t.getDerivativesDisplayPrice(e.price,e.priceType),r=t.cancelableOrderDerivativesMap[t.getOrderKeyForMap(e.symbol,e.side,i)];void 0===r&&(r=[]),e.priceType.isLimit()||(e.price=0),r.push(e),t.cancelableOrderDerivativesMap.add(t.getOrderKeyForMap(e.symbol,e.side,i),r)}})},t.prototype.updateCancelableOrderEquityMap=function(e,t,i){var r=e[0].symbol,n=e[0].side,o=this.getEquityDisplayPrice(e[0].price,Ge.lookup[e[0].priceType]),s=this.getOrderKeyForMap(r,n,o);switch(t){case ft.CANCEL:this.removeFromMap(e,s,this.cancelableOrderEquityMap);break;case ft.CHANGE:this.removeFromMap(e,s,this.cancelableOrderEquityMap);var a=angular.copy(e);a.forEach(function(e){e.price=i});var c=this.getOrderKeyForMap(r,n,""+i);this.addToMap(a,c,this.cancelableOrderEquityMap);break;case ft.MARK_DRAGGED:this.setMarkDraggedInMap(!0,e,s,this.cancelableOrderEquityMap);break;case ft.UNMARK_DRAGGED:this.setMarkDraggedInMap(!1,e,s,this.cancelableOrderEquityMap)}this.updateOrderEquityInLadder()},t.prototype.updateCancelableOrderDerivativesMap=function(e,t,i){var r=e[0].symbol,n=e[0].side,o=this.getDerivativesDisplayPrice(e[0].price,e[0].priceType),s=this.getOrderKeyForMap(r,n,o);switch(t){case ft.CANCEL:this.removeFromMap(e,s,this.cancelableOrderDerivativesMap);break;case ft.CHANGE:this.removeFromMap(e,s,this.cancelableOrderDerivativesMap);var a=angular.copy(e);a.forEach(function(e){e.price=i});var c=this.getOrderKeyForMap(r,n,""+i);this.addToMap(a,c,this.cancelableOrderDerivativesMap);break;case ft.MARK_DRAGGED:this.setMarkDraggedInMap(!0,e,s,this.cancelableOrderDerivativesMap);break;case ft.UNMARK_DRAGGED:this.setMarkDraggedInMap(!1,e,s,this.cancelableOrderDerivativesMap)}this.updateOrderDerivativesInLadder()},t.prototype.removeFromMap=function(e,t,i){var r=i.value(t);e.forEach(function(e){var t=e.getIndexFromList(r);r.splice(t,1)}),i.add(t,r)},t.prototype.addToMap=function(e,t,i){var r=i.value(t);r.push.apply(r,e),i.add(t,r)},t.prototype.setMarkDraggedInMap=function(e,t,i,r){var n=r.value(i);t.forEach(function(t){var i=t.getIndexFromList(n);i<0||(n[i].isMarkDragged=e)}),r.add(i,n)},t.prototype.getOrderKeyForMap=function(e,t,i){return""+e+t.shortname+i},t.prototype.getEquityDisplayPrice=function(e,t){return t.isLimit()?""+e:t.value.toUpperCase()},t.prototype.getDerivativesDisplayPrice=function(e,t){return t.isLimit()?""+e:t.derivativeValue},t.prototype.updateViewData=function(){return this.currentSymbol.isEquity()?void this.clickTableViewUpdateEvent.publish(this.tableViewDataArray,Qe.EQUITY):this.currentSymbol.isDerivatives()?void this.clickTableViewUpdateEvent.publish(this.tableViewDataArray,Qe.DERIVATIVE):void 0},t.prototype.clearTableViewData=function(){for(var e=0;e<this.tableViewDataArray.length;e++)this.tableViewDataArray[e]=new mt},t.$inject=["PageService","CurrentAccountChangeEvent","CurrentSymbolChangeEvent","InstrumentInfoPublishSubscriber","UserInfoService","InstrumentService","CurrentOrderStatusChangeEvent","UserApplicationProfileService","ClickDroppedEvent","ClickTableViewUpdateEvent","OrderPushStatusPublishSubscriber","StreamingAttribute","OrderAnnouncementService"],t}(ys),Im=function(){function e(){}return e.MouseOver="MouseOver",e.MouseOut="MouseOut",e.Drag="Drag",e.Drop="Drop",e}(),Pm=function(){function e(){}return e.MultiOrder="MultiOrder",e.SingleOrder="SingleOrder",e.Volume="Volume",e.Buy="Buy",e.Sell="Sell",e}(),Om=function(){function e(e){this.colorService=e}return e.prototype.onSubmitSymbol=function(e){this.symbol=e,this.onValidatedSymbol({instrument:e})},e.prototype.getCurrentMarket=function(){return this.currentAccount?this.currentAccount.systemType===mi.EQUITY?"E":"D":"E"},e.prototype.getOrderPushStatusColor=function(){return this.accountConnectionStatus===Tm.PUSH?"push":"pull"},e.prototype.isAccountOnPush=function(){return this.accountConnectionStatus===Tm.PUSH},e.prototype.isAccountOnNonPush=function(){return this.accountConnectionStatus!==Tm.PUSH},e.prototype.isAccountConnectionDefined=function(){return this.accountConnectionStatus!==Tm.NON_DEFINED},e.prototype.getPushStatusTootipMsg=function(){return this.isAccountOnPush()?"Order will be refreshed automatically.":"Order will NOT be refreshed automatically."},e.prototype.isSymbolDefined=function(){return!this.symbol.isEmpty()&&void 0!==this.symbol},e.$inject=["ColorService"],e}(),km=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t,n)||this;return a.pageService=t,a.userInfoService=i,a.initDataEvent=r,a.screenTrackerService=n,a.userEnvironmentService=o,a.currentAccountChangeEvent=s,a.currentAccountChangeCallback=a.onCurrentAccountChange.bind(a),a.onInitDataCompleteCallBack=a.onInitDataComplete.bind(a),a.isMarketRepMode=!1,a.initDataEvent.subscribe(a.onInitDataCompleteCallBack),a}return ne(t,e),t.prototype.onCurrentAccountChange=function(e){this.changeToPage()},t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.currentAccountChangeCallback)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.currentAccountChangeCallback)},t.prototype.onInitDataComplete=function(){this.isMarketRepMode=this.userInfoService.isMarketRep()},t.prototype.getAnalyticsScreenName=function(){return ss.CLICK},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){var e={page:this.getAnalyticsScreenName(),accountNo:this.userEnvironmentService.currentAccount.accountNo,system:""+this.userEnvironmentService.currentAccount.systemType,frontType:""+this.userEnvironmentService.currentAccount.frontType};return e},t.$inject=["PageService","UserInfoService","InitDataEvent","ScreenTrackerService","UserEnvironmentService","CurrentAccountChangeEvent"],t}(Zs),$m=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d,h,p){this.userInfoService=e,this.userApplicationProfileService=t,this.currentAccountChangeEvent=i,this.pinService=r,this.alertService=n,this.placeOrderService=o,this.orderStatusService=s,this.mongoService=a,this.refreshEvent=c,this.clickDroppedEvent=l,this.$scope=u,this.orderEntrySettingChangeEvent=d,this.facebookService=h,this.menuService=p,this.currentAccountChangeCallback=this.onCurrentAccountChange.bind(this),this.onOrderEntrySettingChangeCallBack=this.onOrderEntrySettingChange.bind(this),this.isNvdr=!1,this.isLockPlaceOrder=!1,this.selectedVolumeIndex=0,this.clearHintColBuy(),this.clearHintColSell(),this.isDragging=!1,this.initialSubscribe()}return e.prototype.initialSubscribe=function(){this.currentOrderEntrySetting=_a.empty(),this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChangeCallBack),this.currentAccountChangeEvent.subscribe(this.currentAccountChangeCallback)},e.prototype.isShowPin=function(){return this.userInfoService.isInvestor()},e.prototype.onCurrentAccountChange=function(e){this.pin=this.getPin(null)},e.prototype.getPin=function(e){return this.pinService.isSavePin()?this.pinService.pin:e},e.prototype.$onDestroy=function(){this.currentAccountChangeEvent.unsubscribe(this.currentAccountChangeCallback),this.orderEntrySettingChangeEvent.unsubscribe(this.onOrderEntrySettingChangeCallBack)},e.prototype.changeOrder=function(e,t){var i=this;if(this.orderStatusService.isLockChangeOrderEquity)return void this.alertService.showErrorAlert("Order cannot be changed at this moment. Please wait until previous order is completed.");var r=Qi.isRequired(this.pin,this.pinService.isNotSavePin()),n=this.getEquityPriceTypeFromString(e.priceType),o=angular.copy(e);return o.price=yt.toNumber(t),this.updateOrderStatusMap({order:[e],mode:ft.CHANGE,price:o.price}),this.updateOrderStatusMap({order:[o],mode:ft.MARK_DRAGGED}),this.currentOrderEntrySetting.confirmPopUp.enable||r?this.alertService.showChangeOrderConfirmAlert(e.orderNo,yt.formatVolume(e.volume),t,n,r).then(function(r){Qi.isEmpty(i.pin)&&(i.pin=i.getPin(r)),i.generateAndSendChangeOrderRequest(e,t)},function(){i.updateOrderStatusMap({order:[o],mode:ft.CHANGE,price:e.price}),i.updateOrderStatusMap({order:[e],mode:ft.UNMARK_DRAGGED})}):(Qi.isEmpty(this.pin)&&(this.pin=this.getPin(null)),void this.generateAndSendChangeOrderRequest(e,t))},e.prototype.generateAndSendChangeOrderRequest=function(e,t){var i=this.generateChangeOrderParam(e,t);this.lockChangeOrder(),this.lastSubmitChangeOrderParameter=i,this.sendChangeOrder(i)},e.prototype.sendChangeOrder=function(e){var t=this;this.orderStatusService.changeEquityOrderStatus(e).then(function(e){t.unlockChangeOrder()},function(e){return e.isWarning?void t.onWarningChangeOrder(e.message):(t.alertService.showErrorAlert(e.message),void t.unlockChangeOrder())})["finally"](function(){t.clearForm()})},e.prototype.onWarningChangeOrder=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e).then(function(){var e=t.lastSubmitChangeOrderParameter;e.isConfirmWarning=!0,t.sendChangeOrder(e)},function(){t.unlockChangeOrder()})},e.prototype.cancelOrder=function(e){var t=this,i=Qi.isRequired(this.pin,this.pinService.isNotSavePin());this.updateOrderStatusMap({order:e,mode:ft.MARK_DRAGGED}),this.currentOrderEntrySetting.confirmPopUp.enable||i?this.alertService.showCancelOrderConfirmAlert(e,null,i).then(function(i){Qi.isEmpty(t.pin)&&(t.pin=t.getPin(i)),t.generateAndSendCancelOrderRequest(e)},function(){t.updateOrderStatusMap({order:e,mode:ft.UNMARK_DRAGGED})}):(Qi.isEmpty(this.pin)&&(this.pin=this.getPin(null)),this.generateAndSendCancelOrderRequest(e))},e.prototype.generateAndSendCancelOrderRequest=function(e){var t=this,i=this.generateCancelOrderParam(e);this.updateOrderStatusMap({order:e,mode:ft.CANCEL}),this.orderStatusService.cancelOrderEquity(i).then(function(e){},function(e){t.alertService.showErrorAlert(e.errorMessage)})["finally"](function(){t.clearForm()})},e.prototype.submitOrder=function(e,t){var i=this;return this.isLockPlaceOrder?void this.alertService.showErrorAlert("Cannot Place Order this time"):(this.isLockPlaceOrder=!0,this.lastSubmitOrderParameter=e,this.currentOrderEntrySetting.confirmPopUp.enable?this.alertService.showPlaceOrderConfirmAlert(e).then(function(){i.placeOrder(e)},function(){i.isLockPlaceOrder=!1}):this.placeOrder(e),void this.facebookService.placeOrderEquityTrack(this.menuService.getCurrentMenuName(),ya.CLICK))},e.prototype.placeOrder=function(e){var t=this;this.placeOrderService.requestPlaceOrderEquity(e).then(function(e){t.isLockPlaceOrder=!1},function(e){if(e){if(e.isWarning)return t.onWarning(e);e.isSuccess||t.alertService.showErrorAlert(e.errorMessage)}t.isLockPlaceOrder=!1})["finally"](function(){t.refreshPageData(),t.clearForm()})},e.prototype.onWarning=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e.warnMessage).then(function(){var e=new Uu;angular.copy(t.lastSubmitOrderParameter,e),e.confirmedWarn=!0,t.placeOrder(e)},function(){t.isLockPlaceOrder=!1})},e.prototype.refreshPageData=function(){this.refreshEvent.dispatchEvent()},e.prototype.clearForm=function(){this.pin=this.getPin(null)},e.prototype.validateForm=function(e){var t=[];return this.currentAccount&&this.currentAccount.isEmptyAccount&&t.push("Please insert trading account."),""===this.symbol.name&&t.push("Please insert symbol."),isNaN(e)&&t.push("Invalid Price."),this.volumeList[this.selectedVolumeIndex].isEmpty()&&t.push("Please insert volume."),this.shouldShowPinInput()!==!0||this.pinService.isSavePin()||null!==this.pin&&""!==this.pin||t.push("Please insert PIN."),0===t.length||(this.alertService.showValidationErrorAlert(t),!1)},e.prototype.onBuy=function(e,t,i){this.validateForm(e)&&this.submitOrder(this.generateSubmitOrderParam(e,Be.BUY,i),t)},e.prototype.onSell=function(e,t,i){this.validateForm(e)&&this.submitOrder(this.generateSubmitOrderParam(e,Be.SELL,i),t)},e.prototype.generateChangeOrderParam=function(e,t){var i=this.getEquityPriceTypeFromString(e.priceType),r={volume:e.volume,txtAccountNo:this.currentAccount.accountNo,txtPIN:this.pin,orderNo:e.orderNo,price:yt.toNumber(t),orderNoFis:e.orderNoFis,orderNoSeos:e.orderNoSeos,priceType:i,tradeDate:e.tradeDate,accountFrontType:this.currentAccount.frontType};return r},e.prototype.generateCancelOrderParam=function(e){for(var t=[],i=0,r=e.length;i<r;i++)t.push({orderNo:e[i].orderNo,orderNoSeos:e[i].orderNoSeos,orderNoFis:e[i].orderNoFis,sequenceNumber:e[i].sequenceNumber,tradeDate:e[i].tradeDate,symbol:e[i].symbol});return{accountNo:this.currentAccount.accountNo,accountFrontType:this.currentAccount.frontType,pin:this.pin,orders:t}},e.prototype.getEquityPriceTypeFromString=function(e){var t;return t=""!==e?Ge.lookup[e]:Ge.LIMIT},e.prototype.lockChangeOrder=function(){this.orderStatusService.isLockChangeOrderEquity=!0},e.prototype.unlockChangeOrder=function(){this.orderStatusService.isLockChangeOrderEquity=!1,this.lastSubmitChangeOrderParameter=void 0},e.prototype.generateSubmitOrderParam=function(e,t,i){var r=new Uu;return r.accountNo=this.currentAccount.accountNo,r.clientType=this.currentAccount.clientType,r.side=t.shortname,r.symbol=this.symbol.name.toUpperCase(),r.price=e,r.volume=this.volumeValue,r.pin=this.getPin(this.pin),r.priceType=i.value,r.condition=Ke.DAY.value,r.isNvdr=this.isNvdr,r.iceberg=null,r},e.prototype.isUserMarketRep=function(){return this.userInfoService.isMarketRep()},e.prototype.shouldShowPinInput=function(){return this.userInfoService.isInvestor()},Object.defineProperty(e.prototype,"volumeValue",{get:function(){var e=yt.toNumber(this.volumeList[this.selectedVolumeIndex].value);return null===e?NaN:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeList",{get:function(){return this.userApplicationProfileService.predefinedClickVolumeEquity},enumerable:!0,configurable:!0}),e.prototype.modifyVolumeList=function(e){this.userApplicationProfileService.predefinedClickVolumeEquity[this.selectedVolumeIndex].value=e},e.prototype.onDropCancel=function(e,t,i){var r=[];if(!(i instanceof Yi)){if(i instanceof pt){i.isMarkDragged=!0;var n=i;n.value.forEach(function(e){r.push(e)})}i instanceof Qa&&(r=[i]),this.cancelOrder(r)}},e.prototype.onOverCancel=function(e,t,i){var r=t.helper[0],n=r.firstElementChild,o=r.lastElementChild;n.setAttribute("style","cursor: grabbing; cursor: -moz-grabbing; cursor: -webkit-grabbing;"),r.classList.contains("each-mock-order")&&o.setAttribute("style","cursor: grabbing; cursor: -moz-grabbing; cursor: -webkit-grabbing;")},e.prototype.onActivate=function(e){this.selectedVolumeIndex=e},e.prototype.onChangeVolume=function(e,t){this.onActivate(e),this.modifyVolumeList(t),this.mongoService.updatePredefinedClickVolume(t,e,Qe.EQUITY)},e.prototype.onStartDragVolume=function(e,t,i){var r=this;this.$scope.$apply(function(){r.updateHint(Pm.Volume,Im.Drag)})},e.prototype.onStopDragVolume=function(e,t,i){var r=this;this.$scope.$apply(function(){r.updateHint(Pm.Volume,Im.Drop)})},e.prototype.updateHint=function(e,t,i){switch(e){case Pm.Volume:switch(t){case Im.Drag:this.setHintColBuy("Drop to Place Order"),this.setHintColSell("Drop to Place Order"),this.isDragging=!0;break;case Im.Drop:this.clearHintColBuy(),this.clearHintColSell(),this.isDragging=!1}break;case Pm.Buy:if(this.isDragging)return;switch(t){case Im.MouseOver:this.setHintColBuy("Double Click to Buy");break;case Im.MouseOut:this.clearHintColBuy()}break;case Pm.Sell:if(this.isDragging)return;switch(t){case Im.MouseOver:this.setHintColSell("Double Click to Sell");break;case Im.MouseOut:
this.clearHintColSell()}break;case Pm.SingleOrder:switch(t){case Im.Drag:i.isBuy()?this.setHintColBuy("Drop to Cancel/Change"):this.setHintColSell("Drop to Cancel/Change"),this.isDragging=!0;break;case Im.Drop:i.isBuy()?this.clearHintColBuy():this.clearHintColSell(),this.isDragging=!1;break;case Im.MouseOver:if(this.isDragging)return;i.isBuy()?this.setHintColBuy("Drag to Cancel/Change"):this.setHintColSell("Drag to Cancel/Change");break;case Im.MouseOut:if(this.isDragging)return;i.isBuy()?this.clearHintColBuy():this.clearHintColSell()}break;case Pm.MultiOrder:switch(t){case Im.Drag:i.isBuy()?this.setHintColBuy("Drop to Cancel"):this.setHintColSell("Drop to Cancel"),this.isDragging=!0;break;case Im.Drop:i.isBuy()?this.clearHintColBuy():this.clearHintColSell(),this.isDragging=!1;break;case Im.MouseOver:if(this.isDragging)return;i.isBuy()?this.setHintColBuy("Drag to Cancel"):this.setHintColSell("Drag to Cancel");break;case Im.MouseOut:if(this.isDragging)return;i.isBuy()?this.clearHintColBuy():this.clearHintColSell()}}},e.prototype.setHintColBuy=function(e){this.colHeaderBuy=e,this.isPlayAnimationColHeaderBuy=!0},e.prototype.clearHintColBuy=function(){this.colHeaderBuy="# Buy Order",this.isPlayAnimationColHeaderBuy=!1},e.prototype.setHintColSell=function(e){this.colHeaderSell=e,this.isPlayAnimationColHeaderSell=!0},e.prototype.clearHintColSell=function(){this.colHeaderSell="# Sell Order",this.isPlayAnimationColHeaderSell=!1},e.prototype.onOrderEntrySettingChange=function(e){e.isEmpty||(this.isNvdr=e.autoNVDRConfiguration.enable),this.currentOrderEntrySetting=e},e.$inject=["UserInfoService","UserApplicationProfileService","CurrentAccountChangeEvent","PinService","AlertService","PlaceOrderService","OrderStatusService","MongoService","RefreshEvent","ClickDroppedEvent","$scope","OrderEntrySettingChangeEvent","FacebookService","MenuService"],e}(),Lm=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d,h,p){this.userInfoService=e,this.userApplicationProfileService=t,this.currentAccountChangeEvent=i,this.pinService=r,this.alertService=n,this.placeOrderService=o,this.orderStatusService=s,this.mongoService=a,this.refreshEvent=c,this.$scope=l,this.orderEntrySettingChangeEvent=u,this.facebookService=d,this.menuService=h,this.orderProcessor=p,this.currentAccountChangeCallback=this.onCurrentAccountChange.bind(this),this.onOrderEntrySettingChangeCallBack=this.onOrderEntrySettingChange.bind(this),this.isLockPlaceOrder=!1,this.selectedVolumeIndex=0,this.clearHintColBuy(),this.clearHintColSell(),this.isDragging=!1}return e.prototype.$onInit=function(){this.currentAccountChangeEvent.subscribe(this.currentAccountChangeCallback),this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChangeCallBack)},e.prototype.$onChanges=function(e){e.orderPositionList&&e.orderPositionList.length>0&&(this.selectedOrderPosition=this.orderPositionList[0])},e.prototype.onPositionChanged=function(e){this.selectedOrderPosition=e},e.prototype.isShowPin=function(){return this.userInfoService.isInvestor()},e.prototype.onCurrentAccountChange=function(e){this.pin=this.getPin(null)},e.prototype.getPin=function(e){return this.pinService.isSavePin()?this.pinService.pin:e},e.prototype.$onDestroy=function(){this.currentAccountChangeEvent.unsubscribe(this.currentAccountChangeCallback),this.orderEntrySettingChangeEvent.unsubscribe(this.onOrderEntrySettingChangeCallBack)},e.prototype.onLong=function(e,t,i){this.validateForm(e)&&this.submitOrder(this.generateSubmitOrderParam(e,Be.BUY,i),t)},e.prototype.onShort=function(e,t,i){this.validateForm(e)&&this.submitOrder(this.generateSubmitOrderParam(e,Be.SELL,i),t)},e.prototype.onOverCancel=function(e,t,i){var r=t.helper[0],n=r.firstElementChild,o=r.lastElementChild;n.setAttribute("style","cursor: grabbing; cursor: -moz-grabbing; cursor: -webkit-grabbing;"),r.classList.contains("each-mock-order")&&o.setAttribute("style","cursor: grabbing; cursor: -moz-grabbing; cursor: -webkit-grabbing;")},e.prototype.generateSubmitOrderParam=function(e,t,i){var r=new qu;return r.accountNo=this.currentAccount.accountNo,r.side=t.shortname,r.seriesId=this.symbol.name.toUpperCase(),r.price=e,r.volume=this.volumeValue,r.pin=this.getPin(this.pin),r.priceType=i.derivativeValue,r.validityType=i.isEqual(Ge.ATO)?Ke.AUTO_M.value:Ke.DAY.value,r.position=this.selectedOrderPosition.shortname,r.publishVolume=null,r},e.prototype.generateChangeOrderParam=function(e,t){var i={orderNo:e.orderNo,newVolume:e.volume,oldVolume:e.volume,newPrice:yt.toNumber(t),oldPrice:e.price,newPosition:e.position,oldPosition:e.position,currentPriceType:e.priceType,accountNo:this.currentAccount.accountNo,pin:this.pin};return i},e.prototype.submitOrder=function(e,t){var i=this;if(!this.isLockPlaceOrder){if(this.isLockPlaceOrder=!0,this.lastSubmitOrderParameter=e,this.currentOrderEntrySetting.confirmPopUp.enable){var r=this.generateConfirmAlertInfo(e);this.alertService.showPlaceOrderDerivConfirmAlert(r,t,void 0,this.selectedOrderPosition).then(function(){i.placeOrder(e)},function(){i.isLockPlaceOrder=!1,i.lastSubmitOrderParameter=null})}else this.placeOrder(e);return void this.facebookService.placeOrderDerivativesTrack(this.menuService.getCurrentMenuName(),ya.CLICK)}this.alertService.showErrorAlert("Cannot Place Order this time")},e.prototype.cancelOrder=function(e){var t=this,i=Qi.isRequired(this.pin,this.pinService.isNotSavePin());this.updateOrderStatusMap({order:e,mode:ft.MARK_DRAGGED}),this.currentOrderEntrySetting.confirmPopUp.enable||i?this.alertService.showCancelOrderConfirmAlert(null,e,i).then(function(i){Qi.isEmpty(t.pin)&&(t.pin=t.getPin(i)),t.generateAndSendCancelOrderRequest(e)},function(){t.updateOrderStatusMap({order:e,mode:ft.UNMARK_DRAGGED})}):(Qi.isEmpty(this.pin)&&(this.pin=this.getPin(null)),this.generateAndSendCancelOrderRequest(e))},e.prototype.generateAndSendCancelOrderRequest=function(e){var t=this,i=cc.generateCancelDerivativesOrdersParams(e,this.pin);this.updateOrderStatusMap({order:e,mode:ft.CANCEL}),this.orderStatusService.cancelOrderDerivatives(i).then(function(e){},function(e){t.alertService.showErrorAlert(e.errorMessage)})["finally"](function(){t.clearForm()})},e.prototype.changeOrder=function(e,t){var i=this;if(this.orderStatusService.isLockChangeOrderDerivatives)return void this.alertService.showErrorAlert("Order cannot be changed at this moment. Please wait until previous order is completed.");var r=Qi.isRequired(this.pin,this.pinService.isNotSavePin()),n=angular.copy(e);n.price=yt.toNumber(t),this.updateOrderStatusMap({order:[e],mode:ft.CHANGE,price:n.price}),this.updateOrderStatusMap({order:[n],mode:ft.MARK_DRAGGED}),this.currentOrderEntrySetting.confirmPopUp.enable||r?this.alertService.showChangeOrderConfirmAlert(e.orderNo,yt.formatVolume(e.volume),t,e.priceType,r).then(function(r){Qi.isEmpty(i.pin)&&(i.pin=i.getPin(r)),i.generateAndSendChangeOrderRequest(e,t)},function(){i.updateOrderStatusMap({order:[n],mode:ft.CHANGE,price:e.price}),i.updateOrderStatusMap({order:[e],mode:ft.UNMARK_DRAGGED})}):(Qi.isEmpty(this.pin)&&(this.pin=this.getPin(null)),this.generateAndSendChangeOrderRequest(e,t))},e.prototype.generateAndSendChangeOrderRequest=function(e,t){var i=this.generateChangeOrderParam(e,t);this.lockChangeOrder(i),this.sendChangeOrder(i)},e.prototype.sendChangeOrder=function(e){var t=this;this.orderStatusService.changeDerivativesOrderStatus(e).then(function(e){t.unlockChangeOrder()},function(e){return e.isWarning?void t.onWarningChangeOrder(e.message):(t.alertService.showErrorAlert(e.message),void t.unlockChangeOrder())})["finally"](function(){t.clearForm()})},e.prototype.onWarningChangeOrder=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e).then(function(){var e=t.lastSubmitChangeOrderParameter;e.isConfirmWarning=!0,t.sendChangeOrder(e)},function(){t.unlockChangeOrder()})},e.prototype.validateForm=function(e){var t=[];return this.currentAccount&&this.currentAccount.isEmptyAccount&&t.push("Please insert trading account."),""===this.symbol.name&&t.push("Please insert symbol."),isNaN(e)&&t.push("Invalid Price."),this.volumeList[this.selectedVolumeIndex].isEmpty()&&t.push("Please insert volume."),this.shouldShowPinInput()!==!0||this.pinService.isSavePin()||null!==this.pin&&""!==this.pin||t.push("Please insert PIN."),0===t.length||(this.alertService.showValidationErrorAlert(t),!1)},e.prototype.placeOrder=function(e){var t=this;this.placeOrderService.requestPlaceOrderDeriv(e).then(function(){t.isLockPlaceOrder=!1,t.lastSubmitOrderParameter=null},function(e){if(e){if(e.isWarning)return t.onWarning(e);e.isSuccess||t.alertService.showErrorAlert(e.errorMessage)}t.isLockPlaceOrder=!1,t.lastSubmitOrderParameter=null})["finally"](function(){t.refreshPageData(),t.clearForm()})},e.prototype.onWarning=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e.warnMessage).then(function(){var e=new qu;angular.copy(t.lastSubmitOrderParameter,e),e.confirmedWarn=!0,t.placeOrder(e)},function(){t.isLockPlaceOrder=!1,t.lastSubmitOrderParameter=null})},e.prototype.refreshPageData=function(){this.refreshEvent.dispatchEvent()},e.prototype.clearForm=function(){this.pin=this.getPin(null)},e.prototype.generateConfirmAlertInfo=function(e){var t=new qu;return angular.copy(e,t),t},e.prototype.lockChangeOrder=function(e){this.orderStatusService.isLockChangeOrderDerivatives=!0,this.lastSubmitChangeOrderParameter=e},e.prototype.unlockChangeOrder=function(){this.orderStatusService.isLockChangeOrderDerivatives=!1,this.lastSubmitChangeOrderParameter=void 0},e.prototype.isUserMarketRep=function(){return this.userInfoService.isMarketRep()},e.prototype.shouldShowPinInput=function(){return this.userInfoService.isInvestor()},Object.defineProperty(e.prototype,"volumeValue",{get:function(){var e=yt.toNumber(this.volumeList[this.selectedVolumeIndex].value);return null===e?NaN:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeList",{get:function(){return this.userApplicationProfileService.predefinedClickVolumeDerivatives},enumerable:!0,configurable:!0}),e.prototype.modifyVolumeList=function(e){this.userApplicationProfileService.predefinedClickVolumeDerivatives[this.selectedVolumeIndex].value=e},e.prototype.onDropCancel=function(e,t,i){if(!(i instanceof Yi)){var r=[];if(i instanceof pt){i.isMarkDragged=!0;var n=i;n.value.forEach(function(e){r.push(e)})}i instanceof Ja&&(r=[i]),this.cancelOrder(r)}},e.prototype.onActivate=function(e){this.selectedVolumeIndex=e},e.prototype.onChangeVolume=function(e,t){this.onActivate(e),this.modifyVolumeList(t),this.mongoService.updatePredefinedClickVolume(t,e,Qe.DERIVATIVE)},e.prototype.onStartDragVolume=function(e,t,i){var r=this;this.$scope.$apply(function(){r.updateHint(Pm.Volume,Im.Drag)})},e.prototype.onStopDragVolume=function(e,t,i){var r=this;this.$scope.$apply(function(){r.updateHint(Pm.Volume,Im.Drop)})},e.prototype.updateHint=function(e,t,i){switch(e){case Pm.Volume:switch(t){case Im.Drag:this.setHintColBuy("Drop to Place Order"),this.setHintColSell("Drop to Place Order"),this.isDragging=!0;break;case Im.Drop:this.clearHintColBuy(),this.clearHintColSell(),this.isDragging=!1}break;case Pm.Buy:if(this.isDragging)return;switch(t){case Im.MouseOver:this.setHintColBuy("Double Click to Long");break;case Im.MouseOut:this.clearHintColBuy()}break;case Pm.Sell:if(this.isDragging)return;switch(t){case Im.MouseOver:this.setHintColSell("Double Click to Short");break;case Im.MouseOut:this.clearHintColSell()}break;case Pm.SingleOrder:switch(t){case Im.Drag:i.isBuy()?this.setHintColBuy("Drop to Cancel/Change"):this.setHintColSell("Drop to Cancel/Change"),this.isDragging=!0;break;case Im.Drop:i.isBuy()?this.clearHintColBuy():this.clearHintColSell(),this.isDragging=!1;break;case Im.MouseOver:if(this.isDragging)return;i.isBuy()?this.setHintColBuy("Drag to Cancel/Change"):this.setHintColSell("Drag to Cancel/Change");break;case Im.MouseOut:if(this.isDragging)return;i.isBuy()?this.clearHintColBuy():this.clearHintColSell()}break;case Pm.MultiOrder:switch(t){case Im.Drag:i.isBuy()?this.setHintColBuy("Drop to Cancel"):this.setHintColSell("Drop to Cancel"),this.isDragging=!0;break;case Im.Drop:i.isBuy()?this.clearHintColBuy():this.clearHintColSell(),this.isDragging=!1;break;case Im.MouseOver:if(this.isDragging)return;i.isBuy()?this.setHintColBuy("Drag to Cancel"):this.setHintColSell("Drag to Cancel");break;case Im.MouseOut:if(this.isDragging)return;i.isBuy()?this.clearHintColBuy():this.clearHintColSell()}}},e.prototype.setHintColBuy=function(e){this.colHeaderBuy=e,this.isPlayAnimationColHeaderBuy=!0},e.prototype.clearHintColBuy=function(){this.colHeaderBuy="# Long Order",this.isPlayAnimationColHeaderBuy=!1},e.prototype.setHintColSell=function(e){this.colHeaderSell=e,this.isPlayAnimationColHeaderSell=!0},e.prototype.clearHintColSell=function(){this.colHeaderSell="# Short Order",this.isPlayAnimationColHeaderSell=!1},e.prototype.onOrderEntrySettingChange=function(e){this.currentOrderEntrySetting=e,this.selectedOrderPosition=e.defaultOrderPosition},e.$inject=["UserInfoService","UserApplicationProfileService","CurrentAccountChangeEvent","PinService","AlertService","PlaceOrderService","OrderStatusService","MongoService","RefreshEvent","$scope","OrderEntrySettingChangeEvent","FacebookService","MenuService","OrderProcessor"],e}(),Nm=function(){function e(){}return e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e}(),Mm=function(){function e(e,t,i,r,n,o,s,a,c,l,u){this.colorService=e,this.$element=t,this.$filter=i,this.clickDroppedEvent=r,this.clickTableViewUpdateEvent=n,this.alertService=o,this.$timeout=s,this.$scope=a,this.uiComponentsEventEmitter=c,this.$window=l,this.$q=u,this.onRcvDataCallBack=this.onRcvData.bind(this),this.filterVolume=this.$filter("volume"),this.filterPrice=this.$filter("price"),this.isPopoverBuyOpen=!1,this.isPopoverSellOpen=!1}return e.prototype.$onInit=function(){this.priceCellElem=this.$element.find("div.price"),this.buyOrderCellElem=this.$element.find(".buy-order"),this.sellOrderCellElem=this.$element.find(".sell-order"),this.clickTableViewUpdateEvent.subscribe(this.index,this.market,this.onRcvDataCallBack);var e=this.$element.find("[name=buy-order-item-container]");this.buyPopoverHandler=new Ue(e,this.$window,this.$scope,this.uiComponentsEventEmitter,this.popOverBuyShouldShow.bind(this),this.popOverBuyShouldHide.bind(this));var t=this.$element.find("[name=sell-order-item-container]");this.sellPopoverHandler=new Ue(t,this.$window,this.$scope,this.uiComponentsEventEmitter,this.popOverSellShouldShow.bind(this),this.popOverSellShouldHide.bind(this))},e.prototype.$onDestroy=function(){this.clickTableViewUpdateEvent.unsubscribe(this.index,this.market,this.onRcvDataCallBack)},e.prototype.onRcvData=function(e){this.data=angular.copy(e),this.updateClassInMockOrder()},e.prototype.updateClassInMockOrder=function(){var e=this.$element.find("[name=mocks-orders-buy]");if(e.length>0){var t=this.isBuyOrdersItemMarkDragged();t?e.addClass("on-dragged"):e.removeClass("on-dragged")}var i=this.$element.find("[name=mocks-orders-sell]");if(i.length>0){var t=this.isSellOrdersItemMarkDragged();t?i.addClass("on-dragged"):i.removeClass("on-dragged")}},e.prototype.onDoubleClickBuy=function(e){this.submitOrder(e,Be.BUY)},e.prototype.onDoubleClickSell=function(e){this.submitOrder(e,Be.SELL)},e.prototype.submitOrder=function(e,t){return this.data?void(t.isBuy()?this.onBuy({price:e,digit:this.data.priceDigit,type:this.data.priceType}):t.isSell()&&this.onSell({price:e,digit:this.data.priceDigit,type:this.data.priceType})):void this.alertService.showErrorAlert("Invalid Price.")},e.prototype.isBuyVolExist=function(){return!(!this.data||isNaN(this.data.buyVolume))},e.prototype.isSellVolExist=function(){return!(!this.data||isNaN(this.data.sellVolume))},e.prototype.onBuyMouseOver=function(){this.updateHint({sourceType:Pm.Buy,actionType:Im.MouseOver}),this.isDragItemisDragging||this.addClassOverInBuyContainer()},e.prototype.onBuyMouseOut=function(){this.updateHint({sourceType:Pm.Buy,actionType:Im.MouseOut}),this.removeClassOverInBuyContainer()},e.prototype.onSellMouseOver=function(){this.updateHint({sourceType:Pm.Sell,actionType:Im.MouseOver}),this.isDragItemisDragging||this.addClassOverInSellContainer()},e.prototype.onSellMouseOut=function(){this.updateHint({sourceType:Pm.Sell,actionType:Im.MouseOut}),this.isDragItemisDragging||this.removeClassOverInSellContainer()},e.prototype.onBuyOrdersItemMouseOver=function(e,t){if(1===t.value.length)this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOver,side:Be.BUY});else{var i=e.originalEvent.target;i instanceof HTMLDivElement&&i.classList.contains("popover-content")||this.updateHint({sourceType:Pm.MultiOrder,actionType:Im.MouseOver,side:Be.BUY})}e.stopPropagation()},e.prototype.onBuyOrdersItemMouseOut=function(e,t){1===t.value.length?this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOut,side:Be.BUY}):this.updateHint({sourceType:Pm.MultiOrder,actionType:Im.MouseOut,side:Be.BUY}),e.stopPropagation()},e.prototype.onSellOrdersItemMouseOver=function(e,t){if(1===t.value.length)this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOver,side:Be.SELL});else{var i=e.originalEvent.target;i instanceof HTMLDivElement&&i.classList.contains("popover-content")||this.updateHint({sourceType:Pm.MultiOrder,actionType:Im.MouseOver,side:Be.SELL})}e.stopPropagation()},e.prototype.onSellOrdersItemMouseOut=function(e,t){1===t.value.length?this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOut,side:Be.SELL}):this.updateHint({sourceType:Pm.MultiOrder,actionType:Im.MouseOut,side:Be.SELL}),e.stopPropagation()},e.prototype.addClassOverInBuyContainer=function(){this.buyOrderCellElem.addClass("over"),this.priceCellElem.addClass("over")},e.prototype.removeClassOverInBuyContainer=function(){this.buyOrderCellElem.removeClass("over"),this.priceCellElem.removeClass("over")},e.prototype.addClassOverInSellContainer=function(){this.sellOrderCellElem.addClass("over"),this.priceCellElem.addClass("over")},e.prototype.removeClassOverInSellContainer=function(){this.sellOrderCellElem.removeClass("over"),this.priceCellElem.removeClass("over")},e.prototype.getBuyTotalVolume=function(){return this.data?this.filterVolume(this.data.totalBuyBalanceVolume):""},e.prototype.getNoOfBuyOrders=function(){return this.data?this.filterVolume(this.data.noOfBuyOrder):""},e.prototype.getSellTotalVolume=function(){return this.data?this.filterVolume(this.data.totalSellBalanceVolume):""},e.prototype.getNoOfSellOrders=function(){return this.data?this.filterVolume(this.data.noOfSellOrder):""},e.prototype.isShowBuyOrders=function(){if(!this.data)return this.isShowingBuyOrders=!1,!1;if(this.data.noOfBuyOrder>0&&!this.isShowingBuyOrders){var e=this.$element.find("[name=mocks-orders-buy]");e.length>0&&e.show()}return this.isShowingBuyOrders=this.data.noOfBuyOrder>0,this.isShowingBuyOrders},e.prototype.isShowSellOrders=function(){if(!this.data)return this.isShowingSellOrders=!1,!1;if(this.data.noOfSellOrder>0&&!this.isShowingSellOrders){var e=this.$element.find("[name=mocks-orders-sell]");e.length>0&&e.show()}return this.isShowingSellOrders=this.data.noOfSellOrder>0,this.isShowingSellOrders},e.prototype.isBuyOrdersItemMarkDragged=function(){return!!this.data&&(!!this.data.buyOrderItem&&this.data.buyOrderItem.isMarkDragged)},e.prototype.isSellOrdersItemMarkDragged=function(){return!!this.data&&(!!this.data.sellOrderItem&&this.data.sellOrderItem.isMarkDragged)},e.prototype.isBuyOrdersItemCanChange=function(){return!!this.data&&(!!this.data.buyOrders&&1===this.data.buyOrders.length)},e.prototype.isSellOrdersItemCanChange=function(){return!!this.data&&(!!this.data.sellOrders&&1===this.data.sellOrders.length)},e.prototype.onOrderIsDroppedOnContainerBuy=function(e,t,i){this.removeClassOverInBuyContainer(),this.onOrderIsDroppedOnContainer(t,i,Be.BUY)},e.prototype.onOrderIsDroppedOnContainerSell=function(e,t,i){this.removeClassOverInSellContainer(),this.onOrderIsDroppedOnContainer(t,i,Be.SELL)},e.prototype.onOrderIsDroppedOnContainer=function(e,t,i){var r;if(!this.data||isNaN(this.data.price))return void this.alertService.showErrorAlert("Invalid Price.");if(t instanceof Yi)return void this.submitOrder(this.data.price,i);var n;if(t instanceof pt){var o=t;if(0===o.value.length)return;n=o.value}else n=[t];if(n[0]instanceof Qa){var s=n[0],a=Ge.lookup[s.priceType];if(!s.side.isEqual(i))return void this.alertService.showErrorAlert("Cannot change this order to side "+i.fullname.toUpperCase());if(1!==n.length)return this.removeCursorStyle(e),void this.alertService.showErrorAlert("Cannot change multiple orders");if(!a.isLimit())return void this.alertService.showErrorAlert("Cannot change price from ATO/ATC price");if(!this.data.priceType.isLimit())return void this.alertService.showErrorAlert("Cannot change price to ATO/ATC price");if(!s.canChangePriceVol)return void this.alertService.showErrorAlert("This order cannot be changed");r=s}if(n[0]instanceof Ja){var s=n[0];if(!s.side.isEqual(i))return void this.alertService.showErrorAlert("Cannot change this order to side "+i.derivativeFullname.toUpperCase());if(1!==n.length)return this.removeCursorStyle(e),void this.alertService.showErrorAlert("Cannot change multiple orders");if(!s.priceType.isLimit())return void this.alertService.showErrorAlert("Cannot change price from ATO price");if(!this.data.priceType.isLimit())return void this.alertService.showErrorAlert("Cannot change price to ATO price");if(!s.canChanged)return void this.alertService.showErrorAlert("This order cannot be changed");r=s}this.onChangeOrder({oldOrder:r,newPrice:this.filterPrice(this.data.price,this.data.priceDigit)})},e.prototype.onBuyOrdersItemStartDragged=function(e,t,i){var r=this,n=e.originalEvent.target;return n instanceof HTMLDivElement&&n.classList.contains("popover-content")?void this.preventDragFromPopoverBugsIE(e,t,i):(this.isDragItemisDragging=!0,this.removeClassOverInBuyContainer(),this.freezeCurrentRowData(),this.popOverBuyShouldHide(),void(i&&(1===i.value.length?this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drag,side:Be.BUY})}):this.$scope.$apply(function(){r.updateHint({sourceType:Pm.MultiOrder,actionType:Im.Drag,side:Be.BUY})}))))},e.prototype.preventDragFromPopoverBugsIE=function(e,t,i){var r=e.currentTarget;e.preventDefault(),r.setAttribute("style","position: relative;")},e.prototype.onBuyOrdersItemStopDragged=function(e,t,i){var r=this;this.isDragItemisDragging=!1,this.hideDraggedBuyItemWhenDraggedOut(),this.refreshRowData(),i&&(this.removeCursorStyle(t),1===i.value.length?this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drop,side:Be.BUY})}):this.$scope.$apply(function(){r.updateHint({sourceType:Pm.MultiOrder,actionType:Im.Drop,side:Be.BUY})}))},e.prototype.hideDraggedBuyItemWhenDraggedOut=function(){var e=this.$element.find("[name=mocks-orders-buy]");e.hide(),this.data.noOfBuyOrder=0,this.isShowingBuyOrders=!1},e.prototype.onSellOrdersItemStartDragged=function(e,t,i){var r=this,n=e.originalEvent.target;return n instanceof HTMLDivElement&&n.classList.contains("popover-content")?void this.preventDragFromPopoverBugsIE(e,t,i):(this.isDragItemisDragging=!0,this.removeClassOverInSellContainer(),this.freezeCurrentRowData(),this.popOverSellShouldHide(),void(i&&(1===i.value.length?this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drag,side:Be.SELL})}):this.$scope.$apply(function(){r.updateHint({sourceType:Pm.MultiOrder,actionType:Im.Drag,side:Be.SELL})}))))},e.prototype.onSellOrdersItemStopDragged=function(e,t,i){var r=this;this.isDragItemisDragging=!1,this.hideDraggedSellItemWhenDraggedOut(),this.refreshRowData(),i&&(this.removeCursorStyle(t),1===i.value.length?this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drop,side:Be.SELL})}):this.$scope.$apply(function(){r.updateHint({sourceType:Pm.MultiOrder,actionType:Im.Drop,side:Be.SELL})}))},e.prototype.hideDraggedSellItemWhenDraggedOut=function(){var e=this.$element.find("[name=mocks-orders-sell]");e.hide(),this.data.noOfSellOrder=0,this.isShowingSellOrders=!1},e.prototype.onBuyOrderInPopoverStartDragged=function(e,t,i){var r=this;this.removeClassOverInBuyContainer(),this.freezeCurrentRowData(),this.hideSurroundElements(e),this.decreaseNumberOfBuyOrderFromRowData(i),this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drag,side:Be.BUY})})},e.prototype.onBuyOrderInPopoverStopDragged=function(e,t,i){var r=this;this.popOverBuyShouldHide(),this.refreshRowData(),this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drop,side:Be.BUY})})},e.prototype.onSellOrderInPopoverStartDragged=function(e,t,i){var r=this;this.removeClassOverInSellContainer(),this.freezeCurrentRowData(),this.hideSurroundElements(e),this.decreaseNumberOfSellOrderFromRowData(i),this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drag,side:Be.SELL})})},e.prototype.onSellOrderInPopoverStopDragged=function(e,t,i){var r=this;this.popOverSellShouldHide(),this.refreshRowData(),this.$scope.$apply(function(){r.updateHint({sourceType:Pm.SingleOrder,actionType:Im.Drop,side:Be.SELL})})},e.prototype.onBuyOrderInPopoverMouseOver=function(e){this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOver,side:Be.BUY}),e.stopPropagation()},e.prototype.onBuyOrderInPopoverMouseOut=function(e){this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOut,side:Be.BUY}),e.stopPropagation()},e.prototype.onSellOrderInPopoverMouseOver=function(e){this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOver,side:Be.SELL}),e.stopPropagation()},e.prototype.onSellOrderInPopoverMouseOut=function(e){this.updateHint({sourceType:Pm.SingleOrder,actionType:Im.MouseOut,side:Be.SELL}),e.stopPropagation()},e.prototype.hideSurroundElements=function(e){var t=e.target,i=t.parentElement,r=i.parentElement.parentElement,n=i.parentElement,o=n.previousElementSibling,s=i.children;r.setAttribute("style","background: transparent; border-width:0px; box-shadow: 0px 5px 10px 0px rgba(0,0,0,0)"),i.setAttribute("style","overflow-y: hidden"),o.setAttribute("style","opacity: 0");for(var a=0;a<s.length;a++){var c=s.item(a);c.className.indexOf("ui-draggable-dragging")===-1&&c.setAttribute("style","opacity:0")}},e.prototype.decreaseNumberOfBuyOrderFromRowData=function(e){var t=this;this.data.buyOrders.forEach(function(i,r){i.key===e.key&&(t.data.noOfBuyOrder--,t.data.totalBuyBalanceVolume-=i.balanceVolume)})},e.prototype.decreaseNumberOfSellOrderFromRowData=function(e){var t=this;this.data.sellOrders.forEach(function(i,r){i.key===e.key&&(t.data.noOfSellOrder--,t.data.totalSellBalanceVolume-=i.balanceVolume)})},e.prototype.togglePopoverBuy=function(){this.data.buyOrderItem.value.length>1&&(this.isPopoverBuyOpen?this.buyPopoverHandler.wantToHideComponent():this.buyPopoverHandler.wantToShowComponent())},e.prototype.popOverBuyShouldShow=function(){var e=this;this.isPopoverBuyOpen=!0,this.$timeout(function(){e.$element.find(".arrow").addClass("undraggable")},100)},e.prototype.popOverBuyShouldHide=function(){this.isPopoverBuyOpen=!1},e.prototype.togglePopoverSell=function(){this.data.sellOrderItem.value.length>1&&(this.isPopoverSellOpen?this.sellPopoverHandler.wantToHideComponent():this.sellPopoverHandler.wantToShowComponent())},e.prototype.popOverSellShouldShow=function(){var e=this;this.isPopoverSellOpen=!0,this.$timeout(function(){e.$element.find(".arrow").addClass("undraggable")},100)},e.prototype.popOverSellShouldHide=function(){this.isPopoverSellOpen=!1},e.prototype.refreshRowData=function(){this.clickTableViewUpdateEvent.unsubscribe(this.index,this.market,this.onRcvDataCallBack),this.clickTableViewUpdateEvent.subscribe(this.index,this.market,this.onRcvDataCallBack)},e.prototype.freezeCurrentRowData=function(){this.clickTableViewUpdateEvent.unsubscribe(this.index,this.market,this.onRcvDataCallBack)},e.prototype.onContainerBuyIsOver=function(e,t,i){this.onChangeCursor(e,t,i,"buyOrder"),this.addClassOverInBuyContainer()},e.prototype.onBuyVolumeIsOver=function(e,t,i){this.onChangeCursor(e,t,i,"buyVolume")},e.prototype.onSellVolumeIsOver=function(e,t,i){this.onChangeCursor(e,t,i,"sellVolume")},e.prototype.onPriceIsOver=function(e,t,i){this.onChangeCursor(e,t,i,"price")},e.prototype.onChangeCursor=function(e,t,i,r){if(!(i instanceof pt||i instanceof Qa||i instanceof Ja))return!1;var n="buyVolume"===r&&(0===this.index||1===this.index),o="buyVolume"===r&&(12===this.index||13===this.index),s="sellVolume"===r&&(12===this.index||13===this.index);if(!(!this.isPreSession&&n||this.isPreSession&&o||s)){var a,c,l="";if(a=i instanceof pt?i.value[0]:i,l=a.side.fullname===Be.BUY.fullname?"buyOrder":a.side.fullname===Be.SELL.fullname?"sellOrder":"others",a instanceof Qa?c=Ge.lookup[a.priceType]:a instanceof Ja&&(c=a.priceType),l!==r||c.value!==this.data.priceType.value)this.setInvalidCursor(t);else if(i instanceof pt&&1===i.value.length){var u=i.value[0];u instanceof Qa&&u.canChangePriceVol||u instanceof Ja&&u.canChanged?this.setContinueCursor(t):this.setInvalidCursor(t)}else i instanceof Qa&&i.canChangePriceVol?this.setContinueCursor(t):i instanceof Ja&&i.canChanged?this.setContinueCursor(t):this.setInvalidCursor(t)}},e.prototype.rejectDrop=function(){return this.$q.reject()},e.prototype.onContainerBuyIsOut=function(e,t,i){this.removeClassOverInBuyContainer()},e.prototype.onContainerSellIsOver=function(e,t,i){this.onChangeCursor(e,t,i,"sellOrder"),this.addClassOverInSellContainer()},e.prototype.onContainerSellIsOut=function(e,t,i){this.removeClassOverInSellContainer()},e.prototype.getPopoverPositionFromRowIndex=function(t){var i,r=e.TOTAL_NUM_OF_ROWS/2;return i=t<r?Nm.BOTTOM_RIGHT:Nm.TOP_RIGHT},e.prototype.setContinueCursor=function(e){var t=e.helper[0],i=t.firstElementChild,r=t.lastElementChild;i.setAttribute("style","cursor: grabbing; cursor: -moz-grabbing; cursor: -webkit-grabbing;"),t.classList.contains("each-mock-order")&&r.setAttribute("style","cursor: grabbing; cursor: -moz-grabbing; cursor: -webkit-grabbing;")},e.prototype.setInvalidCursor=function(e){var t=e.helper[0],i=t.firstElementChild,r=t.lastElementChild;i.setAttribute("style","cursor: no-drop"),t.classList.contains("each-mock-order")&&r.setAttribute("style","cursor: no-drop")},e.prototype.removeCursorStyle=function(e){var t=e.helper[0],i=t.firstElementChild,r=t.lastElementChild;i.setAttribute("style",""),t.classList.contains("each-mock-order")&&r.setAttribute("style","")},e.$inject=["ColorService","$element","$filter","ClickDroppedEvent","ClickTableViewUpdateEvent","AlertService","$timeout","$scope","UIComponentsEventEmitter","$window","$q"],e.TOTAL_NUM_OF_ROWS=14,e}(),Rm=function(){function e(e){this.mode=e}return e.prototype.isFavourite=function(){return"Favourite"===this.mode},e.prototype.isMyPort=function(){return"MyPort"===this.mode},e.Favourite=new e("Favourite"),e.MyPort=new e("MyPort"),e}(),_m=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,t)||this;return u.pageService=t,u.favouriteService=i,u.$q=r,u.instrumentService=n,u.userApplicationProfileService=o,u.portfolioService=s,u.accountService=a,u.virtualScrollEvent=c,u.$scope=l,u}return ne(t,e),t.prototype.startService=function(){this.favouriteDropdownItemList=this.favouriteService.getFavouriteDropdownItemAndMyPort(),this.currentMode&&this.currentFavouriteDropdown||(this.currentMode=Rm.Favourite,this.currentFavouriteDropdown=this.favouriteDropdownItemList.length>0?this.favouriteDropdownItemList[0]:null),this.updateViewByCurrentMode()},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.prototype.onFavouriteChange=function(e){this.symbolList=[],e.mode===yr.FAVOURITE?this.currentMode=Rm.Favourite:e.mode===yr.MY_PORT&&(this.currentMode=Rm.MyPort),this.currentFavouriteDropdown=e,this.updateViewByCurrentMode()},t.prototype.updateViewByCurrentMode=function(){var e=this;this.getInstrumentsByCurrentMode().then(function(t){e.symbolList=angular.copy(t),
e.virtualScrollEvent.reCalculateScroll(e.$scope)},function(){e.symbolList=[]})},t.prototype.getInstrumentsByCurrentMode=function(){var e=this;if(this.currentMode.isFavourite()){var t=this.favouriteService.getFavouriteByListName(this.currentFavouriteDropdown.key),i=t.symbolList;return this.$q.resolve(i)}return this.currentMode.isMyPort()?this.portfolioService.getAllUniquePortfolioSymbolList(this.accountService.accountEquityList,this.accountService.accountDerivList).then(function(t){return e.$q.resolve(t)},function(){return e.$q.reject()}):this.$q.reject()},t.prototype.onClickSymbol=function(e){var t=this;this.instrumentService.searchSymbol(e,Qe.ALL).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)}),this.selectedRowKey=e},t.prototype.getClassHeight=function(){return this.isFullHeightMode?"row-50":"row-32"},t.$inject=["PageService","FavouriteService","$q","InstrumentService","UserApplicationProfileService","PortfolioService","AccountService","VirtualScrollEvent","$scope"],t}(ys),Vm=function(){function e(e,t,i,r,n,o,s,a){this.itpdService=e,this.userInfoService=t,this.derivativesOrderPushPublishSubscriber=i,this.announcementPublishSubscriber=r,this.$q=n,this.adminMessagePublishSubscriber=o,this.timeService=s,this.marketrepHierarchyService=a,this.onReceiveDerivativesOrderPushCallBack=this.onReceiveDerivativesOrderPush.bind(this),this.onReceiveAnnouncementCallBack=this.onReceiveAnnouncement.bind(this),this.onReceiveAdminMessageInfoCallBack=this.onReceiveAdminMessageInfo.bind(this),this.isInitialized=!1}return e.prototype.init=function(){var e=this;this.isInitialized||(this.currentList=[],this.userInfoService.hasMarketRepDerivatives&&this.marketrepHierarchyService.getAllAccountsUnderHierarchy().then(function(t){e.derivativesOrderPushPublishSubscriber.subscribeAccountListUnderMarketRepHierarchy(t,e.onReceiveDerivativesOrderPushCallBack)}),this.announcementPublishSubscriber.subscribe(this.onReceiveAnnouncementCallBack),this.adminMessagePublishSubscriber.subscribe(this.onReceiveAdminMessageInfoCallBack)),this.isInitialized=!0},e.prototype.onReceiveDerivativesOrderPush=function(e){this.currentList.unshift(Em.parseDerivativesOrderPush(e,this.getCurrentTimeString()))},e.prototype.onReceiveAnnouncement=function(e){var t=Em.parseAnnouncementBiglotAndMarketStatus(e,this.getCurrentTimeString(),this.userInfoService.isEquityOnly,this.userInfoService.isDerivativesOnly);this.currentList=t.concat(this.currentList)},e.prototype.onReceiveAdminMessageInfo=function(e){var t=Em.parseAdminMessageInfo(e,this.getCurrentTimeString());this.currentList.unshift(t)},e.prototype.getCurrentTimeString=function(){var e=this.timeService.getTime();if(e.isTimeSync){var t=e.syncDate;return t.format("HH:mm:ss")}return this.timeService.EMPTY_LAST_UPDATE},e.$inject=["ITPDService","UserInfoService","DerivativesOrderPushPublishSubscriber","AnnouncementPublishSubscriber","$q","AdminMessagePublishSubscriber","TimeService","MarketrepHierarchyService"],e}(),Bm=function(){function e(e,t){this.pageService=e,this.orderAnnouncementService=t}return e.$inject=["PageService","OrderAnnouncementService"],e}(),xm=function(){function e(){}return e}();angular.module("click",["event-emitter","service","binary","color-formatter","number-formatter","hilight-font-blink"]).service("ClickDroppedEvent",Am).service("ClickTableViewUpdateEvent",wm).service("OrderAnnouncementService",Vm).component("clickPage",{template:i(/*! ../../html/click/click-page.html */207),controller:km,bindings:{page:"@"}}).component("click",{template:i(/*! ../../html/click/click.html */208),controller:Dm,bindings:{page:"@"}}).component("clickMiniQuoteOverview",{template:i(/*! ../../html/click/click-mini-quote-overview.html */209),controller:Om,bindings:{symbol:"<",onValidatedSymbol:"&",overview:"<",currentAccount:"<",accountConnectionStatus:"<"}}).component("clickTableEquity",{template:i(/*! ../../html/click/click-table-equity.html */210),controller:$m,bindings:{symbol:"<",data:"<",currentAccount:"<",orderPositionList:"<",updateOrderStatusMap:"&",isPreSession:"<"}}).component("clickTableDerivatives",{template:i(/*! ../../html/click/click-table-derivatives.html */211),controller:Lm,bindings:{symbol:"<",data:"<",currentAccount:"<",orderPositionList:"<",instrumentStaticData:"<",updateOrderStatusMap:"&",isPreSession:"<"}}).component("clickTableRow",{template:i(/*! ../../html/click/click-table-row.html */212),controller:Mm,bindings:{data:"<",onBuy:"&",onSell:"&",index:"<",market:"@",onChangeOrder:"&",updateHint:"&",isPreSession:"<"}}).component("clickFavourite",{template:i(/*! ../../html/click/click-favourite.html */213),controller:_m,bindings:{page:"@",isFullHeightMode:"<"}}).component("clickFavouriteRow",{template:i(/*! ../../html/click/click-favourite-row.html */214),controller:Cm,bindings:{page:"@",symbol:"<"}}).component("orderAnnouncement",{template:i(/*! ../../html/click/order-announcement.html */215),controller:Bm,bindings:{page:"@"}}).component("orderAnnouncementRow",{template:i(/*! ../../html/click/order-announcement-row.html */216),controller:xm,bindings:{page:"@",data:"<"}});var Fm=function(){function e(){}return e.prototype.$onInit=function(){this.scrollInbox()},e.prototype.$onChanges=function(e){var t=this;if(e.data&&e.data.currentValue){var i=this.data.detail;this.recommendList=JSON.parse(i.detail),this.recommendList=this.recommendList.map(function(e){return e.sideClass=t.getSideClass(e),e})}},e.prototype.getSideClass=function(e){return"BUY"===e.suggest?"buy":"SELL"===e.suggest?"sell":"none"},e}(),Um=function(){function e(){}return e.prototype.$onInit=function(){this.scrollInbox()},e}(),qm=function(){function e(e,t,i,r){this.$window=e,this.menuService=t,this.instrumentService=i,this.currentSymbolChangeEvent=r}return e.prototype.$onInit=function(){this.scrollInbox()},e.prototype.$onChanges=function(e){e.data&&e.data.currentValue&&(this.time=this.getTime(),this.title=this.getTitle(),this.iconClass=this.title.toLowerCase())},e.prototype.getTime=function(){return this.data.time.format("hh:mm A")},e.prototype.getTitle=function(){return this.data.type.isSense()?"Sense":"Notifications"},e.$inject=["$window","MenuService","InstrumentService","CurrentSymbolChangeEvent"],e}(),jm=function(){function e(e,t){this.instrumentService=e,this.userApplicationProfileService=t}return e.prototype.$onChanges=function(e){e.data&&e.data.currentValue&&(this.detail=this.data.detail,this.buy=Be.BUY.fullnameFromType(this.detail.instrumentType),this.sell=Be.SELL.fullnameFromType(this.detail.instrumentType))},e.prototype.emitSideBuyEvent=function(){this.emitSideChangeEvent(Be.BUY)},e.prototype.emitSideSellEvent=function(){this.emitSideChangeEvent(Be.SELL)},e.prototype.emitSideChangeEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.detail.symbol,Qe.ALL).then(function(i){var r=t.data.type.isPriceAlert()?t.detail.value:"";t.userApplicationProfileService.setCurrentSymbol(i,r,e)}),this.toggleInbox()},e.$inject=["InstrumentService","UserApplicationProfileService"],e}(),Hm=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h){var p=e.call(this,t,i,r,n,u)||this;return p.$element=t,p.$window=i,p.$scope=r,p.uiComponentEventEmitter=n,p.$timeout=o,p.notificationService=s,p.userInfoService=a,p.forceOpenNotificationInboxEvent=c,p.controlNotificationBoxEvent=l,p.$rootScope=u,p.senseAnalyticsService=d,p.screenTrackerService=h,p.onForceOpenInboxCallBack=p.onForceOpenInbox.bind(p),p.onScrollInboxCallBack=p.onScrollInbox.bind(p),p.onScrollInboxStopCallBack=p.onStopScroll.bind(p),p.scrollTimeout=null,p.loggedMessages=[],p.stopScrollDelay=1e3,p.isShow=!1,p.shouldScroll=!1,p.count=0,p.isNotHasScrollBar=!1,p.forceOpenNotificationInboxEvent.subscribe(p.onForceOpenInboxCallBack),p}return ne(t,e),t.prototype.showComponent=function(){e.prototype.showComponent.call(this)},t.prototype.initScrollContainerElement=function(){this.isJustStopScroll=!1,this.scrollContainerElement=this.$element.find(".scroll-container"),this.scrollContainerElement.bind("scroll",this.onScrollInboxCallBack)},t.prototype.hideComponent=function(){if(e.prototype.hideComponent.call(this),this.notificationService.sendUpdateSenseNotificationAction(),this.screenTrackerService.onCloseModal(),!this.isEmptyInbox()&&this.isNotHasScrollBar&&this.startScrollTime){var t=Date.now()-this.startScrollTime;t>0&&this.senseAnalyticsService.trackSenseRead(this.loggedMessages,t)}if(this.scrollContainerElement){var t=Date.now()-this.startScrollTime+this.stopScrollDelay;this.senseAnalyticsService.trackSenseRead(this.loggedMessages,t),this.scrollContainerElement.unbind("scroll",this.onScrollInboxCallBack)}},t.prototype.isLastNotificationMessage=function(){var e=this.$element.find("notification-message:last")[0];return void 0!==e},t.prototype.onNofiticationMessageRenderDone=function(){if(!this.isEmptyInbox()){var e=this.$element.find(".scroll-container")[0];e&&!this.hasScrollBar(e)&&(this.isNotHasScrollBar=!0,this.startScrollTime=Date.now()+1e3,this.loggedMessages=this.getVisibleNotiMessages())}},t.prototype.onForceOpenInbox=function(){this.isShow||this.toggleInbox()},Object.defineProperty(t.prototype,"iconClass",{get:function(){return this.userInfoService.isMarketRep()||this.userInfoService.isVIP()?"notifications":"sense"},enumerable:!0,configurable:!0}),t.prototype.toggleInbox=function(){var e=this;this.isShow?this.hideComponent():(this.screenTrackerService.onOpenModal(ss.NOTI_INBOX,["sense"],null),this.notificationService.pullSenseNotification(),this.shouldScroll=!0,this.isShowLoading=!0,this.count=0,this.showComponent(),this.$timeout(function(){e.isShowLoading=!1},700),this.$timeout(function(){e.onNofiticationMessageRenderDone()},3e3))},t.prototype.scrollInbox=function(){this.shouldScroll&&(this.count++,0!==this.notificationLength&&this.count===this.notificationLength&&(this.count=0,this.shouldScroll=!1,Uc.toUnreadOrBottom(this.$element)))},t.prototype.shouldHideComponent=function(){this.controlNotificationBoxEvent.forceEnable(),this.isShow=!1,this.notificationService.updateLastTimeReadNotification()},t.prototype.shouldShowComponent=function(){this.controlNotificationBoxEvent.forceDisable(),this.notificationLength=this.notifications.length,this.isShow=!0},Object.defineProperty(t.prototype,"badge",{get:function(){if(!this.isShow){var e=this.notificationService.getNumberOfUnreadMessages();return 0===e?void 0:e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inboxHeader",{get:function(){return this.userInfoService.isInvestor()?"Sense & Notifications":"Notifications"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notifications",{get:function(){return this.notificationService.allNotificationInbox},enumerable:!0,configurable:!0}),t.prototype.isEmptyInbox=function(){return 0===this.notifications.length},t.prototype.onScrollInbox=function(e){if(this.isJustStopScroll&&this.loggedMessages.length>0){this.isJustStopScroll=!1;var t=Date.now()-this.startScrollTime+this.stopScrollDelay;this.senseAnalyticsService.trackSenseRead(this.loggedMessages,t)}clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this.onScrollInboxStopCallBack,this.stopScrollDelay)},t.prototype.onScrollStop=function(e){},t.prototype.onStopScroll=function(){this.loggedMessages=this.getVisibleNotiMessages(),this.startScrollTime=Date.now(),this.isJustStopScroll=!0},t.prototype.hasScrollBar=function(e){return e.scrollHeight>e.clientHeight},t.prototype.getVisibleNotiMessages=function(){var e=this,t=[],i=[];if(this.scrollContainerElement&&this.scrollContainerElement.length>0)for(var r=this.scrollContainerElement.get(0).scrollTop,n=r+this.scrollContainerElement.get(0).clientHeight,o=this.scrollContainerElement.find("notification-message"),s=0,a=o.length;s<a;s++){var c=o.get(s),l=c.offsetTop,u=c.offsetTop+c.clientHeight,d=l>r&&u<n,h=l<r&&u>n,p=l<r&&u>r&&u<n,m=l>r&&l<n&&u>n;(d||h||p||m)&&i.push(c)}return i.length>0&&i.forEach(function(i){e.notifications.some(function(e){if(""!==e.id&&e.id===i.attributes.id.nodeValue)return t.push(e),!0})}),t},t.$inject=["$element","$window","$scope","UIComponentsEventEmitter","$timeout","NotificationService","UserInfoService","ForceOpenNotificationInboxEvent","ControlNotificationBoxEvent","$rootScope","SenseAnalyticsService","ScreenTrackerService"],t}(je),Wm=function(){function e(e,t,i,r,n,o){this.$window=e,this.streamingAttribute=t,this.menuService=i,this.instrumentService=r,this.currentSymbolChangeEvent=n,this.alertService=o}return e.prototype.$onChanges=function(e){e.data&&e.data.currentValue&&(this.detailSource=this.getSourceName(),this.imagePath=this.getImagePath())},e.prototype.$onInit=function(){this.scrollInbox()},e.prototype.getImagePath=function(){var e="assets/img/";if(this.data.detail){var t=this.data.detail;switch(t.display_type){case Jo.BROKER_STOCK_IMAGE:return t.url_img;case Jo.SET_NEWS:case Jo.TECHNICAL_ALERT:case Jo.BROKER_RESEARCH:case Jo.TODAY_RECOMMENDED_STOCK:case Jo.MONEY_CHANNEL:case Jo.IAA_CONSENSUS:return e+"sense_notification_"+t.display_type+".png";case Jo.STANDARD_IMAGE:case Jo.STANDARD_TEXT_IMAGE:var i=t,r=this.getImageHost(i.url_img_server);return""===r?i.url_img:r+"/"+i.url_img}}return e},e.prototype.isShowImage=function(){if(this.data.detail){var e=this.data.detail;switch(e.display_type){case Jo.SET_NEWS:case Jo.TECHNICAL_ALERT:case Jo.BROKER_RESEARCH:case Jo.TODAY_RECOMMENDED_STOCK:case Jo.BROKER_STOCK_IMAGE:case Jo.MONEY_CHANNEL:case Jo.IAA_CONSENSUS:case Jo.STANDARD_IMAGE:case Jo.STANDARD_TEXT_IMAGE:return!0}}return!1},e.prototype.getSourceName=function(){if(this.data.detail){var e=this.data.detail;switch(e.display_type){case Jo.SET_NEWS:return"SET News";case Jo.TECHNICAL_ALERT:return"Settrade";case Jo.BROKER_RESEARCH:case Jo.TODAY_RECOMMENDED_STOCK:return this.getBrokerName();case Jo.MONEY_CHANNEL:return"Money Channel";case Jo.IAA_CONSENSUS:return"IAA Consensus";case Jo.STANDARD_TEXT_IMAGE:return e.content_source}}return"-"},e.prototype.isShowSourceName=function(){if(this.data.detail){var e=this.data.detail;switch(e.display_type){case Jo.SET_NEWS:case Jo.TECHNICAL_ALERT:case Jo.BROKER_RESEARCH:case Jo.TODAY_RECOMMENDED_STOCK:case Jo.MONEY_CHANNEL:case Jo.IAA_CONSENSUS:return!0;case Jo.GREETING:case Jo.BROKER_STOCK_ANNOUNCEMENT:case Jo.BROKER_STOCK_IMAGE:case Jo.STANDARD_TEXT:case Jo.STANDARD_IMAGE:return!1;case Jo.STANDARD_TEXT_IMAGE:return e.is_show_source===ts.TRUE;default:return!0}}return!1},e.prototype.getBrokerName=function(){var e=this.streamingAttribute.brokerName;return void 0===e||""===e?"-":e},e.prototype.getImageHost=function(e){return e===es.ITP?this.streamingAttribute.itpHost:e===es.DERIV?this.streamingAttribute.derivHost:e===es.MM?this.streamingAttribute.primaryMMHost:""},e.$inject=["$window","StreamingAttribute","MenuService","InstrumentService","CurrentSymbolChangeEvent","AlertService"],e}(),Ym=function(){function e(){}return e.prototype.isChatbox=function(){return this.data.type.isOrderAlert()||this.data.type.isNews()},e.prototype.isPriceVol=function(){return this.data.type.isPriceAlert()||this.data.type.isVolumeAlert()},e.prototype.isSenseChatbox=function(){return this.data.type.isSenseInbox()},e.prototype.isSenseDetail=function(){return this.data.type.isSenseInboxDetail()},e.prototype.isLine=function(){return this.data.type.isLine()||this.data.type.isUnreadLine()},e.prototype.isSenseRecommend=function(){return this.data.type.isSenseInboxRecommend()},e.prototype.scroll=function(){this.scrollInbox()},e.prototype.isIAAConsensus=function(){return this.data.type.isSenseInboxIAAConsensus()},e}(),Gm=function(){function e(e){this.$element=e}return e.prototype.$onInit=function(){this.unreadClass=this.isUnreadLine()?"unread":"",this.scrollInbox()},e.prototype.isUnreadLine=function(){return this.data.type.isUnreadLine()},e.$inject=["$element"],e}(),Km=function(){function e(e,t,i,r,n,o){this.newNotificationEvent=e,this.$interval=t,this.$timeout=i,this.$element=r,this.forceOpenNotificationInboxEvent=n,this.controlNotificationBoxEvent=o,this.onReceiveNotificationCallBack=this.onReceiveNotification.bind(this),this.onReceiveControlNotificationBoxEvent=this.onReceiveControlNotificationBox.bind(this),this.isRunningQueue=null,this.currentDisplay=void 0,this.messageList=[],this.newNotificationEvent.subscribe(this.onReceiveNotificationCallBack),this.isEnabled=!0}return e.prototype.onReceiveNotification=function(e){this.isEnabled&&(this.messageList.push(e),this.startQueue())},e.prototype.onReceiveControlNotificationBox=function(e){this.isEnabled=e,e||(this.hideNotification(),this.messageList=[])},e.prototype.startQueue=function(){var e=this;null===this.isRunningQueue&&(this.$element.fadeIn("slow",function(){}),this.currentDisplay=this.messageList.shift(),this.isRunningQueue=this.$timeout(function(){e.hideNotification()},5e3))},e.prototype.hideNotification=function(){var e=this;this.$element.fadeOut("slow",function(){e.$timeout.cancel(e.isRunningQueue),e.isRunningQueue=null,e.messageList.length>0&&e.startQueue()})},Object.defineProperty(e.prototype,"title",{get:function(){return"Notification"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.currentDisplay?this.currentDisplay.time.format("hh:mm A"):""},enumerable:!0,configurable:!0}),e.prototype.onClickBox=function(e){this.hideNotification(),this.forceOpenNotificationInboxEvent.publish(),e.stopPropagation()},e.prototype.onClickCloseBox=function(e){this.hideNotification(),e.stopPropagation()},e.$inject=["NewNotificationEvent","$interval","$timeout","$element","ForceOpenNotificationInboxEvent","ControlNotificationBoxEvent"],e}(),zm=function(){function e(){this.signal=new signals.Signal}return e.prototype.subscribe=function(e){this.signal.add(e)},e.prototype.forceEnable=function(){this.signal.dispatch(!0)},e.prototype.forceDisable=function(){this.signal.dispatch(!1)},e.prototype.unsubscribe=function(e){this.signal.remove(e)},e}(),Qm=function(){function e(){}return e.prototype.$onInit=function(){this.scrollInbox()},e}(),Xm=function(){function e(e,t,i,r,n,o,s,a,c,l,u){this.notificationService=e,this.$timeout=t,this.senseAnalyticsService=i,this.$window=r,this.streamingAttribute=n,this.alertService=o,this.instrumentService=s,this.currentSymbolChangeEvent=a,this.menuService=c,this.openStockScreenerBySenseNotificationActionEvent=l,this.uiComponentsEventEmitter=u,this.updateLikeTimeout=null,this.currentLike=this.isLiked}return e.prototype.$onDestroy=function(){this.updateLikeTimeout&&(this.cancelTimeOut(),this.sendUpdateLikeToServer(),this.updateLikeTimeout=null)},e.prototype.$onChanges=function(e){e.senseActions&&(this.senseActionsLength=e.senseActions.currentValue.length)},e.prototype.isShowLikeButton=function(){return void 0!==this.messageId&&""!==this.messageId||this.messageData.type===Ud.NEWS_INBOX},e.prototype.toggleLike=function(){this.isLiked=!this.isLiked,this.cancelTimeOut(),this.setTimeOut()},e.prototype.cancelTimeOut=function(){null!==this.updateLikeTimeout&&this.$timeout.cancel(this.updateLikeTimeout)},e.prototype.setTimeOut=function(){var e=this;this.updateLikeTimeout=this.$timeout(function(){e.sendUpdateLikeToServer(),e.updateLikeTimeout=null},1e3)},e.prototype.sendUpdateLikeToServer=function(){return this.isLiked&&!this.currentLike?(this.currentLike=this.isLiked,this.senseAnalyticsService.trackSenseLike(this.messageData),this.notificationService.likeSenseMessage(this.messageId)):!this.isLiked&&this.currentLike?(this.currentLike=this.isLiked,this.senseAnalyticsService.trackSenseUnlike(this.messageData),this.notificationService.unlikeSenseMessage(this.messageId)):void 0},e.prototype.getBtnWidth=function(){var e=this.isShowLikeButton()?this.senseActionsLength+1:this.senseActionsLength,t=Math.floor(27/e);return"col-"+t},e.prototype.getLikeBtnClass=function(){return""+this.getBtnWidth()},e.prototype.getLikeStatus=function(){return this.isLiked?"liked":""},e.prototype.processAction=function(e){var t=this;switch(e.actionType){case Zo.OPEN_LINK:this.$window.open(""+e.linkUrl,"_blank","scrollbars=1,resizable=1,height=500,width=650");break;case Zo.SENSE_REDIRECT:this.$window.open(this.streamingAttribute.activingMarketDataMMHost+"/realtime/sense/senseDetail.jsp?sourceID="+e.redirectSourceId+"&contentID="+e.redirectContentId+"&symbol="+e.symbol);break;case Zo.NON_STD_NEWS_MODAL:this.uiComponentsEventEmitter.dispatchCloseAll(),this.alertService.showNewsDetailAlert(e.nonStdNewsTarget.contentId,e.nonStdNewsTarget.source);break;case Zo.PAGE_BUYSELL:this.instrumentService.searchSymbolByBrokerLicense(e.symbol).then(function(e){t.currentSymbolChangeEvent.publish(e)});break;case Zo.PAGE_QUOTE:this.instrumentService.searchSymbolByBrokerLicense(e.symbol).then(function(e){var i=t.menuService.getPageId("Quote");t.menuService.activatePage(i),t.uiComponentsEventEmitter.dispatchCloseAll(),t.currentSymbolChangeEvent.publish(e)});break;case Zo.NON_STD_PAGE_MARKET:var i=this.menuService.getPageId("Market");this.menuService.activatePage(i),this.uiComponentsEventEmitter.dispatchCloseAll(),this.instrumentService.searchSymbolByBrokerLicense(e.symbol).then(function(e){t.currentSymbolChangeEvent.publish(e)});break;case Zo.PAGE_STOCK_SCREENER:var r=this.menuService.getPageId("StockScreener");this.menuService.activatePage(r),this.uiComponentsEventEmitter.dispatchCloseAll(),this.openStockScreenerBySenseNotificationActionEvent.publish(e.screenerId)}this.senseAnalyticsService.trackPerformSenseAction(this.messageData,e)},e.$inject=["NotificationService","$timeout","SenseAnalyticsService","$window","StreamingAttribute","AlertService","InstrumentService","CurrentSymbolChangeEvent","MenuService","OpenStockScreenerBySenseNotificationActionEvent","UIComponentsEventEmitter"],e}(),Jm=function(){function e(){}return e}(),Zm=function(){function e(e,t){this.notificationService=e,this.senseAnalyticsService=t,this.actionOptions=[{className:"not-a-fan",buttonClassName:"mdi mdi-cancel",label:"Not a fan",description:"Let us know you don't like this content",actionCallback:this.onClickNotAFan.bind(this)},{className:"hide-from-screen",buttonClassName:"mdi mdi-eye-off",label:"Hide from screen",description:"Hide this content from screen",actionCallback:this.onClickHideFromScreen.bind(this)}]}return e.prototype.onClickNotAFan=function(){this.notificationService.deleteSenseMessageFromInbox(this.messageData.id),this.senseAnalyticsService.trackSenseNotAFan(this.messageData)},e.prototype.onClickHideFromScreen=function(){this.notificationService.deleteSenseMessageFromInbox(this.messageData.id),this.senseAnalyticsService.trackSenseHideFromScreen(this.messageData)},e.prototype.isShowDislikeButton=function(){return this.messageData&&void 0!==this.messageData.id&&""!==this.messageData.id},e.$inject=["NotificationService","SenseAnalyticsService"],e}();angular.module("notification",["event-emitter","service","multi-market","web-api","number-formatter"]).component("notificationInbox",{template:i(/*! ../../html/notification/notification-inbox.html */217),controller:Hm}).component("notificationMessage",{template:i(/*! ../../html/notification/notification-message.html */218),controller:Ym,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&"}}).component("notificationChatbox",{template:i(/*! ../../html/notification/notification-chatbox.html */219),controller:qm,transclude:!0,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&",isShowActionControl:"<"}}).component("notificationChatboxWithButton",{template:i(/*! ../../html/notification/notification-chatbox-with-button.html */220),controller:jm,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&"}}).component("notificationLine",{template:i(/*! ../../html/notification/notification-line.html */221),controller:Gm,bindings:{data:"<",scrollInbox:"&"}}).component("notificationDetail",{template:i(/*! ../../html/notification/notification-detail.html */222),controller:Wm,transclude:!0,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&",isShowActionControl:"<"}}).component("senseDetail",{template:i(/*! ../../html/notification/sense-detail.html */223),controller:Um,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&"}}).component("senseRecommend",{templateUrl:"assets/pages/notification/sense-recommend.html",controller:Fm,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&"}}).component("senseIaaConsensus",{templateUrl:"assets/pages/notification/sense-iaa-consensus.html",controller:Qm,transclude:!0,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&"}}).service("NotificationService",Fd).service("NewNotificationEvent",Vd).service("ControlNotificationBoxEvent",zm).component("notificationBox",{template:i(/*! ../../html/notification/notification-box.html */224),controller:Km}).component("senseNotificationActionControls",{template:i(/*! ../../html/notification/sense-notification-action-controls.html */225),controller:Xm,bindings:{messageId:"<",messageData:"<",isLiked:"<",senseActions:"<",toggleInbox:"&"}}).component("senseChatbox",{template:i(/*! ../../html/notification/sense-chatbox.html */226),controller:Jm,bindings:{data:"<",toggleInbox:"&",scrollInbox:"&"}}).component("senseDislike",{template:i(/*! ../../html/notification/sense-dislike.html */227),controller:Zm,bindings:{messageData:"<"}});var ev=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t)||this;return l.pageService=t,l.refreshEvent=i,l.currentAccountChangeEvent=r,l.accountService=n,l.alertService=o,l.$q=s,l.timeService=a,l.refreshAccountEvent=c,l.onCurrentAccountChangeCallback=l.onCurrentAccountChange.bind(l),l.onRefreshEventCallback=l.onRefreshEvent.bind(l),l.onRefreshAccountInfoCallback=l.onRefreshEvent.bind(l),l.currentAccount=new vi,l.currentAccount.isEmptyAccount=!0,l.derivativesAccountInfo={},l.equityCashBalanceAccountInfo={},l.equityCreditBalanceAccountInfo={},l.lastUpdate="",l}return ne(t,e),t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallback),this.refreshEvent.subscribe(this.onRefreshEventCallback),this.refreshAccountEvent.subscribe(this.onRefreshAccountInfoCallback)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallback),this.refreshEvent.unsubscribe(this.onRefreshEventCallback),this.refreshAccountEvent.unsubscribe(this.onRefreshAccountInfoCallback)},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentAccountChange=function(e){this.currentAccount=e,this.clearAllData(),this.getAccountInfoDetail()},t.prototype.getAccountInfoDetail=function(){var e=this;this.getAccountType().then(function(){e.requestAccountInfoDetail()})},t.prototype.getAccountType=function(){var e=this;return this.currentAccount.isEmptyAccount?this.$q.reject():this.currentAccount.isEquity()?this.accountService.requestEquityAccountInfo(this.currentAccount.accountNo).then(function(t){return e.currentAccount.accountType=t.accountInfo.accountType,e.$q.resolve()}):this.$q.resolve()},t.prototype.requestAccountInfoDetail=function(){var e=this;this.currentAccount.isEmptyAccount||(this.currentAccount.isEquity()?this.accountService.requestEquityAccountInfoDetail(this.currentAccount.accountNo).then(function(t){"T"===t.result?e.isEquityCashBalanceMode()?(e.equityCashBalanceAccountInfo=t.data,e.setLastUpdateTimestamp()):e.isEquityCreditBalanceMode()&&(e.equityCreditBalanceAccountInfo=t.data,e.setLastUpdateTimestamp()):(e.clearAllData(),e.alertService.showErrorAlert(t.message))},function(){e.clearAllData(),e.alertService.showErrorAlert("Connection Error!")}):this.currentAccount.isDerivatives()&&this.accountService.requestDerivativesAccountInfoDetail(this.currentAccount.accountNo).then(function(t){"T"===t.result?(e.derivativesAccountInfo=e.parseDerivAccountInfoDetail(t.data),e.setLastUpdateTimestamp()):(e.clearAllData(),e.alertService.showErrorAlert(t.message))},function(){e.clearAllData(),e.alertService.showErrorAlert("Connection Error!")}))},t.prototype.parseDerivAccountInfoDetail=function(e){var t={};switch(angular.copy(e,t),e.callForceFlag){case"C":t.callForceFlag="Call";break;case"F":t.callForceFlag="Force"}switch(e.initCallForceFlag){case"C":t.initCallForceFlag="Call";break;case"F":t.initCallForceFlag="Force"}return t},t.prototype.clearAllData=function(){this.derivativesAccountInfo={},this.equityCashBalanceAccountInfo={},this.equityCreditBalanceAccountInfo={},this.lastUpdate=""},t.prototype.onRefreshEvent=function(){this.getAccountInfoDetail(),this.setLastUpdateTimestamp()},t.prototype.isDerivativesMode=function(){return!this.currentAccount.isEmptyAccount&&this.currentAccount.isDerivatives()},t.prototype.isEquityCashBalanceMode=function(){return!this.currentAccount.isEmptyAccount&&this.currentAccount.isEquity()&&(this.currentAccount.accountType===yi.CASH||this.currentAccount.accountType===yi.CASH_BALANCE)},t.prototype.isEquityCreditBalanceMode=function(){return!this.currentAccount.isEmptyAccount&&this.currentAccount.isEquity()&&this.currentAccount.accountType===yi.CREDIT_BALANCE},t.prototype.isEmptyMode=function(){return this.currentAccount.isEmptyAccount},t.prototype.setLastUpdateTimestamp=function(){var e=this.timeService.EMPTY_LAST_UPDATE,t=this.timeService.getTime();if(t.isTimeSync){var i=t.syncDate,r=i.format("HH:mm:ss");e=r}this.lastUpdate="Last Update : "+e},t.$inject=["PageService","RefreshEvent","CurrentAccountChangeEvent","AccountService","AlertService","$q","TimeService","RefreshAccountEvent"],t}(ys),tv=function(){function e(){}return e}(),iv=function(){function e(){}return e.prototype.isCallForceFlagRedText=function(){return"Call"===this.data.callForceFlag||"Force"===this.data.callForceFlag},e.prototype.isInitCallForceFlagRedText=function(){return"Call"===this.data.initCallForceFlag||"Force"===this.data.initCallForceFlag},e}(),rv=function(){function e(){}return e}(),nv=function(){function e(){}return e}();angular.module("account-info-detail",["event-emitter","service"]).component("accountInfoDetailPage",{template:i(/*! ../../html/account-info-detail/account-info-detail-page.html */228),controller:ev,bindings:{page:"@"}}).component("derivativesAccountInfoDetail",{template:i(/*! ../../html/account-info-detail/derivatives-account-info-detail.html */229),controller:iv,bindings:{page:"@",data:"<",lastUpdateTimestamp:"<"}}).component("equityCashBalanceAccountInfoDetail",{template:i(/*! ../../html/account-info-detail/equity-cash-balance-account-info-detail.html */230),controller:rv,bindings:{page:"@",data:"<",lastUpdateTimestamp:"<"}}).component("equityCreditBalanceAccountInfoDetail",{template:i(/*! ../../html/account-info-detail/equity-credit-balance-account-info-detail.html */231),controller:nv,bindings:{page:"@",data:"<",lastUpdateTimestamp:"<"}}).component("accountInfoName",{template:i(/*! ../../html/account-info-detail/account-info-name.html */232),controller:tv,bindings:{data:"<",lastUpdateTimestamp:"<"}});var ov=function(){function e(e,t,i){this.userApplicationProfileService=e,this.$window=t,this.uRLStore=i}return e.prototype.isOnSecondScreen=function(){return this.userApplicationProfileService.isSecondaryWindow},e.prototype.isOnPrimaryScreen=function(){return!this.userApplicationProfileService.isSecondaryWindow},e.prototype.openSecondScreen=function(){this.$window.open(this.uRLStore.STREAMING_SECOND_PAGE,"streamingNew","scrollbars=1,resizable=1,height=500,width=650")},e.$inject=["UserApplicationProfileService","$window","URLStore"],e}();angular.module("second-screen",["web-api","service"]).component("secondScreenButton",{template:i(/*! ../../html/second-screen/second-screen-button.html */233),controller:ov});var sv=function(e){function t(t){var i=e.call(this,t)||this;return i.pageService=t,i.symbolFirst="",i.symbolSecond="",i}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){},t.prototype.stopService=function(){},t.$inject=["PageService"],t}(ys),av=function(){function e(e,t,i){this.key=e,this.name=t,this.type=i}return e.prototype.getName=function(){return this.name},e.DEFAULT=new e("None","Please Select","HEADER"),e}(),cv=function(e){function t(t,i,r,n,o){var s=e.call(this,t)||this;return s.pageService=t,s.tradeReportService=i,
s.alertService=r,s.tradeReportClearEvent=n,s.refreshEvent=o,s.volume="",s.price="",s.accountInfoBuyer="",s.accountInfoSeller="",s.symbolNextFocusElement=[{parent:"trade-report-request",focusElement:"volume-input > input"}],s.volumeNextFocusElement=[{parent:"trade-report-request",focusElement:"price-input-without-digits > input"}],s.priceNextFocusElement=[{parent:"trade-report-request",focusElement:"#trade-report-place-order-submit"}],s.defaultCPM={id:"NONE",code:"Please Select"},s.selectedTRType=av.DEFAULT,s.trTypeList=[],s.isShowLoading=!1,s}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.positionList=Ye.ALL_NO_AUTO,this.initialCPM(),this.getTRType(this.currentSymbol)},t.prototype.stopService=function(){},t.prototype.onSymbolInputUpdate=function(e){this.currentSymbol=e,this.price="",this.getTRType(this.currentSymbol)},t.prototype.initialCPM=function(){var e=this;void 0===this.cpmList&&(this.isShowLoading=!0,this.tradeReportService.getCPM().then(function(t){e.cpmList=t.cpm,e.cpmList.unshift(e.defaultCPM),e.cpmList.some(function(i){if(i.code===t.brokercpm)return e.brokerCPM=i,!0}),e.selectedCPM=e.defaultCPM},function(t){e.alertService.showErrorAlert("Cannot get CPM list.")})["finally"](function(){e.isShowLoading=!1}))},t.prototype.getTRType=function(e){var t=this;this.trTypeList=[],this.selectedTRType=av.DEFAULT,e&&""!==e&&(this.isShowLoading=!0,this.tradeReportService.getTRType(e).then(function(e){t.ceiling="0.00"===e.ceiling?"":e.ceiling,t.floor="0.00"===e.floor?"":e.floor,e.trType.forEach(function(e){t.trTypeList.push(new av(e,e))}),t.trTypeList=t.trTypeList.length>0?t.trTypeList:[],t.selectedTRType=t.trTypeList.length>0?t.trTypeList[0]:av.DEFAULT},function(e){t.alertService.showErrorAlert("Cannot get TRType list.")})["finally"](function(){t.isShowLoading=!1}))},t.prototype.onAccountNoBuyerInputBlur=function(e){this.accountInfoBuyer=e},t.prototype.onAccountNoSellerInputBlur=function(e){this.accountInfoSeller=e},t.prototype.checkIfBothAccountValid=function(){return!!(this.accountInfoBuyer&&""!==this.accountInfoBuyer&&this.accountInfoSeller&&""!==this.accountInfoSeller&&this.brokerCPM)&&(this.selectedCPM=this.brokerCPM,!0)},t.prototype.clearFormAfterPlaceOrder=function(){this.position=this.positionList[0],this.ceiling="",this.floor="",this.currentSymbol="",this.volume="",this.price="",this.selectedCPM=this.defaultCPM,this.selectedTRType=av.DEFAULT,this.trTypeList=[]},t.prototype.clearAllForm=function(){this.clearFormAfterPlaceOrder(),this.tradeReportClearEvent.publish()},t.prototype.checkIfAccountExist=function(){return!!(this.accountInfoBuyer&&""!==this.accountInfoBuyer||this.accountInfoSeller&&""!==this.accountInfoSeller)},t.prototype.submitOrder=function(){var e=this;if(this.validateForm()){var t=new hv;t.accountNo=this.accountInfoBuyer,t.accountNoSeller=this.accountInfoSeller,t.brokercpm=this.brokerCPM.id,t.party=this.selectedCPM.id,t.position=this.position.shortname,t.price=yt.toNumber(this.price),t.seriesId=this.currentSymbol.toUpperCase(),t.seriesTRClassId=this.selectedTRType.getName(),t.volume=yt.toNumber(this.volume),t.TRType=this.selectedTRType.getName(),this.alertService.showPlaceTradeReportOrderConfirmAlert(t,this.position).then(function(){e.placeOrder(t)})}},t.prototype.placeOrder=function(e){var t=this;this.tradeReportService.requestPlaceTradeReportOrder(e).then(function(e){e&&("T"===e.result?(t.alertService.showSuccessAlert("Request Submitted."),t.refreshEvent.dispatchEvent()):"F"===e.result&&t.alertService.showErrorAlert(e.message))},function(e){e&&"F"===e.result&&t.alertService.showErrorAlert(e.message)})["finally"](function(){t.clearFormAfterPlaceOrder()})},t.prototype.validateForm=function(){var e=[];return this.checkIfAccountExist()||e.push("Please insert trading account."),this.currentSymbol&&""!==this.currentSymbol||e.push("Please insert symbol."),this.volume&&""!==this.volume||e.push("Please insert volume."),this.price&&""!==this.price||e.push("Please insert price."),this.selectedTRType&&this.selectedTRType!==av.DEFAULT||e.push("Please select TR Type."),this.selectedCPM&&!this.equalsDefault(this.selectedCPM)||e.push("Please select CPM."),0===e.length||(this.alertService.showValidationErrorAlert(e),!1)},t.prototype.equalsDefault=function(e){return this.defaultCPM.id===e.id&&this.defaultCPM.code===e.code},t.$inject=["PageService","TradeReportService","AlertService","TradeReportClearEvent","RefreshEvent"],t}(ys),lv=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t)||this;return a.pageService=t,a.accountService=i,a.alertService=r,a.refreshEvent=n,a.tradeReportClearEvent=o,a.refreshAccountEvent=s,a.onRefreshEventCallBack=a.onRefreshEvent.bind(a),a.onClearEventCallBack=a.onClearEvent.bind(a),a.onRefreshAccountInfoEventCallback=a.onRefreshEvent.bind(a),a.accountNo="",a}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.updateCurrentAccountInfo(),this.refreshEvent.subscribe(this.onRefreshEventCallBack),this.tradeReportClearEvent.subscribe(this.onClearEventCallBack),this.refreshAccountEvent.subscribe(this.onRefreshAccountInfoEventCallback)},t.prototype.stopService=function(){this.refreshEvent.unsubscribe(this.onRefreshEventCallBack),this.tradeReportClearEvent.unsubscribe(this.onClearEventCallBack),this.refreshAccountEvent.unsubscribe(this.onRefreshAccountInfoEventCallback)},t.prototype.onClearEvent=function(){this.accountNo="",this.traderName="",this.accountInfo={},this.onAccountNoInputBlur({newAccountNo:""})},t.prototype.onRefreshEvent=function(){this.updateCurrentAccountInfo()},t.prototype.onInnerAccountNoInputBlur=function(e){this.accountNo=e,this.updateCurrentAccountInfo(),this.updateCurrentTraderName(),this.onAccountNoInputBlur({newAccountNo:e})},t.prototype.updateCurrentAccountInfo=function(){var e=this;this.accountInfo={},""!==this.accountNo&&this.accountService.requestDerivativeAccountInfo(this.accountNo).then(function(t){e.accountInfo=t.accountInfo},function(t){e.alertService.showErrorAlert(t.errorMessage)})},t.prototype.updateCurrentTraderName=function(){var e=this;this.traderName="",""!==this.accountNo&&this.accountService.requestAccountName(this.accountNo,Qe.DERIVATIVE).then(function(t){e.traderName=t.engName})},t.$inject=["PageService","AccountService","AlertService","RefreshEvent","TradeReportClearEvent","RefreshAccountEvent"],t}(ys),uv=function(){function e(){}return e}(),dv=function(){function e(){}return e}(),hv=function(){function e(){}return e}(),pv=function(){function e(e,t){this.$q=e,this.itpdService=t}return e.prototype.getCPM=function(){var e=this;return this.itpdService.getTradeRequestCPM().then(function(t){return"T"===t.result?e.$q.resolve(t):e.$q.reject(t)})},e.prototype.getTRType=function(e){var t=this,i=new ii;return i.seriesId=e,this.itpdService.getTradeRequestTRtype(i).then(function(e){return"T"===e.result?t.$q.resolve(e):t.$q.reject(e)})},e.prototype.requestPlaceTradeReportOrder=function(e){var t=this,i=this.generatePlaceTradeReportOrderRequestData(e);return this.itpdService.placeTradeReportOrder(i).then(function(e){return"T"===e.result?t.$q.resolve(e):t.$q.reject(e)},function(){return t.$q.reject({result:"F",mode:"place",message:"Connection Error"})})},e.prototype.generatePlaceTradeReportOrderRequestData=function(e){var t=new Qt;return t.accountNo=e.accountNo,t.accountNoSeller=e.accountNoSeller,t.brokercpm=e.brokercpm,t.party=e.party,t.position=e.position,t.price=e.price,t.seriesId=e.seriesId,t.seriesTRClassId=t.seriesTRClassId,t.TRType=e.TRType,t.volume=e.volume,t},e.prototype.getTradeInfo=function(){var e=this;return this.itpdService.getTradeInfo().then(function(t){return"T"===t.result?e.$q.resolve(t):e.$q.reject(t)})},e.$inject=["$q","ITPDService"],e}(),mv=function(){function e(){}return e.parseByOrder=function(e){var t=[];return e.forEach(function(e,i){var r=new uv;r.index=i,r.price=a()(e.price,e.priceDigit),r.priceColor=fo.priceColor(e.price,e.prevSettle,e.volume),r.symbol=e.symbol,r.time=e.time,r.volume=c()(e.volume),t.push(r)}),t},e.parseBySummary=function(e){var t=[];return e.forEach(function(e,i){var r=new dv;r.index=i,r.avgPrice=a()(e.price,e.priceDigit),r.symbol=e.symbol,r.numberOfDeal=c()(e.deal),r.volume=c()(e.volume),t.push(r)}),t},e}(),vv=function(e){function t(t,i,r,n){var o=e.call(this,t)||this;return o.pageService=t,o.tradeReportService=i,o.alertService=r,o.refreshEvent=n,o.BY_ORDER_ID="0",o.BY_SUMMARY_ID="1",o.onRefreshEventCallBack=o.onRefreshEvent.bind(o),o}return ne(t,e),t.prototype.startService=function(){this.updateTradeReportInfo(),this.refreshEvent.subscribe(this.onRefreshEventCallBack)},t.prototype.stopService=function(){this.refreshEvent.unsubscribe(this.onRefreshEventCallBack)},t.prototype.viewDidLoad=function(){this.activePage=this.BY_ORDER_ID},t.prototype.onRefreshEvent=function(){this.updateTradeReportInfo()},t.prototype.updateTradeReportInfo=function(){var e=this;this.tradeReportService.getTradeInfo().then(function(t){e.currentByOrderDataView=mv.parseByOrder(t.order),e.currentBySummaryDataView=mv.parseBySummary(t.summary)},function(){e.alertService.showErrorAlert("Cannot get trade report infomations")})},t.$inject=["PageService","TradeReportService","AlertService","RefreshEvent"],t}(ys),fv=function(){function e(){}return e.prototype.onSelectedRowChangeByPressUpDown=function(e){this.keyOfSelectedRow=e},e.prototype.onClickRow=function(e){this.keyOfSelectedRow=e},e}(),yv=function(){function e(){}return e.prototype.onSelectedRowChangeByPressUpDown=function(e){this.keyOfSelectedRow=e},e.prototype.onClickRow=function(e){this.keyOfSelectedRow=e},e}(),gv=function(){function e(){}return e}(),Sv=function(){function e(){}return e}();angular.module("trade-report",["alert","event-emitter"]).component("tradeReportPage",{template:i(/*! ../../html/trade-report/trade-report-page.html */234),controller:sv,bindings:{page:"@"}}).component("tradeReportRequest",{templateUrl:"assets/pages/trade-report/trade-report-request.html",controller:cv,bindings:{page:"@"}}).component("tradeReportAccountInfo",{template:i(/*! ../../html/trade-report/trade-report-account-info.html */235),controller:lv,bindings:{page:"@",onAccountNoInputBlur:"&",accountNo:"<",accountLabel:"@"}}).component("tradeReportInfo",{template:i(/*! ../../html/trade-report/trade-report-info.html */236),controller:vv,bindings:{page:"@"}}).component("tradeReportInfoByOrder",{template:i(/*! ../../html/trade-report/trade-report-info-by-order.html */237),controller:fv,bindings:{viewData:"<"}}).component("tradeReportInfoBySummary",{template:i(/*! ../../html/trade-report/trade-report-info-by-summary.html */238),controller:yv,bindings:{viewData:"<"}}).component("tradeReportInfoByOrderRow",{template:i(/*! ../../html/trade-report/trade-report-info-by-order-row.html */239),controller:gv,bindings:{data:"<"}}).component("tradeReportInfoBySummaryRow",{template:i(/*! ../../html/trade-report/trade-report-info-by-summary-row.html */240),controller:Sv,bindings:{data:"<"}}).service("TradeReportService",pv);var bv=function(){function e(){}return e.NONE="None",e.DISCLAIMER="Disclaimer",e.DCA_CONTAINER="DCA_CONTAINER",e.NO_ACCOUNT="No_Account",e.NOT_ACCEPT_DISCLAIMER="Not_Accept_Disclaimer",e}(),Cv=function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,t,d)||this;return h.pageService=t,h.element=i,h.streamingAttribute=r,h.$window=n,h.alertService=o,h.dcaService=s,h.$q=a,h.dcaStore=c,h.urlStore=l,h.userInfoService=u,h.screenTrackerService=d,h.onDisclaimerLoadedCallback=h.onDisclaimerLoaded.bind(h),h.onReceiveMessageFromDisclaimerCallback=h.onReceiveMessageFromDisclaimer.bind(h),h.isShowLoading=!1,h}return ne(t,e),t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.getAnalyticsScreenName=function(){switch(this.mode){case bv.DISCLAIMER:return ss.DCA_DISCLAIMER;case bv.NO_ACCOUNT:return ss.DCA_ERROR;case bv.NOT_ACCEPT_DISCLAIMER:return ss.DCA_ERROR}},t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){var e=this;this.isShowLoading=!0,this.dcaService.checkDisclaimer().then(function(){e.showDCAContainer()},function(){e.showDisclaimer()})},t.prototype.stopService=function(){this.isDisclaimerShown&&this.beforeHideDisclaimer(),this.mode=bv.NONE},t.prototype.isShowDisclaimer=function(){return this.mode===bv.DISCLAIMER},t.prototype.isShowDCA=function(){return this.mode===bv.DCA_CONTAINER},t.prototype.isShowError=function(){return this.mode===bv.NO_ACCOUNT||this.mode===bv.NOT_ACCEPT_DISCLAIMER},Object.defineProperty(t.prototype,"errorMessage",{get:function(){switch(this.mode){case bv.NO_ACCOUNT:return"This A/C does not have permission to place DCA order, if you have further enquiries please contact your broker.";case bv.NOT_ACCEPT_DISCLAIMER:return"You have to accept DCA disclaimer to use this feature."}},enumerable:!0,configurable:!0}),t.prototype.showDisclaimer=function(){this.mode=bv.DISCLAIMER,this.changeToPage()},t.prototype.onShowDisClaimer=function(){var e=this.userInfoService.isMarketRep()?qt.DCA_ORDER_MKTREP:qt.DCA;this.iframe=this.element.find("iframe"),this.iframe.attr("src",""+this.streamingAttribute.itpHost+this.urlStore.ITP_DISCLAIMER+"?service="+e),this.iframe.on("load",this.onDisclaimerLoadedCallback)},t.prototype.onDisclaimerLoaded=function(){this.$window.addEventListener&&(this.isShowLoading=!1,this.isDisclaimerShown=!0,this.$window.addEventListener("message",this.onReceiveMessageFromDisclaimerCallback,!1))},t.prototype.onReceiveMessageFromDisclaimer=function(e){var t=e.data;if("string"==typeof t){var i=JSON.parse(t);switch(i.id){case"nativeConfirmed":this.onAcceptDisclaimer();break;case"nativeClose":this.onCancelDisclaimer();break;case"nativeAlert":this.alertService.showErrorAlert(i.value);break;case"openPopupPC":this.$window.open(i.value,"_blank","scrollbars=1,resizable=1,height=500,width=650")}}},t.prototype.onAcceptDisclaimer=function(){this.beforeHideDisclaimer(),this.showDCAContainer()},t.prototype.onCancelDisclaimer=function(){this.beforeHideDisclaimer(),this.showNotAcceptDisclaimer()},t.prototype.beforeHideDisclaimer=function(){this.isDisclaimerShown=!1,this.$window.removeEventListener("message",this.onReceiveMessageFromDisclaimerCallback,!1)},t.prototype.showNotAcceptDisclaimer=function(){this.mode=bv.NOT_ACCEPT_DISCLAIMER,this.changeToPage()},t.prototype.initInitialDataInStore=function(){return null===this.dcaStore.getInitialDataObject()?this.userInfoService.isInvestor()?this.initInvestorInitialDataInStore():this.initMktInitialDataInStore():this.$q.resolve()},t.prototype.initInvestorInitialDataInStore=function(){var e=this;return this.dcaService.getInitialData().then(function(t){return 0===t.canUseEQAccountNumbers.length?(e.showNoAccount(),e.$q.reject()):(e.dcaStore.saveOrUpdateInitialDataObject(t),e.$q.resolve())},function(t){return e.alertService.showErrorAlert(t.message),e.$q.reject()})},t.prototype.initMktInitialDataInStore=function(){var e=this;return this.dcaService.getMktInitialData().then(function(t){return e.dcaStore.saveOrUpdateMktInitialDataObject(t),e.$q.resolve()},function(t){return e.alertService.showErrorAlert(t.message),e.$q.reject()})},t.prototype.showDCAContainer=function(){var e=this;this.initInitialDataInStore().then(function(){e.mode=bv.DCA_CONTAINER})["finally"](function(){e.isShowLoading=!1})},t.prototype.showNoAccount=function(){this.mode=bv.NO_ACCOUNT,this.changeToPage()},t.$inject=["PageService","$element","StreamingAttribute","$window","AlertService","DCAService","$q","DCAStore","URLStore","UserInfoService","ScreenTrackerService"],t}(Zs),Ev=function(){function e(){}return e.parse=function(e){for(var t=[],i=0;i<e.length;i++){var r=new wo;r.avg52w=yt.formatPrice(e[i].avg52w,2),r.capitalGain1Y=yt.formatPercentChange(e[i].capitalGain1Y),r.capitalGain1YColor=fo.changeColor(e[i].capitalGain1Y,1,1),r.dividend1Y=yt.formatPrice(e[i].dividend1Y,2),r.percentWin=yt.formatPrice(e[i].percentWin,2)+"%",r.percentWinColor=fo.winRateColor(e[i].percentWin),r.symbol=e[i].symbol,r.index=i,t.push(r)}return t},e.updateActivatedSymbol=function(e,t,i){for(var r=0;r<e.length;r++)e[r].isActivated=t.value(e[r].symbol),e[r].isChecked=!!t.value(e[r].symbol)||i.getIsChecked(e[r].symbol),e[r].index=r;return e},e}(),Av=function(){function e(e,t){this.accountService=e,this.dcaOrderStatusService=t,this.initialDataObject=null,this.symbol=new dt("",ar.EQUITY),this.amount="",this.frequency=at.MONTHLY,this.duration=null,this.authorizedAccounts=[],this.selectedAccount=vi.empty()}return e.prototype.getInitialDataObject=function(){return this.initialDataObject},e.prototype.getAutohrizedSymbolSelectorRowView=function(){return this.symbolSelectorRowView},e.prototype.saveOrUpdateInitialDataObject=function(e){this.initialDataObject=e,this.symbolSelectorRowView=Ev.parse(e.stocks),this.updateSymbolMinimumAmountMap(e.stocks),this.initAuthorizedAccount(e.canUseEQAccountNumbers),this.brokerMinimumAmount=e.minimumAmount},e.prototype.saveOrUpdateMktInitialDataObject=function(e){this.initialDataObject=e,this.symbolSelectorRowView=Ev.parse(e.stocks),this.updateSymbolMinimumAmountMap(e.stocks),this.brokerMinimumAmount=e.minimumAmount},e.prototype.initAuthorizedAccount=function(e){for(var t=0;t<e.length;t++){var i=this.accountService.getAccountByAccountNumberAndSystemType(e[t],mi.EQUITY);i&&this.authorizedAccounts.push(i)}0!==this.authorizedAccounts.length&&(this.selectedAccount=this.authorizedAccounts[0],this.dcaOrderStatusService.setCurrentAccount(this.selectedAccount))},e.prototype.updateSymbolMinimumAmountMap=function(e){this.stockMinimumAmountMap=e.reduce(function(e,t){return e[t.symbol]=100*t.avg52w,e},new ut)},e.prototype.getAllAuthorizedAccount=function(){return this.allAuthorizedAccount},e.prototype.getSelectedAccount=function(){return this.selectedAccount},e.prototype.isAccountInitialized=function(){return this.selectedAccount&&!this.selectedAccount.isEmptyAccount&&this.selectedAccount.accountNo&&""!==this.selectedAccount.accountNo},e.prototype.isAccountInvalid=function(){return!this.selectedAccount.accountType||!this.selectedAccount.fullAccountType},e.$inject=["AccountService","DCAOrderStatusService"],e}(),wv=function(e){function t(t,i,r,n,o){var s=e.call(this,t,n)||this;return s.pageService=t,s.dcaStore=i,s.settingsService=r,s.screenTrackerService=n,s.currentAccountDCAChangeEvent=o,s.PLACE_ORDER_MODE=0,s.BACK_TEST_MODE=1,s.currentAccountDCAChangeCallback=s.onCurrentAccountDCAChange.bind(s),s.active=s.PLACE_ORDER_MODE,s}return ne(t,e),t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){var e=null;return this.active===this.PLACE_ORDER_MODE&&(e={page:this.getAnalyticsScreenName(),accountNo:this.currentAccount.accountNo,system:""+this.currentAccount.systemType,frontType:""+this.currentAccount.frontType}),e},t.prototype.getAnalyticsScreenName=function(){switch(this.active){case this.PLACE_ORDER_MODE:return ss.DCA_PLACE_ORDER;case this.BACK_TEST_MODE:return ss.DCA_BACK_TESTING;default:return ss.DCA_PLACE_ORDER}},t.prototype.onClickTab=function(){this.changeToPage()},t.prototype.onCurrentAccountDCAChange=function(e){this.currentAccount=e,this.changeToPage()},t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.active=void 0!==this.dcaStore.containerLastActivePage?this.dcaStore.containerLastActivePage:this.PLACE_ORDER_MODE,this.active!==this.PLACE_ORDER_MODE&&this.changeToPage(),this.currentAccountDCAChangeEvent.subscribe(this.currentAccountDCAChangeCallback)},t.prototype.stopService=function(){this.dcaStore.containerLastActivePage=this.active,this.currentAccountDCAChangeEvent.unsubscribe(this.currentAccountDCAChangeCallback)},t.prototype.isShowBackTest=function(){return this.active===this.BACK_TEST_MODE},t.prototype.isShowPlaceOrder=function(){return this.active===this.PLACE_ORDER_MODE},t.prototype.getClassHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.DCA_CONTAINER:st.NormalScreen.DCA_CONTAINER},t.$inject=["PageService","DCAStore","SettingsService","ScreenTrackerService","CurrentAccountDCAChangeEvent"],t}(Zs),Tv=function(){function e(){this.data=[],this.vLines=[]}return e}(),Dv=function(){function e(e){this.timestamp=e.timestamp,this.dataType=e.dataType,this.isVline=e.isVline,this.showLabel=e.showLabel,this.value=e.value,this.date=e.date,this.forceShowField=""!==e.showLabel}return e}(),Iv=function(){function e(){}return e.parse=function(e){for(var t=new Tv,i=0;i<e.length;i++)if(t.data.push(new Dv(e[i])),""!==e[i].showLabel){var r=new Nl;r.catagoryValue=e[i].date,t.vLines.push(r)}return t},e}(),Pv=function(){function e(){}return e.parse=function(e){var t=[];return e.forEach(function(e){var i=new St;i.isHighlight=e.isHighlight,i.plRate=e.plRate,void 0!==e.isPositivePLRate?i.plRateColor=e.isPositivePLRate?"#2CAE00":"#F11B1B":i.plRateColor="#58ACFA",i.probRate=e.probRate,t.push(i)}),t},e}(),Ov=function(){function e(){this.avgCost="",this.avgDividendReceived="",this.avgPerProfitAndLoss="",this.avgPerProfitAndLossColor=ae.UNCHANGED,this.date="",this.dividendReceive="",this.investmentCost="",this.marketValue="",this.marketValueAsOfDate="",this.numberOfTransaction="",this.percentProfitLoss="",this.percentWin="",this.period="",this.prevClose="",this.profitLoss="",this.profitLossColor=ae.UNCHANGED,this.totalVolume=""}return e}(),kv=function(){function e(){}return e.parseBackTestInfo=function(e){var t=new Ov;return t.avgCost=e.avgCost,t.date=e.date,t.dividendReceive=yt.formatPrice(e.dividendReceive,2),t.investmentCost=e.investmentCost,t.marketValue=e.marketValue,t.marketValueAsOfDate="as of "+e.marketValueAsOfDate,t.numberOfTransaction=yt.formatPriceWithoutDigit(e.numberOfTransaction),t.percentProfitLoss="("+yt.formatPercentChange(e.percentProfitLoss)+")",t.percentWin=yt.formatPriceWithoutDigit(e.percentWin),t.period=e.period,t.prevClose=e.prevClose,t.profitLoss=yt.formatChange(e.profitLoss,2),t.totalVolume=e.totalVolume,t.profitLossColor=fo.changeColor(e.profitLoss,1,1),t},e}(),$v=function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,t)||this;return h.pageService=t,h.currentSymbolChangeEvent=i,h.dcaStore=r,h.userApplicationProfileService=n,h.element=o,h.$filter=s,h.dcaService=a,h.$q=c,h.alertService=l,h.settingsService=u,h.instrumentService=d,h.onCurrentEquitySymbolChangeCallback=h.onCurrentEquitySymbolChange.bind(h),h.infoView=new Ov,h.symbolNextFocusElement=[{parent:"dca-back-test",focusElement:"volume-input > input"}],h.amountNextFocusElement=[{parent:"dca-back-test",focusElement:"button.view-result-button"}],h.filterPrice=h.$filter("price"),h}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribeEquity(this.onCurrentEquitySymbolChangeCallback)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribeEquity(this.onCurrentEquitySymbolChangeCallback),this.clearUnrealizedPLChart(),this.clearProbalbilityRateChart()},t.prototype.onCurrentEquitySymbolChange=function(e){this.dcaStore.symbol=e},t.prototype.onBlurSymbolInput=function(e){var t=this;""!==e&&this.instrumentService.searchSymbol(e,Qe.EQUITY).then(function(e){t.onValidatedSymbol(e)},function(e){t.dcaStore.symbol=void 0,t.alertService.showErrorAlert(e)})},t.prototype.onValidatedSymbol=function(e){e&&(e.isEqual(this.dcaStore.symbol)||(this.dcaStore.symbol=e,this.userApplicationProfileService.setCurrentSymbol(e)))},t.prototype.getCompanyFullName=function(e){var t=this;this.dcaService.getCompayFullName(e).then(function(e){t.companyDisplayName=e+" ("+t.dcaStore.symbol.name+")"},function(e){t.companyDisplayName=""})},t.prototype.getBackTest=function(){var e=this;this.dcaService.getBackTest(this.generateBackTestRequest()).then(function(t){e.getCompanyFullName(e.dcaStore.symbol),e.infoView=kv.parseBackTestInfo(t),e.writeUnrealizedPLChart(t.unrealizedProfitLossChart);var i=Pv.parse(t.profitAndLossProbRates);e.writeProbalbilityRateChart(i)},function(t){e.alertService.showErrorAlert(t.message)})},t.prototype.submitForm=function(){this.validateForm()&&this.getBackTest()},t.prototype.generateBackTestRequest=function(){return{symbol:this.dcaStore.symbol,amount:this.dcaStore.amount,frequency:this.dcaStore.frequency,duration:this.dcaStore.duration}},t.prototype.validateForm=function(){var e=[];return(void 0===this.dcaStore.symbol||this.dcaStore.symbol&&this.dcaStore.symbol.isEmpty())&&e.push("Please insert symbol."),""===this.dcaStore.amount&&e.push("Please insert amount."),null===this.dcaStore.frequency&&e.push("Please select frequency."),null===this.dcaStore.duration&&e.push("Please select duration."),0===e.length||(this.alertService.showValidationErrorAlert(e),!1)},t.prototype.clearUnrealizedPLChart=function(){this.unrealizedPLChart&&this.unrealizedPLChart.clear()},t.prototype.writeUnrealizedPLChart=function(e){var t=Iv.parse(e);this.clearUnrealizedPLChart();var i=this.filterPrice;this.unrealizedPLChart=new AmCharts.AmSerialChart,this.unrealizedPLChart.path="assets/amcharts",this.unrealizedPLChart.marginTop=30,this.unrealizedPLChart.marginLeft=30,this.unrealizedPLChart.marginBottom=30,this.unrealizedPLChart.autoMargins=!0,this.unrealizedPLChart.dataProvider=t.data,this.unrealizedPLChart.categoryField="date",this.unrealizedPLChart.balloon.cornerRadius=6,this.unrealizedPLChart.responsive={enabled:!1};var r=new AmCharts.Label;r.text="%Capital Gain (Baht)",r.x=0,r.y=0,r.bold=!1,r.color="#DADADA",r.size=12,this.unrealizedPLChart.allLabels=[r];var n=this.unrealizedPLChart.categoryAxis;n.parseDates=!1,n.minPeriod="mm",n.axisThickness=.5,n.minorGridEnabled=!1,n.axisColor="#DADADA",n.color="#DADADA",n.gridColor="#DADADA",n.gridAlpha=0,n.forceShowField="forceShowField",n.labelFunction=function(e,t,i){if(t.dataContext.forceShowField)return t.dataContext.showLabel};for(var o,s=t.vLines,a=0;a<s.length;a++)o=new AmCharts.Guide,o.category=s[a].catagoryValue,o.lineColor="#DADADA",o.lineAlpha=.3,o.dashLength=0,o.inside=!0,n.addGuide(o);var c=new AmCharts.ValueAxis;c.dashLength=0,c.inside=!1,c.color="#DADADA",c.gridColor="#DADADA",c.labelFunction=function(e,t,r){return i(e,2)},this.unrealizedPLChart.addValueAxis(c);var l=new AmCharts.AmGraph;l.lineColor=this.infoView.profitLossColor===ae.UNCHANGED?"yellow":this.infoView.profitLossColor===ae.GAINER?"green":this.infoView.profitLossColor===ae.LOSER?"red":"",l.connect=!0,l.lineThickness=1,l.valueField="value",l.balloonColor="black",l.balloonFunction=function(e,t,r){return this.dcaStore.symbol.name+"<br>Date: "+e.dataContext.date+"<br>%Capital Gain: <b>"+i(e.dataContext.value,2)+"</b>"}.bind(this),this.unrealizedPLChart.addGraph(l);var u=new AmCharts.ChartCursor;u.cursorAlpha=1,u.cursorPosition="mouse",u.categoryBalloonDateFormat="YYYY",u.graphBulletSize=3,this.unrealizedPLChart.addChartCursor(u),this.unrealizedPLChart.creditsPosition="bottom-right";var d=this.element.find("#back-test-unrealized-pl-chart");this.unrealizedPLChart.write(d[0])},t.prototype.clearProbalbilityRateChart=function(){this.probalbilityRateChart&&this.probalbilityRateChart.clear()},t.prototype.writeProbalbilityRateChart=function(e){this.clearProbalbilityRateChart();var t=this.filterPrice,i=e.length<=5?1===e.length?.2:.5:.8,r=0===e.length;if(r){var n=new St;n.isHighlight=!1,n.probRate=0,n.plRate="",n.plRateColor="",e=[n]}this.probalbilityRateChart=new AmCharts.AmSerialChart,this.probalbilityRateChart.dataProvider=e,this.probalbilityRateChart.categoryField="plRate",this.probalbilityRateChart.balloon.cornerRadius=6,this.probalbilityRateChart.balloon.fontSize=8,this.probalbilityRateChart.responsive={enabled:!1},this.probalbilityRateChart.marginTop=30,this.probalbilityRateChart.marginLeft=30,this.probalbilityRateChart.marginBottom=50,this.probalbilityRateChart.autoMarginOffset=20;var o=new AmCharts.Label;o.text="Probability Rate",o.x=0,o.y=0,o.bold=!1,o.color="#DADADA",o.size=12;var s=new AmCharts.Label;s.text="%Capital Gain",s.x="45%",s.y="90%",s.bold=!1,s.color="#DADADA",s.size=12,this.probalbilityRateChart.allLabels=[o,s];var a=new AmCharts.ValueAxis;a.stackType="regular",a.inside=!1,a.axisAlpha=0,a.color="#DADADA",a.gridColor="#DADADA",a.labelFunction=function(e,i,n){return r?0:t(e)},a.labelFrequency=1,this.probalbilityRateChart.addValueAxis(a);var c=this.probalbilityRateChart.categoryAxis;c.gridPosition="start",c.axisAlpha=0,c.gridAlpha=0,c.color="#DADADA",c.axisThickness=0,c.offset=-10;var l=new AmCharts.AmGraph;l.fillAlphas=.8,l.title="Probability Rate",l.type="column",l.valueField="probRate",l.lineThickness=0,l.columnWidth=i,l.balloonColor="black",l.fillColorsField="plRateColor",l.balloonFunction=function(e,t,i){return this.filterPrice(e.dataContext.probRate,2)}.bind(this),this.probalbilityRateChart.addGraph(l);var u=this.element.find("#back-test-probability-rate-chart");this.probalbilityRateChart.write(u[0])},t.prototype.getProfitLossClassHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.DCA_BACK_TEST_PROFIT_LOSS:st.NormalScreen.DCA_BACK_TEST_PROFIT_LOSS},t.$inject=["PageService","CurrentSymbolChangeEvent","DCAStore","UserApplicationProfileService","$element","$filter","DCAService","$q","AlertService","SettingsService","InstrumentService"],t}(ys),Lv=function(e){function t(t){var i=e.call(this,t)||this;return i.pageService=t,i}return ne(t,e),t.prototype.startService=function(){},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.$inject=["PageService"],t}(ys),Nv=function(e){function t(t,i,r,n,o,s){var a=e.call(this,r)||this;return a.dcaOrderStatusService=t,a.refreshEvent=i,a.pageService=r,a.$window=n,a.streamingAttribute=o,a.settingsService=s,a.onRefreshEventCallBack=a.onRefreshEvent.bind(a),a}return ne(t,e),t.prototype.startService=function(){this.dcaOrderStatusService.updateUserDetail(),this.refreshEvent.subscribe(this.onRefreshEventCallBack)},t.prototype.stopService=function(){this.refreshEvent.unsubscribe(this.onRefreshEventCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onRefreshEvent=function(){this.dcaOrderStatusService.updateUserDetail()},t.prototype.openStatusMeaning=function(){this.$window.open(this.streamingAttribute.itpHost+"/DCAOrderStatus.jsp","_blank","scrollbars=yes,resizable=yes,height=550,width=700")},t.prototype.getOrderStatusClassHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.DCA_ORDER_STATUS_SCROLL_CONTAINER:st.NormalScreen.DCA_ORDER_STATUS_SCROLL_CONTAINER},t.$inject=["DCAOrderStatusService","RefreshEvent","PageService","$window","StreamingAttribute","SettingsService"],t}(ys),Mv=function(){function e(e,t,i,r,n){this.alertService=e,this.dcaOrderStatusService=t,this.pinService=i,this.dcaPlaceOrderStore=r,this.userInfoService=n}return e.prototype.openOrderDetail=function(){var e=this;this.dcaOrderStatusService.getOrderDetail(this.data.policyId).then(function(t){e.alertService.showDCAOrderDetailAlert(t)},function(t){e.alertService.showErrorAlert(t.errorMsg)})},e.prototype.onClickCancelOrder=function(){var e=this;this.alertService.showDCACancelOrderConfirmAlert([this.data],this.getPin(),this.userInfoService.isMarketRep()).then(function(t){var i=new $t;i.accountNumber=e.dcaOrderStatusService.currentAccount.accountNo,i.pin=t,i.addPolicyId(e.data.policyId),e.dcaOrderStatusService.cancelOrderRequest(i).then(function(t){e.alertService.showDCASubmittedTransactionResultAlert(t,Lo.cancelOrder)},function(t){e.alertService.showErrorAlert(t)})["finally"](function(){e.dcaOrderStatusService.updateUserDetail()})})},e.prototype.getPin=function(){var e=this.pinService.getPin(null);return null!==e?e:this.dcaPlaceOrderStore.pin},e.$inject=["AlertService","DCAOrderStatusService","PinService","DCAPlaceOrderStore","UserInfoService"],e}(),Rv=function(){function e(e,t){this.dcaStore=e,this.dcaPlaceOrderStore=t}return e.prototype.getBrokerMinimumAmount=function(){return yt.formatVolume(this.dcaStore.brokerMinimumAmount)},e.prototype.onAmountInputBlur=function(){this.dcaPlaceOrderStore.updateRememberedAmountBySymbol(this.symbol,this.amount),
this.onAmountChanged()},e.$inject=["DCAStore","DCAPlaceOrderStore"],e}(),_v=(function(){function e(){}return e}(),function(){function e(){this.selectedSymbols=new To;var e="";this.rememberedAmountMap=new ut(e),this.isNvdr=!1,this.pin=null,this.frequency=Dt.MONTHLY,this.date=null,this.time=null,this.duration=null}return Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(e){this._frequency!==e&&(this._frequency=e,this.date=null,this.time=null,this.duration=null)},enumerable:!0,configurable:!0}),e.prototype.getRememberedAmountBySymbol=function(e){return this.rememberedAmountMap.value(e)},e.prototype.updateRememberedAmountBySymbol=function(e,t){this.rememberedAmountMap.add(e,t)},e}()),Vv=function(){function e(e,t,i,r,n,o){this.$q=e,this.itpService=t,this.accountService=i,this.mmService=r,this.dcaOrderStatusService=n,this.userInfoService=o}return e.prototype.checkDisclaimer=function(){var e=this.userInfoService.isMarketRep()?qt.DCA_ORDER_MKTREP:qt.DCA;return this.itpService.checkDisclaimerForService(e)},e.prototype.getInitialData=function(){var e=this,t=this.accountService.accountEquityList.map(function(e){return{accountNumber:e.accountNo,accountType:e.fullAccountType,frontType:e.frontType}}),i=new bt;return i.accountList=t,this.itpService.getDCAInitialData(i).then(function(t){var i=t;if(void 0!==i.errorMsg){var r=new Up(i.errorMsg);return e.$q.reject(r)}return e.$q.resolve(t)})},e.prototype.getMktInitialData=function(){var e=this;return this.itpService.getDCAMktInitialData().then(function(t){var i=t;if(void 0!==i.errorMsg){var r=new Up(i.errorMsg);return e.$q.reject(r)}return e.$q.resolve(t)})},e.prototype.validateDCAMktAccount=function(e){var t=this;return this.itpService.validateDCAMktAccount(e).then(function(e){return e.isSuccess?t.$q.resolve(e):t.$q.reject(e)},function(e){var i={errorMessages:[e.message],isMustClearForm:!0,isSuccess:!1};return t.$q.reject(i)})},e.prototype.getBackTest=function(e){var t=this,i=new gt;return i.amount=yt.toNumber(e.amount),i.duration=e.duration,i.frequency=e.frequency,i.symbol=e.symbol.name,this.itpService.getBackTest(i).then(function(e){var i=e;if(void 0!==i.errorMsg){var r=new Up(i.errorMsg);return t.$q.reject(r)}return t.$q.resolve(e)},function(e){return t.$q.reject(e)})},e.prototype.getCompayFullName=function(e){return this.mmService.getCompayFullName(e.name).then(function(e){return e.stockName})},e.prototype.placeOrder=function(e){var t=this,i=new At;return i.accountNumber=e.account.accountNo,i.fullAccountType=""+e.account.fullAccountType,i.isNVDR=e.isNVDR,i.pin=e.pin,i.date=e.date.requestParam,i.duration=e.duration.requestParam,i.dcaType=e.frequency.requestParam,i.session=e.time.requestParam,i.symbolList=e.symbolList,this.requestPlaceDCAOrderByRole(i).then(function(e){var i=e;if(void 0!==i.errorMsg){var r=i.errorMsg.split(":");return 1===r.length?t.$q.reject(i.errorMsg):t.$q.resolve(t.parsePlaceOrderResponse(i.errorMsg))}return t.$q.resolve(t.parsePlaceOrderResponse(e.message))})["finally"](function(){t.dcaOrderStatusService.updateUserDetail()})},e.prototype.requestPlaceDCAOrderByRole=function(e){return this.userInfoService.isInvestor()?this.itpService.placeDCAOrder(e):this.itpService.placeMktDCAOrder(e)},e.prototype.parsePlaceOrderResponse=function(e){var t=[],i=e.split("\n");return i.forEach(function(e){var i=e.split(":"),r=new $o;r.symbol=i[0].trim(),r.result=i[1].trim(),t.push(r)}),t},e.prototype.getCountTransaction=function(e){var t=this,i=this.generateDCACountTransactionRequestData(e);return this.requestDCAMktCountTransactionByRole(i).then(function(e){return t.$q.resolve(e)},function(e){return t.$q.reject(e)})},e.prototype.requestDCAMktCountTransactionByRole=function(e){return this.userInfoService.isInvestor()?this.itpService.getCountTransaction(e):this.itpService.getDCAMktCountTransaction(e)},e.prototype.generateDCACountTransactionRequestData=function(e){var t=new Ot;return t.date=e.date.requestParam,t.dcaType=e.frequency.requestParam,t.session=e.time.requestParam,t.duration=e.duration.requestParam,t},e.prototype.isShowPinInput=function(){return this.userInfoService.isInvestor()},e.$inject=["$q","ITPService","AccountService","MMService","DCAOrderStatusService","UserInfoService"],e}(),Bv=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Ct),function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,a)||this;return h.dcaPlaceOrderStore=t,h.alertService=i,h.dcaOrderStatusService=r,h.dcaService=n,h.dcaStore=o,h.accountService=s,h.pageService=a,h.orderEntrySettingChangeEvent=c,h.pinService=l,h.userInfoService=u,h.currentAccountDCAChangeEvent=d,h.FREQUENCY_MONTHLY=Dt.MONTHLY,h.FREQUENCY_WEEKLY=Dt.WEEKLY,h.TIME_MORNING=Tt.MORNING,h.TIME_AFTERNOON=Tt.AFTERNOON,h.DATE_MONTHLY_LIST=It.MONTHLY_LIST,h.DATE_WEEKLY_LIST=It.WEEKLY_LIST,h.DURATION_MONTHLY=Pt.DURATION_LIST_MONTHLY,h.DURATION_WEEKLY=Pt.DURATION_LIST_WEEKLY,h.onOrderEntrySettingChangeCallBack=h.onOrderEntrySettingChange.bind(h),h}return ne(t,e),t.prototype.startService=function(){this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChangeCallBack),this.updateView(),this.currentAccountDCAChangeEvent.publish(this.dcaStore.selectedAccount)},t.prototype.stopService=function(){this.orderEntrySettingChangeEvent.unsubscribe(this.onOrderEntrySettingChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.isShowInvestorAccount=function(){return this.userInfoService.isInvestor()},t.prototype.isShowMarketRepAccount=function(){return this.userInfoService.isMarketRep()},t.prototype.onAccountChangedByInvestor=function(e){this.dcaStore.selectedAccount=e,this.dcaOrderStatusService.setCurrentAccount(e),this.currentAccountDCAChangeEvent.publish(e)},t.prototype.onAccountChangedByMarketRep=function(e){var t=this;return""===e?void this.clearAccountAndForm():void this.dcaService.validateDCAMktAccount(e).then(function(i){var r=new vi;r.accountNo=e,r.systemType=mi.EQUITY,r.frontType=i.accountInfomation.frontType,r.fullAccountType=i.accountInfomation.fullAccountType,r.accountType=i.accountInfomation.accountType,t.dcaStore.selectedAccount=r,t.dcaOrderStatusService.setCurrentAccount(r)},function(i){if(i.isMustClearForm)t.clearAccountAndForm();else{var r=new vi;r.accountNo=e,r.systemType=mi.EQUITY,t.dcaStore.selectedAccount=r,t.dcaOrderStatusService.setCurrentAccount(r)}i.errorMessages.forEach(function(e){t.alertService.showErrorAlert(e)})})},t.prototype.clearAccountAndForm=function(){this.dcaStore.selectedAccount=vi.empty(),this.dcaOrderStatusService.setCurrentAccount(this.dcaStore.selectedAccount)},t.prototype.openSymbolSelector=function(){var e=this;if(this.dcaStore.isAccountInitialized()){var t=new Do,i=angular.copy(this.dcaStore.getAutohrizedSymbolSelectorRowView()),r=this.dcaPlaceOrderStore.selectedSymbols.clone();t.authorizedSymbols=Ev.updateActivatedSymbol(i,this.dcaOrderStatusService.currentActiveSymbolMap,r),t.maximumPolicies=this.dcaStore.getInitialDataObject().maximumPolicies,t.numberOfActivateSymbols=this.dcaOrderStatusService.currentActiveSymbolMap.size(),t.selectedSymbols=r,this.alertService.showDCASymbolSelectorAlert(t).then(function(t){e.dcaPlaceOrderStore.selectedSymbols=t.selectedSymbols,e.updateView()})}else this.alertService.showErrorAlert("Please insert trading account")},t.prototype.updateDisplaySymbols=function(){var e=this;this.clearViews();var t,i,r=this.dcaPlaceOrderStore.selectedSymbols.getList(),n=this.dcaStore.brokerMinimumAmount;r.forEach(function(r,o){i=e.dcaStore.stockMinimumAmountMap.value(r),t=e.calculateMinimumAmount(n,i),e.rowViews.push({symbol:r,amount:e.dcaPlaceOrderStore.getRememberedAmountBySymbol(r),minimumAmount:p(t)})})},t.prototype.updateView=function(){this.updateDisplaySymbols(),this.updateTotalAmount()},t.prototype.clearViews=function(){this.rowViews=[]},t.prototype.calculateMinimumAmount=function(e,t){return Math.max(e,t)},t.prototype.updateTotalAmount=function(){var e=this.rowViews.reduce(function(e,t){return e+yt.toNumberOrZero(t.amount)},0);this.totalAmount=p(e)},t.prototype.onOrderEntrySettingChange=function(e){e.isEmpty||e===this.dcaPlaceOrderStore.currentOrderEntrySetting||(this.dcaPlaceOrderStore.isNvdr=e.autoNVDRConfiguration.enable),this.dcaPlaceOrderStore.currentOrderEntrySetting=e},t.prototype.checkIfCurrentModeIsMonthly=function(){return this.dcaPlaceOrderStore.frequency===Dt.MONTHLY},t.prototype.checkIfCurrentModeIsWeekly=function(){return this.dcaPlaceOrderStore.frequency===Dt.WEEKLY},t.prototype.submitOrder=function(){var e=this;if(this.validate()){var t=this.generatePlaceOrderRequestParam();this.confirmPlaceOrder(t).then(function(){e.dcaService.placeOrder(t).then(function(t){e.alertService.showDCASubmittedTransactionResultAlert(t,Lo.placeOrder),e.clearForm()},function(t){e.alertService.showErrorAlert(t)})})}},t.prototype.confirmPlaceOrder=function(e){var t=this;return this.dcaService.getCountTransaction(e).then(function(i){var r=angular.extend({},e,i);return r.totalAmountPerOrder=t.totalAmount,t.alertService.showDCAPlaceOrderConfirmAlert(r)})},t.prototype.generatePlaceOrderRequestParam=function(){var e=new Ct;return e.account=this.dcaStore.selectedAccount,e.isNVDR=this.dcaPlaceOrderStore.isNvdr,e.pin=this.getPin(),e.date=this.dcaPlaceOrderStore.date,e.duration=this.dcaPlaceOrderStore.duration,e.frequency=this.dcaPlaceOrderStore.frequency,e.time=this.dcaPlaceOrderStore.time,e.symbolList=[],this.rowViews.forEach(function(t){var i=new Et;i.amount=yt.toNumber(t.amount),i.symbol=t.symbol,e.symbolList.push(i)}),e},t.prototype.getPin=function(){return""+(this.pinService.isSavePin()?this.pinService.pin:this.dcaPlaceOrderStore.pin)},t.prototype.validate=function(){var e=this,t=[];return this.dcaStore.isAccountInitialized()||t.push("Please insert trading account"),0===this.rowViews.length&&t.push("Please select symbol & amount."),this.dcaStore.isAccountInitialized()&&this.dcaStore.isAccountInvalid()?void this.alertService.showErrorAlert("Cannot place order with this account because you don't have permission to get user's account information."):(this.rowViews.forEach(function(i){var r=e.dcaPlaceOrderStore.isNvdr?i.symbol+"-R":i.symbol;yt.toNumber(i.amount)<e.dcaStore.getInitialDataObject().minimumAmount&&t.push(r+": Amount must be equal to or greater than "+yt.formatVolume(e.dcaStore.getInitialDataObject().minimumAmount)+" baht.")}),null===this.dcaPlaceOrderStore.date&&(this.dcaPlaceOrderStore.frequency===Dt.MONTHLY?t.push("Please select order date."):t.push("Please select order day.")),null===this.dcaPlaceOrderStore.time&&t.push("Please select time."),null===this.dcaPlaceOrderStore.duration&&t.push("Please select duration."),this.userInfoService.isInvestor()&&(this.pinService.isSavePin()||null!==this.dcaPlaceOrderStore.pin&&""!==this.dcaPlaceOrderStore.pin||t.push("Please insert PIN.")),0===t.length||(this.alertService.showValidationErrorAlert(t),!1))},t.prototype.clearForm=function(){this.dcaPlaceOrderStore.frequency=Dt.MONTHLY,this.dcaPlaceOrderStore.date=null,this.dcaPlaceOrderStore.duration=null,this.dcaPlaceOrderStore.time=null,this.dcaPlaceOrderStore.isNvdr=!!this.dcaPlaceOrderStore.currentOrderEntrySetting.autoNVDRConfiguration.enable,this.rowViews=[],this.totalAmount="0",this.dcaPlaceOrderStore.selectedSymbols=new To,this.dcaPlaceOrderStore.pin=""+(this.pinService.isSavePin()?this.pinService.pin:"")},t.prototype.isShowPinInput=function(){return this.userInfoService.isInvestor()},t.$inject=["DCAPlaceOrderStore","AlertService","DCAOrderStatusService","DCAService","DCAStore","AccountService","PageService","OrderEntrySettingChangeEvent","PinService","UserInfoService","CurrentAccountDCAChangeEvent"],t}(ys)),xv=function(){function e(){}return e}(),Fv=function(){function e(){}return e.parse=function(t){var i=new e;return i.accountNo=t.accountNo,i.amount=yt.formatVolume(t.amount),i.cancelId=t.cancelId,i.cancelDate=t.cancelDate,i.frequency=t.dcaType,i.durationDate=t.durationDate,i.entryDate=t.entryDate,i.entryId=t.entryId,i.matchedAvgPrice=yt.formatPrice(t.matchedAvgPrice,2),i.matchedVolume=yt.formatVolume(t.matchedVolume),i.meaning=t.meaning,i.policyId=t.policyId,i.time=t.session,i.status=Uv.parse(t.status),i.symbolWithNVDR=""+t.symbol+(t.isNVDR?"-R":""),i.activatedTransactions=[],t.activatedTransactions.forEach(function(e){i.activatedTransactions.push(jv.parse(e))}),i.activatedTransactionCount=i.activatedTransactions.length,i.pendingTransactions=[],t.pendingTransactions.forEach(function(e){i.pendingTransactions.push(jv.parse(e))}),i.pendingTransactionCount=i.pendingTransactions.length,i.totalTransactionsCount=i.pendingTransactionCount+i.activatedTransactionCount,i},e}(),Uv=function(){function e(e,t){this.name=e,this.styleClass=t}return e.parse=function(t){switch(t){case"Waiting":return e.WAITING;case"Activating":return e.ACTIVATING;case"Done":return e.ACTIVATED;case"Cancelled":return e.CANCELLED;case"P-Cancelled":return e.PARTIALLY_CANCELLED}},e.WAITING=new e("Waiting",Gd.YELLOW),e.ACTIVATING=new e("Activating",Gd.YELLOW),e.ACTIVATED=new e("Done",Gd.GREEN),e.CANCELLED=new e("Cancelled",Gd.RED),e.PARTIALLY_CANCELLED=new e("P-Cancelled",Gd.RED),e}(),qv=function(){function e(e){this.type=e}return e.prototype.isWaiting=function(){return this.type===e.WAITING.type},e.prototype.isRejected=function(){return this.type===e.REJECTED.type},e.prototype.isCancelled=function(){return this.type===e.CANCELLED.type},e.prototype.isActivated=function(){return this.type===e.ACTIVATED.type},e.prototype.isActivating=function(){return this.type===e.ACTIVATING.type},e.prototype.isExpired=function(){return this.type===e.EXPIRED.type},e.WAITING=new e("Waiting"),e.REJECTED=new e("Rejected"),e.CANCELLED=new e("Cancelled"),e.ACTIVATING=new e("Activating"),e.ACTIVATED=new e("Activated"),e.EXPIRED=new e("Expired"),e}(),jv=function(){function e(){}return e.parse=function(t){var i,r;switch(t.status){case kt.WAITING:r=new Hv,i=qv.WAITING;break;case kt.ACTIVATING:r=new Kv,i=qv.ACTIVATING;break;case kt.REJECTED:r=new Yv,r.reason=t.reason,i=qv.REJECTED;break;case kt.EXPIRED:r=new Wv,i=qv.EXPIRED;break;case kt.CANCELLED:r=new Wv,i=qv.CANCELLED;break;case kt.ACTIVATED:r=new Gv,r.matchedVolume=void 0===t.matchedVolume?"0":yt.formatVolume(t.matchedVolume),r.matchedPrice=void 0===t.matchedPrice?"0.00":yt.formatPrice(t.matchedPrice,2),i=qv.ACTIVATED}r.activeDate=t.activeDate,r.effectiveDate=t.effectiveDate,r.orderNo=t.orderNo,r.status=t.status;var n=new e;return n.type=i,n.data=r,n},e}(),Hv=function(){function e(){this.statusColor=Gd.YELLOW}return e}(),Wv=function(){function e(){this.statusColor=Gd.RED,this.matchedPrice="0.00",this.matchedVolume="0"}return e}(),Yv=function(){function e(){this.statusColor=Gd.RED}return e}(),Gv=function(){function e(){this.statusColor=Gd.GREEN}return e}(),Kv=function(){function e(){this.statusColor=Gd.YELLOW}return e}(),zv=function(){function e(){}return e}(),Qv=function(){function e(){}return e.getOrderStatusList=function(e,t){for(var i=[],r=0;r<e.length;r++)if(e[r].accountNumber===t.accountNo){for(var n=e[r].policies,o=0;o<n.length;o++)i.push(Yd.parse(n[o]));break}return i},e}(),Xv=function(){function e(e,t,i,r){this.$q=e,this.itpService=t,this.alertService=i,this.userInfoService=r,this._currentAccount=new vi,this._currentAccount.isEmptyAccount=!0,this.currentActiveSymbolMap=new ut((!1))}return e.prototype.setCurrentAccount=function(e){this.clearDetail(),this._currentAccount=e,this.updateUserDetail()},e.prototype.clearDetail=function(){this.currentActiveSymbolMap=new ut((!1)),this.currentOrderStatusList=[]},Object.defineProperty(e.prototype,"currentAccount",{get:function(){return this._currentAccount},enumerable:!0,configurable:!0}),e.prototype.updateUserDetail=function(){this.userInfoService.isInvestor()?this.updateInvestorUserDetail():this.userInfoService.isMarketRep()&&this.updateMktUserDetail()},e.prototype.updateInvestorUserDetail=function(){var e=this;this.currentActiveSymbolMap=new ut((!1)),this.getInvestorUserDetail().then(function(t){var i=t.currentAccActivePolicies.concat(t.otherAccActivePolicies);i.forEach(function(t){e.currentActiveSymbolMap.add(t,!0)}),e.currentOrderStatusList=Qv.getOrderStatusList(t.userPolicies,e._currentAccount)},function(t){e.alertService.showErrorAlert(t.errorMsg)})},e.prototype.getInvestorUserDetail=function(){var e=this;return this.itpService.getUserDetail(this._currentAccount).then(function(t){var i=t;return void 0!==i.errorMsg?e.$q.reject(i):e.$q.resolve(t)})},e.prototype.updateMktUserDetail=function(){var e=this;this._currentAccount.isEmptyAccount||(this.currentActiveSymbolMap=new ut((!1)),this.getMktUserDetail().then(function(t){t.currentAccActivePolicies.forEach(function(t){e.currentActiveSymbolMap.add(t,!0)}),e.currentOrderStatusList=t.currentAccPolicies.map(function(e){return Yd.parse(e)})},function(t){e.alertService.showErrorAlert(t.errorMsg)}))},e.prototype.getMktUserDetail=function(){var e=this;return this.itpService.getMktUserDetail(this._currentAccount).then(function(t){var i=t;return void 0!==i.errorMsg?e.$q.reject(i):e.$q.resolve(t)})},e.prototype.getOrderDetail=function(e){var t=this,i=function(e){var i=e;return void 0!==i.errorMsg?t.$q.reject(i):t.$q.resolve(e)};return this.userInfoService.isInvestor()?this.itpService.getDCAPolicyDetail(e).then(function(e){return i(e)}):this.userInfoService.isMarketRep()?this.itpService.getDCAMktPolicyDetail(e).then(function(e){return i(e)}):void 0},e.prototype.cancelOrderRequest=function(e){var t=this,i=function(e){var i=e;if(void 0!==i.errorMsg){var r=i.errorMsg.split(":");return 1===r.length?t.$q.reject(i.errorMsg):t.$q.resolve(t.parseCancelOrderResponse(i.errorMsg))}return t.$q.resolve(t.parseCancelOrderResponse(e.message))};return this.userInfoService.isInvestor()?this.itpService.cancelDCAPolicy(e).then(function(e){return i(e)}):this.userInfoService.isMarketRep()?this.itpService.cancelDCAMktPolicy(e).then(function(e){return i(e)}):void 0},e.prototype.parseCancelOrderResponse=function(e){var t=[],i=e.split("\n");return i.forEach(function(e){var i=e.split(":"),r=new $o;r.symbol=i[0].trim(),r.result=i[1].trim(),t.push(r)}),t},e.$inject=["$q","ITPService","AlertService","UserInfoService"],e}(),Jv=function(){function e(){}return e}(),Zv=function(){function e(){}return e.prototype.onUpdate=function(e){this.onAccountChange({model:e})},e.$inject=[],e}(),ef=function(){function e(){}return e.prototype.onUpdate=function(e){this.onAccountChange({model:e})},e.prototype.$onChanges=function(e){e.data&&console.log(e)},e.$inject=[],e}();angular.module("dca",["web-api"]).component("dcaPage",{templateUrl:"assets/pages/dca/dca-page.html",controller:Cv,bindings:{page:"@"}}).component("dcaContainer",{template:i(/*! ../../html/dca/dca-container.html */241),controller:wv,bindings:{page:"@"}}).component("dcaBackTest",{template:i(/*! ../../html/dca/dca-back-test.html */242),controller:$v,bindings:{page:"@"}}).component("dcaPlaceOrder",{template:i(/*! ../../html/dca/dca-place-order.html */243),controller:Lv,bindings:{page:"@"}}).component("dcaPlaceOrderForm",{template:i(/*! ../../html/dca/dca-place-order-form.html */244),controller:Bv,bindings:{page:"@"}}).component("dcaPlaceOrderSymbolRow",{template:i(/*! ../../html/dca/dca-place-order-symbol-row.html */245),controller:Rv,bindings:{page:"@",symbol:"<",amount:"=",onAmountChanged:"&",calculatedMinimumAmount:"<"}}).component("dcaOrderStatus",{template:i(/*! ../../html/dca/dca-order-status.html */246),controller:Nv,bindings:{page:"@"}}).component("dcaOrderStatusRow",{template:i(/*! ../../html/dca/dca-order-status-row.html */247),controller:Mv,bindings:{page:"@",data:"<"}}).component("dcaOrderDetail",{template:i(/*! ../../html/dca/dca-order-detail.html */248),controller:xv,bindings:{page:"@",view:"<"}}).component("dcaOrderDetailTransactionRow",{template:i(/*! ../../html/dca/dca-order-detail-transaction-row.html */249),controller:zv,bindings:{page:"@",view:"<"}}).component("dcaRejectedTransactionDetailRow",{template:i(/*! ../../html/dca/dca-rejected-transaction-detail-row.html */250),controller:Jv,bindings:{viewData:"<"}}).component("dcaActivatedTransactionDetailRow",{template:i(/*! ../../html/dca/dca-activated-transaction-detail-row.html */251),controller:Jv,bindings:{viewData:"<"}}).component("dcaCancelledTransactionDetailRow",{template:i(/*! ../../html/dca/dca-activated-transaction-detail-row.html */251),controller:Jv,bindings:{viewData:"<"}}).component("dcaExpiredTransactionDetailRow",{template:i(/*! ../../html/dca/dca-activated-transaction-detail-row.html */251),controller:Jv,bindings:{viewData:"<"}}).component("dcaWaitingTransactionDetailRow",{template:i(/*! ../../html/dca/dca-waiting-transaction-detail-row.html */252),controller:Jv,bindings:{viewData:"<"}}).component("dcaActivatingTransactionDetailRow",{template:i(/*! ../../html/dca/dca-waiting-transaction-detail-row.html */252),controller:Jv,bindings:{viewData:"<"}}).component("dcaPlaceOrderInvestorAccount",{template:i(/*! ../../html/dca/dca-place-order-investor-account.html */253),controller:Zv,bindings:{selectedAccount:"<",onAccountChange:"&",authorizedAccounts:"<"}}).component("dcaPlaceOrderMktrepAccount",{template:i(/*! ../../html/dca/dca-place-order-mktrep-account.html */254),controller:ef,bindings:{selectedAccountNo:"=",onAccountChange:"&"}}).service("DCAService",Vv).service("DCAStore",Av).service("DCAPlaceOrderStore",_v).service("DCAOrderStatusService",Xv);var tf=function(){function e(){}return e.parse=function(e){var t=[];return e.forEach(function(e){var i=new Ou;i.id=e.id||"",i.name=e.name||"",i.underlying=e.underlying||"",e.underlying=e.underlying||"";var r=e.underlying.split(" "),n=r.length>=1?r[0]:"";if(n=n.replace(/\./g,""),n=n.trim(),n=n.length>6?n.substr(0,6)+"...":n,void 0!==e.lastSavedTimestamp&&0!==e.lastSavedTimestamp){var o=moment(new Date(e.lastSavedTimestamp));i.lastSavedTimestamp=o.format("DD/MM/YY, HH:mm:ss"),i.showUnderlying=": "+n,i.showLastSavedTimestamp="("+i.lastSavedTimestamp+")"}else i.lastSavedTimestamp="",i.showLastSavedTimestamp="",i.showUnderlying="";i.simulatedList=[],e.simulatedList&&e.simulatedList.length>0&&e.simulatedList.forEach(function(e,t){var r=new Du;r.index=t,r.simulatedIndex=t,r.cost=e.cost,r.position=Ye.lookup[e.position],r.settle=e.settle,r.side=Be.lookup[e.side],r.symbol=e.symbol,r.type=Pu.SIMULATED,r.volume=e.volume,r.isChecked=e.isChecked,i.simulatedList.push(r)}),t.push(i)}),t},e}(),rf=function(e){function t(t){var i=e.call(this,t)||this;return i.isActive=!1,i}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.isActive=!0},t.prototype.stopService=function(){this.isActive=!1},t.$inject=["PageService"],t}(ys),nf=function(e){function t(t){var i=e.call(this)||this;return i.orderProcessor=t,i}return ne(t,e),t.prototype.startService=function(){},t.prototype.stopService=function(){},t.$inject=["OrderProcessor"],t}(Ss),of=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Zu),sf=function(e){function t(t,i){var r=e.call(this,t)||this;return r.orderStatusService=i,r.PLACE_NORMAL_TAB_ID=0,r.TFEX_PLACE_ORDER_SOURCE_ID=ya.TFEX,r.activePage=r.PLACE_NORMAL_TAB_ID,r}return ne(t,e),t.prototype.startService=function(){},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.prototype.isActive=function(e){return this.activePage===e},t.$inject=["PageService","OrderStatusService"],t}(ys),af=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t)||this;return a.pageService=t,a.currentAccountChangeEvent=i,a.accountService=r,a.alertService=n,a.refreshEvent=o,a.refreshAccountEvent=s,a.onReceiveRefreshEventCallback=a.onReceiveRefreshEvent.bind(a),a.accountList=[],a.accountFullName="",a}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.initAccountDropdownList(),this.setSelectedAccountWithDerivativesDefaultAccount(),this.currentAccountChangeEvent.getCurrentAccount().isDerivatives()||this.currentAccountChangeEvent.publish(this.selectedAccount),this.getAccountInfo(this.selectedAccount),this.getAccountName(this.selectedAccount),this.refreshEvent.subscribe(this.onReceiveRefreshEventCallback),this.refreshAccountEvent.subscribe(this.onReceiveRefreshEventCallback)},t.prototype.stopService=function(){this.refreshEvent.unsubscribe(this.onReceiveRefreshEventCallback),this.refreshAccountEvent.unsubscribe(this.onReceiveRefreshEventCallback)},t.prototype.onReceiveRefreshEvent=function(){this.selectedAccount&&(this.clearAccountInfo(),this.getAccountInfo(this.selectedAccount),this.getAccountName(this.selectedAccount))},t.prototype.initAccountDropdownList=function(){this.accountList=[];var e=this.accountService.getDefaultDerivativesAccount();this.accountList.push(e)},t.prototype.setSelectedAccountWithDerivativesDefaultAccount=function(){this.accountList.length>0&&(this.selectedAccount=this.accountList[0])},t.prototype.getAccountInfo=function(e){var t=this;this.accountService.requestDerivativeAccountInfo(e.accountNo).then(function(i){i.accountInfo.accountNo===e.accountNo&&(t.accountInfo=Ci.parseDerivativesTfexPage(i.accountInfo,e.frontType,e.accountType))},function(e){e.errorMessage&&t.alertService.showErrorAlert(e.errorMessage)})},t.prototype.getAccountName=function(e){var t=this;this.accountService.requestAccountName(e.accountNo,Qe.DERIVATIVE).then(function(e){t.accountFullName=e.engName})},t.prototype.clearAccountInfo=function(){this.accountInfo=new Ei,this.accountFullName=""},t.$inject=["PageService","CurrentAccountChangeEvent","AccountService","AlertService","RefreshEvent","RefreshAccountEvent"],t}(ys),cf=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f){var y=e.call(this,t,i,r,n,o,s,a,c,l,d,h)||this;return y.$scope=t,y.accountService=i,y.alertService=r,y.initDataEvent=n,y.orderStatusService=o,y.currentAccountChangeEvent=s,y.refreshEvent=a,y.userInfoService=c,y.pinService=l,y.userApplicationProfileService=u,y.refreshAccountEvent=d,y.orderProcessor=h,y.menuService=p,y.globalKeyboardShortcutEvent=m,y.$element=v,y.focus=f,y.authorizedSystemTypes=[Bu.DERIVATIVES],y.selectedSystemType=Bu.DERIVATIVES,y.accountList=[],y}return ne(t,e),t.prototype.$onInit=function(){e.prototype.$onInit.call(this),this.selectedAccount=this.currentAccountChangeEvent.getLatestDerivativesAccount(),void 0!==this.selectedAccount&&""!==this.selectedAccount.accountName||(this.initAccountDropdownList(),this.setSelectedAccountWithDerivativesDefaultAccount(),this.currentAccountChangeEvent.publish(this.selectedAccount),this.onAccountNoChange(this.selectedAccount.accountNo)),this.currentAccountChangeEvent.getCurrentAccount().isDerivatives()||""===this.selectedAccount.accountName||(this.currentAccountChangeEvent.publish(this.selectedAccount),this.onAccountNoChange(this.selectedAccount.accountNo))},t.prototype.onAccountNoChange=function(e){this.clearAccountInfo();var t=new vi;t.accountNo=e,t.systemType=mi.DERIVATIVES,t.frontType=fi.SEOS,e&&""!==e||(t.isEmptyAccount=!0,t.accountNo=""),this.selectedDerivativesAccount=t,this.onAccountChanged(t)},t.prototype.getAccountInfo=function(){var e=this;if(this.selectedAccount&&!this.selectedAccount.isEmptyAccount){this.accountInfoForSelectedAccount=new Ci;var t=angular.copy(this.selectedAccount);this.accountService.requestDerivativeAccountInfo(this.selectedAccount.accountNo).then(function(t){t.accountInfo.accountNo===e.selectedAccount.accountNo&&(e.accountInfoForSelectedAccount=Ci.parseDerivativesTfexPage(t.accountInfo,e.selectedAccount.frontType,e.selectedAccount.accountType))},function(i){i.errorMessage&&(e.alertService.showErrorAlert(i.errorMessage),e.orderStatusService.onDerivativesMarketrepAccountInfoError(t)),i.errorMessage===xu.TRADING_ACCOUNT_NOT_FOUND_DERIVATIVES&&(e.clearSelectedDerivativesAccount(),e.onAccountChanged(e.selectedDerivativesAccount))})}},t.prototype.onReceiveCurrentAccountChangeByOther=function(e){this.isSameAsSelectedAccount(e)||e.isEquity()||(this.selectedDerivativesAccount=e,this.onAccountChangedByOther(e))},t.prototype.isSameAsSelectedAccount=function(e){return this.selectedAccount&&this.selectedAccount.equals(e)},t.prototype.clearSelectedDerivativesAccount=function(){var e=new vi;e.systemType=mi.DERIVATIVES,e.isEmptyAccount=!0,this.selectedDerivativesAccount=e},t.prototype.initAccountDropdownList=function(){this.accountList=[];var e=this.accountService.getDefaultDerivativesAccount();this.accountList.push(e)},t.prototype.setSelectedAccountWithDerivativesDefaultAccount=function(){this.accountList.length>0&&(this.selectedAccount=this.accountList[0])},t.$inject=["$scope","AccountService","AlertService","InitDataEvent","OrderStatusService","CurrentAccountChangeEvent","RefreshEvent","UserInfoService","PinService","UserApplicationProfileService","RefreshAccountEvent","OrderProcessor","MenuService","GlobalKeyboardShortcutEvent","$element","focus"],t}(_u),lf=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S){var b=e.call(this,t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S)||this;return b.placeOrderService=t,b.alertService=i,b.focus=r,b.instrumentService=n,b.userInfoService=o,b.initDataEvent=s,b.snapshotPubsub=a,b.currentSymbolChangeEvent=c,b.refreshEvent=l,b.piwikService=u,b.pinService=d,b.userApplicationProfileService=h,b.orderEntrySettingChangeEvent=p,b.orderProcessor=m,b.menuService=v,b.facebookService=f,b.orderStatusService=y,b.globalKeyboardShortcutEvent=g,b.$element=S,b.priceTypeShortcutMapping=uu.DERIVATIVES_PRICE_TYPE,b.initNextFocusElements(),b}return ne(t,e),t.prototype.startService=function(){e.prototype.startService.call(this),this.pinService.isSavePin()||this.orderProcessor.processPinWhenClearPin()},t.prototype.stopService=function(){e.prototype.stopService.call(this),this.pinService.isSavePin()||this.orderProcessor.processPinWhenClearPin()},t.prototype.initNextFocusElements=function(){this.priceInputNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-pin input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-submit"}],this.stopPriceInputNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"date-input > input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-pin input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-submit"}],this.symbolNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-volume input"}],this.stopSymbolNextFocusElements=[{parent:"tfex-normal-place-order .stop-condition-detail",focusElement:"#tfex-page-cond-order-price price-input input"}],this.volumeInputNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-price input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-pin input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-submit"}],this.icebergVolumeInputNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-pin input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-submit"}],this.stopOrderCheckboxNextFocusElements=["#tfex-page-cond-order-symbol input.main-input"],this.sideNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"symbol-input#tfex-page-place-order-symbol input.main-input"}],this.pinNextFocusElement=[{parent:"tfex-normal-place-order",focusElement:'button[name="tfex-page-submit"]'}],this.dateInputNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"time-input input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-pin input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-submit"}],this.timeInputNextFocusElements=[{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-pin input"},{parent:"tfex-normal-place-order",focusElement:"#tfex-page-place-order-submit"}]},t.prototype.onCurrentSymbolChange=function(e,t,i){if(e.isDerivatives()){var r=this.processChangePriceSide(e,t,i);if(this.isFirstCurrentSymbolChange||this.currentSymbol===e.name.toUpperCase()||(this.orderProcessor.hasLastOrder=!1),
this.currentSymbol!==e.name.toUpperCase()&&(this.orderProcessor.symbol=e.name,this.currentSymbol=e.name,this.getSessionData(e.name),this.subscribeSnapshotService(),this.updateInstrumentStaticData(e.name),!r&&this.orderEntrySetting.autoFillPriceConfiguration.enable)){if(this.orderProcessor.hasLastOrder&&this.isFirstCurrentSymbolChange)return void(this.isFirstCurrentSymbolChange=!1);this.processAutoFillPrice(e.name)}this.isFirstCurrentSymbolChange=!1,r&&this.focusFactory.focusElement(this.element.find("#tfex-page-place-order-volume input"))}},t.prototype.getCheckedCancelOrders=function(){return this.isCanCancel=this.orderStatusService.numberCheckedCancelDerivativesOrder>0,this.orderStatusService.numberCheckedCancelDerivativesOrder},t.$inject=["PlaceOrderService","AlertService","focus","InstrumentService","UserInfoService","InitDataEvent","SnapshotPublishSubscriber","CurrentSymbolChangeEvent","RefreshEvent","PiwikService","PinService","UserApplicationProfileService","OrderEntrySettingChangeEvent","OrderProcessor","MenuService","FacebookService","OrderStatusService","GlobalKeyboardShortcutEvent","$element"],t}(Yu),uf=function(e){function t(t,i,r,n,o,s,a,c){var l=e.call(this,t,i,r,n,o,s,a,c)||this;return l.streamingAttribute=t,l.$window=i,l.userInfoService=r,l.piwikService=n,l.orderProcessor=o,l.orderStatusService=s,l.$element=a,l.$filter=c,l}return ne(t,e),t.$inject=["StreamingAttribute","$window","UserInfoService","PiwikService","OrderProcessor","OrderStatusService","$element","$filter"],t}(Qu),df=function(){function e(e){this.tfexWatchService=e,this.currentToggleColumn1Index=0,this.toggleColumn1List=al.TFEX_WATCH_LIST,this.selectedVolByPriceTab=Yp.FIRST}return e.prototype.initialStore=function(e){this.currentWatchMode=Dc.Favourite,this.tfexPageData=e,this.currentToggleColumn1Index=this.getCurrentToggleColumnIndex(e.watchTab.selectedWatchListDynamicColumn)},e.prototype.initialFavouriteDropdownList=function(e){this.favouriteDropDownList=e,this.selectedFavouriteDropdown=this.favouriteDropDownList[0]},e.prototype.initialTfexFuturesDropdownList=function(e){this.futruesDropDownList=e,this.selectedFuturesDropdown=this.getRequestFuturesOptionsDropdownItem(e)},e.prototype.initialTfexOptionsDropdownList=function(e){this.optionsDropDownList=e,this.selectedOptionsDropdown=this.getRequestFuturesOptionsDropdownItem(e),this.selectedOptionsListMode=this.getOptionListMode(this.tfexPageData.watchTab.selectedOptionsListMode)},e.prototype.getRequestFuturesOptionsDropdownItem=function(e){var t;return e.some(function(e,i,r){if(e.type===ue.GROUP){var n=e.childs;n.some(function(e,i,r){if(e.type===ue.REQUEST)return t=e,!0})}else t=e;return!0}),t},e.prototype.getCurrentToggleColumnIndex=function(e){var t=al.lookup[e],i=0;return t&&al.TFEX_WATCH_LIST.some(function(e,r){if(e===t)return i=r,!0}),i},e.prototype.updateCurrentToggleColumnIndexToMongo=function(){var e=this.toggleColumn1List[this.currentToggleColumn1Index];this.tfexPageData.watchTab.selectedWatchListDynamicColumn=""+e,this.tfexWatchService.updateTfexWatchPageData(this.tfexPageData.watchTab)},e.prototype.updateOptionsListModeToMongo=function(){if(this.selectedOptionsListMode){var e=this.selectedOptionsListMode;this.tfexPageData.watchTab.selectedOptionsListMode=e.key,this.tfexWatchService.updateTfexWatchPageData(this.tfexPageData.watchTab)}},e.prototype.getOptionListMode=function(e){return""!==e&&e?Pc.lookup[e]:Pc.PRICE},e.$inject=["TfexWatchService"],e}(),hf=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.pageService=t,n.tfexWatchStore=i,n.watchModeChangeEvent=r,n.OPTIONS_BY_PRICE=Pc.PRICE,n.OPTIONS_BY_VOLATILITY=Pc.VOLATILITY,n.optionsListMode=Pc.LIST,n}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){switch(this.tfexWatchStore.currentWatchMode){case Dc.Favourite:this.changeCurrentModeToFavourite(this.tfexWatchStore.selectedFavouriteDropdown);break;case Dc.Derivative:this.tfexWatchStore.currentWatchModeSelector===Tc.FUTURES?this.changeCurrentModeToFutures(this.tfexWatchStore.selectedFuturesDropdown):this.changeCurrentModeToOptions(this.tfexWatchStore.selectedOptionsDropdown);break;case Dc.OptionsList:this.changeCurrentOptionsListMode(this.tfexWatchStore.selectedOptionsListMode);break;default:this.changeCurrentModeToFavourite(this.tfexWatchStore.selectedFavouriteDropdown)}},t.prototype.stopService=function(){},t.prototype.changeCurrentModeToFavourite=function(e){switch(this.tfexWatchStore.currentWatchModeSelector=Tc.Favourite,e.mode){case yr.FAVOURITE:this.tfexWatchStore.currentWatchMode=Dc.Favourite;break;case yr.MY_PORT:this.tfexWatchStore.currentWatchMode=Dc.MyPort}this.tfexWatchStore.selectedFavouriteDropdown=e;var t=new Oc(this.tfexWatchStore.currentWatchMode,null,this.tfexWatchStore.selectedFavouriteDropdown,null);this.watchModeChangeEvent.publish(this.page,t)},t.prototype.changeCurrentModeToFutures=function(e){this.tfexWatchStore.currentWatchModeSelector=Tc.FUTURES,this.tfexWatchStore.currentWatchMode=Dc.Derivative,this.tfexWatchStore.selectedFuturesDropdown=this.getTfexFuturesOptionsChildCategory(e);var t=new Oc(this.tfexWatchStore.currentWatchMode,this.tfexWatchStore.selectedFuturesDropdown,null,null);this.watchModeChangeEvent.publish(this.page,t)},t.prototype.changeCurrentModeToOptions=function(e){this.tfexWatchStore.currentWatchModeSelector=Tc.OPTIONS,e.type===ue.OPTION_REQUEST?this.tfexWatchStore.currentWatchMode=Dc.OptionsList:this.tfexWatchStore.currentWatchMode=Dc.Derivative,this.tfexWatchStore.selectedOptionsDropdown=this.getTfexFuturesOptionsChildCategory(e);var t=new Oc(this.tfexWatchStore.currentWatchMode,this.tfexWatchStore.selectedOptionsDropdown,null,null);e.type===ue.OPTION_REQUEST&&(t.optionsListMode=this.tfexWatchStore.selectedOptionsListMode),this.watchModeChangeEvent.publish(this.page,t)},t.prototype.changeCurrentOptionsListMode=function(e){this.tfexWatchStore.selectedOptionsListMode=e;var t=new Oc(this.tfexWatchStore.currentWatchMode,this.tfexWatchStore.selectedOptionsDropdown,null,this.tfexWatchStore.selectedOptionsListMode);this.watchModeChangeEvent.publish(this.page,t),this.tfexWatchStore.updateOptionsListModeToMongo()},t.prototype.getTfexFuturesOptionsChildCategory=function(e){var t;if(e.type===ue.GROUP){var i=e.childs;i.some(function(e,i,r){if(e.type===ue.REQUEST)return t=e,!0})}else t=e;return t},t.prototype.onSelectedFavorite=function(){this.changeCurrentModeToFavourite(this.tfexWatchStore.selectedFavouriteDropdown)},t.prototype.onSelectedFutures=function(){this.changeCurrentModeToFutures(this.tfexWatchStore.selectedFuturesDropdown)},t.prototype.onSelectedOptions=function(){this.changeCurrentModeToOptions(this.tfexWatchStore.selectedOptionsDropdown)},t.prototype.isWatchListMode=function(){return this.tfexWatchStore.currentWatchMode===Dc.MyPort||this.tfexWatchStore.currentWatchMode===Dc.Favourite||this.tfexWatchStore.currentWatchMode===Dc.Equity||this.tfexWatchStore.currentWatchMode===Dc.Derivative},t.prototype.isOptionsListMode=function(){return this.tfexWatchStore.currentWatchMode===Dc.OptionsList},Object.defineProperty(t.prototype,"selectedOptionsListMode",{get:function(){return this.tfexWatchStore.selectedOptionsListMode?this.tfexWatchStore.selectedOptionsListMode.key:Pc.PRICE.key},set:function(e){var t=Pc.lookup[""+e];this.tfexWatchStore.selectedOptionsListMode=t},enumerable:!0,configurable:!0}),t.$inject=["PageService","TfexWatchStore","WatchModeChangeEvent"],t}(ys),pf=function(){function e(e){this.mongoService=e}return e.prototype.updateTfexWatchPageData=function(e){return this.mongoService.updateTfexWatchPageData(e)},e.$inject=["MongoService"],e}(),mf=function(){function e(){}return e}(),vf=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this,t,u)||this;return d.pageService=t,d.tfexStore=i,d.$window=r,d.urlStore=n,d.streamingAttribute=o,d.menuService=s,d.facebookService=a,d.userInfoService=c,d.currentAccountChangeEvent=l,d.screenTrackerService=u,d.WATCH_TAB_ID=0,d.PAYOFF_CHART_TAB_ID=1,d.OPTIONS_SUMMARY_TAB_ID=2,d.onAccountChangeCallBack=d.onAccountChange.bind(d),d}return ne(t,e),t.prototype.startService=function(){var e=this.tfexStore.selectedTfexTab;e||(e=this.WATCH_TAB_ID),this.currentAccountChangeEvent.subscribe(this.onAccountChangeCallBack),this.facebookService.subPageTrack(this.menuService.getCurrentMenuName(),this.getTabName(e)),this.changeToPage()},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onAccountChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onAccountChange=function(e){this.currentAccount=e},Object.defineProperty(t.prototype,"active",{get:function(){return this.tfexStore.selectedTfexTab||(this.tfexStore.selectedTfexTab=this.WATCH_TAB_ID),this.tfexStore.selectedTfexTab},set:function(e){this.tfexStore.selectedTfexTab=e},enumerable:!0,configurable:!0}),t.prototype.getAccountNoWhenIsMarketRep=function(){return this.userInfoService.isMarketRep()?void 0===this.currentAccount.accountNo?"":this.currentAccount.accountNo:""},t.prototype.getUrlMarginRate=function(){return this.userInfoService.isMarketRep()?this.urlStore.ITPD_MARGIN_RATE:this.urlStore.ITPD_MARGIN_INFO_URL},t.prototype.showMarginRate=function(){this.$window.open(""+this.streamingAttribute.derivHost+this.getUrlMarginRate()+this.getAccountNoWhenIsMarketRep(),"_blank","scrollbars=yes,resizable=yes,height=420,width=720")},t.prototype.getUrlMarginSimulation=function(){return this.userInfoService.isMarketRep()?this.urlStore.ITPD_MARGIN_SIMULATION:this.urlStore.ITPD_MARGIN_SIM_URL},t.prototype.showMarginSim=function(){this.popupWindow&&this.popupWindow.close(),this.popupWindow=this.$window.open(""+this.streamingAttribute.derivHost+this.getUrlMarginSimulation()+this.getAccountNoWhenIsMarketRep(),"_blank","scrollbars=yes,resizable=yes,height=580,width=780")},t.prototype.getTabName=function(e){switch(e){case this.WATCH_TAB_ID:return"Watch";case this.PAYOFF_CHART_TAB_ID:return"Payoff Chart";case this.OPTIONS_SUMMARY_TAB_ID:return"Options Summary";default:return"Watch"}},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.getAnalyticsScreenName=function(){switch(this.active){case this.WATCH_TAB_ID:return ss.TFEX_WATCH;case this.PAYOFF_CHART_TAB_ID:return ss.TFEX_PAYOFF_CHART;case this.OPTIONS_SUMMARY_TAB_ID:return ss.TFEX_OPTIONS_SUMMARY;default:return ss.TFEX_WATCH}},t.prototype.onClickTab=function(){this.changeToPage()},t.prototype.onClickWatchTab=function(){this.facebookService.subPageTrack(this.menuService.getCurrentMenuName(),this.getTabName(this.WATCH_TAB_ID))},t.prototype.onClickPayoffChartTab=function(){this.facebookService.subPageTrack(this.menuService.getCurrentMenuName(),this.getTabName(this.PAYOFF_CHART_TAB_ID))},t.prototype.onClickOptionsSummaryTab=function(){this.facebookService.subPageTrack(this.menuService.getCurrentMenuName(),this.getTabName(this.OPTIONS_SUMMARY_TAB_ID))},t.$inject=["PageService","TfexStore","$window","URLStore","StreamingAttribute","MenuService","FacebookService","UserInfoService","CurrentAccountChangeEvent","ScreenTrackerService"],t}(Zs),ff=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(_l),yf=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.pageService=t,n.userInfoService=i,n.tfexWatchStore=r,n.NON_TAB_ID=-1,n.CHART_TAB_ID=1,n.VOL_BY_PRICE_TAB_ID=2,n.TICKER_TAB_ID=3,n.INSTRUMENT_TICKER_ID=4,n}return ne(t,e),t.prototype.startService=function(){},t.prototype.stopService=function(){},Object.defineProperty(t.prototype,"active",{get:function(){return this.tfexWatchStore.selectedMiniQuoteTab?this.tfexWatchStore.selectedMiniQuoteTab:this.CHART_TAB_ID},set:function(e){this.tfexWatchStore.selectedMiniQuoteTab=e},enumerable:!0,configurable:!0}),t.prototype.viewDidLoad=function(){},t.$inject=["PageService","UserInfoService","TfexWatchStore"],t}(ys),gf=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.pageService=t,n.tfexWatchStore=i,n.watchModeChangeEvent=r,n.onWatchModeChangeCallback=n.onWatchModeChange.bind(n),n.seriesId="",n}return ne(t,e),t.prototype.startService=function(){this.watchModeChangeEvent.subscribe(this.page,this.onWatchModeChangeCallback)},t.prototype.stopService=function(){this.watchModeChangeEvent.unsubscribe(this.page,this.onWatchModeChangeCallback)},t.prototype.viewDidLoad=function(){},t.prototype.onWatchModeChange=function(e){this.seriesId=e.currentCategory&&e.currentCategory.optionRequest?e.currentCategory.optionRequest.underlyingSeries:""},t.prototype.setOptionsLastTradingDate=function(e){this.optionsLastTradingDay=e},t.$inject=["PageService","TfexWatchStore","WatchModeChangeEvent"],t}(ys),Sf=(function(){function e(){}return e}(),function(){function e(e,t,i){this.colorService=e,this.instrumentInfoPublishSubscriber=t,this.instrumentService=i,this.onReceiveInfoCallBack=this.onReceiveInfo.bind(this),this.overview=new _i}return e.prototype.$onChanges=function(e){e.symbol&&(e.symbol.isFirstChange()||this.instrumentInfoPublishSubscriber.unsubscribe(e.symbol.previousValue,this.onReceiveInfoCallBack),this.overview=new _i,this.instrumentInfoPublishSubscriber.subscribe(e.symbol.currentValue,Hr.Intraday,this.onReceiveInfoCallBack))},e.prototype.$onDestroy=function(){this.instrumentInfoPublishSubscriber.unsubscribe(this.symbol,this.onReceiveInfoCallBack)},e.prototype.onReceiveInfo=function(e){e.instrumentType===ce.INDEX?this.overview=Bi.parseIndex(e,this.overview):this.overview=Bi.parseDerivatives(e,this.overview),this.overview&&(this.overview.tsLevel=this.instrumentService.getTSLevel(this.symbol))},e.$inject=["ColorService","InstrumentInfoPublishSubscriber","InstrumentService"],e}()),bf=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t)||this;return a.pageService=t,a.intradayChartPubSub=i,a.$element=r,a.currentSymbolChangeEvent=n,a.instrumentService=o,a.timeService=s,a.onReceiveIntradayChartCallBack=a.onReceiveIntradayChart.bind(a),a.onCurrentSymbolChangeCallBack=a.onCurrentSymbolChange.bind(a),a.multipleCompareChartProcessor=new Cf(a.onWriteChart.bind(a)),a}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.currentInstrument&&this.unsubscribeCurrentInstrument(),this.clearChart(),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentSymbolChange=function(e){this.currentInstrument&&this.currentInstrument.name===e.name||(this.clearChart(),this.currentInstrument&&this.unsubscribeCurrentInstrument(),this.currentInstrument=e,this.subscribeNewInstrument(e))},t.prototype.subscribeNewInstrument=function(e){var t=this;e.isFuturesWithUnderlying()?this.instrumentService.validateUnderlyingSymbol(e.underlying).then(function(i){t.multipleCompareChartProcessor.initiateAsMultiPleChart(e.name,i.name),t.intradayChartPubSub.subscribeCompareChart(e.name,i.name,pe.PRICE,t.onReceiveIntradayChartCallBack)},function(){t.multipleCompareChartProcessor.initiateAsSingleChart(e.name),t.intradayChartPubSub.subscribe(e.name,pe.PRICE,t.onReceiveIntradayChartCallBack)}):(this.multipleCompareChartProcessor.initiateAsSingleChart(e.name),this.intradayChartPubSub.subscribe(e.name,pe.PRICE,this.onReceiveIntradayChartCallBack))},t.prototype.unsubscribeCurrentInstrument=function(){this.multipleCompareChartProcessor.isMultipleMode&&""!==this.multipleCompareChartProcessor.primarySymbol?this.intradayChartPubSub.unsubscribeCompareChart(this.multipleCompareChartProcessor.primarySymbol,this.multipleCompareChartProcessor.underlyingSymbol,pe.PRICE,this.onReceiveIntradayChartCallBack):""!==this.multipleCompareChartProcessor.primarySymbol&&this.intradayChartPubSub.unsubscribe(this.multipleCompareChartProcessor.primarySymbol,pe.PRICE,this.onReceiveIntradayChartCallBack)},t.prototype.onReceiveIntradayChart=function(e){this.multipleCompareChartProcessor.onRecieveInfo(e)},t.prototype.onWriteChart=function(e){this.clearChart();var t;t=e.isMultipleMode?Ml.mergeCompareChart(e.primaryData,e.underlyingData):Ml.parse(e.primaryData),this.chart=new AmCharts.AmSerialChart,this.chart.path="assets/amcharts",this.chart.marginTop=10,this.chart.marginRight=10,this.chart.autoMargins=!0,this.chart.dataProvider=t.pointData,this.chart.categoryField="label",this.chart.balloon.cornerRadius=6,this.chart.responsive={enabled:!1};var i=this.getTime();this.chart.allLabels=[{color:"#696969",text:"Last Update "+i,x:"56%",y:"-2.5%",bold:!1}];var r=this.chart.categoryAxis;r.parseDates=!1,r.minPeriod="mm",r.axisThickness=.5,r.minorGridEnabled=!1,r.axisColor="#DADADA",r.color="#DADADA",r.gridAlpha=0,r.forceShowField="forceShowField",r.labelFunction=function(e,t,i){if(t.dataContext.forceShowField)return t.dataContext.forceShowLabel};for(var n,o=t.vLines,s=0;s<o.length;s++)n=new AmCharts.Guide,n.category=o[s].catagoryValue,n.lineColor="#DADADA",n.lineAlpha=.3,n.dashLength=0,n.inside=!0,r.addGuide(n);var a=new AmCharts.ValueAxis;a.dashLength=0,a.inside=!1,a.color="#DADADA",a.gridColor="#DADADA";var c=new AmCharts.ChartCursor;if(c.cursorAlpha=1,c.cursorPosition="mouse",c.categoryBalloonDateFormat="YYYY",c.graphBulletSize=3,this.chart.addChartCursor(c),this.chart.creditsPosition="bottom-right",e.isMultipleMode){var l=new AmCharts.Guide;l.value=t.primaryPrevClose,l.lineColor="#DABC47",l.lineAlpha=1,l.dashLength=2,l.inside=!0,l.position="right",l.above=!0,l.gridCount=3,a.addGuide(l),this.chart.addValueAxis(a);var u=new AmCharts.AmGraph;u.lineColor="#f6bf23",u.fillColors="#f6bf23",u.fillAlphas=.3,u.connect=!1,u.lineThickness=1.5,u.valueField="valuePrimary",u.balloonFunction=function(e,i,r){return"Price: <b>"+yt.formatPrice(e.dataContext.valuePrimary,t.primaryPriceDigit)+"</b>"},u.balloon=new AmCharts.AmBalloon,u.balloon.fillAlpha=.8,this.chart.addGraph(u);var d=new AmCharts.Guide;d.value=t.underlyingPrevClose,d.lineColor="#58ACFA",d.lineAlpha=1,d.dashLength=2,d.inside=!0,d.position="right",d.above=!0,d.gridCount=3,a.addGuide(d),this.chart.addValueAxis(a);var h=new AmCharts.AmGraph;h.lineColor="#58ACFA",h.fillColors="#58ACFA",h.fillAlphas=.3,h.connect=!1,h.lineThickness=1.5,h.valueField="valueUnderlying",h.balloonFunction=function(e,i,r){return"Price: <b>"+yt.formatPrice(e.dataContext.valueUnderlying,t.underlyingPriceDigit)+"</b>"},h.balloon=new AmCharts.AmBalloon,h.balloon.fillAlpha=.8,this.chart.addGraph(h)}else{var l=new AmCharts.Guide;l.value=t.prevClose,l.lineColor="#DABC47",l.lineAlpha=1,l.dashLength=2,l.inside=!0,l.position="right",l.above=!0,l.gridCount=3,a.addGuide(l),this.chart.addValueAxis(a);var u=new AmCharts.AmGraph;u.lineColor="#f6bf23",u.fillColors="#f6bf23",u.fillAlphas=.3,u.connect=!1,u.lineThickness=1.5,u.valueField="value",u.balloonFunction=function(e,i,r){return"Price: <b>"+yt.formatPrice(e.dataContext.value,t.priceDigit)+"</b>"},this.chart.addGraph(u)}this.chart.write(this.$element[0])},t.prototype.clearChart=function(){this.chart&&this.chart.clear()},t.prototype.getTime=function(){var e=this.timeService.getTime();if(!e.isTimeSync)return"";var t=e.syncDate;return t.format("HH:mm:ss")},t.$inject=["PageService","IntradayChartPublishSubscriber","$element","CurrentSymbolChangeEvent","InstrumentService","TimeService"],t}(ys),Cf=function(){function e(e){this.callback=e,this.underlyingSymbol="",this.primarySymbol=""}return e.prototype.initiateAsSingleChart=function(e){this.primarySymbol=e,this.underlyingSymbol="",this.primaryData=void 0,this.underlyingData=void 0,this.isMultipleMode=!1},e.prototype.initiateAsMultiPleChart=function(e,t){this.primarySymbol=e,this.underlyingSymbol=t,this.primaryData=void 0,this.underlyingData=void 0,this.isMultipleMode=!0},e.prototype.onRecieveInfo=function(e){if(e.instrumentID.toUpperCase()===this.primarySymbol.toUpperCase()&&(this.primaryData=e),e.instrumentID.toUpperCase()===this.underlyingSymbol.toUpperCase()&&(this.underlyingData=e),this.primaryData&&this.underlyingData&&this.isMultipleMode){var t=new Ef;t.primaryData=this.primaryData,t.underlyingData=this.underlyingData,t.isMultipleMode=this.isMultipleMode,this.callback(t)}if(this.primaryData&&!this.isMultipleMode){var t=new Ef;t.primaryData=this.primaryData,t.isMultipleMode=this.isMultipleMode,this.callback(t)}},e}(),Ef=function(){function e(){}return e}(),Af=function(){function e(){}return e}(),wf=function(){function e(){this.mainSymbol=new Af,this.underlyingSymbol=new Af,this.set50Symbol=new Af}return e}(),Tf=function(){function e(){}return e.initiateView=function(e,t,i){var r;r=i,i.mainSymbol.name=e.name,i.volumeLabel="Vol",e.isDerivatives()?i.dynamicLabel="Prev. OI":i.dynamicLabel="Value(K)",t.isEmpty()||(i.underlyingSymbol.name=t.name),e.isOptions()&&(i.set50Symbol.name=".SET50")},e.parseMainSymbolDerivatives=function(e,t){var i;return i=t,i.mainSymbol.name=e.instrumentID,i.mainSymbol.priceDigit=e.priceDigit,e.hasInitMarketData()&&(i.mainSymbol.previousClose=e.initMarketData.previousSettle),e.hasSummaryData()&&(i.mainSymbol.change=e.summaryData.change,i.mainSymbol.percentChange=e.summaryData.percentChange,i.mainSymbol.lastDone=e.summaryData.lastDone,i.mainSymbol.totalVolume=e.summaryData.totalVolume,i.volume=e.summaryData.totalVolume,i.dynamicValue=e.summaryData.openInterest),i},e.parseMainSymbolEquity=function(e,t){var i;return i=t,i.mainSymbol.name=e.instrumentID,i.mainSymbol.priceDigit=2,e.hasInitMarketData()&&(i.mainSymbol.previousClose=e.initMarketData.previousClose),e.hasSummaryData()&&(i.mainSymbol.change=e.summaryData.change,i.mainSymbol.percentChange=e.summaryData.percentChange,i.mainSymbol.lastDone=e.summaryData.lastDone,i.mainSymbol.totalVolume=e.summaryData.totalVolume,i.volume=e.summaryData.totalVolume,i.dynamicValue=e.summaryData.equityTotalValue),i},e.parseMainSymbolIndex=function(e,t){var i;return i=this.parseMainSymbolEquity(e,t),i.mainSymbol.name=Xi.displayForm(e.instrumentID),e.hasSummaryData()&&(i.dynamicValue=e.summaryData.indexTotalValue),i},e.parseUnderlyingSymbol=function(e,t){var i;return i=t,i.underlyingSymbol.priceDigit=e.priceDigit,e.hasInitMarketData()&&(i.underlyingSymbol.previousClose=e.initMarketData.previousClose),e.hasSummaryData()&&(i.underlyingSymbol.change=e.summaryData.change,i.underlyingSymbol.percentChange=e.summaryData.percentChange,i.underlyingSymbol.totalVolume=e.summaryData.totalVolume,i.underlyingSymbol.lastDone=e.summaryData.lastDone),i},e.parseSET50UnderlyingSymbol=function(e,t){var i;return i=t,i.set50Symbol.priceDigit=e.priceDigit,e.hasInitData()&&(i.set50Symbol.previousClose=e.initData.previousClose),e.hasSummaryData()&&(i.set50Symbol.change=e.summary.change,i.set50Symbol.percentChange=e.summary.percentChange,i.set50Symbol.totalVolume=e.summary.totalVolume,i.set50Symbol.lastDone=e.summary.lastDone),i},e}(),Df=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this,t)||this;return c.pageService=t,c.instrumentInfoPublishSubscriber=i,c.snapshotPublishSubscriber=r,c.currentSymbolChangeEvent=n,c.instrumentService=o,c.$q=s,c.colorService=a,c.onCurrentSymbolChangeCallback=c.onCurrentSymbolChange.bind(c),c.onReceiveMainInstrumentInfoCallback=c.onReceiveMainInstrumentInfo.bind(c),c.onReceiveSET50SnapshotCallback=c.onReceiveSET50Snapshot.bind(c),c.onReceiveUnderlyingInstrumentInfoCallback=c.onReceiveUnderlyingInstrumentInfo.bind(c),c.detailView=new wf,c.currentSymbol=dt.empty(),c.currentUnderlyingSymbol=dt.empty(),c}return ne(t,e),t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallback)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallback),this.unsubscribeCurrentData()},t.prototype.viewDidLoad=function(){},t.prototype.onCurrentSymbolChange=function(e){this.currentSymbol.name!==e.name&&(this.detailView=new wf,this.unsubscribeCurrentData(),this.currentSymbol=e,this.subscribeMainSymbolData(),this.initiateViewAndSubscribeUnderlyingData(e))},t.prototype.unsubscribeCurrentData=function(){this.currentSymbol.isEmpty()||(this.unsubscribeMainSymbolData(),this.currentUnderlyingSymbol.isEmpty()||this.unsubscribeUnderlyingSymbolData(),this.currentSymbol.isOptions()&&this.unsubscribeSET50Data())},t.prototype.initiateViewAndSubscribeUnderlyingData=function(e){var t=this;this.currentSymbol.isFuturesWithUnderlying()?this.validateUnderlyingSymbol(e).then(function(e){t.currentUnderlyingSymbol=e,t.processIfSymbolHasUnderlying(t.currentUnderlyingSymbol),Tf.initiateView(t.currentSymbol,t.currentUnderlyingSymbol,t.detailView),t.subscribeUnderlyingSymbolData()},function(){t.currentUnderlyingSymbol=dt.empty(),Tf.initiateView(t.currentSymbol,t.currentUnderlyingSymbol,t.detailView)}):this.currentSymbol.isOptions()?(this.currentUnderlyingSymbol=dt.empty(),Tf.initiateView(this.currentSymbol,this.currentUnderlyingSymbol,this.detailView),this.subscribeSET50Data()):(this.currentUnderlyingSymbol=dt.empty(),Tf.initiateView(this.currentSymbol,this.currentUnderlyingSymbol,this.detailView))},t.prototype.processIfSymbolHasUnderlying=function(e){this.currentUnderlyingSymbol.isEmpty()?this.detailView.hasUnderlying=!1:this.detailView.hasUnderlying=!0},t.prototype.onReceiveMainInstrumentInfo=function(e){this.currentSymbol.isEquity()&&(this.detailView=Tf.parseMainSymbolEquity(e,this.detailView)),this.currentSymbol.isIndex()&&(this.detailView=Tf.parseMainSymbolIndex(e,this.detailView)),this.currentSymbol.isDerivatives()&&(this.detailView=Tf.parseMainSymbolDerivatives(e,this.detailView))},t.prototype.onReceiveUnderlyingInstrumentInfo=function(e){this.detailView=Tf.parseUnderlyingSymbol(e,this.detailView)},t.prototype.onReceiveSET50Snapshot=function(e){this.detailView=Tf.parseSET50UnderlyingSymbol(e,this.detailView)},t.prototype.validateUnderlyingSymbol=function(e){var t=this;return e.isFuturesWithUnderlying()?this.instrumentService.validateUnderlyingSymbol(e.underlying).then(function(e){return t.$q.resolve(e)},function(e){return t.$q.reject()}):this.$q.reject()},t.prototype.subscribeMainSymbolData=function(){this.instrumentInfoPublishSubscriber.subscribe(this.currentSymbol.name,Hr.Intraday,this.onReceiveMainInstrumentInfoCallback)},t.prototype.unsubscribeMainSymbolData=function(){this.instrumentInfoPublishSubscriber.unsubscribe(this.currentSymbol.name,this.onReceiveMainInstrumentInfoCallback)},t.prototype.subscribeUnderlyingSymbolData=function(){this.instrumentInfoPublishSubscriber.subscribe(this.currentUnderlyingSymbol.name,Hr.Intraday,this.onReceiveUnderlyingInstrumentInfoCallback)},t.prototype.unsubscribeUnderlyingSymbolData=function(){this.instrumentInfoPublishSubscriber.unsubscribe(this.currentUnderlyingSymbol.name,this.onReceiveUnderlyingInstrumentInfoCallback)},t.prototype.subscribeSET50Data=function(){this.snapshotPublishSubscriber.subscribe([".SET50"],this.onReceiveSET50SnapshotCallback)},t.prototype.unsubscribeSET50Data=function(){this.snapshotPublishSubscriber.unsubscribe([".SET50"],this.onReceiveSET50SnapshotCallback)},t.$inject=["PageService","InstrumentInfoPublishSubscriber","SnapshotPublishSubscriber","CurrentSymbolChangeEvent","InstrumentService","$q","ColorService"],t}(ys),If=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.element=t,r.colorService=i,r.TIME_INDEX=0,r.SIDE_INDEX=1,r.VOLUME_INDEX=2,r.PRICE_INDEX=3,r.CHANGE_INDEX=4,r.PERCENT_CHANGE_INDEX=5,r.CHANGE_TOGGLE_INDEX=6,r}return ne(t,e),t.prototype.toggleTrendClass=function(e){this.toggleClass(this.element[0].children[this.PRICE_INDEX],this.colorService.trendColor(this.ticker.summary.trend)),this.toggleClass(this.element[0].children[this.CHANGE_INDEX],this.colorService.trendColor(this.ticker.summary.trend)),this.toggleClass(this.element[0].children[this.PERCENT_CHANGE_INDEX],this.colorService.trendColor(this.ticker.summary.trend)),this.element[0].children.length>this.CHANGE_TOGGLE_INDEX&&this.toggleClass(this.element[0].children[this.CHANGE_TOGGLE_INDEX],this.colorService.trendColor(this.ticker.summary.trend)),this.toggleClass(e[0],this.colorService.trendIcon(this.ticker.summary.trend))},t.prototype.resetElClass=function(e,t){this.resetClass(this.element[0].children[this.SIDE_INDEX]),this.resetClass(this.element[0].children[this.VOLUME_INDEX]),this.resetClass(this.element[0].children[this.PRICE_INDEX]),this.resetClass(this.element[0].children[this.CHANGE_INDEX]),this.resetClass(this.element[0].children[this.PERCENT_CHANGE_INDEX]),this.element[0].children.length>this.CHANGE_TOGGLE_INDEX&&this.resetClass(this.element[0].children[this.CHANGE_TOGGLE_INDEX]),this.resetClass(t[0]),t.length>1&&e.removeChild(t[1])},t.$inject=["$element","ColorService"],t}(_s),Pf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),t}(Bs),Of=function(){function e(e,t,i){this.tfexPayoffStore=e,this.instrumentService=t,this.userApplicationProfileService=i}return e.prototype.onClickRow=function(){var e=this,t=this.data.symbol;this.instrumentService.searchSymbol(t,Qe.ALL).then(function(t){e.userApplicationProfileService.setCurrentSymbol(t)})},e.$inject=["TfexPayoffStore","InstrumentService","UserApplicationProfileService"],e}(),kf=function(){function e(e){this.tfexPayoffStore=e}return e.prototype.changeChecked=function(){this.data.isChecked?this.tfexPayoffStore.uncheckPayoffCheckbox(this.data):this.tfexPayoffStore.checkPayoffCheckbox(this.data),this.tfexPayoffStore.isEnableDrawChart=!0},e.prototype.isSimulated=function(){return this.data.type===Pu.SIMULATED},e.prototype.onClickEdit=function(e){e.stopPropagation(),this.tfexPayoffStore.showEditRow(this.data.index)},e.prototype.hideRowEdit=function(){this.tfexPayoffStore.clearAllEditRow()},e.prototype.onClickDelete=function(e){e.stopPropagation(),this.tfexPayoffStore.deleteSimulatedBySelectedUnderlying(this.data.simulatedIndex),this.tfexPayoffStore.mergePortsAndOrdersWithSimulate(),this.tfexPayoffStore.isEnableDrawChart=!0},e.prototype.onUserConfirmEdit=function(e){this.tfexPayoffStore.editSimulatedBySelectedUnderlying(e,this.data.simulatedIndex),this.tfexPayoffStore.mergePortsAndOrdersWithSimulate(),this.tfexPayoffStore.isEnableDrawChart=!0,this.hideRowEdit()},e.$inject=["TfexPayoffStore"],e}(),$f=function(){function e(){}return e}(),Lf=function(){function e(){}return e}(),Nf=function(){function e(e,t,i,r){this.itpdService=e,this.$q=t,this.mongoService=i,this.userInfoService=r}return e.prototype.getOrdersAndPorts=function(e){var t=this,i=new ni,r=e.filterUnderlying.getUnderlyingAsParameter();return i.accountNo=e.accountNo,i.filterUnderlying=r,i.isRequestOrder=e.isRequestOrder,i.isRequestPortfolio=e.isRequestPortfolio,i.isMarketRep=e.isMarketRep,this.itpdService.getPayoffOrdersAndPorts(i).then(function(e){if(e.success)return t.$q.resolve(e);var i=new Up(e.errorMessage);return t.$q.reject(i)},function(e){return t.$q.reject(e)})},e.prototype.calculatePayoff=function(e){var t=this,i=new si;i.accountNo=e.accountNo,i.filterUnderlying=e.filterUnderlying.getUnderlyingAsParameter(),i.isMarketRep=e.isMarketRep;var r=[],n=[];return e.selectedList.forEach(function(t){switch(t.type){case Pu.PORTFOLIO:case Pu.ORDER:r.push(Mf.parseToRequestCalculation(t,e.selectedMode));break;case Pu.SIMULATED:n.push(Mf.parseToRequestCalculation(t,e.selectedMode))}}),i.portfolioAndOrder=JSON.stringify(r),i.simulated=JSON.stringify(n),this.itpdService.calculatePayoff(i).then(function(e){if(e.success)return t.$q.resolve(e);var i=new Up(e.errorMessage);return t.$q.reject(i)},function(e){return t.$q.reject(e)})},e.prototype.loadSavedSimulated=function(e){var t=this;return this.userInfoService.isMarketRep()?this.mongoService.loadSimulatedTfexPayoffListMarketRep(e).then(function(e){if(e.isSuccess)return t.$q.resolve(e.result);var i=new Up(e.errorMessage);return t.$q.reject(i)},function(e){return t.$q.reject(e)}):this.mongoService.loadSimulatedTfexPayoffList().then(function(e){if(e.isSuccess)return t.$q.resolve(e.result);var i=new Up(e.errorMessage);return t.$q.reject(i)},function(e){return t.$q.reject(e)})},e.prototype.saveSimulated=function(e,t){var i=this,r=[];e.simulatedList.forEach(function(e){var t={symbol:e.symbol,
side:e.side.fullname,position:e.position.fullname,volume:e.volume,cost:e.cost,settle:e.settle,isChecked:e.isChecked};r.push(t)});var n=0;if(e.lastSavedTimestamp&&""!==e.lastSavedTimestamp){var o=moment(e.lastSavedTimestamp,"DD/MM/YY, HH:mm:ss");n=o.valueOf()}return this.userInfoService.isMarketRep()?this.mongoService.saveSimulatedPayoffListMktRep(t,r,e.name,e.underlying,e.id,n).then(function(e){if(e.isSuccess)return i.$q.resolve();var t=new Up(e.errorMessage);return i.$q.reject(t)}):this.mongoService.saveSimulatedPayoffList(r,e.name,e.underlying,e.id,n).then(function(e){if(e.isSuccess)return i.$q.resolve();var t=new Up(e.errorMessage);return i.$q.reject(t)})},e.$inject=["ITPDService","$q","MongoService","UserInfoService"],e}(),Mf=function(){function e(){}return e.parsePortsAndOrders=function(t){var i=e.parse(t.portfolios,0),r=e.parse(t.orders,i.length);return i.concat(r)},e.parse=function(e,t){var i=[];return e.forEach(function(e,r){var n=new Du;n.index=t+r,n.cost=e.cost,n.position=Ye.lookup[e.position],n.settle=e.settle,n.side=Be.lookup[e.side],n.symbol=e.symbol,n.type=e.type,n.volume=e.volume,n.isChecked=!0,i.push(n)}),i},e.parseToRequestCalculation=function(e,t){var i=new oi;return i.position=e.position.requestParam,t===ku.SETTLE?i.selectedPrice=yt.toNumber(e.settle):i.selectedPrice=yt.toNumber(e.cost),i.side=e.side.shortname,i.symbol=e.symbol,i.type=e.type,i.volume=yt.toNumber(e.volume),i},e}(),Rf=function(){function e(){}return e}(),_f=function(){function e(){}return e}(),Vf=function(){function e(){}return e}(),Bf=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this)||this;return u.tfexPayoffStore=t,u.tfexPayoffService=i,u.currentAccountChangeEvent=r,u.userInfoService=n,u.$q=o,u.alertService=s,u.settingsService=a,u.instrumentService=c,u.userApplicationProfileService=l,u.BREAK_EVEN_POINT_COLOR="#58ACFA",u.onCurrentAccountChangeCallback=u.onCurrentAccountChange.bind(u),u}return ne(t,e),t.prototype.startService=function(){this.tfexPayoffStore.currentAccount=this.currentAccountChangeEvent.getLatestDerivativesAccount(),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallback)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallback)},t.prototype.onCurrentAccountChange=function(e){var t=this;this.isEmptyAccount=!!e.isEmptyAccount,(e.isDerivatives()||e.isAllDerivatives())&&(this.tfexPayoffStore.currentAccount=e,(this.userInfoService.isInvestor()||this.userInfoService.isMarketRep())&&(this.tfexPayoffStore.isFirstLoaded&&(this.tfexPayoffStore.selectedUnderlyingDropdown=this.getPayoffUnderlyingItem()),this.accountNumberNotEmpty(e)?this.tfexPayoffStore.isFirstLoaded||this.accountNumberChanged(e)?this.updateOrdersAndPortsByCurrentSettingAndCallRequestChart().then(function(){t.tfexPayoffStore.initiateSimulatedDropdownByCurrentAccount().then(function(){t.tfexPayoffStore.isUnauthorizedAccount=!1},function(e){t.tfexPayoffStore.clearSimulatedDropdown(),t.tfexPayoffStore.isUnauthorizedAccount=!0,t.tfexPayoffStore.strategyDropdownList=[],t.alertService.showErrorAlert(e.message)})},function(e){t.tfexPayoffStore.clearSimulatedDropdown(),t.tfexPayoffStore.isUnauthorizedAccount=!0,t.tfexPayoffStore.strategyDropdownList=[],t.clearChart()}):this.tfexPayoffStore.isEnableDrawChart||this.requestChart():this.requestChart(),this.tfexPayoffStore.isFirstLoaded=!1,this.tfexPayoffStore.latestAccount=e))},Object.defineProperty(t.prototype,"isEmptyOrUnauthorizedAccount",{get:function(){return!!this.tfexPayoffStore.currentAccount&&(this.tfexPayoffStore.currentAccount.isEmptyAccount||this.tfexPayoffStore.isUnauthorizedAccount)},enumerable:!0,configurable:!0}),t.prototype.accountNumberNotEmpty=function(e){return void 0!==e.accountNo&&""!==e.accountNo},t.prototype.accountNumberChanged=function(e){return void 0===this.tfexPayoffStore.latestAccount||e.accountNo!==this.tfexPayoffStore.latestAccount.accountNo},t.prototype.getPayoffUnderlyingItem=function(){var e=this.tfexPayoffStore.getSET50UnderlyingItemInDropdown();return void 0===e?this.tfexPayoffStore.SELECT_UNDERLYING_HEADER:e},t.prototype.isSelectedStrategyEmpty=function(){return this.tfexPayoffStore.selectedStrategyDropdown?this.tfexPayoffStore.selectedStrategyDropdown.isEmpty:void 0},t.prototype.updateOrdersAndPortsByCurrentSettingAndCallRequestChart=function(){var e=this;return this.tfexPayoffStore.currentAccount.isEmptyAccount?this.$q.reject():this.updateOrdersAndPortsByCurrentSetting().then(function(){e.requestChart()})},t.prototype.onUnderlyingChange=function(e){this.tfexPayoffStore.selectedUnderlyingDropdown=e,this.updateOrdersAndPortsByCurrentSettingAndCallRequestChart(),this.disableDrawChartButton()},t.prototype.updateOrdersAndPortsByCurrentSetting=function(){var e=this;if(this.tfexPayoffStore.selectedUnderlyingDropdown===this.tfexPayoffStore.SELECT_UNDERLYING_HEADER)return this.$q.reject();var t=new $f;return t.accountNo=this.tfexPayoffStore.currentAccount.accountNo,t.isRequestOrder=!0,t.isRequestPortfolio=!0,t.filterUnderlying=this.tfexPayoffStore.selectedUnderlyingDropdown,t.isMarketRep=this.userInfoService.isMarketRep(),this.tfexPayoffService.getOrdersAndPorts(t).then(function(t){return e.tfexPayoffStore.updatePortsAndOrders(Mf.parsePortsAndOrders(t)),e.tfexPayoffStore.mergePortsAndOrdersWithSimulate(),e.$q.resolve()},function(t){return e.alertService.showErrorAlert(t.message),e.$q.reject()})},t.prototype.toggleColumn=function(){this.tfexPayoffStore.currentToggleColumn1Index++,this.tfexPayoffStore.currentToggleColumn1Index===this.tfexPayoffStore.toggleColumn1List.length&&(this.tfexPayoffStore.currentToggleColumn1Index=0),this.enableDrawChartButton()},t.prototype.isToggleColumn=function(e){return e===this.tfexPayoffStore.toggleColumn1List[this.tfexPayoffStore.currentToggleColumn1Index]},t.prototype.enableDrawChartButton=function(){this.tfexPayoffStore.isEnableDrawChart=!0},t.prototype.disableDrawChartButton=function(){this.tfexPayoffStore.isEnableDrawChart=!1},t.prototype.toggleCheckAll=function(){this.tfexPayoffStore.toggleCheckAll(),this.enableDrawChartButton()},t.prototype.isCheckedAllPayoff=function(){return this.tfexPayoffStore.isCheckedAll},t.prototype.parsePayoffChart=function(e){var t=new Rf;return t.hasData=!0,t.lastUpdate=new Date,t.lastDone=e.lastIndex,t.priceDigit=e.indexDigits,t.dataPoints=[],e.payOffCoordinateList.forEach(function(e){var i=new _f;i.underlyingPrice=e.index,i.profit=e.profit,e.profit<0?i.color="red":e.profit>0&&(i.color="green"),e.breakEven&&(i.profit=null,i.breakEvenProfit=e.profit),t.dataPoints.push(i)}),t},t.prototype.parsePayoffDetail=function(e){var t=new Vf;return t.maxProfit=e.maxProfit,t.maxProfitColor=this.getPayoffProfitLossDetailColor(e.maxProfit),t.maxLoss=e.maxLoss,t.maxLossColor=this.getPayoffProfitLossDetailColor(e.maxLoss),t.percentMaxProfit=e.percentMaxProfit,t.percentMaxProfitColor=this.getPayoffProfitLossDetailColor(e.percentMaxProfit),t.percentMaxLoss=e.percentMaxLoss,t.percentMaxLossColor=this.getPayoffProfitLossDetailColor(e.percentMaxLoss),t.totalCost=e.totalCost,t.totalMargin=e.totalMargin,t.premiumToPay=e.premiumToPay,t.commission=e.commission,t.breakEven=e.breakEven,t.currentEE=e.currentEE,t.requiredEE=e.requiredEE,t},t.prototype.getPayoffProfitLossDetailColor=function(e){return e.indexOf("+")>=0?ae.GAINER:e.indexOf("-")>=0?ae.LOSER:ae.UNCHANGED},t.prototype.requestChart=function(){var e=this;this.disableDrawChartButton(),this.tfexPayoffStore.mergePortsAndOrdersWithSimulate(),this.tfexPayoffStore.clearAllEditRow();var t=new Lf;if(t.accountNo=this.tfexPayoffStore.currentAccount.accountNo,t.filterUnderlying=this.tfexPayoffStore.selectedUnderlyingDropdown,t.selectedList=[],this.tfexPayoffStore.currentList.forEach(function(e){e.isChecked&&!e.isAddRow&&t.selectedList.push(e)}),0===t.selectedList.length){var i=new Rf;i.hasData=!1,this.tfexPayoffStore.updatePayoffChartSignal(i);var r=new Vf;return this.tfexPayoffStore.updatePayoffChartDetailSignal(r),void this.disableDrawChartButton()}t.selectedMode=this.tfexPayoffStore.toggleColumn1List[this.tfexPayoffStore.currentToggleColumn1Index],t.isMarketRep=this.userInfoService.isMarketRep(),this.tfexPayoffService.calculatePayoff(t).then(function(t){var i=e.parsePayoffChart(t),r=e.parsePayoffDetail(t);e.tfexPayoffStore.updatePayoffChartSignal(i),e.tfexPayoffStore.updatePayoffChartDetailSignal(r)},function(t){e.alertService.showErrorAlert(t.message),e.enableDrawChartButton()})},t.prototype.clearChart=function(){var e=new Rf;e.hasData=!1,this.tfexPayoffStore.updatePayoffChartSignal(e),this.tfexPayoffStore.updatePayoffChartDetailSignal(new Vf)},t.prototype.getListClassToControlHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.TFEX_PAYOFF_PORT_ORDER_LIST:st.NormalScreen.TFEX_PAYOFF_PORT_ORDER_LIST},t.prototype.genKey=function(e){return void 0!==this.tfexPayoffStore.selectedUnderlyingDropdown?this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter()+"-"+e:""+e},t.prototype.onRefresh=function(){var e=this;this.tfexPayoffStore.selectedUnderlyingDropdown.type===ue.REQUEST&&this.tfexPayoffStore.currentAccount&&!this.tfexPayoffStore.currentAccount.isEmptyAccount&&this.updateOrdersAndPortsByCurrentSetting().then(function(){e.enableDrawChartButton()})},t.prototype.selectedRow=function(e){0!==e&&(this.selectPayoffRowIndex=e)},t.prototype.isSelectedRow=function(e){return this.selectPayoffRowIndex===e},t.prototype.onStrategyChange=function(){},t.prototype.onClickLoadStrategy=function(){var e=this;this.isSelectedStrategyEmpty()||this.alertService.showPlaceOrderWarningAlert('Your current "simulated" will be replaced immediately, you cannot undo this action.\n\nDo you confirm to do this action?').then(function(){e.loadSavedSimulated()})},t.prototype.onClickSaveStrategy=function(){var e=this;this.isSelectedStrategyEmpty()?this.saveSimulated():this.alertService.showPlaceOrderWarningAlert('"'+this.tfexPayoffStore.selectedStrategyDropdown.name+'" already exists.\nDo you want to replace it?').then(function(){e.saveSimulated()})},t.prototype.saveSimulated=function(){var e=this;this.tfexPayoffStore.selectedStrategyDropdown.underlying=this.tfexPayoffStore.selectedUnderlyingDropdown.name,this.tfexPayoffStore.selectedStrategyDropdown.simulatedList=this.tfexPayoffStore.simulatedInstrumentsByUnderlying.value(this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter());this.tfexPayoffStore.selectedStrategyDropdown.id;this.tfexPayoffService.saveSimulated(this.tfexPayoffStore.selectedStrategyDropdown,this.tfexPayoffStore.currentAccount.accountNo).then(function(){e.loadSavedSimulated()},function(t){e.alertService.showErrorAlert(t.message)})},t.prototype.loadSavedSimulated=function(){var e=this;this.tfexPayoffService.loadSavedSimulated(this.tfexPayoffStore.currentAccount.accountNo).then(function(t){var i=e.tfexPayoffStore.getUnderlyingDropdownItemByUnderlyingName(e.tfexPayoffStore.selectedStrategyDropdown.underlying);if(null!==i){var r=tf.parse(t);e.tfexPayoffStore.strategyDropdownList=r,e.updateAfterLoadSimulatedSuccess(i,r)}else e.alertService.showErrorAlert("Underlying: "+e.tfexPayoffStore.selectedStrategyDropdown.underlying+" is removed from TFEX")},function(t){e.alertService.showErrorAlert(t.message)})},t.prototype.updateAfterLoadSimulatedSuccess=function(e,t){this.tfexPayoffStore.selectedUnderlyingDropdown=e;var i=parseInt(this.tfexPayoffStore.selectedStrategyDropdown.id)-1;this.tfexPayoffStore.selectedStrategyDropdown=this.tfexPayoffStore.strategyDropdownList[i];var r=this.filterSymbolinSimulatedList(t[i].simulatedList);this.tfexPayoffStore.simulatedInstrumentsByUnderlying.add(this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter(),r),this.updateOrdersAndPortsByCurrentSettingAndCallRequestChart(),this.disableDrawChartButton()},t.prototype.filterSymbolinSimulatedList=function(e){var t,i=this,r=[];if(t=e.filter(function(e){var t=i.isSymbolExpired(e.symbol);return t&&r.indexOf(e.symbol)===-1&&r.push(e.symbol),!t}),0!==r.length){var n="Symbol: "+r.join()+" is(are) removed from TFEX";this.alertService.showErrorAlert(n)}return t},t.prototype.isSymbolExpired=function(e){var t=this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter(),i=this.instrumentService.isSymbolExistInUnderlyingList(e,t);return!i},t.$inject=["TfexPayoffStore","TfexPayoffService","CurrentAccountChangeEvent","UserInfoService","$q","AlertService","SettingsService","InstrumentService","UserApplicationProfileService"],t}(Ss),xf=function(e){function t(t,i,r,n){var o=e.call(this,t)||this;return o.pageService=t,o.$element=i,o.tfexPayoffStore=r,o.$timeout=n,o.BREAK_EVEN_POINT_COLOR="#58ACFA",o.onDataUpdatedCallback=o.onDataUpdated.bind(o),o.isShowNoData=!0,o}return ne(t,e),t.prototype.startService=function(){var e=this;this.isShowNoData=!0,this.timeoutPromise=this.$timeout(function(){e.tfexPayoffStore.subscribePayoffChartSignal(e.onDataUpdatedCallback)},300)},t.prototype.stopService=function(){this.timeoutPromise&&this.$timeout.cancel(this.timeoutPromise),this.tfexPayoffStore.unsubscribePayoffChartSignal(this.onDataUpdatedCallback),this.clearChart()},t.prototype.viewDidLoad=function(){},t.prototype.onDataUpdated=function(e){this.clearChart(),this.isShowNoData=!0,e.hasData&&(this.isShowNoData=!1,this.writeChart(e))},t.prototype.clearChart=function(){this.payoffChart&&this.payoffChart.clear()},t.prototype.writeChart=function(e){var t=e.lastDone,i=e.priceDigit;this.payoffChart=new AmCharts.AmXYChart,this.payoffChart.pathToImages="assets/amcharts/images/",this.payoffChart.type="xy",this.payoffChart.addClassNames=!0,this.payoffChart.classNamePrefix="payoff-chart",this.payoffChart.dataProvider=e.dataPoints;var r=to.padZeroTimestamp(e.lastUpdate.getHours(),e.lastUpdate.getMinutes(),e.lastUpdate.getSeconds()),n=new AmCharts.Label;n.color="#696969",n.text="Last update "+r.timeHour+":"+r.timeMinute+":"+r.timeSeconds,n.x="69%",n.y="1%",n.size=10,n.bold=!0;var o=new AmCharts.Label;o.color="white",o.text="Profit or Loss",o.x="13%",o.y="0.5%",o.bold=!1;var s=new AmCharts.Label;s.color="white",s.text="Underlying Price",s.x="75%",s.y="78%",s.bold=!1,this.payoffChart.allLabels=[n,o,s],this.payoffChart.marginRight=30,this.payoffChart.autoMargins=!0;var a=new AmCharts.AmGraph;a.bullet="circle",a.bulletSize=8,a.bulletAlpha=1,a.fillAlphas=1,a.lineAlpha=1,a.lineThickness=0,a.lineColor=this.BREAK_EVEN_POINT_COLOR,a.xField="underlyingPrice",a.yField="breakEvenProfit",a.connect=!1,a.balloonFunction=function(e,t){var r=yt.formatPrice(e.dataContext.underlyingPrice,i),n=yt.formatPrice(e.dataContext.breakEvenProfit,i);return"<div style='margin:5px;'>Break Even: <b>"+r+"</b><br>P/L: <b style='color: #58ACFA'>"+n+"</b></div>"};var c=new AmCharts.AmGraph;c.customBullet="assets/amcharts/images/transparent.png",c.colorField="color",c.color="#DABC47",c.lineAlpha=.7,c.lineThickness=2,c.xField="underlyingPrice",c.yField="profit",c.lineColor="white",c.balloonFunction=function(e,t){var r=yt.formatPrice(e.dataContext.underlyingPrice,i),n=yt.formatPrice(e.dataContext.profit,i);return e.dataContext.profit>0?"Price: <b>"+r+"</b><br>P/L: <b style='color: green'>"+n+"</b>":e.dataContext.profit<0?"Price: <b>"+r+"</b><br>P/L: <b style='color: red'>"+n+"</b>":"Price: <b>"+r+"</b><br>P/L: <b style='color: #DABC47'>"+n+"</b>"},this.payoffChart.addGraph(c);var l=new AmCharts.ValueAxis;l.id="ProfitLossAxis",l.axisAlpha=1,l.position="left",l.color="white",l.axisColor="white",l.dashLength=3,l.gridAlpha=.5,l.gridColor="white",l.gridThickness=.5,l.autoGridCount=!1,l.gridCount=6,this.payoffChart.addValueAxis(l);var u=new AmCharts.ValueAxis;if(u.id="PriceAxis",u.axisAlpha=1,u.position="bottom",u.color="white",u.axisColor="white",u.dashLength=3,u.gridAlpha=.3,u.gridColor="white",u.gridThickness=.5,u.autoGridCount=!1,u.gridCount=6,u.position="bottom",null!==t){var d=new AmCharts.Guide;d.dashLength=2,d.value=t,d.lineColor="#DABC47",d.lineAlpha=.8,d.lineThickness=1,d.position="left",d.id="last-done";var h=yt.formatPrice(t,i);d.label="  Last = "+h,d.fontSize="12",d.color="#DABC47",d.inside=!0,u.addGuide(d)}this.payoffChart.addValueAxis(u),this.payoffChart.addGraph(a);var p=new AmCharts.ChartCursor;p.cursorAlpha=.8,p.cursorColor="white",p.pan=!1,p.cursorPosition="middle",this.payoffChart.addChartCursor(p),this.payoffChart.write(this.$element.find(".chart-element")[0]);var m=new AmCharts.Guide;m.dashLength=5,m.value=0,m.lineColor="white",m.lineAlpha=1,m.lineThickness=.5;var v=new AmCharts.Guide;v.value=0,v.valueAxis=l,v.toValue=l.max,v.fillColor="#2CAE00",v.inside=!0,v.fillAlpha=.3,v.lineAlpha=0;var f=new AmCharts.Guide;f.value=-1,f.valueAxis=l,f.toValue=l.min,f.fillColor="#F11B1B",f.inside=!0,f.fillAlpha=.3,f.lineAlpha=0,l.addGuide(v),l.addGuide(f),l.addGuide(m),this.payoffChart.write(this.$element.find(".chart-element")[0])},t.$inject=["PageService","$element","TfexPayoffStore","$timeout"],t}(ys),Ff=function(e){function t(t,i){var r=e.call(this,t)||this;return r.tfexPayoffStore=i,r.onTfexPayoffDetailViewChangeCallBack=r.onTfexPayoffDetailViewChange.bind(r),r}return ne(t,e),t.prototype.startService=function(){this.tfexPayoffStore.subscribePayoffChartDetailSignal(this.onTfexPayoffDetailViewChangeCallBack)},t.prototype.stopService=function(){this.tfexPayoffStore.unsubscribePayoffChartDetailSignal(this.onTfexPayoffDetailViewChangeCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onTfexPayoffDetailViewChange=function(e){this.data=e},t.prototype.isMustShowTooltipOfBreakEven=function(){return!!(this.data&&this.data.breakEven&&this.data.breakEven.length>31)},t.$inject=["PageService","TfexPayoffStore"],t}(ys),Uf=function(){function e(e){this.tfexPayoffStore=e}return e.prototype.showRowEdit=function(){this.tfexPayoffStore.showEditRow(this.data.index)},e.prototype.hideRowEdit=function(){this.tfexPayoffStore.clearAllEditRow()},e.prototype.onUserConfirmAdd=function(e){var t=new Du;t.cost=e.price,t.settle=e.price,t.position=e.position,t.side=e.side,t.symbol=e.symbol,t.type=e.type,t.volume=e.volume,this.tfexPayoffStore.addSimulatedBySelectedUnderlying(t),this.tfexPayoffStore.mergePortsAndOrdersWithSimulate(),this.tfexPayoffStore.isEnableDrawChart=!0,this.hideRowEdit()},e.$inject=["TfexPayoffStore"],e}(),qf=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this)||this;return c.currentAccountChangeEvent=t,c.userInfoService=i,c.orderEntrySettingChangeEvent=r,c.alertService=n,c.instrumentService=o,c.$q=s,c.tfexPayoffStore=a,c.symbolInputNextFocusElements=[{parent:"tfex-payoff-row-edit",focusElement:"#tfex-payoff-row-edit-volume input"}],c.priceInputNextFocusElements=[{parent:"tfex-payoff-row-edit",focusElement:".ok button"},{parent:"tfex-payoff-row-edit",focusElement:".cancel button"}],c.volumeInputNextFocusElements=[{parent:"tfex-payoff-row-edit",focusElement:"#tfex-payoff-row-edit-price input"}],c.onCurrentAccountChangeCallBack=c.onCurrentAccountChange.bind(c),c.onOrderEntrySettingChangeCallBack=c.onOrderEntrySettingChange.bind(c),c.sideList=[Be.BUY,Be.SELL],c}return ne(t,e),t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChangeCallBack),this.symbol=this.data.symbol,this.position=this.data.position,this.side=this.data.side,this.volume=this.data.volume,this.currentPrice=this.data.cost,this.type=Pu.SIMULATED,this.symbol&&0!==this.symbol.length&&this.getStaticData(this.symbol),this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChangeCallBack)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChangeCallBack),this.orderEntrySettingChangeEvent.unsubscribe(this.onOrderEntrySettingChangeCallBack),this.tfexPayoffStore.hideEditRow(this.data.index)},t.prototype.onOrderEntrySettingChange=function(e){this.currentOrderEntrySetting=e,void 0===this.position&&(this.position=e.defaultOrderPosition)},t.prototype.onCurrentAccountChange=function(e){this.currentAccount=e,e.isDerivatives()&&this.setPositionList()},t.prototype.setPositionList=function(){this.userInfoService.enableAutoPosition?this.positionList=Ye.ALL:this.positionList=Ye.ALL_NO_AUTO},t.prototype.getStaticData=function(e){var t=this;if(""===e){var i={isSuccess:!1,errorMsg:"Please insert symbol",data:void 0};return void(this.instrumentStaticData=i)}this.instrumentService.searchSymbolByUnderlying(e,this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter()).then(function(){t.instrumentService.getInstrumentStaticData(e.toUpperCase(),Qe.DERIVATIVE).then(function(e){t.instrumentStaticData=e})},function(){var e={isSuccess:!1,errorMsg:"Series not found.",data:void 0};t.instrumentStaticData=e})},t.prototype.getPriceDigit=function(){if(this.instrumentStaticData&&this.instrumentStaticData.isSuccess)return this.instrumentStaticData.data.derivativesPriceDigit},t.prototype.clickOk=function(e){var t=this;e.stopPropagation(),this.validate().then(function(){var e=new Iu;e.price=t.currentPrice,e.position=t.position,e.side=t.side,e.symbol=t.symbol.toUpperCase(),e.type=Pu.SIMULATED,e.volume=t.volume,t.onClickOk({updateData:e})})},t.prototype.clickCancel=function(e){e.stopPropagation(),this.onClickCancel&&this.onClickCancel()},t.prototype.clearPriceInput=function(){this.currentPrice=""},t.prototype.validate=function(){var e=this,t=[];return!this.symbol||this.symbol&&0===this.symbol.length?(t.push("Please insert series."),(!this.currentPrice||this.currentPrice&&0===this.currentPrice.length)&&t.push("Please insert price."),!this.volume||this.volume&&0===this.volume.length?t.push("Please insert volume."):this.volume&&"0"===this.volume&&t.push("Volume should not be 0."),this.alertService.showValidationErrorAlert(t),this.$q.reject()):this.instrumentService.searchSymbolByUnderlying(this.symbol,this.tfexPayoffStore.selectedUnderlyingDropdown.getUnderlyingAsParameter()).then(function(){return(!e.currentPrice||e.currentPrice&&0===e.currentPrice.length)&&t.push("Please insert price."),!e.volume||e.volume&&0===e.volume.length?t.push("Please insert volume."):e.volume&&"0"===e.volume&&t.push("Volume should not be 0."),0!==t.length?(e.alertService.showValidationErrorAlert(t),e.$q.reject()):e.$q.resolve()},function(){return t.push("Series not found."),e.alertService.showValidationErrorAlert(t),e.$q.reject()})},t.prototype.onSymbolInputUpdate=function(e){this.symbol=e,this.getStaticData(e.toUpperCase())},t.prototype.onValidatedSymbol=function(e){this.getStaticData(e.name),this.symbol=e.name,this.clearPriceInput()},t.prototype.onBlurSymbolInput=function(e){},t.$inject=["CurrentAccountChangeEvent","UserInfoService","OrderEntrySettingChangeEvent","AlertService","InstrumentService","$q","TfexPayoffStore"],t}(Ss),jf=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.pageService=t,n.settingsService=i,n.optionsSummaryAppliedConditionChangeEvent=r,n}return ne(t,e),t.prototype.startService=function(){},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.prototype.getDisplaySizeClassToControlHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.TFEX_OPTIONS_SUMMARY_MAIN_CONTENT:st.NormalScreen.TFEX_OPTIONS_SUMMARY_MAIN_CONTENT},t.$inject=["PageService","SettingsService","OptionsSummaryAppliedConditionChangeEvent"],t}(ys),Hf=(function(){function e(){}return e}(),function(){function e(){}return e.DEFAULT="DEFAULT",e.EDIT="EDIT",e}()),Wf=function(){function e(){}return e.HISTORICAL="HISTORICAL",e.IMPLIED="IMPLIED",e.EDIT="EDIT",e}(),Yf=function(){function e(){this.spotPrice=new Gf,this.volatility=new Kf,this.remainingDays=new Gf,this.interestRate=new Gf,this.dividendYield=new Gf}return e}(),Gf=function(){function e(e,t,i){void 0===e&&(e=Hf.DEFAULT),void 0===t&&(t=""),void 0===i&&(i=""),this.selectedRadio=e,this.value=t,this.editValue=i}return Object.defineProperty(e.prototype,"currentValueByMode",{get:function(){return this.selectedRadio===Hf.DEFAULT?this.value:this.editValue},set:function(e){return this.selectedRadio===Hf.DEFAULT?void(this.value=e):void(this.editValue=e)},enumerable:!0,configurable:!0}),e.prototype.isDefaultMode=function(){return this.selectedRadio===Hf.DEFAULT},e.prototype.isEditMode=function(){return this.selectedRadio===Hf.EDIT},e}(),Kf=function(){function e(e,t,i){void 0===e&&(e=Wf.HISTORICAL),void 0===t&&(t=""),void 0===i&&(i=""),this.selectedRadio=e,this.value=t,this.editValue=i}return Object.defineProperty(e.prototype,"currentValueByMode",{get:function(){return this.selectedRadio===Wf.HISTORICAL||this.selectedRadio===Wf.IMPLIED?this.value:this.editValue},set:function(e){return this.selectedRadio===Wf.HISTORICAL||this.selectedRadio===Wf.IMPLIED?void(this.value=e):void(this.editValue=e)},enumerable:!0,configurable:!0}),e.prototype.getCurrentMode=function(){return this.selectedRadio===Wf.HISTORICAL?"historical":this.selectedRadio===Wf.IMPLIED?"implied":"edit"},e.prototype.isHistoricalMode=function(){return this.selectedRadio===Wf.HISTORICAL},e.prototype.isImpliedMode=function(){return this.selectedRadio===Wf.IMPLIED},e.prototype.isEditMode=function(){return this.selectedRadio===Hf.EDIT},e}(),zf=function(){function e(e){this.mongoService=e,this.conditions=new Yf,this.isApplied=!1,this.isFirstLoaded=!0}return e.prototype.updateConditions=function(e){this.conditions.spotPrice.value=yt.formatPrice(e.spotPrice,2),this.conditions.volatility.value=yt.formatPrice(100*e.volatility,2),this.conditions.remainingDays.value=yt.formatPriceWithoutDigit(e.remainingDays),this.conditions.interestRate.value=yt.formatPrice(e.interestRate,2),this.conditions.dividendYield.value=yt.formatPrice(e.dividendYield,2)},e.prototype.resetAppliedState=function(){this.isApplied=!1},e.prototype.initialStore=function(e){this.greekSummaryMongoData=new Qf(e.selectedGreekSummaryCallColumn1,e.selectedGreekSummaryCallColumn2,e.selectedGreekSummaryPutColumn1,e.selectedGreekSummaryPutColumn2)},e.prototype.updateGreekSummaryData=function(e){this.initialStore(e),this.mongoService.updateTfexGreekSummaryPageData(e)},e.$inject=["MongoService"],e}(),Qf=function(){function e(e,t,i,r){void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=""),void 0===r&&(r=""),this.selectedCall1=ay.lookUp(this.getDefaultIfEmpty(e,"totalVolume")),this.selectedCall2=ay.lookUp(this.getDefaultIfEmpty(t,"Last")),this.selectedPut1=ay.lookUp(this.getDefaultIfEmpty(i,"Last")),this.selectedPut2=ay.lookUp(this.getDefaultIfEmpty(r,"totalVolume"))}return e.prototype.getDefaultIfEmpty=function(e,t){return""===e?t:e},e}(),Xf=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new Jf;this.binary.readByte();return e.spotPrice=N(this.binary,2),e.volatility=N(this.binary,4),e.remainingDays=this.binary.readInt(),e.interestRate=N(this.binary,4),e.dividendYield=N(this.binary,4),e},e}(),Jf=function(){function e(){}return e}(),Zf=function(){function e(e){this.binary=e}return e.prototype.decode=function(){var e=new ey,t=this.binary.readByte();e.priceDigit=this.binary.readByte(),e.settleDigit=this.binary.readByte();var i=R(this.binary,t);e.expireDate=this.binary.readString(i),e.underlyingPrice=N(this.binary,2),e.volatility=N(this.binary,4),e.remainDay=this.binary.readInt(),e.interestRate=N(this.binary,4),e.dividend=N(this.binary,4),e.dataList=[];for(var r=this.binary.readShort(),n=0;n<r;n++){var o=new ty,s=R(this.binary,t);o.instrumentID=this.binary.readString(s),o.isCall=this.binary.readBoolean(),o.strikePrice=N(this.binary,2),o.prevSettle=L(this.binary,t,2),o.last=L(this.binary,t,2),o.change=L(this.binary,t,2),o.bidFlag=this.binary.readByte(),o.askFlag=this.binary.readByte(),o.bidPrice=L(this.binary,t,2),o.askPrice=L(this.binary,t,2),o.bidVolume=$(this.binary,t),o.askVolume=$(this.binary,t),o.totalVolume=$(this.binary,t),o.theoPrice=L(this.binary,t,2),o.diff=L(this.binary,t,2),o.implied=N(this.binary,4),o.delta=N(this.binary,4),o.gamma=N(this.binary,4),o.theta=N(this.binary,4),o.vega=N(this.binary,4),o.rho=N(this.binary,4),o.bidIV=N(this.binary,4),o.offerIV=N(this.binary,4),o.spread=L(this.binary,t,e.priceDigit),o.breakEven=L(this.binary,t,e.settleDigit),o.lambda=N(this.binary,4),o.poi=this.binary.readInt(),e.dataList.push(o)}return e},e}(),ey=function(){function e(){}return e}(),ty=function(){function e(){}return e}(),iy=function(){function e(e,t,i,r,n,o,s,a,c){var l=this;this.$interval=e,this.$http=t,this.urlStore=i,this.mmHost=r,this.$q=n,this.$httpParamSerializerJQLike=o,this.streamingAttribute=s,this.optionsSummaryStore=a,this.mmService=c,this.serviceOptionsDefaultValueSuccess=function(e){l.binary=new un(e.data);for(var t,i=l.binary.length,r=0;i>0;i-=r+2){var n=l.binary.tell();r=l.binary.readShort();l.binary.readByte();for(t=new Xf(l.binary).decode();l.binary.tell()<r+n+2;)l.binary.readByte()}return t},this.serviceOptionsGreekValueSuccess=function(e){l.binary=new un(e);for(var t,i=l.binary.length,r=0;i>0;i-=r+2){var n=l.binary.tell();r=l.binary.readShort();l.binary.readByte();for(t=new Zf(l.binary).decode();l.binary.tell()<r+n+2;)l.binary.readByte()}return t}}return e.prototype.getOptionsExpireDateItems=function(){var e=this;return this.mmService.getOptionsExpireDate().then(function(t){return"T"===t.result?e.$q.resolve(t.data):e.$q.reject(new Up(t.strMsg))},function(t){return e.$q.reject(t)})},e.prototype.startInterval=function(e){var t=this;this.getServiceOptionsDefaultValue(e.selectedDateItem.date,e.volatility.getCurrentMode()).then(function(e){t.updateOptionsSummaryDefaultValue(e)}),this.optionsDefaultValueTimer=this.$interval(function(){t.getServiceOptionsDefaultValue(e.selectedDateItem.date,e.volatility.getCurrentMode()).then(function(e){t.updateOptionsSummaryDefaultValue(e)})},to.getSeconds(15))},e.prototype.updateOptionsSummaryDefaultValue=function(e){this.optionsSummaryStore.updateConditions(e)},e.prototype.stopInterval=function(){this.optionsDefaultValueTimer&&this.$interval.cancel(this.optionsDefaultValueTimer)},e.prototype.getServiceOptionsDefaultValue=function(e,t){var i=this.$httpParamSerializerJQLike({service:31,expireDate:e,greekVolatilityMode:t,APIVersion:2});return this.$http.post(""+this.streamingAttribute.activingMarketDataMMHost+this.urlStore.MM_DATA_PROVIDER_BINARY_URL,i,this.getHeaderUrlArraybuffer()).then(this.serviceOptionsDefaultValueSuccess)},e.prototype.getServiceOptionsGreekValue=function(e){var t=this,i=this.generateOptionsGreekValueRequestParameters(e);return this.mmService.getOptionsGreekValue(i).then(function(e){return t.$q.resolve(t.serviceOptionsGreekValueSuccess(e))},function(e){return t.$q.reject(e)})},e.prototype.generateOptionsGreekValueRequestParameters=function(e){var t=new Mr;return t.greekExpireDate=e.selectedDateItem.date,t.greekVolatilityMode=e.volatility.getCurrentMode(),e.dividendYield.isEditMode()&&(t.greekDividend=yt.toNumber(e.dividendYield.editValue)),e.interestRate.isEditMode()&&(t.greekInterestRate=yt.toNumber(e.interestRate.editValue)),e.remainingDays.isEditMode()&&(t.greekRemainDay=yt.toNumber(e.remainingDays.editValue)),e.spotPrice.isEditMode()&&(t.greekUnderlyingPrice=yt.toNumber(e.spotPrice.editValue)),e.volatility.isEditMode()&&(t.greekVolatility=_e.div(yt.toNumber(e.volatility.editValue),100)),t},e.prototype.getHeaderUrlArraybuffer=function(){return{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,responseType:"arraybuffer"}},e.prototype.getHeaderUrlEncoded=function(){return{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}},e.$inject=["$interval","$http","URLStore","MM_HOST","$q","$httpParamSerializerJQLike","StreamingAttribute","OptionsSummaryStore","MMService"],e}(),ry=function(e){function t(t,i,r,n,o,s,a){var c=e.call(this,t)||this;return c.pageService=t,c.optionsSummaryService=i,c.optionsSummaryStore=r,c.optionsSummaryAppliedConditionChangeEvent=n,c.optionsSummaryRefreshEvent=o,c.optionsSummaryTableDataChangeEvent=s,c.alertService=a,c.DEFAULT_RADIO_TYPE=Hf.DEFAULT,c.EDIT_RADIO_TYPE=Hf.EDIT,c.HISTORY_VOLATILITY_RADIO_TYPE=Wf.HISTORICAL,c.IMPLIED_VOLATILITY_RADIO_TYPE=Wf.IMPLIED,c.EDIT_VOLATILITY_RADIO_TYPE=Wf.EDIT,c.onRefreshOptionsSummaryCallback=c.onRefreshOptionsSummary.bind(c),
c.onUpdateTableDataCallBack=c.onUpdateLastUpdateTableTimestamp.bind(c),c.setOptionsExpireDate=function(e){c.optionsSummaryStore.dateItems=e,void 0===c.optionsSummaryStore.conditions.selectedDateItem&&(c.optionsSummaryStore.conditions.selectedDateItem=c.optionsSummaryStore.dateItems[0])},c.getOptionsDefaultValueBySelectedConditions=function(){c.optionsSummaryService.stopInterval(),c.optionsSummaryService.startInterval(c.optionsSummaryStore.conditions)},c}return ne(t,e),t.prototype.startService=function(){var e=this;this.optionsSummaryConditions=this.optionsSummaryStore.conditions,this.optionsSummaryStore.isFirstLoaded&&(this.optionsSummaryService.getOptionsExpireDateItems().then(this.setOptionsExpireDate).then(this.getOptionsDefaultValueBySelectedConditions).then(function(){e.onClickApplyButton()}),this.optionsSummaryStore.isFirstLoaded=!1),this.optionsSummaryRefreshEvent.subscribe(this.onRefreshOptionsSummaryCallback),this.optionsSummaryTableDataChangeEvent.subscribe(this.onUpdateTableDataCallBack),this.lastUpdateTableTimestamp=""},t.prototype.stopService=function(){this.optionsSummaryService.stopInterval(),this.optionsSummaryRefreshEvent.unsubscribe(this.onRefreshOptionsSummaryCallback),this.optionsSummaryTableDataChangeEvent.unsubscribe(this.onUpdateTableDataCallBack)},t.prototype.viewDidLoad=function(){},t.prototype.onChangeExpireMonth=function(e){this.optionsSummaryStore.conditions.selectedDateItem=e,this.getOptionsDefaultValueBySelectedConditions(),this.optionsSummaryStore.resetAppliedState()},t.prototype.onClickApplyButton=function(){this.validateCustomValue()&&(this.optionsSummaryAppliedConditionChangeEvent.publish(this.optionsSummaryStore.conditions),this.getOptionsDefaultValueBySelectedConditions(),this.optionsSummaryStore.isApplied=!0)},t.prototype.onRefreshOptionsSummary=function(){this.optionsSummaryStore.conditions.selectedDateItem&&this.getOptionsDefaultValueBySelectedConditions()},t.prototype.onUpdateLastUpdateTableTimestamp=function(e){this.lastUpdateTableTimestamp=e},t.prototype.onChangeModeVolatility=function(){this.getOptionsDefaultValueBySelectedConditions(),this.optionsSummaryStore.resetAppliedState()},t.prototype.validateCustomValue=function(){var e=[];return this.optionsSummaryStore.conditions.spotPrice.isEditMode()&&""===this.optionsSummaryStore.conditions.spotPrice.editValue&&e.push("Please insert spot price."),this.optionsSummaryStore.conditions.volatility.isEditMode()&&""===this.optionsSummaryStore.conditions.volatility.editValue&&e.push("Please insert volatility."),this.optionsSummaryStore.conditions.remainingDays.isEditMode()&&""===this.optionsSummaryStore.conditions.remainingDays.editValue&&e.push("Please insert remaining days."),this.optionsSummaryStore.conditions.interestRate.isEditMode()&&""===this.optionsSummaryStore.conditions.interestRate.editValue&&e.push("Please insert interest rate."),this.optionsSummaryStore.conditions.dividendYield.isEditMode()&&""===this.optionsSummaryStore.conditions.dividendYield.editValue&&e.push("Please insert dividend yield."),0===e.length||(this.alertService.showValidationErrorAlert(e),!1)},t.$inject=["PageService","OptionsSummaryService","OptionsSummaryStore","OptionsSummaryAppliedConditionChangeEvent","OptionsSummaryRefreshEvent","OptionsSummaryTableDataChangeEvent","AlertService"],t}(ys),ny=function(){function e(){}return e}(),oy=function(){function e(){}return e}(),sy=function(){function e(){}return e}(),ay=function(){function e(e,t){this.displayName=t,this.key=e}return e.lookUp=function(t){return e[t.toUpperCase()]},e.LAST=new e("last","Last"),e.TOTALVOLUME=new e("totalVolume","Total Vol."),e.CHG=new e("chg","Chg"),e.PERCENTCHG=new e("percentChg","%Chg"),e.THEOPRICE=new e("theoPrice","Theo. P."),e.DIFF=new e("diff","Diff"),e.BREAKEVEN=new e("breakEven","Break Even"),e.POI=new e("poi","P.OI"),e.SPREAD=new e("spread","Spread"),e.IVLAST=new e("ivLast","IV Last"),e.IVBID=new e("ivBid","IV Bid"),e.IVOFFER=new e("ivOffer","IV Offer"),e.DELTA=new e("delta","Delta"),e.GAMMA=new e("gamma","Gamma"),e.THETA=new e("theta","Theta"),e.VEGA=new e("vega","Vega"),e.RHO=new e("rho","Rho"),e.LAMBDA=new e("lambda","Lambda"),e.LIST_ALL=[e.LAST,e.TOTALVOLUME,e.CHG,e.PERCENTCHG,e.THEOPRICE,e.DIFF,e.BREAKEVEN,e.POI,e.SPREAD,e.IVLAST,e.IVBID,e.IVOFFER,e.DELTA,e.GAMMA,e.THETA,e.VEGA,e.RHO,e.LAMBDA],e}(),cy=function(){function e(){}return e.parseDetailList=function(t){var i=this,r=[];t.dataList.forEach(function(e){var n=new sy;n.strikePrice=e.strikePrice,n.formattedStrikePrice=yt.formatVolume(e.strikePrice);var o=i.getOptionsStrikePriceRowIndex(r,n.strikePrice);o===-1&&(o=r.push(n)-1);var s=new ny;s.instrumentID=e.instrumentID,s.last=new oy,s.last.value=e.last,s.last.displayValue=yt.formatPrice(e.last,t.priceDigit),s.last.color=fo.priceColor(e.last,e.prevSettle,e.totalVolume),s.chg=new oy,s.chg.value=e.change,s.chg.displayValue=yt.formatChange(e.change,t.priceDigit),s.chg.color=fo.changeColor(e.change,e.prevSettle,e.totalVolume),s.percentChg=new oy;var a=i.calculatePercentChange(e.change,e.last);s.percentChg.value=a,s.percentChg.displayValue=yt.formatPercentChange(a),s.percentChg.color=fo.changeColor(e.change,e.prevSettle,e.totalVolume),s.theoPrice=new oy,s.theoPrice.value=e.theoPrice,s.theoPrice.displayValue=yt.formatPrice(e.theoPrice,1),s.theoPrice.color=ae.WHITE,s.diff=new oy,s.diff.value=e.diff,s.diff.displayValue=yt.formatChange(e.diff,2),s.diff.color=fo.diffTrendColor(e.diff),s.breakEven=new oy,s.breakEven.value=e.breakEven,s.breakEven.displayValue=yt.formatPrice(e.breakEven,3),s.breakEven.color=ae.WHITE,s.poi=new oy,s.poi.value=e.poi,s.poi.displayValue=yt.fomatVolumeKM(e.poi),s.poi.color=ae.WHITE,s.spread=new oy,s.spread.value=e.spread,s.spread.displayValue=yt.formatPrice(e.spread,1),s.spread.color=ae.WHITE,s.ivLast=new oy,s.ivLast.value=e.implied,s.ivLast.displayValue=yt.formatPrice(e.implied,2),s.ivLast.displayValue=i.formatPercent(s.ivLast.displayValue),s.ivLast.color=ae.WHITE,s.ivBid=new oy,s.ivBid.color=ae.WHITE,s.ivBid.displayValue=yt.formatPrice(e.bidIV,2),s.ivBid.displayValue=i.formatPercent(s.ivBid.displayValue),s.ivBid.value=e.bidIV,s.ivOffer=new oy,s.ivOffer.color=ae.WHITE,s.ivOffer.displayValue=yt.formatPrice(e.offerIV,2),s.ivOffer.displayValue=i.formatPercent(s.ivOffer.displayValue),s.ivOffer.value=e.offerIV,s.delta=new oy,s.delta.color=ae.WHITE,s.delta.displayValue=yt.formatPrice(e.delta,4),s.delta.value=e.delta,s.gamma=new oy,s.gamma.color=ae.WHITE,s.gamma.displayValue=yt.formatPrice(e.gamma,4),s.gamma.value=e.gamma,s.theta=new oy,s.theta.color=ae.WHITE,s.theta.displayValue=yt.formatPrice(e.theta,4),s.theta.value=e.theta,s.vega=new oy,s.vega.color=ae.WHITE,s.vega.displayValue=yt.formatPrice(e.vega,4),s.vega.value=e.vega,s.lambda=new oy,s.lambda.color=ae.WHITE,s.lambda.displayValue=yt.formatPrice(e.lambda,2),s.lambda.value=e.lambda,s.rho=new oy,s.rho.color=ae.WHITE,s.rho.displayValue=yt.formatPrice(e.rho,4),s.rho.value=e.rho,s.bid=new oy,s.bid.value=e.bidPrice,s.bid.displayValue=yt.formatBidOffer(e.bidPrice,t.priceDigit,e.bidFlag),s.bid.color=fo.bidOfferColor(e.bidPrice,e.prevSettle,e.bidVolume,e.bidFlag),s.offer=new oy,s.offer.value=e.askPrice,s.offer.displayValue=yt.formatBidOffer(e.askPrice,t.priceDigit,e.askFlag),s.offer.color=fo.bidOfferColor(e.askPrice,e.prevSettle,e.askVolume,e.askFlag),s.volumeBid=new oy,s.volumeBid.value=e.bidVolume,s.volumeBid.displayValue=yt.formatVolume(e.bidVolume),s.volumeBid.color=ae.TEXT_UNCHANGE_VOLUME,s.volumeOffer=new oy,s.volumeOffer.value=e.askVolume,s.volumeOffer.displayValue=yt.formatVolume(e.askVolume),s.volumeOffer.color=ae.TEXT_UNCHANGE_VOLUME,s.totalVolume=new oy,s.totalVolume.value=e.totalVolume,s.totalVolume.displayValue=yt.fomatVolumeKM(e.totalVolume),s.totalVolume.color=ae.WHITE,e.isCall?void 0===r[o].call&&(r[o].call=s,r[o].callSeriesId=e.instrumentID):void 0===r[o].put&&(r[o].put=s,r[o].putSeriesId=e.instrumentID)});var n=this.calculateATM(t.underlyingPrice);return e.updateIsInTheMoneyFlags(r,n),e.updateATMRows(r,n),this.sortStrikePrice(r)},e.calculatePercentChange=function(e,t){var i=t+e*-1;return e/Math.abs(i)*100},e.sortStrikePrice=function(e){return e.sort(function(e,t){return e.strikePrice-t.strikePrice})},e.updateIsInTheMoneyFlags=function(e,t){e.map(function(e){e.strikePrice<t?(e.isCallInTheMoney=!0,e.isPutInTheMoney=!1):e.strikePrice>t?(e.isCallInTheMoney=!1,e.isPutInTheMoney=!0):(e.isCallInTheMoney=!0,e.isPutInTheMoney=!0)})},e.updateATMRows=function(e,t){var i=this.getOptionsStrikePriceRowIndex(e,t);e.map(function(e,t){e.isATM=i===t})},e.getOptionsStrikePriceRowIndex=function(e,t){var i=-1,r=e.some(function(e,r){return i=r,e.strikePrice===t});return r?i:-1},e.calculateATM=function(e){var t=25;return Math.ceil(e/t-.5)*t},e.formatPercent=function(e){return""!==e&&(e+="%"),e},e}(),ly=function(e){function t(t,i,r,n,o,s,a,c,l,u){var d=e.call(this,t)||this;return d.pageService=t,d.settingsService=i,d.optionsSummaryStore=r,d.optionsSummaryAppliedConditionChangeEvent=n,d.optionsSummaryService=o,d.$interval=s,d.optionsSummaryRefreshEvent=a,d.optionsSummaryTableDataChangeEvent=c,d.alertService=l,d.$q=u,d.onOptionsSummaryAppliedConditionChangeCallBack=d.onOptionsSummaryAppliedConditionChange.bind(d),d.onRefreshOptionsSummaryCallback=d.onRefreshOptionsSummary.bind(d),d.toggleCallList=ay.LIST_ALL,d}return ne(t,e),t.prototype.startService=function(){this.toggleColumnCall1=this.optionsSummaryStore.greekSummaryMongoData.selectedCall1,this.toggleColumnCall2=this.optionsSummaryStore.greekSummaryMongoData.selectedCall2,this.toggleColumnPut1=this.optionsSummaryStore.greekSummaryMongoData.selectedPut1,this.toggleColumnPut2=this.optionsSummaryStore.greekSummaryMongoData.selectedPut2,this.constructToggleCallList(),this.constructTogglePutList(),this.optionsSummaryAppliedConditionChangeEvent.subscribe(this.onOptionsSummaryAppliedConditionChangeCallBack),this.optionsSummaryRefreshEvent.subscribe(this.onRefreshOptionsSummaryCallback)},t.prototype.stopService=function(){this.optionsSummaryAppliedConditionChangeEvent.unsubscribe(this.onOptionsSummaryAppliedConditionChangeCallBack),this.optionsSummaryRefreshEvent.unsubscribe(this.onRefreshOptionsSummaryCallback),this.stopIntervalGeekSummary()},t.prototype.viewDidLoad=function(){},t.prototype.onOptionsSummaryAppliedConditionChange=function(e){this.appliedCondition=e,this.stopIntervalGeekSummary(),this.startIntervalGeekSummary()},t.prototype.startIntervalGeekSummary=function(){var e=this;this.isShowLoading=!0,this.getOptionsGeekSummaryRowData().then(function(t){e.onLoadTableDataSuccess(t)},function(t){e.onLoadTableDataError(t)}),this.intervalGeekSummaryTimer=this.$interval(function(){e.isShowLoading=!0,e.getOptionsGeekSummaryRowData().then(function(t){e.onLoadTableDataSuccess(t)},function(t){e.onLoadTableDataError(t)})},to.getSeconds(15))},t.prototype.onLoadTableDataSuccess=function(e){this.tableData=e,this.isShowLoading=!1,this.optionsSummaryTableDataChangeEvent.publish()},t.prototype.onLoadTableDataError=function(e){this.alertService.showErrorAlert(e),this.isShowLoading=!1},t.prototype.stopIntervalGeekSummary=function(){this.intervalGeekSummaryTimer&&this.$interval.cancel(this.intervalGeekSummaryTimer)},t.prototype.getOptionsGeekSummaryRowData=function(){var e=this;return this.optionsSummaryService.getServiceOptionsGreekValue(this.appliedCondition).then(function(e){return cy.parseDetailList(e)},function(t){return e.$q.reject(t.message)})},t.prototype.getListClassToControlHeight=function(){return this.settingsService.displayConfiguration.isWideScreen?st.WideScreen.TFEX_GREEK_SUMMARY_LIST:st.NormalScreen.TFEX_GREEK_SUMMARY_LIST},t.prototype.onChangedToggleColumnCall1=function(e){this.toggleColumnCall1=ay.lookUp(e.key),this.constructToggleCallList(),this.optionsSummaryStore.updateGreekSummaryData(this.getGreekSummaryData())},t.prototype.onChangedToggleColumnCall2=function(e){this.toggleColumnCall2=ay.lookUp(e.key),this.constructToggleCallList(),this.optionsSummaryStore.updateGreekSummaryData(this.getGreekSummaryData())},t.prototype.onChangedToggleColumnPut1=function(e){this.toggleColumnPut1=ay.lookUp(e.key),this.constructTogglePutList(),this.optionsSummaryStore.updateGreekSummaryData(this.getGreekSummaryData())},t.prototype.onChangedToggleColumnPut2=function(e){this.toggleColumnPut2=ay.lookUp(e.key),this.constructTogglePutList(),this.optionsSummaryStore.updateGreekSummaryData(this.getGreekSummaryData())},t.prototype.constructToggleCallList=function(){var e=this;this.toggleCallList=ay.LIST_ALL.filter(function(t){return t.key!==e.toggleColumnCall1.key&&t.key!==e.toggleColumnCall2.key})},t.prototype.constructTogglePutList=function(){var e=this;this.togglePutList=ay.LIST_ALL.filter(function(t){return t.key!==e.toggleColumnPut1.key&&t.key!==e.toggleColumnPut2.key})},t.prototype.getGreekSummaryData=function(){return{selectedGreekSummaryCallColumn1:this.toggleColumnCall1.key,selectedGreekSummaryCallColumn2:this.toggleColumnCall2.key,selectedGreekSummaryPutColumn1:this.toggleColumnPut1.key,selectedGreekSummaryPutColumn2:this.toggleColumnPut2.key}},t.prototype.onRefreshOptionsSummary=function(){this.appliedCondition&&(this.stopIntervalGeekSummary(),this.startIntervalGeekSummary())},t.prototype.onClickRow=function(e){this.selectedIndex=e},t.$inject=["PageService","SettingsService","OptionsSummaryStore","OptionsSummaryAppliedConditionChangeEvent","OptionsSummaryService","$interval","OptionsSummaryRefreshEvent","OptionsSummaryTableDataChangeEvent","AlertService","$q"],t}(ys),uy=function(e){function t(t,i,r,n,o){var s=e.call(this,t,i,r,n,o)||this;return s.$element=t,s.$window=i,s.$scope=r,s.uiComponentEventEmitter=n,s.$rootScope=o,s.isShowDropdownList=!1,s}return ne(t,e),t.prototype.menuSelected=function(e){this.onSelected({model:e})},t.prototype.toggleDropdown=function(){this.isShowDropdownList?this.hideComponent():this.showComponent()},t.prototype.shouldHideComponent=function(){this.isShowDropdownList=!1},t.prototype.shouldShowComponent=function(){this.isShowDropdownList=!0},t.$inject=["$element","$window","$scope","UIComponentsEventEmitter","$rootScope"],t}(je),dy=function(){function e(e,t,i,r,n){this.colorService=e,this.instrumentService=t,this.userInfoService=i,this.piwikService=r,this.userApplicationProfileService=n}return e.prototype.onClickOptionsRow=function(){var e=this;this.instrumentService.searchSymbol(this.data.instrumentID,Qe.ALL).then(function(t){e.userApplicationProfileService.setCurrentSymbol(t)})},e.prototype.emitBestBidWithSideSellEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.data.instrumentID,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.SELL)}),this.piwikService.eventTrack(nt.CLICK_BESTBID,rt.FAVOURITE)},e.prototype.emitBestOfferWithSideBuyEvent=function(e){var t=this;this.instrumentService.searchSymbol(this.data.instrumentID,Qe.ALL).then(function(i){var r=e.target.textContent;t.userApplicationProfileService.setCurrentSymbol(i,r,Be.BUY)}),this.piwikService.eventTrack(nt.CLICK_BESTOFFER,rt.FAVOURITE)},e.$inject=["ColorService","InstrumentService","UserInfoService","PiwikService","UserApplicationProfileService"],e}(),hy=function(e){function t(t,i,r){var n=e.call(this,t)||this;return n.pageService=t,n.optionsSummaryStore=i,n.optionsSummaryRefreshEvent=r,n.GREEK_SUMMARY_TAB_ID=0,n}return ne(t,e),t.prototype.startService=function(){this.activePage=this.GREEK_SUMMARY_TAB_ID},t.prototype.stopService=function(){},t.prototype.viewDidLoad=function(){},t.prototype.isActive=function(e){return this.activePage===e},t.prototype.onClickRefresh=function(){this.optionsSummaryRefreshEvent.dispatchEvent()},t.$inject=["PageService","OptionsSummaryStore","OptionsSummaryRefreshEvent"],t}(ys),py=function(){function e(){}return e.prototype.isInTheMoneyCall=function(){return this.data.isCallInTheMoney},e.prototype.isInTheMoneyPut=function(){return this.data.isPutInTheMoney},e}(),my=function(){function e(e,t){this.$filter=e,this.$element=t,this.priceFilter=e("price")}return e.prototype.$onInit=function(){this.inputElement=this.$element.find("input"),this.inputElement.bind("keypress",this.onKeyPress.bind(this)),this.inputElement.bind("keydown",this.onKeydown.bind(this))},e.prototype.$onChanges=function(e){e.currentMode&&e.currentMode.currentValue===Hf.EDIT&&this.inputElement.select()},e.prototype.onKeyPress=function(e){return rr.matchEnterKeyKeypress(e)?void this.inputElement.blur():rr.matchSpecialKeysKeypress(e)?void this.onValueChange():void(this.detectPrice(e)&&this.onValueChange())},e.prototype.onKeydown=function(e){return e.which===ye?void this.inputElement.blur():rr.matchSpecialKeysKeypress(e)?void this.onValueChange():void 0},e.prototype.onBlur=function(){this.detectMouseClickForIE=!1,this.value=this.formatPriceStr(this.value)},e.prototype.onMousedown=function(){this.detectMouseClickForIE=!0,this.unformat()},e.prototype.onFocus=function(){return this.detectMouseClickForIE?void(this.detectMouseClickForIE=!1):void this.unformat()},e.prototype.formatPriceStr=function(e){if(!e)return"";var t,i=new Big(yt.toNumber(e));return Big.RM=0,void 0===this.priceDigit?numeral(e).format("0,0.[0000000000]"):(t=i.toFixed(this.priceDigit),this.priceFilter(t,this.priceDigit))},e.prototype.detectPrice=function(e){return!!(String.fromCharCode(e.charCode).match(/-/)&&this.canNegative||String.fromCharCode(e.charCode).match(/[0-9.]/))||(e.preventDefault(),!1)},e.prototype.unformat=function(){this.value&&""!==this.value&&(this.value=yt.toNumber(this.value).toString())},e.$inject=["$filter","$element","$scope"],e}();angular.module("tfex",["service","event-emitter","number-formatter","ui-component","order","web-api","binary"]).component("tfexPage",{template:i(/*! ../../html/tfex/tfex-page.html */255),controller:rf,bindings:{page:"@"}}).component("tfexPlaceOrderTabs",{template:i(/*! ../../html/tfex/tfex-place-order-tabs.html */256),controller:sf,bindings:{page:"@"}}).component("tfexPageLeftContentTabs",{template:i(/*! ../../html/tfex/tfex-page-left-content-tabs.html */257),controller:vf,bindings:{page:"@"}}).component("tfexOrderStatus",{template:i(/*! ../../html/tfex/tfex-order-status.html */258),controller:of,bindings:{page:"@"}}).component("tfexOrderStatusRow",{template:i(/*! ../../html/tfex/tfex-order-status-row.html */259),controller:uf,bindings:{data:"<"}}).component("tfexOrder",{template:i(/*! ../../html/tfex/tfex-order.html */260),controller:nf,bindings:{page:"@"}}).component("tfexWatch",{template:i(/*! ../../html/tfex/tfex-watch.html */261),controller:hf,bindings:{page:"@"}}).component("tfexOptionsList",{template:i(/*! ../../html/tfex/tfex-options-list.html */262),controller:gf,bindings:{page:"@"}}).component("tfexOptionsOverview",{template:i(/*! ../../html/tfex/tfex-options-overview.html */263),controller:Sf,bindings:{page:"@",symbol:"@"}}).component("tfexInvestorAccountInfo",{template:i(/*! ../../html/tfex/tfex-investor-account-info.html */264),controller:af,bindings:{page:"@"}}).component("tfexMarketrepAccountInfo",{template:i(/*! ../../html/tfex/tfex-marketrep-account-info.html */265),controller:cf,bindings:{page:"@"}}).component("tfexNormalPlaceOrder",{template:i(/*! ../../html/tfex/tfex-normal-place-order.html */266),controller:lf,bindings:{page:"@",source:"<"}}).component("tfexMiniQuote",{template:i(/*! ../../html/tfex/tfex-mini-quote.html */267),controller:ff,bindings:{page:"@"}}).component("tfexMiniQuoteTabs",{template:i(/*! ../../html/tfex/tfex-mini-quote-tabs.html */268),controller:yf,bindings:{page:"@"}}).component("tfexCompareChartWithDetail",{template:i(/*! ../../html/tfex/tfex-compare-chart-with-detail.html */269),controller:Df,bindings:{page:"@"}}).component("compareChart",{template:i(/*! ../../html/tfex/compare-chart.html */270),controller:bf,bindings:{page:"@"}}).component("tfexInstrumentTickerRow",{template:i(/*! ../../html/tfex/tfex-instrument-ticker-row.html */271),controller:If,bindings:{ticker:"<"}}).component("tfexInstrumentTicker",{template:i(/*! ../../html/tfex/tfex-instrument-ticker.html */272),controller:Pf,bindings:{page:"@"}}).component("tfexPayoffRow",{template:i(/*! ../../html/tfex/tfex-payoff-row.html */273),controller:Of,bindings:{data:"<"}}).component("tfexPayoffRowView",{template:i(/*! ../../html/tfex/tfex-payoff-row-view.html */274),controller:kf,bindings:{data:"<"}}).component("tfexPayoff",{template:i(/*! ../../html/tfex/tfex-payoff.html */275),controller:Bf,bindings:{page:"@"}}).component("tfexPayoffChart",{template:i(/*! ../../html/tfex/tfex-payoff-chart.html */276),controller:xf,bindings:{page:"@"}}).component("tfexPayoffDetail",{template:i(/*! ../../html/tfex/tfex-payoff-detail.html */277),controller:Ff,bindings:{page:"@"}}).component("tfexPayoffRowAdd",{template:i(/*! ../../html/tfex/tfex-payoff-row-add.html */278),controller:Uf,bindings:{page:"@",data:"<"}}).component("tfexPayoffRowEdit",{template:i(/*! ../../html/tfex/tfex-payoff-row-edit.html */279),controller:qf,bindings:{page:"@",data:"=",onClickOk:"&",onClickCancel:"&"}}).component("tfexOptionsSummary",{template:i(/*! ../../html/tfex/options-summary/tfex-options-summary.html */280),controller:jf,bindings:{page:"@"}}).component("tfexOptionsSummaryForm",{template:i(/*! ../../html/tfex/options-summary/tfex-options-summary-form.html */281),controller:ry,bindings:{page:"@"}}).component("tfexGreekSummary",{template:i(/*! ../../html/tfex/options-summary/tfex-greek-summary.html */282),controller:ly,bindings:{page:"@"}}).component("tfexPageLeftContentOptionsSummaryTabs",{template:i(/*! ../../html/tfex/options-summary/tfex-page-left-content-options-summary-tabs.html */283),controller:hy,bindings:{page:"@"}}).component("tfexGreekSummaryCall",{template:i(/*! ../../html/tfex/options-summary/tfex-greek-summary-call.html */284),controller:dy,bindings:{data:"<",seriesId:"<",dynamicColumn1:"<",dynamicColumn2:"<"}}).component("tfexGreekSummaryPut",{template:i(/*! ../../html/tfex/options-summary/tfex-greek-summary-put.html */285),controller:dy,bindings:{data:"<",seriesId:"<",dynamicColumn1:"<",dynamicColumn2:"<"}}).component("tfexGreekSummaryRow",{template:i(/*! ../../html/tfex/options-summary/tfex-greek-summary-row.html */286),controller:py,bindings:{data:"<",dynamicColumn1Put:"<",dynamicColumn2Put:"<",dynamicColumn1Call:"<",dynamicColumn2Call:"<"}}).component("headerToggleDropdown",{template:i(/*! ../../html/tfex/options-summary/header-toggle-dropdown.html */287),controller:uy,bindings:{model:"<",selected:"<",keyName:"@",onSelected:"&"}}).component("tfexOptionsSummaryConditionEditInput",{template:i(/*! ../../html/tfex/options-summary/tfex-options-summary-condition-edit-input.html */288),controller:my,bindings:{inputId:"@",value:"=",isDisabled:"<",onValueChange:"&",priceDigit:"<",currentMode:"<",canNegative:"<"}}).service("TfexWatchStore",df).service("TfexWatchService",pf).service("TfexPayoffStore",$u).service("TfexStore",mf).service("TfexPayoffService",Nf).service("OptionsSummaryStore",zf).service("OptionsSummaryService",iy).service("OptionsSummayConditionsDecoder",Xf);var vy=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,o,l)||this;return u.streamingAttribute=t,u.element=i,u.initDataEvent=r,u.currentSymbolChangeEvent=n,u.pageService=o,u.$window=s,u.instrumentService=a,u.userApplicationProfileService=c,u.screenTrackerService=l,u.currentSymbolChangeCallBack=u.onCurrentSymbolChange.bind(u),u.onDataLoadedCallBack=u.onDataLoaded.bind(u),u.onRecieveNewSymbolFromJittaCallBack=u.onRecieveNewSymbolFromJitta.bind(u),u.isJittaInitialized=!1,u}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.changeToPage(),this.isJittaInitialized||this.init(),this.currentSymbolChangeEvent.subscribe(this.currentSymbolChangeCallBack)},t.prototype.getAnalyticsScreenName=function(){return ss.JITTA},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.init=function(){this.iframe=this.element.find("iframe"),this.iframe.attr("src",this.streamingAttribute.itpHost+"/realtime/thirdPartyInApp/C00_ThirdPartyInAppRedirect.jsp?appID=jitta"),this.iframe.on("load",this.onDataLoadedCallBack),this.isJittaInitialized=!0},t.prototype.onDataLoaded=function(){this.currentSymbol&&this.iframe[0].contentWindow.postMessage("INST|"+this.currentSymbol.name,"*"),this.$window.addEventListener&&this.$window.addEventListener("message",this.onRecieveNewSymbolFromJittaCallBack,!1)},t.prototype.stopService=function(){this.currentSymbolChangeEvent.unsubscribe(this.currentSymbolChangeCallBack)},t.prototype.onCurrentSymbolChange=function(e){if(this.isJittaInitialized){this.currentSymbol=e;var t=e.name;this.iframe[0].contentWindow.postMessage("INST|"+t,"*")}},t.prototype.onRecieveNewSymbolFromJitta=function(e){var t=this;if(this.isJittaInitialized){var i=e.data;if("string"==typeof i&&i.indexOf("INST")!==-1){var r=i.split("|");this.instrumentService.searchSymbolByBrokerLicense(r[2]).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)})}}},t.$inject=["StreamingAttribute","$element","InitDataEvent","CurrentSymbolChangeEvent","PageService","$window","InstrumentService","UserApplicationProfileService","ScreenTrackerService"],t}(Zs);angular.module("jitta",["multi-market"]).component("jitta",{template:i(/*! ../../html/jitta/jitta.html */289),controller:vy,bindings:{page:"@"}});var fy=function(){function e(){}return e.NONE="None",e.DISPLAY_DISCLAIMER="DISPLAY_DISCLAIMER",e.DISPLAY_DGW_CONDY="DISPLAY_DGW_CONDY",e.NOT_ACCEPT_DISCLAIMER="Not_Accept_Disclaimer",e}(),yy=function(e){function t(t,i,r,n,o,s,a,c,l){var u=e.call(this,t,c)||this;return u.pageService=t,u.streamingAttribute=i,u.urlStore=r,u.$sce=n,u.dgwService=o,u.currentAccountChangeEvent=s,u.alertService=a,u.screenTrackerService=c,u.userEnvironmentService=l,u.showDisclaimer=function(){u.mode=fy.DISPLAY_DISCLAIMER},u.showDgwContainer=function(){u.mode=fy.DISPLAY_DGW_CONDY,u.validateAccountPermission()},u.onCurrentAccountChange=function(e){u.currentAccount=e,u.validateAccountPermission()},u.isActive=!1,u}return ne(t,e),t.prototype.isShowDisclaimer=function(){return this.mode===fy.DISPLAY_DISCLAIMER},t.prototype.isShowDgwConditionOrder=function(){return this.mode===fy.DISPLAY_DGW_CONDY},t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.changeToPage(),this.isActive=!0,this.resetErrorMessage(),this.setupDisclaimerURL(),this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChange),this.currentAccount=this.currentAccountChangeEvent.getCurrentAccount(),this.dgwService.isAcceptDisclaimer().then(this.showDgwContainer,this.showDisclaimer)},t.prototype.getAnalyticsScreenName=function(){return ss.COND_ORDER_DGW},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){var e={page:this.getAnalyticsScreenName(),accountNo:this.userEnvironmentService.currentAccount.accountNo,system:""+this.userEnvironmentService.currentAccount.systemType,frontType:""+this.userEnvironmentService.currentAccount.frontType};return e},t.prototype.resetErrorMessage=function(){this.errorMessage=""},t.prototype.setupDisclaimerURL=function(){this.disclaimerURL=this.$sce.trustAsResourceUrl(""+this.streamingAttribute.itpHost+this.urlStore.ITP_DGW_CONDY_DISCLAIMER)},t.prototype.stopService=function(){this.isActive=!1,this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChange)},t.prototype.validateAccountPermission=function(){var e=this;this.resetErrorMessage(),!this.isAllowCurrentAccount()&&this.isShowDgwConditionOrder()&&this.dgwService.getMessageUserNotAllow().then(function(t){e.errorMessage=t},function(t){e.alertService.showErrorAlert(t.message)})},t.prototype.isAllowCurrentAccount=function(){return this.currentAccount.isDGW()&&this.currentAccount.isEquity()},t.prototype.onAcceptDisclaimer=function(){this.showDgwContainer()},t.prototype.onCancelDisclaimer=function(){this.mode=fy.NOT_ACCEPT_DISCLAIMER,this.errorMessage="You have to accept Condition Order disclaimer to use this feature."},t.$inject=["PageService","StreamingAttribute","URLStore","$sce","DgwConditionalOrderService","CurrentAccountChangeEvent","AlertService","ScreenTrackerService","UserEnvironmentService"],t}(Zs),gy=function(){function e(){this.conditionOperationList=[new Sy(by.OR),new Sy(by.AND)],this.validTillList=[new Sy(Cy.DAY),new Sy(Cy.DATE),new Sy(Cy.SESSION)],this.validTillSessionList=[new Sy(Ey.OPEN_1),new Sy(Ey.PRE_OPEN_2),new Sy(Ey.OPEN_2),new Sy(Ey.CALL_MARKET),new Sy(Ey.CLOSE)]}return e}(),Sy=function(){function e(e){this.name=e}return e}(),by=function(){function e(){}return e.OR="Or",e.AND="And",e}(),Cy=function(){function e(){}return e.DAY="Day",e.DATE="Date",e.SESSION="Session",e}(),Ey=function(){function e(){}return e.OPEN_1="Open 1",e.PRE_OPEN_2="Pre-Open 2",e.OPEN_2="Open 2",e.CALL_MARKET="Call Market",e.CLOSE="Close",e}(),Ay=function(){function e(e,t){this.name=e,this.value=t}return e.EMPTY=new e("",""),e.PRICE=new e("Price","price"),e.PERCENTAGE=new e("Percentage","percentage"),e.PRIOR_PRICE=new e("Prior price","prior_price"),e.PRIOR_PERCENTAGE=new e("Prior percentage","prior_percentage"),e.SPREAD=new e("Spread","spread"),e}(),wy=function(){function e(e,t){this.name=e,this.value=t}return e.EMPTY=new e("",""),e.STOP_CONDITION_BID_GE=new e("Bid >= Trigger Price","bid_ge"),e.STOP_CONDITION_BID_LE=new e("Bid <= Trigger Price","bid_le"),e.STOP_CONDITION_OFFER_GE=new e("Offer >= Trigger Price","offer_ge"),e.STOP_CONDITION_OFFER_LE=new e("Offer <= Trigger Price","offer_le"),e.STOP_CONDITION_LAST_GE=new e("Last >= Trigger Price","last_ge"),e.STOP_CONDITION_LAST_LE=new e("Last <= Trigger Price","last_le"),e.STOP_CONDITION_HIGH_GE=new e("High >= Trigger Price","high_ge"),e.STOP_CONDITION_HIGH_LE=new e("High <= Trigger Price","high_le"),e.STOP_CONDITION_LOW_GE=new e("Low >= Trigger Price","low_ge"),e.STOP_CONDITION_LOW_LE=new e("Low <= Trigger Price","low_le"),e.STOP_CONDITION_AVG_GE=new e("Avg >= Trigger Price","avg_ge"),e.STOP_CONDITION_AVG_LE=new e("Avg <= Trigger Price","avg_le"),e.STOP_CONDITION_INDEX_GE=new e("Index >= Trigger Price","index_ge"),e.STOP_CONDITION_INDEX_LE=new e("Index <= Trigger Price","index_le"),e.TRAILING_CONDITION_LAST_GE=new e("Last Price >= Low + Trigger Price","last_price"),e.TRAILING_CONDITION_BID_GE=new e("Bid >= Low + Trigger Price","bid"),e.TRAILING_CONDITION_OFFER_GE=new e("Offer >= Low + Trigger Price","offer"),e.TRAILING_CONDITION_LAST_LE=new e("Last Price <= High - Trigger Price","last_price"),e.TRAILING_CONDITION_BID_LE=new e("Bid <= High - Trigger Price","bid"),e.TRAILING_CONDITION_OFFER_LE=new e("Offer <= High - Trigger Price","offer"),e}(),Ty=function(){function e(){this.triggerSymbol="",this.triggerCondition=wy.EMPTY,this.triggerPriceType=Ay.PRICE,this.triggerPrice=""}return e.prototype.setTriggerSymbol=function(e){this.triggerSymbol!==e.name&&(this.triggerSymbol=e.name,this.triggerCondition=this.isIndex()?wy.EMPTY:wy.STOP_CONDITION_BID_GE,this.triggerPriceType=Ay.PRICE,this.resetTriggerPrice())},e.prototype.isIndex=function(){return 0===this.triggerSymbol.indexOf(".")},e.prototype.isPriorPrice=function(){return 0===this.triggerPriceType.name.indexOf("Prior price")},Object.defineProperty(e.prototype,"triggerPricePlaceholder",{get:function(){return this.isPriorPrice()?"Prior":this.triggerPriceType.name},enumerable:!0,configurable:!0}),e.prototype.resetTriggerPrice=function(){this.triggerPrice=""},Object.defineProperty(e.prototype,"displayTriggerPrice",{get:function(){var e={Price:this.triggerPrice+" Baht",Percentage:this.triggerPrice+"%","Prior price":"Prior Price","Prior percentage":this.triggerPrice+"% (Prior Percentage)"};return e[this.triggerPriceType.name]},enumerable:!0,configurable:!0}),e}(),Dy=function(){function e(e){this.triggerCondition=e?wy.TRAILING_CONDITION_LAST_GE:wy.TRAILING_CONDITION_LAST_LE,this.triggerPriceType=Ay.EMPTY,this.triggerPrice=""}return Object.defineProperty(e.prototype,"triggerPricePlaceholder",{get:function(){return this.triggerPriceType.name},enumerable:!0,configurable:!0}),e.prototype.resetTriggerPrice=function(){
this.triggerPrice=""},Object.defineProperty(e.prototype,"displayTriggerPrice",{get:function(){var e={Spread:this.triggerPrice+" Spread",Percentage:this.triggerPrice+"%"};return e[this.triggerPriceType.name]},enumerable:!0,configurable:!0}),e}(),Iy=function(){function e(){this.conditions=[new Ty],this.stopOrderSymbolTriggerConditionList=[wy.STOP_CONDITION_BID_GE,wy.STOP_CONDITION_BID_LE,wy.STOP_CONDITION_OFFER_GE,wy.STOP_CONDITION_OFFER_LE,wy.STOP_CONDITION_LAST_GE,wy.STOP_CONDITION_LAST_LE,wy.STOP_CONDITION_HIGH_GE,wy.STOP_CONDITION_HIGH_LE,wy.STOP_CONDITION_LOW_GE,wy.STOP_CONDITION_LOW_LE,wy.STOP_CONDITION_AVG_GE,wy.STOP_CONDITION_AVG_LE],this.stopOrderIndexTriggerConditionList=[wy.STOP_CONDITION_INDEX_GE,wy.STOP_CONDITION_INDEX_LE],this.stopOrderTriggerPriceTypeList=[Ay.PRICE,Ay.PERCENTAGE,Ay.PRIOR_PRICE,Ay.PRIOR_PERCENTAGE],this.trailingStopBuyTriggerConditionList=[wy.TRAILING_CONDITION_LAST_GE,wy.TRAILING_CONDITION_BID_GE,wy.TRAILING_CONDITION_OFFER_GE],this.trailingStopSellTriggerConditionList=[wy.TRAILING_CONDITION_LAST_LE,wy.TRAILING_CONDITION_BID_LE,wy.TRAILING_CONDITION_OFFER_LE],this.trailingStopTriggerPriceTypeList=[Ay.SPREAD,Ay.PERCENTAGE],this.conditionOperation=new gy,this.selectedConditionOperation=this.conditionOperation.conditionOperationList[0],this.selectedValidTillType=new Sy("Select"),this.selectedValidTillSession=new Sy("Select"),this.isStopOrder=!0,this.side=Be.BUY,this.isLimit=!0,this.symbol=dt.empty()}return Object.defineProperty(e.prototype,"volume",{get:function(){return this.volumeModel||""},set:function(e){this.volumeModel=e},enumerable:!0,configurable:!0}),e.prototype.onClickAddConditionButton=function(){this.conditions.push(new Ty)},e.prototype.onClickRemoveConditionAtIndex=function(e){this.conditions.splice(e,1)},e.prototype.generatePlaceStopOrderParam=function(e){var t,i=[];return this.conditions.forEach(function(e){i.push({triggerSymbol:e.triggerSymbol,triggerCond:e.triggerCondition.value,triggerPriceType:e.triggerPriceType.value,triggerPrice:yt.toNumber(e.triggerPrice)})}),t=new Nt,t.txtTerminalType=Xe,t.side=this.side.shortname,t.symbol=this.symbol.name,t.volume=yt.toNumber(this.volume),t.price=yt.toNumber(this.price),t.conditions=i,t.conditionOperator=this.selectedConditionOperation.name.toLowerCase(),t.validityType=this.selectedValidTillType.name,t.validityType===Cy.DATE?t.validityCondition=this.getValidTillDateString():t.validityType===Cy.SESSION&&(t.validityCondition=this.getSelectedValidTillSessionString()),t.confirmedWarning=e,t.nvdr=this.currentOrderEntrySetting.autoNVDRConfiguration.enable?"2":"",t.accountNo=this.currentAccount.accountNo,t.pin=this.pin,t.priceType=this.priceType,t},e.prototype.generatePlaceTrailingOrderParam=function(e){var t,i={triggerCond:this.conditions[0].triggerCondition.value,triggerPriceType:this.conditions[0].triggerPriceType.value,triggerPrice:yt.toNumber(this.conditions[0].triggerPrice)};return t=new Mt,t.txtTerminalType=Xe,t.side=this.side.shortname,t.symbol=this.symbol.name,t.volume=yt.toNumber(this.volume),t.price=yt.toNumber(this.price),t.condition=i,t.validityType=this.selectedValidTillType.name,t.validityType===Cy.DATE?t.validityCondition=this.getValidTillDateString():t.validityType===Cy.SESSION&&(t.validityCondition=this.getSelectedValidTillSessionString()),t.confirmedWarning=e,t.nvdr=this.currentOrderEntrySetting.autoNVDRConfiguration.enable?"2":"",t.accountNo=this.currentAccount.accountNo,t.pin=this.pin,t.priceType=this.priceType,t},Object.defineProperty(e.prototype,"priceType",{get:function(){return this.isLimit?"limit":"mtl"},enumerable:!0,configurable:!0}),e.prototype.getValidTillDateDay=function(){return this.validTillDate.getDate()>=10?""+this.validTillDate.getDate():"0"+this.validTillDate.getDate()},e.prototype.getValidtillDateMonth=function(){return this.validTillDate.getMonth()+1>=10?""+(this.validTillDate.getMonth()+1):"0"+(this.validTillDate.getMonth()+1)},e.prototype.getValidTillDateString=function(){return this.validTillDate.getFullYear().toString()+"-"+this.getValidtillDateMonth()+"-"+this.getValidTillDateDay()},Object.defineProperty(e.prototype,"displayPrice",{get:function(){return this.isLimit?this.price:"MP-MTL"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayTotal",{get:function(){return this.isLimit?yt.formatPrice(yt.toNumberOrZero(this.volume)*yt.toNumberOrZero(this.price),2)+" Baht":"N/A"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayValidTill",{get:function(){var e=this.selectedValidTillType.name;switch(e){case Cy.SESSION:return this.selectedValidTillSession.name;case Cy.DATE:return moment(this.validTillDate).format("DD/MM/YYYY");case Cy.DAY:return"Day";default:return""}},enumerable:!0,configurable:!0}),e.prototype.getSelectedValidTillSessionString=function(){switch(this.selectedValidTillSession.name){case Ey.OPEN_1:return"open1";case Ey.PRE_OPEN_2:return"pre_open2";case Ey.OPEN_2:return"open2";case Ey.CALL_MARKET:return"callmarket";case Ey.CLOSE:return"close";default:return""}},e}(),Py=function(){function e(){this.priceDigit=2}return e}(),Oy=function(){function e(){}return e.parse=function(e,t){e.instrumentType===ce.EQUITY&&(e.hasInitIntradayData()&&(t.companyDescription=e.initIntradayData.instLongName),e.hasInitMarketData()&&(t.previousClose=e.initMarketData.previousClose,t.high=e.initMarketData.high,t.low=e.initMarketData.low),e.hasSummaryData()&&(t.totalVolume=e.summaryData.totalVolume,t.lastDone=e.summaryData.lastDone,t.change=e.summaryData.change,t.percentChange=e.summaryData.percentChange,t.high=Bi.getHighValue(e,t.high),t.low=Bi.getLowValue(e,t.low)))},e}(),ky=function(e){function t(t,i,r,n,o,s,a,c,l,u,d,h,p,m,v){var f=e.call(this,t)||this;return f.pageService=t,f.focus=i,f.element=r,f.colorService=n,f.currentAccountChangeEvent=o,f.userApplicationProfileService=s,f.currentSymbolChange=a,f.infoPubsub=c,f.store=l,f.instrumentService=u,f.orderEntrySettingChangeEvent=d,f.dgwConditionalOrderService=h,f.alertService=p,f.pinService=m,f.refreshEvent=v,f.volumeInputNextFocusElements=[{parent:"dgw-conditional-order",focusElement:"#dgw-place-order-price input"}],f.dgwConditionalSymbolNextFocusElements=[{parent:null,focusElement:"#dgw-place-order-volume input"}],f.datePickerConfig={popupPlacement:"bottom-left",showButtonBar:!1,appendToBody:!0,datepickerOptions:{maxDate:moment().add(90,"days").toDate(),minDate:new Date,showWeeks:!1,startingDay:0}},f.allowIndexListforConditionSymbol=[".SET",".SET50"],f.onCurrentSymbolChange=function(e,t,i){var r=e.isEquity()?e:dt.empty(),n=f.store.symbol;n.isEqual(r)||(f.retrieveNewSymbolData(r,t,i),f.updateStopOrderFirstCondition(r),f.store.volume="",f.store.price="")},f.onOrderEntrySettingChange=function(e){f.store.currentOrderEntrySetting=e},f.onRecieveInfo=function(e){Oy.parse(e,f.store.miniQuote)},f.onCurrentAccountChange=function(e){f.store.currentAccount=e},f.clearAllAndRefreshPageData=function(){f.onClickClearAll(),f.refreshEvent.dispatchEvent(),f.enabledSubmitButton=!0},f.priceTypeShortcutMapping=uu.EQUITY_PRICE_TYPE,f.focusFactory=i,f.enabledSubmitButton=!0,f}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentAccountChangeEvent.subscribe(this.onCurrentAccountChange),this.currentSymbolChange.subscribe(this.onCurrentSymbolChange),this.conditionOperation=this.store.conditionOperation,this.orderEntrySettingChangeEvent.subscribe(this.onOrderEntrySettingChange),this.updateInstrumentStaticData(this.store.symbol.name)},t.prototype.stopService=function(){this.currentAccountChangeEvent.unsubscribe(this.onCurrentAccountChange),this.infoPubsub.unsubscribe(this.store.symbol.name,this.onRecieveInfo),this.currentSymbolChange.unsubscribe(this.onCurrentSymbolChange),this.orderEntrySettingChangeEvent.unsubscribe(this.onOrderEntrySettingChange)},t.prototype.updateStopOrderFirstCondition=function(e){this.store.isStopOrder?(this.store.isLimit=!0,this.store.conditions[0].setTriggerSymbol(e)):this.store.isLimit=!1},t.prototype.retrieveNewSymbolData=function(e,t,i){var r=this.store.symbol;if(r.isEmpty()||this.infoPubsub.unsubscribe(r.name,this.onRecieveInfo),r.name.toLowerCase()!==e.name.toLowerCase()&&(this.clearData(),this.updateInstrumentStaticData(e.name),this.store.currentOrderEntrySetting)){var n=this.processChangePriceSide(e,t,i);!n&&this.store.currentOrderEntrySetting.autoFillPriceConfiguration.enable&&this.processAutoFillPrice(e.name)}this.store.symbol=e,e.isEmpty()||this.infoPubsub.subscribe(e.name,Hr.Intraday,this.onRecieveInfo)},t.prototype.clearData=function(){this.store.miniQuote=new Py},t.prototype.openCalendar=function(e,t){this[t].open=!this[t].open},t.prototype.onSubmitSymbol=function(e){this.userApplicationProfileService.setCurrentSymbol(e),this.focusNextElement({preventDefault:function(){}},this.focusFactory.focusElement),this.updateStopOrderFirstCondition(e)},t.prototype.focusNextElement=function(e,t){var i=this;this.dgwConditionalSymbolNextFocusElements.some(function(e){var r=i.element.find(e.focusElement);return t(r)}),e.preventDefault()},t.prototype.updateInstrumentStaticData=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e,Qe.EQUITY).then(function(e){t.instrumentStaticData=e})},t.prototype.processAutoFillPrice=function(e){var t=this;this.instrumentService.getInstrumentStaticData(e,Qe.EQUITY).then(function(e){t.store.price=jr.getEquityPrice(e,t.store.side)})},t.prototype.onSideChange=function(e){var t="S"===e?Be.SELL:Be.BUY;this.store.price="",this.store.side!==t&&(this.store.side=t,""!==this.store.symbol.name&&this.store.currentOrderEntrySetting.autoFillPriceConfiguration.enable&&this.processAutoFillPrice(this.store.symbol.name),this.store.isStopOrder?this.onClickPriceType("L"):(this.setupTrailingConditions(),this.onClickPriceType("M")))},t.prototype.onClickOrderMode=function(e){var t="S"===e;this.store.isStopOrder!==t&&(this.clearPin(),this.store.isStopOrder=t,this.store.selectedValidTillType=new Sy("Select"),this.store.selectedValidTillSession=new Sy("Select"),this.store.validTillDate=null,this.store.isStopOrder?(this.store.conditions=[new Ty],this.updateStopOrderFirstCondition(this.store.symbol),this.onClickPriceType("L")):this.resetToTrailingStopIntialStage())},t.prototype.setupTrailingConditions=function(){this.store.conditions=[new Dy(this.store.side.isBuy())]},t.prototype.onClickPriceType=function(e){this.store.isLimit="L"===e,this.store.price=""},t.prototype.isShowAddConditionButton=function(){return this.store.isStopOrder&&this.store.conditions.length<3},Object.defineProperty(t.prototype,"trailingStopTriggerConditionList",{get:function(){return this.store.side.isBuy()?this.store.trailingStopBuyTriggerConditionList:this.store.trailingStopSellTriggerConditionList},enumerable:!0,configurable:!0}),t.prototype.processChangePriceSide=function(e,t,i){var r=!1;return e.isEquity()&&(void 0!==t&&(this.store.price=t,this.store.isLimit=!0,r=!0),void 0!==i&&(this.store.side=i,r=!0)),r},t.prototype.onClickConditionDGWPlaceOrder=function(){var e=this;this.validateForm()&&this.alertService.showDgwConditionalOrderConfirmAlert().then(function(){e.enabledSubmitButton=!1,e.store.isStopOrder?e.placeStopOrder():e.placeTrailingOrder()})},t.prototype.onClickClearAll=function(){this.store.volume="",this.onClickPriceType(this.store.isStopOrder?"L":"M"),this.store.isStopOrder?(this.store.conditions=[new Ty],this.updateStopOrderFirstCondition(this.store.symbol),this.store.selectedConditionOperation=this.store.conditionOperation.conditionOperationList[0]):this.setupTrailingConditions(),this.resetValidTillToInitialStage(),this.clearPin()},t.prototype.clearPin=function(){this.pinService.isSavePin()||(this.store.pin="")},t.prototype.resetToTrailingStopIntialStage=function(){this.store.volume="",this.onClickPriceType("M"),this.setupTrailingConditions(),this.resetValidTillToInitialStage(),this.clearPin()},t.prototype.resetValidTillToInitialStage=function(){this.store.selectedValidTillType=new Sy("Select"),this.store.selectedValidTillSession=new Sy("Select"),this.store.validTillDate=null},t.prototype.placeStopOrder=function(){var e=this;this.dgwConditionalOrderService.conditionDGWPlaceStopOrder(this.store.generatePlaceStopOrderParam(!1)).then(function(t){return"F"===t.status?e.alertService.showErrorAlert(t.message).then(e.clearAllAndRefreshPageData):"T"===t.status?e.alertService.showSuccessAlert(t.message).then(e.clearAllAndRefreshPageData):void("W"===t.status&&e.confirmWarningAlertStopOrder(t))},this.clearAllAndRefreshPageData)},t.prototype.confirmWarningAlertStopOrder=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e.message).then(function(){t.dgwConditionalOrderService.conditionDGWPlaceStopOrder(t.store.generatePlaceStopOrderParam(!0)).then(function(e){return"T"===e.status?t.alertService.showSuccessAlert(e.message):"F"===e.status?t.alertService.showErrorAlert(e.message):void 0})})["finally"](this.clearAllAndRefreshPageData)},t.prototype.placeTrailingOrder=function(){var e=this;this.dgwConditionalOrderService.conditionDGWPlaceTrailingOrder(this.store.generatePlaceTrailingOrderParam(!1)).then(function(t){return"F"===t.status?e.alertService.showErrorAlert(t.message).then(e.clearAllAndRefreshPageData):"T"===t.status?e.alertService.showSuccessAlert(t.message).then(e.clearAllAndRefreshPageData):void("W"===t.status&&e.confirmWarningAlertTrailingOrder(t))},this.clearAllAndRefreshPageData)},t.prototype.confirmWarningAlertTrailingOrder=function(e){var t=this;this.alertService.showPlaceOrderWarningAlert(e.message).then(function(){t.dgwConditionalOrderService.conditionDGWPlaceTrailingOrder(t.store.generatePlaceTrailingOrderParam(!0)).then(function(e){return"T"===e.status?t.alertService.showSuccessAlert(e.message):"F"===e.status?t.alertService.showErrorAlert(e.message):void 0})})["finally"](this.clearAllAndRefreshPageData)},t.prototype.validateForm=function(){var e=this,t=[];if(this.store.symbol.name||t.push("Please Enter Symbol."),this.store.volume||t.push("Please Enter Volume."),this.store.isLimit&&!this.store.price&&t.push("Please Enter Price."),this.store.conditions.length>0&&this.store.symbol.name){var i=!1;this.store.conditions.forEach(function(r){if(!i){if(e.store.isStopOrder)switch(r.triggerSymbol){case".SET":case".SET50":r.triggerCondition===wy.EMPTY&&(t.push("Please Enter Condition."),i=!0);break;case"":t.push("Please Enter Condition Symbol."),i=!0}switch(r.triggerPriceType){case Ay.EMPTY:t.push("Please Enter Trigger Price."),i=!0;break;case Ay.PRICE:r.triggerPrice||(t.push("Please Enter Condition Price."),i=!0);break;case Ay.PERCENTAGE:r.triggerPrice||(t.push("Please Enter Percentage."),i=!0);break;case Ay.PRIOR_PERCENTAGE:r.triggerPrice||(t.push("Please Enter Prior Percentage."),i=!0);break;case Ay.SPREAD:r.triggerPrice||(t.push("Please Enter Spread."),i=!0)}}})}if("Select"===this.store.selectedValidTillType.name)t.push("Please Enter Valid Till.");else switch(this.store.selectedValidTillType.name){case Cy.DATE:try{this.store.validTillDate.getDate()>=10?""+this.store.validTillDate.getDate():"0"+this.store.validTillDate.getDate(),this.store.validTillDate.getMonth()+1>=10?""+(this.store.validTillDate.getMonth()+1):"0"+(this.store.validTillDate.getMonth()+1),""+this.store.validTillDate.getFullYear()}catch(r){t.push("Invalid Date Format.")}break;case Cy.SESSION:"Select"!==this.store.selectedValidTillSession.name&&null!==this.store.selectedValidTillSession.name&&void 0!==this.store.selectedValidTillSession.name||t.push("Please Enter Session.")}return this.pinService.isSavePin()||this.store.pin||t.push("Please Enter PIN."),0===t.length||(this.alertService.showValidationErrorAlert(t),!1)},t.prototype.validTillTypeChange=function(e){this.store.validTillDate=null,this.store.selectedValidTillSession=new Sy("Select"),this.store.selectedValidTillType=e},t.$inject=["PageService","focus","$element","ColorService","CurrentAccountChangeEvent","UserApplicationProfileService","CurrentSymbolChangeEvent","InstrumentInfoPublishSubscriber","DgwConditionalOrderStore","InstrumentService","OrderEntrySettingChangeEvent","DgwConditionalOrderService","AlertService","PinService","RefreshEvent"],t}(ys),$y=function(){function e(e,t,i){this.$q=e,this.mmService=t,this.itpService=i}return e.prototype.isAcceptDisclaimer=function(){return this.itpService.checkDisclaimerForService("conditionOrderDGW")},e.prototype.getMessageUserNotAllow=function(){var e=this;return this.mmService.requestMessageUserNotAllow().then(function(t){return t.isSuccess===!0?e.$q.resolve(t.configValue):e.$q.reject(new Up(t.errorMsg))},function(t){return e.$q.reject(t)})},e.prototype.conditionDGWPlaceStopOrder=function(e){return this.itpService.conditionDGWPlaceStopOrder(e)},e.prototype.conditionDGWPlaceTrailingOrder=function(e){return this.itpService.conditionDGWPlaceTrailingOrder(e)},e.$inject=["$q","MMService","ITPService"],e}();angular.module("dgw-conditional-order",["service","iframe","input"]).component("dgwConditionalOrderPage",{template:i(/*! ../../html/dgw-conditional-order/dgw-conditional-order-page.html */290),controller:yy,bindings:{page:"@"}}).component("dgwConditionalOrder",{template:i(/*! ../../html/dgw-conditional-order/dgw-conditional-order.html */291),controller:ky,bindings:{page:"@"}}).service("DgwConditionalOrderService",$y).service("DgwConditionalOrderStore",Iy);var Ly=function(e){function t(t,i,r,n){var o=e.call(this,r,n)||this;return o.streamingAttribute=t,o.element=i,o.pageService=r,o.screenTrackerService=n,o.isInvestorNowInitialized=!1,o}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.changeToPage(),this.isInvestorNowInitialized||this.init()},t.prototype.getAnalyticsScreenName=function(){return ss.STARTER},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.stopService=function(){},t.prototype.init=function(){this.iframe=this.element.find("iframe"),this.iframe.attr("src","https://www.set.or.th/investnowstarter/#/welcome/STT"),this.isInvestorNowInitialized=!0},t.$inject=["StreamingAttribute","$element","PageService","ScreenTrackerService"],t}(Zs);angular.module("investor-now",["multi-market"]).component("investorNow",{template:i(/*! ../../html/investor-now/investor-now.html */292),controller:Ly,bindings:{page:"@"}});var Ny=function(){function e(e,t,i,r){this.alertService=e,this.sessionService=t,this.mmConnectionState=i,this.screenTrackerService=r}return e.prototype.logout=function(){var e=this;this.screenTrackerService.changeToScreen(ss.LOGOUT,[],null),this.sessionService.logout().then(function(t){e.mmConnectionState.forceLogout(),e.alertService.showSuccessfulLogoutAlert(t.message)})},e.$inject=["AlertService","SessionService","MMConnectionState","ScreenTrackerService"],e}();angular.module("logout",["multi-market"]).component("logoutButton",{template:i(/*! ../../html/logout/logout-button.html */293),controller:Ny});var My=function(){function e(){}return e}(),Ry=function(){function e(){}return e}(),_y=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t)||this;return a.pageService=t,a.currentSymbolChangeEvent=i,a.$element=r,a.brainBoxService=n,a.$window=o,a.streamingAttribute=s,a.onCurrentSymbolChangeCallBack=a.onCurrentSymbolChange.bind(a),a}return ne(t,e),t.prototype.viewDidLoad=function(){},t.prototype.startService=function(){this.currentSymbolChangeEvent.subscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.stopService=function(){this.clearChart(),this.currentSymbolChangeEvent.unsubscribe(this.onCurrentSymbolChangeCallBack)},t.prototype.onCurrentSymbolChange=function(e){var t=this;this.currentSymbol=e,this.technicalInsightView=new My,this.valueAnalyzerView=new Ry,this.clearChart(),this.brainBoxService.getBrainBox(e).then(function(e){t.technicalInsightView=e.technicalInsight,t.valueAnalyzerView=e.valueAnalyzer,t.writeTechnicalInsightChart(),t.writeValueAnalyzerChart()})},t.prototype.clearChart=function(){this.technicalInsightChart&&this.technicalInsightChart.clear(),this.valueAnalyzerChart&&this.valueAnalyzerChart.clear()},t.prototype.writeTechnicalInsightChart=function(){var e=new AmCharts.AmPieChart;e.pullOutRadius=6,e.responsive=!0,e.startDuration=0,e.colors=this.technicalInsightView.chartColor,e.dataProvider=this.technicalInsightView.chartData,e.valueField="count",e.innerRadius="57%",e.color="#FBFBFB",e.labelsEnabled=!1,e.radius="47%",e.depth3D=0,e.startAngle=90,e.pullOutOnlyOne=!0;var t=new AmCharts.Label;t.y="50%",t.align="center",t.size=12,t.bold=!0,t.text=this.technicalInsightView.netCount,t.color=this.technicalInsightView.netCountColor.hexcode;var i=new AmCharts.Label;i.y="33%",i.align="center",i.size=12,i.bold=!0,i.text="NET",i.color=this.technicalInsightView.netCountColor.hexcode,e.allLabels=[t,i],e.pullOutRadius=0,this.technicalInsightChart=e,this.technicalInsightChart.balloon={enabled:!1};var r=this.$element.find(".technical-insight .chart");this.technicalInsightChart.write(r[0])},t.prototype.writeValueAnalyzerChart=function(){var e=new AmCharts.AmPieChart;e.pullOutRadius=5,e.responsive=!0,e.startDuration=0,e.colors=this.valueAnalyzerView.chartColors,e.dataProvider=this.valueAnalyzerView.chartData,e.valueField="value",e.innerRadius="57%",e.color="#FBFBFB",e.labelsEnabled=!1,e.radius="47%",e.depth3D=0,e.startAngle=90,e.pullOutOnlyOne=!0;var t=new AmCharts.Label;t.y="50%",t.align="center",t.size=10,t.bold=!0,t.text=this.valueAnalyzerView.rateOfReturn,t.color=this.valueAnalyzerView.rateOfReturnColor.hexcode;var i=new AmCharts.Label;i.y="33%",i.align="center",i.size=10,i.bold=!0,i.text="ROR",i.color=this.valueAnalyzerView.rateOfReturnColor.hexcode,e.allLabels=[i,t],e.pullOutRadius=0,this.valueAnalyzerChart=e,this.valueAnalyzerChart.balloon={enabled:!1};var r=this.$element.find(".value-analyzer .chart");this.valueAnalyzerChart.write(r[0])},t.prototype.onClickTechnicalInsight=function(){if(void 0!==this.currentSymbol){var e=this.currentSymbol.name,t=this.getExchange(this.currentSymbol),i=this.streamingAttribute.itpHost+"/dbsv/RecogniaTI.jsp?lang=en&page=event_lookup&symbol="+e+"&exchange="+t;this.$window.open(i,"_blank")}},t.prototype.onClickValueAnalyzer=function(){if(void 0!==this.currentSymbol){var e=this.currentSymbol.name,t=this.getExchange(this.currentSymbol),i=this.streamingAttribute.itpHost+"/dbsv/RecogniaVA.jsp?lang=en&page=va_lookup&symbol="+e+"&exchange="+t;this.$window.open(i,"_blank")}},t.prototype.getExchange=function(e){return e.isIndex()?"INDEX_CH":"SET"},t.$inject=["PageService","CurrentSymbolChangeEvent","$element","BrainBoxService","$window","StreamingAttribute"],t}(ys),Vy=function(){function e(e){this.cid=168,this.APIVersion=me,this.uid="admin",this.pwd="spotLIGHT",this.tuid=e}return e}(),By=function(){function e(){this.cid=168,this.APIVersion=me,this.uid="admin",this.pwd="spotLIGHT"}return e.prototype.setSymbol=function(e){this.exc=this.getExchange(e),".SET"===e.name?this.sym=".SETI":this.sym=e.name},e.prototype.getExchange=function(e){return e.isIndex()?"INDEX_CH":"SET"},e}(),xy=function(){function e(){}return e}(),Fy=function(){function e(e,t,i,r,n,o,s){this.streamingAttribute=e,this.$http=t,this.$q=i,this.$httpParamSerializerJQLike=r,this.alertService=n,this.urlStore=o,this.xmlParserService=s}return e.prototype.logUsage=function(){var e=new Vy(this.streamingAttribute.username);this.$http({method:"POST",url:this.streamingAttribute.recogniaHosts.writeLogUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(e)})},e.prototype.getEventCountSummary=function(e){var t=this,i=this.generateBrainBoxRequest(e);return this.$http({method:"POST",url:this.streamingAttribute.recogniaHosts.technicalInsightUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(i)}).then(function(e){var i=t.xmlParserService.toJson(e.data),r=t.parseEventCountSummaryToTechnicalInsight(i);return t.$q.resolve(r)},function(){return t.$q.reject("BrainBox EventCountSummary: Connection Error")})},e.prototype.parseEventCountSummaryToTechnicalInsight=function(e){var t=new My;if("0"===e.pri.header.errors._count){var i=yt.toNumberOrNan(e.pri.summary.bullish.count),r=yt.toNumberOrNan(e.pri.summary.bearish.count),n=i-r;if(t.bullishCount=this.formatCount(i),t.bullishCountColor=isNaN(i)?Uy.GRAY.cssClass:Uy.GREEN.cssClass,t.bearishCount=this.formatCount(r),t.bearishCountColor=isNaN(i)?Uy.GRAY.cssClass:Uy.RED.cssClass,t.netCount=this.formatCount(n),t.netCountColor=Uy.getColor(n),isNaN(n))t.chartData=[{count:100}],t.chartColor=[Uy.GRAY.hexcode];else{var o={count:r},s={count:i};t.chartData=[o,s],t.chartColor=[Uy.RED.hexcode,Uy.GREEN.hexcode]}}else t.bullishCount="N/A",t.bullishCountColor=Uy.GRAY.cssClass,t.bearishCount="N/A",t.bearishCountColor=Uy.GRAY.cssClass,t.netCount="N/A",t.netCountColor=Uy.GRAY,t.chartData=[{count:100}],t.chartColor=[Uy.GRAY.hexcode];return t},e.prototype.formatCount=function(e){return isNaN(e)?"N/A":""+e},e.prototype.generateBrainBoxRequest=function(e){var t=new By;return t.setSymbol(e),t},e.prototype.getValueStatus=function(e){var t=this,i=this.generateBrainBoxRequest(e);return this.$http({method:"POST",url:this.streamingAttribute.recogniaHosts.valueAnalyzerUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$httpParamSerializerJQLike(i)}).then(function(e){var i=t.xmlParserService.toJson(e.data),r=t.parseValueStatusToBrainBoxValueAnalyzerView(i);return t.$q.resolve(r)},function(){return t.$q.reject("BrainBox ValueStatus: Connection Error")})},e.prototype.parseValueStatusToBrainBoxValueAnalyzerView=function(e){var t="0"!==e.pri.header.errors._count,i=this.parseRateOfReturnTuple(e.pri.ror_estimate),r=i[0],n=i[1],o=this.parseValueDescription(e.pri.value_description),s=new Ry;if(t){s.rateOfReturn=r,s.valueColor=Uy.GRAY.cssClass,s.valueDescription=o;var a={};a.value=100,s.chartColors=[Uy.GRAY.hexcode],s.chartData=[a],s.rateOfReturnColor=Uy.GRAY}else{s.rateOfReturn=r,s.valueColor=this.parseValuecolor(e.pri.value_color),s.valueDescription=o;var a={},c={};n>0?(a.value=n,c.value=100-n,s.chartColors=[Uy.GREEN.hexcode,Uy.GRAY.hexcode],s.chartData=[a,c],s.rateOfReturnColor=Uy.GREEN):n<0?(n=Math.abs(n),a.value=100-n,c.value=n,s.chartColors=[Uy.GRAY.hexcode,Uy.RED.hexcode],s.chartData=[a,c],s.rateOfReturnColor=Uy.RED):(a.value=100,s.chartColors=[Uy.GRAY.hexcode],s.chartData=[a],s.rateOfReturnColor=Uy.GRAY)}return s},e.prototype.parseRateOfReturnTuple=function(e){e=e||"";var t=e.replace("%",""),i=parseFloat(t);return isNaN(i)?["N/A",0]:[e,i]},e.prototype.parseValueDescription=function(e){return"not available"===e||void 0===e?"N/A":e},e.prototype.parseValuecolor=function(e){return""===e||void 0===e||"not available"===e?Uy.GRAY.cssClass:e},e.prototype.getBrainBox=function(e){var t=new xy,i=this.$q.defer();this.logUsage();var r=this.getEventCountSummary(e).then(function(e){t.technicalInsight=e}),n=this.getValueStatus(e).then(function(e){t.valueAnalyzer=e});return this.$q.all([r,n]).then(function(){i.resolve(t)}),i.promise},e.$inject=["StreamingAttribute","$http","$q","$httpParamSerializerJQLike","AlertService","URLStore","XMLParserService"],e}(),Uy=function(){function e(e,t){this.cssClass=e,this.hexcode=t}return e.getColor=function(t){return t>0?e.GREEN:t<0?e.RED:e.GRAY},e.RED=new e("red","#FF0000"),e.GRAY=new e("gray","#CCCCCC"),e.GREEN=new e("green","#2CAE00"),e}();angular.module("customized-dbsv",["web-api","parser"]).service("BrainBoxService",Fy).component("miniQuoteBrainBox",{template:i(/*! ../../html/customized-dbsv/mini-quote-brain-box.html */294),controller:_y,bindings:{page:"@"}});var qy=function(){function e(e,t,i,r,n,o,s,a,c,l,u,d,h,p,m,v,f,y,g,S,b,C,E,A,w,T,D,I,P,O,k,$,L,N,M,R,_,V){this.favouriteService=e,this.$scope=t,this.$q=i,this.mmService=r,this.itpService=n,this.accountService=o,this.streamingAttribute=s,this.mmConnectionState=a,this.userInfoService=c,this.initDataEvent=l,this.instrumentService=u,this.alertService=d,this.settingsService=h,this.pageRating=p,this.urlStore=m,this.$timeout=v,this.timeService=f,this.pageService=y,this.element=g,this.userApplicationProfileService=S,this.senseService=b,this.senseAnalyticsAPIService=C,this.$document=E,this.menuService=A,this.bidsOffersPageService=w,this.notificationService=T,this.newNotificationEvent=D,this.$window=I,this.marketTickerFilterService=P,this.multiOrderStore=O,this.tfexWatchStore=k,this.tfexPayoffStore=$,this.optionsSummaryStore=L,this.displayService=N,this.facebookService=M,this.marketSummaryStore=R,this.itpdService=_,this.gaService=V,this.PAGE_MULTIORDER=Ui.MULTI_ORDER}return e.prototype.$onInit=function(){parent.onkeydown=function(e){e.which===Se&&e.preventDefault(),e.which===be&&e.preventDefault()},this.startFlow("PUSH")},e.prototype.startFlow=function(e){var t=this,i=this.mmService.init().then(function(e){return t.setInitialApplicationsAttributes(e)},function(e){return t.alertService.showErrorAlert(e.errorMessage),t.$q.reject(e)}).then(function(){return t.initialUMSessions()}).then(function(){return t.setInitialInstrumentList()}).then(function(){return t.initialEquityAccountInfomation()}).then(function(){return t.initialDerivativesAccountInfomation()}).then(function(){return t.initialSettingService(t.initDataAttribute),t.$q.resolve()});i["finally"](function(){t.onInitialApplicationComplete()}),i["catch"](function(e){throw e})},e.prototype.initialUMSessions=function(){var e=this,t=this.mmService.initialUMSessionAtPrimary(),i=this.itpService.initialUMSession(),r=this.itpdService.initialUMSession();this.mmService.initialUMSessionAtSecondary();var n=this.$q.defer();return this.$timeout(function(){return n.resolve(),n.promise},5e3),n.promise=this.$q.all([t,i,r]).then(function(){return e.$q.resolve()},function(){return e.$q.resolve()}),n.promise},e.prototype.setInitialApplicationsAttributes=function(e){var t=this,i=this.$q.defer();this.streamingAttribute.initData=e,this.favouriteService.favouriteList=e.favouriteList,this.favouriteService.equityCategoryList=e.equityCategoryList,this.favouriteService.derivCategoryList=e.derivCategoryList,this.marketSummaryStore.setIndexDropdownData(e.indexList),this.initialEquityAccountList(e),this.initialDerivAccountList(e),this.accountService.processUserDefaultAccount(e),this.userInfoService.enableAutoPosition=e.enableAutoPosition,this.userInfoService.isEquityOnly=e.isEquityOnly,this.userInfoService.isDerivativesOnly=e.isDerivativesOnly,this.userInfoService.orderPushStatusFIS=e.orderPushStatusFIS,this.userInfoService.orderPushStatusDGW=e.orderPushStatusDGW,this.userInfoService.hasThaiNews=e.canShowThaiNews,this.userInfoService.canUseTechnicalChart=e.canUseTechnicalChart,this.setApplicationRole(e),this.initialTfexPageData(e),this.initialNewsSourceList(e.newsSourceList),this.setApplicationWindowsMode(),this.setFontSize(e.displayConfiguration.fontSize),this.setFontBold(e.displayConfiguration.isFontBold),this.instrumentService.inititalStockUnderlyingInstrumentList(e.stockUnderlyingList),this.urlStore.setApiUrlWithRole(),this.urlStore.setSenseURL(e),this.urlStore.setSenseAnalyticsURL(e),this.initialSenseService(e),this.initialSenseAnalyticsAPIService(e),this.initialPredefinedClickVolume(e),this.initialTickerFilterConfiguration(e.tickerFilter),this.initialMultiOrderList(e.multiOrderList),this.userApplicationProfileService.isEnableTrackPageAndEvent=e.isEnableTrackPageAndEvent,this.initDataAttribute=e;var r=this.loadCoreCSS(this.initDataAttribute.cssTemplate),n=this.loadColorCSS(this.initDataAttribute.customizePath.cssColor);return this.$q.all([r,n]).then(function(){i.resolve()},function(){t.alertService.showErrorAlert("Cannot get css [TimeOut]"),i.resolve()}),i.promise},e.prototype.initialTfexPageData=function(e){this.tfexWatchStore.initialStore(e.tfexPageData),this.tfexWatchStore.initialFavouriteDropdownList(this.favouriteService.getFavouriteDropdownItemAndMyPort()),this.tfexWatchStore.initialTfexFuturesDropdownList(e.tfexFuturesCategoryList),this.tfexWatchStore.initialTfexOptionsDropdownList(e.tfexOptionsCategoryList),this.tfexPayoffStore.initialPayoffUnderlying(e.tfexFuturesCategoryList),
this.optionsSummaryStore.initialStore(e.tfexPageData.optionsSummaryTab)},e.prototype.setInitialInstrumentList=function(){var e=this,t=this.$q.defer();return this.instrumentService.initialInstrumentList().then(function(){e.initialLastSelectedSymbolList(e.initDataAttribute.lastSelectedSymbolList),e.initialBidsOffersSymbolList(e.initDataAttribute.bidsOffersSymbolList),t.resolve()},function(i){return e.alertService.showErrorAlert("Error: Cannot get symbol list"),i instanceof Error?void t.reject(i):void t.resolve()}),t.promise},e.prototype.initialEquityAccountInfomation=function(){var e=this;if(this.userInfoService.isDerivativesOnly){var t=new _t;return t.equityAccountInfoList=[],t.turnoverList=[],this.setTurnOverList(t),this.$q.resolve(!0)}return this.getEquityAccountInformation().then(function(t){return e.userInfoService.isMarketRep()||e.updateInfomationInEquityAccountList(t),e.setTurnOverList(t),e.$q.resolve(!0)},function(t){var i=new _t;return i.equityAccountInfoList=[],i.turnoverList=[],e.setTurnOverList(i),t instanceof Error?e.$q.reject(t):e.$q.resolve(!0)})},e.prototype.getEquityAccountInformation=function(){var e=this,t=this.$q.defer(),i=this.$timeout(function(){e.alertService.showErrorAlert("Time out: Cannot get equity account list"),t.reject()},1e4);return this.itpService.getAccountListAndTurnoverList().then(function(e){t.resolve(e)},function(e){t.reject(e)})["finally"](function(){e.$timeout.cancel(i)}),t.promise},e.prototype.initialDerivativesAccountInfomation=function(){var e=this;return this.userInfoService.isEquityOnly?this.$q.resolve():0===this.accountService.accountDerivList.length?this.$q.resolve():this.accountService.accountDerivList[0].frontType!==fi.DGW?this.$q.resolve():this.getDerivativesAccountInformation(this.accountService.accountDerivList[0].accountNo).then(function(t){return t.isSuccess&&(e.accountService.accountDerivList[0].hasAutoNet=t.accountInfo.autoNet),e.$q.resolve()},function(t){return e.accountService.accountDerivList[0].hasAutoNet=!1,t instanceof Error?(e.alertService.showErrorAlert("Cannot get DerivativesAccountInformation: response is invalid"),console.error(t),e.$q.resolve()):e.$q.resolve()})},e.prototype.initialMultiOrderList=function(e){this.multiOrderStore.initialData(e)},e.prototype.initialNewsSourceList=function(e){var t=[];e.forEach(function(e){var i=Wn.lookup[e.name];i&&(i.isSupportThaiLanguage=e.isSupportThaiLanguage,e.isSupportThaiLanguage?i.selectedLanguage=Pr.THAI:i.selectedLanguage=Pr.ENGLISH,t.push(i))}),this.userInfoService.newsSoureList=t},e.prototype.getDerivativesAccountInformation=function(e){var t=this,i=this.$q.defer(),r=this.$timeout(function(){t.alertService.showErrorAlert("Time out: Cannot get equity account list"),i.reject()},1e4);return this.accountService.requestDerivativeAccountInfo(e).then(function(e){i.resolve(e)},function(e){i.reject(e)})["finally"](function(){t.$timeout.cancel(r)}),i.promise},e.prototype.onInitialApplicationComplete=function(){try{this.mmConnectionState.initialPrimaryPush(),this.userApplicationProfileService.isSecondaryWindow||this.notificationService.intialNotificationService(this.initDataAttribute.lastTimeReadNotificationMessage),this.initDataEvent.initDataComplete(),this.compareWhatsNewVersion(this.initDataAttribute.lastSeenWhatsNewVersion),this.setLogoPath(this.initDataAttribute.customizePath.logoPath),this.isApplicationInitializedComplete=!0,this.activatePage("0"),this.stopPace()}catch(e){console.error(e)}this.initialGoogleAnalyticsService(),this.initialFacebookAnalyticsService()},e.prototype.initialGoogleAnalyticsService=function(){try{this.initDataAttribute.googleAnalyticsConfiguration.isEnable&&this.gaService.init()}catch(e){console.error(e)}},e.prototype.initialFacebookAnalyticsService=function(){try{this.initDataAttribute.isEnableFacebookAnalytics&&this.facebookService.init()}catch(e){console.error(e)}},e.prototype.compareWhatsNewVersion=function(e){var t=this,i=this.convertWhatsNewVersionFromStringToNumberArray(e),r=[0,0,0];this.settingsService.getWhatsNewInfo().then(function(e){if(e.isSuccess){r=t.convertWhatsNewVersionFromStringToNumberArray(e.activeVersion);for(var n=0;n<3;n++)if(r[n]>i[n]){t.alertService.showWhatsNewAlert(e).then(function(){t.markCurrentVersionAsRead(e)});break}}})},e.prototype.convertWhatsNewVersionFromStringToNumberArray=function(e){e=e||"";var t=e.split(".").map(function(e){var t=parseInt(e,10);return isNaN(t)?0:t}),i=t[0],r=void 0===i?0:i,n=t[1],o=void 0===n?0:n,s=t[2],a=void 0===s?0:s;return[r,o,a]},e.prototype.markCurrentVersionAsRead=function(e){this.mmService.updateLastSeenWhatsNewVersion(e.activeVersion)},e.prototype.initialEquityAccountList=function(e){this.accountService.accountEquityList=[],e.itpRole!==Cr.TRADITIONAL&&(this.accountService.accountEquityList=vi.parseFromInitDataEquityAccountInfo(e.accountEquityList))},e.prototype.updateInfomationInEquityAccountList=function(e){var t=e.equityAccountInfoList;this.accountService.accountEquityList.forEach(function(e){t.forEach(function(t){e.accountNo===t.accountNo&&e.frontType===t.frontType&&(e.accountType=t.accountType,e.fullAccountType=t.fullAccountType,e.canTrade=t.canTrade,e.canUseBasket=t.canUseBasket,e.sblFlag=t.sblFlag,e.canTradeSellCollateral=t.canTradeSellCollateral,e.canTradeSellDeposit=t.canTradeSellDeposit,e.clientType=t.clientType,e.accountName=vi.parseAccountDisplayName(e),e.canTradeSBL=t.canTradeSBL)})})},e.prototype.initialDerivAccountList=function(e){this.accountService.accountDerivList=[],e.itpdRole!==Cr.TRADITIONAL&&(this.accountService.accountDerivList=vi.parseFromInitDataDerivativesAccountInfo(e.accountDerivList))},e.prototype.setTurnOverList=function(e){this.instrumentService.turnOverList=e.turnoverList},e.prototype.setApplicationRole=function(e){switch(this.userInfoService.setApplicationRole(tt.INVESTOR),this.userInfoService.hasMarketRepEquity=!1,this.userInfoService.hasMarketRepDerivatives=!1,e.itpRole){case Cr.MARKETREP1:case Cr.MARKETREP2:this.userInfoService.setApplicationRole(tt.MARKET_REP),this.userInfoService.hasMarketRepEquity=!0;break;case Cr.TRADITIONAL:"099"===e.brokerId&&this.userInfoService.setApplicationRole(tt.VIP)}switch(e.itpdRole){case Cr.MARKETREP1:case Cr.MARKETREP2:this.userInfoService.setApplicationRole(tt.MARKET_REP),this.userInfoService.hasMarketRepDerivatives=!0;break;case Cr.TRADITIONAL:"099"===e.brokerId&&this.userInfoService.setApplicationRole(tt.VIP)}},e.prototype.setApplicationWindowsMode=function(){this.userApplicationProfileService.isSecondaryWindow=void 0!==this.$window.isSecondaryWindow&&"true"===this.$window.isSecondaryWindow,Dr.isSeondaryWindows=this.userApplicationProfileService.isSecondaryWindow},e.prototype.initialLastSelectedSymbolList=function(e){var t=this;this.userApplicationProfileService.lastSelectedSymbolList=[],e.forEach(function(e){t.instrumentService.searchSymbol(e,Qe.ALL).then(function(e){t.userApplicationProfileService.lastSelectedSymbolList.push(e)})})},e.prototype.initialBidsOffersSymbolList=function(e){var t,i=this;if(0===e.length){t=new Array;for(var r=0;r<9;r++)t.push(dt.empty());this.bidsOffersPageService.setBidsOffersSymbolList(t)}else{t=new Array(e.length);var n=[];e.forEach(function(e,r){var o=i.instrumentService.searchSymbol(e,Qe.ALL).then(function(e){t[r]=e},function(){t[r]=dt.empty()});n.push(o)}),this.$q.all(n).then(function(){i.bidsOffersPageService.setBidsOffersSymbolList(t)})}},e.prototype.initialPredefinedClickVolume=function(e){this.initialPredefinedClickVolumeDerivatives(e),this.initialPredefinedClickVolumeEquity(e)},e.prototype.initialPredefinedClickVolumeEquity=function(e){var t=[];e.predefinedClickVolumeEquity.forEach(function(e){var i=new Yi;i.value=e,t.push(i)}),this.userApplicationProfileService.predefinedClickVolumeEquity=t},e.prototype.initialPredefinedClickVolumeDerivatives=function(e){var t=[];e.predefinedClickVolumeDerivatives.forEach(function(e){var i=new Yi;i.value=e,t.push(i)}),this.userApplicationProfileService.predefinedClickVolumeDerivatives=t},e.prototype.initialSenseService=function(e){this.userInfoService.isInvestor()&&(this.notificationService.senseGreetingMsg=e.senseConfig.senseGreetingMsg,this.notificationService.senseGreetingDetail=e.senseConfig.senseGreetingDetail,this.senseService.isEnableTrack=e.senseConfig.senseEnableTrack,this.senseService.isEnableGetInitPort=e.senseConfig.senseEnableGetInitPort,this.senseService.senseDispatchTime=1e3*parseInt(e.senseConfig.senseDispatchTime,10),this.senseService.updateScoreWithAllEquityAccount(),this.senseService.initialUpdateScoreTimer())},e.prototype.initialSenseAnalyticsAPIService=function(e){this.senseAnalyticsAPIService.isEnableSenseAnalytics=e.senseAnalyticsConfig.isEnable,this.senseAnalyticsAPIService.intervalSenseAnalytic=e.senseAnalyticsConfig.interval,this.senseAnalyticsAPIService.startProcess()},e.prototype.initialSettingService=function(e){this.settingsService.initialAllNotificationSettingConfiguration(e.allNotificationConfiguration),this.settingsService.initialOrderEntryConfiguration(e.orderEntryConfiguration),this.settingsService.initialDisplayConfiguration(e.displayConfiguration),this.settingsService.initialAccountShortcutConfiguration(e.accountShortcutConfiguration),this.settingsService.initialKeyboardShortcutConfiguration(e.keyboardShortcutConfiguration)},e.prototype.initialTickerFilterConfiguration=function(e){this.updateTickerFilterConfiguration(e.marketPage,this.marketTickerFilterService.filterInMarketPage),this.updateTickerFilterConfiguration(e.tickerPage,this.marketTickerFilterService.filterInTickerPage)},e.prototype.setFontSize=function(e){e&&e.length>0&&this.displayService.adjustFontSize(e)},e.prototype.setFontBold=function(e){this.displayService.setFontBold(e)},e.prototype.updateTickerFilterConfiguration=function(e,t){return t.mode=e.mode,t.isSumMode=e.isSumMode,t.byCriteriaConfig.isFilterByFavourite=e.criteriaFilter.isFavourite,t.byCriteriaConfig.selectedFilterFavourite=this.favouriteService.getFavouriteDropdownItemByIndex(e.criteriaFilter.favouriteFilter),t.byCriteriaConfig.isFilterByValue=e.criteriaFilter.isValue,t.byCriteriaConfig.limitValue=e.criteriaFilter.valueFilter,t.byCriteriaConfig.isFilterByVolume=e.criteriaFilter.isVolume,t.byCriteriaConfig.limitVolume=e.criteriaFilter.volumeFilter,t.byMarketConfig.isFilterBySET=e.marketFilter.isSET,t.byMarketConfig.isFilterByTFEX=e.marketFilter.isTFEX,t.byMarketConfig.selectedActiveList=this.favouriteService.getEquityCategoryItemsByName(e.marketFilter.selectedActiveListName),t.byMarketConfig.isFilterBySETActiveList=!!t.byMarketConfig.selectedActiveList&&e.marketFilter.isFilterBySETActiveList,t.byMarketConfig.setFilterList.forEach(function(t){switch(t.instrumentSubType){case Ms.common:e.marketFilter.setFilter.isCommonStock&&(t.isChecked=!0);break;case Ms.foreign:e.marketFilter.setFilter.isForeignStock&&(t.isChecked=!0);break;case Ms.convertible:e.marketFilter.setFilter.isConvertible&&(t.isChecked=!0);break;case Ms.warrant:e.marketFilter.setFilter.isWarrant&&(t.isChecked=!0);break;case Ms.dw:e.marketFilter.setFilter.isDerivativesWarrant&&(t.isChecked=!0);break;case Ms.preferred:e.marketFilter.setFilter.isPreferred&&(t.isChecked=!0);break;case Ms.etf:e.marketFilter.setFilter.isETF&&(t.isChecked=!0);break;case Ms.unitTrust:e.marketFilter.setFilter.isUnitTrust&&(t.isChecked=!0)}}),t.byMarketConfig.isFilterByTFEXOptions=e.marketFilter.tfexFilter.isOptions,e.marketFilter.futuresFilter&&e.marketFilter.tfexFilter.isFutures&&t.byMarketConfig.futuresFilterList.forEach(function(t){switch(t.instrumentSubType){case Ks.agricultural:t.isChecked=e.marketFilter.futuresFilter.isAgricultural;break;case Ks.currency:t.isChecked=e.marketFilter.futuresFilter.isCurrency;break;case Ks.index:t.isChecked=e.marketFilter.futuresFilter.isEquityIndex;break;case Ks.interest:t.isChecked=e.marketFilter.futuresFilter.isInterestRest;break;case Ks.metal:t.isChecked=e.marketFilter.futuresFilter.isMetal;break;case Ks.stock:t.isChecked=e.marketFilter.futuresFilter.isSingleStock;break;case Ks.deffred:t.isChecked=e.marketFilter.futuresFilter.isDefferedContact}}),t},e.prototype.setLogoPath=function(e){var t=this.element.find(".logo"),i="url('"+e+"')";t.css("background-image",i)},e.prototype.loadCoreCSS=function(e){var t=this,i=this.$q.defer(),r=(Date.now(),document.createElement("link"));r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e.cssCoreURL+"?"+this.$window.MI6_BUILD_GIT_VERSION),document.getElementsByTagName("body")[0].appendChild(r);var n=this.$timeout(function(){i.resolve(),alert("Load core css timeout")},6e5);return r.onload=function(){t.$timeout.cancel(n),i.resolve()},r.onerror=function(){t.alertService.showErrorAlert("Cannot get CoreCSS"),i.resolve()},i.promise},e.prototype.loadColorCSS=function(e){var t=this,i=this.$q.defer(),r=(Date.now(),document.createElement("link"));r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e+"?"+this.$window.MI6_BUILD_GIT_VERSION),document.getElementsByTagName("body")[0].appendChild(r);var n=this.$timeout(function(){i.resolve(),alert("Load color css timeout")},6e5);return r.onload=function(){t.$timeout.cancel(n),i.resolve()},r.onerror=function(){t.alertService.showErrorAlert("Cannot get ColorCSS"),i.resolve()},i.promise},e.prototype.onPageItemLoad=function(){this.menuService.reactiveCurrentDisplayPage()},e.prototype.activatePage=function(e){this.menuService.activatePage(e)},e.prototype.stopPace=function(){var e=this;this.removePace(),Pace.on("start",function(){e.removePace()})},e.prototype.removePace=function(){try{var e=Pace;e.bar.update(100),e.bar.finish(),e.options.target=null}catch(t){console.warn("Removing Pace error"),console.warn(t)}},Object.defineProperty(e.prototype,"isMenuInMoreActive",{get:function(){return this.menuService.isMenuInMoreActive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedInMoreMenuList",{get:function(){return this.menuService.selectedInMoreMenuList},set:function(e){this.menuService.selectedInMoreMenuList=e},enumerable:!0,configurable:!0}),e.prototype.isMenuActive=function(e){return this.menuService.isMenuActive(e)},e.prototype.isExpandOrder=function(){return this.menuService.isExpandOrder()},e.prototype.isShowPlaceOrder=function(){return this.menuService.isShowPlaceOrder()&&this.isApplicationInitializedComplete},e.prototype.isShowMultiOrder=function(){return this.menuService.isShowMultiOrder()},e.prototype.toggleViewAllOrder=function(){this.menuService.toggleViewAllOrder()},e.prototype.toggleMultiOrder=function(){this.menuService.toggleMultiOrder()},e.prototype.isShowAllOrder=function(){return this.menuService.isShowAllOrder()},e.prototype.getCurrentDisplayPage=function(){return this.menuService.currentDisplayPage},e.prototype.openGen5=function(){var e=this,t=this.streamingAttribute.itpHost;this.streamingAttribute.itpRole&&""!==this.streamingAttribute.itpRole.trim()||(t=this.streamingAttribute.derivHost),this.alertService.showPlaceOrderWarningAlert("Do you want to use Streaming for PC old version which some browsers may not support Adobe Flash?").then(function(){e.$window.location.href=""+t+e.urlStore.REDIRECT_PATH+"?txtPage=streaming5-force&brokerid="+e.streamingAttribute.brokerId+"&userref="+e.streamingAttribute.userref})},e.prototype.isOnSecondaryWindow=function(){return this.userApplicationProfileService.isSecondaryWindow},e.prototype.isMarketrepUser=function(){return this.userInfoService.isMarketRep()},e.prototype.getWidgetClass=function(){return this.settingsService.displayConfiguration.isWideScreen?this.isExpandOrder()?st.WideScreen.VIEW_ALL_ORDER:st.WideScreen.ORDER:this.isExpandOrder()?st.NormalScreen.VIEW_ALL_ORDER:st.NormalScreen.ORDER},e.$inject=["FavouriteService","$scope","$q","MMService","ITPService","AccountService","StreamingAttribute","MMConnectionState","UserInfoService","InitDataEvent","InstrumentService","AlertService","SettingsService","PageRating","URLStore","$timeout","TimeService","PageService","$element","UserApplicationProfileService","SenseService","SenseAnalyticsAPIService","$document","MenuService","BidsOffersPageService","NotificationService","NewNotificationEvent","$window","MarketTickerFilterService","MultiOrderStore","TfexWatchStore","TfexPayoffStore","OptionsSummaryStore","DisplayService","FacebookService","MarketSummaryStore","ITPDService","GAService"],e}(),jy=function(){function e(e,t,i,r,n,o){var s=this;this.$templateRequest=e,this.$compile=t,this.$sce=i,this.mmHost=r,this.processMenuEvent=n,this.$window=o,this.restrict="E",this.MAX_SHOWING_MENU=11,this.link=function(e,t,i,r){var n=Date.now(),o=s.trustSrc(s.mmHost+"getTemplate.jsp?"+n);s.$templateRequest(o).then(function(i){var r=JSON.parse(i);s.renderPageDom(r,t,e);var n=s.initialAllMenuList(r),o=s.processShowAndMoreMenuList(n);s.processMenuEvent.dispatchEvent(o)})}}return e.factory=function(){var t=function(t,i,r,n,o,s){return new e(t,i,r,n,o,s)};return t.$inject=["$templateRequest","$compile","$sce","MM_HOST","ProcessMenuEvent","$window"],t},e.prototype.trustSrc=function(e){return this.$sce.trustAsResourceUrl(e)},e.prototype.jsonToDom=function(e,t){var i=(e.tags[0].search("feedback")===-1?"":" fake-door-menu",'<div class="hide" ng-init="$ctrl.onPageItemLoad()" id="page-'+t+'-container">'),r="";return e.tags.forEach(function(i,n){var o=i.replace("></",' page="'+t+'" pageName="'+e.pageName+'"></');r="\n                "+r+"\n                "+o+"\n            "}),i="\n            "+i+"\n                "+r+"\n            </div>\n        "},e.prototype.renderPageDom=function(e,t,i){var r=this,n="";e.forEach(function(e,t){n="\n                    "+n+"\n                    "+r.jsonToDom(e,t)+"\n                "});var o=angular.element(n);t.append(o),this.$compile(o)(i)},e.prototype.initialAllMenuList=function(e){var t=[];if(e.forEach(function(e,i){var r=new qi;r.id=""+i,r.name=e.pageName,r.key=e.key;var n=e.tags.length>0?e.tags[0].search("feedback")===-1?"":" fake-door-menu":"";r.className=n,r.hidePlaceOrder=e.hidePlaceOrder,r.menuType=ji.DATA,t.push(r)}),!this.isSecondaryScreenMode()){var i=qi.generateSettingItem();t.push(i)}return t},e.prototype.isSecondaryScreenMode=function(){return"true"===this.$window.isSecondaryWindow},e.prototype.processShowAndMoreMenuList=function(e){var t=[],i=[];if(e.length<=this.MAX_SHOWING_MENU){e.forEach(function(e){t.push(e)});var r=t.length-1,n=t[r].className;t[r].className=n+" last-menu"}else{var o=e.slice(0,this.MAX_SHOWING_MENU-1),s=e.slice(this.MAX_SHOWING_MENU-1);s.unshift(qi.generateMoreItem()),o.forEach(function(e){t.push(e)}),s.forEach(function(e){i.push(e)})}return{allMenuList:e,showNormalMenuList:t,showMoreMenuList:i}},e}(),Hy=function(){function e(e,t,i,r){var n=this;this.$compile=e,this.$sce=t,this.mmHost=i,this.processMenuEvent=r,this.restrict="E",this.link=function(e,t,i,r){n.processMenuEvent.subscribe(function(i){void 0!==i&&(n.renderPageMenu(i,e,t),e.showMoreMenuList=i.showMoreMenuList)}.bind(n))}}return e.factory=function(){var t=function(t,i,r,n){return new e(t,i,r,n)};return t.$inject=["$compile","$sce","MM_HOST","ProcessMenuEvent"],t},e.prototype.jsonToMenuDom=function(e){var t='<div class="col-10 page-menu '+e.className+'" name="menu-item-'+e.id+'" key="'+e.key+'"\n                ng-click="$ctrl.activatePage(\''+e.id+'\')" stt-active-element="$ctrl.isMenuActive('+e.id+')">'+e.name+"</div>";return t},e.prototype.jsonToMenuMoreDom=function(){var e='<menu-more-dropdown class="col-10 page-menu last-menu" dropdown-name="menu-more" stt-active-element="$ctrl.isMenuInMoreActive" key-name="name"\n                    model="showMoreMenuList" selected="$ctrl.selectedInMoreMenuList" on-update="$ctrl.activatePage(model.id)">\n                </menu-more-dropdown>';return e},e.prototype.renderPageMenu=function(e,t,i){var r=this,n=e.showNormalMenuList,o="";n.forEach(function(e){o="\n                    "+o+"\n                    "+r.jsonToMenuDom(e)+"\n                "});var s=angular.element(o);this.$compile(s)(t),i.append(s);var a=e.showMoreMenuList;if(a.length>0){var c=this.jsonToMenuMoreDom(),l=angular.element(c);this.$compile(l)(t),i.append(l)}},e}(),Wy=function(){function e(){var e=this;this.restrict="A",this.scope={data:"<",propertyKeyName:"@",selectedKey:"<",onSelect:"&"},this.link=function(t,i,r,n){var o=i.find(".scroll-container");o.length>0&&(o.bind("keydown",function(r){r.which===Se&&(e.onKeyNarrowDown(t,i),r.preventDefault()),r.which===be&&(e.onKeyNarrowUp(t,i),r.preventDefault())}),o.attr("tabindex","0"),o.css("outline","none"))}}return e.factory=function(){var t=function(){return new e};return t.$inject=[],t},e.prototype.onKeyNarrowDown=function(e,t){var i=this;e.data.some(function(r,n){if(r[""+e.propertyKeyName]===e.selectedKey){var o=n+1;return o<e.data.length&&(i.updateScrollToDown(o,t),i.callEventCallBack(e,o)),!0}})},e.prototype.onKeyNarrowUp=function(e,t){var i=this;e.data.some(function(r,n){if(r[""+e.propertyKeyName]===e.selectedKey){var o=n-1;return o>=0&&(i.updateScrollToUp(o,t),i.callEventCallBack(e,o)),!0}})},e.prototype.callEventCallBack=function(e,t){e.$apply(function(){e.onSelect({newIndex:t})})},e.prototype.updateScrollToUp=function(e,t){var i=t.find(".scroll-container");if(i){var r=i.scrollTop(),n=i.children()[1].offsetHeight;if(e*n<=r){var o=i.scrollTop()-n;i.scrollTop(o)}}},e.prototype.updateScrollToDown=function(e,t){var i=t.find(".scroll-container");if(i){var r=i.scrollTop(),n=i.height(),o=i.children()[1].offsetHeight;(e+1)*o>r+n&&i.scrollTop(i.scrollTop()+o)}},e}(),Yy=function(){function e(){this.restrict="A",this.scope={data:"<",propertyKeyName:"@",selectedKey:"<",onSelect:"&"},this.link=function(e,t,i,r){t.on("keypress",function(e){rr.matchEnterKeyKeypress(e)&&t.blur()})}}return e.factory=function(){var t=function(){return new e};return t.$inject=[],t},e}(),Gy=function(e){function t(t,i,r,n){var o=e.call(this,t,n)||this;return o.pageService=t,o.element=i,o.streamingAttribute=r,o.screenTrackerService=n,o.isIframInitialized=!1,o}return ne(t,e),t.prototype.startService=function(){if(this.changeToPage(),!this.isIframInitialized){var e=this.element.find("iframe");e.attr("src",this.streamingAttribute.itpHost+"/tns2/SSORedirect.jsp?txtPage=tc&txtTerminal=pc"),this.isIframInitialized=!0}},t.prototype.getAnalyticsScreenName=function(){return ss.TRADE_CODE},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.$inject=["PageService","$element","StreamingAttribute","ScreenTrackerService"],t}(Zs);angular.module("sso-tns",["multi-market"]).component("tnsTradeCode",{template:i(/*! ../../html/sso-tns/tns-tradecode.html */295),controller:Gy,bindings:{page:"@"}});var Ky=function(e){function t(t,i,r,n,o,s,a,c,l,u,d){var h=e.call(this,r,d)||this;return h.streamingAttribute=t,h.element=i,h.pageService=r,h.$window=n,h.instrumentService=o,h.userApplicationProfileService=s,h.SSS_WEB_HOST=a,h.SSS_WEB_END_POINT=c,h.openStockScreenerBySenseNotificationActionEvent=l,h.$timeout=u,h.screenTrackerService=d,h.onPageLoadedCallBack=h.onPageLoaded.bind(h),h.onRecieveMessageFromStockScreenerCallBack=h.onRecieveMessageFromStockScreener.bind(h),h.onOpenStockScreenerBySenseNotificationActionEventCallBack=h.onOpenStockScreenerBySenseNotificationActionEvent.bind(h),h.isPageInitialized=!1,h}return ne(t,e),t.prototype.startService=function(){this.isPageInitialized||this.init(),this.changeToPage()},t.prototype.getAnalyticsScreenName=function(){return ss.STOCK_SCREENER},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.viewDidLoad=function(){},t.prototype.init=function(){this.$window.addEventListener("message",this.onRecieveMessageFromStockScreenerCallBack,!1),this.iframe=this.element.find("iframe"),this.iframe.attr("src",""+this.SSS_WEB_HOST+this.SSS_WEB_END_POINT),this.iframe.on("load",this.onPageLoadedCallBack),this.isPageInitialized=!0},t.prototype.onPageLoaded=function(){this.$window.addEventListener&&this.$window.addEventListener("message",this.onRecieveMessageFromStockScreenerCallBack,!1)},t.prototype.onOpenStockScreenerBySenseNotificationActionEvent=function(e){var t={screenerId:e};this.iframe[0].contentWindow.postMessage(t,"*")},t.prototype.onRecieveMessageFromStockScreener=function(e){var t=this,i=e.data;if("string"==typeof i){if("App Ready"===i)return void this.openStockScreenerBySenseNotificationActionEvent.subscribe(this.onOpenStockScreenerBySenseNotificationActionEventCallBack);if(i.indexOf("INST")!==-1){var r=i.split("|");this.instrumentService.searchSymbolByBrokerLicense(r[1]).then(function(e){t.userApplicationProfileService.setCurrentSymbol(e)})}}},t.prototype.stopService=function(){},t.$inject=["StreamingAttribute","$element","PageService","$window","InstrumentService","UserApplicationProfileService","SSS_WEB_HOST","SSS_WEB_END_POINT","OpenStockScreenerBySenseNotificationActionEvent","$timeout","ScreenTrackerService"],t}(Zs);angular.module("stock-screener",["multi-market"]).component("stockScreener",{template:i(/*! ../../html/sso-tns/tns-tradecode.html */295),controller:Ky,bindings:{page:"@"}});var zy=function(e){function t(t,i,r,n){var o=e.call(this,t,n)||this;return o.pageService=t,o.element=i,o.streamingAttribute=r,o.screenTrackerService=n,o.isIframInitialized=!1,o}return ne(t,e),t.prototype.startService=function(){if(!this.isIframInitialized){var e=this.element.find("iframe");e.attr("src",this.streamingAttribute.itpHost+"/realtime/thirdPartyInApp/C00_ThirdPartyInAppRedirect.jsp?appID=mai"),this.isIframInitialized=!0}this.changeToPage()},t.prototype.getAnalyticsScreenName=function(){return ss.MAI_SNAPSHOT},t.prototype.getAnalyticsTagName=function(){return[]},t.prototype.getAnalyticsProperties=function(){return null},t.prototype.viewDidLoad=function(){},t.prototype.stopService=function(){},t.$inject=["PageService","$element","StreamingAttribute","ScreenTrackerService"],t}(Zs);angular.module("mai-snapshot",["multi-market"]).component("maiSnapshotPage",{template:i(/*! ../../html/mai-snapshot/mai-snapshot-page.html */296),controller:zy,bindings:{page:"@"}});angular.module("new-realtime",["ngRoute","ui.bootstrap","ticker","bids-offers","multi-market","favourite","mini-quote","market-summary","order","web-api","vs-repeat","service","event-emitter","alert","portfolio","quote","settings","piwik","feedback","technical","asl-sso","bls-sso","sso-tns","multi-order","info","parser","conditional-order","click","notification","ngDragDrop","ngMaterial","ngAria","ui.sortable","account-info-detail","second-screen","trade-report","dca","tfex","jitta","rzModule","dgw-conditional-order","stock-screener","investor-now","mai-snapshot","iframe","logout"]).config(["$httpProvider",function(e){e.interceptors.push(["$q",function(e){return{request:function(e){return"GET"===e.method&&e.url.indexOf("assets/pages")!==-1&&(e.params={}||e.params,e.params.timeStamp=window.MI6_BUILD_GIT_VERSION),e}}}])}]).component("appController",{template:i(/*! ../../html/application-index.html */297),controller:qy}).directive("streaming",jy.factory()).directive("menuRenderer",Hy.factory()).directive("upDownSelectTable",Wy.factory()).directive("keyboardShortcutOrderStatus",ed.factory()).directive("unfocusAfterEnter",Yy.factory()).config(["$provide","$mdThemingProvider",function(e,t){e.decorator("$exceptionHandler",["$delegate","ExceptionStore",function(e,t){return function(i,r){e(i,r);var n=new Go(i);t.addLog(n)}}]),t.theme("default").accentPalette("green")}]).config(["$ariaProvider",function(e){e.config({bindRoleForClick:!1,tabindex:!1})}])},/*!*************************************!*\
  !*** ./html/alert/error-alert.html ***!
  \*************************************/
function(e,t){e.exports='<form ng-submit=error.ok() class=error-alert focus-modal uib-draggable> <div class=modal-body> <div class=modal-icon> <i class="icon-error mdi mdi-alert-circle"></i> </div> <div class=modal-content-block> <div>{{error.msg}}</div> </div> </div> <div class="modal-footer row-5"> <div class="col-11 row-3" ng-click=error.ok()> <button class="nr-btn btn-block" type=button name=focus>OK</button> </div> </div> </form> '},/*!***************************************!*\
  !*** ./html/alert/success-alert.html ***!
  \***************************************/
function(e,t){e.exports='<form ng-submit=success.ok() class=success-alert uib-draggable> <div class=modal-body> <div class=modal-icon> <i class="icon-success mdi mdi-checkbox-marked-circle"></i> </div> <div class=modal-content-block> <div>{{success.msg}}</div> </div> </div> <div class="modal-footer row-5"> <div class="col-11 row-3" ng-click=success.ok()> <button class="ok-button nr-btn btn-block" type=button name=focus>OK</button> </div> </div> </form> '},/*!************************************************!*\
  !*** ./html/alert/validation-error-alert.html ***!
  \************************************************/
function(e,t){e.exports='<div uib-draggable class=multiple-error-alert> <div class=modal-body> <div class=modal-icon> <i class="icon-error mdi mdi-alert-circle"></i> </div> <div class=modal-content-block> <div><strong>The following error(s) occured:</strong></div> <div> <div ng-repeat="msg in error.msgList track by $index">{{msg}}</div> </div> </div> </div> <div class="modal-footer row-5"> <div class="col-11 row-3"> <button class="nr-btn btn-block" type=button name=focus ng-click=error.ok()>OK</button> </div> </div> </div> '},/*!***************************************************!*\
  !*** ./html/alert/mutiple-error-topic-alert.html ***!
  \***************************************************/
function(e,t){e.exports='<form uib-draggable ng-submit=error.ok() class=multiple-error-alert> <div class=modal-body> <div class=modal-icon> <i class="icon-error mdi mdi-alert-circle"></i> </div> <div class=modal-content-block ng-repeat="errorObj in error.errorTopics track by $index"> <div><strong>{{errorObj.header}}<span ng-if="errorObj.msgList.length > 0">:</span></strong></div> <div> <div ng-repeat="msg in errorObj.msgList track by $index">{{msg}}</div> </div> </div> </div> <div class="modal-footer row-5"> <div class="col-11 row-3" ng-click=error.ok()> <button class="nr-btn btn-block" type=button name=focus>OK</button> </div> </div> </form> '},/*!***************************************************!*\
  !*** ./html/alert/place-order-warning-alert.html ***!
  \***************************************************/
function(e,t){e.exports='<form uib-draggable ng-submit=ctrl.ok() focus-modal> <div class=modal-body> <div class=modal-icon> <i class="icon-warning mdi mdi-alert"></i> </div> <div class=modal-content-block> <div class=warning-msg ng-repeat="msg in ctrl.warningMsgList track by $index">{{msg}}</div> </div> </div> <div class="modal-footer row-5"> <div class="button-wrapper col-10 row-3" ng-click=ctrl.confirm()> <button class="nr-btn btn-block confirm-button" type=button name=focus>Confirm</button> </div> <div class="button-wrapper col-10 row-3" ng-click=ctrl.cancel()> <button class="nr-btn btn-block cancel-button" type=button name=focus>Cancel</button> </div> </div> </form> '},/*!***************************************!*\
  !*** ./html/alert/offline-alert.html ***!
  \***************************************/
function(e,t){e.exports='<form uib-draggable ng-submit=alertCtrl.ok() focus-modal> <div class=modal-body> <div class=modal-content-block> <div>Your session has been expired or terminated.</div> <div>Please re-login.</div> </div> </div> <div class="modal-footer row-5"> <div class="button-wrapper col-10 row-3" ng-click=alertCtrl.confirm()> <button class="nr-btn btn-block confirm-button" type=button name=focus>Retry</button> </div> <div class="button-wrapper col-10 row-3" ng-click=alertCtrl.cancel()> <button class="nr-btn btn-block cancel-button" type=button name=focus>Close</button> </div> </div> </form> '},/*!*************************************************!*\
  !*** ./html/alert/successful-logout-alert.html ***!
  \*************************************************/
function(e,t){e.exports="<div> <div class=modal-body> <div class=modal-content-block> <div class=message>{{alertCtrl.message}}</div> </div> </div> </div> "},/*!********************************************************!*\
  !*** ./html/alert/notification-order-popup-alert.html ***!
  \********************************************************/
function(e,t){e.exports='<form class=notification-order-alert-popup uib-draggable ng-submit=alertCtrl.ok() focus-modal> <div class=modal-body> <div class=modal-icon> <div class=circle-icon><i class="mdi mdi-bell"></i></div> </div> <div class=modal-content-block> <div name=order-no> <label>Order No. :</label> <span>{{alertCtrl.order.orderNo}}</span> </div> <div name=symbol> <label>Symbol : </label> <span>{{alertCtrl.getSymbol()}}</span> </div> <div name=position ng-if=alertCtrl.isDeriv()> <label>Position : </label> <span>{{alertCtrl.order.position.fullname}}</span> </div> <div name=side> <label>Side : </label> <span ng-if=alertCtrl.isEquity()>{{alertCtrl.order.side.fullname}}</span> <span ng-if=alertCtrl.isDeriv()>{{alertCtrl.order.side.derivativeFullname}}</span> </div> <div name=status> <label>Status : </label> <span>{{alertCtrl.order.status}}</span> </div> <div name=matched-volume> <label>Volume : </label> <span>{{alertCtrl.order.volume | volume}}</span> </div> <div name=price> <label>Price : </label> <span class=price ng-if="alertCtrl.isLimitPriceType() === true">{{alertCtrl.order.price | price:alertCtrl.order.priceDigit }}</span> <span class=price ng-if="alertCtrl.isLimitPriceType() === false">{{alertCtrl.order.priceType.fullname}}</span> </div> </div> </div> <div class=modal-footer> <div class="col-11 row-3 detail-btn" ng-click=alertCtrl.openPopupDetail()> <button class="nr-btn btn-block" type=button name=focus>Detail</button> </div> <div class="col-11 row-3 close-btn" ng-click=alertCtrl.ok()> <button class="nr-btn btn-block" type=button name=focus>Close</button> </div> </div> </form>'},/*!***************************************************************!*\
  !*** ./html/alert/notification-price-volume-popup-alert.html ***!
  \***************************************************************/
function(e,t){e.exports='<form class=notification-price-volume-alert-popup uib-draggable ng-submit=alertCtrl.close() focus-modal> <div class=modal-body> <div class=modal-icon> <div class=circle-icon><i class="mdi mdi-bell"></i></div> </div> <div class=modal-content-block>{{alertCtrl.getShowMessage()}}</div> </div> <div class=modal-footer> <div class=model-button ng-click=alertCtrl.emitSideBuyEvent()> <button class="nr-btn btn-block" type=button>Buy</button> </div> <div class=model-button ng-click=alertCtrl.emitSideSellEvent()> <button class="nr-btn btn-block" type=button>Sell</button> </div> <div class=model-button ng-click=alertCtrl.close()> <button class="nr-btn btn-block" type=button name=focus>Close</button> </div> </div> </form>'},/*!*********************************************************!*\
  !*** ./html/alert/place-order-equity-confirmation.html ***!
  \*********************************************************/
function(e,t){e.exports='<form uib-draggable class=place-order-equity-confirmation ng-submit=alertCtrl.confirm()> <div class=modal-body> <div class=modal-icon> <div ng-class=alertCtrl.getSide().classname class="circle-icon icon-label">{{alertCtrl.getSide().fullname}}</div> </div> <div class=modal-content-block> <div class=top> <div> <span class="side col-15">{{alertCtrl.getSide().fullname}}</span> <span class="symbol col-21">{{alertCtrl.getSymbol()}}</span> </div> <div> <span class="volume-label col-15">Volume</span> <span class="volume col-21">{{alertCtrl.orderData.volume | volume}}</span> </div> <div> <span class="price-label col-15">Price</span> <span class="price col-21" ng-if="alertCtrl.isLimitPriceType() === true">{{alertCtrl.orderData.price | price:alertCtrl.priceDigit }}</span> <span class="price col-21" ng-if="alertCtrl.isLimitPriceType() === false">{{alertCtrl.getPriceType().fullname}}</span> </div> <div ng-if="alertCtrl.orderData.iceberg !== null"> <span class="iceberg-label col-15">Iceberg Volume</span> <span class="iceberg col-21">{{alertCtrl.orderData.iceberg | volume}}</span> </div> <div ng-if="alertCtrl.isDayValidity() === false"> <span class="validity-label col-15">Validity</span> <span class="validity col-21">{{alertCtrl.getValidity().fullname}}</span> </div> </div> <div class=bottom> <div> <span class="total-amount-label col-15">Total Amount</span> <span class=total-amount>{{alertCtrl.getTotalAmount()}} Baht</span> </div> <div> <span class=remark>(Commission and VAT are not included)</span> </div> </div> </div> </div> <div class="modal-footer row-7"> <div class="button-wrapper col-13 row-3" ng-click=alertCtrl.confirm()> <button ng-class=alertCtrl.getSide().classname class="confirm-button nr-btn btn-block" type=button> <span>{{alertCtrl.getSide().fullname}}</span> </button> </div> <div class="button-wrapper col-8 row-3" ng-click=alertCtrl.cancel()> <button class="cancel-button nr-btn btn-block" type=button> <span>Cancel</span> </button> </div> </div> </form> '},/*!**************************************************************!*\
  !*** ./html/alert/place-order-derivatives-confirmation.html ***!
  \**************************************************************/
function(e,t){e.exports='<form uib-draggable class=place-order-derivatives-confirmation ng-submit=alertCtrl.confirm()> <div class=modal-body> <div class=modal-icon> <div ng-class=alertCtrl.getSide().classname class="circle-icon icon-label">{{alertCtrl.getSide().derivativeFullname}}</div> </div> <div class=modal-content-block> <div class=top> <div> <span class="side col-15">{{alertCtrl.getSide().derivativeFullname}}</span> <span class="symbol col-21">{{alertCtrl.orderData.seriesId}}</span> </div> <div> <span class="position-label col-15">Position</span> <span class="position col-21">{{alertCtrl.getOrderPosition().name}}</span> </div> <div> <span class="volume-label col-15">Volume</span> <span class="volume col-21">{{alertCtrl.orderData.volume | volume}}</span> </div> <div> <span class="price-label col-15">Price</span> <span class="price col-21" ng-if="alertCtrl.isLimitPriceType() === true">{{alertCtrl.getPrice()}}</span> <span class="price col-21" ng-if="alertCtrl.isLimitPriceType() === false">{{alertCtrl.getPriceType().fullname}}</span> </div> <div ng-if="alertCtrl.orderData.publishVolume !== null"> <span class="iceberg-label col-15">Iceberg Volume</span> <span class="iceberg col-21">{{alertCtrl.orderData.publishVolume | volume}}</span> </div> <div ng-if="alertCtrl.isDayValidity() === false"> <span class="validity-label col-15">Validity</span> <span class="validity col-21"> <span>{{alertCtrl.getValidityFullname().name}}</span> <span>{{alertCtrl.getValidityFullname().detail}}</span> </span> </div><br> <div ng-if=alertCtrl.getStopCondition().hasStopCondition> <span class="stop-condition-label col-36">Stop Condition</span> <span class="stop-condition col-36">{{alertCtrl.getStopCondition().stopCondition}}</span> </div> </div> </div> </div>  <div class="modal-footer row-7"> <div class="button-wrapper col-12 row-3" ng-click=alertCtrl.confirm()> <button ng-class=alertCtrl.getSide().classname class="confirm-button nr-btn btn-block" type=button> <span>{{alertCtrl.getSide().derivativeFullname}}</span> </button> </div> <div class="button-wrapper col-8 row-3" ng-click=alertCtrl.cancel()> <button class="cancel-button nr-btn btn-block" type=button> <span>Cancel</span> </button> </div> </div> </form> '},/*!***************************************************************!*\
  !*** ./html/alert/place-trade-report-order-confirmation.html ***!
  \***************************************************************/
function(e,t){e.exports='<form uib-draggable class=place-trade-report-order-confirmation ng-submit=alertCtrl.confirm()> <div class=modal-body> <div class=modal-content-block> <div class=top> <div> <span class="buyer-label col-15">Buyer Account</span> <span class="buyer col-21">{{alertCtrl.orderData.accountNo}}</span> </div> <div> <span class="seller-label col-15">Seller Account</span> <span class="seller col-21">{{alertCtrl.orderData.accountNoSeller}}</span> </div> <div><br/></div> <div> <span class="position-label col-15">Position</span> <span class="position col-21">{{alertCtrl.getOrderPosition().name}}</span> </div> <div> <span class="symbol-label col-15">Series ID</span> <span class="symbol col-21">{{alertCtrl.orderData.seriesId}}</span> </div> <div> <span class="volume-label col-15">Volume</span> <span class="volume col-21">{{alertCtrl.orderData.volume | volume}}</span> </div> <div> <span class="price-label col-15">Price</span> <span class="price col-21">{{alertCtrl.orderData.price | formatWithoutDigit}}</span> </div> <div><br/></div> <div> <span class="trtype-label col-15">TR Type</span> <span class="trtype col-21">{{alertCtrl.orderData.TRType}}</span> </div> <div> <span class="cpm-label col-15">CPM</span> <span class="cpm col-21">{{alertCtrl.orderData.party}}</span> </div><br> </div> </div> </div>  <div class="modal-footer row-7"> <div class="button-wrapper col-12 row-3" ng-click=alertCtrl.confirm()> <button class="confirm-button nr-btn btn-block" type=button> <span>Confirm</span> </button> </div> <div class="button-wrapper col-8 row-3" ng-click=alertCtrl.cancel()> <button class="cancel-button nr-btn btn-block" type=button> <span>Cancel</span> </button> </div> </div> </form> '},/*!***************************************************!*\
  !*** ./html/alert/save-pin-disclaimer-alert.html ***!
  \***************************************************/
function(e,t){e.exports='<form uib-draggable class=save-pin-disclaimer-alert ng-submit=alertCtrl.confirm() focus-modal> <div class=modal-body> <div class=modal-content-block> <div class=top> <div> <span class=disclaimer>Disclaimer</span> </div> </div> <div class=detail> <div> <div>Save PIN function allows you to save your PIN until logout or session expired. During this period, re-enter PIN is not required for any transaction performed in this trading program only. </div> <div class=second-detail>Therefore, you understand and accept the risk of using this save pin function. We will take no responsibility on any loss or damage from any error occured.</div> </div> </div> <div class=bottom> <checkbox name=agree label="" is-check=alertCtrl.agreeBox on-click=alertCtrl.clickAgree()></checkbox> <div class=col-40> <span class=iagree>I agree with all the terms specified above.</span> </div> </div> </div> </div> <div class="modal-footer row-7"> <button class="confirm-button nr-btn nr-btn-medium" type=button name=focus id=agree-save-pin-btn ng-click=alertCtrl.confirm() ng-disabled=!alertCtrl.isAgree()> Agree </button> <button class="cancel-button nr-btn nr-btn-large" type=button name=focus id=disagree-save-pin-btn ng-click=alertCtrl.cancel()> Disagree </button> </div> </form>'},/*!******************************************************!*\
  !*** ./html/alert/multi-order-disclaimer-alert.html ***!
  \******************************************************/
function(e,t){e.exports=' <form class=multi-order-disclaimer-alert uib-draggable ng-submit=alertCtrl.confirm() focus-modal> <div class=modal-body> <div class=modal-content-block> <div class=top> <div> <span class=disclaimer>Multi-Order function</span> </div> </div> <div class=detail> <div> <div> \'Multi-Order\' is a function which provides a convenient way to place multiple orders by a single submission. </div> <div class=second-detail> Please follow the instruction in order to learn and understand how to use the function. <a href=# ng-click=alertCtrl.gotoInstruction()>Click here for the instruction.</a> </div> <div class=second-detail> Note: Term of use of the feature aligns with Term of Services of Streaming </div> </div> </div> <div class=bottom> <checkbox name=agree label="" is-check=alertCtrl.agreeBox on-click=alertCtrl.clickAgree()></checkbox> <div class=col-40> <span class=iagree>I agree with all the terms specified above.</span> </div> </div> </div> </div> <div class="modal-footer row-7"> <button class="confirm-button nr-btn nr-btn-medium" type=button name=focus id=agree-multi-order-btn ng-click=alertCtrl.confirm() ng-disabled=!alertCtrl.isAgree()> Agree </button> <button class="cancel-button nr-btn nr-btn-large" type=button name=focus id=disagree-multi-order-btn ng-click=alertCtrl.cancel()> Disagree </button> </div> </form>'},/*!************************************************!*\
  !*** ./html/alert/sense-disclaimer-alert.html ***!
  \************************************************/
function(e,t){e.exports='<form class=sense-disclaimer-alert uib-draggable ng-submit=alertCtrl.confirm() focus-modal> <div class=modal-body> <div class=modal-content-block> <div class=top> <div> <span class=disclaimer>Sense function</span> </div> </div> <div class=detail> <div> <div> "Settrade Sense" provides you with the information of your interests. </div> <div class=second-detail> Settrade does not make any recommendation on securities trading and not guarantee that Sense will update the information above accurately and timely. </div> <div class=second-detail> Push notification from Settrade Sense will get updated only on your latest login device. </div> <div class=second-detail> Settrade will take no responsibility on any loss or damage from any errors or actions. </div> <div class=second-detail> Your understand and accept the conditions of using this function. </div> <div class=second-detail> Settrade reserves the right to change or cancel this service. </div> </div> </div> <div class=bottom> <checkbox name=agree label="" is-check=alertCtrl.agreeBox on-click=alertCtrl.clickAgree()></checkbox> <div class=col-40> <span class=iagree>I agree with all the terms specified above.</span> </div> </div> </div> </div> <div class="modal-footer row-7"> <button class="confirm-button nr-btn nr-btn-medium" type=button name=focus id=agree-sense-order-btn ng-click=alertCtrl.confirm() ng-disabled=!alertCtrl.isAgree()> Agree </button> <button class="cancel-button nr-btn nr-btn-large" type=button name=focus id=disagree-sense-order-btn ng-click=alertCtrl.cancel()> Disagree </button> </div> </form>'},/*!*******************************************************!*\
  !*** ./html/alert/notification-disclaimer-alert.html ***!
  \*******************************************************/
function(e,t){e.exports='<form class=notification-disclaimer-alert uib-draggable ng-submit=alertCtrl.confirm() focus-modal> <div class=modal-body> <div class=modal-content-block> <div class=top> <div> <span class=disclaimer>Notification function</span> </div> </div> <div class=detail> <div>Settrade does not guarantee that you will receive notification completely and timely.</div> <div>Settrade will take no responsibility on any loss or damage from any errors or actions.</div> <div>You understand and accept the conditions of using this function.</div> </div> <div class=bottom> <checkbox name=agree label="" is-check=alertCtrl.agreeBox on-click=alertCtrl.clickAgree()></checkbox> <div class=col-40> <span class=iagree>I agree with all the terms specified above.</span> </div> </div> </div> </div> <div class="modal-footer row-7"> <button class="confirm-button nr-btn nr-btn-medium" type=button name=focus id=agree-notification-order-btn ng-click=alertCtrl.confirm() ng-disabled=!alertCtrl.isAgree()> Agree </button> <button class="cancel-button nr-btn nr-btn-large" type=button name=focus id=disagree-notification-order-btn ng-click=alertCtrl.cancel()> Disagree </button> </div> </form>'},/*!**************************************************************!*\
  !*** ./html/alert/remember-last-order-disclaimer-alert.html ***!
  \**************************************************************/
function(e,t){e.exports='<form class=remember-last-order-disclaimer-alert uib-draggable ng-submit=alertCtrl.confirm() focus-modal> <div class=modal-body> <div class=modal-content-block> <div class=top> <div> <span class=disclaimer>Disclaimer</span> </div> </div> <div class=detail> <div>With this "Remember Last Order" function, This program will remember your recent order to facilitate the resubmission process. Please be reminded of accidental duplicated orders.</div> <div>If you understand and accept the risk of using this "Remember Last Order" function. We will take no responsibility on any loss or damage from any errors or actions.</div> </div> <div class=bottom> <checkbox name=agree label="" is-check=alertCtrl.agreeBox on-click=alertCtrl.clickAgree()></checkbox> <div class=col-40> <span class=iagree>I agree with all the terms specified above.</span> </div> </div> </div> </div> <div class="modal-footer row-7"> <button class="confirm-button nr-btn nr-btn-medium" type=button name=focus id=agree-remember-last-order-order-btn ng-click=alertCtrl.confirm() ng-disabled=!alertCtrl.isAgree()> Agree </button> <button class="cancel-button nr-btn nr-btn-large" type=button name=focus id=disagree-remember-last-order-order-btn ng-click=alertCtrl.cancel()> Disagree </button> </div> </form>'},/*!********************************************************!*\
  !*** ./html/alert/multi-place-order-result-alert.html ***!
  \********************************************************/
function(e,t){e.exports='<form class=multi-place-order-result-alert> <div class=modal-body> <div class=modal-content-block> <div class="top row-19"> <div class="title row-4">Place Multi-Order Summary</div> <div class="result-detail row-9"> <ul> <li class="type-label col-20">Request Submitted</li> <li class="submit-amount col-18 col-12">{{alertCtrl.submitOrderAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Error</li> <li class="error-amount col-18">{{alertCtrl.errorAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Warning</li> <li class="warning-amount col-18">{{alertCtrl.warningAmount | volume}} order(s)</li> </ul> </div> </div> <div class=row-3> <ul class="header text-data-topic bg-header"> <li name=side class=col-10>Side</li> <li name=symbol class=col-20>Symbol</li> <li name=volume class=col-15>Volume</li> <li name=price class=col-17>Price</li> <li name=detail class=col-54>Detail</li> </ul> </div> <div class="multi-order-list scroll-container col-118 row-29"> <multi-place-order-result-row name=multi-order-result-row-{{::$index}} ng-repeat="order in alertCtrl.orderResultData track by $index" order=order></multi-place-order-result-row> </div> </div> </div> <div class="modal-footer row-9"> <button class="cancel-button nr-btn nr-btn-large" type=submit id=cancel-multi-orde-resultr-btn ng-click=alertCtrl.close()> Close </button> </div> </form>'},/*!*********************************************************!*\
  !*** ./html/alert/multi-place-order-confirm-alert.html ***!
  \*********************************************************/
function(e,t){e.exports='<form class=multi-place-order-confirm-alert> <div class=modal-body> <div class=modal-content-block> <div class="top row-4"> <div class="title row-4">Place Multi-Order Confirmation</div> </div> <div class=row-3> <ul class="header text-data-topic bg-header"> <li name=side class=side>Side</li> <li name=symbol class=symbol>Symbol</li> <li name=volume class=volume>Volume</li> <li name=iceberg class=iceberg>Iceberg Volume</li> <li name=price class=price>Price</li> <li name=validity class=validity>Validity</li> </ul> </div> <div class="list-box scroll-container col-118 row-39"> <ul class=multi-order-list ng-repeat="order in alertCtrl.ordersData track by $index" ng-class="{\'sell\': order.side.shortname === \'S\', \'buy\': order.side.shortname === \'B\'}" name=multi-order-confirm-row-{{$index}}> <li name=side class=side>{{order.side.shortname}}</li> <li name=symbol class=symbol>{{alertCtrl.getDisplaySymbol($index)}}</li> <li name=volume class=volume>{{order.volume}}</li> <li name=iceberg class=iceberg>{{alertCtrl.getDisplayIceberg($index)}}</li> <li name=price class=price>{{alertCtrl.getDisplayPrice($index)}}</li> <li name=validity class=validity>{{order.validity.label}}</li> </ul> </div> </div> </div> <div class="modal-footer row-9"> <button class="confirm-button nr-btn nr-btn-large" id=confirm-multi-order-btn ng-click=alertCtrl.confirm()> Confirm </button> <button class="cancel-button nr-btn nr-btn-large" id=cancel-multi-order-btn ng-click=alertCtrl.close()> Cancel </button> </div> </form>'},/*!*****************************************************************!*\
  !*** ./html/alert/multi-place-order-confirm-warning-alert.html ***!
  \*****************************************************************/
function(e,t){e.exports='<form class=multi-place-order-confirm-warning-alert> <div class=modal-body> <div class=modal-content-block> <div class="top row-19"> <div class="title row-4">Place Multi-Order Confirmation</div> <div class="result-detail row-9"> <ul> <li class="type-label col-20">Request Submitted</li> <li class="submit-amount col-18 col-12">{{alertCtrl.submitOrderAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Error</li> <li class="error-amount col-18">{{alertCtrl.errorAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Warning</li> <li class="warning-amount col-18">{{alertCtrl.warningAmount | volume}} order(s)</li> </ul> </div> <div class="remark row-4">For the order(s) with warning, Please select the checkbox(es) to confirm warning</div> </div> <div class=row-3> <ul class="header text-data-topic bg-header"> <li name=confirm-warn class=col-3></li> <li name=side class=col-10>Side</li> <li name=symbol class=col-20>Symbol</li> <li name=volume class=col-15>Volume</li> <li name=price class=col-17>Price</li> <li name=detail class=col-49>Detail</li> </ul> </div> <div class="multi-order-list scroll-container col-118 row-29"> <multi-place-order-result-with-confirm-warning-row ng-click=alertCtrl.checkIfOrderChecked() name=multi-place-order-result-with-confirm-warning-row-{{::$index}} ng-repeat="order in alertCtrl.orderResultData track by $index" order=order index={{$index}}></multi-place-order-result-with-confirm-warning-row> </div> </div> </div> <div class="modal-footer row-9"> <button class="confirm-button nr-btn nr-btn-large" ng-disabled=alertCtrl.isDisableConfirmButton id=confirm-multi-order-btn ng-click=alertCtrl.confirm()> Confirm </button> <button class="cancel-button nr-btn nr-btn-large" type=submit id=cancel-multi-orde-resultr-btn ng-click=alertCtrl.close()> Close </button> </div> </form>'},/*!********************************************************!*\
  !*** ./html/alert/multi-place-order-upload-alert.html ***!
  \********************************************************/
function(e,t){e.exports='<form class=modal-multi-place-order-upload> <div class=modal-body> <div class=modal-content-block> <div class=title>Upload a Multi Order file</div> <div class=detail> The Multi Order file uploading is in progress</div> <div class=detail> If you want to cancel the upload process, please click "Cancel"</div> </div> </div> <div class="modal-footer row-5"> <button class="cancel-button nr-btn nr-btn-large" id=cancel-multi-order-upload-btn ng-click=alertCtrl.onCancel()> Cancel </button> </div> </form>'},/*!*********************************************************************!*\
  !*** ./html/alert/multi-place-derivatives-order-confirm-alert.html ***!
  \*********************************************************************/
function(e,t){e.exports='<form class=multi-place-derivatives-order-confirm-alert> <div class=modal-body> <div class=modal-content-block> <div class="top row-4"> <div class="title row-4">Place Multi-Order Confirmation</div> </div> <div class=row-3> <ul class="header text-data-topic bg-header"> <li name=side class=side>Side</li> <li name=position class=position>Position</li> <li name=symbol class=symbol>Symbol</li> <li name=volume class=volume>Volume</li> <li name=iceberg class=iceberg>Iceberg Volume</li> <li name=price class=price>Price</li> <li name=validity class=validity>Validity</li> </ul> </div> <div class="list-box scroll-container col-118 row-39"> <ul class=multi-order-list ng-repeat="order in alertCtrl.ordersData track by $index" ng-class="{\'sell\': order.side.shortname === \'S\', \'buy\': order.side.shortname === \'B\'}" name=multi-order-confirm-row-{{$index}}> <li name=side class=side>{{order.side.derivativeFullname}}</li> <li name=position class=position>{{order.position.fullname}}</li> <li name=symbol class=symbol>{{order.symbol}}</li> <li name=volume class=volume>{{order.volume}}</li> <li name=iceberg class=iceberg>{{alertCtrl.getDisplayIceberg($index)}}</li> <li name=price class=price>{{alertCtrl.getDisplayPrice($index)}}</li> <li name=validity class=validity>{{order.validity.label}}</li> </ul> </div> </div> </div> <div class="modal-footer row-9"> <button class="confirm-button nr-btn nr-btn-large" id=confirm-multi-order-btn ng-click=alertCtrl.confirm()> Confirm </button> <button class="cancel-button nr-btn nr-btn-large" id=cancel-multi-order-btn ng-click=alertCtrl.close()> Cancel </button> </div> </form>'},/*!********************************************************************!*\
  !*** ./html/alert/multi-place-derivatives-order-result-alert.html ***!
  \********************************************************************/
function(e,t){e.exports='<form class=multi-place-order-result-alert> <div class=modal-body> <div class=modal-content-block> <div class="top row-19"> <div class="title row-4">Place Multi-Order Summary</div> <div class="result-detail row-9"> <ul> <li class="type-label col-20">Request Submitted</li> <li class="submit-amount col-18 col-12">{{alertCtrl.submitOrderAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Error</li> <li class="error-amount col-18">{{alertCtrl.errorAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Warning</li> <li class="warning-amount col-18">{{alertCtrl.warningAmount | volume}} order(s)</li> </ul> </div> </div> <div class=row-3> <ul class="header text-data-topic bg-header"> <li name=side class=col-10>Side</li> <li name=position class=col-10>Position</li> <li name=symbol class=col-20>Symbol</li> <li name=volume class=col-15>Volume</li> <li name=price class=col-17>Price</li> <li name=detail class=col-44>Detail</li> </ul> </div> <div class="multi-order-list scroll-container col-118 row-29"> <multi-place-derivatives-order-result-row name=multi-order-result-row-{{::$index}} ng-repeat="order in alertCtrl.orderResultData track by $index" order=order></multi-place-derivatives-order-result-row> </div> </div> </div> <div class="modal-footer row-9"> <button class="cancel-button nr-btn nr-btn-large" type=submit id=cancel-multi-orde-resultr-btn ng-click=alertCtrl.close()> Close </button> </div> </form>'},/*!*****************************************************************************!*\
  !*** ./html/alert/multi-place-derivatives-order-confirm-warning-alert.html ***!
  \*****************************************************************************/
function(e,t){e.exports='<form class=multi-place-order-confirm-warning-alert> <div class=modal-body> <div class=modal-content-block> <div class="top row-19"> <div class="title row-4">Place Multi-Order Confirmation</div> <div class="result-detail row-9"> <ul> <li class="type-label col-20">Request Submitted</li> <li class="submit-amount col-18 col-12">{{alertCtrl.submitOrderAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Error</li> <li class="error-amount col-18">{{alertCtrl.errorAmount | volume}} order(s)</li> </ul> <ul> <li class="type-label col-20">Warning</li> <li class="warning-amount col-18">{{alertCtrl.warningAmount | volume}} order(s)</li> </ul> </div> <div class="remark row-4">For the order(s) with warning, Please select the checkbox(es) to confirm warning</div> </div> <div class=row-3> <ul class="header text-data-topic bg-header"> <li name=confirm-warn class=col-3></li> <li name=side class=col-10>Side</li> <li name=position class=col-10>Position</li> <li name=symbol class=col-20>Symbol</li> <li name=volume class=col-15>Volume</li> <li name=price class=col-17>Price</li> <li name=detail class=col-39>Detail</li> </ul> </div> <div class="multi-order-list scroll-container col-118 row-29"> <multi-place-derivatives-order-result-with-confirm-warning-row ng-click=alertCtrl.checkIfOrderChecked() name=multi-place-order-result-with-confirm-warning-row-{{::$index}} ng-repeat="order in alertCtrl.ordersData track by $index" order=order index={{$index}}></multi-place-derivatives-order-result-with-confirm-warning-row> </div> </div> </div> <div class="modal-footer row-9"> <button class="confirm-button nr-btn nr-btn-large" ng-disabled=alertCtrl.isDisableConfirmButton id=confirm-multi-order-btn ng-click=alertCtrl.confirm()> Confirm </button> <button class="cancel-button nr-btn nr-btn-large" type=submit id=cancel-multi-orde-resultr-btn ng-click=alertCtrl.close()> Close </button> </div> </form>'},/*!***************************************************!*\
  !*** ./html/alert/cancel-order-confirmation.html ***!
  \***************************************************/
function(e,t){e.exports='<div class=cancel-order-confirmation ng-submit=alertCtrl.confirm()> <div class="modal-body row-24"> <div class=modal-content-block> <div class=order-list-description>Please confirm to cancel :</div> <order-list class="col-94 row-19" equity-order-data=alertCtrl.equityOrderData deriv-order-data=alertCtrl.derivOrderData></order-list> </div> </div> <div class="modal-footer row-7"> <div class="col-63 row-3 pin-modal-div"> <span ng-if=alertCtrl.isShouldShowPin()> <pin-input class="col-10 row-3" placeholder=PIN next-focus-elements=alertCtrl.pinNextFocusElement is-in-modal=true name=confirm-cancel-order pin=alertCtrl.modalPin id=cancel-order-pin></pin-input> </span> </div> <div class="col-30 row-3 modal-footer-div"> <button ng-click=alertCtrl.confirm() class="nr-btn nr-btn-xl confirm-button" type=button ng-disabled=alertCtrl.isDisabledConfirmButton()> <span ng-if=alertCtrl.hasEquityOrder()>Confirm {{alertCtrl.equityOrderData.length}} Order(s)</span> <span ng-if=alertCtrl.hasDerivOrder()>Confirm {{alertCtrl.derivOrderData.length}} Order(s)</span> </button> <button ng-click=alertCtrl.cancel() class="nr-btn nr-btn-medium cancel-button"> <span>Close</span> </button> </div> </div> </div>'},/*!***************************************************!*\
  !*** ./html/alert/change-order-confirmation.html ***!
  \***************************************************/
function(e,t){e.exports='<div class=change-order-confirmation uib-draggable ng-submit=alertCtrl.confirm()> <div class="modal-body row-17"> <div class=modal-content-block> <div class=description>Please confirm to change :</div> <div class=content ng-repeat="confirmData in alertCtrl.confirmChangeList"> <label id=confirm-change-label-{{$index}}> {{ confirmData.label }} </label> <label id=confirm-change-value-{{$index}}> {{ confirmData.value }} </label> </div> </div> </div> <div class="modal-footer row-7"> <div class="col-17 row-3 pin-modal-div"> <pin-input ng-if=alertCtrl.isRequiredPin next-focus-elements=alertCtrl.pinNextFocusElement is-in-modal=true name=confirm-change-order class="col-10 row-3" placeholder=PIN ng-init=alertCtrl.initView() pin=alertCtrl.modalPin id=change-order-pin></pin-input> </div> <div class="row-3 modal-footer-div"> <button ng-click=alertCtrl.confirm() class="nr-btn nr-btn-large confirm-button" type=button ng-disabled=alertCtrl.isDisabledConfirmButton()> <span>Confirm</span> </button> <button ng-click=alertCtrl.cancel() class="nr-btn nr-btn-small cancel-button"> <span>Close</span> </button> </div> </div> </div>'},/*!*****************************************!*\
  !*** ./html/alert/whats-new-alert.html ***!
  \*****************************************/
function(e,t){e.exports='<form focus-modal> <div class=modal-body> <div class=white> <ul class=release-version> <li class=app-name> A new version of Settrade Streaming for PC is available! </li> <li class=app-version> Version {{ whatsNewAlertCtrl.version }} </li> </ul> <div class=release-note> <ul class=title> <li> What\'s new: </li> </ul> <ul class=detail> <li ng-repeat="msg in whatsNewAlertCtrl.messageList track by $index"> {{ msg }} </li> </ul> </div> </div> </div> <div class="modal-footer row-5"> <div class="col-11 row-3" ng-click=whatsNewAlertCtrl.ok()> <button class="nr-btn btn-block" type=button name=focus>OK</button> </div> </div> </form>'},/*!****************************************************!*\
  !*** ./html/alert/market-ticker-filter-modal.html ***!
  \****************************************************/
function(e,t){e.exports='<form class=market-ticker-filter> <div class="modal-header row-3"> Filter Ticker </div> <div class="modal-body row-77"> <div class=modal-content-block> <div name=filter-by-mode-sum class=row-6> <checkbox name=mode-sum label="Mode Sum" is-check=filterCtrl.currentConfig.isSumMode on-click=""></checkbox> </div> <div name=filter-by-criteria class=row-16> <div name=criteria-radio> <span> <input type=radio name=radio-filter-by value=BY_CRITERIA id=radio-filter-by-criteria class="col-3 radio-buy-sell" ng-model=filterCtrl.currentConfig.mode> <label for=radio-filter-by-criteria>Filter by Criteria</label> <div class=check></div> </span> </div> <div name=criteria-list> <div> <span class=col-28> <checkbox name=favourite-criteria label="Filter by Favourite" is-check=filterCtrl.currentConfig.byCriteriaConfig.isFilterByFavourite on-click=filterCtrl.onCheckFilterByFavourite() is-disabled=filterCtrl.currentConfig.isByMarketMode()></checkbox> </span> <span class=col-19> <index-dropdown class="col-19 ticker-filter-favourite-dropdown" model=filterCtrl.favouriteDropdownItemList selected=filterCtrl.currentConfig.byCriteriaConfig.selectedFilterFavourite key-name=showName ng-disabled="filterCtrl.currentConfig.isByMarketMode() || !filterCtrl.currentConfig.byCriteriaConfig.isFilterByFavourite" dropdown-name=ticker-filter-favourite on-update=filterCtrl.onFavoriteChange(model)></index-dropdown> </span> </div> <div> <span class=col-28> <checkbox name=value-criteria label="Filter by Value >=" is-check=filterCtrl.currentConfig.byCriteriaConfig.isFilterByValue on-click="" is-disabled=filterCtrl.currentConfig.isByMarketMode()></checkbox> </span> <span class=col-19> <volume-input volume=filterCtrl.currentConfig.byCriteriaConfig.limitValueStr name=value placeholder=Value class="col-19 row-3" is-disabled="filterCtrl.currentConfig.isByMarketMode() || !filterCtrl.currentConfig.byCriteriaConfig.isFilterByValue"></volume-input> </span> </div> <div> <span class=col-28> <checkbox name=volume-criteria label="Filter by Volume >=" is-check=filterCtrl.currentConfig.byCriteriaConfig.isFilterByVolume on-click="" is-disabled=filterCtrl.currentConfig.isByMarketMode()></checkbox> </span> <span class=col-19> <volume-input volume=filterCtrl.currentConfig.byCriteriaConfig.limitVolumeStr name=volume placeholder=Volume class="col-19 row-3" is-disabled="filterCtrl.currentConfig.isByMarketMode() || !filterCtrl.currentConfig.byCriteriaConfig.isFilterByVolume"></volume-input> </span> </div> </div> </div> <div name=filter-by-market class=row-47> <div name=market-radio> <span> <input type=radio name=radio-filter-by value=BY_MARKET id=radio-filter-by-market class="col-3 radio-buy-sell" ng-model=filterCtrl.currentConfig.mode> <label for=radio-filter-by-market>Filter by Market</label> <div class=check></div> </span> </div> <div name=market-list> <div name=set class=row-26> <div name=set-checkbox class=row-3> <checkbox name=set label=SET is-check=filterCtrl.currentConfig.byMarketConfig.isSETChecked on-click="" is-disabled=filterCtrl.currentConfig.isDisabledSET()></checkbox> </div> <div class=set-config-list> <div> <span class=col-28> <checkbox name=filter-set-active-list-criteria label="Market ranking by" is-check=filterCtrl.isFilterBySETActiveList is-disabled=filterCtrl.currentConfig.isDisabledSET()></checkbox> </span> <span class=col-19> <index-dropdown class="col-19 ticker-filter-set-active-list-dropdown" model=filterCtrl.setActiveList selected=filterCtrl.currentConfig.byMarketConfig.selectedActiveList key-name=name ng-disabled="filterCtrl.currentConfig.isDisabledSET() || !filterCtrl.currentConfig.byMarketConfig.isFilterBySETActiveList" dropdown-name=ticker-filter-set-active-list-dropdown on-update=filterCtrl.onSETActiveListChange(model)></index-dropdown> </span> </div> <div> <span class=col-28> <checkbox name=filter-set-list-secuirties-type-criteria label="Securities Type" is-check=filterCtrl.isFilterBySETSecuritiesType is-disabled=filterCtrl.currentConfig.isDisabledSET()></checkbox> </span> <div name=set-instrument-type-checkbox class="row-13 col-75"> <span ng-repeat="setFilterType in filterCtrl.currentConfig.byMarketConfig.setFilterList" class=col-24> <checkbox name={{setFilterType.key}} label={{setFilterType.name}} is-check=setFilterType.isChecked on-click="" is-disabled=filterCtrl.currentConfig.isDisabledSET()></checkbox> </span> </div> </div> </div> </div> <div name=tfex class=row-15> <div name=tfex-checkbox class=row-3> <checkbox name=tfex label=TFEX is-check=filterCtrl.currentConfig.byMarketConfig.isTFEXChecked on-click="" is-disabled=filterCtrl.currentConfig.isDisabledTFEX()></checkbox> </div> <div class=tfex-config-list> <div name=option-checkbox class=row-3> <checkbox name=options label=Options is-check=filterCtrl.currentConfig.byMarketConfig.isFilterByTFEXOptions on-click="" is-disabled=filterCtrl.currentConfig.isDisabledTFEX()></checkbox> </div> <div name=future-checkbox class=row-3> <checkbox name=futures label=Futures is-check=filterCtrl.currentConfig.byMarketConfig.isFilterByTFEXFuturesType on-click="" is-disabled=filterCtrl.currentConfig.isDisabledTFEX()></checkbox> </div> <div name=tfex-instrument-type-checkbox class="row-13 col-75"> <div ng-repeat="tfexFilterType in filterCtrl.currentConfig.byMarketConfig.futuresFilterList" class=col-24> <checkbox name={{tfexFilterType.key}} label={{tfexFilterType.name}} is-check=tfexFilterType.isChecked on-click="" is-disabled=filterCtrl.currentConfig.isDisabledTFEX()></checkbox> </div> </div> </div> </div> </div> </div> </div> </div> <div class="modal-footer row-5"> <button ng-click=filterCtrl.confirm() class="nr-btn nr-btn-large save-button" type=button> <span>Save</span> </button> <button ng-click=filterCtrl.cancel() class="nr-btn nr-btn-large cancel-button"> <span>Close</span> </button> </div> </form>'},/*!************************************************************!*\
  !*** ./html/alert/dgw-conditional-order-confirmation.html ***!
  \************************************************************/
function(e,t){e.exports='<div class=dgw-conditional-order-confirmation> <div class=modal-header>Conditional Order Confirmation</div> <div class=modal-body> <table> <tbody> <tr> <th class=col-side>{{ ctrl.store.side.isBuy() ? "Buy": "Sell" }}:</th> <td class=col-symbol> {{ctrl.store.symbol.name}}<span ng-if=ctrl.store.currentOrderEntrySetting.autoNVDRConfiguration.enable>-R</span> </td> </tr> <tr> <th>Volume:</th> <td class=col-volume ng-bind=ctrl.store.volumeModel></td> </tr> <tr> <th>Price:</th> <td class=col-price ng-bind=ctrl.store.displayPrice></td> </tr> <tr> <th>Total:</th> <td class=col-total ng-bind=ctrl.store.displayTotal></td> </tr> <tr class=component-seperator-bottom> <td colspan=2 class=text-center>(Commission and Vat not included)</td> </tr> </tbody> <tbody> <tr> <th>Cond. Type:</th> <td class=col-cond-type>{{ ctrl.store.isStopOrder ? "Stop Order": "Trailing Stop"}}</td> </tr> </tbody> <tbody ng-if=ctrl.store.isStopOrder ng-repeat="condition in ctrl.store.conditions track by $index"> <tr> <td colspan=2 ng-if="ctrl.store.conditions.length > 1"> Condition {{ $index + 1 }} </td> <td colspan=2 ng-if="ctrl.store.conditions.length <= 1"> Condition </td> </tr> <tr> <th>Trigger Symbol:</th> <td class="col-trigger-symbol-{{ $index }}" ng-bind=condition.triggerSymbol></td> </tr> <tr> <th>Trigger Cond.:</th> <td class="col-trigger-cond-{{ $index }}" ng-bind=condition.triggerCondition.name></td> </tr> <tr> <th>Trigger Price:</th> <td class="col-trigger-price-{{ $index }}" ng-bind=condition.displayTriggerPrice></td> </tr> </tbody> <tbody ng-if=!ctrl.store.isStopOrder> <tr> <td colspan=2>Condition</td> </tr> <tr> <th>Trigger Cond.:</th> <td class=col-trigger-cond ng-bind=ctrl.store.conditions[0].triggerCondition.name></td> </tr> <tr> <th>Trigger Price:</th> <td class=col-trigger-price ng-bind=ctrl.store.conditions[0].displayTriggerPrice></td> </tr> </tbody> <tbody> <tr ng-if="ctrl.store.isStopOrder && ctrl.store.conditions.length > 1"> <th>Conditional operation:</th> <td class=col-cond-operation ng-bind=ctrl.store.selectedConditionOperation.name></td> </tr> <tr> <th>Valid Till:</th> <td class=col-valid-till ng-bind=ctrl.store.displayValidTill></td> </tr> <tr> <td colspan=2 class=text-center> <p> <small> Conditional Order will be kept and triggered at broker\'s server. </small> </p> <p> <small>You can track status via Cond. Order Status menu.</small> </p> </td> </tr> </tbody> </table> </div> <div class="modal-footer row-7"> <div class="button-wrapper col-21 row-3" ng-click=ctrl.confirm()> <button class="confirm-button nr-btn btn-block nr-btn-xl" type=button ng-class="{\n                    \'buy\': ctrl.store.side.isBuy(),\n                    \'sell\': !ctrl.store.side.isBuy()\n                }"> <span>Confirm Order</span> </button> </div> <div class="button-wrapper col-21 row-3" ng-click=ctrl.cancel()> <button class="cancel-button nr-btn btn-block nr-btn-xl" type=button> <span>Cancel</span> </button> </div> </div> </div>'},/*!******************************************************!*\
  !*** ./html/alert/dca-place-order-confirmation.html ***!
  \******************************************************/
function(e,t){e.exports='<form uib-draggable class=dca-place-order-confirmation ng-submit=alertCtrl.confirm()> <div class=modal-header>Place DCA Order Confirmation</div> <div class=modal-body> <ul> <li>Order of each transaction(s)</li> </ul> <ul ng-repeat="order in alertCtrl.confirmParam.symbolList track by $index" class="symbol-{{$index}} each-symbol"> <li class=left-text>{{alertCtrl.getDisplaySymbol(order.symbol)}}</li> <li class=amount>{{alertCtrl.getDisplayAmount(order.amount)}} Baht</li> </ul> <ul class=total-amount-per-order> <li class=left-text>Total Amount Per Order</li> <li class=value>{{alertCtrl.confirmParam.totalAmountPerOrder}} Baht</li> </ul> <ul class=total-amount-per-order-remark> <li>(Comm. & VAT Included)</li> </ul> <ul class=frequency> <li class=left-text>Frequency</li> <li class=value>{{ alertCtrl.confirmParam.frequency.fullName }}</li> </ul> <ul class=date> <li class=left-text>{{ alertCtrl.getDateLabel() }}</li> <li class=value>{{ alertCtrl.confirmParam.date.fullName }}</li> </ul> <ul class=time> <li class=left-text>Time</li> <li class=value>{{alertCtrl.confirmParam.time.fullName}}</li> </ul> <ul class=duration> <li class=left-text>Duration</li> <li class=value>{{alertCtrl.confirmParam.duration.fullName}}</li> </ul> <ul class=total-no-of-transactions> <li class=left-text>Total No. of transactions</li> <li class=value>{{alertCtrl.confirmParam.totalTransaction}}</li> </ul> <ul class=total-amount> <li class=left-text>Total Amount</li> <li class=value>{{alertCtrl.getTotalAmount()}} Baht</li> </ul> <ul class=effective-date> <li class=left-text>Effective Date</li> <li class=value>{{alertCtrl.confirmParam.effectiveDate}}</li> </ul> </div> <div class="modal-footer row-7"> <div class="button-wrapper col-21 row-3" ng-click=alertCtrl.confirm()> <button ng-class=alertCtrl.getSide().classname class="confirm-button nr-btn btn-block nr-btn-xl" type=button> <span>Confirm Order</span> </button> </div> <div class="button-wrapper col-21 row-3" ng-click=alertCtrl.cancel()> <button class="cancel-button nr-btn btn-block nr-btn-xl" type=button> <span>Cancel</span> </button> </div> </div> </form>'},/*!**********************************************************!*\
  !*** ./html/alert/dca-submitted-transaction-result.html ***!
  \**********************************************************/
function(e,t){e.exports='<div ng-submit=resultCtrl.ok() class=dca-submitted-transaction-result-alert focus-modal uib-draggable> <div class=modal-header> {{resultCtrl.showHeader}} Confirmation </div> <div class=modal-body> <div class=result-item ng-repeat="item in resultCtrl.items track by $index" name=result-row-{{$index}}> <div class=symbol>{{item.symbol}}</div> <div class=result>{{item.result}}</div> </div> </div> <div class="modal-footer row-5"> <div class="col-20 row-3" ng-click=resultCtrl.ok()> <button class="nr-btn btn-block btn-ok" type=button name=focus>OK</button> </div> </div> </div> '},/*!************************************************!*\
  !*** ./html/alert/dca-order-detail-alert.html ***!
  \************************************************/
function(e,t){e.exports='<form class=dca-order-detail-alert> <div class=modal-header>DCA Order Detail</div> <div class=modal-body> <dca-order-detail view=alertCtrl.orderDetailView></dca-order-detail> </div> <div class=modal-footer> <div class="button-wrapper col-21 row-3" ng-click=alertCtrl.close()> <button class="close-button nr-btn btn-block nr-btn-xl" type=button> <span>Close</span> </button> </div> </div> </form>'},/*!*******************************************************!*\
  !*** ./html/alert/dca-cancel-order-confirmation.html ***!
  \*******************************************************/
function(e,t){e.exports='<div class=dca-cancel-order-confirmation> <div class="modal-body row-24"> <div class=modal-content-block> <div class=order-list-description>Please confirm to cancel:</div> <div class="order-list row-17"> <ul class="row-2 header"> <li class=order-no>Order No.</li> <li class=symbol>Symbol</li> <li class=frequency>Frequency</li> <li class=time>Time</li> <li class=amount>Amount (Baht)</li> </ul> <ul class="row-3 body" ng-repeat="order in alertCtrl.orderDataList"> <li class=order-no>{{order.policyId}}</li> <li class=symbol>{{order.symbolWithNvdr}}</li> <li class=frequency>{{order.frequency}}</li> <li class=time>{{order.time}}</li> <li class=amount>{{order.amount}}</li> </ul> </div> </div> </div> <div class="modal-footer row-7"> <div class="col-63 row-3 pin-modal-div"> <span ng-if=alertCtrl.isShowPinInput> <pin-input class="col-10 row-3" placeholder=PIN name=dca-confirm-cancel-order pin=alertCtrl.pin next-focus-elements=alertCtrl.pinNextFocusElements id=dca-cancel-order-pin></pin-input> </span> </div> <div class="col-30 row-3 modal-footer-div"> <button ng-click=alertCtrl.confirm() class="nr-btn nr-btn-xl confirm-button" id=confirm-button type=button ng-disabled=alertCtrl.isDisabledConfirmButton()> <span>Confirm {{alertCtrl.orderDataList.length}} Order(s)</span> </button> <button ng-click=alertCtrl.cancel() class="nr-btn nr-btn-medium cancel-button"> <span>Close</span> </button> </div> </div> </div>'},/*!*******************************************!*\
  !*** ./html/alert/news-detail-alert.html ***!
  \*******************************************/
function(e,t){e.exports='<div class=news-detail-alert focus-modal> <div class=modal-header> <div class=headline>{{alertCtrl.headline}}</div> </div> <div class=modal-body> <div class=modal-content-block> <div class=story ng-class="{\'money-channel-mode\': alertCtrl.isMoneyChannelMode()}" ng-bind-html=alertCtrl.story></div> <div class=footer> <button type=button class="nr-btn read-more-btn" ng-click=alertCtrl.onClickReadMoreButton() ng-show=alertCtrl.hasLink> <span><i class="fa fa-external-link" aria-hidden=true></i>Read more</span> </button> </div> </div> </div> <div class="modal-footer row-5"> <div class="col-11 row-3" ng-click=alertCtrl.ok()> <button class="nr-btn btn-block close-button" type=button name=focus>Close</button> </div> </div> </div> '},/*!******************************!*\
  !*** ./protobuf/compiled.js ***!
  \******************************/
function(e,t,i){"use strict";var r=i(/*! protobufjs/minimal */36),n=r.Reader,o=r.Writer,s=r.util,a=r.roots["default"]||(r.roots["default"]={});a.MapField=function(){function e(e){if(this.mapFieldEntry=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.mapFieldEntry=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.mapFieldEntry&&e.mapFieldEntry.length)for(var i=0;i<e.mapFieldEntry.length;++i)a.MapFieldEntry.encode(e.mapFieldEntry[i],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new a.MapField;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.mapFieldEntry&&r.mapFieldEntry.length||(r.mapFieldEntry=[]),r.mapFieldEntry.push(a.MapFieldEntry.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.mapFieldEntry&&e.hasOwnProperty("mapFieldEntry")){if(!Array.isArray(e.mapFieldEntry))return"mapFieldEntry: array expected";for(var t=0;t<e.mapFieldEntry.length;++t){var i=a.MapFieldEntry.verify(e.mapFieldEntry[t]);if(i)return"mapFieldEntry."+i}}return null},e.fromObject=function(e){if(e instanceof a.MapField)return e;var t=new a.MapField;if(e.mapFieldEntry){if(!Array.isArray(e.mapFieldEntry))throw TypeError(".MapField.mapFieldEntry: array expected");t.mapFieldEntry=[];for(var i=0;i<e.mapFieldEntry.length;++i){if("object"!=typeof e.mapFieldEntry[i])throw TypeError(".MapField.mapFieldEntry: object expected");t.mapFieldEntry[i]=a.MapFieldEntry.fromObject(e.mapFieldEntry[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.mapFieldEntry=[]),e.mapFieldEntry&&e.mapFieldEntry.length){i.mapFieldEntry=[];for(var r=0;r<e.mapFieldEntry.length;++r)i.mapFieldEntry[r]=a.MapFieldEntry.toObject(e.mapFieldEntry[r],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.MapFieldEntry=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.key&&e.hasOwnProperty("key")&&t.uint32(10).string(e.key),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new a.MapFieldEntry;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!s.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!s.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof a.MapFieldEntry)return e;var t=new a.MapFieldEntry;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.key="",i.value=""),null!=e.key&&e.hasOwnProperty("key")&&(i.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(i.value=e.value),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.UserStat=function(){function e(e){if(this.apis=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.brokerId="",e.prototype.userref=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.apiVersion=0,e.prototype.terminalType="",e.prototype.sessionId="",e.prototype.appName="",e.prototype.appVersion="",e.prototype.appBuild="",e.prototype.deviceId="",e.prototype.deviceModel="",e.prototype.deviceManufacturer="",e.prototype.ip="",e.prototype.osName="",e.prototype.osVersion="",e.prototype.browserName="",e.prototype.browserVersion="",e.prototype.userAgent="",e.prototype.screenHeight="",e.prototype.screenWidth="",e.prototype.screenDensity="",e.prototype.apis=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.brokerId&&e.hasOwnProperty("brokerId")&&t.uint32(10).string(e.brokerId),null!=e.userref&&e.hasOwnProperty("userref")&&t.uint32(16).int64(e.userref),null!=e.apiVersion&&e.hasOwnProperty("apiVersion")&&t.uint32(24).int32(e.apiVersion),null!=e.terminalType&&e.hasOwnProperty("terminalType")&&t.uint32(34).string(e.terminalType),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&t.uint32(42).string(e.sessionId),null!=e.appName&&e.hasOwnProperty("appName")&&t.uint32(50).string(e.appName),null!=e.appVersion&&e.hasOwnProperty("appVersion")&&t.uint32(58).string(e.appVersion),null!=e.appBuild&&e.hasOwnProperty("appBuild")&&t.uint32(66).string(e.appBuild),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&t.uint32(74).string(e.deviceId),null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&t.uint32(82).string(e.deviceModel),null!=e.deviceManufacturer&&e.hasOwnProperty("deviceManufacturer")&&t.uint32(90).string(e.deviceManufacturer),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(98).string(e.ip),null!=e.osName&&e.hasOwnProperty("osName")&&t.uint32(106).string(e.osName),null!=e.osVersion&&e.hasOwnProperty("osVersion")&&t.uint32(114).string(e.osVersion),null!=e.browserName&&e.hasOwnProperty("browserName")&&t.uint32(122).string(e.browserName),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&t.uint32(130).string(e.browserVersion),null!=e.userAgent&&e.hasOwnProperty("userAgent")&&t.uint32(138).string(e.userAgent),null!=e.screenHeight&&e.hasOwnProperty("screenHeight")&&t.uint32(146).string(e.screenHeight),null!=e.screenWidth&&e.hasOwnProperty("screenWidth")&&t.uint32(154).string(e.screenWidth),null!=e.screenDensity&&e.hasOwnProperty("screenDensity")&&t.uint32(162).string(e.screenDensity),null!=e.apis&&e.apis.length)for(var i=0;i<e.apis.length;++i)a.API.encode(e.apis[i],t.uint32(170).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new a.UserStat;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.brokerId=e.string();break;case 2:r.userref=e.int64();break;case 3:r.apiVersion=e.int32();break;case 4:r.terminalType=e.string();break;case 5:r.sessionId=e.string();break;case 6:r.appName=e.string();break;case 7:r.appVersion=e.string();break;case 8:r.appBuild=e.string();break;case 9:r.deviceId=e.string();break;case 10:r.deviceModel=e.string();break;case 11:r.deviceManufacturer=e.string();break;case 12:r.ip=e.string();break;case 13:r.osName=e.string();break;case 14:r.osVersion=e.string();break;case 15:r.browserName=e.string();break;case 16:r.browserVersion=e.string();break;case 17:r.userAgent=e.string();break;case 18:r.screenHeight=e.string();break;case 19:r.screenWidth=e.string();break;case 20:r.screenDensity=e.string();break;case 21:r.apis&&r.apis.length||(r.apis=[]),r.apis.push(a.API.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.brokerId&&e.hasOwnProperty("brokerId")&&!s.isString(e.brokerId))return"brokerId: string expected";if(null!=e.userref&&e.hasOwnProperty("userref")&&!(s.isInteger(e.userref)||e.userref&&s.isInteger(e.userref.low)&&s.isInteger(e.userref.high)))return"userref: integer|Long expected";if(null!=e.apiVersion&&e.hasOwnProperty("apiVersion")&&!s.isInteger(e.apiVersion))return"apiVersion: integer expected";if(null!=e.terminalType&&e.hasOwnProperty("terminalType")&&!s.isString(e.terminalType))return"terminalType: string expected";if(null!=e.sessionId&&e.hasOwnProperty("sessionId")&&!s.isString(e.sessionId))return"sessionId: string expected";if(null!=e.appName&&e.hasOwnProperty("appName")&&!s.isString(e.appName))return"appName: string expected";if(null!=e.appVersion&&e.hasOwnProperty("appVersion")&&!s.isString(e.appVersion))return"appVersion: string expected";if(null!=e.appBuild&&e.hasOwnProperty("appBuild")&&!s.isString(e.appBuild))return"appBuild: string expected";if(null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!s.isString(e.deviceId))return"deviceId: string expected";if(null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&!s.isString(e.deviceModel))return"deviceModel: string expected";if(null!=e.deviceManufacturer&&e.hasOwnProperty("deviceManufacturer")&&!s.isString(e.deviceManufacturer))return"deviceManufacturer: string expected";if(null!=e.ip&&e.hasOwnProperty("ip")&&!s.isString(e.ip))return"ip: string expected";if(null!=e.osName&&e.hasOwnProperty("osName")&&!s.isString(e.osName))return"osName: string expected";if(null!=e.osVersion&&e.hasOwnProperty("osVersion")&&!s.isString(e.osVersion))return"osVersion: string expected";if(null!=e.browserName&&e.hasOwnProperty("browserName")&&!s.isString(e.browserName))return"browserName: string expected";if(null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&!s.isString(e.browserVersion))return"browserVersion: string expected";if(null!=e.userAgent&&e.hasOwnProperty("userAgent")&&!s.isString(e.userAgent))return"userAgent: string expected";if(null!=e.screenHeight&&e.hasOwnProperty("screenHeight")&&!s.isString(e.screenHeight))return"screenHeight: string expected";if(null!=e.screenWidth&&e.hasOwnProperty("screenWidth")&&!s.isString(e.screenWidth))return"screenWidth: string expected";if(null!=e.screenDensity&&e.hasOwnProperty("screenDensity")&&!s.isString(e.screenDensity))return"screenDensity: string expected";if(null!=e.apis&&e.hasOwnProperty("apis")){if(!Array.isArray(e.apis))return"apis: array expected";for(var t=0;t<e.apis.length;++t){var i=a.API.verify(e.apis[t]);if(i)return"apis."+i}}return null},e.fromObject=function(e){if(e instanceof a.UserStat)return e;var t=new a.UserStat;if(null!=e.brokerId&&(t.brokerId=String(e.brokerId)),null!=e.userref&&(s.Long?(t.userref=s.Long.fromValue(e.userref)).unsigned=!1:"string"==typeof e.userref?t.userref=parseInt(e.userref,10):"number"==typeof e.userref?t.userref=e.userref:"object"==typeof e.userref&&(t.userref=new s.LongBits(e.userref.low>>>0,e.userref.high>>>0).toNumber())),null!=e.apiVersion&&(t.apiVersion=0|e.apiVersion),null!=e.terminalType&&(t.terminalType=String(e.terminalType)),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.appName&&(t.appName=String(e.appName)),null!=e.appVersion&&(t.appVersion=String(e.appVersion)),null!=e.appBuild&&(t.appBuild=String(e.appBuild)),null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.deviceModel&&(t.deviceModel=String(e.deviceModel)),null!=e.deviceManufacturer&&(t.deviceManufacturer=String(e.deviceManufacturer)),null!=e.ip&&(t.ip=String(e.ip)),null!=e.osName&&(t.osName=String(e.osName)),null!=e.osVersion&&(t.osVersion=String(e.osVersion)),null!=e.browserName&&(t.browserName=String(e.browserName)),null!=e.browserVersion&&(t.browserVersion=String(e.browserVersion)),null!=e.userAgent&&(t.userAgent=String(e.userAgent)),null!=e.screenHeight&&(t.screenHeight=String(e.screenHeight)),null!=e.screenWidth&&(t.screenWidth=String(e.screenWidth)),null!=e.screenDensity&&(t.screenDensity=String(e.screenDensity)),e.apis){if(!Array.isArray(e.apis))throw TypeError(".UserStat.apis: array expected");t.apis=[];for(var i=0;i<e.apis.length;++i){if("object"!=typeof e.apis[i])throw TypeError(".UserStat.apis: object expected");t.apis[i]=a.API.fromObject(e.apis[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.apis=[]),t.defaults){if(i.brokerId="",s.Long){var r=new s.Long(0,0,(!1));i.userref=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else i.userref=t.longs===String?"0":0;i.apiVersion=0,i.terminalType="",i.sessionId="",i.appName="",i.appVersion="",i.appBuild="",i.deviceId="",i.deviceModel="",i.deviceManufacturer="",i.ip="",i.osName="",i.osVersion="",i.browserName="",i.browserVersion="",i.userAgent="",i.screenHeight="",i.screenWidth="",i.screenDensity=""}if(null!=e.brokerId&&e.hasOwnProperty("brokerId")&&(i.brokerId=e.brokerId),null!=e.userref&&e.hasOwnProperty("userref")&&("number"==typeof e.userref?i.userref=t.longs===String?String(e.userref):e.userref:i.userref=t.longs===String?s.Long.prototype.toString.call(e.userref):t.longs===Number?new s.LongBits(e.userref.low>>>0,e.userref.high>>>0).toNumber():e.userref),null!=e.apiVersion&&e.hasOwnProperty("apiVersion")&&(i.apiVersion=e.apiVersion),null!=e.terminalType&&e.hasOwnProperty("terminalType")&&(i.terminalType=e.terminalType),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(i.sessionId=e.sessionId),null!=e.appName&&e.hasOwnProperty("appName")&&(i.appName=e.appName),null!=e.appVersion&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),null!=e.appBuild&&e.hasOwnProperty("appBuild")&&(i.appBuild=e.appBuild),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(i.deviceId=e.deviceId),null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),null!=e.deviceManufacturer&&e.hasOwnProperty("deviceManufacturer")&&(i.deviceManufacturer=e.deviceManufacturer),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.osName&&e.hasOwnProperty("osName")&&(i.osName=e.osName),null!=e.osVersion&&e.hasOwnProperty("osVersion")&&(i.osVersion=e.osVersion),null!=e.browserName&&e.hasOwnProperty("browserName")&&(i.browserName=e.browserName),null!=e.browserVersion&&e.hasOwnProperty("browserVersion")&&(i.browserVersion=e.browserVersion),null!=e.userAgent&&e.hasOwnProperty("userAgent")&&(i.userAgent=e.userAgent),null!=e.screenHeight&&e.hasOwnProperty("screenHeight")&&(i.screenHeight=e.screenHeight),null!=e.screenWidth&&e.hasOwnProperty("screenWidth")&&(i.screenWidth=e.screenWidth),null!=e.screenDensity&&e.hasOwnProperty("screenDensity")&&(i.screenDensity=e.screenDensity),e.apis&&e.apis.length){i.apis=[];for(var n=0;n<e.apis.length;++n)i.apis[n]=a.API.toObject(e.apis[n],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.API=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}e.prototype.createTime=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.identify=null,e.prototype.screen=null,e.prototype.track=null,e.prototype.query=null;var t;return Object.defineProperty(e.prototype,"apiOneof",{get:s.oneOfGetter(t=["identify","screen","track","query"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.createTime&&e.hasOwnProperty("createTime")&&t.uint32(8).int64(e.createTime),null!=e.identify&&e.hasOwnProperty("identify")&&a.Identify.encode(e.identify,t.uint32(18).fork()).ldelim(),null!=e.screen&&e.hasOwnProperty("screen")&&a.Screen.encode(e.screen,t.uint32(26).fork()).ldelim(),null!=e.track&&e.hasOwnProperty("track")&&a.Track.encode(e.track,t.uint32(34).fork()).ldelim(),null!=e.query&&e.hasOwnProperty("query")&&a.Query.encode(e.query,t.uint32(42).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new a.API;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.createTime=e.int64();break;case 2:r.identify=a.Identify.decode(e,e.uint32());break;case 3:r.screen=a.Screen.decode(e,e.uint32());break;case 4:r.track=a.Track.decode(e,e.uint32());break;case 5:r.query=a.Query.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.createTime&&e.hasOwnProperty("createTime")&&!(s.isInteger(e.createTime)||e.createTime&&s.isInteger(e.createTime.low)&&s.isInteger(e.createTime.high)))return"createTime: integer|Long expected";if(null!=e.identify&&e.hasOwnProperty("identify")){t.apiOneof=1;var i=a.Identify.verify(e.identify);if(i)return"identify."+i}if(null!=e.screen&&e.hasOwnProperty("screen")){if(1===t.apiOneof)return"apiOneof: multiple values";t.apiOneof=1;var i=a.Screen.verify(e.screen);if(i)return"screen."+i}if(null!=e.track&&e.hasOwnProperty("track")){if(1===t.apiOneof)return"apiOneof: multiple values";t.apiOneof=1;var i=a.Track.verify(e.track);if(i)return"track."+i}if(null!=e.query&&e.hasOwnProperty("query")){if(1===t.apiOneof)return"apiOneof: multiple values";t.apiOneof=1;var i=a.Query.verify(e.query);if(i)return"query."+i}return null},e.fromObject=function(e){if(e instanceof a.API)return e;var t=new a.API;if(null!=e.createTime&&(s.Long?(t.createTime=s.Long.fromValue(e.createTime)).unsigned=!1:"string"==typeof e.createTime?t.createTime=parseInt(e.createTime,10):"number"==typeof e.createTime?t.createTime=e.createTime:"object"==typeof e.createTime&&(t.createTime=new s.LongBits(e.createTime.low>>>0,e.createTime.high>>>0).toNumber())),null!=e.identify){if("object"!=typeof e.identify)throw TypeError(".API.identify: object expected");t.identify=a.Identify.fromObject(e.identify)}if(null!=e.screen){if("object"!=typeof e.screen)throw TypeError(".API.screen: object expected");t.screen=a.Screen.fromObject(e.screen)}if(null!=e.track){if("object"!=typeof e.track)throw TypeError(".API.track: object expected");t.track=a.Track.fromObject(e.track)}if(null!=e.query){if("object"!=typeof e.query)throw TypeError(".API.query: object expected");t.query=a.Query.fromObject(e.query)}return t},e.toObject=function(e,t){t||(t={});var i={};if(t.defaults)if(s.Long){var r=new s.Long(0,0,(!1));i.createTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else i.createTime=t.longs===String?"0":0;return null!=e.createTime&&e.hasOwnProperty("createTime")&&("number"==typeof e.createTime?i.createTime=t.longs===String?String(e.createTime):e.createTime:i.createTime=t.longs===String?s.Long.prototype.toString.call(e.createTime):t.longs===Number?new s.LongBits(e.createTime.low>>>0,e.createTime.high>>>0).toNumber():e.createTime),null!=e.identify&&e.hasOwnProperty("identify")&&(i.identify=a.Identify.toObject(e.identify,t),t.oneofs&&(i.apiOneof="identify")),null!=e.screen&&e.hasOwnProperty("screen")&&(i.screen=a.Screen.toObject(e.screen,t),t.oneofs&&(i.apiOneof="screen")),null!=e.track&&e.hasOwnProperty("track")&&(i.track=a.Track.toObject(e.track,t),t.oneofs&&(i.apiOneof="track")),null!=e.query&&e.hasOwnProperty("query")&&(i.query=a.Query.toObject(e.query,t),t.oneofs&&(i.apiOneof="query")),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Identify=function(){function e(e){if(this.accounts=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.system="",e.prototype.role="",e.prototype.accounts=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.system&&e.hasOwnProperty("system")&&t.uint32(10).string(e.system),null!=e.role&&e.hasOwnProperty("role")&&t.uint32(18).string(e.role),null!=e.accounts&&e.accounts.length)for(var i=0;i<e.accounts.length;++i)t.uint32(26).string(e.accounts[i]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new a.Identify;e.pos<i;){var o=e.uint32();switch(o>>>3){case 1:r.system=e.string();break;case 2:r.role=e.string();break;case 3:r.accounts&&r.accounts.length||(r.accounts=[]),r.accounts.push(e.string());break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.system&&e.hasOwnProperty("system")&&!s.isString(e.system))return"system: string expected";if(null!=e.role&&e.hasOwnProperty("role")&&!s.isString(e.role))return"role: string expected";if(null!=e.accounts&&e.hasOwnProperty("accounts")){if(!Array.isArray(e.accounts))return"accounts: array expected";for(var t=0;t<e.accounts.length;++t)if(!s.isString(e.accounts[t]))return"accounts: string[] expected"}return null},e.fromObject=function(e){if(e instanceof a.Identify)return e;var t=new a.Identify;if(null!=e.system&&(t.system=String(e.system)),null!=e.role&&(t.role=String(e.role)),e.accounts){if(!Array.isArray(e.accounts))throw TypeError(".Identify.accounts: array expected");t.accounts=[];for(var i=0;i<e.accounts.length;++i)t.accounts[i]=String(e.accounts[i])}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.accounts=[]),t.defaults&&(i.system="",i.role=""),null!=e.system&&e.hasOwnProperty("system")&&(i.system=e.system),null!=e.role&&e.hasOwnProperty("role")&&(i.role=e.role),e.accounts&&e.accounts.length){i.accounts=[];for(var r=0;r<e.accounts.length;++r)i.accounts[r]=e.accounts[r]}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Screen=function(){function e(e){if(this.properties={},this.tags=[],this.components=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.screenName="",e.prototype.properties=s.emptyObject,e.prototype.tags=s.emptyArray,e.prototype.components=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.screenName&&e.hasOwnProperty("screenName")&&t.uint32(10).string(e.screenName),null!=e.properties&&e.hasOwnProperty("properties"))for(var i=Object.keys(e.properties),r=0;r<i.length;++r)t.uint32(18).fork().uint32(10).string(i[r]).uint32(18).string(e.properties[i[r]]).ldelim();if(null!=e.tags&&e.tags.length)for(var r=0;r<e.tags.length;++r)t.uint32(26).string(e.tags[r]);if(null!=e.components&&e.components.length)for(var r=0;r<e.components.length;++r)t.uint32(34).string(e.components[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i,r=void 0===t?e.len:e.pos+t,o=new a.Screen;e.pos<r;){var c=e.uint32();switch(c>>>3){case 1:o.screenName=e.string();break;case 2:e.skip().pos++,o.properties===s.emptyObject&&(o.properties={}),i=e.string(),e.pos++,o.properties[i]=e.string();break;case 3:o.tags&&o.tags.length||(o.tags=[]),o.tags.push(e.string());break;case 4:o.components&&o.components.length||(o.components=[]),o.components.push(e.string());break;default:e.skipType(7&c)}}return o},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.screenName&&e.hasOwnProperty("screenName")&&!s.isString(e.screenName))return"screenName: string expected";if(null!=e.properties&&e.hasOwnProperty("properties")){if(!s.isObject(e.properties))return"properties: object expected";for(var t=Object.keys(e.properties),i=0;i<t.length;++i)if(!s.isString(e.properties[t[i]]))return"properties: string{k:string} expected"}if(null!=e.tags&&e.hasOwnProperty("tags")){if(!Array.isArray(e.tags))return"tags: array expected";for(var i=0;i<e.tags.length;++i)if(!s.isString(e.tags[i]))return"tags: string[] expected"}if(null!=e.components&&e.hasOwnProperty("components")){if(!Array.isArray(e.components))return"components: array expected";for(var i=0;i<e.components.length;++i)if(!s.isString(e.components[i]))return"components: string[] expected"}return null},e.fromObject=function(e){if(e instanceof a.Screen)return e;var t=new a.Screen;if(null!=e.screenName&&(t.screenName=String(e.screenName)),e.properties){if("object"!=typeof e.properties)throw TypeError(".Screen.properties: object expected");t.properties={};for(var i=Object.keys(e.properties),r=0;r<i.length;++r)t.properties[i[r]]=String(e.properties[i[r]])}if(e.tags){if(!Array.isArray(e.tags))throw TypeError(".Screen.tags: array expected");t.tags=[];for(var r=0;r<e.tags.length;++r)t.tags[r]=String(e.tags[r])}if(e.components){if(!Array.isArray(e.components))throw TypeError(".Screen.components: array expected");t.components=[];for(var r=0;r<e.components.length;++r)t.components[r]=String(e.components[r])}return t},e.toObject=function(e,t){t||(t={});var i={};(t.arrays||t.defaults)&&(i.tags=[],i.components=[]),(t.objects||t.defaults)&&(i.properties={}),t.defaults&&(i.screenName=""),null!=e.screenName&&e.hasOwnProperty("screenName")&&(i.screenName=e.screenName);var r;if(e.properties&&(r=Object.keys(e.properties)).length){i.properties={};for(var n=0;n<r.length;++n)i.properties[r[n]]=e.properties[r[n]]}if(e.tags&&e.tags.length){i.tags=[];for(var n=0;n<e.tags.length;++n)i.tags[n]=e.tags[n]}if(e.components&&e.components.length){i.components=[];for(var n=0;n<e.components.length;++n)i.components[n]=e.components[n]}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Track=function(){function e(e){if(this.properties={},this.tags=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.eventName="",e.prototype.atScreen="",e.prototype.properties=s.emptyObject,e.prototype.tags=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.eventName&&e.hasOwnProperty("eventName")&&t.uint32(10).string(e.eventName),null!=e.atScreen&&e.hasOwnProperty("atScreen")&&t.uint32(18).string(e.atScreen),null!=e.properties&&e.hasOwnProperty("properties"))for(var i=Object.keys(e.properties),r=0;r<i.length;++r)t.uint32(26).fork().uint32(10).string(i[r]).uint32(18).string(e.properties[i[r]]).ldelim();if(null!=e.tags&&e.tags.length)for(var r=0;r<e.tags.length;++r)t.uint32(34).string(e.tags[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i,r=void 0===t?e.len:e.pos+t,o=new a.Track;e.pos<r;){var c=e.uint32();switch(c>>>3){case 1:o.eventName=e.string();break;case 2:o.atScreen=e.string();break;case 3:e.skip().pos++,o.properties===s.emptyObject&&(o.properties={}),i=e.string(),e.pos++,o.properties[i]=e.string();break;case 4:o.tags&&o.tags.length||(o.tags=[]),o.tags.push(e.string());break;default:e.skipType(7&c)}}return o},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.eventName&&e.hasOwnProperty("eventName")&&!s.isString(e.eventName))return"eventName: string expected";if(null!=e.atScreen&&e.hasOwnProperty("atScreen")&&!s.isString(e.atScreen))return"atScreen: string expected";if(null!=e.properties&&e.hasOwnProperty("properties")){if(!s.isObject(e.properties))return"properties: object expected";for(var t=Object.keys(e.properties),i=0;i<t.length;++i)if(!s.isString(e.properties[t[i]]))return"properties: string{k:string} expected"}if(null!=e.tags&&e.hasOwnProperty("tags")){if(!Array.isArray(e.tags))return"tags: array expected";for(var i=0;i<e.tags.length;++i)if(!s.isString(e.tags[i]))return"tags: string[] expected"}return null},e.fromObject=function(e){if(e instanceof a.Track)return e;var t=new a.Track;if(null!=e.eventName&&(t.eventName=String(e.eventName)),null!=e.atScreen&&(t.atScreen=String(e.atScreen)),e.properties){if("object"!=typeof e.properties)throw TypeError(".Track.properties: object expected");t.properties={};for(var i=Object.keys(e.properties),r=0;r<i.length;++r)t.properties[i[r]]=String(e.properties[i[r]])}if(e.tags){if(!Array.isArray(e.tags))throw TypeError(".Track.tags: array expected");t.tags=[];for(var r=0;r<e.tags.length;++r)t.tags[r]=String(e.tags[r])}return t},e.toObject=function(e,t){t||(t={});var i={};(t.arrays||t.defaults)&&(i.tags=[]),(t.objects||t.defaults)&&(i.properties={}),t.defaults&&(i.eventName="",i.atScreen=""),null!=e.eventName&&e.hasOwnProperty("eventName")&&(i.eventName=e.eventName),null!=e.atScreen&&e.hasOwnProperty("atScreen")&&(i.atScreen=e.atScreen);var r;if(e.properties&&(r=Object.keys(e.properties)).length){i.properties={};for(var n=0;n<r.length;++n)i.properties[r[n]]=e.properties[r[n]]}if(e.tags&&e.tags.length){i.tags=[];for(var n=0;n<e.tags.length;++n)i.tags[n]=e.tags[n]}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Query=function(){function e(e){if(this.parameters={},this.results=[],this.tags=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.queryName="",e.prototype.parameters=s.emptyObject,e.prototype.results=s.emptyArray,e.prototype.tags=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=o.create()),null!=e.queryName&&e.hasOwnProperty("queryName")&&t.uint32(10).string(e.queryName),null!=e.parameters&&e.hasOwnProperty("parameters"))for(var i=Object.keys(e.parameters),r=0;r<i.length;++r)t.uint32(18).fork().uint32(10).string(i[r]).uint32(18).string(e.parameters[i[r]]).ldelim();if(null!=e.results&&e.results.length)for(var r=0;r<e.results.length;++r)a.MapField.encode(e.results[r],t.uint32(26).fork()).ldelim();if(null!=e.tags&&e.tags.length)for(var r=0;r<e.tags.length;++r)t.uint32(34).string(e.tags[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i,r=void 0===t?e.len:e.pos+t,o=new a.Query;e.pos<r;){var c=e.uint32();switch(c>>>3){case 1:o.queryName=e.string();break;case 2:e.skip().pos++,o.parameters===s.emptyObject&&(o.parameters={}),i=e.string(),e.pos++,o.parameters[i]=e.string();break;case 3:o.results&&o.results.length||(o.results=[]),o.results.push(a.MapField.decode(e,e.uint32()));break;case 4:o.tags&&o.tags.length||(o.tags=[]),o.tags.push(e.string());break;default:e.skipType(7&c)}}return o},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.queryName&&e.hasOwnProperty("queryName")&&!s.isString(e.queryName))return"queryName: string expected";if(null!=e.parameters&&e.hasOwnProperty("parameters")){if(!s.isObject(e.parameters))return"parameters: object expected";for(var t=Object.keys(e.parameters),i=0;i<t.length;++i)if(!s.isString(e.parameters[t[i]]))return"parameters: string{k:string} expected"}if(null!=e.results&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var i=0;i<e.results.length;++i){var r=a.MapField.verify(e.results[i]);if(r)return"results."+r}}if(null!=e.tags&&e.hasOwnProperty("tags")){if(!Array.isArray(e.tags))return"tags: array expected";for(var i=0;i<e.tags.length;++i)if(!s.isString(e.tags[i]))return"tags: string[] expected"}return null},e.fromObject=function(e){if(e instanceof a.Query)return e;var t=new a.Query;if(null!=e.queryName&&(t.queryName=String(e.queryName)),e.parameters){if("object"!=typeof e.parameters)throw TypeError(".Query.parameters: object expected");t.parameters={};for(var i=Object.keys(e.parameters),r=0;r<i.length;++r)t.parameters[i[r]]=String(e.parameters[i[r]])}if(e.results){if(!Array.isArray(e.results))throw TypeError(".Query.results: array expected");t.results=[];for(var r=0;r<e.results.length;++r){if("object"!=typeof e.results[r])throw TypeError(".Query.results: object expected");t.results[r]=a.MapField.fromObject(e.results[r])}}if(e.tags){if(!Array.isArray(e.tags))throw TypeError(".Query.tags: array expected");t.tags=[];for(var r=0;r<e.tags.length;++r)t.tags[r]=String(e.tags[r])}return t},e.toObject=function(e,t){t||(t={});var i={};(t.arrays||t.defaults)&&(i.results=[],i.tags=[]),(t.objects||t.defaults)&&(i.parameters={}),t.defaults&&(i.queryName=""),
null!=e.queryName&&e.hasOwnProperty("queryName")&&(i.queryName=e.queryName);var r;if(e.parameters&&(r=Object.keys(e.parameters)).length){i.parameters={};for(var n=0;n<r.length;++n)i.parameters[r[n]]=e.parameters[r[n]]}if(e.results&&e.results.length){i.results=[];for(var n=0;n<e.results.length;++n)i.results[n]=a.MapField.toObject(e.results[n],t)}if(e.tags&&e.tags.length){i.tags=[];for(var n=0;n<e.tags.length;++n)i.tags[n]=e.tags[n]}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.exports=a},/*!*********************************!*\
  !*** ./~/protobufjs/minimal.js ***!
  \*********************************/
function(e,t,i){"use strict";e.exports=i(/*! ./src/index-minimal */37)},/*!*******************************************!*\
  !*** ./~/protobufjs/src/index-minimal.js ***!
  \*******************************************/
function(e,t,i){"use strict";function r(){n.Reader._configure(n.BufferReader),n.util._configure()}var n=t;n.build="minimal",n.Writer=i(/*! ./writer */38),n.BufferWriter=i(/*! ./writer_buffer */48),n.Reader=i(/*! ./reader */49),n.BufferReader=i(/*! ./reader_buffer */50),n.util=i(/*! ./util/minimal */39),n.rpc=i(/*! ./rpc */51),n.roots=i(/*! ./roots */53),n.configure=r,n.Writer._configure(n.BufferWriter),r()},/*!************************************!*\
  !*** ./~/protobufjs/src/writer.js ***!
  \************************************/
function(e,t,i){"use strict";function r(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function n(){}function o(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function s(){this.len=0,this.head=new r(n,0,0),this.tail=this.head,this.states=null}function a(e,t,i){t[i]=255&e}function c(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e}function l(e,t){this.len=e,this.next=void 0,this.val=t}function u(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function d(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}e.exports=s;var h,p=i(/*! ./util/minimal */39),m=p.LongBits,v=p.base64,f=p.utf8;s.create=p.Buffer?function(){return(s.create=function(){return new h})()}:function(){return new s},s.alloc=function(e){return new p.Array(e)},p.Array!==Array&&(s.alloc=p.pool(s.alloc,p.Array.prototype.subarray)),s.prototype._push=function(e,t,i){return this.tail=this.tail.next=new r(e,t,i),this.len+=t,this},l.prototype=Object.create(r.prototype),l.prototype.fn=c,s.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new l((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},s.prototype.int32=function(e){return e<0?this._push(u,10,m.fromNumber(e)):this.uint32(e)},s.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},s.prototype.uint64=function(e){var t=m.from(e);return this._push(u,t.length(),t)},s.prototype.int64=s.prototype.uint64,s.prototype.sint64=function(e){var t=m.from(e).zzEncode();return this._push(u,t.length(),t)},s.prototype.bool=function(e){return this._push(a,1,e?1:0)},s.prototype.fixed32=function(e){return this._push(d,4,e>>>0)},s.prototype.sfixed32=s.prototype.fixed32,s.prototype.fixed64=function(e){var t=m.from(e);return this._push(d,4,t.lo)._push(d,4,t.hi)},s.prototype.sfixed64=s.prototype.fixed64,s.prototype["float"]=function(e){return this._push(p["float"].writeFloatLE,4,e)},s.prototype["double"]=function(e){return this._push(p["float"].writeDoubleLE,8,e)};var y=p.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]};s.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(a,1,0);if(p.isString(e)){var i=s.alloc(t=v.length(e));v.decode(e,i,0),e=i}return this.uint32(t)._push(y,t,e)},s.prototype.string=function(e){var t=f.length(e);return t?this.uint32(t)._push(f.write,t,e):this._push(a,1,0)},s.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new r(n,0,0),this.len=0,this},s.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(n,0,0),this.len=0),this},s.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},s.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},s._configure=function(e){h=e}},/*!******************************************!*\
  !*** ./~/protobufjs/src/util/minimal.js ***!
  \******************************************/
function(e,t,i){(function(e){"use strict";function r(e,t,i){for(var r=Object.keys(t),n=0;n<r.length;++n)void 0!==e[r[n]]&&i||(e[r[n]]=t[r[n]]);return e}function n(e){function t(e,i){return this instanceof t?(Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),void(i&&r(this,i))):new t(e,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}var o=t;o.asPromise=i(/*! @protobufjs/aspromise */40),o.base64=i(/*! @protobufjs/base64 */41),o.EventEmitter=i(/*! @protobufjs/eventemitter */42),o["float"]=i(/*! @protobufjs/float */43),o.inquire=i(/*! @protobufjs/inquire */44),o.utf8=i(/*! @protobufjs/utf8 */45),o.pool=i(/*! @protobufjs/pool */46),o.LongBits=i(/*! ./longbits */47),o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isNode=Boolean(e.process&&e.process.versions&&e.process.versions.node),o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=e.dcodeIO&&e.dcodeIO.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var i=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},o.merge=r,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=n,o.ProtocolError=n("ProtocolError"),o.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&void 0!==this[e[i]]&&null!==this[e[i]])return e[i]}},o.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;return e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},void(o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)})):void(o._Buffer_from=o._Buffer_allocUnsafe=null)}}).call(t,function(){return this}())},/*!******************************************!*\
  !*** ./~/@protobufjs/aspromise/index.js ***!
  \******************************************/
function(e,t){"use strict";function i(e,t){for(var i=new Array(arguments.length-1),r=0,n=2,o=!0;n<arguments.length;)i[r++]=arguments[n++];return new Promise(function(n,s){i[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];n.apply(null,t)}};try{e.apply(t||null,i)}catch(a){o&&(o=!1,s(a))}})}e.exports=i},/*!***************************************!*\
  !*** ./~/@protobufjs/base64/index.js ***!
  \***************************************/
function(e,t){"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;i.encode=function(e,t,i){for(var n,o=null,s=[],a=0,c=0;t<i;){var l=e[t++];switch(c){case 0:s[a++]=r[l>>2],n=(3&l)<<4,c=1;break;case 1:s[a++]=r[n|l>>4],n=(15&l)<<2,c=2;break;case 2:s[a++]=r[n|l>>6],s[a++]=r[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[n],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";i.decode=function(e,t,i){for(var r,o=i,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=n[l]))throw Error(s);switch(a){case 0:r=l,a=1;break;case 1:t[i++]=r<<2|(48&l)>>4,r=l,a=2;break;case 2:t[i++]=(15&r)<<4|(60&l)>>2,r=l,a=3;break;case 3:t[i++]=(3&r)<<6|l,a=0}}if(1===a)throw Error(s);return i-o},i.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},/*!*********************************************!*\
  !*** ./~/@protobufjs/eventemitter/index.js ***!
  \*********************************************/
function(e,t){"use strict";function i(){this._listeners={}}e.exports=i,i.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},i.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],r=0;r<i.length;)i[r].fn===t?i.splice(r,1):++r;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,i)}return this}},/*!**************************************!*\
  !*** ./~/@protobufjs/float/index.js ***!
  \**************************************/
function(e,t){"use strict";function i(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,i){o[0]=e,t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3]}function i(e,t,i){o[0]=e,t[i]=s[3],t[i+1]=s[2],t[i+2]=s[1],t[i+3]=s[0]}function r(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],o[0]}function n(e,t){return s[3]=e[t],s[2]=e[t+1],s[1]=e[t+2],s[0]=e[t+3],o[0]}var o=new Float32Array([-0]),s=new Uint8Array(o.buffer),a=128===s[3];e.writeFloatLE=a?t:i,e.writeFloatBE=a?i:t,e.readFloatLE=a?r:n,e.readFloatBE=a?n:r}():function(){function t(e,t,i,r){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,i,r);else if(isNaN(t))e(2143289344,i,r);else if(t>3.4028234663852886e38)e((n<<31|2139095040)>>>0,i,r);else if(t<1.1754943508222875e-38)e((n<<31|Math.round(t/1.401298464324817e-45))>>>0,i,r);else{var o=Math.floor(Math.log(t)/Math.LN2),s=8388607&Math.round(t*Math.pow(2,-o)*8388608);e((n<<31|o+127<<23|s)>>>0,i,r)}}function i(e,t,i){var r=e(t,i),n=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:n*(1/0):0===o?1.401298464324817e-45*n*s:n*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=i.bind(null,o),e.readFloatBE=i.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,i){o[0]=e,t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7]}function i(e,t,i){o[0]=e,t[i]=s[7],t[i+1]=s[6],t[i+2]=s[5],t[i+3]=s[4],t[i+4]=s[3],t[i+5]=s[2],t[i+6]=s[1],t[i+7]=s[0]}function r(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],s[4]=e[t+4],s[5]=e[t+5],s[6]=e[t+6],s[7]=e[t+7],o[0]}function n(e,t){return s[7]=e[t],s[6]=e[t+1],s[5]=e[t+2],s[4]=e[t+3],s[3]=e[t+4],s[2]=e[t+5],s[1]=e[t+6],s[0]=e[t+7],o[0]}var o=new Float64Array([-0]),s=new Uint8Array(o.buffer),a=128===s[7];e.writeDoubleLE=a?t:i,e.writeDoubleBE=a?i:t,e.readDoubleLE=a?r:n,e.readDoubleBE=a?n:r}():function(){function t(e,t,i,r,n,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,n,o+t),e(1/r>0?0:2147483648,n,o+i);else if(isNaN(r))e(0,n,o+t),e(2146959360,n,o+i);else if(r>1.7976931348623157e308)e(0,n,o+t),e((s<<31|2146435072)>>>0,n,o+i);else{var a;if(r<2.2250738585072014e-308)a=r/5e-324,e(a>>>0,n,o+t),e((s<<31|a/4294967296)>>>0,n,o+i);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),a=r*Math.pow(2,-c),e(4503599627370496*a>>>0,n,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,n,o+i)}}}function i(e,t,i,r,n){var o=e(r,n+t),s=e(r,n+i),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=i.bind(null,o,0,4),e.readDoubleBE=i.bind(null,s,4,0)}(),e}function r(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function n(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=i(i)},/*!****************************************!*\
  !*** ./~/@protobufjs/inquire/index.js ***!
  \****************************************/
function(module,exports){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},/*!*************************************!*\
  !*** ./~/@protobufjs/utf8/index.js ***!
  \*************************************/
function(e,t){"use strict";var i=t;i.length=function(e){for(var t=0,i=0,r=0;r<e.length;++r)i=e.charCodeAt(r),i<128?t+=1:i<2048?t+=2:55296===(64512&i)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},i.read=function(e,t,i){var r=i-t;if(r<1)return"";for(var n,o=null,s=[],a=0;t<i;)n=e[t++],n<128?s[a++]=n:n>191&&n<224?s[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(n>>10),s[a++]=56320+(1023&n)):s[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},i.write=function(e,t,i){for(var r,n,o=i,s=0;s<e.length;++s)r=e.charCodeAt(s),r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=63&r|128):55296===(64512&r)&&56320===(64512&(n=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&n),++s,t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=63&r|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=63&r|128);return i-o}},/*!*************************************!*\
  !*** ./~/@protobufjs/pool/index.js ***!
  \*************************************/
function(e,t){"use strict";function i(e,t,i){var r=i||8192,n=r>>>1,o=null,s=r;return function(i){if(i<1||i>n)return e(i);s+i>r&&(o=e(r),s=0);var a=t.call(o,s,s+=i);return 7&s&&(s=(7|s)+1),a}}e.exports=i},/*!*******************************************!*\
  !*** ./~/protobufjs/src/util/longbits.js ***!
  \*******************************************/
function(e,t,i){"use strict";function r(e,t){this.lo=e>>>0,this.hi=t>>>0}e.exports=r;var n=i(/*! ../util/minimal */39),o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new r(i,n)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(n.isString(e)){if(!n.Long)return r.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},/*!*******************************************!*\
  !*** ./~/protobufjs/src/writer_buffer.js ***!
  \*******************************************/
function(e,t,i){"use strict";function r(){o.call(this)}function n(e,t,i){e.length<40?s.utf8.write(e,t,i):t.utf8Write(e,i)}e.exports=r;var o=i(/*! ./writer */38);(r.prototype=Object.create(o.prototype)).constructor=r;var s=i(/*! ./util/minimal */39),a=s.Buffer;r.alloc=function(e){return(r.alloc=s._Buffer_allocUnsafe)(e)};var c=a&&a.prototype instanceof Uint8Array&&"set"===a.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]};r.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(c,t,e),this},r.prototype.string=function(e){var t=a.byteLength(e);return this.uint32(t),t&&this._push(n,t,e),this}},/*!************************************!*\
  !*** ./~/protobufjs/src/reader.js ***!
  \************************************/
function(e,t,i){"use strict";function r(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function n(e){this.buf=e,this.pos=0,this.len=e.length}function o(){var e=new u(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw r(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw r(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function s(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function a(){if(this.pos+8>this.len)throw r(this,8);return new u(s(this.buf,this.pos+=4),s(this.buf,this.pos+=4))}e.exports=n;var c,l=i(/*! ./util/minimal */39),u=l.LongBits,d=l.utf8,h="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new n(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new n(e);throw Error("illegal buffer")};n.create=l.Buffer?function(e){return(n.create=function(e){return l.Buffer.isBuffer(e)?new c(e):h(e)})(e)}:h,n.prototype._slice=l.Array.prototype.subarray||l.Array.prototype.slice,n.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,r(this,10);return e}}(),n.prototype.int32=function(){return 0|this.uint32()},n.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},n.prototype.bool=function(){return 0!==this.uint32()},n.prototype.fixed32=function(){if(this.pos+4>this.len)throw r(this,4);return s(this.buf,this.pos+=4)},n.prototype.sfixed32=function(){if(this.pos+4>this.len)throw r(this,4);return 0|s(this.buf,this.pos+=4)},n.prototype["float"]=function(){if(this.pos+4>this.len)throw r(this,4);var e=l["float"].readFloatLE(this.buf,this.pos);return this.pos+=4,e},n.prototype["double"]=function(){if(this.pos+8>this.len)throw r(this,4);var e=l["float"].readDoubleLE(this.buf,this.pos);return this.pos+=8,e},n.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw r(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},n.prototype.string=function(){var e=this.bytes();return d.read(e,0,e.length)},n.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw r(this,e);this.pos+=e}else do if(this.pos>=this.len)throw r(this);while(128&this.buf[this.pos++]);return this},n.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4===(e=7&this.uint32()))break;this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},n._configure=function(e){c=e;var t=l.Long?"toLong":"toNumber";l.merge(n.prototype,{int64:function(){return o.call(this)[t](!1)},uint64:function(){return o.call(this)[t](!0)},sint64:function(){return o.call(this).zzDecode()[t](!1)},fixed64:function(){return a.call(this)[t](!0)},sfixed64:function(){return a.call(this)[t](!1)}})}},/*!*******************************************!*\
  !*** ./~/protobufjs/src/reader_buffer.js ***!
  \*******************************************/
function(e,t,i){"use strict";function r(e){n.call(this,e)}e.exports=r;var n=i(/*! ./reader */49);(r.prototype=Object.create(n.prototype)).constructor=r;var o=i(/*! ./util/minimal */39);o.Buffer&&(r.prototype._slice=o.Buffer.prototype.slice),r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},/*!*********************************!*\
  !*** ./~/protobufjs/src/rpc.js ***!
  \*********************************/
function(e,t,i){"use strict";var r=t;r.Service=i(/*! ./rpc/service */52)},/*!*****************************************!*\
  !*** ./~/protobufjs/src/rpc/service.js ***!
  \*****************************************/
function(e,t,i){"use strict";function r(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}e.exports=r;var n=i(/*! ../util/minimal */39);(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function o(e,t,i,r,s){if(!r)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(o,a,e,t,i,r);if(!a.rpcImpl)return void setTimeout(function(){s(Error("already ended"))},0);try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(t,r){if(t)return a.emit("error",t,e),s(t);if(null===r)return void a.end(!0);if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",r,e),s(null,r)})}catch(c){return a.emit("error",c,e),void setTimeout(function(){s(c)},0)}},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},/*!***********************************!*\
  !*** ./~/protobufjs/src/roots.js ***!
  \***********************************/
function(e,t){"use strict";e.exports={}},/*!*************************************!*\
  !*** ./html/feedback/feedback.html ***!
  \*************************************/
function(e,t){e.exports='<div class=feedback-container> <div class=feedback-icon ng-click=$ctrl.openRatingPage()> <i class="fa fa-comments-o"></i> </div> <div class=feedback-label ng-click=$ctrl.openRatingPage()>Feedback</div> <div popover-class="feedback-bubble mi6-info-popover" style=visibility:hidden uib-popover="Feedback new functions here." popover-is-open=$ctrl.isShowBubble popover-placement=bottom popover-append-to-body=false aria-hidden=true> </div> </div>'},/*!******************************************!*\
  !*** ./html/feedback/page-feedback.html ***!
  \******************************************/
function(e,t){e.exports='<div class=row-58 ng-if=!$ctrl.isFeedbackSend> <div class="row-12 describe"> เมนู "{{$ctrl.pagename}}" สำหรับ Streaming เวอร์ชั่นใหม่นี้ กำลังอยู่ระหว่างพัฒนา<br/> ไม่ทราบว่าคุณมีความคิดเห็นอย่างไรครับ </div> <div class="row-36 select-option"> <div class="level-1 unselect" ng-click=$ctrl.selectLevel(1) ng-class="{ \'unselect\' : !$ctrl.isThisLevelActive(1), \'select\' : $ctrl.isThisLevelActive(1) }"> <div class=pic> </div> <div> ไม่เคยใช้งานเมนูนี้ </div> </div> <div class="level-2 unselect" ng-click=$ctrl.selectLevel(2) ng-class="{ \'unselect\' : !$ctrl.isThisLevelActive(2), \'select\' : $ctrl.isThisLevelActive(2) }"> <div class=pic> </div> <div> โอเค ฉันจะรอ </div> </div> <div class="level-3 unselect" ng-click=$ctrl.selectLevel(3) ng-class="{ \'unselect\' : !$ctrl.isThisLevelActive(3), \'select\' : $ctrl.isThisLevelActive(3) }"> <div class=pic> </div> <div> ต้องการใช้งานมากๆ </div> </div> <div class="row-15 more-suggestion"> <textarea placeholder="ข้อเสนอแนะเพิ่มเติม (ถ้ามี)" maxlength={{$ctrl.limitComment}} ng-model=$ctrl.txtComment></textarea> <span class=rating-length-check> ({{$ctrl.getRemainingCommentLength()}}/{{$ctrl.limitComment}}) </span> </div> </div> <div class=center-container> <button type=button class="send-feedback-btn nr-btn" ng-click=$ctrl.sendFeedback() ng-disabled=!$ctrl.isSendFeedBackButtonEnable()>ส่งข้อเสนอแนะ</button> </div> </div> <div class="row-58 send-feedback-complete" ng-if=$ctrl.isFeedbackSend> <div class="row-23 thank-you-response"> <div class=thank-msg> ขอบคุณสำหรับ Feedback<br/>ทางเราจะนำข้อมูลดังกล่าวไปพิจารณาต่อไปครับ </div> <div class=date-msg> คุณส่งข้อเสนอแนะแล้วเมื่อ {{$ctrl.currentDateTimestamp}} </div> </div> </div>'},/*!*************************************************!*\
  !*** ./html/market-summary/market-summary.html ***!
  \*************************************************/
function(e,t){e.exports='<div class=set-index-last ng-dblclick=$ctrl.showEquityChart()> <p class=text-set-index> SET </p> <p id=set-index highlight-cell value=$ctrl.marketSummary.setIndex ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.setChange, null, $ctrl.marketSummary.setTotalVolume)"> {{$ctrl.marketSummary.setIndex | price:2}} </p> </div> <div class=set-index-change-percentchange ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.setChange, null, $ctrl.marketSummary.setTotalVolume)"> <div class=top> <p id=set-index-change highlight-cell value=$ctrl.marketSummary.setChange> {{$ctrl.marketSummary.setChange | change:2}} </p> </div> <div class=bottom> <p id=set-index-pchange highlight-cell value=$ctrl.marketSummary.setPercentChange> {{$ctrl.marketSummary.setPercentChange | percentChange}} </p> </div> </div> <div class=set-index-high-low> <div class=top ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.setHighChange, null, $ctrl.marketSummary.setTotalVolume)"> <p class=text-default id=set-index-high-text> High </p> <p id=set-index-high highlight-cell value=$ctrl.marketSummary.setHigh> {{$ctrl.marketSummary.setHigh | price:2}} </p> <p id=set-index-high-change highlight-cell value=$ctrl.marketSummary.setHighChange> {{$ctrl.marketSummary.setHighChange | change:2}} </p> </div> <div class=bottom ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.setLowChange, null, $ctrl.marketSummary.setTotalVolume)"> <p class=text-default id=set-index-low-text> Low </p> <p id=set-index-low highlight-cell value=$ctrl.marketSummary.setLow> {{$ctrl.marketSummary.setLow | price:2}} </p> <p id=set-index-low-change highlight-cell value=$ctrl.marketSummary.setLowChange> {{$ctrl.marketSummary.setLowChange | change:2}} </p> </div> </div> <div class=set-index-value> <div class=top> <p id=set-index-value-text>Value</p> <p id=set-index-value class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.setTotalValue> {{$ctrl.marketSummary.setTotalValue | price:2}} </p> <p id=set-index-mb>MB</p> </div> <div class=bottom> <p id=set-index-gain class=text-gainer highlight-cell value=$ctrl.marketSummary.setGainers> <i class="fa fa-caret-up"></i><span>{{$ctrl.marketSummary.setGainers | volume}}</span> </p> <p id=set-index-lose class=text-loser highlight-cell value=$ctrl.marketSummary.setLosers> <i class="fa fa-caret-down"></i><span>{{$ctrl.marketSummary.setLosers | volume}}</span> </p> <p id=set-index-unchanged class=text-unchanged highlight-cell value=$ctrl.marketSummary.setUnchanged> <i class="fa fa-caret-left"></i><i class="fa fa-caret-right"></i><span>{{$ctrl.marketSummary.setUnchanged | volume}}</span> </p> </div> </div> <div class=other-index-info> <div class=top> <p id=index-detail-name> <index-dropdown model=$ctrl.indexDropDown selected=$ctrl.selectedIndex dropdown-name=index key-name=key></index-dropdown> </p> <p id=index-detail-index highlight-cell value=$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].index ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].change , null, $ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].totalValue)"> {{$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].index | price:2}} </p> <p id=index-detail-change highlight-cell value=$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].change ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].change , null, $ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].totalValue)"> {{$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].change | change:2}} </p> <p id=index-detail-high-low-text>High / Low</p> <div class=col-13> <p id=index-detail-high highlight-cell value=$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].high ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].highChange, null, $ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].totalValue)"> {{$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].high | price:2}} </p> <p class=slash>/</p> <p id=index-detail-low highlight-cell value=$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].low ng-class="$ctrl.colorService.changeColor($ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].lowChange, null, $ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].totalValue)"> {{$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].low | price:2}} </p> </div> <p id=index-detail-total-value class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].totalValue> {{$ctrl.marketSummary.indexDetails[$ctrl.selectedIndex.key.toUpperCase()].totalValue | price:2}} </p> <p id=index-detail-mb>MB</p> </div> <div class=bottom> <div stt-show=$ctrl.tfexSummaryShowHide> <p class=col-6>TFEX</p> <p class=col-9>Total&nbsp;Vol</p> <p id=tfex-total-volume class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.tfexTotalVolume> {{$ctrl.marketSummary.derivDetail.tfexTotalVolume | volume}} </p> <p class=col-8>Total&nbsp;Deal</p> <p id=tfex-total-deal class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.tfexTotalDeal> {{$ctrl.marketSummary.derivDetail.tfexTotalDeal | volume}} </p> <p class=col-8>Total&nbsp;OI@</p> <p id=tfex-total-as-of-date class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.dateAsOfDay> {{$ctrl.marketSummary.derivDetail.dateAsOfDay}}/{{$ctrl.marketSummary.derivDetail.dateAsOfMonth}} </p> <p id=tfex-total-oi class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.tfexTotalOI> {{$ctrl.marketSummary.derivDetail.tfexTotalOI | volume}} </p> </div> <div stt-show=!$ctrl.tfexSummaryShowHide> <p class=col-8>FU/OP&nbsp;Vol</p> <p id=tfex-fu-volume class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.futuresTotalVolume> {{$ctrl.marketSummary.derivDetail.futuresTotalVolume | volume}} </p> <p class=slash>/</p> <p id=tfex-op-volume class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.optionsTotalVolume> {{$ctrl.marketSummary.derivDetail.optionsTotalVolume | volume}} </p> <p class=col-3>Deal</p> <p id=tfex-fu-deal class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.futuresTotalDeal> {{$ctrl.marketSummary.derivDetail.futuresTotalDeal | volume}} </p> <p class=slash>/</p> <p id=tfex-op-deal class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.optionsTotalDeal> {{$ctrl.marketSummary.derivDetail.optionsTotalDeal | volume}} </p> <p class=col-4>OI@</p> <p id=tfex-fuop-as-of-date class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.dateAsOfDay> {{$ctrl.marketSummary.derivDetail.dateAsOfDay}}/{{$ctrl.marketSummary.derivDetail.dateAsOfMonth}} </p> <p id=tfex-fu-total-oi class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.futuresTotalOI> {{$ctrl.marketSummary.derivDetail.futuresTotalOI | volume}} </p> <p class=slash>/</p> <p id=tfex-op-total-oi class=text-market-summary-value highlight-cell value=$ctrl.marketSummary.derivDetail.optionsTotalOI> {{$ctrl.marketSummary.derivDetail.optionsTotalOI | volume}} </p> </div> </div> </div> <div class=market-status> <div class=top ng-if=$ctrl.isEnableEquityMarketStatus()> <p class="col-8 right" id=market-set-status> {{$ctrl.marketSummary.marketStatusEquity.shortName}} : </p> <p class="col-11 value" id=market-set-status-value ng-class=$ctrl.marketSummary.marketStatusEquity.value> {{$ctrl.marketSummary.marketStatusEquity.value}} </p> </div> <div class=bottom ng-if=$ctrl.isEnableDerivativesMarketStatus() uib-tooltip-template="\'market-status-all.html\'" tooltip-placement=bottom-right tooltip-class=market-status-tooltip popover-enable=$ctrl.isEnableDerivativesMarketStatus()> <p class="col-8 right" id=market-tfex-status> {{$ctrl.marketSummary.marketStatusDerivatives[$ctrl.tfexMktStatusShowIndex].shortName}} : </p> <p class="col-11 value" id=market-tfex-status-value ng-class=$ctrl.marketSummary.marketStatusDerivatives[$ctrl.tfexMktStatusShowIndex].value> {{$ctrl.marketSummary.marketStatusDerivatives[$ctrl.tfexMktStatusShowIndex].value}} </p> </div> <script type=text/ng-template id=market-status-all.html> <div ng-repeat="dstatus in $ctrl.marketSummary.marketStatusDerivatives track by $index ">\n            <div class="col-12">\n                {{dstatus.name}}\n            </div>\n            <div class="value" ng-class="dstatus.value">\n                {{dstatus.value}}\n            </div>\n        </div> </script> </div>'},/*!***************************************!*\
  !*** ./html/market-summary/time.html ***!
  \***************************************/
function(e,t){e.exports="<div class=date> {{$ctrl.date}} </div> <div class=time> {{$ctrl.time}} </div>"},/*!**********************************************!*\
  !*** ./html/market-summary/push-status.html ***!
  \**********************************************/
function(e,t){e.exports="<div ng-class=$ctrl.getState() ng-click=$ctrl.onClickPushStatus()></div> <i style=visibility:hidden uib-popover=Connecting popover-is-open=$ctrl.isShowConnectingTooltip popover-placement=left popover-append-to-body=true popover-class=connection-push-status-tooltip aria-hidden=true></i> <i style=visibility:hidden uib-popover=Connected popover-is-open=$ctrl.isShowConnectedTooltip popover-placement=left popover-append-to-body=true popover-class=connection-push-status-tooltip aria-hidden=true></i>"},/*!**************************************!*\
  !*** ./html/ticker/ticker-push.html ***!
  \**************************************/
function(e,t){e.exports='<div class=filter> <div ng-if=$ctrl.isOnPrimaryScreen()> <button type=button ng-click=$ctrl.openFilterModal() name=filter-ticker class="nr-btn nr-btn-large"> <span>Filter <i class="mdi mdi-filter"></i></span> </button> </div> </div> <div class="row-53 data component-seperator-top"> <div class=ticker ng-class="{\'component-seperator-bottom\': $ctrl.derivativeTickers.length > 0}" id=eq-ticker> <equity-ticker-row ng-repeat="t in $ctrl.equityTickers track by $index" index=$index id=ticker-{{$index}} ng-click=$ctrl.onClickSymbol(t) ng-class="$ctrl.highlightRow($index, $ctrl.currentEquityTickerIndex)" ticker=t></equity-ticker-row> </div> <div class=ticker id=deriv-ticker> <derivatives-ticker-row ng-repeat="t in $ctrl.derivativeTickers track by $index" index=$index id=ticker-{{$index}} ng-click=$ctrl.onClickSymbol(t) ng-class="$ctrl.highlightRow($index, $ctrl.currentDerivativeTickerIndex)" ticker=t></derivatives-ticker-row> </div> </div>'},/*!********************************************!*\
  !*** ./html/ticker/instrument-ticker.html ***!
  \********************************************/
function(e,t){e.exports="<instrument-ticker-row ticker=$ctrl.tickers[0] id=instrument-ticker-0></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[1] id=instrument-ticker-1></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[2] id=instrument-ticker-2></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[3] id=instrument-ticker-3></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[4] id=instrument-ticker-4></instrument-ticker-row>"},/*!*************************************************************!*\
  !*** ./html/ticker/bids-offers-item-instrument-ticker.html ***!
  \*************************************************************/
function(e,t){e.exports="<instrument-ticker-row ticker=$ctrl.tickers[0] id=instrument-ticker-0></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[1] id=instrument-ticker-1></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[2] id=instrument-ticker-2></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[3] id=instrument-ticker-3></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[4] id=instrument-ticker-4 ng-if=!$ctrl.isShorterMode></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[5] id=instrument-ticker-5 ng-if=!$ctrl.isShorterMode></instrument-ticker-row>"},/*!************************************************!*\
  !*** ./html/ticker/instrument-ticker-row.html ***!
  \************************************************/
function(e,t){e.exports='<li class=date>{{ $ctrl.ticker.time }}</li> <li class=side>{{ $ctrl.ticker.summary.side.shortname }}</li> <li class=volume>{{ $ctrl.ticker.volume | volume}}</li> <li class=price>{{ $ctrl.ticker.price | price: $ctrl.ticker.priceDigit }}</li> <li class=change> <i class="fa trend"></i> </li>'},/*!********************************************!*\
  !*** ./html/ticker/equity-ticker-row.html ***!
  \********************************************/
function(e,t){e.exports='<li class="col-13 symbol"> <p class=instrumentID> </p> </li> <li class="col-1 side" name=side></li> <li class="col-11 volume" name=volume></li> <li class="col-8 price" name=price></li> <li class="col-2 change"> <i class="fa trend"></i> </li>'},/*!*************************************************!*\
  !*** ./html/ticker/derivatives-ticker-row.html ***!
  \*************************************************/
function(e,t){e.exports='<li class="col-16 symbol"> <p class=instrumentID value=$ctrl.ticker.instrumentID> </p> </li> <li class="col-1 side" name=side></li> <li class="col-8 volume" name=volume></li> <li class="col-8 price" name=price></li> <li class="col-2 change"> <i class="fa trend"></i> </li>'},/*!*********************************************!*\
  !*** ./html/ticker/market-ticker-page.html ***!
  \*********************************************/
function(e,t){e.exports='<div class=header> <div class=filter ng-if=$ctrl.isOnPrimaryScreen()> <button type=button ng-click=$ctrl.openFilterModal() name=filter-ticker class="nr-btn nr-btn-large"> <span>Filter <i class="mdi mdi-filter"></i></span> </button> </div> <div class=mode> <button type=button ng-click=$ctrl.toggleDisplayMode() name=toggle-ticker-display-mode class="nr-btn nr-btn-extra-large"> <span>{{$ctrl.modeToggleButtonLabel}}</span> </button> </div> </div> <div class=body ng-if=!$ctrl.isShow3Columns> <div class="ticker-column-1 component-seperator-right"> <market-ticker-page-row ng-repeat="index in ::[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]" class={{$ctrl.highlightRow(index)}} ng-click=$ctrl.onClickSymbol($ctrl.data[index]) ticker=$ctrl.data[index] id=market-ticker-{{::index}}></market-ticker-page-row> </div> <div class="ticker-column-2 component-seperator-right"> <market-ticker-page-row ng-repeat="index in ::[22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]" class={{$ctrl.highlightRow(index)}} ng-click=$ctrl.onClickSymbol($ctrl.data[index]) ticker=$ctrl.data[index] id=market-ticker-{{::index}}></market-ticker-page-row> </div> <div class="ticker-column-3 component-seperator-right"> <market-ticker-page-row ng-repeat="index in ::[44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]" class={{$ctrl.highlightRow(index)}} ng-click=$ctrl.onClickSymbol($ctrl.data[index]) ticker=$ctrl.data[index] id=market-ticker-{{::index}}></market-ticker-page-row> </div> <div class=ticker-column-4> <market-ticker-page-row ng-repeat="index in ::[66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87]" class={{$ctrl.highlightRow(index)}} ng-click=$ctrl.onClickSymbol($ctrl.data[index]) ticker=$ctrl.data[index] id=market-ticker-{{::index}}></market-ticker-page-row> </div> </div> <div class=body ng-if=$ctrl.isShow3Columns> <div class="ticker-column-with-change-1 component-seperator-right"> <market-ticker-page-row-with-change ng-repeat="index in ::[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]" class={{$ctrl.highlightRow(index)}} ng-click=$ctrl.onClickSymbol($ctrl.data[index]) ticker=$ctrl.data[index] id=market-ticker-{{::index}}></market-ticker-page-row-with-change> </div> <div class="ticker-column-with-change-2 component-seperator-right"> <market-ticker-page-row-with-change ng-repeat="index in ::[22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]" class={{$ctrl.highlightRow(index)}} ng-click=$ctrl.onClickSymbol($ctrl.data[index]) ticker=$ctrl.data[index] id=market-ticker-{{::index}}></market-ticker-page-row-with-change> </div> <div class=ticker-column-with-change-3> <market-ticker-page-row-with-change ng-repeat="index in ::[44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]" class={{$ctrl.highlightRow(index)}} ng-click=$ctrl.onClickSymbol($ctrl.data[index]) ticker=$ctrl.data[index] id=market-ticker-{{::index}}></market-ticker-page-row-with-change> </div> </div>'},/*!*************************************************!*\
  !*** ./html/ticker/market-ticker-page-row.html ***!
  \*************************************************/
function(e,t){e.exports='<li class=symbol> <p dynamic-font-size value=$ctrl.ticker.instrumentID> {{ $ctrl.ticker.instrumentID }} </p> </li> <li class=side>{{ $ctrl.ticker.summary.side.shortname }}</li> <li class=volume>{{ $ctrl.ticker.volume | volume}}</li> <li class=price> {{ $ctrl.ticker.price | price: $ctrl.ticker.priceDigit}} </li> <li class=change> <i class="fa trend"></i> </li>'},/*!*************************************************************!*\
  !*** ./html/ticker/market-ticker-page-row-with-change.html ***!
  \*************************************************************/
function(e,t){e.exports='<li class=symbol> <p dynamic-font-size value=$ctrl.ticker.instrumentID> {{ $ctrl.ticker.instrumentID }} </p> </li> <li class=side>{{ $ctrl.ticker.summary.side.shortname }}</li> <li class=volume>{{ $ctrl.ticker.volume | volume}}</li> <li class=price> {{ $ctrl.ticker.price | price: $ctrl.ticker.priceDigit}} </li> <li class=change-value> {{ $ctrl.ticker.change | nanableChangeByTrend: $ctrl.ticker.priceDigit:$ctrl.ticker.summary.trend }} </li> <li class=change> <i class="fa trend"></i> </li>'},/*!************************************************!*\
  !*** ./html/bids-offers/bids-offers-page.html ***!
  \************************************************/
function(e,t){e.exports='<div class="header row-5"> <index-dropdown class="col-18 row-3 favourite-dropdown" model=$ctrl.favouriteDropdownItemList selected=$ctrl.currentFavouriteDropdown key-name=showName dropdown-name=bidsoffers-favourite on-update=$ctrl.onFavouriteChange(model)></index-dropdown> <button class="toggle-3-5-bids-offers nr-btn nr-btn-medium" name=3-5-bids-offers type=button ng-click=$ctrl.toggleShowingRowsBidsOffers() ng-if=!$ctrl.isViewingBlank()> <div ng-if=$ctrl.isThreeBidsOffers>Show 5 Bids</div> <div ng-if=!$ctrl.isThreeBidsOffers>Show 3 Bids</div> </button> </div> <div class="body component-seperator"> <div ng-show="!$ctrl.isViewingBlank() && $ctrl.isContainAnySymbol()" class="scroll-container row-53" vs-repeat vs-autoresize vs-element-name=bidOffersPage vs-options="{latch: true}" vs-visible-rows-number=4 vs-excess=0 vs-enable-block-scroll=true> <bids-offers-row id=bids-offers-{{$index}} class="{{$ctrl.getClassRowHeight()}} component-seperator-bottom" ng-repeat="symbolList in $ctrl.bidsOffersRows track by $ctrl.getKey(symbolList)" is-three-bids-offers=$ctrl.isThreeBidsOffers symbol-list=symbolList page={{::$ctrl.page}} list-show-name=$ctrl.currentFavouriteDropdown.showName> </bids-offers-row> </div> <div class="scroll-lock row-53" ng-show="$ctrl.isViewingBlank() && $ctrl.isContainAnySymbol()"> <bids-offers-blank-row id=bids-offers-{{$index}} class="{{$ctrl.getClassRowHeight()}} component-seperator-bottom" ng-repeat="symbolList in $ctrl.bidsOffersRows track by $ctrl.getKey(symbolList)" is-three-bids-offers=$ctrl.isThreeBidsOffers symbol-list=symbolList page={{::$ctrl.page}} list-show-name=$ctrl.currentFavouriteDropdown.showName> </bids-offers-blank-row> </div> <div class="no-symbol row-53" ng-if="!$ctrl.isContainAnySymbol() && !$ctrl.isLoadingInstrument"> <span class=warning-msg ng-if=$ctrl.isViewingFavourite() id=warning-msg-1> You don\'t have any symbols in this favourite list.<br/> Add your favourite symbols in menu "Market". </span> <span class=warning-msg ng-if=$ctrl.isViewingMyPort() id=warning-msg-2>No stocks or derivatives in your portfolio.</span></div> </div> '},/*!***********************************************!*\
  !*** ./html/bids-offers/bids-offers-row.html ***!
  \***********************************************/
function(e,t){e.exports="<bids-offers-item class=component-seperator-color symbol=$ctrl.symbolList.symbolFirst name=bids-offers-item-1 is-three-bids-offers=$ctrl.isThreeBidsOffers ng-if=::$ctrl.isItemIndexValid(1) page={{::$ctrl.page}} list-show-name=$ctrl.listShowName row-index=$ctrl.symbolList.rowIndex col-index=0></bids-offers-item> <bids-offers-item class=component-seperator-color symbol=$ctrl.symbolList.symbolSecond name=bids-offers-item-2 is-three-bids-offers=$ctrl.isThreeBidsOffers ng-if=::$ctrl.isItemIndexValid(2) page={{::$ctrl.page}} list-show-name=$ctrl.listShowName row-index=$ctrl.symbolList.rowIndex col-index=1></bids-offers-item> <bids-offers-item class=component-seperator-color symbol=$ctrl.symbolList.symbolThird name=bids-offers-item-3 is-three-bids-offers=$ctrl.isThreeBidsOffers ng-if=::$ctrl.isItemIndexValid(3) page={{::$ctrl.page}} list-show-name=$ctrl.listShowName row-index=$ctrl.symbolList.rowIndex col-index=2></bids-offers-item>"},/*!*****************************************************!*\
  !*** ./html/bids-offers/bids-offers-blank-row.html ***!
  \*****************************************************/
function(e,t){e.exports="<bids-offers-blank-item class=component-seperator-color symbol=$ctrl.symbolList.symbolFirst name=bids-offers-item-1 is-three-bids-offers=$ctrl.isThreeBidsOffers row-index=$ctrl.symbolList.rowIndex col-index=0 can-clear=true page={{::$ctrl.page}} list-show-name=$ctrl.listShowName></bids-offers-blank-item> <bids-offers-blank-item class=component-seperator-color symbol=$ctrl.symbolList.symbolSecond name=bids-offers-item-2 is-three-bids-offers=$ctrl.isThreeBidsOffers row-index=$ctrl.symbolList.rowIndex col-index=1 can-clear=true page={{::$ctrl.page}} list-show-name=$ctrl.listShowName></bids-offers-blank-item> <bids-offers-blank-item class=component-seperator-color symbol=$ctrl.symbolList.symbolThird name=bids-offers-item-3 is-three-bids-offers=$ctrl.isThreeBidsOffers row-index=$ctrl.symbolList.rowIndex col-index=2 can-clear=true page={{::$ctrl.page}} list-show-name=$ctrl.listShowName></bids-offers-blank-item>"},/*!************************************************!*\
  !*** ./html/bids-offers/bids-offers-item.html ***!
  \************************************************/
function(e,t){e.exports='<div class=overview> <div class=symbol ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=symbol-name ng-click=$ctrl.syncSymbol()> <p dynamic-font-size value=$ctrl.getDisplaySymbol()> {{ $ctrl.getDisplaySymbol() }} </p> </div> <div class="symbol-flags text-default"> <span class=symbol-status>{{$ctrl.overview.status}}</span> <ts-level ng-if="$ctrl.overview.tsLevel.length > 0" level=$ctrl.overview.tsLevel> </ts-level> </div> </div> <div class=last highlight-cell value=$ctrl.overview.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=price>{{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}}</div> <div class=change>{{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div> <div class="highlow component-seperator-left"> <ul class=high> <li>High</li> <li class=value highlight-cell value=$ctrl.overview.high ng-class="$ctrl.colorService.priceColor($ctrl.overview.high, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.high | price: $ctrl.overview.priceDigit }}</li> </ul> <ul class=low> <li>Low</li> <li class=value highlight-cell value=$ctrl.overview.low ng-class="$ctrl.colorService.priceColor($ctrl.overview.low, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.low | price: $ctrl.overview.priceDigit }}</li> </ul> </div> <bids-offers-mode-dropdown on-change-mode=$ctrl.setViewMode(newMode) current-mode=$ctrl.currentBidsOffersItemViewMode></bids-offers-mode-dropdown> </div> <div class=info> <bid-offer bid-offer=$ctrl.bidOffer symbol-name=$ctrl.getSymbolName() analytics-category={{::$ctrl.getBidOfferCategory()}} ng-if=$ctrl.isShowBidsOffersViewMode() is-enable-emit-best-bid-offer=true is-three-bids-offers=$ctrl.isThreeBidsOffers></bid-offer> <bids-offers-item-instrument-ticker page={{::$ctrl.page}} ng-if=$ctrl.isShowTickerViewMode() is-shorter-mode=$ctrl.isThreeBidsOffers symbol=$ctrl.getSymbolName()></bids-offers-item-instrument-ticker> </div>'},/*!******************************************************!*\
  !*** ./html/bids-offers/bids-offers-blank-item.html ***!
  \******************************************************/
function(e,t){e.exports='<div class=overview> <div class=symbol ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <quote-symbol-input class="col-17 row-4" on-validated-symbol=$ctrl.onSubmitSymbol(instrument) edit-on-click=true placeholder=Symbol init-symbol=$ctrl.currentSymbol.name id=bid-offer-blank-item-symbol></quote-symbol-input> <div class="symbol-flags text-default"> <span class=symbol-status>{{$ctrl.overview.status}}</span> <ts-level ng-if="$ctrl.overview.tsLevel.length > 0" level=$ctrl.overview.tsLevel> </ts-level> </div> </div> <div class=clear ng-if=$ctrl.canClear> <button type=button class=nr-btn name=clear-symbol ng-click=$ctrl.onDeleteSymbol()> <i class="mdi mdi-close" aria-hidden=true></i> </button> </div> <div class=last highlight-cell value=$ctrl.overview.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=price>{{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}}</div> <div class=change>{{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div> <div class="highlow component-seperator-left"> <ul class=high> <li>High</li> <li class=value highlight-cell value=$ctrl.overview.high ng-class="$ctrl.colorService.priceColor($ctrl.overview.high, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.high | price: $ctrl.overview.priceDigit }}</li> </ul> <ul class=low> <li>Low</li> <li class=value highlight-cell value=$ctrl.overview.low ng-class="$ctrl.colorService.priceColor($ctrl.overview.low, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.low | price: $ctrl.overview.priceDigit }}</li> </ul> </div> <bids-offers-mode-dropdown on-change-mode=$ctrl.setViewMode(newMode) current-mode=$ctrl.currentBidsOffersItemViewMode></bids-offers-mode-dropdown> </div> <div class=info> <bid-offer bid-offer=$ctrl.bidOffer symbol-name=$ctrl.getSymbolName() analytics-category={{::$ctrl.getBidOfferCategory()}} ng-if=$ctrl.isShowBidsOffersViewMode() is-enable-emit-best-bid-offer=true is-three-bids-offers=$ctrl.isThreeBidsOffers> </bid-offer> <bids-offers-item-instrument-ticker page={{::$ctrl.page}} ng-if=$ctrl.isShowTickerViewMode() is-shorter-mode=$ctrl.isThreeBidsOffers symbol=$ctrl.getSymbolName()> </bids-offers-item-instrument-ticker> </div> '},/*!*********************************************************!*\
  !*** ./html/bids-offers/bids-offers-mode-dropdown.html ***!
  \*********************************************************/
function(e,t){e.exports='<i class="mdi mdi-dots-vertical bids-offers-toggle-mode" ng-click=$ctrl.showComponent() ng-class="{\'active\': $ctrl.isShowDropdownMode}"></i> <div class=mode-dropdown-container ng-show=$ctrl.isShowDropdownMode> <ul class=dropdown> <li class=bids-offers ng-click=$ctrl.changeMode($ctrl.BIDS_OFFERS_MODE) ng-class="{\'active\': $ctrl.currentMode === $ctrl.BIDS_OFFERS_MODE}"> Bids / Offers </li> <li class=ticker ng-click=$ctrl.changeMode($ctrl.TICKER_MODE) ng-class="{\'active\': $ctrl.currentMode === $ctrl.TICKER_MODE}"> Ticker </li> </ul> </div> '},/*!*******************************************!*\
  !*** ./html/settings/settings-modal.html ***!
  \*******************************************/
function(e,t){e.exports='<form class=settings-form> <div class="modal-header row-3"> <span>Settings</span> </div> <div class="modal-body row-50"> <div class="col-20 row-50 settings-menu-list"> <div ng-repeat="settingsPage in settingsCtrl.allPages track by $index" class="settings-menu-item-{{::$index}} row-4" ng-click=settingsCtrl.activePage(settingsPage) ng-class="{\'active\': settingsCtrl.isMenuActive(settingsPage)}"> {{settingsCtrl.getPageName(settingsPage)}} </div> </div> <div class="col-55 row-50 settings-content-scrollview" id=settings-content-scrollview> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.DISPLAY)> <display></display> </div> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.NOTIFICATION)> <notification></notification> </div> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.ORDER_ENTRY)> <order-entry></order-entry> </div> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.ACCOUNT_SHORTCUT)> <account-shortcut></account-shortcut> </div> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.KEYBOARD_SHORTCUT)> <keyboard-shortcut></keyboard-shortcut> </div> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.TERMS_AND_CONDITIONS)> <terms-and-conditions></terms-and-conditions> </div> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.OTHER_INFORMATION)> <other-information></other-information> </div> <div class=settings-content ng-if=settingsCtrl.isMenuActive(settingsCtrl.SETTINGS_PAGE_ID.ABOUT)> <about></about> </div> </div> </div> <div class="modal-footer row-5"> <div class="col-11 row-3"> <button ng-click=settingsCtrl.ok() class="nr-btn btn-block ok-button" type=button name=focus> Close </button> </div> </div> </form> '},/*!**********************************************!*\
  !*** ./html/settings/other-information.html ***!
  \**********************************************/
function(e,t){e.exports='<div class=white> <ul class=other-information-links id=other-information-links> <li class="link-item surveillance-securities" ng-if=$ctrl.enableSurveillanceSecuritiesLink()> <span ng-click=$ctrl.onClickSurveillanceSecuritiesLink()>Surveillance Securities</span> </li> <li class="link-item order-status"> <span ng-click=$ctrl.onClickOrderStatusLink()>Order Status</span> </li> <li class="link-item circuit-breaker"> <span ng-click=$ctrl.onClickCircuitBreakerLink()>Circuit Breaker</span> </li> <li class="link-item margin-rate" ng-if=$ctrl.enableMarginRateLink()> <span ng-click=$ctrl.onClickMarginRateLink()>Margin Rate</span> </li> <li class="link-item multi-order-equity" ng-if=$ctrl.enableMultiOrderEquityLink()> <span ng-click=$ctrl.onClickMultiOrderEquityLink()>Multi-Order Equity</span> </li> <li class="link-item multi-order-derivatives" ng-if=$ctrl.enableMultiOrderEquityDerivativesLink()> <span ng-click=$ctrl.onClickMultiOrderDerivativesLink()>Multi-Order Derivatives</span> </li> <li class="link-item margin-rate" ng-if=$ctrl.enablePositionLimitLink()> <span ng-click=$ctrl.onClickPositionLimitLink()>Position Limit</span> </li> <li class="link-item manual"> <span ng-click=$ctrl.onClickManualLink()>Manual</span> </li> </ul> </div>'},/*!**********************************!*\
  !*** ./html/settings/about.html ***!
  \**********************************/
function(e,t){e.exports='<div class=white> <ul class=release-version> <li class=app-name> A new version of Settrade Streaming for PC is available! </li> <li class=app-version> Version {{ $ctrl.whatsNewVersion }} </li> </ul> <div class=release-note> <ul class=title> <li> What\'s new: </li> </ul> <ul class=detail> <li ng-repeat="msg in $ctrl.whatsNewMessageList track by $index"> {{ msg }} </li> </ul> </div> </div>'},/*!*****************************************!*\
  !*** ./html/settings/notification.html ***!
  \*****************************************/
function(e,t){e.exports='<div ng-if=!$ctrl.isShowCriteriaSettings> <div ng-if=$ctrl.isShowSenseConfig() class=sense-control> <div class="header sense-header"> Sense Control </div> <div name=sense-wrapper> <div class="row-setting sense"> <div class=row-label> <span class=topic>Sense</span> </div> <div class=row-switch> <md-switch ng-model=$ctrl.senseSetting aria-label=Sense> </md-switch> </div> </div> </div> </div> <div class=notification-control> <div class="header notification-control-header"> Notification Control </div> <div name=notification-control-wrapper> <div class="row-setting notification" name=notification-switch> <div class=row-label> <span class=topic>Notification</span> </div> <div class=row-switch> <md-switch ng-model=$ctrl.notificationSetting aria-label=Notification> </md-switch> </div> </div> <div class="row-setting notification" ng-show=$ctrl.notificationSetting name=notification-sound-alert> <div class=row-label> <span class=topic>Sound Alert</span> </div> <div class=row-switch> <md-switch ng-model=$ctrl.soundAlertSetting aria-label="Sound Alert"> </md-switch> </div> </div> </div> </div> <div class=feature ng-show=$ctrl.notificationSetting> <div class="header feature-header"> Features </div> <div name=feature-order-alert-wrapper ng-if=$ctrl.userInfoService.isInvestor()> <div class=row-setting-big> <div class=row-label> <span class=topic>Order Alert</span><br/> <div class=detail>{{$ctrl.getAllPushableAccountAnnouceMessage()}}</div> </div> <div class=row-switch> <md-switch ng-model=$ctrl.orderAlertSetting aria-label="Order Alert"> </md-switch> </div> </div> <div class=row-setting> <div class=row-label> <md-checkbox ng-model=$ctrl.orderAlertPopupSetting ng-disabled=!$ctrl.orderAlertSetting aria-label="Order Alert Popup"></md-checkbox> <span class=topic ng-class="{\'disabled\' : !$ctrl.orderAlertSetting}">Show alert pop-up</span> </div> <div class=row-switch></div> </div> </div> <hr> <div name=feature-price-volume-alert-wrapper> <div class=row-setting> <div class=row-label> <span class=topic>Price/Volume Alert</span><br/> </div> <div class=row-switch> <md-switch ng-model=$ctrl.priceVolumeAlertSetting aria-label="Price/Volume Alert"></md-switch> </div> </div> <div class=row-setting> <div class=row-label> <md-checkbox ng-model=$ctrl.priceVolumeAlertPopupSetting ng-disabled=!$ctrl.priceVolumeAlertSetting aria-label="Price Vol Alert Popup"></md-checkbox> <span class=topic ng-class="{\'disabled\' : !$ctrl.priceVolumeAlertSetting}">Show alert pop-up</span> </div> <div class=row-switch></div> </div> <div class=row-setting> <div class=row-btn> <button class="nr-btn set-price-volume-criteria-btn" ng-click=$ctrl.showNotificationAlertCriteriaSettings()>Set Price/Volume Alert Criteria</button> </div> </div> </div> <hr> <div name=news-alert-wrapper> <div class="row-setting news-alert"> <div class=row-label> <span class=topic>News Alert</span> <button class="nr-btn set-news-criteria-btn" ng-click=$ctrl.showNotificationAlertCriteriaSettings()>Set News Alert Criteria</button> </div> </div> </div> <hr> </div> </div> <div ng-if=$ctrl.isShowCriteriaSettings> <notification-alert-criteria on-click-back=$ctrl.onClickBackFromConfigCriteria() on-click-save="$ctrl.onClickSaveFromConfigCriteria(newPriceVolRule, newNewsRule)"></notification-alert-criteria> </div>'},/*!********************************************************!*\
  !*** ./html/settings/notification-alert-criteria.html ***!
  \********************************************************/
function(e,t){e.exports='<div name=top-bar class=row-5> <button class="nr-btn nr-btn-large back-btn" ng-click=$ctrl.clickBack()>Back</button> <button class="nr-btn nr-btn-large save-btn" ng-click=$ctrl.clickSave()>Save</button> </div> <div name=price-volume-alert-criteria-control> <div class=alert-criteria-header> Set Price/Volume Alert Criteria </div> <div name=price-volume-alert-criteria-wrapper> <div class=""> <div> <ul class=header> <li name=enable class=col-7>Enable</li> <li name=symbol class=col-14>Symbol</li> <li name=condition class=col-14>Condition</li> <li name=amount class=col-14>Amount</li> <li name=delete class=col-3></li> </ul> <div class=body> <notification-alert-criteria-price-volume-row ng-repeat="rule in $ctrl.priceVolRules" rule=rule index=$index name=price-volume-criteria-row-{{$index}} on-click-delete=$ctrl.onPriceVolClickDelete(index)></notification-alert-criteria-price-volume-row> <button ng-if=$ctrl.isShowAdd() class="nr-btn nr-btn-sm" name=add-pricevol-criteria ng-click=$ctrl.addMorePriceVolRule()>+ Add Criteria</button> </div> </div> </div> </div> </div> <hr> <div name=news-alert-criteria-control> <div class=alert-criteria-header> Set News Alert Criteria </div> <div name=news-alert-criteria-wrapper> <div class=""> <div> <ul class=header> <li name=enable class=col-7>Enable</li> <li name=symbol class=col-42>Symbol</li> <li name=delete class=col-3></li> </ul> <div class=body> <notification-alert-criteria-news-row ng-repeat="rule in $ctrl.newsRules" rule=rule index=$index name=news-criteria-row-{{$index}} on-click-delete=$ctrl.onNewsClickDelete(index)></notification-alert-criteria-news-row> <button ng-if=$ctrl.isShowAdd() class="nr-btn nr-btn-sm" name=add-news-criteria ng-click=$ctrl.addMoreNewsRule()>+ Add Criteria</button> </div> </div> </div> </div> </div> <hr>'},/*!*************************************************************************!*\
  !*** ./html/settings/notification-alert-criteria-price-volume-row.html ***!
  \*************************************************************************/
function(e,t){e.exports='<ul> <li name=enable class=col-7> <checkbox is-check=$ctrl.rule.enable name=enable-price-vol-{{$ctrl.index}}></checkbox> </li> <li name=symbol class=col-13> <edit-price-volume-rule-symbol-input class=col-11 init-symbol=$ctrl.rule.symbol on-validated-symbol=$ctrl.onValidateSuccess(instrument) on-input-symbol-change=$ctrl.onSymbolChange(symbol)></edit-price-volume-rule-symbol-input> </li> <li name=condition class=col-14> <index-dropdown class=col-12 key-name=showInSetting dropdown-name=price-volume-condition model=$ctrl.priceVolumeCondition on-update=$ctrl.onConditionChange(model) selected=$ctrl.selectedCondition> </index-dropdown> </li> <li name=amount class=col-14> <volume-input class="col-12 row-3" ng-if=!$ctrl.isPrice volume=$ctrl.rule.value name=price-volume-condition-volume on-input-blur=$ctrl.onBlurVolume() placeholder=Volume> </volume-input> <price-input class="col-12 row-3" ng-if=$ctrl.isPrice price-digit=$ctrl.priceDigit price=$ctrl.rule.value name=price-volume-condition-price placeholder=Price> </price-input> </li> <li name=delete class=col-3 ng-click=$ctrl.clickDelete()><i class="mdi mdi-delete"></i></li> </ul>'},/*!*****************************************************************!*\
  !*** ./html/settings/notification-alert-criteria-news-row.html ***!
  \*****************************************************************/
function(e,t){e.exports='<ul> <li name=enable class=col-7> <checkbox is-check=$ctrl.rule.enable name=enable-news-{{$ctrl.index}}></checkbox> </li> <li name=symbol class=col-13> <edit-price-volume-rule-symbol-input class=col-10 init-symbol=$ctrl.rule.symbol on-validated-symbol=$ctrl.onValidateSuccess(instrument) on-input-symbol-change=$ctrl.onSymbolChange(symbol)></edit-price-volume-rule-symbol-input> </li> <li name=delete class=col-3 ng-click=$ctrl.clickDelete()><i class="mdi mdi-delete"></i></li> </ul>'},/*!****************************************!*\
  !*** ./html/settings/order-entry.html ***!
  \****************************************/
function(e,t){e.exports='<div class=body> <div name=confirm-popup-wrapper> <div class="row-setting comfirm-popup"> <div class=row-icon> <div class=clock></div> </div> <div class=row-label> <div class=topic>Confirmation Popup</div> </div> <div class=row-switch> <md-switch ng-model=$ctrl.confirmPopupSetting aria-label="Confirmation Popup"></md-switch> </div> </div> </div> <div name=auto-fill-price-wrapper> <div class="row-setting auto-fill-price"> <div class=row-icon> <div class=clock></div> </div> <div class=row-label> <div class=topic>Auto Fill Price</div> <div class=sub-topic>Automatically fill in a price field in place order form.</div> </div> <div class=row-switch> <md-switch ng-model=$ctrl.autoFillPriceSetting aria-label="Auto Fill Price"></md-switch> </div> </div> </div> <div name=remember-last-order-wrapper> <div class="row-setting remember-last-order"> <div class=row-icon> <div class=clock></div> </div> <div class=row-label> <div class=topic>Remember Last Order</div> <div class=sub-topic>Remember your last submitted order information from Place Order form.</div> </div> <div class=row-switch> <md-switch ng-model=$ctrl.rememberLastOrderSetting aria-label="Remember Last Order"></md-switch> </div> </div> </div> <div name=auto-nvdr-wrapper> <div class="row-setting auto-nvdr"> <div class=row-icon> <div class=mobile></div> </div> <div class=row-label> <div class=topic>Auto NVDR</div> <div class=sub-topic>Common Stocks, Common Shares, Preferred Shares, Warrants and Transferable Subscriptions Rights orders will be traded in NVDR.</div> </div> <div class=row-switch> <md-switch ng-model=$ctrl.autoNVDRSetting aria-label="Auto NVDR"></md-switch> </div> </div> </div> <div name=set-default-account-wrapper ng-if=$ctrl.isShowSetDefaultAccountConfig()> <div class="row-setting set-default-account"> <div class=row-icon> <div class=mobile></div> </div> <div class=row-label> <div class=topic>Set default Account No.</div> <index-dropdown class=col-19 model=$ctrl.accountList selected=$ctrl.selectedAccount key-name=accountName dropdown-name=set-default-account ng-disabled=!$ctrl.defaultAccountSetting on-update=""> </index-dropdown> <div class=sub-topic>Set default value for Account No. dropdown list in this program.</div> </div> <div class=row-switch> <md-switch ng-model=$ctrl.defaultAccountSetting aria-label="Set Default Account"></md-switch> </div> </div> </div> <div name=set-default-position-wrapper> <div class="row-setting set-default-position"> <div class=row-icon> <div class=mobile></div> </div> <div class=row-label> <div class=topic>Set default Position for dropdown</div> <div class=topic>(For Derivatives A/C only)</div> <index-dropdown class=col-19 model=$ctrl.orderPositionList selected=$ctrl.selectedPosition key-name=name dropdown-name=set-default-position on-update=""> </index-dropdown> <div class=sub-topic>Set default value for Position dropdown list in this program.</div> </div> </div> </div> <div name=footer class=remark> <div class=remark-label>Remark:</div> <div>These settings (<span class=clock></span>) are valid until you close or refresh this program.</div> <div>These settings (<span class=mobile></span>) are applied with Streaming for PC, iPhone, iPad and Android.</div> </div> </div>'},/*!************************************!*\
  !*** ./html/settings/display.html ***!
  \************************************/
function(e,t){e.exports='<div> <ul class=display-mode> <li class=wide-screen ng-class="{\'selected\': $ctrl.currentDisplayMode === \'wide\'}"> <div class="screen-thumbnail wide"></div> <radio-button name=display-mode element-id=wide-btn ng-click=$ctrl.changeToWideScreen($event) value=wide label="Wide Screen" sidename=$ctrl.currentDisplayMode> </radio-button> </li><li class=normal-screen ng-class="{\'selected\': $ctrl.currentDisplayMode === \'normal\'}"> <div class="screen-thumbnail normal"></div> <radio-button name=display-mode element-id=normal-btn ng-click=$ctrl.changeToNormalScreen($event) value=normal label="Normal Screen" sidename=$ctrl.currentDisplayMode> </radio-button> </li> </ul> </div> <div class="display-text-screen-control row-13"> <div class=header> <div class="col-34 header-label">Display Font</div><div class="col-17 restore-to-default-btn"><button type=button ng-click=$ctrl.restoreToDefault() class="nr-btn col-16">Restore to Default</button></div> </div> <div name=display-text-size-wrapper> <div class="row-font-size-setting row-11"> <div class="row-font-adjust col-51"> <div class="row-font-size row-9 col-25"> <div class=row-adjust-label> <div class=topic>Font Size</div> </div> <div class=row-range-slider> <span class=pre-slide>A</span> <div class="range-slider col-19"> <rzslider rz-slider-model=$ctrl.slider.value rz-slider-options=$ctrl.slider.options></rzslider> </div> <span class=post-slide>A</span> </div> </div> <div class="row-font-weight row-9 col-25"> <div class=row-font-weight-label> <div class=topic>Font Weight</div> </div> <radio-button class="font-normal col-10" name=font-weight-mode element-id=font-normal-btn ng-click=$ctrl.changeToFontNormalMode($event) value=normal label=Normal sidename=$ctrl.isFontBold> </radio-button> <radio-button class="font-bold col-10" name=font-weight-mode element-id=font-bold-btn ng-click=$ctrl.changeToFontBoldMode($event) value=bold label=Bold sidename=$ctrl.isFontBold> </radio-button> </div> </div> </div> </div> </div> <div ng-if=$ctrl.isShowTechnicalChartScreenSetting class=technical-chart-screen-control> <div class=header> Technical Chart Control </div> <div name=technical-chart-screen-wrapper> <div class=row-setting> <div class=row-label> <span class=topic>Show Technical Chart In Full Screen Mode</span> </div> <div class=row-switch> <md-switch ng-model=$ctrl.isTechnicalChartFullScreen aria-label="Technical Chart Screen"> </md-switch> </div> </div> </div> </div> <div class=basic-mode-control> <div class=header> Basic Mode </div> <div name=basic-mode-wrapper> <div class=row-multiple-label-setting> <div class=row-multiple-label> <div class=main-topic>Basic Mode</div> <div class=sub-topic>* Use Streaming with limited auto-complete functions to lower the comsumption of your computer resource.</div> </div> <div class=row-switch> <md-switch ng-model=$ctrl.isBasicMode aria-label="Basic Mode"> </md-switch> </div> </div> </div> </div> '},/*!*********************************************!*\
  !*** ./html/settings/account-shortcut.html ***!
  \*********************************************/
function(e,t){e.exports='<div name=top-bar class=row-5> <button class="nr-btn nr-btn-large save-btn" ng-disabled=!$ctrl.isChanged ng-click=$ctrl.onClickSave()>Save</button> </div> <div class=account-shortcut-control> <div name=account-shortcut-header> Account Shortcut Key </div> <div name=shortcut-list-wrapper> <div> <ul class=header> <li name=account>Account</li> <li name=shortcut>Shortcut</li> <li name=delete></li> </ul> <div class=body> <account-shortcut-row ng-repeat="shortcutItem in $ctrl.allShortcuts" data=shortcutItem index=$index name=account-shortcut-row-{{$index}} on-click-delete=$ctrl.onClickDelete(index) is-changed=$ctrl.isChanged></account-shortcut-row> </div> <div class=footer> <button ng-if=$ctrl.isShowAdd() class="nr-btn nr-btn-sm" name=add-account-shortcut ng-click=$ctrl.addMoreShortcut()> + Add Shortcut </button> </div> </div> </div> </div>'},/*!*************************************************!*\
  !*** ./html/settings/account-shortcut-row.html ***!
  \*************************************************/
function(e,t){e.exports='<ul> <li name=account class=col-7> <input type=text name=account-{{$ctrl.index}} ng-model=$ctrl.data.value ng-change=$ctrl.onValueChange() /> </li> <li name=shortcut class=col-13> <input type=text name=shortcut-{{$ctrl.index}} ng-model=$ctrl.data.shortcut ng-change=$ctrl.onShortcutChange() /> </li> <li name=delete class=col-3 ng-click=$ctrl.clickDelete()><i class="mdi mdi-delete"></i></li> </ul>'},/*!**********************************************!*\
  !*** ./html/settings/keyboard-shortcut.html ***!
  \**********************************************/
function(e,t){e.exports='<div class=keyboard-shortcut-control> <div class="header keyboard-shortcut-control-header"> Keyboard Shortcut </div> <div name=keyboard-shortcut-control-wrapper> <div class="row-setting keyboard-shortcut" name=keyboard-shortcut-switch> <div class=row-label> <span class=topic>Keyboard Shortcut</span> </div> <div class=row-switch> <md-switch ng-model=$ctrl.isEnable aria-label=KeyboardShortcut></md-switch> </div> </div> </div> </div> <div class=keyboard-shortcut-control> <div class="header keyboard-shortcut-header"> Keyboard shortcut keys </div> <div class="row-setting keyboard-shortcut"> <div class=row-label> <span class=topic>Order Shortcut</span> </div> </div> <div class=keyboard-shortcut-type> <div class=keyboard-shortcut-table> <table class=table> <thead> <tr> <th class=keyboard-action-header>Action</th> <th class=keyboard-shortcut-header>Shortcut</th> </tr> </thead> <tbody> <tr> <td>Buy</td> <td>+</td> </tr> <tr> <td>Sell</td> <td>/</td> </tr> <tr> <td>Select the lastest order</td> <td>*</td> </tr> <tr> <td>Scroll the order list up</td> <td> <i class="fa fa-sort-asc" aria-hidden=true></i> &nbsp;(Cursor Up)</td> </tr> <tr> <td>Scroll the order list down</td> <td> <i class="fa fa-sort-desc" aria-hidden=true></i> &nbsp;(Cursor Down)</td> </tr> <tr> <td>Cancel the selected order</td> <td>C</td> </tr> <tr> <td>Change the selected order</td> <td>D</td> </tr> <tr> <td> Change account number <br>(Marketing only) </td> <td>CTRL + Q</td> </tr> </tbody> </table> </div> </div> <div class="row-setting keyboard-shortcut"> <div class=row-label> <span class=topic>Price Shortcut</span> </div> </div> <div class=keyboard-shortcut-type> <div class=keyboard-shortcut-table> <table class=table> <thead> <tr> <th class=keyboard-action-header>Action</th> <th class=keyboard-shortcut-header>Shortcut</th> </tr> </thead> <tbody> <tr> <td>Place ATO Order</td> <td>A</td> </tr> <tr> <td>Place ATC Order</td> <td>C</td> </tr> <tr> <td>Place MP Order</td> <td>M</td> </tr> <tr> <td>Place MP-MKT Order</td> <td>K</td> </tr> <tr> <td>Place MP-MTL Order</td> <td>L</td> </tr> </tbody> </table> </div> </div> </div>'},/*!****************************************!*\
  !*** ./html/ui-component/refresh.html ***!
  \****************************************/
function(e,t){e.exports=' <button class="nr-btn nr-btn-large push" name=refresh type=button ng-click=$ctrl.onClickButton() ng-class="{\'requesting\' : $ctrl.isRequesting}"> <span stt-show=!$ctrl.isRequesting><i class="fa fa-refresh"></i> Refresh</span> <span stt-show=$ctrl.isRequesting><i class="fa fa-spinner fa-spin fa-fw"></i> Fetching</span> </button>'},/*!*****************************************!*\
  !*** ./html/ui-component/ts-level.html ***!
  \*****************************************/
function(e,t){e.exports="<span ng-click=$ctrl.openTSLevel()>{{$ctrl.level}}</span>"},/*!****************************************************!*\
  !*** ./html/ui-component/button-with-popover.html ***!
  \****************************************************/
function(e,t){e.exports='<i class=main-button ng-click=$ctrl.showComponent() ng-class=$ctrl.buttonClassName></i> <div class=action-options-container ng-show=$ctrl.isShowPopover> <ul class=actions-popover> <li ng-repeat="action in $ctrl.actionOptions track by $index" class=action-{{$index}} ng-class=action.className ng-click=action.actionCallback()> <div class=action-wrapper> <div class=action-icon> <i ng-class=action.buttonClassName></i> </div> <div class=action-text> <div class=action-name> {{action.label}}</div> <div class=action-description>{{action.description}}</div> </div> </div> </li> </ul> </div>'},/*!***************************************!*\
  !*** ./html/favourite/favourite.html ***!
  \***************************************/
function(e,t){e.exports='<div class=row-5> <index-dropdown class="col-18 favourite-dropdown" model=$ctrl.favouriteDropdownItemList selected=$ctrl.currentFavouriteDropdownItem key-name=showName dropdown-name=favourite on-update=$ctrl.onFavoriteChange(model)></index-dropdown> <div class="row-3 col-13 order-side-wrapper"> <span class=col-6> <input type=radio name=equity-watch-btn value=SET id=equity-watch-btn class="col-3 radio-buy-sell" ng-model=$ctrl.currentSelectorMode ng-disabled=$ctrl.isDerivativesOnly() ng-click=$ctrl.changeCurrentModeToSET()> <label class=col-6 for=equity-watch-btn ng-class="{\'disabled\':$ctrl.isDerivativesOnly()}">SET</label> <div class=check ng-class="{\'disabled\':$ctrl.isDerivativesOnly()}"></div> </span> <span class=col-6> <input type=radio name=derivatives-watch-btn value=TFEX id=derivatives-watch-btn class="col-3 radio-buy-sell" ng-model=$ctrl.currentSelectorMode ng-disabled=$ctrl.isEquityOnly() ng-click=$ctrl.changeCurrentModeToTFEX()> <label class=col-6 for=derivatives-watch-btn ng-class="{\'disabled\':$ctrl.isEquityOnly()}">TFEX</label> <div class=check ng-class="{\'disabled\':$ctrl.isEquityOnly()}"></div> </span> </div> <index-dropdown class=col-28 model=$ctrl.menu key-name=name dropdown-name=menu selected=$ctrl.currentCategoryItem ng-disabled="$ctrl.isFavouriteMode() || $ctrl.isEditFavouriteMode() || $ctrl.isMyPortMode()" on-update=$ctrl.onCategoryChange(model)> </index-dropdown> <div class=edit-mode-buttons class="col-18 row3"> <button class="edit nr-btn nr-btn-medium" name=edit-favourite type=button ng-if=$ctrl.isFavouriteMode() ng-click=$ctrl.changeCurrentModeToEditFavourite()> Edit </button> <button class="done nr-btn nr-btn-medium" name=done-edit-favourite type=button ng-if=$ctrl.isEditFavouriteMode() ng-click=$ctrl.onClickDoneInEditMode()> Done </button> <button class="cancel nr-btn nr-btn-medium" name=cancel-edit-favourite type=button ng-if=$ctrl.isEditFavouriteMode() ng-click=$ctrl.changeCurrentModeToFavourite()> Cancel </button> </div> <div class=filter ng-show=$ctrl.isCurrentCategoryFilterable()> <div uib-dropdown auto-close=outsideClick is-open=$ctrl.isFilterOpen> <button name=change-filter-button type=button class="nr-btn nr-btn-medium" uib-dropdown-toggle> Filter </button> <ul uib-dropdown-menu template-url=watch-filter.html aria-labelledby=button-template-url> </ul> </div> </div> <script type=text/ng-template id=watch-filter.html> <ul class="change-filter-option" uib-dropdown-menu role="menu" aria-labelledby="button-template-url">\n          <li class="header">\n              Stock filter\n          </li>\n          <li class="menuitem">\n              <div class="item" ng-repeat="item in ::$ctrl.filterList">\n                <span class="checkOrder">\n                    <input type="checkbox" id="{{::item.key}}" name="{{::item.key}}"\n                        ng-model="item.isChecked" ng-click="$ctrl.onFilterChange($event)">\n                    <label for="{{::item.key}}"><i class="mdi mdi-check"></i></label>\n                </span>\n                <label for="{{::item.key}}">{{::item.name}}</label>\n              </div>\n          </li>\n          <li>\n              <div class="footer">\n                <button class="restore nr-btn nr-btn-medium" ng-click="$ctrl.restoreFilterToDefault()">Restore</button>\n                <button class="close-filter nr-btn nr-btn-medium" ng-click="$ctrl.onFilterMustClose()">Close</button>\n              </div>\n          </li>\n        </ul> </script> <div class=option-last-trading-date class="col-18 row3" ng-if=$ctrl.isOptionsListMode()> Last trading date on <span class=yellow>{{$ctrl.optionsLastTradingDay}}</span> </div> </div> <favourite-list class="row-29 component-seperator-top component-seperator-bottom" ng-if="$ctrl.isWatchListMode() || $ctrl.isMyPortMode()" page={{::$ctrl.page}} is-in-tfex-page=false> </favourite-list> <edit-favourite-list class="row-29 component-seperator-top component-seperator-bottom" ng-if=$ctrl.isEditFavouriteMode() selected-favourite-dropdown-item=$ctrl.currentFavouriteDropdownItem page={{::$ctrl.page}}> </edit-favourite-list> <options-list class="component-seperator-top component-seperator-bottom" ng-if=$ctrl.isOptionsListMode() on-set-options-last-trading-date=$ctrl.setOptionsLastTradingDate(label) page={{::$ctrl.page}} is-in-tfex-page=false> </options-list>'},/*!********************************************!*\
  !*** ./html/favourite/favourite-list.html ***!
  \********************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li class=symbol>Symbol</li> <li class=last>Last</li> <li class=change>Chg</li> <li class=percent-change>%Chg</li> <li class=volume-bid>Vol B</li> <li class=bid>Bid</li> <li class=offer>Offer</li> <li class=volume-offer>Vol O</li> <div ng-if=!$ctrl.isInTfexPage class=wrapper> <li class=previous-close ng-if="$ctrl.isToggleColumn1(\'previous-close\')" ng-click=$ctrl.toggleColumn1() uib-tooltip-template="\'tooltip-template.html\'" tooltip-placement=top tooltip-class=close-toggle-tooltip tooltip-append-to-body=true>Close</li> <script type=text/ng-template id=tooltip-template.html> <div>\n                SET = Previous Close Price<br />TFEX = Previous Settlement Price\n            </div> </script> <li class=projected-price ng-if="$ctrl.isToggleColumn1(\'projected-price\')" ng-click=$ctrl.toggleColumn1()>Proj. Price</li> <li class=total-volume ng-if="$ctrl.isToggleColumn2(\'total-volume\')" ng-click=$ctrl.toggleColumn2() ng-class="{\'toggle-column-header\': !$ctrl.isOnDerivativeMode}">Total Vol</li> <li class=total-value ng-if="$ctrl.isToggleColumn2(\'total-value\')" ng-click=$ctrl.toggleColumn2() ng-class="{\'toggle-column-header\': !$ctrl.isOnDerivativeMode}">Total Val</li> </div> <div ng-if=$ctrl.isInTfexPage class="wrapper tfex-page"> <li class=total-volume ng-if="$ctrl.isToggleColumn1(\'total-volume\')" ng-click=$ctrl.toggleColumn1()>Total Vol</li> <li class=previous-close ng-if="$ctrl.isToggleColumn1(\'previous-close\')" ng-click=$ctrl.toggleColumn1() uib-tooltip-template="\'tooltip-template.html\'" tooltip-placement=top tooltip-class=close-toggle-tooltip tooltip-append-to-body=true>Close</li> <script type=text/ng-template id=tooltip-template.html> <div>\n                SET = Previous Close Price<br />TFEX = Previous Settlement Price\n            </div> </script> <li class=projected-price ng-if="$ctrl.isToggleColumn1(\'projected-price\')" ng-click=$ctrl.toggleColumn1()>Proj. Price</li> </div> </ul> <div up-down-select-table data=$ctrl.watchItems property-key-name=symbol selected-key=$ctrl.keyOfSelectedRow on-select=$ctrl.onSelectedRowChangeByPressUpDown(newIndex)> <div class=scroll-container ng-class=$ctrl.getListClassToControlHeight() vs-repeat vs-autoresize vs-element-name=watch-{{$ctrl.page}}> <favourite-row id=favourite-{{$index}} class=table-color-hover ng-repeat="watchItem in $ctrl.watchItems track by $ctrl.getKey(watchItem)" ng-click=$ctrl.onClickSymbol(watchItem.symbol) ng-class="{\'table-color-select\': watchItem.symbol === $ctrl.keyOfSelectedRow}" is-value-category=$ctrl.isValueCategory current-mode=$ctrl.currentMode is-in-tfex-page=$ctrl.isInTfexPage favourite=watchItem> {{$ctrl.currentMode}} </favourite-row> </div> </div>'},/*!*******************************************!*\
  !*** ./html/favourite/favourite-row.html ***!
  \*******************************************/
function(e,t){e.exports='<ul class=no-newline ng-class=$ctrl.favourite.changeColor> <li class=symbol> <add-favourite-symbol-input ng-if=::$ctrl.isAddMode() id=favourite-add-symbol placeholder=Symbol check-duplicate-symbol=$ctrl.watchListController.checkDuplicateInstrument(symbol) on-check-duplicate-symbol-success=$ctrl.watchListController.addFavourite(symbol)></add-favourite-symbol-input> <editable-symbol-input ng-if=$ctrl.isSupportEditSymbol() class=support-tooltip ng-class="{\'edit-mode\': $ctrl.editMode}" find-index=$ctrl.watchListController.checkDuplicateInstrument(symbol) on-check-duplicate-symbol-success="$ctrl.watchListController.editFavourite(symbol, index)" on-submit-symbol=$ctrl.onUpdateSymbol(instrument) analytics-category={{::$ctrl.getFavouriteCategory()}} analytics-action={{::$ctrl.getDoubleClickSymbolAction()}} is-edit-mode=$ctrl.editMode is-support-tooltip=true init-symbol=$ctrl.favourite.symbol status=$ctrl.favourite.status> </editable-symbol-input> <p ng-if=!$ctrl.isSupportEditSymbol() class=label-symbol uib-tooltip={{$ctrl.favourite.name}} tooltip-placement=right tooltip-append-to-body=true tooltip-enable={{$ctrl.isMustShowTooltip()}}> {{$ctrl.favourite.name | elipsis: 12}} </p> <ts-level ng-if="$ctrl.favourite.isTs && !$ctrl.isEditMode()" level=$ctrl.favourite.tsLevel> </ts-level> <ca ng-if="$ctrl.favourite.isCA && $ctrl.isViewMode()" flags=$ctrl.favourite.caFlags></ca> <ltd ng-if="$ctrl.favourite.isLTD && $ctrl.isViewMode()" last-trading-date=$ctrl.favourite.lastTradingDate></ltd> <button class="col-6 row-2 fav-delete-button" ng-if=$ctrl.isEditMode() ng-mousedown=$ctrl.onDelete()> Delete </button> </li> <li class=last highlight-cell value=$ctrl.favourite.last.numberValue>{{$ctrl.favourite.last.formattedValue}}</li> <li class=change highlight-cell value=$ctrl.favourite.change.numberValue>{{$ctrl.favourite.change.formattedValue }} </li> <li class=percent-change highlight-cell value=$ctrl.favourite.percentChange.numberValue>{{$ctrl.favourite.percentChange.formattedValue }} </li> <li class="volume-bid text-unchanged-volume" highlight-cell-with-font-blink-with-is-match value=$ctrl.favourite.volumeBid.numberValue ismatch=$ctrl.favourite.isBidMatch>{{$ctrl.favourite.volumeBid.formattedValue}}</li> <li class=bid ng-class=$ctrl.favourite.bidColor highlight-cell value=$ctrl.favourite.bid.numberValue><a href="" ng-click=$ctrl.emitBestBidWithSideSellEvent($event)>{{$ctrl.favourite.bid.formattedValue }}</a></li> <li class=offer ng-class=$ctrl.favourite.offerColor highlight-cell value=$ctrl.favourite.offer.numberValue><a href="" ng-click=$ctrl.emitBestOfferWithSideBuyEvent($event)>{{$ctrl.favourite.offer.formattedValue}}</a></li> <li class="volume-offer text-unchanged-volume" highlight-cell-with-font-blink-with-is-match value=$ctrl.favourite.volumeOffer.numberValue ismatch=$ctrl.favourite.isOfferMatch>{{$ctrl.favourite.volumeOffer.formattedValue}}</li> <li class="previous-close text-default" ng-if="$ctrl.watchListController.isToggleColumn1(\'previous-close\')">{{$ctrl.favourite.previousClose.formattedValue }} </li> <li class=projected-price ng-if="$ctrl.watchListController.isToggleColumn1(\'projected-price\')" ng-class=$ctrl.favourite.projectedColor highlight-cell value=$ctrl.favourite.projectedPrice.numberValue>{{$ctrl.favourite.projectedPrice.formattedValue}}</li> <div ng-if=!$ctrl.isInTfexPage class=wrapper> <li class="total-value text-default" highlight-cell-with-font-blink value=$ctrl.favourite.totalValue.numberValue ng-if="$ctrl.watchListController.isToggleColumn2(\'total-value\')">{{$ctrl.favourite.totalValue.formattedValue}} </li> <li class="total-volume text-default" highlight-cell-with-font-blink value=$ctrl.favourite.totalVolume.numberValue ng-if="$ctrl.watchListController.isToggleColumn2(\'total-volume\')">{{$ctrl.favourite.totalVolume.formattedValue }} </li> </div> <div ng-if=$ctrl.isInTfexPage class=wrapper> <li class="total-volume text-default" highlight-cell-with-font-blink value=$ctrl.favourite.totalVolume.numberValue ng-if="$ctrl.watchListController.isToggleColumn1(\'total-volume\')">{{$ctrl.favourite.totalVolume.formattedValueWithKM }} </li> </div> </ul>'},/*!********************************!*\
  !*** ./html/favourite/ca.html ***!
  \********************************/
function(e,t){e.exports="<span uib-tooltip={{$ctrl.displayTooltip()}} tooltip-placement=right tooltip-append-to-body=true>CA</span>"},/*!*********************************!*\
  !*** ./html/favourite/ltd.html ***!
  \*********************************/
function(e,t){e.exports="<span uib-tooltip={{$ctrl.lastTradingDate}} tooltip-placement=right tooltip-append-to-body=true>LTD</span>"},/*!************************************!*\
  !*** ./html/favourite/symbol.html ***!
  \************************************/
function(e,t){e.exports='<span tooltip-enable=$ctrl.showTooltip uib-tooltip="{{ $ctrl.tooltipSymbol }}" tooltip-placement=right>{{ $ctrl.elipsisSymbol }}</span> '},/*!*********************************!*\
  !*** ./html/favourite/add.html ***!
  \*********************************/
function(e,t){e.exports="<button class=nr-btn-xs ng-click=$ctrl.showInput() ng-hide=$ctrl.showSymbolInput>+ Add</button> <brokerlicense-symbol-input id=add-favourite-symbol-input name=symbol type=text placeholder=Symbol ng-show=$ctrl.showSymbolInput on-blur=$ctrl.onBlur() on-validated-symbol=$ctrl.onValidateSymbolSuccess(symbol) on-validated-symbol-fail=$ctrl.onValidateSymbolFail() on-validated-symbol-finally=$ctrl.onValidatedSymbolFinally()> </brokerlicense-symbol-input> "},/*!*************************************************!*\
  !*** ./html/favourite/edit-favourite-list.html ***!
  \*************************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li class=symbol>Symbol</li> </ul> <div class="scroll-container row-26"> <ul ui-sortable=$ctrl.sortableOptions ng-model=$ctrl.editedSymbolFavouriteList> <li class=edit-favourite-row ng-repeat="editSymbolFavourite in $ctrl.editedSymbolFavouriteList track by $index"> <div class="col-5 drag-bar"> <i class="fa fa-bars" aria-hidden=true></i> </div> <edit-favourite-symbol-input class=col-15 type=text placeholder=Symbol row-index={{$index+1}} symbol=$ctrl.editedSymbolFavouriteList[$index].symbol name=symbol check-duplicate-symbol=$ctrl.checkDuplicateInstrument(instrument)> </edit-favourite-symbol-input> <button class="col-6 favourite-delete-button" ng-click=$ctrl.onDeleteSymbol(editSymbolFavourite.key)> Delete </button> </li> </ul> <ul> <li class=add-favourite-row ng-if=$ctrl.canAddMoreSymbol()> <edit-favourite-symbol-input ng-if=!$ctrl.showAddButton id=favourite-edit-symbol class=col-15 type=text placeholder=Symbol symbol=$ctrl.symbolForAddInput name=symbol on-input-blur=$ctrl.onInputBlur() check-duplicate-symbol=$ctrl.checkDuplicateInstrument(instrument) on-check-duplicate-symbol-success=$ctrl.addSymbol(instrument)> </edit-favourite-symbol-input> <button class="nr-btn-xs row-2 favourite-add-button" ng-if=$ctrl.showAddButton ng-click=$ctrl.showInput()>+ Add </button> </li> </ul> </div>'},/*!******************************************!*\
  !*** ./html/favourite/options-list.html ***!
  \******************************************/
function(e,t){e.exports='<div class="by-price options-table-header text-data-topic" ng-if=$ctrl.isPriceOptionsChainMode()> <div class=call-options> <ul>CALL</ul> <hr/> <ul class=header> <li class=change>Chg</li> <li class=last>Last</li> <li class=vol-bid>Vol B</li> <li class=bid>Bid</li> <li class=offer>Offer</li> <li class=vol-offer>Vol O</li> </ul> </div> <div class="strike-price white"><span class=strike-top-label>Strike</span><span class=price-bottom-label>Price</span></div> <div class=put-options> <ul>PUT</ul> <hr/> <ul class=header> <li class=vol-bid>Vol B</li> <li class=bid>Bid</li> <li class=offer>Offer</li> <li class=vol-offer>Vol O</li> <li class=last>Last</li> <li class=change>Chg</li> </ul> </div> </div> <div class="by-volatility options-table-header text-data-topic" ng-if=$ctrl.isVolatilityOptionsChainMode()> <div class=call-options> <ul>CALL</ul> <hr/> <ul class=header> <li class=total-volume>Total Vol.</li> <li class=last>Last</li> <li class=theoretical-price>Theo.P.</li> <li class=diff>Diff</li> <li class=delta>Delta</li> <li class=implied-volatility>IV</li> </ul> </div> <div class="strike-price white"><span class=strike-top-label>Strike</span><span class=price-bottom-label>Price</span></div> <div class=put-options> <ul>PUT</ul> <hr/> <ul class=header> <li class=implied-volatility>IV</li> <li class=delta>Delta</li> <li class=diff>Diff</li> <li class=theoretical-price>Theo.P.</li> <li class=last>Last</li> <li class=total-volume>Total Vol.</li> </ul> </div> </div> <div class=scroll-container ng-class=$ctrl.getListClassToControlHeight()> <options-row mode=$ctrl.watchStateData.optionsListMode ng-repeat="rowView in $ctrl.optionsStrikePriceList track by $index" data=rowView class="no-newline table-color-hover" ng-class="{\'atm\':rowView.isATM, \'table-color-select\': $index === $ctrl.selectedIndex}" id=options-row-{{::$index}} ng-click=$ctrl.onClickRow($index)> </options-row> </div>'},/*!*****************************************!*\
  !*** ./html/favourite/options-row.html ***!
  \*****************************************/
function(e,t){e.exports='<div ng-if=$ctrl.isByPriceMode()> <options-call-side class="call by-price" ng-class="{\'itm\':$ctrl.isInTheMoneyCall()}" series-id=$ctrl.data.callSeriesId data=$ctrl.data.callOptionsDetail></options-call-side> <div class=strike-price highlight-cell value=$ctrl.data.strikePrice>{{$ctrl.data.strikePrice | volume}}</div> <options-put-side class="put by-price" ng-class="{\'itm\':$ctrl.isInTheMoneyPut()}" series-id=$ctrl.data.putSeriesId data=$ctrl.data.putOptionsDetail></options-put-side> </div> <div ng-if=$ctrl.isByVolatilityMode()> <options-volatility-side class="call by-volatility" ng-class="{\'itm\':$ctrl.isInTheMoneyCall()}" series-id=$ctrl.data.callSeriesId data=$ctrl.data.callOptionsDetail></options-volatility-side> <div class=strike-price highlight-cell value=$ctrl.data.strikePrice>{{$ctrl.data.strikePrice | volume}}</div> <options-volatility-side class="put by-volatility" ng-class="{\'itm\':$ctrl.isInTheMoneyPut()}" series-id=$ctrl.data.putSeriesId data=$ctrl.data.putOptionsDetail></options-volatility-side> </div>'},/*!**********************************************!*\
  !*** ./html/favourite/options-put-side.html ***!
  \**********************************************/
function(e,t){e.exports='<ul ng-click=$ctrl.onClickOptionsRow()> <li class="vol-bid text-unchanged-volume">{{$ctrl.data.volumeBid | volume}}</li> <li class=bid ng-class="$ctrl.colorService.bidOfferColor($ctrl.data.bid, $ctrl.data.previousClose, $ctrl.data.volumeBid, $ctrl.data.bidFlag)" highlight-cell value=$ctrl.data.bid> <a href="" ng-click=$ctrl.emitBestBidWithSideSellEvent($event)>{{$ctrl.data.bid | bidOffer: $ctrl.data.priceDigit:$ctrl.data.bidFlag}}</a> </li> <li class=offer ng-class="$ctrl.colorService.bidOfferColor($ctrl.data.offer, $ctrl.data.previousClose, $ctrl.data.volumeOffer, $ctrl.data.offerFlag)" highlight-cell value=$ctrl.data.offer> <a href="" ng-click=$ctrl.emitBestOfferWithSideBuyEvent($event)>{{$ctrl.data.offer | bidOffer: $ctrl.data.priceDigit:$ctrl.data.offerFlag}}</a> </li> <li class="vol-offer text-unchanged-volume" highlight-cell-with-font-blink-with-is-match value=$ctrl.data.volumeOffer ismatch=$ctrl.data.isOfferMatch>{{$ctrl.data.volumeOffer | volume}}</li> <li class=last ng-class="$ctrl.colorService.changeColor($ctrl.data.change, $ctrl.data.previousClose, $ctrl.data.totalVolume)" highlight-cell value=$ctrl.data.last>{{$ctrl.data.last | price: $ctrl.data.priceDigit}}</li> <li class=change ng-class="$ctrl.colorService.changeColor($ctrl.data.change, $ctrl.data.previousClose, $ctrl.data.totalVolume)" highlight-cell value=$ctrl.data.change>{{$ctrl.data.change | nullableChange: $ctrl.data.priceDigit:$ctrl.data.previousClose:$ctrl.data.last}} </li> </ul>'},/*!***********************************************!*\
  !*** ./html/favourite/options-call-side.html ***!
  \***********************************************/
function(e,t){e.exports='<ul class=no-newline ng-click=$ctrl.onClickOptionsRow()> <li class=change ng-class="$ctrl.colorService.changeColor($ctrl.data.change, $ctrl.data.previousClose, $ctrl.data.totalVolume)" highlight-cell value=$ctrl.data.change>{{$ctrl.data.change | nullableChange: $ctrl.data.priceDigit:$ctrl.data.previousClose:$ctrl.data.last}} </li> <li class=last ng-class="$ctrl.colorService.changeColor($ctrl.data.change, $ctrl.data.previousClose, $ctrl.data.totalVolume)" highlight-cell value=$ctrl.data.last>{{$ctrl.data.last | price: $ctrl.data.priceDigit}}</li> <li class="vol-bid text-unchanged-volume">{{$ctrl.data.volumeBid | volume}}</li> <li class=bid ng-class="$ctrl.colorService.bidOfferColor($ctrl.data.bid, $ctrl.data.previousClose, $ctrl.data.volumeBid, $ctrl.data.bidFlag)" highlight-cell value=$ctrl.data.bid> <a href="" ng-click=$ctrl.emitBestBidWithSideSellEvent($event)>{{$ctrl.data.bid | bidOffer: $ctrl.data.priceDigit:$ctrl.data.bidFlag}}</a> </li> <li class=offer ng-class="$ctrl.colorService.bidOfferColor($ctrl.data.offer, $ctrl.data.previousClose, $ctrl.data.volumeOffer, $ctrl.data.offerFlag)" highlight-cell value=$ctrl.data.offer> <a href="" ng-click=$ctrl.emitBestOfferWithSideBuyEvent($event)>{{$ctrl.data.offer | bidOffer: $ctrl.data.priceDigit:$ctrl.data.offerFlag}}</a> </li> <li class="vol-offer text-unchanged-volume" highlight-cell-with-font-blink-with-is-match value=$ctrl.data.volumeOffer ismatch=$ctrl.data.isOfferMatch>{{$ctrl.data.volumeOffer | volume}}</li> </ul>'},/*!*****************************************************!*\
  !*** ./html/favourite/options-volatility-side.html ***!
  \*****************************************************/
function(e,t){e.exports='<ul class=no-newline ng-click=$ctrl.onClickOptionsRow()> <li class="total-volume text-default" highlight-cell value=$ctrl.data.totalVolume>{{$ctrl.data.totalVolume | formatVolumeKM}} </li> <li class=last ng-class="$ctrl.colorService.changeColor($ctrl.data.change, $ctrl.data.previousClose, $ctrl.data.totalVolume)" highlight-cell value=$ctrl.data.last>{{$ctrl.data.last | price: $ctrl.data.priceDigit}}</li> <li class="theoretical-price text-default" highlight-cell-with-font-blink value=$ctrl.data.theoreticalPrice>{{$ctrl.data.theoreticalPrice | price: 2}}</li> <li class=diff ng-class="$ctrl.colorService.changeColor($ctrl.data.diff, null, null)">{{$ctrl.data.diff | change: 2}}</li> <li class="delta text-default" highlight-cell-with-font-blink value=$ctrl.data.optionsDelta> {{$ctrl.data.optionsDelta | price: 2}} </li> <li class="implied-volatility text-default" highlight-cell-with-font-blink value=$ctrl.data.optionsImpliedVolatility>{{$ctrl.data.optionsImpliedVolatility | price: 2}}</li> </ul>'},/*!*****************************************!*\
  !*** ./html/mini-quote/mini-quote.html ***!
  \*****************************************/
function(e,t){e.exports='<div class="overview component-seperator-right"> <mini-quote-symbol-info init-symbol=$ctrl.symbol overview=$ctrl.overview on-submit-symbol=$ctrl.onSubmitSymbol(newSymbol) id=mini-quote-symbol></mini-quote-symbol-info> <div class="mini-intraday-chart col-10"></div> <mini-quote-overview overview=$ctrl.overview dynamic-label-position=right></mini-quote-overview> </div> <div class="info component-seperator-top component-seperator-right"> <bid-offer class=col-48 bid-offer=$ctrl.bidOffer symbol-name=$ctrl.getSymbolName() analytics-category={{::$ctrl.getBidOfferCategory()}} is-enable-emit-best-bid-offer=true is-three-bids-offers=$ctrl.isThreeBidsOffers></bid-offer> <mini-quote-tabs class=col-45 page={{::$ctrl.page}}></mini-quote-tabs> <volume-by-price class=col-30 page={{::$ctrl.page}} is-show-percent=true></volume-by-price> </div> '},/*!****************************************!*\
  !*** ./html/mini-quote/bid-offer.html ***!
  \****************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li id=bid-volume-0>Volume</li> <li id=bid-0>Bids</li> <li id=offer-0>Offers</li> <li id=offer-volume-0>Volume</li> </ul> <ul class=content name=bid-offer-1> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink-with-is-match value=$ctrl.bidOffer.bidVolume1 ismatch=$ctrl.bidOffer.isBidMatch id=bid-volume-1> {{ $ctrl.bidOffer.bidVolume1 | volume }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.bidPrice1, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.bidVolume1, $ctrl.bidOffer.bidFlag)" highlight-cell value=$ctrl.bidOffer.bidPrice1 id=bid-1> <a href="" ng-click=$ctrl.emitBestBidWithSideSellEvent($event)>{{ $ctrl.bidOffer.bidPrice1 | bidOffer: $ctrl.bidOffer.priceDigit:$ctrl.bidOffer.bidFlag}}</a> </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.offerPrice1, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.offerVolume1, $ctrl.bidOffer.offerFlag)" highlight-cell value=$ctrl.bidOffer.offerPrice1 id=offer-1> <a href="" ng-click=$ctrl.emitBestOfferWithSideBuyEvent($event)>{{ $ctrl.bidOffer.offerPrice1 | bidOffer: $ctrl.bidOffer.priceDigit:$ctrl.bidOffer.offerFlag }}</a> </li> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink-with-is-match value=$ctrl.bidOffer.offerVolume1 ismatch=$ctrl.bidOffer.isOfferMatch id=offer-volume-1> {{ $ctrl.bidOffer.offerVolume1 | volume }} </li> </ul> <ul class=content name=bid-offer-2> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.bidVolume2 id=bid-volume-2> {{ $ctrl.bidOffer.bidVolume2 | volume }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.bidPrice2, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.bidVolume2, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.bidPrice2 id=bid-2> {{ $ctrl.bidOffer.bidPrice2 | price: $ctrl.bidOffer.priceDigit }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.offerPrice2, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.offerVolume2, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.offerPrice2 id=offer-2> {{ $ctrl.bidOffer.offerPrice2 | price: $ctrl.bidOffer.priceDigit }} </li> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.offerVolume2 id=offer-volume-2> {{ $ctrl.bidOffer.offerVolume2 | volume }} </li> </ul> <ul class=content name=bid-offer-3> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.bidVolume3 id=bid-volume-3> {{ $ctrl.bidOffer.bidVolume3 | volume }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.bidPrice3, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.bidVolume3, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.bidPrice3 id=bid-3> {{ $ctrl.bidOffer.bidPrice3 | price: $ctrl.bidOffer.priceDigit }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.offerPrice3, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.offerVolume3, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.offerPrice3 id=offer-3> {{ $ctrl.bidOffer.offerPrice3 | price: $ctrl.bidOffer.priceDigit }} </li> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.offerVolume3 id=offer-volume-3> {{ $ctrl.bidOffer.offerVolume3 | volume }} </li> </ul> <ul class=content name=bid-offer-4 stt-show=!$ctrl.isThreeBidsOffers> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.bidVolume4 id=bid-volume-4> {{ $ctrl.bidOffer.bidVolume4 | volume }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.bidPrice4, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.bidVolume4, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.bidPrice4 id=bid-4> {{ $ctrl.bidOffer.bidPrice4 | price: $ctrl.bidOffer.priceDigit }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.offerPrice4, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.offerVolume4, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.offerPrice4 id=offer-4> {{ $ctrl.bidOffer.offerPrice4 | price: $ctrl.bidOffer.priceDigit }} </li> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.offerVolume4 id=offer-volume-4> {{ $ctrl.bidOffer.offerVolume4 | volume }} </li> </ul> <ul class=content name=bid-offer-5 stt-show=!$ctrl.isThreeBidsOffers> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.bidVolume5 id=bid-volume-5> {{ $ctrl.bidOffer.bidVolume5 | volume }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.bidPrice5, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.bidVolume5, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.bidPrice5 id=bid-5> {{ $ctrl.bidOffer.bidPrice5 | price: $ctrl.bidOffer.priceDigit }} </li> <li ng-class="$ctrl.colorService.bidOfferColor($ctrl.bidOffer.offerPrice5, $ctrl.bidOffer.previousClose, $ctrl.bidOffer.offerVolume5, BidOfferFlag.Normal)" highlight-cell value=$ctrl.bidOffer.offerPrice5 id=offer-5> {{ $ctrl.bidOffer.offerPrice5 | price: $ctrl.bidOffer.priceDigit }} </li> <li class="volume text-unchanged-volume" highlight-cell-with-font-blink value=$ctrl.bidOffer.offerVolume5 id=offer-volume-5> {{ $ctrl.bidOffer.offerVolume5 | volume }} </li> </ul> '},/*!**********************************************!*\
  !*** ./html/mini-quote/volume-by-price.html ***!
  \**********************************************/
function(e,t){e.exports='<div ng-if="!$ctrl.isShowLoading && !$ctrl.isShowNoData"> <stacked-bar-chart volume-by-price-view=$ctrl.volumeByPriceView></stacked-bar-chart> <percent-buy-sell volume-by-price-view=$ctrl.volumeByPriceView class=row-2 ng-if=$ctrl.isShowPercent></percent-buy-sell> </div> <div ng-if=$ctrl.isShowLoading class=middle> <div> <i class="fa-2 fa fa-spinner fa-spin" aria-hidden=true></i> Loading... </div> </div> <div ng-if=$ctrl.isShowNoData class=middle> <div>No data to display</div> </div> '},/*!***********************************************!*\
  !*** ./html/mini-quote/percent-buy-sell.html ***!
  \***********************************************/
function(e,t){e.exports="<div class=percent-buy ng-style=\"{ 'width': 'calc('+ $ctrl.percentBarBuy + ')' }\">Buy {{$ctrl.percentBuyVol}}%</div> <div ng-if=\"$ctrl.percentNoSideVol > 0\" class=percent-no-side ng-style=\"{ 'width': 'calc('+ $ctrl.percentBarNoside + ')' }\">&nbsp;</div> <div class=percent-sell ng-style=\"{ 'width': 'calc('+ $ctrl.percentBarSell + ')' }\"> <span class=sell-value>{{$ctrl.percentSellVol}}%</span><span class=sell-label>Sell</span> </div>"},/*!**********************************************!*\
  !*** ./html/mini-quote/mini-quote-tabs.html ***!
  \**********************************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active> <uib-tab heading=Ticker class="row-3 {{::$ctrl.getClassForTabWidth()}}" index=$ctrl.TICKER_TAB_ID> <instrument-ticker page={{::$ctrl.page}} symbol=$ctrl.miniQuoteCtrl.symbol ng-if="$ctrl.active == $ctrl.TICKER_TAB_ID"></instrument-ticker> </uib-tab> <uib-tab heading=Chart class="row-3 {{::$ctrl.getClassForTabWidth()}}" index=$ctrl.CHART_TAB_ID> <intraday-chart ng-if="$ctrl.active == $ctrl.CHART_TAB_ID"></intraday-chart> </uib-tab> <uib-tab heading=News class="row-3 {{::$ctrl.getClassForTabWidth()}}" index=$ctrl.NEWS_BY_SYMBOL_TAB_ID name=mini-quote-news-by-symbol> <news-by-symbol page={{::$ctrl.page}} ng-if="$ctrl.active == $ctrl.NEWS_BY_SYMBOL_TAB_ID"></news-by-symbol> </uib-tab> <uib-tab heading=BrainBOX class="row-3 brainbox {{::$ctrl.getClassForTabWidth()}}" index=$ctrl.MINI_QUOTE_BRAIN_BOX_TAB_ID ng-if=$ctrl.hasBrainBoxTab() name=mini-quote-tab-dbsv-brain-box> <mini-quote-brain-box page={{::$ctrl.page}} ng-if="$ctrl.active == $ctrl.MINI_QUOTE_BRAIN_BOX_TAB_ID"></mini-quote-brain-box> </uib-tab> </uib-tabset>'},/*!**************************************************!*\
  !*** ./html/mini-quote/mini-quote-overview.html ***!
  \**************************************************/
function(e,t){e.exports='<div class="detail-1 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label1}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue1> {{$ctrl.overview.topValue1 | pov: 2:$ctrl.overview.isPrice1 }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue1> {{$ctrl.overview.bottomValue1 | pov: 2:$ctrl.overview.isPrice1 }} </div> </div> <div class="detail-2 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label2}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.topValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.topValue2 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.bottomValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.bottomValue2 | price: $ctrl.overview.priceDigit }} </div> </div> <div class="detail-3 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label3}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue3 ng-class="$ctrl.colorService.ceilFloorColor($ctrl.overview.topValue3, $ctrl.overview.previousClose)"> {{$ctrl.overview.topValue3 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue3 ng-class="$ctrl.colorService.ceilFloorColor($ctrl.overview.bottomValue3, $ctrl.overview.previousClose)"> {{$ctrl.overview.bottomValue3 | price: $ctrl.overview.priceDigit }} </div> </div> <div class="detail-4 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label4}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue4 ng-class="$ctrl.colorService.priceColor($ctrl.overview.topValue4, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.topValue4 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue>{{$ctrl.overview.bottomValue4 | emptyPrice: $ctrl.overview.priceDigit }}</div> </div> <div class="detail-5 dynamic-column" ng-if=$ctrl.overview.isStatePricesAvail uib-tooltip-template="\'mini-quote-state-price\'" tooltip-placement={{$ctrl.dynamicLabelPosition}} tooltip-class=state-price-tooltip> <label class=detail-label>{{$ctrl.overview.dynamicLabel.label}}</label> <div class=topValue highlight-cell value=$ctrl.overview.dynamicLabel.price ng-class="$ctrl.colorService.priceColor($ctrl.overview.dynamicLabel.price, $ctrl.overview.previousClose, $ctrl.overview.dynamicLabel.comparedVolume)"> {{$ctrl.overview.dynamicLabel.price | price: $ctrl.overview.priceDigit }} </div> <div class="bottomValue yellow" highlight-cell value=$ctrl.overview.dynamicLabel.volume>{{$ctrl.overview.dynamicLabel.volume | volume}}</div> </div> <script type=text/ng-template id=mini-quote-state-price> <div ng-repeat="pstatus in $ctrl.overview.statePrices track by $index" id="state-price">\n        <div class="col-8">\n            {{pstatus.state}}\n        </div>\n        <div class="col-8 value" ng-if="pstatus.needColor" ng-class="$ctrl.colorService.priceColor(pstatus.price, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)">\n            {{pstatus.price | price: $ctrl.overview.priceDigit}}\n        </div>\n        <div class="col-8 value" ng-if="::!pstatus.needColor">\n            {{pstatus.price | price: $ctrl.overview.priceDigit}}\n        </div>\n    </div> </script>'},/*!*****************************************************!*\
  !*** ./html/mini-quote/mini-quote-symbol-info.html ***!
  \*****************************************************/
function(e,t){e.exports=' <div class=mini-quote-symbol-input ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <quote-symbol-input class=row-4 on-validated-symbol=$ctrl.onSubmitSymbolInput(instrument) edit-on-click=true placeholder=Symbol init-symbol=$ctrl.initSymbol.name id={{::$ctrl.id}}></quote-symbol-input> <div class="symbol-flags text-default"> <span class=symbol-status>{{$ctrl.overview.status}}</span> <ts-level ng-if="$ctrl.overview.tsLevel.length > 0" level=$ctrl.overview.tsLevel> </ts-level> </div> </div> <div class=mini-quote-last-done highlight-cell value=$ctrl.overview.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=price>{{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}}</div> <div class=change>{{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div>'},/*!*************************************************!*\
  !*** ./html/mini-quote/news-by-symbol-row.html ***!
  \*************************************************/
function(e,t){e.exports='<div class=content ng-click=$ctrl.openNewsDetail()> <div class="title text-default"> {{$ctrl.data.title}} </div> <div class="last-update text-data-topic"> {{$ctrl.data.date | date:\'dd MMMM yyyy\'}} {{$ctrl.data.time}} </div> </div>'},/*!*********************************************!*\
  !*** ./html/mini-quote/news-by-symbol.html ***!
  \*********************************************/
function(e,t){e.exports='<div class=scroll-container vs-repeat vs-autoresize vs-auto-element-resize> <news-by-symbol-row class="component-seperator-bottom table-color-hover" name=news-row-{{$index}} data=data ng-class="{\'table-color-select\': $ctrl.isActiveRow(data.id)}" ng-repeat="data in $ctrl.newsContentList track by data.id" ng-click=$ctrl.openNewsDetail(data)> </news-by-symbol-row> </div>'},/*!***************************************!*\
  !*** ./html/input/auto-complete.html ***!
  \***************************************/
function(e,t){e.exports='<div class=input-container> <input type=text class=suggest-input ng-model=$ctrl.hintSymbol> <input name=symbol type=text class=main-input ng-model=$ctrl.symbol ng-model-options=$ctrl.ngModelOptions stt-ng-model-debounce stt-ng-model-debounce-on-blur=$ctrl.onInputBlur() stt-ng-model-debounce-on-enter-key=$ctrl.onUserSubmitSymbol() stt-ng-model-debounce-on-tab-key=$ctrl.onUserSubmitSymbol() placeholder={{$ctrl.displayPlaceholder}} ng-disabled=$ctrl.isDisabled ng-change=$ctrl.onInputChange() ng-focus=$ctrl.onFocusInput() maxlength=20 autocomplete=off> </div> <div class=auto-complete ng-if=$ctrl.isAutoCompleteShown detect-scroll=$ctrl.onScroll()> <ul class=scroll-container vs-repeat vs-autoresize vs-options="{latch: true}"> <li name={{key.symbol}} last-search={{key.isLastSearch}} ng-repeat="key in $ctrl.filteredSymbols track by $index" ng-class="{\'active\': $ctrl.selected === key}" ng-mousedown=$ctrl.selectAutoCompleteKey(key.symbol)>{{key.symbol}}</li> </ul> </div>'},/*!**************************************!*\
  !*** ./html/input/volume-input.html ***!
  \**************************************/
function(e,t){e.exports="<input type=text name={{$ctrl.name}} placeholder={{$ctrl.placeholder}} ng-disabled=$ctrl.isDisabled ng-change=$ctrl.onInputChange() ng-focus=$ctrl.onFocus() ng-blur=$ctrl.onBlur() ng-model=$ctrl.volume ng-model-options=$ctrl.ngModelOptions stt-ng-model-debounce stt-ng-model-debounce-on-blur=$ctrl.onBlur() maxlength=15 autocomplete=off> "},/*!********************************************!*\
  !*** ./html/input/smart-volume-input.html ***!
  \********************************************/
function(e,t){e.exports='<div> <div class=volume-from-port ng-if=$ctrl.isShowVolumeFromPortPopover> <div class=fill-in-button ng-if=!$ctrl.isShowLoadingInVolumeFromPortPopover ng-click=$ctrl.fillVolumeFromPortfolio()>Fill from portfolio</div> <div class=loading-label ng-if=$ctrl.isShowLoadingInVolumeFromPortPopover>Loading portfolio...</div> </div> <volume-input volume=$ctrl.inputVolume name={{$ctrl.name}} placeholder={{$ctrl.placeholder}} is-disabled=$ctrl.isDisabled analytics-category={{::$ctrl.analyticsCategory}} analytics-action={{::$ctrl.analyticsAction}} next-focus-elements=$ctrl.nextFocusElements on-input-arrow-up=$ctrl.onArrowUp() on-input-arrow-down=$ctrl.onArrowDown() on-input-focus=$ctrl.onVolumeInputFocus()> </volume-input> <a name=smart-volume-button type=button ng-click=$ctrl.showComponent() ng-disabled=$ctrl.isShouldDisableSmartVolume()> <div class="caret-container nr-btn"> <i class="fa fa-caret-up" aria-hidden=true></i> <i class="fa fa-caret-down" aria-hidden=true></i> </div> </a> <div class=smart ng-if=$ctrl.isShow> <div class=prev-level-2 ng-click=$ctrl.decrease($ctrl.level2)>{{$ctrl.level2 | price: 0 }}</div> <div class=prev-level-1 ng-click=$ctrl.decrease($ctrl.level1)>{{$ctrl.level1 | price: 0 }}</div> <div class=next-level-1 ng-click=$ctrl.increase($ctrl.level1)>{{$ctrl.level1 | price: 0 }}</div> <div class=next-level-2 ng-click=$ctrl.increase($ctrl.level2)>{{$ctrl.level2 | price: 0 }}</div> </div> </div>'},/*!*************************************!*\
  !*** ./html/input/price-input.html ***!
  \*************************************/
function(e,t){e.exports="<input name=price type=text placeholder={{$ctrl.placeholder}} ng-disabled=$ctrl.isDisabled ng-focus=$ctrl.onFocus($event) ng-mousedown=$ctrl.onMousedown() stt-ng-model-debounce stt-ng-model-debounce-on-blur=$ctrl.onBlur() ng-model-options=$ctrl.ngModelOptions ng-model=$ctrl.price autocomplete=off>"},/*!*******************************************!*\
  !*** ./html/input/smart-price-input.html ***!
  \*******************************************/
function(e,t){e.exports='<div> <price-input price-digit=$ctrl.priceDigit price=$ctrl.inputPrice placeholder={{$ctrl.placeholder}} is-disabled=$ctrl.isDisabled can-negative=$ctrl.canNegative next-focus-elements=$ctrl.nextFocusElements analytics-category={{::$ctrl.analyticsCategory}} analytics-action={{::$ctrl.analyticsAction}} on-input-arrow-up=$ctrl.onArrowUp() on-input-arrow-down=$ctrl.onArrowDown() on-input-price-type-shortcut=$ctrl.onInputPriceTypeShortcutChange(priceType) price-type-shortcut-mapping=$ctrl.priceTypeShortcutMapping> </price-input> <a name=smart-price-button type=button ng-click=$ctrl.showComponent() ng-disabled=$ctrl.isShouldDisableSmartPrice()> <div class="caret-container nr-btn"> <i class="fa fa-caret-up" aria-hidden=true></i> <i class="fa fa-caret-down" aria-hidden=true></i> </div> </a> <div class=smart ng-if=$ctrl.isShow> <div class=prev ng-click=$ctrl.decreasePrice()>-</div> <div class=center ng-click=$ctrl.selectPrice()>{{$ctrl.smartPrice | price: $ctrl.priceDigit}}</div> <div class=next ng-click=$ctrl.increasePrice()>+</div> </div> </div> '},/*!**************************************!*\
  !*** ./html/input/symbol-input.html ***!
  \**************************************/
function(e,t){e.exports="<auto-complete placeholder=$ctrl.placeholder init-symbol=$ctrl.symbol all-symbols=$ctrl.allSymbols selected-symbol-list=$ctrl.lastSelectedSymbolList is-disabled=$ctrl.isDisabled on-auto-complete-submit-new-symbol=$ctrl.onAutoCompleteSubmitNewSymbol(symbol) on-main-input-blur=$ctrl.onMainInputBlur(symbol) on-focus-main-input=$ctrl.onMainInputFocus()></auto-complete>"},/*!****************************************************!*\
  !*** ./html/input/add-favourite-symbol-input.html ***!
  \****************************************************/
function(e,t){e.exports="<button class=nr-btn-xs ng-click=$ctrl.showInput() ng-hide=$ctrl.showSymbolInput>+ Add</button> <auto-complete placeholder=$ctrl.placeholder ng-show=$ctrl.showSymbolInput init-symbol=$ctrl.symbol all-symbols=$ctrl.allSymbols selected-symbol-list=$ctrl.lastSelectedSymbolList is-disabled=$ctrl.isDisabled on-auto-complete-submit-new-symbol=$ctrl.onAutoCompleteSubmitNewSymbol(symbol); on-main-input-blur=$ctrl.onMainInputBlur(symbol) on-focus-main-input=$ctrl.onMainInputFocus()></auto-complete>"},/*!********************************************!*\
  !*** ./html/input/quote-symbol-input.html ***!
  \********************************************/
function(e,t){e.exports="<div class=container ng-click=$ctrl.onClick($event)> <p class=blank-mode ng-class=\"{'blank': $ctrl.symbol === undefined || $ctrl.symbol === ''}\" dynamic-font-size value=$ctrl.symbol> {{ $ctrl.displaySymbol }} </p> </div> <auto-complete class=hide placeholder=$ctrl.placeholder init-symbol=$ctrl.initSymbol all-symbols=$ctrl.allSymbols selected-symbol-list=$ctrl.lastSelectedSymbolList is-disabled=$ctrl.isDisabled on-auto-complete-submit-new-symbol=$ctrl.onAutoCompleteSubmitNewSymbol(symbol) on-main-input-blur=$ctrl.onMainInputBlur(symbol) on-focus-main-input=$ctrl.onMainInputFocus()></auto-complete>"},/*!*******************************************!*\
  !*** ./html/input/news-symbol-input.html ***!
  \*******************************************/
function(e,t){e.exports='<input name=symbol type=text class="main-input uppercase" ng-click=$ctrl.onClick() ng-model=$ctrl.symbol placeholder="Search by Symbol" ng-keypress=$ctrl.onKeyPress($event) ng-blur=$ctrl.onUserSubmitSymbol() maxlength=20 autocomplete=off>'},/*!********************************************!*\
  !*** ./html/input/click-volume-input.html ***!
  \********************************************/
function(e,t){e.exports='<div class="container text-unchanged-volume" ng-dblclick=$ctrl.onDoubleClickContainer() ng-mousedown=$ctrl.onMouseDown($event)> <p ng-class=$ctrl.getClass()> {{ $ctrl.getDisplayVolume() }} </p> </div> <input type=text name={{$ctrl.name}} ng-blur=$ctrl.onInputBlur() ng-keypress=$ctrl.onKeyPress($event) ng-keydown=$ctrl.onKeyDown($event) ng-mousedown=$ctrl.onInputMouseDown($event) ng-model=$ctrl.currentVolume ng-change=$ctrl.onInputChange() maxlength=15 autocomplete=off>'},/*!***********************************************!*\
  !*** ./html/input/editable-symbol-input.html ***!
  \***********************************************/
function(e,t){e.exports='<p ng-click=$ctrl.onClick($event) ng-dblclick=$ctrl.onDblClick($event) tooltip-enable=$ctrl.isEnableTooltip() uib-tooltip="{{ $ctrl.tooltipsSymbol }}" tooltip-append-to-body=true tooltip-placement=right> {{ $ctrl.displaySymbol }} </p> <auto-complete placeholder=$ctrl.placeholder ng-init=$ctrl.onSymbolInputInitiated() ng-if=$ctrl.isEditMode init-symbol=$ctrl.initSymbol all-symbols=$ctrl.allSymbols selected-symbol-list=$ctrl.lastSelectedSymbolList is-disabled=$ctrl.isDisabled on-auto-complete-submit-new-symbol=$ctrl.onAutoCompleteSubmitNewSymbol(symbol) on-main-input-blur=$ctrl.onMainInputBlur(symbol) on-focus-main-input=$ctrl.onMainInputFocus()></auto-complete>'},/*!***********************************!*\
  !*** ./html/input/pin-input.html ***!
  \***********************************/
function(e,t){e.exports='<div class="col-10 row-3"> <input tabindex=4 class="col-8 row-3" name=pin placeholder={{::$ctrl.placeholder}} type=password placeholder=PIN ng-disabled=$ctrl.isPinSave() class=main-input ng-change=$ctrl.onPinChanged() ng-model=$ctrl.pin maxlength=6 autocomplete=off> <div name=save-pin-button ng-click=$ctrl.switchSavePin() ng-if=$ctrl.isShowSavePinIcon()> <i ng-class="{ \'fa-lock\' : $ctrl.isPinSave(), \'fa-unlock-alt\' : !$ctrl.isPinSave() }" uib-tooltip={{$ctrl.getTooltipMessage()}} tooltip-placement=top tooltip-append-to-body=true class=fa aria-hidden=true></i> </div> </div>'},/*!****************************************!*\
  !*** ./html/input/index-dropdown.html ***!
  \****************************************/
function(e,t){e.exports='<li id=dLabel class=wrapper-dropdown ng-click=$ctrl.toggleDropdown()> <span class=selected-index-text>{{$ctrl.selected[$ctrl.keyName]}}</span> <ul class=dropdown> <li ng-repeat="data in $ctrl.model" ng-click="$ctrl.menuSelected($event, data)" id={{$ctrl.id}}{{$index}} class="{{data[\'type\'].toLowerCase()}}" ng-class="{\'active\': $ctrl.selected[$ctrl.keyName] === data[$ctrl.keyName], \'hover\': $ctrl.hover[$ctrl.keyName] === data[$ctrl.keyName]}" ng-mouseenter="$ctrl.showSubmenu($event, data)" ng-mouseleave=$ctrl.onMouseLeave($event)> <a><span>{{data[$ctrl.keyName]}}</span></a> <ul ng-if="data[\'type\'] === \'GROUP\'" class=dropdown> <hr/> <li ng-repeat="subData in data[\'childs\']" ng-click="$ctrl.submenuSelected($event, subData, data)" id=sub-{{$ctrl.id}}{{$index}} class="{{subData[\'type\'].toLowerCase()}}" ng-class="{\'active\':$ctrl.selected[$ctrl.keyName] == subData[$ctrl.keyName]}"> <a><span>{{subData[$ctrl.keyName]}}</span></a> </li> <hr/> </ul> </li> </ul> </li> '},/*!**************************************************!*\
  !*** ./html/input/payoff-strategy-dropdown.html ***!
  \**************************************************/
function(e,t){e.exports='<li id=dLabel class=wrapper-dropdown ng-click=$ctrl.toggleDropdown()> <span class=selected-index-text>{{$ctrl.selected.name}}<strong>{{$ctrl.selected.showUnderlying}}</strong><i> {{$ctrl.selected.showLastSavedTimestamp}}</i></span> <ul class=dropdown> <li ng-repeat="data in $ctrl.model" ng-click="$ctrl.menuSelected($event, data)" id={{$ctrl.id}}{{$index}} class="{{data[\'type\'].toLowerCase()}}" ng-class="{\'active\': $ctrl.selected.name === data.name, \'hover\': $ctrl.hover.name === data.name}" ng-mouseenter="$ctrl.showSubmenu($event, data)" ng-mouseleave=$ctrl.onMouseLeave($event)> <a><span>{{data.name}}<strong>{{data.showUnderlying}}</strong><i> {{data.showLastSavedTimestamp}}</i></span></a> </li> </ul> </li>'},/*!********************************************!*\
  !*** ./html/input/menu-more-dropdown.html ***!
  \********************************************/
function(e,t){e.exports='<li id=dLabel class=wrapper-dropdown ng-mouseover=$ctrl.toggleDropdown($event)> <div class=selected-index-text>{{$ctrl.selected[$ctrl.keyName]}}</div> <ul class="dropdown col-13"> <li ng-repeat="data in $ctrl.model" ng-click="$ctrl.menuSelected($event, data)" id={{$ctrl.id}}{{$index}} key={{data.key}} name="menu-item-{{data[\'id\']}}" class="{{data[\'menuType\'].toLowerCase()}}" ng-if=!$ctrl.isNotInList(data) ng-class="{\'active\': $ctrl.isSelected(data), \'hover\': $ctrl.hover[$ctrl.keyName] === data[$ctrl.keyName]}"> <a><span>{{data[$ctrl.keyName]}}</span></a> </li> </ul> </li>'},/*!************************************!*\
  !*** ./html/input/date-input.html ***!
  \************************************/
function(e,t){e.exports='<div class=input-group id=date-picker> <input maxlength=10 placeholder={{$ctrl.placeholder}} type=text ng-model=$ctrl.date is-open=$ctrl.isOpen uib-datepicker-popup=dd/MM/yyyy show-button-bar=$ctrl.showButtonBar popup-placement={{$ctrl.popupPlacement}} datepicker-options=$ctrl.datepickerOptions ng-required=true datepicker-append-to-body=$ctrl.appendToBody /> <span class=input-group-btn> <button id=open-calendar-btn type=button class="btn btn-active" ng-click="$ctrl.openCalendar($event, \'datePickerConfig\')"><i class="fa fa-calendar" id=calendarBtn></i></button> </span> </div>'},/*!************************************!*\
  !*** ./html/input/time-input.html ***!
  \************************************/
function(e,t){e.exports='<div class="input-group dropup" uib-dropdown id=time-picker> <input placeholder={{$ctrl.placeholder}} type=text class="col-8 row-3" datetime-picker=HH:mm:ss show-seconds=$ctrl.showSeconds button-bar=$ctrl.buttonBar ng-model=$ctrl.time is-open=$ctrl.isOpen timepicker-options=$ctrl.timepickerOptions enable-date=false maxlength=8 /> <span class=input-group-btn> <button id=open-timepicker-btn type=button class="btn btn-active col-3 row-3" ng-click=$ctrl.openTimepicker()><i class="fa fa-clock-o" id=clock-icon></i></button> </span> </div>'},/*!******************************************!*\
  !*** ./html/input/account-no-input.html ***!
  \******************************************/
function(e,t){e.exports='<div class=account-shortcut-hint popover-placement=top popover-is-open=$ctrl.isHasSuggestedAccountNo popover-animation=false popover-trigger=none popover-append-to-body=true uib-popover-template="\'account-no-suggest.html\'"> <input type=text id={{$ctrl.id}} placeholder="Account No." ng-model=$ctrl.accountNo ng-keydown=$ctrl.onKeyDown($event) ng-blur=$ctrl.onInnerComponentInputBlur() ng-change=$ctrl.onInnerAccountNoInputChange() ng-disabled=$ctrl.isDisabled autocomplete=off /> </div> <script type=text/ng-template id=account-no-suggest.html> <div class="account-no-suggest">\n        {{$ctrl.accountNo}} = {{$ctrl.currentSuggestedAccountNo}}\n    </div> </script>'},/*!*******************************************************!*\
  !*** ./html/input/trade-report-account-no-input.html ***!
  \*******************************************************/
function(e,t){e.exports='<input type=text placeholder="Account No." ng-model=$ctrl.accountNo ng-keypress=$ctrl.onKeyPress($event) ng-blur=$ctrl.onInputBlur() autocomplete=off> '},/*!**************************************!*\
  !*** ./html/input/radio-button.html ***!
  \**************************************/
function(e,t){e.exports='<div> <input type=radio name={{$ctrl.name}} value={{$ctrl.value}} id={{$ctrl.elementId}} class="col-3 radio-buy-sell" ng-model=$ctrl.sidename ng-keypress=$ctrl.onKeyPress($event) ng-keydown=$ctrl.onKeyDown($event) ng-click=$ctrl.onClickEvent()> <div class=check></div> </div> <label class=col-5 for={{$ctrl.elementId}}>{{$ctrl.label}}</label>'},/*!**********************************!*\
  !*** ./html/input/checkbox.html ***!
  \**********************************/
function(e,t){e.exports='<span ng-disabled=$ctrl.isDisabled> <input type=checkbox id={{::$ctrl.checkboxId}} ng-click=$ctrl.onClickEvent() name={{::$ctrl.name}} ng-model=$ctrl.isCheck ng-disabled=$ctrl.isDisabled ng-keypress=$ctrl.onKeyPress($event) ng-keydown=$ctrl.onKeyDown($event) /> <label for={{::$ctrl.checkboxId}}><i class="mdi mdi-check"></i></label> </span> <label for={{::$ctrl.checkboxId}} class={{::$ctrl.labelClass}}>{{::$ctrl.label}}</label>'},/*!*************************************************!*\
  !*** ./html/input/underlying-symbol-input.html ***!
  \*************************************************/
function(e,t){e.exports="<auto-complete placeholder=$ctrl.placeholder init-symbol=$ctrl.symbol all-symbols=$ctrl.allSymbols selected-symbol-list=$ctrl.lastSelectedSymbolList is-disabled=$ctrl.isDisabled on-auto-complete-submit-new-symbol=$ctrl.onAutoCompleteSubmitNewSymbol(symbol); on-main-input-blur=$ctrl.onMainInputBlur(symbol) on-focus-main-input=$ctrl.onMainInputFocus()></auto-complete>"},/*!**************************************!*\
  !*** ./html/order/account-info.html ***!
  \**************************************/
function(e,t){e.exports='<div class=col-21> <index-dropdown model=$ctrl.accountList selected=$ctrl.selectedAccount key-name=accountName dropdown-name=account on-update=$ctrl.onAccountChanged(model)></index-dropdown> </div> <button type=button class="nr-btn nr-btn-extra-large" ng-click=$ctrl.orderProcessor.cancelMultipleOrders() ng-disabled=!$ctrl.isCanCancel id=multiple-cancel-order>Cancel {{$ctrl.getCheckedCancelOrders()}} Order(s)</button> <div class=col-12> <button ng-if=$ctrl.showMultiOrderButton() class="nr-btn nr-btn-large" name=multi-order-btn ng-click=$ctrl.clickMultiOrder()>Multi Order</button> </div> <div class="text-customer-data name">{{$ctrl.accountNameForSelectedAccount.engName}}</div> <div class=account-info-1> <label>{{$ctrl.accountInfoForSelectedAccount.label1}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value1 | price: 2}}</span> </div> <div class=account-info-2> <label>{{$ctrl.accountInfoForSelectedAccount.label2}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value2 | price: 2}}</span> </div> <div class=account-info-3> <label>{{$ctrl.accountInfoForSelectedAccount.label3}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value3 | price: 2}}</span> </div>'},/*!************************************************!*\
  !*** ./html/order/marketrep-account-info.html ***!
  \************************************************/
function(e,t){e.exports='<div class=col-29> <index-dropdown class="row-3 col-12 systemType" model=$ctrl.authorizedSystemTypes selected=$ctrl.selectedSystemType key-name=fullName dropdown-name=systemType on-update=$ctrl.onSystemTypeChange(model)></index-dropdown> <account-no-input class="row-3 col-15 accountNo" account-no=$ctrl.selectedAccount.accountNo on-update=$ctrl.onAccountNoChange(newAccountNo) is-disabled=$ctrl.isDisableAccountNumberInput()></account-no-input> </div> <button type=button class="nr-btn nr-btn-extra-large" ng-click=$ctrl.orderProcessor.cancelMultipleOrders() ng-disabled=!$ctrl.isCanCancel id=multiple-cancel-order>Cancel {{$ctrl.getCheckedCancelOrders()}} Order(s)</button> <div class=col-12> <button class="nr-btn nr-btn-large" name=multi-order-btn ng-click=$ctrl.clickMultiOrder()>Multi Order</button> </div> <div class="text-customer-data name">{{$ctrl.accountNameForSelectedAccount.engName}}</div> <div class=account-info-1> <label>{{$ctrl.accountInfoForSelectedAccount.label1}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value1 | price: 2}}</span> </div> <div class=account-info-2> <label>{{$ctrl.accountInfoForSelectedAccount.label2}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value2 | price: 2}}</span> </div> <div class=account-info-3> <label>{{$ctrl.accountInfoForSelectedAccount.label3}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value3 | price: 2}}</span> </div> '},/*!*******************************!*\
  !*** ./html/order/order.html ***!
  \*******************************/
function(e,t){e.exports="<div ng-class=\"[$ctrl.orderProcessor.side.classname, $ctrl.orderProcessor.systemType]\" class=component-seperator-top> <account-info ng-if=::$ctrl.orderProcessor.isInvestor selected-account=$ctrl.orderProcessor.currentAccount class=row-4></account-info> <marketrep-account-info ng-if=::$ctrl.orderProcessor.isMarketRep selected-account=$ctrl.orderProcessor.currentAccount class=row-4></marketrep-account-info> <vip-account-info ng-if=::$ctrl.orderProcessor.isVIP selected-account=$ctrl.orderProcessor.currentAccount class=row-4></vip-account-info> <place-order ng-if=$ctrl.orderProcessor.isCurrentAccountIsEquity() ng-class=\"{'row-8': $ctrl.orderProcessor.isShowCondition, 'row-4': !$ctrl.orderProcessor.isShowCondition}\" source=$ctrl.NORMAL_PAGE_PLACE_ORDER_SOURCE_ID> </place-order> <derivative-place-order ng-if=$ctrl.orderProcessor.isCurrentAccountIsDerivative() ng-class=\"{'row-8': $ctrl.orderProcessor.isShowCondition, 'row-4': !$ctrl.orderProcessor.isShowCondition}\" source=$ctrl.NORMAL_PAGE_PLACE_ORDER_SOURCE_ID> </derivative-place-order> <all-derivatives-place-order ng-if=$ctrl.orderProcessor.isCurrentAccountIsAllDerivative() class=row-4 source=$ctrl.NORMAL_PAGE_PLACE_ORDER_SOURCE_ID> </all-derivatives-place-order> </div> <div> <order-status selected-account=$ctrl.orderProcessor.currentAccount></order-status> </div>"},/*!*************************************!*\
  !*** ./html/order/place-order.html ***!
  \*************************************/
function(e,t){e.exports='<div class=row-3> <div role=form class=row-3 id=place-order-form name=place-order> <div class="row-3 order-side-wrapper"> <radio-button name=side class=col-8 element-id=buy-btn value=B label=BUY sidename=$ctrl.orderProcessor.sidename next-focus-elements=$ctrl.sideNextFocusElements on-click=$ctrl.onSideChange()></radio-button> <radio-button name=side class=col-11 element-id=sell-btn value=S label=SELL sidename=$ctrl.orderProcessor.sidename next-focus-elements=$ctrl.sideNextFocusElements on-click=$ctrl.onSideChange()></radio-button> </div> <symbol-input id=place-order-symbol name=place-order-symbol class="row-3 col-15" symbol=$ctrl.orderProcessor.symbol placeholder=Symbol last-search=2 on-validated-symbol=$ctrl.onValidatedSymbol(instrument) on-input-symbol-change=$ctrl.onInputSymbolChange(inputStr) on-blur=$ctrl.onBlurSymbolInput(symbol) market-type=E next-focus-elements=$ctrl.symbolNextFocusElements> </symbol-input> <div class="col-9 row-3"> <checkbox name=nvdr label=NVDR is-check=$ctrl.orderProcessor.isNvdr></checkbox> </div> <div class="col-20 form"> <label class="row-3 col-4">Vol:</label> <smart-volume-input class=row-3 id=place-order-volume name=place-order-volume placeholder=Volume input-volume=$ctrl.orderProcessor.volume is-disabled=false market-type=E is-enable-volume-from-port=true current-symbol=$ctrl.orderProcessor.symbol current-account=$ctrl.orderProcessor.currentAccount is-nvdr=$ctrl.orderProcessor.isNvdr next-focus-elements=$ctrl.volumeInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartVolumeAction()}} analytics-action={{::$ctrl.getVolumeAction()}}> </smart-volume-input> </div> <div class="col-22 form"> <label class="row-3 col-6">Price:</label> <smart-price-input class=row-3 id=place-order-price price-digit=2 input-price=$ctrl.orderProcessor.price placeholder=Price is-disabled=$ctrl.checkPriceTypeNotLimit() side=$ctrl.orderProcessor.side next-focus-elements=$ctrl.priceInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartPriceAction()}} analytics-action={{::$ctrl.getPriceAction()}} stock-data=$ctrl.instrumentStaticData on-input-price-type-shortcut=$ctrl.onInputPriceTypeShortcut(priceType) price-type-shortcut-mapping=$ctrl.priceTypeShortcutMapping> </smart-price-input> </div> <index-dropdown class=col-12 key-name=fullname dropdown-name=priceType model=$ctrl.priceTypeList selected=$ctrl.orderProcessor.priceType on-update=$ctrl.onPriceTypeChanged(model)> </index-dropdown> <div class="row-3 col-9"> <button class="nr-btn nr-btn-small" name=condition type=button ng-click=$ctrl.toggleCondition()>Cond.</button> </div> <div class="row-3 col-18 form form-pin"> <label class=col-5 ng-if=$ctrl.shouldShowPinInput()>PIN:</label> <pin-input class="col-10 row-3" pin=$ctrl.orderProcessor.pin placeholder=PIN id=place-order-pin next-focus-elements=$ctrl.pinNextFocusElement is-show-save-pin=true ng-if=$ctrl.shouldShowPinInput()></pin-input> </div> <button id=place-order-submit class="nr-btn nr-btn-medium" ng-class=$ctrl.orderProcessor.side.classname name=submit type=button ng-click=$ctrl.submitOrder() ng-disabled=$ctrl.isLockPlaceOrder> <i stt-show=$ctrl.isRequesting class="fa fa-spinner fa-spin fa-fw"></i> <span stt-show=!$ctrl.isRequesting>{{$ctrl.submitLabel()}}</span> </button> <button class="nr-btn nr-btn-medium" name=clear type=button ng-click=$ctrl.clearFormDataByClearBtn()>Clear</button> <button class="nr-btn col-3 row-3" name=view-all-order type=button ng-click=$ctrl.viewAllOrder()><i class="fa fa-search" aria-hidden=true></i></button> <refresh-ui-component is-requesting=$ctrl.orderStatusService.isRequestingEquity></refresh-ui-component> </div> </div> <div class="row-5 place-order-cond" ng-if=$ctrl.orderProcessor.isShowCondition> <div class="col-19 order-side-wrapper"> <div class=col-19 ng-if=$ctrl.isShowShortCover()> <radio-button name=side class=col-8 element-id=cns-short-btn value=H label=SHORT sidename=$ctrl.orderProcessor.sidename next-focus-elements=$ctrl.sideNextFocusElements on-click=$ctrl.onSideChange()></radio-button> <radio-button name=side class=col-10 element-id=cns-cover-btn value=C label=COVER sidename=$ctrl.orderProcessor.sidename next-focus-elements=$ctrl.sideNextFocusElements on-click=$ctrl.onSideChange()></radio-button> </div> </div> <div class="col-22 order-side-wrapper"> <div class=col-22 ng-if=$ctrl.isAccountHasDepositCheckbox> <checkbox name=isDeposit label=Deposit is-check=$ctrl.isDeposit is-disabled=!$ctrl.isEnableDepositCheckbox()></checkbox> </div> <div class=col-22 ng-if=$ctrl.isShowSBLPositionTypeDropdown> <index-dropdown class=col-14 model=$ctrl.sblPositionTypeDropdownList selected=$ctrl.orderProcessor.sblPositionType key-name=dropdownDisplayValue dropdown-name=sblPositionType on-update=$ctrl.onSBLPositionTypeChanged(model) ng-disabled=$ctrl.isDisabledSBLPositionTypeDropdown()> </index-dropdown> </div> </div> <div class="col-21 form"> <label class="row-3 col-7">Iceberg:</label> <smart-volume-input id=place-order-iceberg class=row-3 id=place-order-iceberg name=iceberg placeholder=Iceberg is-disabled=$ctrl.checkEnableIceberg() is-enable-volume-from-port=false input-volume=$ctrl.orderProcessor.iceberg price-type=$ctrl.orderProcessor.priceType market-type=E analytics-category={{::$ctrl.getPlaceOrderCategory()}} next-focus-elements=$ctrl.icebergVolumeInputNextFocusElements analytics-action-for-smart={{::$ctrl.getSmartIcebergAction()}} analytics-action={{::$ctrl.getIcebergAction()}}> </smart-volume-input> </div> <div class="col-22 form"> <label class=col-8> Validity:</label> <index-dropdown class=col-14 model=$ctrl.validityList selected=$ctrl.orderProcessor.condition key-name=label dropdown-name=validity on-update=$ctrl.onValidityChanged(model) ng-disabled=$ctrl.checkPriceTypeNotLimit()> </index-dropdown> </div> </div>'},/*!*************************************************!*\
  !*** ./html/order/derivatives-place-order.html ***!
  \*************************************************/
function(e,t){e.exports='<div class=row-3> <div name=place-order> <div class="row-3 order-side-wrapper"> <radio-button name=side class=col-8 element-id=buy-btn ng-click="$ctrl.onSideChange(\'B\')" next-focus-elements=$ctrl.sideNextFocusElements value=B label=LONG sidename=$ctrl.orderProcessor.sidename></radio-button> <radio-button name=side class=col-8 element-id=sell-btn value=S ng-click="$ctrl.onSideChange(\'S\')" next-focus-elements=$ctrl.sideNextFocusElements label=SHORT sidename=$ctrl.orderProcessor.sidename></radio-button> </div> <index-dropdown class=col-12 dropdown-name=order-position key-name=name model=$ctrl.orderProcessor.positionList selected=$ctrl.orderProcessor.position on-update=$ctrl.onPositionChanged(model)> </index-dropdown> <symbol-input id=place-order-symbol name=place-order-symbol class="row-3 col-15" symbol=$ctrl.orderProcessor.symbol last-search=2 placeholder=Symbol on-validated-symbol=$ctrl.onValidatedSymbol(instrument) on-validated-symbol-fail=$ctrl.onValidatedSymbolFail() on-input-symbol-change=$ctrl.onInputUpdate(inputStr) market-type=D on-blur=$ctrl.onBlurSymbolInput(symbol) next-focus-elements=$ctrl.symbolNextFocusElements></symbol-input> <div class="col-15 form"> <label class=col-5>Vol:</label> <smart-volume-input class=row-3 id=place-order-volume name=place-order-volume placeholder=Volume input-volume=$ctrl.orderProcessor.volume market-type=D is-disabled=false is-enable-volume-from-port=false next-focus-elements=$ctrl.volumeInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartVolumeAction()}} analytics-action={{::$ctrl.getVolumeAction()}}> </smart-volume-input> </div> <div class="col-20 form"> <label class=col-6>Price:</label> <smart-price-input class="row-3 col-14" id=place-order-price price-digit=$ctrl.getPriceDigit() can-negative=true input-price=$ctrl.orderProcessor.price placeholder=Price is-disabled=$ctrl.checkPriceTypeNotLimit() side=$ctrl.orderProcessor.side next-focus-elements=$ctrl.priceInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartPriceAction()}} analytics-action={{::$ctrl.getPriceAction()}} stock-data=$ctrl.instrumentStaticData on-input-price-type-shortcut=$ctrl.onInputPriceTypeShortcut(priceType) price-type-shortcut-mapping=$ctrl.priceTypeShortcutMapping> </smart-price-input> </div> <div class="col-18 form"> <label class=col-8>Type:</label> <index-dropdown class=col-10 dropdown-name=priceType key-name=fullname model=$ctrl.priceTypeList selected=$ctrl.orderProcessor.priceType on-update=$ctrl.onPriceTypeChanged(model)> </index-dropdown> </div> <div class="row-3 col-9"> <button class="nr-btn nr-btn-small" name=condition type=button ng-click=$ctrl.toggleCondition()>Cond.</button> </div> <div class="row-3 col-18 form form-pin"> <label class=col-5 ng-if=$ctrl.shouldShowPinInput()>PIN:</label> <pin-input class="col-10 row-3" pin=$ctrl.orderProcessor.pin placeholder=PIN id=place-order-pin next-focus-elements=$ctrl.pinNextFocusElement is-show-save-pin=true ng-if=$ctrl.shouldShowPinInput()></pin-input> </div> <button id=place-order-submit class="nr-btn nr-btn-medium" ng-class=$ctrl.orderProcessor.side.classname name=submit type=button ng-click=$ctrl.submitOrder() ng-disabled=$ctrl.isLockPlaceOrder> <i stt-show=$ctrl.isRequesting class="fa fa-spinner fa-spin fa-fw"></i> <span stt-show=!$ctrl.isRequesting>{{$ctrl.submitLabel}}</span> </button> <button class="nr-btn nr-btn-medium" name=clear type=button ng-click=$ctrl.clearFormDataByClearBtn()>Clear</button> <button class="nr-btn col-3 row-3" name=view-all-order type=button ng-click=$ctrl.viewAllOrder()><i class="fa fa-search" aria-hidden=true></i></button> <refresh-ui-component is-requesting=$ctrl.orderStatusService.isRequestingDerivatives></refresh-ui-component> </div> </div> <div class="row-5 place-order-cond" ng-if=$ctrl.orderProcessor.isShowCondition> <div class="col-16 row-3 form"> <label class="row-3 col-8">Iceberg:</label> <smart-volume-input class=row-3 id=place-order-iceberg name=iceberg placeholder=Iceberg input-volume=$ctrl.orderProcessor.iceberg is-enable-volume-from-port=false market-type=D is-disabled=$ctrl.checkEnableIceberg() next-focus-elements=$ctrl.icebergVolumeInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartIcebergAction()}} analytics-action={{::$ctrl.getIcebergAction()}}> </smart-volume-input> </div> <div class="col-13 row-3"> <checkbox name=stop-order label="Stop Order" next-focus-elements-after-click=$ctrl.stopOrderCheckboxNextFocusElements on-click=$ctrl.onToggleEnableStopOrder() is-check=$ctrl.orderProcessor.isStopOrderChecked is-disabled=!$ctrl.checkPriceTypeNotATO()></checkbox> </div> <stop-symbol-input id=cond-order-symbol class="col-15 row-3" symbol=$ctrl.orderProcessor.stopSymbol placeholder="Stop Symbol" on-validated-symbol=$ctrl.onValidatedStopSymbol(instrument) on-input-symbol-change=$ctrl.onStopSymbolUpdate(inputStr) on-blur=$ctrl.onBlurConditionSymbolInput(symbol) is-disabled=!$ctrl.orderProcessor.isStopOrderChecked market-type=A next-focus-elements=$ctrl.stopSymbolNextFocusElements> </stop-symbol-input> <index-dropdown ng-disabled=!$ctrl.orderProcessor.isStopOrderChecked class="col-10 row-3" dropdown-name=condition key-name=shortname model=$ctrl.orderProcessor.stopConditionList selected=$ctrl.orderProcessor.stopCondition on-update=$ctrl.onStopConditionChanged(model)> </index-dropdown> <smart-price-input class="row-3 col-14" id=cond-order-price name=cond-order-price price-digit=$ctrl.getStopOrderPriceDigit() can-negative=true input-price=$ctrl.orderProcessor.stopPrice placeholder="Stop Price" is-disabled=!$ctrl.orderProcessor.isStopOrderChecked side=$ctrl.orderProcessor.side next-focus-elements=$ctrl.stopPriceInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartStopPriceAction()}} analytics-action={{::$ctrl.getStopPriceAction()}} stock-data=$ctrl.orderProcessor.stopInstrumentStaticData> </smart-price-input> <div class="col-19 row-3 form"> <label class=col-8>Validity:</label> <index-dropdown ng-disabled=!$ctrl.checkPriceTypeNotATO() class=col-10 dropdown-name=validity key-name=label model=$ctrl.validityList selected=$ctrl.orderProcessor.condition on-update=$ctrl.onValidityChanged(model)> </index-dropdown> </div> <div class="col-12 row-2 form" ng-if=$ctrl.isShowDateInput()> <date-input date=$ctrl.orderProcessor.sessionDate is-open=$ctrl.datePickerConfig.open show-button-bar=$ctrl.datePickerConfig.showButtonBar popup-placement=$ctrl.datePickerConfig.popupPlacement datepicker-options=$ctrl.datePickerConfig.datepickerOptions append-to-body=$ctrl.datePickerConfig.appendToBody placeholder=dd/MM/yyyy open-calendar="$ctrl.openCalendar($event, \'datePickerConfig\')" next-focus-elements=$ctrl.dateInputNextFocusElements></date-input> </div> <div class="col-1 row-2" ng-if=$ctrl.isShowDateInput()></div> <div class="col-11 row-2 form" ng-if=$ctrl.isShowTimeInput()> <time-input time=$ctrl.orderProcessor.sessionTime show-seconds=$ctrl.timePickerConfig.showSeconds is-open=$ctrl.openTimePicker button-bar=$ctrl.timePickerConfig.buttonBar timepicker-options=$ctrl.timePickerConfig.timepickerOptions placeholder=HH:mm:ss next-focus-elements=$ctrl.timeInputNextFocusElements open-timepicker=$ctrl.openTimepicker()></time-input> </div> <div class="col-1 row-2" ng-if=$ctrl.isShowTimeInput()></div> <index-dropdown ng-if=$ctrl.checkValidityIsSession() ng-disabled=!$ctrl.checkPriceTypeNotATO() class="col-18 row-3" dropdown-name=session key-name=showMsg model=$ctrl.sessionList selected=$ctrl.orderProcessor.selectedSession on-update=$ctrl.onSelectedSessionChanged> </index-dropdown> </div>'},/*!*****************************************************!*\
  !*** ./html/order/all-derivatives-place-order.html ***!
  \*****************************************************/
function(e,t){e.exports='<div class=row-3> <div name=place-order> <div class="col-142 empty-place-order-form"></div> <button class="nr-btn col-3 row-3" name=view-all-order type=button ng-click=$ctrl.viewAllOrder()><i class="fa fa-search" aria-hidden=true></i></button> <refresh-ui-component is-requesting=$ctrl.orderStatusService.isRequestingDerivatives></refresh-ui-component> </div> </div> '},/*!**************************************!*\
  !*** ./html/order/order-status.html ***!
  \**************************************/
function(e,t){e.exports='<div ng-if=$ctrl.orderProcessor.isCurrentAccountIsEquity()> <ul class="header text-data-topic bg-header"> <li class=col-3> <span class=checkAllOrder> <input type=checkbox value=None id=checkAllEquityOrderBtn name=check ng-checked=$ctrl.isCheckedAllEquity() ng-click=$ctrl.toggleCancelAlEquity() /> <label for=checkAllEquityOrderBtn><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-13 order-no" ng-click=$ctrl.sortEquityOrderByOrderNo()> Order No.<i class=fa ng-class=$ctrl.getSortIconByOrderNo()></i> </li> <li class="col-9 time" ng-click=$ctrl.sortEquityOrderByOrderTime()> Time<i class=fa ng-class=$ctrl.getSortIconByEquityOrderTime()></i> </li> <li class="col-21 symbol" ng-click=$ctrl.sortEquityOrderBySymbol()> Symbol<i class=fa ng-class=$ctrl.getSortIconByEquitySymbol()></i> </li> <li class="col-6 side" ng-click=$ctrl.sortEquityOrderBySide()> Side<i class=fa ng-class=$ctrl.getSortIconBySide()></i> </li> <li class="col-11 price" ng-click=$ctrl.sortEquityOrderByPrice()> Price<i class=fa ng-class=$ctrl.getSortIconByPrice()></i> </li> <li class="col-12 volume" ng-click=$ctrl.sortEquityOrderByVolume()> Volume<i class=fa ng-class=$ctrl.getSortIconClassByVolume()></i> </li> <li class="col-12 matched-volume" ng-click=$ctrl.sortEquityOrderByMatchedVolume()> Matched<i class=fa ng-class=$ctrl.getSortIconClassByMatchedVolume()></i> </li> <li class="col-13 balance-volume" ng-click=$ctrl.sortEquityOrderByBalanceVolume()> Balance<i class=fa ng-class=$ctrl.getSortIconClassByBalanceVolumeEquity()></i> </li> <li class="col-13 cancelled-volume" ng-click=$ctrl.sortEquityOrderByCancelledVolume()> Cancelled<i class=fa ng-class=$ctrl.getSortIconClassByCancelledVolume()></i> </li> <li class="col-19 status" ng-click=$ctrl.sortEquityOrderByStatus()> Status<i class=fa ng-class=$ctrl.getSortIconClass()></i> </li> <li class=col-9></li> <li class=col-7></li> <li class=col-8></li> <li class=col-5></li> </ul> <div up-down-select-table data=$ctrl.orderStatusService.currentEquityOrderStatusList property-key-name=key selected-key=$ctrl.selectedRow on-select=$ctrl.onEquitySelectedRowChangeByPressUpDown(newIndex)> <div keyboard-shortcut-order-status on-input-keyboard-shortcut-change-order=$ctrl.onInputKeyboardShortcutChangeEquityOrder() on-input-keyboard-shortcut-cancel-order=$ctrl.onInputKeyboardShortcutCancelEquityOrder()> <ul class=scroll-container vs-repeat vs-autoresize vs-auto-element-resize ng-class=$ctrl.orderProcessor.getOrderStatusClass()> <equity-order-status-row ng-repeat="equityOrder in $ctrl.orderStatusService.currentEquityOrderStatusList track by equityOrder.key" ng-class="[{\'background-color-select\': equityOrder.key === $ctrl.selectedRow}, equityOrder.side.classname]" ng-click=$ctrl.onClickSymbolEquity(equityOrder) name=equity-order-status-row-{{$index+1}} data=equityOrder> </equity-order-status-row> </ul> </div> </div> </div> <div ng-if=$ctrl.orderProcessor.isCurrentAccountIsDerivative()> <ul class="header text-data-topic bg-header"> <li class=col-2> <span class=checkAllOrder> <input type=checkbox value=None id=checkAllDerivOrderBtn name=check ng-checked=$ctrl.isCheckedAllDerivatives() ng-click=$ctrl.toggleCancelAllDerivatives() /> <label for=checkAllDerivOrderBtn><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-11 order-no" ng-click=$ctrl.sortDerivativesOrderByOrderNo()> Order No.<i class=fa ng-class=$ctrl.getSortIconByOrderNo()></i> </li> <li class="col-6 date" ng-click=$ctrl.sortDerivativesOrderByOrderDate()> Date<i class=fa ng-class=$ctrl.getSortIconByDate()></i> </li> <li class="col-8 time" ng-click=$ctrl.sortDerivativesOrderByOrderTime()> Time<i class=fa ng-class=$ctrl.getSortIconByDerivativesOrderTime()></i> </li> <li class="col-4 pos" ng-click=$ctrl.sortDerivativesOrderByPosition()> Pos<i class=fa ng-class=$ctrl.getSortIconByOrderPosition()></i> </li> <li class="col-23 symbol" ng-click=$ctrl.sortDerivativesOrderBySymbol()> Symbol<i class=fa ng-class=$ctrl.getSortIconByDerivativesSymbol()></i> </li> <li class="col-6 side" ng-click=$ctrl.sortDerivativesOrderBySide()> Side<i class=fa ng-class=$ctrl.getSortIconBySide()></i> </li> <li class="col-10 price" ng-click=$ctrl.sortDerivativesOrderByPrice()> Price<i class=fa ng-class=$ctrl.getSortIconByPrice()></i> </li> <li class="col-9 volume" ng-click=$ctrl.sortDerivativesOrderByVolume()> Volume<i class=fa ng-class=$ctrl.getSortIconClassByVolume()></i> </li> <li class="col-9 matched-volume" ng-click=$ctrl.sortDerivativesOrderByMatchedVolume()> Matched<i class=fa ng-class=$ctrl.getSortIconClassByMatchedVolume()></i> </li> <li class="col-9 balance-volume" ng-click=$ctrl.sortDerivativesOrderByBalanceVolume()> Balance<i class=fa ng-class=$ctrl.getSortIconClassByBalanceVolumeDerivatives()></i> </li> <li class="col-9 cancelled-volume" ng-click=$ctrl.sortDerivativesOrderByCancelledVolume()> Cancelled<i class=fa ng-class=$ctrl.getSortIconClassByCancelledVolume()></i> </li> <li class="col-9 valid" ng-click=$ctrl.sortDerivativesOrderByValidity()> Valid<i class=fa ng-class=$ctrl.getSortIconByOrderByValidity()></i> </li> <li class="col-5 stop" ng-click=$ctrl.sortDerivativesOrderByStop()> Stop<i class=fa ng-class=$ctrl.getSortIconByOrderByStop()></i> </li> <li class="col-15 status" ng-click=$ctrl.sortDerivativesOrderByStatus()> Status<i class=fa ng-class=$ctrl.getSortIconClass()></i> </li> <li class=col-8></li> <li class=col-7></li> <li class=col-8></li> </ul> <div up-down-select-table data=$ctrl.orderStatusService.currentDerivOrderStatusList property-key-name=key selected-key=$ctrl.selectedRow on-select=$ctrl.onDerivativesSelectedRowChangeByPressUpDown(newIndex)> <div keyboard-shortcut-order-status on-input-keyboard-shortcut-change-order=$ctrl.onInputKeyboardShortcutChangeDerivativesOrder() on-input-keyboard-shortcut-cancel-order=$ctrl.onInputKeyboardShortcutCancelDerivativesOrder()> <ul class=scroll-container vs-repeat vs-autoresize vs-auto-element-resize ng-class=$ctrl.orderProcessor.getOrderStatusClass()> <normal-derivatives-order-status-row ng-repeat="derivOrder in $ctrl.orderStatusService.currentDerivOrderStatusList track by derivOrder.key" ng-class="[{\'background-color-select\': derivOrder.key === $ctrl.selectedRow}, derivOrder.side.classname]" ng-click=$ctrl.onClickSymbolDerivatives(derivOrder) name=deriv-order-status-row-{{$index+1}} data=derivOrder> </normal-derivatives-order-status-row> </ul> </div> </div> </div> <div ng-if=$ctrl.orderProcessor.isCurrentAccountIsAllDerivative()> <ul class="header text-data-topic bg-header"> <li class=col-2> <span class=checkAllOrder> <input type=checkbox value=None id=checkAllDerivAllOrderBtn name=check ng-checked=$ctrl.isCheckedAllDerivatives() ng-click=$ctrl.toggleCancelAllDerivatives() /> <label for=checkAllDerivAllOrderBtn><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-7 enter-id" ng-click=$ctrl.sortDerivativesOrderByEnterID()> EnterID<i class=fa ng-class=$ctrl.getSortIconByEnterID()></i> </li> <li class="col-10 account-no" ng-click=$ctrl.sortDerivativesOrderByAccountNo()> A/C No.<i class=fa ng-class=$ctrl.getSortIconByAccountNo()></i> </li> <li class="col-11 order-no" ng-click=$ctrl.sortDerivativesOrderByOrderNo()> Order No.<i class=fa ng-class=$ctrl.getSortIconByOrderNo()></i> </li> <li class="col-8 time" ng-click=$ctrl.sortDerivativesOrderByOrderTime()> Time<i class=fa ng-class=$ctrl.getSortIconByDerivativesOrderTime()></i> </li> <li class="col-4 pos" ng-click=$ctrl.sortDerivativesOrderByPosition()> Pos<i class=fa ng-class=$ctrl.getSortIconByOrderPosition()></i> </li> <li class="col-21 symbol" ng-click=$ctrl.sortDerivativesOrderBySymbol()> Symbol<i class=fa ng-class=$ctrl.getSortIconByDerivativesSymbol()></i> </li> <li class="col-4 side" ng-click=$ctrl.sortDerivativesOrderBySide()> Side<i class=fa ng-class=$ctrl.getSortIconBySide()></i> </li> <li class="col-10 price" ng-click=$ctrl.sortDerivativesOrderByPrice()> Price<i class=fa ng-class=$ctrl.getSortIconByPrice()></i> </li> <li class="col-9 volume" ng-click=$ctrl.sortDerivativesOrderByVolume()> Volume<i class=fa ng-class=$ctrl.getSortIconClassByVolume()></i> </li> <li class="col-9 matched-volume" ng-click=$ctrl.sortDerivativesOrderByMatchedVolume()> Matched<i class=fa ng-class=$ctrl.getSortIconClassByMatchedVolume()></i> </li> <li class="col-9 balance-volume" ng-click=$ctrl.sortDerivativesOrderByBalanceVolume()> Balance<i class=fa ng-class=$ctrl.getSortIconClassByBalanceVolumeDerivatives()></i> </li> <li class="col-9 cancelled-volume" ng-click=$ctrl.sortDerivativesOrderByCancelledVolume()> Cancelled<i class=fa ng-class=$ctrl.getSortIconClassByCancelledVolume()></i> </li> <li class="col-9 valid" ng-click=$ctrl.sortDerivativesOrderByValidity()> Valid<i class=fa ng-class=$ctrl.getSortIconByOrderByValidity()></i> </li> <li class="col-15 status" ng-click=$ctrl.sortDerivativesOrderByStatus()> Status<i class=fa ng-class=$ctrl.getSortIconClass()></i> </li> <li class=col-8></li> <li class=col-6></li> <li class=col-7></li> </ul> <div up-down-select-table data=$ctrl.orderStatusService.currentDerivOrderStatusList property-key-name=key selected-key=$ctrl.selectedRow on-select=$ctrl.onDerivativesSelectedRowChangeByPressUpDown(newIndex)> <div keyboard-shortcut-order-status on-input-keyboard-shortcut-change-order=$ctrl.onInputKeyboardShortcutChangeDerivativesOrder() on-input-keyboard-shortcut-cancel-order=$ctrl.onInputKeyboardShortcutCancelDerivativesOrder()> <ul class=scroll-container vs-repeat vs-autoresize vs-auto-element-resize ng-class=$ctrl.orderProcessor.getOrderStatusClass()> <all-derivatives-order-status-row ng-repeat="derivOrder in $ctrl.orderStatusService.currentDerivOrderStatusList track by derivOrder.key" ng-class="[{\'background-color-select\': derivOrder.key === $ctrl.selectedRow}, derivOrder.side.classname]" ng-click=$ctrl.onClickSymbolDerivatives(derivOrder) name=deriv-order-status-row-{{$index+1}} data=derivOrder> </all-derivatives-order-status-row> </ul> </div> </div> </div>'},/*!*************************************************!*\
  !*** ./html/order/equity-order-status-row.html ***!
  \*************************************************/
function(e,t){e.exports='<ul class="table-color-hover no-newline"> <li class=col-3> <span class=checkOrder ng-if=$ctrl.data.canCancel> <input type=checkbox value=None id={{$ctrl.data.key}} name=check-order ng-checked=$ctrl.data.isChecked ng-click=$ctrl.changeChecked() /> <label for={{$ctrl.data.key}}><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-13 order-no"><a ng-click="$ctrl.popupOrderDetail(\'orderNo\', $event)">{{$ctrl.data.orderNo}}</a></li> <li class="col-9 time">{{$ctrl.data.orderTime}}</li> <li class="col-21 left symbol">{{$ctrl.data.symbol}}{{$ctrl.data.nvdrFlag}}</li> <li class="col-6 side" ng-class=$ctrl.data.side.classname>{{$ctrl.data.side.shortname}}</li> <li class="col-11 right price">{{$ctrl.data.price | orderEquityPrice:$ctrl.data.priceType }}</li> <li class="col-12 right volume">{{$ctrl.data.volume | volume}}</li> <li class="col-12 right matched-volume">{{$ctrl.data.matchedVolume | volume}}</li> <li class="col-13 right balance-volume">{{$ctrl.data.balanceVolume | volume}}</li> <li class="col-13 right cancelled-volume">{{$ctrl.data.cancelledVolume | volume}}</li> <li class="col-19 status">{{$ctrl.data.status}}</li> <li class="col-9 change"><a ng-if=$ctrl.data.canChangePriceVol ng-click=$ctrl.showChangeOrder($event)>Change</a></li> <li class="col-7 detail-1"><a ng-click="$ctrl.popupOrderDetail(\'orderDetail\', $event)">Detail</a></li> <li class="col-8 cancel"><a ng-if=$ctrl.data.canCancel ng-click=$ctrl.cancelOrder($event)>Cancel</a></li> </ul> <div class=change-order stt-show=$ctrl.isChangingOrder()> <div class="vol-price row-3 col-45"> <price-input ng-click=$ctrl.onClickChangePriceInput($event) class="col-11 row-3" id=change-equity-order-price price-digit=$ctrl.priceDigit price=$ctrl.newPrice placeholder=Price name=change-order-price analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action={{::$ctrl.getChangePriceAction()}} ng-if=$ctrl.canChangePrice()></price-input> <volume-input ng-click=$ctrl.onClickChangeVolumeInput($event) class="col-12 row-3" id=change-equity-order-volume volume=$ctrl.newVolume name=change-order-volume placeholder=Volume analytics-category={{::$ctrl.getPlaceOrderCategory()}} next-focus-elements=$ctrl.volumeInputNextFocusElements analytics-action={{::$ctrl.getChangeVolumeAction()}}></volume-input> <button class="nr-btn nr-btn-medium ok-button" type=button ng-click=$ctrl.changeOrder($event)> OK </button> <button class="nr-btn nr-btn-medium cancel-button" type=button ng-click=$ctrl.hideChangeOrder($event)> Cancel </button> </div> </div> <div class=change-order-detector ng-init=$ctrl.onShowChangeOrder() ng-if=$ctrl.isChangingOrder()></div>'},/*!*************************************************************!*\
  !*** ./html/order/normal-derivatives-order-status-row.html ***!
  \*************************************************************/
function(e,t){e.exports='<ul class="table-color-hover no-newline"> <li class=col-2> <span class=checkOrder ng-if=$ctrl.data.canCancelled> <input type=checkbox value=None id={{$ctrl.data.key}} name=check-order ng-checked=$ctrl.data.isChecked ng-click=$ctrl.changeChecked() /> <label for={{$ctrl.data.key}}><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-11 order-no"><a ng-click="$ctrl.popupOrderDetail(\'orderNo\', $event)">{{$ctrl.data.orderNo}}</a></li> <li class="col-6 date">{{$ctrl.data.date}}</li> <li class="col-8 time">{{$ctrl.data.time}}</li> <li class="col-3 pos">{{$ctrl.data.position.shortname}}</li> <li class="col-23 left symbol">{{$ctrl.data.symbol}}</li> <li class="col-6 side" ng-class=$ctrl.data.side.classname>{{$ctrl.data.side.derivativeFullname}}</li> <li class="col-10 right price">{{$ctrl.data.price | orderDerivPrice: $ctrl.data.priceDigit:$ctrl.data.priceType}} </li> <li class="col-9 right volume">{{$ctrl.data.volume | volume}}</li> <li class="col-9 right matched-volume">{{$ctrl.data.matchedVolume | volume}}</li> <li class="col-9 right balance-volume">{{$ctrl.data.balanceVolume | volume}}</li> <li class="col-9 right cancelled-volume">{{$ctrl.data.cancelledVolume | volume}}</li> <li class="col-9 valid">{{$ctrl.data.valid.label}}</li> <li class="col-5 stop"><span ng-if=$ctrl.data.isStopOrder>Stop</span></li> <li class="col-15 status">{{$ctrl.data.status}}</li> <li class="col-8 change"><a ng-if=$ctrl.data.canChanged ng-click=$ctrl.showChangeOrder($event)>Change</a></li> <li class="col-7 detail-1"><a ng-click="$ctrl.popupOrderDetail(\'orderDetail\', $event)">Detail</a></li> <li class="col-8 cancel"><a ng-if=$ctrl.data.canCancelled ng-click=$ctrl.cancelOrder($event)>Cancel</a></li> </ul> <div class=change-order stt-show=$ctrl.isChangingOrder()> <div class="vol-price row-3 col-37"> <price-input ng-click=$ctrl.onClickChangePriceInput($event) class="col-9 row-3" id=change-derivatives-order-price price-digit=$ctrl.data.priceDigit price=$ctrl.newPrice placeholder=Price can-negative=true name=change-order-price analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action={{::$ctrl.getChangePriceAction()}} ng-if=$ctrl.canChangePrice()></price-input> <volume-input ng-click=$ctrl.onClickChangeVolumeInput($event) class="col-9 row-3" id=change-derivatives-order-volume volume=$ctrl.newVolume name=change-order-volume placeholder=Volume analytics-category={{::$ctrl.getPlaceOrderCategory()}} next-focus-elements=$ctrl.volumeInputNextFocusElements analytics-action={{::$ctrl.getChangeVolumeAction()}}></volume-input> <button class="nr-btn nr-btn-medium ok-button" type=button ng-click=$ctrl.changeOrder($event)> OK </button> <button class="nr-btn nr-btn-medium cancel-button" type=button ng-click=$ctrl.hideChangeOrder($event)> Cancel </button> </div> </div> <div class=change-order-detector ng-init=$ctrl.onShowChangeOrder() ng-if=$ctrl.isChangingOrder()></div>'},/*!**********************************************************!*\
  !*** ./html/order/all-derivatives-order-status-row.html ***!
  \**********************************************************/
function(e,t){e.exports='<ul class="table-color-hover no-newline"> <li class=col-2> <span class=checkOrder ng-if=$ctrl.data.canCancelled> <input type=checkbox value=None id={{$ctrl.data.key}} name=check-order ng-checked=$ctrl.data.isChecked ng-click=$ctrl.changeChecked() /> <label for={{$ctrl.data.key}}><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-7 enter-id">{{$ctrl.data.enterID}}</li> <li class="col-10 account-no">{{$ctrl.data.accountNo}}</li> <li class="col-11 order-no"><a ng-click="$ctrl.popupOrderDetail(\'orderNo\', $event)">{{$ctrl.data.orderNo}}</a></li> <li class="col-8 time">{{$ctrl.data.time}}</li> <li class="col-4 pos">{{$ctrl.data.position.shortname}}</li> <li class="col-21 left symbol">{{$ctrl.data.symbol}}</li> <li class="col-3 side" ng-class=$ctrl.data.side.classname>{{$ctrl.data.side.derivativeShortname}}</li> <li class="col-10 right price">{{$ctrl.data.price | orderDerivPrice: $ctrl.data.priceDigit:$ctrl.data.priceType}} </li> <li class="col-9 right volume">{{$ctrl.data.volume | volume}}</li> <li class="col-9 right matched-volume">{{$ctrl.data.matchedVolume | volume}}</li> <li class="col-9 right balance-volume">{{$ctrl.data.balanceVolume | volume}}</li> <li class="col-9 right cancelled-volume">{{$ctrl.data.cancelledVolume | volume}}</li> <li class="col-9 valid">{{$ctrl.data.valid.label}}</li> <li class="col-15 status">{{$ctrl.data.status}}</li> <li class="col-8 change"><a ng-if=$ctrl.data.canChanged ng-click=$ctrl.showChangeOrder($event)>Change</a></li> <li class="col-6 detail-1"><a ng-click="$ctrl.popupOrderDetail(\'orderDetail\', $event)">Detail</a></li> <li class="col-7 cancel"><a ng-if=$ctrl.data.canCancelled ng-click=$ctrl.cancelOrder($event)>Cancel</a></li> </ul> <div class=change-order stt-show=$ctrl.isChangingOrder()> <div class="vol-price row-3 col-37"> <price-input ng-click=$ctrl.onClickChangePriceInput($event) class="col-9 row-3" id=change-derivatives-order-price price-digit=$ctrl.data.priceDigit price=$ctrl.newPrice placeholder=Price can-negative=true name=change-order-price analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action={{::$ctrl.getChangePriceAction()}} ng-if=$ctrl.canChangePrice()></price-input> <volume-input ng-click=$ctrl.onClickChangeVolumeInput($event) class="col-9 row-3" id=change-derivatives-order-volume volume=$ctrl.newVolume name=change-order-volume placeholder=Volume analytics-category={{::$ctrl.getPlaceOrderCategory()}} next-focus-elements=$ctrl.volumeInputNextFocusElements analytics-action={{::$ctrl.getChangeVolumeAction()}}></volume-input> <button class="nr-btn nr-btn-medium ok-button" type=button ng-click=$ctrl.changeOrder($event)> OK </button> <button class="nr-btn nr-btn-medium cancel-button" type=button ng-click=$ctrl.hideChangeOrder($event)> Cancel </button> </div> </div> <div class=change-order-detector ng-init=$ctrl.onShowChangeOrder() ng-if=$ctrl.isChangingOrder()></div>'},/*!******************************************!*\
  !*** ./html/order/vip-account-info.html ***!
  \******************************************/
function(e,t){e.exports='<div class=col-29> <index-dropdown class="row-3 col-12 systemType" model=$ctrl.authorizedSystemTypes selected=$ctrl.selectedSystemType key-name=fullName dropdown-name=systemType on-update=$ctrl.onSystemTypeChange(model)></index-dropdown> <input class="row-3 col-15 accountNo" type=text placeholder="Account No." disabled=disabled /> </div>'},/*!************************************!*\
  !*** ./html/alert/order-list.html ***!
  \************************************/
function(e,t){e.exports='<div ng-if=$ctrl.orderStatusService.currentAccount.isEquity() name=equity-order-list> <ul class="row-2 header"> <li class=order-no>Order No.</li> <li class=symbol>Symbol</li> <li class=side>Side</li> <li class=price>Price</li> <li class=volume>Volume</li> <li class=status>Status</li> </ul> <ul class="scroll-container row-17"> <equity-order-list-row class=row-3 ng-repeat="equityOrder in $ctrl.equityOrderData track by equityOrder.key" ng-class="[{highlight: equityOrder.key === $ctrl.selectedRow}, equityOrder.side.classname]" ng-click="$ctrl.selectedRow = equityOrder.key" name=equity-order-list-row-{{$index+1}} data=equityOrder> </equity-order-list-row> </ul> </div> <div ng-if=$ctrl.orderStatusService.currentAccount.isDerivatives() name=derivatives-order-list> <ul class="row-2 header"> <li class="col-14 order-no">Order No.</li> <li class="col-23 symbol">Symbol</li> <li class="col-6 side">Side</li> <li class="col-6 position">Pos</li> <li class="col-14 price">Price</li> <li class="col-13 volume">Volume</li> <li class="col-16 status">Status</li> </ul> <ul class="scroll-container row-17"> <derivatives-order-list-row class=row-3 ng-repeat="derivOrder in $ctrl.derivOrderData track by derivOrder.key" ng-class="[{highlight: derivOrder.key === $ctrl.selectedRow}, derivOrder.side.classname]" ng-click="$ctrl.selectedRow = derivOrder.key" name=deriv-order-list-row-{{$index+1}} data=derivOrder> </derivatives-order-list-row> </ul> </div>'},/*!******************************************************!*\
  !*** ./html/alert/multi-place-order-result-row.html ***!
  \******************************************************/
function(e,t){e.exports='<ul ng-class=$ctrl.getColor()> <li name=side class=col-10>{{$ctrl.order.side.shortname}}</li> <li name=symbol class=col-20>{{$ctrl.showSymbol}}</li> <li name=volume class=col-15>{{$ctrl.order.volume}}</li> <li name=price class=col-17>{{$ctrl.showPrice}}</li> <li name=detail class=col-52 ng-if=!$ctrl.isToolTipEnable><div>{{$ctrl.message}}</div></li> <li name=detail class=col-52 ng-if=$ctrl.isToolTipEnable popover-enable=$ctrl.isToolTipEnable uib-tooltip-template="\'multi-place-order-result-detail\'" tooltip-placement=top tooltip-class=state-price-tooltip> <div>{{$ctrl.message}}</div> </li> </ul> <script type=text/ng-template id=multi-place-order-result-detail> <div ng-repeat="message in $ctrl.splitMessage track by $index">\n        <div>\n            {{message}}\n        </div>\n    </div> </script> '},/*!***************************************************************************!*\
  !*** ./html/alert/multi-place-order-result-with-confirm-warning-row.html ***!
  \***************************************************************************/
function(e,t){e.exports='<ul ng-class=$ctrl.getColor()> <li name=confirm-warn class=col-5> <checkbox name=confirm-warn-checkbox-{{$ctrl.index}} label="" is-check=$ctrl.order.isChecked ng-if=$ctrl.isShowCheckBox()></checkbox> </li> <li name=side class=col-10>{{$ctrl.order.side.shortname}}</li> <li name=symbol class=col-20>{{$ctrl.showSymbol}}</li> <li name=volume class=col-15>{{$ctrl.order.volume}}</li> <li name=price class=col-17>{{$ctrl.showPrice}}</li> <li name=detail class=col-49 ng-if=!$ctrl.isToolTipEnable><div>{{$ctrl.message}}</div></li> <li name=detail class=col-49 ng-if=$ctrl.isToolTipEnable popover-enable=$ctrl.isToolTipEnable uib-tooltip-template="\'multi-place-order-result-detail\'" tooltip-placement=top tooltip-class=state-price-tooltip> <div>{{$ctrl.message}}</div> </li> </ul> <script type=text/ng-template id=multi-place-order-result-detail> <div ng-repeat="message in $ctrl.splitMessage track by $index ">\n            <div>\n                {{message}}\n            </div>\n        </div> </script>'},/*!******************************************************************!*\
  !*** ./html/alert/multi-place-derivatives-order-result-row.html ***!
  \******************************************************************/
function(e,t){e.exports='<ul ng-class=$ctrl.getColor()> <li name=side class=col-10>{{$ctrl.order.side.derivativeFullname}}</li> <li name=position class=col-10>{{$ctrl.order.position.fullname}}</li> <li name=symbol class=col-20>{{$ctrl.order.symbol}}</li> <li name=volume class=col-15>{{$ctrl.order.volume}}</li> <li name=price class=col-17>{{$ctrl.showPrice}}</li> <li name=detail class=col-42 ng-if=!$ctrl.isToolTipEnable><div>{{$ctrl.message}}</div></li> <li name=detail class=col-42 ng-if=$ctrl.isToolTipEnable popover-enable=$ctrl.isToolTipEnable uib-tooltip-template="\'multi-place-order-result-detail\'" tooltip-placement=top tooltip-class=state-price-tooltip> <div>{{$ctrl.message}}</div> </li> </ul> <script type=text/ng-template id=multi-place-order-result-detail> <div ng-repeat="message in $ctrl.splitMessage track by $index ">\n            <div>\n                {{message}}\n            </div>\n        </div> </script>'},/*!***************************************************************************************!*\
  !*** ./html/alert/multi-place-derivatives-order-result-with-confirm-warning-row.html ***!
  \***************************************************************************************/
function(e,t){e.exports='<ul ng-class=$ctrl.getColor()> <li name=confirm-warn class=col-5> <checkbox name=confirm-warn-checkbox-{{$ctrl.index}} label="" is-check=$ctrl.order.isChecked ng-if=$ctrl.isShowCheckBox()></checkbox> </li> <li name=side class=col-10>{{$ctrl.order.side.derivativeFullname}}</li> <li name=position class=col-10>{{$ctrl.order.position.fullname}}</li> <li name=symbol class=col-20>{{$ctrl.order.symbol}}</li> <li name=volume class=col-15>{{$ctrl.order.volume}}</li> <li name=price class=col-17>{{$ctrl.showPrice}}</li> <li name=detail class=col-39 ng-if=!$ctrl.isToolTipEnable><div>{{$ctrl.message}}</div></li> <li name=detail class=col-39 ng-if=$ctrl.isToolTipEnable popover-enable=$ctrl.isToolTipEnable uib-tooltip-template="\'multi-place-order-result-detail\'" tooltip-placement=top tooltip-class=state-price-tooltip> <div>{{$ctrl.message}}</div> </li> </ul> <script type=text/ng-template id=multi-place-order-result-detail> <div ng-repeat="message in $ctrl.splitMessage track by $index ">\n            <div>\n                {{message}}\n            </div>\n        </div> </script>'},/*!***********************************************!*\
  !*** ./html/alert/equity-order-list-row.html ***!
  \***********************************************/
function(e,t){e.exports="<ul class=row-3> <li class=order-no>{{$ctrl.data.orderNo}}</li> <li class=symbol>{{$ctrl.data.symbol}}{{$ctrl.data.nvdrFlag}}</li> <li class=side ng-class=$ctrl.data.side.classname>{{$ctrl.data.side.shortname}}</li> <li class=price>{{$ctrl.data.price | orderEquityPrice:$ctrl.data.priceType }}</li> <li class=volume>{{$ctrl.data.volume | volume}}</li> <li class=status>{{$ctrl.data.status}}</li> </ul> "},/*!****************************************************!*\
  !*** ./html/alert/derivatives-order-list-row.html ***!
  \****************************************************/
function(e,t){e.exports='<ul class=row-3> <li class="col-14 order-no">{{$ctrl.data.orderNo}}</li> <li class="col-26 symbol">{{$ctrl.data.symbol}}</li> <li class="col-6 side" ng-class=$ctrl.data.side.classname>{{$ctrl.data.side.derivativeFullname}}</li> <li class="col-6 position">{{$ctrl.data.position.fullname}}</li> <li class="col-14 price">{{$ctrl.data.price | orderDerivPrice: $ctrl.data.priceDigit:$ctrl.data.priceType}}</li> <li class="col-13 volume">{{$ctrl.data.volume | volume}}</li> <li class="col-13 status">{{$ctrl.data.status}}</li> </ul> '},/*!***************************************!*\
  !*** ./html/portfolio/portfolio.html ***!
  \***************************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active class=row-36> <uib-tab class="row-3 col-15" ng-if=$ctrl.currentAccount.isEquity() heading=Portfolio name=equity-port-tab index=$ctrl.EQUITY_PORTFOLIO_TAB_ID ng-click=$ctrl.onClickTab()> <portfolio-list page={{::$ctrl.page}}></portfolio-list> </uib-tab> <uib-tab class="row-3 col-15" ng-if=$ctrl.currentAccount.isEquity() heading="Deal Summary" name=equity-deal-summary-tab index=$ctrl.EQUITY_DEAL_SUMMARY_TAB_ID ng-click=$ctrl.onClickTab()> <equity-deal-summary-list page={{::$ctrl.page}}></equity-deal-summary-list> </uib-tab> <uib-tab class="row-3 col-16" ng-if=$ctrl.currentAccount.isDerivatives() heading="Portfolio - Cost" name=derivatives-port-cost-tab index=$ctrl.DERIVATIVES_PORTFOLIO_COST_TAB_ID ng-click=$ctrl.onClickTab()> <derivatives-portfolio-list page={{::$ctrl.page}} mode=cost></derivatives-portfolio-list> </uib-tab> <uib-tab class="row-3 col-16" ng-if=$ctrl.currentAccount.isDerivatives() heading="Portfolio - Settle" name=derivatives-port-settle-tab index=$ctrl.DERIVATIVES_PORTFOLIO_SETTLE_TAB_ID ng-click=$ctrl.onClickTab()> <derivatives-portfolio-list page={{::$ctrl.page}} mode=settle></derivatives-portfolio-list> </uib-tab> <uib-tab class="row-3 col-15" ng-if=$ctrl.currentAccount.isDerivatives() heading="Deal Summary" name=derivatives-deal-summary-tab index=$ctrl.DERIVATIVES_DEAL_SUMMARY_TAB_ID ng-click=$ctrl.onClickTab()> <derivatives-deal-summary-list page={{::$ctrl.page}}></derivatives-deal-summary-list> </uib-tab> <div class=buttons-wrapper ng-show=$ctrl.isShowOutstandingPositionAndPositionClosingButton()> <button id=outstanding-position-button class=nr-btn ng-click=$ctrl.onClickOutstandingPosition()>Outstanding Position</button> <button id=position-closing-button class=nr-btn ng-click=$ctrl.onClickPositionClosing()>Position Closing</button> </div> </uib-tabset> <div class=row-22> <portfolio-account-info class="col-40 component-seperator-right" page={{::$ctrl.page}}></portfolio-account-info> <market-value-chart class="col-66 component-seperator-right" page={{::$ctrl.page}}></market-value-chart> <percent-unrealized-pl-chart class=col-54 page={{::$ctrl.page}}></percent-unrealized-pl-chart> </div> '},/*!********************************************!*\
  !*** ./html/portfolio/portfolio-list.html ***!
  \********************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li class=symbol ng-click=$ctrl.sortOrderBySymbol()> Symbol <i class=fa ng-class=$ctrl.getSortIconBySymbol()></i> </li> <li class=start-vol ng-click=$ctrl.sortOrderByStartVolume()> Start Vol <i class=fa ng-class=$ctrl.getSortIconByStartVolume()></i> </li> <li class=avail-vol ng-click=$ctrl.sortOrderByAvailableVolume()> Avail Vol <i class=fa ng-class=$ctrl.getSortIconByAvailableVolume()></i> </li> <li class=actual-vol ng-click=$ctrl.sortOrderByActualVolume()> Actual Vol <i class=fa ng-class=$ctrl.getSortIconByActualVolume()></i> </li> <li class=avg-cost ng-click=$ctrl.sortOrderByAverageCost()> Avg Cost <i class=fa ng-class=$ctrl.getSortIconByAverageCost()></i> </li> <li class=market-price ng-click=$ctrl.sortOrderByMarketPrice()> Mkt Price <i class=fa ng-class=$ctrl.getSortIconByMarketPrice()></i> </li> <li class=amount-cost ng-click=$ctrl.sortOrderByAmount()> Amount (Cost) <i class=fa ng-class=$ctrl.getSortIconByAmount()></i> </li> <li class=market-value ng-click=$ctrl.sortOrderByMarketValue()> Market Value <i class=fa ng-class=$ctrl.getSortIconByMarketValue()></i> </li> <li class=unrealized-pl ng-click=$ctrl.sortOrderByUnrealizedPL()> Unrealized P/L <i class=fa ng-class=$ctrl.getSortIconByUnrealizedPL()></i> </li> <li class=percent-unrealized-pl ng-click=$ctrl.sortOrderByPercentUnrealizedPL()> %Unrealized P/L <i class=fa ng-class=$ctrl.getSortIconByPercentUnrealizedPL()></i> </li> <li class=realized-pl ng-click=$ctrl.sortOrderByRealizedPL()> Realized P/L <i class=fa ng-class=$ctrl.getSortIconByRealizedPL()></i> </li> </ul> <ul up-down-select-table data=$ctrl.equityList property-key-name=name selected-key=$ctrl.keyOfSelectedRow on-select=$ctrl.onSelectedRowChangeByPressUpDown(newIndex)> <ul class="scroll-container row-25" vs-repeat vs-autoresize> <portfolio-row id=portfolio-row-{{$index}} class=table-color-hover ng-repeat="portfolio in $ctrl.equityList track by portfolio.name" ng-click=$ctrl.onSelectRow(portfolio) ng-class="{\'table-color-select\': $ctrl.isSelectedRow(portfolio.name)}" portfolio=portfolio> </portfolio-row> </ul> </ul> <ul class="total bg-header"> <li class=total-label>Total</li> <li class=total-amount-cost>{{$ctrl.equityTotal.amount | price: 2}}</li> <li class=total-market-value>{{$ctrl.equityTotal.marketValue | price: 2}} </li> <li class=total-unrealized-pl ng-class=$ctrl.equityTotal.unrealizedPLColor> {{$ctrl.equityTotal.unrealizedPL | nanableChange: 2}} </li> <li class=total-percent-unrealized-pl ng-class=$ctrl.equityTotal.percentUnrealizedPLColor> {{$ctrl.equityTotal.percentUnrealizedPL | nanablePercentChange: 2}} </li> <li class=total-realized-pl ng-class=$ctrl.equityTotal.realizedPLColor> {{$ctrl.equityTotal.realizedPL | nanableChange: 2}} </li> </ul>'},/*!********************************************************!*\
  !*** ./html/portfolio/derivatives-portfolio-list.html ***!
  \********************************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li class=symbol ng-click=$ctrl.sortOrderBySymbol()> Symbol <i class=fa ng-class=$ctrl.getSortIconBySymbol()></i> </li> <li class=side ng-click=$ctrl.sortOrderBySide()> Side <i class=fa ng-class=$ctrl.getSortIconBySide()></i> </li> <li class=start-vol ng-click=$ctrl.sortOrderByStartVolume()> Start Vol <i class=fa ng-class=$ctrl.getSortIconByStartVolume()></i> </li> <li class=avail-vol ng-click=$ctrl.sortOrderByAvailableVolume()> Avail Vol <i class=fa ng-class=$ctrl.getSortIconByAvailableVolume()></i> </li> <li class=actual-vol ng-click=$ctrl.sortOrderByActualVolume()> Actual Vol <i class=fa ng-class=$ctrl.getSortIconByActualVolume()></i> </li> <li class=avg ng-click=$ctrl.sortOrderByAveragePriceOrCost()> <span ng-if=::$ctrl.isCostMode()>Avg Cost </span> <span ng-if=::$ctrl.isSettleMode()>Avg Price </span> <span><i class=fa ng-class=$ctrl.getSortIconByAveragePriceOrCost()></i></span> </li> <li class=market-price ng-click=$ctrl.sortOrderByMarketPrice()> Mkt Price <i class=fa ng-class=$ctrl.getSortIconByMarketPrice()></i> </li> <li class=amount ng-click=$ctrl.sortOrderByAmountPriceOrCost()> <span ng-if=::$ctrl.isCostMode()>Amount (Cost) </span> <span ng-if=::$ctrl.isSettleMode()>Amount (Price) </span> <span><i class=fa ng-class=$ctrl.getSortIconByAmountPriceOrCost()></i></span> </li> <li class=market-value ng-click=$ctrl.sortOrderByMarketValue()> Market Value <i class=fa ng-class=$ctrl.getSortIconByMarketValue()></i> </li> <li class=options-value ng-click=$ctrl.sortOrderByOptionsValue()> Options Value <i class=fa ng-class=$ctrl.getSortIconByOptionsValue()></i> </li> <li class=unrealized-pl ng-click=$ctrl.sortOrderByUnrealizedPL()> Unrealized P/L <i class=fa ng-class=$ctrl.getSortIconByUnrealizedPL()></i> </li> <li class=percent-unrealized-pl ng-click=$ctrl.sortOrderByPercentUnrealizedPL()> %Unrealized P/L <i class=fa ng-class=$ctrl.getSortIconByPercentUnrealizedPL()></i> </li> <li class=realized-pl ng-click=$ctrl.sortOrderByRealizedPL()> Realized P/L <i class=fa ng-class=$ctrl.getSortIconByRealizedPL()></i> </li> </ul> <ul up-down-select-table data=$ctrl.derivativesList property-key-name=name selected-key=$ctrl.keyOfSelectedRow on-select=$ctrl.onSelectedRowChangeByPressUpDown(newIndex)> <ul class="scroll-container row-25" vs-repeat> <derivatives-portfolio-row id=portfolio-row-{{$index}} class=table-color-hover ng-repeat="portfolio in $ctrl.derivativesList track by $ctrl.getkey(portfolio.name)" ng-click=$ctrl.onSelectRow(portfolio) ng-class="{\'table-color-select\': $ctrl.isSelectedRow(portfolio.name)}" mode={{::$ctrl.mode}} portfolio=portfolio account=$ctrl.getcurrentAccount()> </derivatives-portfolio-row> </ul> </ul> <ul class="total row-4"> <li class=total-label>Total</li> <li class=total-amount> <span ng-if=::$ctrl.isCostMode()> {{$ctrl.derivativesTotal.amountByCost | price: 2}} </span> <span ng-if=::$ctrl.isSettleMode()> {{$ctrl.derivativesTotal.amount | price: 2}} </span> </li> <li class=total-market-value>{{$ctrl.derivativesTotal.marketValue | price: 2}}</li> <li class=total-options-value>{{$ctrl.derivativesTotal.optionsValue | price: 2}}</li> <li class=total-unrealized-pl> <span ng-if=::$ctrl.isCostMode() ng-class=$ctrl.derivativesTotal.unrealizedPLByCostColor> {{$ctrl.derivativesTotal.unrealizedPLByCost | nanableChange: 2}} </span> <span ng-if=::$ctrl.isSettleMode() ng-class=$ctrl.derivativesTotal.unrealizedPLColor> {{$ctrl.derivativesTotal.unrealizedPL | nanableChange: 2}} </span> </li> <li class=total-percent-unrealized-pl> <span ng-if=::$ctrl.isCostMode() ng-class=$ctrl.derivativesTotal.percentUnrealizedPLByCostColor> {{$ctrl.derivativesTotal.percentUnrealizedPLByCost | nanablePercentChange: 2}} </span> <span ng-if=::$ctrl.isSettleMode() ng-class=$ctrl.derivativesTotal.percentUnrealizedPLColor> {{$ctrl.derivativesTotal.percentUnrealizedPL | nanablePercentChange: 2}} </span> </li> <li class=total-realized-pl> <span ng-if=::$ctrl.isCostMode() ng-class=$ctrl.derivativesTotal.realizedPLByCostColor> {{$ctrl.derivativesTotal.realizedPLByCost | nanableChange: 2}} </span> <span ng-if=::$ctrl.isSettleMode() ng-class=$ctrl.derivativesTotal.realizedPLColor> {{$ctrl.derivativesTotal.realizedPL | nanableChange: 2}} </span> </li> </ul>'},/*!*******************************************!*\
  !*** ./html/portfolio/portfolio-row.html ***!
  \*******************************************/
function(e,t){e.exports='<ul class=no-newline> <li class=symbol> <div uib-tooltip={{$ctrl.portfolio.name}} tooltip-placement=right tooltip-append-to-body=true tooltip-enable={{$ctrl.isMustShowToolTip()}}> {{$ctrl.portfolio.name | elipsis: 12}} </div> <ts-level ng-if=$ctrl.portfolio.isTs level=$ctrl.portfolio.tsLevel> </ts-level> <ca ng-if=$ctrl.isMustShowCA() flags=$ctrl.portfolio.caFlags></ca> </li> <li class=start-vol>{{$ctrl.portfolio.startVolume | volume}}</li> <li class="avail-vol text-unchanged-volume">{{$ctrl.portfolio.availVolume | volume}}</li> <li class=actual-vol>{{$ctrl.portfolio.actualVolume | volume}}</li> <li class=avg-cost>{{$ctrl.portfolio.averageCost | price: ($ctrl.isPortfolioSeos() ? 4 : 2)}}</li> <li class=market-price highlight-cell value=$ctrl.portfolio.marketPrice>{{$ctrl.portfolio.marketPrice | nanablePrice: 2}}</li> <li class=amount-cost>{{$ctrl.portfolio.amount | nanablePrice: 2}}</li> <li class=market-value highlight-cell value=$ctrl.portfolio.marketValue>{{$ctrl.portfolio.marketValue | nanablePrice: 2}}</li> <li class=unrealized-pl highlight-cell value=$ctrl.portfolio.unrealizedPL ng-class=$ctrl.portfolio.unrealizedPLColor>{{$ctrl.portfolio.unrealizedPL | nanableChange: 2}}</li> <li class=percent-unrealized-pl highlight-cell value=$ctrl.portfolio.percentUnrealizedPL ng-class=$ctrl.portfolio.percentUnrealizedPLColor>{{$ctrl.portfolio.percentUnrealizedPL | nanablePercentChange: 2}}</li> <li class=realized-pl ng-class=$ctrl.portfolio.realizedPLColor>{{$ctrl.portfolio.realizedPL | nanableChange: 2}}</li> </ul>'},/*!*******************************************************!*\
  !*** ./html/portfolio/derivatives-portfolio-row.html ***!
  \*******************************************************/
function(e,t){e.exports='<ul class=no-newline> <li class=symbol> <div uib-tooltip={{$ctrl.portfolio.symbol}} tooltip-placement=right tooltip-append-to-body=true tooltip-enable={{$ctrl.isMustShowToolTip()}}> <div ng-if=$ctrl.isCurrencySeries() class=link ng-click=$ctrl.openCurrencySeriesPopup()> {{$ctrl.portfolio.symbol | elipsis: 12}} </div> <div ng-if=!$ctrl.isCurrencySeries()> {{$ctrl.portfolio.symbol | elipsis: 12}} </div> </div> <ca ng-if=$ctrl.isMustShowCA() flags=$ctrl.portfolio.caFlags></ca> <ltd ng-if=$ctrl.portfolio.isLTD last-trading-date=$ctrl.portfolio.lastTradingDate></ltd> </li> <li class=side>{{$ctrl.portfolio.side.derivativeFullname}}</li> <li class=start-vol>{{$ctrl.portfolio.startVolume | volume}}</li> <li class="avail-vol text-unchanged-volume">{{$ctrl.portfolio.availVolume | volume}}</li> <li class=actual-vol>{{$ctrl.portfolio.actualVolume | volume}}</li> <li class=avg> <span ng-if=::$ctrl.isCostMode()> {{$ctrl.portfolio.averageCost | currencyPrice: 4:$ctrl.portfolio.currency}} </span> <span ng-if=::$ctrl.isSettleMode()> {{$ctrl.portfolio.averagePrice | currencyPrice: 4:$ctrl.portfolio.currency}} </span> </li> <li class=market-price highlight-cell value=$ctrl.portfolio.marketPrice> {{$ctrl.portfolio.marketPrice | nanableCurrencyPrice: $ctrl.portfolio.settleDigit:$ctrl.portfolio.currency}} </li> <li class=amount> <span ng-if=::$ctrl.isCostMode()> {{$ctrl.portfolio.amountByCost | nanablePrice: 2}} </span> <span ng-if=::$ctrl.isSettleMode()> {{$ctrl.portfolio.amount | nanablePrice: 2}} </span> </li> <li class=market-value highlight-cell value=$ctrl.portfolio.marketValue> {{$ctrl.portfolio.marketValue | nanablePrice: 2}} </li> <li class=options-value highlight-cell value=$ctrl.portfolio.optionsValue> {{$ctrl.portfolio.optionsValue | nanablePrice: 2}} </li> <li class=unrealized-pl ng-if=::$ctrl.isCostMode() highlight-cell value=$ctrl.portfolio.unrealizePLByCost ng-class=$ctrl.portfolio.unrealizedPLByCostColor> {{$ctrl.portfolio.unrealizePLByCost | nanableChange: 2}} </li> <li class=unrealized-pl ng-if=::$ctrl.isSettleMode() highlight-cell value=$ctrl.portfolio.unrealizedPL ng-class=$ctrl.portfolio.unrealizedPLColor> {{$ctrl.portfolio.unrealizedPL | nanableChange: 2}} </li> <li class=percent-unrealized-pl ng-if=::$ctrl.isCostMode() highlight-cell value=$ctrl.portfolio.percentUnrealizePLByCost ng-class=$ctrl.portfolio.percentUnrealizedPLByCostColor> {{$ctrl.portfolio.percentUnrealizePLByCost | nanablePercentChange: 2}} </li> <li class=percent-unrealized-pl ng-if=::$ctrl.isSettleMode() highlight-cell value=$ctrl.portfolio.percentUnrealizedPL ng-class=$ctrl.portfolio.percentUnrealizedPLColor> {{$ctrl.portfolio.percentUnrealizedPL | nanablePercentChange: 2}} </li> <li class=realized-pl ng-if=::$ctrl.isCostMode() ng-class=$ctrl.portfolio.realizedPLByCostColor> {{$ctrl.portfolio.realizePLByCost | nanableChange: 2}} </li> <li class=realized-pl ng-if=::$ctrl.isSettleMode() ng-class=$ctrl.portfolio.realizedPLColor> {{$ctrl.portfolio.realizedPL | nanableChange: 2}} </li> </ul>'},/*!************************************************!*\
  !*** ./html/portfolio/market-value-chart.html ***!
  \************************************************/
function(e,t){e.exports='<div class=no-data ng-if=$ctrl.isShowNoData> No data to display </div> <div class="header text-data-topic sub-bg-header"> Market Value Chart </div> <div class=body> </div>'},/*!*********************************************************!*\
  !*** ./html/portfolio/percent-unrealized-pl-chart.html ***!
  \*********************************************************/
function(e,t){e.exports='<div class=no-data ng-if=$ctrl.isShowNoData> No data to display </div> <div class="header text-data-topic sub-bg-header"> %Unrealized P/L Chart </div> <div class=body> </div>'},/*!****************************************************!*\
  !*** ./html/portfolio/portfolio-account-info.html ***!
  \****************************************************/
function(e,t){e.exports='<div class="header text-data-topic sub-bg-header"> Account Information </div> <div class=body> <div ng-repeat="item in $ctrl.items"> <div name=label-{{$index}} class=text-data-topic>{{item.label}}</div> <div name=value-{{$index}} id="" class={{item.color}}> {{item.value}}</div> </div> </div>'},/*!*********************************************************!*\
  !*** ./html/deal-summary/equity-deal-summary-list.html ***!
  \*********************************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li class=symbol>Symbol</li> <li class=side>Side</li> <li class=volume>Volume</li> <li class=price>Price</li> <li class=transaction-amount>Transaction Amount</li> <li class=total-fee>Total Fee</li> <li class=vat>VAT</li> <li class=paid-amount>Paid Amount</li> <li class=received-amount>Received Amount</li> </ul> <ul class="scroll-container row-20 component-seperator-bottom" vs-repeat vs-autoresize> <equity-deal-summary-row class=table-color-hover id=equity-deal-summary-row-{{$index}} ng-click=$ctrl.onSelectRow(item) ng-class="{\'table-color-select\': $ctrl.isSelectedRow(item.key)}" ng-repeat="item in $ctrl.equityList track by item.key" deal-summary-item=item> </equity-deal-summary-row> </ul> <div name=total> <ul class="total-row row-3 component-seperator-bottom"> <li class="row-label text-data-topic">Total</li> <li class=total-of-total-fee>{{$ctrl.equityTotal.totalFee | price: 2}}</li> <li class=total-vat>{{$ctrl.equityTotal.vat | price: 2}}</li> <li class=total-paid-amount>{{$ctrl.equityTotal.buyAmount | price: 2}}</li> <li class=total-received-amount>{{$ctrl.equityTotal.sellAmount | price: 2}}</li> </ul> <ul class="settlement-fee-row row-3"> <li class="row-label text-data-topic">Settlement Fee</li> <li class=settlement-fee>{{$ctrl.equityTotal.settlementFee | price: 2}}</li> </ul> <ul class="net-paid-received-row row-3"> <li class="row-label text-data-topic">Net Paid(-)/Received(+)</li> <li class=net-paid-received ng-class=$ctrl.colorService.changeWithNaNColor($ctrl.equityTotal.net)>{{$ctrl.equityTotal.net | change: 2}}</li> </ul> </div> '},/*!********************************************************!*\
  !*** ./html/deal-summary/equity-deal-summary-row.html ***!
  \********************************************************/
function(e,t){e.exports="<ul class=no-newline> <li class=symbol>{{$ctrl.dealSummaryItem.symbol}}</li> <li class=side>{{$ctrl.dealSummaryItem.side}}</li> <li class=volume>{{$ctrl.dealSummaryItem.volume}}</li> <li class=price>{{$ctrl.dealSummaryItem.price}}</li> <li class=transaction-amount>{{$ctrl.dealSummaryItem.transactionAmount}}</li> <li class=total-fee>{{$ctrl.dealSummaryItem.totalFee}}</li> <li class=vat>{{$ctrl.dealSummaryItem.vat}}</li> <li class=paid-amount>{{$ctrl.dealSummaryItem.buyAmount}}</li> <li class=received-amount>{{$ctrl.dealSummaryItem.sellAmount}}</li> </ul>"},/*!**************************************************************!*\
  !*** ./html/deal-summary/derivatives-deal-summary-list.html ***!
  \**************************************************************/
function(e,t){e.exports='<div class="date-dropdown-row row-5"> <p class="settlement-date-label col-17">Settlement Date</p> <div class="settlement-date-dropdown col-18"> <index-dropdown class=row-3 model=$ctrl.derivativesList selected=$ctrl.selectedDealSummary key-name=listKey dropdown-name=derivatives-deal-summary> </index-dropdown> </div> </div> <ul class="header text-data-topic bg-header"> <li class=symbol>Symbol</li> <li class=side>Side</li> <li class=position>Position</li> <li class=volume>Volume</li> <li class=cost>Cost</li> <li class=fee>Fee (Comm.)</li> <li class=fee-and-vat>Fee & VAT</li> <li class=wh>W/H</li> <li class=amount>Amount (Baht)</li> </ul> <ul class="scroll-container row-20" vs-repeat vs-autoresize> <derivatives-deal-summary-row id=derivatives-deal-summary-row-{{$index}} class=table-color-hover ng-click=$ctrl.onSelectRow(item) ng-class="{\'table-color-select\': $ctrl.isSelectedRow(item.key)}" ng-repeat="item in $ctrl.selectedDealSummary.list track by item.key" deal-summary-item=item current-account=$ctrl.currentAccount> </derivatives-deal-summary-row> </ul> <ul class="total-row row-4"> <li class=row-label>Total</li> <li class=total-fee>{{$ctrl.selectedDealSummary.total.comm}}</li> <li class=total-fee-and-vat>{{$ctrl.selectedDealSummary.total.vat}}</li> <li class=total-wh>{{$ctrl.selectedDealSummary.total.whTax}}</li> <li class=total-amount>{{$ctrl.selectedDealSummary.total.amount}}</li> </ul>'},/*!*************************************************************!*\
  !*** ./html/deal-summary/derivatives-deal-summary-row.html ***!
  \*************************************************************/
function(e,t){e.exports='<ul class=no-newline> <li ng-if=!$ctrl.isCurrencySeries() class=symbol>{{$ctrl.dealSummaryItem.symbol}}</li> <li ng-if=$ctrl.isCurrencySeries() class="symbol link" ng-click=$ctrl.popupCurrencySeriesDetail()> {{$ctrl.dealSummaryItem.symbol}} </li> <li class=side>{{$ctrl.dealSummaryItem.side}}</li> <li class=position>{{$ctrl.dealSummaryItem.position}}</li> <li class=volume>{{$ctrl.dealSummaryItem.volume}}</li> <li class=cost>{{$ctrl.dealSummaryItem.cost}}</li> <li class=fee>{{$ctrl.dealSummaryItem.comm}}</li> <li class=fee-and-vat>{{$ctrl.dealSummaryItem.vat}}</li> <li class=wh>{{$ctrl.dealSummaryItem.whTax}}</li> <li class=amount>{{$ctrl.dealSummaryItem.amount}}</li> <li class=blank-right></li> </ul> '},/*!*******************************!*\
  !*** ./html/quote/quote.html ***!
  \*******************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active class="col-160 row-58"> <uib-tab heading=Intraday class="row-3 intraday col-14" index=$ctrl.INTRADAY_TAB_ID ng-click=$ctrl.onClickTab()> <quote-intraday page={{::$ctrl.page}}></quote-intraday> </uib-tab> <uib-tab heading=Fundamental class="row-3 fundamental col-14" index=$ctrl.FUNDAMENTAL_TAB_ID ng-click=$ctrl.onClickTab()> <quote-fundamental page={{::$ctrl.page}}></quote-fundamental> </uib-tab> </uib-tabset>'},/*!****************************************!*\
  !*** ./html/quote/quote-intraday.html ***!
  \****************************************/
function(e,t){e.exports='<quote-info class=row-21 page={{::$ctrl.page}}></quote-info> <div class=col-160> <div class="col-53 row-33 quote-intraday-chart-block"> <quote-toggle1 class="row-16 component-seperator-bottom" page={{::$ctrl.page}}></quote-toggle1> <quote-toggle2 class=row-17 page={{::$ctrl.page}} is-enable-vol-by-price-percent=false></quote-toggle2> </div> <div class="col-107 row-33 quote-intraday-tabs-block component-seperator-left"> <quote-intraday-tabs class="col-107 component-seperator-color" page={{::$ctrl.page}}></quote-intraday-tabs> </div> </div>'},/*!************************************!*\
  !*** ./html/quote/quote-info.html ***!
  \************************************/
function(e,t){e.exports='<div class="col-53 quote-overview-and-bids-offers component-seperator-bottom"> <div class=row-5 name=quote-overview ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <quote-symbol-input class="col-25 row-4" on-validated-symbol=$ctrl.onSubmitSymbol(instrument) edit-on-click=true placeholder=Symbol init-symbol=$ctrl.symbol.name id=quote-symbol></quote-symbol-input> <div class="quote-last-done col-26" highlight-cell value=$ctrl.overview.lastDone> <div class="price col-10"> {{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}} </div> <div class="change col-16"> {{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div> </div> <bid-offer class=row-16 bid-offer=$ctrl.bidOffer symbol-name=$ctrl.getSymbolName() analytics-category={{$ctrl.getQuoteCategory()}} is-enable-emit-best-bid-offer=true is-three-bids-offers=$ctrl.isThreeBidsOffers></bid-offer> </div> <div class="col-106 row-21 quote-detail component-seperator-left"> <div class="col-106 row-5 company-info"> <div class=name-and-status> <div class=company-name> {{$ctrl.fullCompanyName}} </div> <div class=status> {{$ctrl.overview.status}} <ts-level ng-if="$ctrl.overview.tsLevel.length > 0" level=$ctrl.overview.tsLevel> </ts-level> </div> </div> <div class=stock-info-btn> <button type=button class="nr-btn open-stock-info-btn" ng-click=$ctrl.openStockInfoScreen() ng-show=$ctrl.isShowStockInfoButton()> <i class="fa fa-external-link" aria-hidden=true></i> Stock Info </button> </div> </div> <div class="col-106 row-16 quote-detail-data"> <div uib-carousel active=active no-transition=true no-wrap=true> <div uib-slide ng-repeat="page in $ctrl.dataPages track by $index" index=" $index" class="col-104 row-16"> <div ng-repeat="block in page.blocks track by $index" class="col-26 quote-detail-block" name=quote-detail-block-{{::$index}}> <quote-detail-row row-data=row ng-repeat="row in block.rows track by row.label" class="col-24 row-2 quote-detail-row" name=quote-detail-row-{{::$index}}></quote-detail-row> </div> </div> </div> </div> </div> '},/*!******************************************!*\
  !*** ./html/quote/quote-detail-row.html ***!
  \******************************************/
function(e,t){e.exports='<ul ng-if="::($ctrl.isLabelValueTooltipData() || $ctrl.isLabelValueData())"> <li ng-class="::{\'col-9\': $ctrl.rowData.value.length > 1, \'col-12\': $ctrl.rowData.value.length <= 1, \'decrease-size-label\': $ctrl.isDecreaseSize()}" class="quote-detail-label text-data-topic"> {{::$ctrl.rowData.label}} </li> <li ng-class="::{\'col-15\': $ctrl.rowData.value.length > 1, \'col-12\': $ctrl.rowData.value.length <= 1, \'decrease-size-value\': $ctrl.isDecreaseSize()}" class=quote-detail-value> <span ng-repeat-start="eachValue in $ctrl.rowData.value track by $index" class={{eachValue.color}} name=quote-detail-value-{{::$index}} uib-tooltip={{eachValue.tooltip}} tooltip-placement=bottom-right tooltip-append-to-body=true tooltip-enable={{::$ctrl.isLabelValueTooltipData()}}> <span ng-if=::$ctrl.rowData.isBlink highlight-cell-string value=eachValue.value>{{eachValue.value}}</span> <span ng-if=::!$ctrl.rowData.isBlink>{{eachValue.value | elipsis: 13}}</span> </span> <span ng-repeat-end="eachValue in $ctrl.rowData.value track by $index" ng-if="::($index !== $ctrl.rowData.value.length-1)"> &nbsp;/&nbsp; </span> </li> </ul> <ul ng-if=::$ctrl.isLinkData()> <li class=quote-detail-link><a ng-click=$ctrl.popupLink($ctrl.rowData.value[0].value)>{{$ctrl.rowData.label}}</a></li> </ul> <ul ng-if=::$ctrl.isLinkTooltip()> <li class="col-12 quote-detail-label text-data-topic"> {{::$ctrl.rowData.label}} </li> <li class="col-12 quote-detail-link" style=text-align:right> <a ng-click=$ctrl.popupLink($ctrl.rowData.value[0].value)> <span uib-tooltip={{$ctrl.rowData.value[0].tooltip}} tooltip-placement=bottom-left tooltip-append-to-body=true tooltip-enable=true>{{$ctrl.rowData.value[0].tooltip | elipsis: 13}}</span> </a> </li> </ul>'},/*!****************************************!*\
  !*** ./html/quote/quote-toggle-1.html ***!
  \****************************************/
function(e,t){e.exports='<div> <div class="btn-group mode-switch"> <label class="btn btn-mode-switch toggle-button-1 chart-line-icon" ng-model=$ctrl.active uib-btn-radio={{::$ctrl.FIRST}}> <i class="mdi mdi-chart-line"></i> </label> <label class="btn btn-mode-switch toggle-button-2" ng-model=$ctrl.active uib-btn-radio={{::$ctrl.SECOND}}> <i class="fa fa-tasks" aria-hidden=true></i> </label> </div> <div class=page> <intraday-chart ng-if=$ctrl.isActive($ctrl.FIRST)></intraday-chart> <quote-volume-buy-sell page={{::$ctrl.page}} ng-if=$ctrl.isActive($ctrl.SECOND)></quote-volume-buy-sell> </div> </div> '},/*!****************************************!*\
  !*** ./html/quote/quote-toggle-2.html ***!
  \****************************************/
function(e,t){e.exports='<div> <div class="btn-group mode-switch"> <label class="btn btn-mode-switch toggle-button-1" ng-model=$ctrl.active uib-btn-radio={{::$ctrl.FIRST}}> <i class="fa fa-bar-chart" aria-hidden=true></i> </label> <label class="btn btn-mode-switch toggle-button-2" ng-model=$ctrl.active uib-btn-radio={{::$ctrl.SECOND}}> <i class="fa fa-list-ul" aria-hidden=true></i> </label> </div> <div class=page> <volume-by-price is-show-percent=$ctrl.isEnableVolByPricePercent ng-if=$ctrl.isActive($ctrl.FIRST) page={{::$ctrl.page}}></volume-by-price> <quote-volume-by-price-table ng-if=$ctrl.isActive($ctrl.SECOND)></quote-volume-by-price-table> </div> </div> '},/*!************************************************!*\
  !*** ./html/quote/quote-percent-buy-sell.html ***!
  \************************************************/
function(e,t){e.exports="<div class=\"col-17 label row-4\"> <div class=\"row-2 {{$ctrl.checkSize()}}\">{{$ctrl.data.label}}</div> </div> <div class=\"col-35 row-4\"> <div class=volume> <div class=\"col-11 vol-buy\" highlight-cell value=$ctrl.data.buyVol>{{$ctrl.data.buyVol | volume}}</div> <div class=\"col-10 vol-sell\" highlight-cell value=$ctrl.data.sellVol>{{$ctrl.data.sellVol | volume}}</div> </div> <div class=percent> <div class=percent-buy ng-style=\"{ 'width': 'calc('+ $ctrl.percentBarBuy + ')' }\">Buy {{$ctrl.percentBuyVol}}%</div> <div ng-if=\"$ctrl.percentNoSideVol > 0\" class=percent-no-side ng-style=\"{ 'width': 'calc('+ $ctrl.percentBarNoside + ')' }\">&nbsp;</div> <div class=percent-sell ng-style=\"{ 'width': 'calc('+ $ctrl.percentBarSell + ')' }\"><span>{{$ctrl.percentSellVol}}%</span><span class=sell-label>Sell</span></div> </div> </div>"},/*!***********************************************!*\
  !*** ./html/quote/quote-volume-buy-sell.html ***!
  \***********************************************/
function(e,t){e.exports='<div class="header row-3"> <div class="col-7 vol-buy">Vol Buy</div> <div class=vol-sell>Vol Sell</div> </div> <div ng-repeat="volBuySell in $ctrl.volBuySell track by $index"> <quote-percent-buy-sell data=volBuySell id=vol-buy-sell-{{$index}} name=vol-buy-sell-{{$index}}></quote-percent-buy-sell> </div> '},/*!*********************************************!*\
  !*** ./html/quote/quote-intraday-tabs.html ***!
  \*********************************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active> <uib-tab heading=Ticker class="row-3 col-13 tab-ticker" index=$ctrl.TICKER_TAB_ID select=$ctrl.trackPagePiwik($ctrl.TICKER_TAB_ID)> <quote-instrument-ticker page={{::$ctrl.page}}></quote-instrument-ticker> </uib-tab> <uib-tab heading=Chart class="row-3 col-13 tab-chart" index=$ctrl.CHART_TAB_ID select=$ctrl.trackPagePiwik($ctrl.CHART_TAB_ID) ng-if=false> </uib-tab> <uib-tab heading="By Date" class="row-3 col-13 tab-by-date" index=$ctrl.BY_DATE_TAB_ID select=$ctrl.trackPagePiwik($ctrl.BY_DATE_TAB_ID)> <quote-historical-by-date page={{::$ctrl.page}} ng-if="$ctrl.active === $ctrl.BY_DATE_TAB_ID"></quote-historical-by-date> </uib-tab> <uib-tab heading=Underlying class="row-3 col-13 tab-underlying" index=$ctrl.UNDERLYING_TAB_ID select=$ctrl.trackPagePiwik($ctrl.UNDERLYING_TAB_ID) ng-if=$ctrl.isCurrentSymbolHasValidUnderlyingInstrument> <quote-underlying page={{::$ctrl.page}}></quote-underlying> </uib-tab> <uib-tab heading=Chart class="row-3 col-13 tab-historical-chart" index=$ctrl.HISTORICAL_CHART select=$ctrl.trackPagePiwik($ctrl.HISTORICAL_CHART)> <quote-historical-chart page={{::$ctrl.page}} ng-if="$ctrl.active === $ctrl.HISTORICAL_CHART"></quote-historical-chart> </uib-tab> <uib-tab heading=News class="row-3 col-13 tab-news" index=$ctrl.NEWS_BY_SYMBOL_TAB_ID select=$ctrl.trackPagePiwik($ctrl.NEWS_BY_SYMBOL_TAB_ID)> <news-by-symbol page={{::$ctrl.page}} ng-if="$ctrl.active == $ctrl.NEWS_BY_SYMBOL_TAB_ID"></news-by-symbol> </uib-tab> <uib-tab heading="Margin Rate" class="row-3 col-13 tab-margin-rate" index=$ctrl.MARGIN_RATE select=$ctrl.trackPagePiwik($ctrl.MARGIN_RATE) ng-if=$ctrl.isShouldShowMarginRateTab> <quote-margin-rate page={{::$ctrl.page}} ng-if="$ctrl.active === $ctrl.MARGIN_RATE"></quote-margin-rate> </uib-tab> <uib-tab heading="Odd Lot" class="row-3 col-13 tab-odd-lot" index=$ctrl.ODD_LOT_TAB_ID select=$ctrl.trackPagePiwik($ctrl.ODD_LOT_TAB_ID) ng-if=$ctrl.isCurrentSymbolHasOddlot> <quote-odd-lot page={{::$ctrl.page}} ng-if="$ctrl.active === $ctrl.ODD_LOT_TAB_ID"></quote-odd-lot> </uib-tab> </uib-tabset> '},/*!*****************************************************!*\
  !*** ./html/quote/quote-volume-by-price-table.html ***!
  \*****************************************************/
function(e,t){e.exports='<div> <ul class="header text-data-topic"> <li class=buy-exec>Exec#</li> <li class=buy-vol>Buy vol</li> <li class=price>Price</li> <li class=sell-vol>Sell vol</li> <li class=sell-exec>Exec#</li> <li class=total id=total-quote-vol ng-click=$ctrl.toggleShowNoSide() ng-if=!$ctrl.isShowNoSide>Total</li> <li class=percent-total id=percent-total-quote-vol ng-click=$ctrl.toggleShowNoSide() ng-if=!$ctrl.isShowNoSide>%Total</li> <li class=no-side-vol id=no-side-vol-quote-vol ng-click=$ctrl.toggleShowNoSide() ng-if=$ctrl.isShowNoSide>N-Side vol</li> <li class=no-side-exec id=no-side-exec-quote-vol ng-click=$ctrl.toggleShowNoSide() ng-if=$ctrl.isShowNoSide>Exec#</li> </ul> <ul class=scroll-container vs-repeat vs-autoresize> <quote-volume-by-price-row id=quote-volume-by-price-row-{{$index}} class=table-color-hover ng-repeat="volByPriceData in $ctrl.volumeByPriceTableView.rowData track by volByPriceData.price" vol-by-price-data=volByPriceData last-done=$ctrl.volumeByPriceTableView.lastDone previous-close=$ctrl.volumeByPriceTableView.previousClose price-digit=$ctrl.volumeByPriceTableView.priceDigit is-show-no-side=$ctrl.isShowNoSide> </quote-volume-by-price-row> </ul> </div>'},/*!***************************************************!*\
  !*** ./html/quote/quote-volume-by-price-row.html ***!
  \***************************************************/
function(e,t){e.exports='<ul ng-class="{\'table-color-select\': $ctrl.isHiLightRow}"> <li class=buy-exec>{{$ctrl.volByPriceData.buyExec | volume}}</li> <li class=buy-vol>{{$ctrl.volByPriceData.buyVol | volume}}</li> <li class=price ng-class="$ctrl.colorService.priceColor($ctrl.volByPriceData.price, $ctrl.previousClose, $ctrl.volByPriceData.totalVol)">{{$ctrl.volByPriceData.price | price: $ctrl.priceDigit}}</li> <li class=sell-vol>{{$ctrl.volByPriceData.sellVol | volume}}</li> <li class=sell-exec>{{$ctrl.volByPriceData.sellExec | volume}}</li> <li class=total ng-if=!$ctrl.isShowNoSide>{{$ctrl.volByPriceData.totalVol | volume}}</li> <li class=percent-total ng-if=!$ctrl.isShowNoSide>{{$ctrl.volByPriceData.percentTotalVol | number:2 }}</li> <li class=no-side-vol ng-if=$ctrl.isShowNoSide>{{$ctrl.volByPriceData.noSideVol | volume }}</li> <li class=no-side-exec ng-if=$ctrl.isShowNoSide>{{$ctrl.volByPriceData.noSideExec | volume }}</li> </ul>'},/*!*************************************************!*\
  !*** ./html/quote/quote-instrument-ticker.html ***!
  \*************************************************/
function(e,t){e.exports='<div class=firstColumn> <div class="component-seperator-right ticker-border-right"> </div> <instrument-ticker-row ng-repeat="index in ::[0,1,2,3,4,5,6,7,8,9,10]" class={{$ctrl.highlightRow(index)}} ticker=$ctrl.data[index] id=instrument-ticker-{{::index}}></instrument-ticker-row> </div> <div class=secondColumn> <div class="component-seperator-right ticker-border-right"> </div> <instrument-ticker-row ng-repeat="index in ::[11,12,13,14,15,16,17,18,19,20,21]" class={{$ctrl.highlightRow(index)}} ticker=$ctrl.data[index] id=instrument-ticker-{{::index}}></instrument-ticker-row> </div> <div class=thirdColumn> <instrument-ticker-row ng-repeat="index in ::[22,23,24,25,26,27,28,29,30,31,32]" class={{$ctrl.highlightRow(index)}} ticker=$ctrl.data[index] id=instrument-ticker-{{::index}}></instrument-ticker-row> </div>'},/*!**************************************************!*\
  !*** ./html/quote/quote-historical-by-date.html ***!
  \**************************************************/
function(e,t){e.exports='<div ng-if=$ctrl.isCurrentSymbolEquityOrIndex() name=quote-equity-by-date> <ul class="header text-data-topic bg-header"> <li class=date>Date</li> <li class=open>Open</li> <li class=today-close>Close</li> <li class=change>Change</li> <li class=percent-change>%Chg</li> <li class=volume>Volume</li> <li class=value>Value(K)</li> <li class=high>High</li> <li class=low>Low</li> <li class=market-cap>Market Cap.(MB)</li> <li class=pe>P/E</li> <li class=percent-yield>%YIELD</li> </ul> <ul class="row-26 scroll-container" vs-repeat vs-autoresize vs-options="{latch: true}"> <quote-equity-by-date-row class=table-color-hover name=equity-by-date-row-{{$index+1}} ng-repeat="equityData in $ctrl.equityList track by $index" ng-click=$ctrl.selectRow(equityData.date) ng-class="{\'table-color-select\': $ctrl.isSelectedRow(equityData.date)}" data=equityData> </quote-equity-by-date-row> </ul> </div> <div ng-if=$ctrl.isCurrentSymbolDerivatives() name=quote-derivatives-by-date> <ul class="header text-data-topic bg-header"> <li class=date>Date</li> <li class=open>Open</li> <li class=today-close>Close</li> <li class=settlement-price>Settlement Price</li> <li class=change>Change</li> <li class=percent-change>%Chg</li> <li class=volume>Volume</li> <li class=open-interest>OI</li> <li class=transaction>Transaction (Deals)</li> <li class=high>High</li> <li class=low>Low</li> </ul> <ul class="row-26 scroll-container" vs-repeat vs-autoresize vs-options="{latch: true}"> <quote-derivatives-by-date-row class=table-color-hover name=derivatives-by-date-row-{{$index+1}} ng-repeat="derivData in $ctrl.derivativesList track by $index" ng-click=$ctrl.selectRow(derivData.date) ng-class="{\'table-color-select\': $ctrl.isSelectedRow(derivData.date)}" data=derivData> </quote-derivatives-by-date-row> </ul> </div> '},/*!**************************************************!*\
  !*** ./html/quote/quote-equity-by-date-row.html ***!
  \**************************************************/
function(e,t){e.exports='<ul> <li class=date>{{$ctrl.data.date}}</li> <li class=open>{{$ctrl.data.open | price:2}}</li> <li class=today-close>{{$ctrl.data.todayClose | price:2}}</li> <li class=change ng-class=$ctrl.colorService.changeWithNaNColor($ctrl.data.change)> {{$ctrl.data.change | change:2}} </li> <li class=percent-change ng-class=$ctrl.colorService.changeWithNaNColor($ctrl.data.percentChange)>{{$ctrl.data.percentChange | percentChange:2}}</li> <li class="volume text-unchanged-volume">{{$ctrl.data.totalVolume | volume}}</li> <li class=value>{{$ctrl.data.totalValue | price:2}}</li> <li class=high ng-class="$ctrl.colorService.ceilFloorColor($ctrl.data.high, $ctrl.data.previousClose)">{{$ctrl.data.high | price:2}}</li> <li class=low ng-class="$ctrl.colorService.ceilFloorColor($ctrl.data.low, $ctrl.data.previousClose)">{{$ctrl.data.low | price:2}}</li> <li class=market-cap>{{$ctrl.data.marketCap | price:2}}</li> <li class=pe>{{$ctrl.data.pe | price:2}}</li> <li class=percent-yield>{{$ctrl.data.dividendYield | percent:2}}</li> </ul>'},/*!*******************************************************!*\
  !*** ./html/quote/quote-derivatives-by-date-row.html ***!
  \*******************************************************/
function(e,t){e.exports='<ul> <li class=date>{{$ctrl.data.date}}</li> <li class=open>{{$ctrl.data.open | price:2}}</li> <li class=today-close>{{$ctrl.data.todayClose | price:2}}</li> <li class=settlement-price>{{$ctrl.data.settlementPrice | price:2}}</li> <li class=change ng-class=$ctrl.colorService.changeWithNaNColor($ctrl.data.change)> {{$ctrl.data.change | change:2}} </li> <li class=percent-change ng-class=$ctrl.colorService.changeWithNaNColor($ctrl.data.percentChange)> {{$ctrl.data.percentChange | percentChange:2}} </li> <li class="volume text-unchanged-volume">{{$ctrl.data.totalVolume | volume}}</li> <li class=open-interest>{{$ctrl.data.oi | volume}}</li> <li class=transaction>{{$ctrl.data.transaction | volume}}</li> <li class=high ng-class="$ctrl.colorService.ceilFloorColor($ctrl.data.high, $ctrl.data.previousSettlementPrice)"> {{$ctrl.data.high | price:2}} </li> <li class=low ng-class="$ctrl.colorService.ceilFloorColor($ctrl.data.low, $ctrl.data.previousSettlementPrice)"> {{$ctrl.data.low | price:2}} </li> </ul> '},/*!***************************************!*\
  !*** ./html/quote/quote-odd-lot.html ***!
  \***************************************/
function(e,t){e.exports='<div class="odd-lot-overview col-107 row-8 component-seperator-bottom"> <div class="col-47 odd-lot-info"> <div class="col-41 odd-lot-info-wrapper"> <div class=col-23> <div class=odd-lot-label> Odd Lot: </div> <div class=odd-lot-as-of> Last Update {{ $ctrl.lastUpdateTimeStamp }} </div> </div> <div class="odd-lot-last-done col-17" highlight-cell value=$ctrl.overview.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=price>{{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}}</div> <div class=change> {{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div> </div> <div class="col-4 odd-lot-refresh-wrapper"> <button class="nr-btn row-3" name=refresh type=button ng-click=$ctrl.refresh()><i class="fa fa-refresh"></i></button> </div> </div> <mini-quote-overview class="col-60 component-seperator-left" overview=$ctrl.overview dynamic-label-position=auto></mini-quote-overview> </div> <div class="info col-107 row-20"> <div class="row-21 col-48"> <bid-offer class=row-18 bid-offer=$ctrl.bidOffer symbol-name=$ctrl.getSymbolName() is-enable-emit-best-bid-offer=true></bid-offer> <percent-buy-sell class=row-3 volume-by-price-view=$ctrl.volumeByPriceView></percent-buy-sell> </div> <quote-odd-lot-ticker class="row-21 col-58" tickers=$ctrl.tickers></quote-odd-lot-ticker> </div>'},/*!************************************************!*\
  !*** ./html/quote/quote-odd-lot-overview.html ***!
  \************************************************/
function(e,t){e.exports=""},/*!*************************************************!*\
  !*** ./html/quote/quote-odd-lot-bid-offer.html ***!
  \*************************************************/
function(e,t){e.exports=""},/*!**********************************************!*\
  !*** ./html/quote/quote-odd-lot-ticker.html ***!
  \**********************************************/
function(e,t){e.exports='<ul class="header bg-header"> <li class=date>Time</li> <li class=side>Side</li> <li class=volume>Volume</li> <li class=price>Price</li> </ul> <instrument-ticker-row ticker=$ctrl.tickers[0] id=instrument-ticker-0></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[1] id=instrument-ticker-1></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[2] id=instrument-ticker-2></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[3] id=instrument-ticker-3></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[4] id=instrument-ticker-4></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[5] id=instrument-ticker-5></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[6] id=instrument-ticker-6></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[7] id=instrument-ticker-7></instrument-ticker-row>'},/*!******************************************!*\
  !*** ./html/quote/quote-underlying.html ***!
  \******************************************/
function(e,t){e.exports='<div class="row-8 underlying-overview component-seperator-bottom"> <div class=col-42> <div class="symbol-info col-25" ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class="symbol-name col-25">{{$ctrl.currentUnderlyingSymbol.name}}</div> <div class="symbol-flags text-default"> <span class=symbol-status>{{$ctrl.overview.status}}</span> <ts-level ng-if="$ctrl.overview.tsLevel.length > 0" level=$ctrl.overview.tsLevel> </ts-level> </div> </div> <div class="last-done col-16" highlight-cell value=$ctrl.overview.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=price>{{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}}</div> <div class=change>{{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div> </div> <quote-underlying-overview class=col-63 overview=$ctrl.overview></quote-underlying-overview> </div> <div class=info> <div class="row-21 col-48"> <bid-offer class=row-18 bid-offer=$ctrl.bidOffer symbol-name=$ctrl.getSymbolName() analytics-category={{::$ctrl.getBidOfferCategory()}} is-enable-emit-best-bid-offer=false is-three-bids-offer=$ctrl.isThreeBidsOffers></bid-offer> <percent-buy-sell class=row-3 volume-by-price-view=$ctrl.volumeByPriceView></percent-buy-sell> </div> <quote-underlying-ticker class="row-21 col-58" tickers=$ctrl.tickers></quote-underlying-ticker> </div>'},/*!***************************************************!*\
  !*** ./html/quote/quote-underlying-overview.html ***!
  \***************************************************/
function(e,t){e.exports='<div class="detail-1 col-12 component-seperator-left"> <label class=detail-label>{{$ctrl.overview.label1}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue1>{{$ctrl.overview.topValue1 | pov: 2:$ctrl.overview.isPrice1 }}</div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue1>{{$ctrl.overview.bottomValue1 | pov: 2:$ctrl.overview.isPrice1 }}</div> </div> <div class="detail-2 col-11 component-seperator-left"> <label class=detail-label>{{$ctrl.overview.label2}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.topValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.topValue2 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.bottomValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.bottomValue2 | price: $ctrl.overview.priceDigit }} </div> </div> <div class="detail-3 col-11 component-seperator-left"> <label class=detail-label>{{$ctrl.overview.label3}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue3 ng-class="$ctrl.colorService.ceilFloorColor($ctrl.overview.topValue3, $ctrl.overview.previousClose)"> {{$ctrl.overview.topValue3 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue3 ng-class="$ctrl.colorService.ceilFloorColor($ctrl.overview.bottomValue3, $ctrl.overview.previousClose)"> {{$ctrl.overview.bottomValue3 | price: $ctrl.overview.priceDigit }} </div> </div> <div class="detail-4 col-11 component-seperator-left"> <label class=detail-label>{{$ctrl.overview.label4}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue4 ng-class="$ctrl.colorService.priceColor($ctrl.overview.topValue4, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.topValue4 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue>{{$ctrl.overview.bottomValue4 | emptyPrice: $ctrl.overview.priceDigit }}</div> </div> <div class="detail-5 col-18 dynamic-column component-seperator-left" ng-if=$ctrl.overview.isStatePricesAvail uib-tooltip-template="\'quote-underlying-overview-state-price\'" tooltip-placement=top tooltip-class=state-price-tooltip> <label class=detail-label>{{$ctrl.overview.dynamicLabel.label}}</label> <div class=topValue highlight-cell value=$ctrl.overview.dynamicLabel.price ng-class="$ctrl.colorService.priceColor($ctrl.overview.dynamicLabel.price, $ctrl.overview.previousClose, $ctrl.overview.dynamicLabel.comparedVolume)"> {{$ctrl.overview.dynamicLabel.price | price: $ctrl.overview.priceDigit }} </div> <div class="bottomValue yellow" highlight-cell value=$ctrl.overview.dynamicLabel.volume>{{$ctrl.overview.dynamicLabel.volume | volume}}</div> </div> <script type=text/ng-template id=quote-underlying-overview-state-price> <div ng-repeat="pstatus in $ctrl.overview.statePrices track by $index" class="status-row" id="state-price">\n            <div class="col-8">\n                {{pstatus.state}}\n            </div>\n            <div class="col-8 value"\n                ng-if="pstatus.needColor"\n                ng-class="$ctrl.colorService.priceColor(pstatus.price, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)">\n                {{pstatus.price | price: $ctrl.overview.priceDigit}}\n            </div>\n            <div class="col-8 value"\n                ng-if="::!pstatus.needColor">\n                {{pstatus.price | price: $ctrl.overview.priceDigit}}\n            </div>\n        </div> </script> '},/*!*************************************************!*\
  !*** ./html/quote/quote-underlying-ticker.html ***!
  \*************************************************/
function(e,t){e.exports='<ul class="header bg-header"> <li class=date>Time</li> <li class=side>Side</li> <li class=volume>Volume</li> <li class=price>Price</li> </ul> <instrument-ticker-row ticker=$ctrl.tickers[0] id=instrument-ticker-0></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[1] id=instrument-ticker-1></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[2] id=instrument-ticker-2></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[3] id=instrument-ticker-3></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[4] id=instrument-ticker-4></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[5] id=instrument-ticker-5></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[6] id=instrument-ticker-6></instrument-ticker-row> <instrument-ticker-row ticker=$ctrl.tickers[7] id=instrument-ticker-7></instrument-ticker-row>'},/*!*******************************************!*\
  !*** ./html/quote/quote-fundamental.html ***!
  \*******************************************/
function(e,t){e.exports='<div name=quote-fundamental-overview class=row-5> <div class=col-60 name=overview ng-class="$ctrl.colorService.changeColor($ctrl.quoteOverview.change, $ctrl.quoteOverview.previousClose, $ctrl.quoteOverview.totalVolume)"> <quote-symbol-input class=col-25 on-validated-symbol=$ctrl.onSubmitSymbol(instrument) edit-on-click=true placeholder=Symbol init-symbol=$ctrl.currentSymbol.name id=quote-fundamental-symbol> </quote-symbol-input> <div name=last-done class=col-30 highlight-cell value=$ctrl.quoteOverview.lastDone> <div class="price col-10"> {{$ctrl.quoteOverview.lastDone | price: $ctrl.quoteOverview.priceDigit}} </div> <div class="change col-16"> {{$ctrl.quoteOverview.change | nullableChange: $ctrl.quoteOverview.priceDigit:$ctrl.quoteOverview.previousClose:$ctrl.quoteOverview.lastDone}} {{$ctrl.quoteOverview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.quoteOverview.priceDigit:$ctrl.quoteOverview.previousClose:$ctrl.quoteOverview.lastDone}} </div> </div> </div> <div name=company-info class=col-50> <div class=company-name> {{$ctrl.fullCompanyName}} </div> <div class=status> {{$ctrl.quoteOverview.status}} <ts-level ng-if="$ctrl.tsLevel.length > 0" level=$ctrl.tsLevel> </ts-level> </div> </div> <div name=remark class=col-44> <div class="unit col-31"> Unit: Million Baht </div> <div class="info col-12" uib-tooltip-template="\'quote-fund-tooltip-template.html\'" tooltip-placement=bottom-right tooltip-class=quote-fundamental-tooltip tooltip-append-to-body=true> Remark <i class="mdi mdi-information-outline"></i> </div> <script type=text/ng-template id=quote-fund-tooltip-template.html> <div>\n                 •  This feature displays the financial statements submitted by each listed company. The accounting period of this information varies, depending on the fiscal year-end of individual companies as there are some firms whose fiscal year-end is not December 31 or is not a standard 12-month fiscal year. <br/>\n                Please see more information for a particular company by downloading financial statement.<br/>\n                 •  Information on the financial statements is presented according to the information that the listed companies submit on that period. The investors should study additional information from the companies\' financial statements since some companies may restate the comparing financial statements on the latest financial statements.<br/>\n                 •  For foreign listed company (Secondary Listing), P/E P/BV and Dividend Yield are calculated by applying BOT exchange rates for comparison purpose only.<br/>\n                 •  For foreign listed company (Secondary Listing), financial statement data follows the standards of the home exchange.\n            </div> </script> </div> </div> <div name=quote-fundamental-list class="row-49 scroll-container"> <ul ng-repeat="rowData in $ctrl.quoteFundamental.rowData" name=row-data-{{$index}} row-type={{rowData.type}} ng-click="$ctrl.onSelectRow($index, rowData.type)" ng-class="{\'table-color-select\': $index === $ctrl.selectedRowIndex, \'table-color-hover\': rowData.type === \'data\'}"> <li name=label>{{rowData.label}}</li> <li ng-repeat="value in rowData.value track by $index" name=value-{{$index}}>{{value}}</li> </ul> </div>'},/*!************************************************!*\
  !*** ./html/quote/quote-historical-chart.html ***!
  \************************************************/
function(e,t){e.exports="<div class=chartdiv> <span class=suggest-text ng-if=$ctrl.isShowSuggestText()>Please insert symbol to display chart.</span> </div> "},/*!*******************************************!*\
  !*** ./html/quote/quote-margin-rate.html ***!
  \*******************************************/
function(e,t){e.exports='<div class="header text-data-topic bg-header"> <div class="margin-rate label-column"> Margin Info </div> <div class="broker value-column"> Broker </div> <div class="tsfc value-column"> TSFC </div> </div> <div class=row-container> <div class=initial-margin-row> <div class="margin-info-label label-column"> Initial Margin (IM) </div> <div class="broker-margin-info value-column"> {{$ctrl.view.brokerInitialMargin}} </div> <div class="tsfc-margin-info value-column"> {{$ctrl.view.tsfcInitialMargin}} </div> </div> <div class=grade-row> <div class="grade-label label-column"> Grade </div> <div class="broker-grade value-column"> {{$ctrl.view.brokerGrade}} </div> <div class="tsfc-grade value-column"> {{$ctrl.view.tsfcGrade}} </div> </div> </div>'},/*!*********************************************!*\
  !*** ./html/technical/technical-chart.html ***!
  \*********************************************/
function(e,t){e.exports='<iframe name=frame id=technicalChartIframe class="" style=overflow:hidden;width:100%;height:99%;border:0></iframe>'},/*!*************************************!*\
  !*** ./html/asl-sso/asl-onnet.html ***!
  \*************************************/
function(e,t){e.exports=' <iframe name=frame class="" style=overflow:hidden;height:100๔;width:100%;border:0 height=99% width=100%></iframe>'},/*!*************************************!*\
  !*** ./html/asl-sso/asl-bnews.html ***!
  \*************************************/
function(e,t){e.exports=' <iframe name=frame class="" style=overflow:hidden;height:100๔;width:100%;border:0 height=99% width=100%></iframe>'},/*!**************************************!*\
  !*** ./html/asl-sso/asl-bchart.html ***!
  \**************************************/
function(e,t){e.exports=' <iframe name=frame class="" style=overflow:hidden;height:100๔;width:100%;border:0 height=99% width=100%></iframe>'},/*!*************************************!*\
  !*** ./html/bls-sso/bls-ialgo.html ***!
  \*************************************/
function(e,t){e.exports=' <iframe name=frame class="" style=overflow:hidden;height:100๔;width:100%;border:0 height=99% width=100%></iframe>'},/*!***************************************!*\
  !*** ./html/bls-sso/bls-landing.html ***!
  \***************************************/
function(e,t){e.exports=' <iframe name=frame class="" style=overflow:hidden;height:100๔;width:100%;border:0 height=99% width=100%></iframe>'},/*!*******************************************!*\
  !*** ./html/multi-order/multi-order.html ***!
  \*******************************************/
function(e,t){e.exports="<div class=multi-order-account-info> <investor-multi-order-account-info ng-if=$ctrl.isInvestor></investor-multi-order-account-info> <marketrep-multi-order-account-info ng-if=$ctrl.isMarketRep page={{::$ctrl.page}}></marketrep-multi-order-account-info> </div> <equity-place-multi-order ng-if=$ctrl.isShowEquityMode()></equity-place-multi-order> <derivatives-place-multi-order ng-if=$ctrl.isShowDerivativesMode()></derivatives-place-multi-order>"},/*!******************************************************!*\
  !*** ./html/multi-order/equity-multi-order-row.html ***!
  \******************************************************/
function(e,t){e.exports='<ul name=multi-order-row> <li name=checkbox class=col-4> <checkbox name=equity-multi-order-row-{{$ctrl.index}} label="" is-check=$ctrl.order.isCheck on-click=$ctrl.equityPlaceMultiOrderCtrl.onChangeCheckOrder()></checkbox> </li> <li name=number class=col-4>{{$ctrl.index + 1}}</li> <li name=side class=col-17> <radio-button name=equity-multi-order-side-{{$ctrl.index}} class=col-8 element-id=equity-multi-order-buy-btn-{{$ctrl.index}} value=B label=BUY next-focus-elements=$ctrl.sideNextFocusElements sidename=$ctrl.sidename> </radio-button> <radio-button name=equity-multi-order-side-{{$ctrl.index}} class=col-8 element-id=equity-multi-order-sell-btn-{{$ctrl.index}} value=S label=SELL next-focus-elements=$ctrl.sideNextFocusElements sidename=$ctrl.sidename> </radio-button> </li> <li name=symbol class=col-23> <symbol-input name=multi-order-symbol class="row-3 col-21" symbol=$ctrl.order.symbol placeholder=Symbol on-validated-symbol=$ctrl.onValidatedSymbol(instrument) on-input-symbol-change=$ctrl.onSymbolInputUpdate(inputStr) market-type=E on-blur="" next-focus-elements=$ctrl.symbolNextFocusElements> </symbol-input> </li> <li name=nvdr class=col-7> <checkbox name=multi-order-nvdr-{{$ctrl.index}} label="" is-check=$ctrl.order.isNVDR></checkbox> </li> <li name=volume class=col-17> <volume-input class="col-15 row-3" next-focus-elements=$ctrl.nextFocusVolumeElement volume=$ctrl.order.volume name=multi-order-volume on-input-blur=$ctrl.onBlurVolume() placeholder=Volume> </volume-input> </li> <li name=iceberg-volume class=col-17> <volume-input class="col-15 row-3" next-focus-elements=$ctrl.nextFocusVolumeElement volume=$ctrl.order.icebergVolume name=multi-order-iceberg-volume is-disabled=$ctrl.checkEnableIceberg() placeholder="Iceberg Volume"> </volume-input> </li> <li name=price class=col-17> <price-input class="col-15 row-3" next-focus-elements=$ctrl.nextFocusPriceElements is-disabled=$ctrl.checkPriceTypeNotLimit() price-digit=2 price=$ctrl.order.price on-input-blur=$ctrl.onBlurPrice() placeholder=Price name=multi-order-price> </price-input> </li> <li name=price-type class=col-16> <index-dropdown class=col-14 key-name=fullname dropdown-name=multi-order-price-type model=$ctrl.priceTypeList on-update=$ctrl.onPriceTypeChanged(model) selected=$ctrl.order.priceType> </index-dropdown> </li> <li name=validity class=col-16> <index-dropdown class=col-14 key-name=label dropdown-name=multi-order-validity model=$ctrl.validityList on-update=$ctrl.onValidityChanged(model) ng-disabled=$ctrl.checkPriceTypeNotLimit() selected=$ctrl.order.validity> </index-dropdown> </li> <li name=amount class=col-20>{{ $ctrl.order.amount }}</li> </ul>'},/*!********************************************************!*\
  !*** ./html/multi-order/equity-place-multi-order.html ***!
  \********************************************************/
function(e,t){e.exports='<div name=multi-order-tools> <index-dropdown class=col-21 model=$ctrl.multiOrderStore.getEquityMultiOrderListDropdown() selected=$ctrl.selectedDropdown key-name=name dropdown-name=save-list on-update=$ctrl.onSaveListChange(model)></index-dropdown> <button type=button class="nr-btn nr-btn-extra-medium" ng-click=$ctrl.saveMultiOrder() name=save-multi-order>Save</button> <button type=button class="nr-btn nr-btn-extra-medium" name=upload-multi-order ng-click=$ctrl.uploadMultiOrderForm()>Upload</button> </div> <div name=multi-order-tools> <button type=button class="nr-btn nr-btn-extra-medium" name=add-multi-order ng-disabled=!$ctrl.canAdd ng-click=$ctrl.addOrderRow()>+ Add</button> <button type=button class="nr-btn nr-btn-extra-medium" name=delete-multi-order ng-disabled=!$ctrl.canDeleteOrSubmit ng-click=$ctrl.deleteOrderRows()>- Delete</button> <button type=button class="nr-btn nr-btn-extra-medium" name=clear-multi-order ng-click=$ctrl.clearMultiOrderForm()>Clear</button> <div class="row-3 col-16" name=pin-container> <div ng-if=$ctrl.shouldShowPinInput()> <label class=col-5>PIN:</label> <pin-input class="col-10 row-3" pin=$ctrl.pin next-focus-elements=$ctrl.pinNextFocusElement placeholder=PIN id=multi-order-pin is-show-save-pin=true></pin-input> </div> </div> <button type=button class="nr-btn nr-btn-large" name=submit-multi-order ng-disabled=!$ctrl.canDeleteOrSubmit ng-click=$ctrl.submitOrders()>Submit</button> <refresh-ui-component></refresh-ui-component> </div> <div class=multi-order-list> <ul class="row-2 header text-data-topic bg-header"> <li name=checkbox class=col-4> <checkbox name=equity-multi-order-header label="" is-check=$ctrl.isCheckedAll ng-click=$ctrl.togglecheckAllOrders()></checkbox> </li> <li name=number class=col-4>No</li> <li name=side class=col-17>Side</li> <li name=symbol class=col-23>Symbol</li> <li name=nvdr class=col-7>NVDR</li> <li name=volume class=col-17>Volume</li> <li name=iceberg-volume class=col-17>Iceberg Volume</li> <li name=price class=col-17>Price</li> <li name=price-type class=col-16>Price Type</li> <li name=validity class=col-16>Validity</li> <li name=amount class=col-20>Amount</li> </ul> <div class=scroll-container ng-class=$ctrl.getTableHeight()> <equity-multi-order-row class="row-5 table-color-hover" name=multi-order-row-{{$index}} index=$index order=equityMultiOrder ng-class="[equityMultiOrder.side.shortname, {\'short-auto-complete\': $index > 9 && $index === $ctrl.equityMultiOrders.length - 1}]" ng-repeat="equityMultiOrder in $ctrl.equityMultiOrders track by $index"> </equity-multi-order-row> </div> <ul class="equity-total-data text-data-topic bg-header row-6"> <li name=total-orders class=col-28>Total Orders : {{$ctrl.equityMultiOrders.length}}</li> <li name=total-amount class=col-35>Total Amount : {{$ctrl.totalAmount | price: 2}}</li> </ul> </div>'},/*!*************************************************************!*\
  !*** ./html/multi-order/derivatives-place-multi-order.html ***!
  \*************************************************************/
function(e,t){e.exports='<div name=multi-order-tools> <index-dropdown class=col-21 model=$ctrl.multiOrderStore.getDerivativesMultiOrderListDropdown() selected=$ctrl.selectedDropdown key-name=name dropdown-name=save-list on-update=$ctrl.onSaveListChange(model)></index-dropdown> <button type=button class="nr-btn nr-btn-extra-medium" ng-click=$ctrl.saveMultiOrder() name=save-multi-order>Save</button> <button type=button class="nr-btn nr-btn-extra-medium" name=upload-multi-order ng-click=$ctrl.uploadMultiOrderForm()>Upload</button> </div> <div name=multi-order-tools> <button type=button class="nr-btn nr-btn-extra-medium" name=add-multi-order ng-disabled=!$ctrl.canAdd ng-click=$ctrl.addOrderRow()>+ Add</button> <button type=button class="nr-btn nr-btn-extra-medium" name=delete-multi-order ng-disabled=!$ctrl.canDeleteOrSubmit ng-click=$ctrl.deleteOrderRows()>- Delete</button> <button type=button class="nr-btn nr-btn-extra-medium" name=clear-multi-order ng-click=$ctrl.clearMultiOrderForm()>Clear</button> <div class="row-3 col-16" name=pin-container> <div ng-if=$ctrl.shouldShowPinInput()> <label class=col-5>PIN:</label> <pin-input class="col-10 row-3" pin=$ctrl.pin next-focus-elements=$ctrl.pinNextFocusElement placeholder=PIN id=derivatives-multi-order-pin is-show-save-pin=true></pin-input> </div> </div> <button type=button class="nr-btn nr-btn-large" name=submit-multi-order ng-disabled=!$ctrl.canDeleteOrSubmit ng-click=$ctrl.submitOrders()>Submit</button> <refresh-ui-component></refresh-ui-component> </div> <div class=multi-order-list> <ul class="row-2 header text-data-topic bg-header"> <li name=checkbox class=col-4> <checkbox name=derivatives-multi-order-header label="" is-check=$ctrl.isCheckedAll ng-click=$ctrl.togglecheckAllOrders()></checkbox> </li> <li name=number class=col-4>No</li> <li name=side class=col-20>Side</li> <li name=position class=col-16>Position</li> <li name=symbol class=col-23>Symbol</li> <li name=volume class=col-17>Volume</li> <li name=iceberg-volume class=col-17>Iceberg Volume</li> <li name=price class=col-17>Price</li> <li name=price-type class=col-16>Price Type</li> <li name=validity class=col-16>Validity</li> </ul> <div class=scroll-container ng-class=$ctrl.getTableHeight()> <derivatives-multi-order-row class="row-5 table-color-hover" name=multi-order-row-{{$index}} index=$index order=derivativesMultiOrder ng-class="[derivativesMultiOrder.side.shortname, {\'short-auto-complete\': $index > 10 && $index === $ctrl.derivativesMultiOrders.length - 1}]" ng-repeat="derivativesMultiOrder in $ctrl.derivativesMultiOrders track by $index"> </derivatives-multi-order-row> </div> </div>'},/*!********************************************!*\
  !*** ./html/multi-order/account-info.html ***!
  \********************************************/
function(e,t){e.exports='<div class=col-21> <index-dropdown model=$ctrl.accountList selected=$ctrl.selectedAccount key-name=accountName dropdown-name=multi-order-page-account on-update=$ctrl.onAccountChanged(model)></index-dropdown> </div> <button class="nr-btn nr-btn-extra-large" ng-click=$ctrl.multiOrderCtrl.toggleMultiOrder() name=normal-order-btn>Normal Order</button> <div class="text-customer-data name">{{$ctrl.accountNameForSelectedAccount.engName}}</div> <div class=account-info-1> <label>{{$ctrl.accountInfoForSelectedAccount.label1}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value1 | price: 2}}</span> </div> <div class=account-info-2> <label>{{$ctrl.accountInfoForSelectedAccount.label2}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value2 | price: 2}}</span> </div> <div class=account-info-3> <label>{{$ctrl.accountInfoForSelectedAccount.label3}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value3 | price: 2}}</span> </div> '},/*!******************************************************!*\
  !*** ./html/multi-order/marketrep-account-info.html ***!
  \******************************************************/
function(e,t){e.exports='<div class=col-29> <index-dropdown class="row-3 col-12 systemType" model=$ctrl.authorizedSystemTypes selected=$ctrl.selectedSystemType key-name=fullName dropdown-name=multi-order-system-type on-update=$ctrl.onSystemTypeChange(model)></index-dropdown> <account-no-input class="row-3 col-15 accountNo" account-no=$ctrl.selectedAccount.accountNo on-update=$ctrl.onAccountNoChange(newAccountNo)></account-no-input> </div> <div class=col-20> <button class="nr-btn nr-btn-extra-large" name=normal-order-btn ng-click=$ctrl.multiOrderCtrl.toggleMultiOrder()>Normal Order</button> </div> <div class="text-customer-data name">{{$ctrl.accountNameForSelectedAccount.engName}}</div> <div class=account-info-1> <label>{{$ctrl.accountInfoForSelectedAccount.label1}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value1 | price: 2}}</span> </div> <div class=account-info-2> <label>{{$ctrl.accountInfoForSelectedAccount.label2}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value2 | price: 2}}</span> </div> <div class=account-info-3> <label>{{$ctrl.accountInfoForSelectedAccount.label3}}</label> <span class=text-customer-data>{{$ctrl.accountInfoForSelectedAccount.value3 | price: 2}}</span> </div> '},/*!***********************************************************!*\
  !*** ./html/multi-order/derivatives-multi-order-row.html ***!
  \***********************************************************/
function(e,t){e.exports='<ul name=multi-order-row> <li name=checkbox class=col-4> <checkbox name=derivatives-multi-order-row-{{$ctrl.index}} label="" is-check=$ctrl.order.isCheck on-click=$ctrl.derivativesPlaceMultiOrderCtrl.onChangeCheckOrder()></checkbox> </li> <li name=number class=col-4>{{$ctrl.index + 1}}</li> <li name=side class=col-20> <radio-button name=derivatives-multi-order-side-{{$ctrl.index}} class=col-8 element-id=derivatives-multi-order-buy-btn-{{$ctrl.index}} value=B label=LONG next-focus-elements=$ctrl.sideNextFocusElements sidename=$ctrl.sidename> </radio-button> <radio-button name=derivatives-multi-order-side-{{$ctrl.index}} class=col-8 element-id=derivatives-multi-order-sell-btn-{{$ctrl.index}} value=S label=SHORT next-focus-elements=$ctrl.sideNextFocusElements sidename=$ctrl.sidename> </radio-button> </li> <li name=position class=col-16> <index-dropdown class=col-14 dropdown-name=multi-order-position key-name=name model=$ctrl.positionList selected=$ctrl.order.position on-update=$ctrl.onPositionChanged(model)> </index-dropdown> </li> <li name=symbol class=col-23> <symbol-input name=multi-order-symbol class="row-3 col-21" symbol=$ctrl.order.symbol placeholder=Symbol on-validated-symbol=$ctrl.onValidatedSymbol(instrument) on-input-symbol-change=$ctrl.onSymbolInputUpdate(inputStr) market-type=D on-blur=$ctrl.onBlurSymbolInput(symbol) next-focus-elements=$ctrl.symbolNextFocusElements> </symbol-input> </li> <li name=volume class=col-17> <volume-input class="col-15 row-3" next-focus-elements=$ctrl.nextFocusVolumeElement volume=$ctrl.order.volume name=multi-order-volume placeholder=Volume> </volume-input> </li> <li name=iceberg-volume class=col-17> <volume-input class="col-15 row-3" next-focus-elements=$ctrl.nextFocusVolumeElement volume=$ctrl.order.icebergVolume name=multi-order-iceberg-volume is-disabled=$ctrl.checkEnableIceberg() placeholder="Iceberg Volume"> </volume-input> </li> <li name=price class=col-17> <price-input class="col-15 row-3" next-focus-elements=$ctrl.nextFocusPriceElements is-disabled=$ctrl.checkPriceTypeNotLimit() price-digit=$ctrl.getPriceDigit() price=$ctrl.order.price can-negative=true on-input-blur=$ctrl.onBlurPrice() placeholder=Price name=multi-order-price> </price-input> </li> <li name=price-type class=col-16> <index-dropdown class=col-14 key-name=fullname dropdown-name=multi-order-price-type model=$ctrl.priceTypeList on-update=$ctrl.onPriceTypeChanged(model) selected=$ctrl.order.priceType> </index-dropdown> </li> <li name=validity class=col-16> <index-dropdown class=col-14 key-name=label dropdown-name=multi-order-validity model=$ctrl.validityList on-update=$ctrl.onValidityChanged(model) ng-disabled=$ctrl.checkPriceTypeIsATO() selected=$ctrl.order.validity> </index-dropdown> </li> </ul>'},/*!**********************************!*\
  !*** ./html/info/info-page.html ***!
  \**********************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active> <uib-tab heading=News name=news-tab class="row-3 col-15" index=$ctrl.NEWS_TAB_ID ng-click=$ctrl.onClickTab()> <news-page page={{::$ctrl.page}}></news-page> </uib-tab> <uib-tab heading=Research name=research-tab class="row-3 col-15" index=$ctrl.RESEARCH_TAB_ID ng-click=$ctrl.onClickTab()> <research-page page={{::$ctrl.page}}></research-page> </uib-tab> <div class=buttons-wrapper> <refresh-ui-component></refresh-ui-component> <button class="nr-btn more-news-button" ng-if=$ctrl.isShowMoreNewsButton() ng-click=$ctrl.onClickMoreNewsButton()> More News </button> <button class="nr-btn x-calendar-button" ng-click=$ctrl.onClickXCalendarButton()> <i class="fa fa-calendar" aria-hidden=true></i> X-Calendar</button> <button class="nr-btn opp-day-button" ng-click=$ctrl.onClickOppDayButton()> <i class="fa fa-search-plus" aria-hidden=true></i> Opp Day</button> </div> </uib-tabset>'},/*!**************************************!*\
  !*** ./html/info/research-page.html ***!
  \**************************************/
function(e,t){e.exports='<div class="row-4 research-tool"> </div> <div class=row-50> <div class=data-rows> <div class=scroll-container vs-repeat vs-autoresize vs-auto-element-resize> <research-row class="component-seperator-bottom table-color-hover" name=research-row-{{$index}} data=data ng-class="{\'table-color-select\': $ctrl.isActiveRow(data.id)}" ng-repeat="data in $ctrl.researchData" ng-click=$ctrl.changeResearchDisplayPDF(data)> </research-row> </div> </div> <div class=data-link> <div class=data-frame ng-show=!$ctrl.isInit> <iframe name=frame class=research-pdf></iframe> </div> <div class=no-data ng-show=$ctrl.isInit> <span class=text-default>No research to display.</span> </div> </div> </div>'},/*!*************************************!*\
  !*** ./html/info/research-row.html ***!
  \*************************************/
function(e,t){e.exports='<div class=content> <div class="subject text-default">{{$ctrl.data.subject}}</div> <div class="market text-data-topic">Market : {{$ctrl.data.market}}</div> <div class="category text-data-topic">Category : {{$ctrl.data.category}}</div> <div class="last-update text-data-topic">Last Update : {{$ctrl.data.lastUpdate}}</div> </div>'},/*!**********************************!*\
  !*** ./html/info/news-page.html ***!
  \**********************************/
function(e,t){e.exports='<div class="row-4 research-tool"> <index-dropdown class=col-18 key-name=showName dropdown-name=news-source model=$ctrl.newsSourceList selected=$ctrl.newsStore.selectedSource on-update=$ctrl.onNewsSourceChanged(model)> </index-dropdown> <news-symbol-input class=col-19 on-input-symbol-change=$ctrl.onInputSymbolChange(inputStr) edit-on-click=true placeholder="Search by symbol" init-symbol=$ctrl.currentSymbol id=news-symbol></news-symbol-input> <div class=clear> <button type=button class=nr-btn name=clear-symbol ng-click=$ctrl.onDeleteSymbol()> <i class="mdi mdi-close" aria-hidden=true></i> </button> </div> <div class=language-switch-wrapper ng-if=$ctrl.isShowThaiNews()> <ul class="language-switch btn-group row-3"> <li ng-click=$ctrl.onClickLanguageButton($ctrl.NEWS_LANGUAGE_ENGLISH) class="en-language-btn btn" ng-model=$ctrl.selectedLanguage uib-btn-radio=$ctrl.NEWS_LANGUAGE_ENGLISH>EN</li> <li ng-click=$ctrl.onClickLanguageButton($ctrl.NEWS_LANGUAGE_THAI) class="th-language-btn btn" ng-model=$ctrl.selectedLanguage uib-btn-radio=$ctrl.NEWS_LANGUAGE_THAI>TH</li> </ul> </div> </div> <div class=row-50> <div class=data-rows> <div class=scroll-container vs-repeat vs-autoresize vs-auto-element-resize> <news-row class="component-seperator-bottom table-color-hover" name=news-row-{{$index}} data=data ng-class="{\'table-color-select\': $ctrl.isActiveRow(data.id)}" ng-repeat="data in $ctrl.newsContentList track by data.id" ng-click=$ctrl.getNewsDetail(data)> </news-row> </div> </div> <div class="data-link scroll-container"> <div class=news-detail ng-show=!$ctrl.isInit ng-class=$ctrl.getNewsSourceType()> <div class=headline>{{$ctrl.currentNewsDetail.headline}}</div> <div class=story ng-bind-html=$ctrl.newsStory ng-class=$ctrl.getNewsSourceType()></div> <div class=footer> <button type=button class="nr-btn read-more-btn" ng-click=$ctrl.onClickReadMoreButton() ng-show=$ctrl.currentNewsDetail.hasLink> <span><i class="fa fa-external-link" aria-hidden=true></i>Read more</span> </button> </div> </div> <div class=no-data ng-show=$ctrl.isInit> <span class=text-default>No News to display.</span> </div> </div> </div>'},/*!*********************************!*\
  !*** ./html/info/news-row.html ***!
  \*********************************/
function(e,t){e.exports='<div class=content> <div class="title text-default">{{$ctrl.data.title}}</div> <div class="symbol text-data-topic">Symbol : <span>{{$ctrl.data.symbol}}</span></div> <div class="source text-data-topic">Source : {{$ctrl.data.source}}</div> <div class="last-update text-data-topic">Last Update : {{$ctrl.data.date | date:\'dd MMMM yyyy\'}} {{$ctrl.data.time}}</div> <div class=attachment-link ng-click=$ctrl.openAttachment() ng-if=$ctrl.data.hasAttach></div> </div>'},/*!*******************************************************!*\
  !*** ./html/conditional-order/conditional-order.html ***!
  \*******************************************************/
function(e,t){e.exports='<iframe name=frame id=conditionalOrderIframe class="" style=overflow:hidden;height:99%;width:100%;border:0></iframe>'},/*!************************************!*\
  !*** ./html/click/click-page.html ***!
  \************************************/
function(e,t){e.exports='<div class=left-panel> <click-favourite page={{$ctrl.page}} is-full-height-mode=!$ctrl.isMarketRepMode></click-favourite> <order-announcement class="row-18 component-seperator-top" page={{$ctrl.page}} ng-if=$ctrl.isMarketRepMode> </order-announcement> </div> <click page={{$ctrl.page}}></click>'},/*!*******************************!*\
  !*** ./html/click/click.html ***!
  \*******************************/
function(e,t){e.exports='<click-mini-quote-overview overview=$ctrl.overview symbol=$ctrl.currentSymbol on-validated-symbol=$ctrl.onMiniOverviewSubmitSymbol(instrument) current-account=$ctrl.currentAccount account-connection-status=$ctrl.accountConnectionStatus ;></click-mini-quote-overview> <click-table-equity ng-show=$ctrl.isEquity() symbol=$ctrl.currentSymbol order-position-list=$ctrl.orderPositionList data=$ctrl.tableViewDataArray current-account=$ctrl.currentAccount update-order-status-map="$ctrl.updateCancelableOrderEquityMap(order, mode, price)" is-pre-session=$ctrl.isPreSession></click-table-equity> <click-table-derivatives ng-show=$ctrl.isDerivatives() symbol=$ctrl.currentSymbol order-position-list=$ctrl.orderPositionList data=$ctrl.tableViewDataArray current-account=$ctrl.currentAccount instrument-static-data=$ctrl.instrumentStaticData update-order-status-map="$ctrl.updateCancelableOrderDerivativesMap(order, mode, price)" is-pre-session=$ctrl.isPreSession></click-table-derivatives>'},/*!***************************************************!*\
  !*** ./html/click/click-mini-quote-overview.html ***!
  \***************************************************/
function(e,t){e.exports='<div class="overview text-default component-seperator-bottom"> <div class=symbol ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <click-symbol-input class="col-23 row-4" on-validated-symbol=$ctrl.onSubmitSymbol(instrument) edit-on-click=true placeholder=Symbol init-symbol=$ctrl.symbol.name market-type={{$ctrl.getCurrentMarket()}} id=click-symbol></click-symbol-input> <div class="symbol-flags text-default"> <span class=symbol-status>{{$ctrl.overview.status}}</span> <ts-level ng-if="$ctrl.overview.tsLevel.length > 0" level=$ctrl.overview.tsLevel> </ts-level> </div> </div> <div class=last highlight-cell value=$ctrl.overview.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=price>{{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}}</div> <div class=change>{{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div> <div class="detail-1 col-14 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label1}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue1>{{$ctrl.overview.topValue1 | pov: 2:$ctrl.overview.isPrice1 }}</div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue1>{{$ctrl.overview.bottomValue1 | pov: 2:$ctrl.overview.isPrice1 }}</div> </div> <div class="detail-2 col-13 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label2}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.topValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.topValue2 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.bottomValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.bottomValue2 | price: $ctrl.overview.priceDigit }} </div> </div> <div class="detail-4 col-13 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label4}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue4 ng-class="$ctrl.colorService.priceColor($ctrl.overview.topValue4, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.topValue4 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue>{{$ctrl.overview.bottomValue4 | emptyPrice: $ctrl.overview.priceDigit }}</div> </div> <div class="detail-5 col-16 dynamic-column component-seperator-right" uib-tooltip-template="\'click-mini-quote-state-price\'" tooltip-placement=bottom tooltip-class=state-price-tooltip tooltip-enable=$ctrl.isSymbolDefined()> <label class=detail-label>{{$ctrl.overview.dynamicLabel.label}}</label> <div class=topValue highlight-cell value=$ctrl.overview.dynamicLabel.price ng-class="$ctrl.colorService.priceColor($ctrl.overview.dynamicLabel.price, $ctrl.overview.previousClose, $ctrl.overview.dynamicLabel.comparedVolume)"> {{$ctrl.overview.dynamicLabel.price | price: $ctrl.overview.priceDigit }} </div> <div class="bottomValue yellow" highlight-cell value=$ctrl.overview.dynamicLabel.volume> {{$ctrl.overview.dynamicLabel.volume | volume}} </div> </div> <div class=order-push-status ng-if=$ctrl.isAccountConnectionDefined() uib-tooltip={{$ctrl.getPushStatusTootipMsg()}} tooltip-placement=bottom tooltip-append-to-body=true> <div class=push-status-light> <div name=value ng-class=$ctrl.getOrderPushStatusColor()></div> </div> <div class=push-status-text> <div name=value ng-if=$ctrl.isAccountOnPush()> Auto Refresh </div> <div name=value ng-if=$ctrl.isAccountOnNonPush()> Manual Refresh </div> </div> </div> <script type=text/ng-template id=click-mini-quote-state-price> <div ng-repeat="pstatus in $ctrl.overview.statePrices track by $index " id="state-price">\n            <div class="col-8">\n                {{pstatus.state}}\n            </div>\n            <div class="col-8 value"\n                ng-if="pstatus.needColor"\n                ng-class="$ctrl.colorService.priceColor(pstatus.price, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)">\n                {{pstatus.price | price: $ctrl.overview.priceDigit}}\n            </div>\n            <div class="col-8 value"\n                ng-if="::!pstatus.needColor">\n                {{pstatus.price | price: $ctrl.overview.priceDigit}}\n            </div>\n        </div> </script> </div>'},/*!********************************************!*\
  !*** ./html/click/click-table-equity.html ***!
  \********************************************/
function(e,t){e.exports='<div class=left-content> <div class=row-3> <checkbox name=click-nvdr label=NVDR is-check=$ctrl.isNvdr></checkbox> </div> <div class="row-6 volume-fill"> <label class=row-3>Select Volume</label> <div class=row-3> <click-volume-input name=click-volume-0 class=col-15 data=$ctrl.volumeList[0] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 0}" data-drag=true ng-model=$ctrl.volumeList[0] item=$ctrl.volumeList[0] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\',\n                     deepCopy: true}"> </click-volume-input> <click-volume-input name=click-volume-1 class=col-15 data=$ctrl.volumeList[1] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 1}" data-drag=true ng-model=$ctrl.volumeList[1] item=$ctrl.volumeList[1] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\',\n                     deepCopy: true}"> </click-volume-input> <click-volume-input name=click-volume-2 class=col-15 data=$ctrl.volumeList[2] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 2}" data-drag=true ng-model=$ctrl.volumeList[2] item=$ctrl.volumeList[2] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\',\n                     deepCopy: true}"> </click-volume-input> <click-volume-input name=click-volume-3 class=col-15 data=$ctrl.volumeList[3] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 3}" data-drag=true ng-model=$ctrl.volumeList[3] item=$ctrl.volumeList[3] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\',\n                     deepCopy: true}"> </click-volume-input> <click-volume-input name=click-volume-4 class=col-15 data=$ctrl.volumeList[4] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 4}" data-drag=true ng-model=$ctrl.volumeList[4] item=$ctrl.volumeList[4] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\',\n                     deepCopy: true}"> </click-volume-input> </div> </div> <div class="col-18 row-3 pin-fill" ng-if=$ctrl.isShowPin()> <span class="col-15 row-3"> <label class="col-4 row-3">PIN:</label> <pin-input class="col-10 row-3" pin=$ctrl.pin placeholder=PIN id=click-pin is-show-save-pin=true></pin-input> </span> </div> </div> <div class=table-content> <div class=row-header> <div class=buy-order ng-class="{\'focusing\': $ctrl.isPlayAnimationColHeaderBuy}">{{$ctrl.colHeaderBuy}}</div> <div class=buy-volume>Buy Vol</div> <div class=price>Price</div> <div class=sell-volume>Sell Vol</div> <div class=sell-order ng-class="{\'focusing\': $ctrl.isPlayAnimationColHeaderSell}">{{$ctrl.colHeaderSell}}</div> </div> <div class=row-content> <div ng-hide=$ctrl.isPreSession data-drop=true ng-model=$ctrl.dropCancelContainer jqyoui-droppable="{multiple:true, onDrop: \'$ctrl.onDropCancel\', onOver: \'$ctrl.onOverCancel\'}" class=cancel-area name=left> <div name=cancel-icon class="mdi mdi-delete"></div> <div name=cancel-label>Cancel<br>Order</div> </div> <div ng-show=$ctrl.isPreSession data-drop=true ng-model=$ctrl.dropCancelContainer jqyoui-droppable="{multiple:true, onDrop: \'$ctrl.onDropCancel\', onOver: \'$ctrl.onOverCancel\'}" class=cancel-area name=left-bottom> <div name=cancel-icon class="mdi mdi-delete"></div> <div name=cancel-label>Cancel<br>Order</div> </div> <click-table-row id=click-table-row-{{$index}} market=E on-buy="$ctrl.onBuy(price, digit, type)" on-sell="$ctrl.onSell(price, digit, type)" ng-repeat="index in ::[0,1,2,3,4,5,6,7,8,9,10,11,12,13]" on-change-order="$ctrl.changeOrder(oldOrder, newPrice)" on-place-order="$ctrl.changeOrder(oldOrder, newPrice)" update-hint="$ctrl.updateHint(sourceType, actionType, side)" is-pre-session=$ctrl.isPreSession index=$index track by $index></click-table-row> <div data-drop=true ng-model=$ctrl.dropCancelContainer jqyoui-droppable="{multiple:true, onDrop: \'$ctrl.onDropCancel\', onOver: \'$ctrl.onOverCancel\'}" class=cancel-area name=right> <div name=cancel-icon class="mdi mdi-delete"></div> <div name=cancel-label>Cancel<br>Order</div> </div> </div> </div>'},/*!*************************************************!*\
  !*** ./html/click/click-table-derivatives.html ***!
  \*************************************************/
function(e,t){e.exports='<div class=left-content> <div class="row-6 select-position"> <label class=row-3>Select Position</label> <index-dropdown class="col-15 row-3" dropdown-name=click-position key-name=name model=$ctrl.orderPositionList selected=$ctrl.selectedOrderPosition on-update=$ctrl.onPositionChanged(model)> </index-dropdown> </div> <div class="row-6 volume-fill"> <label class=row-3>Select Volume</label> <div class=row-3> <click-volume-input name=click-volume-0 class=col-15 data=$ctrl.volumeList[0] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 0}" data-drag=true ng-model=$ctrl.volumeList[0] item=$ctrl.volumeList[0] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\'}"> </click-volume-input> <click-volume-input name=click-volume-1 class=col-15 data=$ctrl.volumeList[1] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 1}" data-drag=true ng-model=$ctrl.volumeList[1] item=$ctrl.volumeList[1] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\'}"> </click-volume-input> <click-volume-input name=click-volume-2 class=col-15 data=$ctrl.volumeList[2] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 2}" data-drag=true ng-model=$ctrl.volumeList[2] item=$ctrl.volumeList[2] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\'}"> </click-volume-input> <click-volume-input name=click-volume-3 class=col-15 data=$ctrl.volumeList[3] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 3}" data-drag=true ng-model=$ctrl.volumeList[3] item=$ctrl.volumeList[3] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\'}"> </click-volume-input> <click-volume-input name=click-volume-4 class=col-15 data=$ctrl.volumeList[4] on-activate=$ctrl.onActivate(index) on-blur="$ctrl.onChangeVolume(index, volume)" ng-class="{\'active\': $ctrl.selectedVolumeIndex === 4}" data-drag=true ng-model=$ctrl.volumeList[4] item=$ctrl.volumeList[4] data-jqyoui-options="{revert: \'invalid\', containment: \'click\'}" jqyoui-draggable="{isClone: true, animate:false,\n                     placeholder:\'keep\',\n                     onStop:\'$ctrl.onStopDragVolume\',\n                     onStart: \'$ctrl.onStartDragVolume\'}"> </click-volume-input> </div> </div> <div class="col-18 row-3 pin-fill" ng-if=$ctrl.isShowPin()> <span class="col-15 row-3"> <label class="col-4 row-3">PIN:</label> <pin-input class="col-10 row-3" pin=$ctrl.pin placeholder=PIN id=click-pin is-show-save-pin=true></pin-input> </span> </div> </div> <div class=table-content> <div class=row-header> <div class=buy-order ng-class="{\'focusing\': $ctrl.isPlayAnimationColHeaderBuy}">{{$ctrl.colHeaderBuy}}</div> <div class=buy-volume>Long Vol</div> <div class=price>Price</div> <div class=sell-volume>Short Vol</div> <div class=sell-order ng-class="{\'focusing\': $ctrl.isPlayAnimationColHeaderSell}">{{$ctrl.colHeaderSell}}</div> </div> <div class=row-content> <div ng-hide=$ctrl.isPreSession data-drop=true ng-model=$ctrl.dropCancelContainer jqyoui-droppable="{multiple:true, onDrop: \'$ctrl.onDropCancel\', onOver: \'$ctrl.onOverCancel\'}" class=cancel-area name=left> <div name=cancel-icon class="mdi mdi-delete"></div> <div name=cancel-label>Cancel<br>Order</div> </div> <div ng-show=$ctrl.isPreSession data-drop=true ng-model=$ctrl.dropCancelContainer jqyoui-droppable="{multiple:true, onDrop: \'$ctrl.onDropCancel\', onOver: \'$ctrl.onOverCancel\'}" class=cancel-area name=left-bottom> <div name=cancel-icon class="mdi mdi-delete"></div> <div name=cancel-label>Cancel<br>Order</div> </div> <click-table-row id=click-table-row-{{$index}} market=D on-buy="$ctrl.onLong(price, digit, type)" on-sell="$ctrl.onShort(price, digit, type)" ng-repeat="index in ::[0,1,2,3,4,5,6,7,8,9,10,11,12,13]" index=$index on-change-order="$ctrl.changeOrder(oldOrder, newPrice)" update-hint="$ctrl.updateHint(sourceType, actionType, side)" is-pre-session=$ctrl.isPreSession data=$ctrl.data[index] track by $index></click-table-row> <div data-drop=true ng-model=$ctrl.dropCancelContainer jqyoui-droppable="{multiple:true, onDrop: \'$ctrl.onDropCancel\', onOver: \'$ctrl.onOverCancel\'}" class=cancel-area name=right> <div name=cancel-icon class="mdi mdi-delete"></div> <div name=cancel-label>Cancel<br>Order</div> </div> </div> </div>'},/*!*****************************************!*\
  !*** ./html/click/click-table-row.html ***!
  \*****************************************/
function(e,t){e.exports='<div class=row-content> <div class=buy-order name=buy-order-container data-drop=true ng-model=$ctrl.dropBuysContainer jqyoui-droppable="{multiple:true,\n         onDrop: \'$ctrl.onOrderIsDroppedOnContainerBuy\',\n         onOver: \'$ctrl.onContainerBuyIsOver\',\n         onOut: \'$ctrl.onContainerBuyIsOut\'}" ng-dblclick=$ctrl.onDoubleClickBuy($ctrl.data.price) ng-mouseenter=$ctrl.onBuyMouseOver() ng-mouseleave=$ctrl.onBuyMouseOut()> <div name=buy-order-item-container ng-show=$ctrl.isShowBuyOrders()> <div name=mocks-orders-buy class=mock-orders data-drag=true ng-model=$ctrl.data.buyOrderItem item=$ctrl.data.buyOrderItem data-jqyoui-options="{revert: \'invalid\'}" jqyoui-draggable="{isClone: false, animate:false,\n                     placeholder:false,\n                     onStop:\'$ctrl.onBuyOrdersItemStopDragged\',\n                     onStart: \'$ctrl.onBuyOrdersItemStartDragged\'}" ng-mouseenter="$ctrl.onBuyOrdersItemMouseOver($event, $ctrl.data.buyOrderItem)" ng-mouseleave="$ctrl.onBuyOrdersItemMouseOut($event, $ctrl.data.buyOrderItem)" ng-dblclick=$event.stopPropagation()> <div class=total-vol-buy>{{$ctrl.getBuyTotalVolume()}}</div> <div class="undraggable no-of-orders" popover-class=order-list popover-placement={{$ctrl.getPopoverPositionFromRowIndex($ctrl.index)}} popover-is-open=$ctrl.isPopoverBuyOpen popover-enable="$ctrl.data.buyOrders.length > 1" popover-animation=false popover-trigger=none uib-popover-template="\'clickBuyOrderList.html\'" ng-click=$ctrl.togglePopoverBuy()> <div class=no-of-orders-txt>{{$ctrl.getNoOfBuyOrders()}}</div> <div class=no-of-orders-caret-down><i class="fa trend fa-caret-down" ng-if="$ctrl.getNoOfBuyOrders() > 1"></i></div> </div> </div> <script type=text/ng-template id=clickBuyOrderList.html> <div class="each-mock-order" id="buy-order-{{$index}}"\n                        ng-repeat="eachOrder in $ctrl.data.buyOrders track by eachOrder.key"\n                        data-drag="true" \n                        data-jqyoui-options="{revert: \'invalid\'}"\n                        ng-model="$ctrl.data.buyOrders"\n                        item="eachOrder"\n                        jqyoui-draggable="{isClone: true, index: {{$index}},\n                         animate:true,\n                         placeholder:false,\n                         onStart:\'$ctrl.onBuyOrderInPopoverStartDragged\',\n                         onStop:\'$ctrl.onBuyOrderInPopoverStopDragged\'}"\n                         ng-mouseenter="$ctrl.onBuyOrderInPopoverMouseOver($event)" \n                         ng-mouseleave="$ctrl.onBuyOrderInPopoverMouseOut($event)" >\n                        <div class="total-vol-buy">{{eachOrder.balanceVolume | volume}}</div>\n                        <div class="no-of-orders">1</div>\n                    </div> </script> </div> </div> <div class="buy-volume text-unchanged-volume" ng-class="{\'buy-vol-exist\': $ctrl.isBuyVolExist()}" data-drop=true ng-model=$ctrl.dropInvalidContainer jqyoui-droppable="{multiple:true,\n            onOver: \'$ctrl.onBuyVolumeIsOver\',\n            beforeDrop: \'$ctrl.rejectDrop\'}"> <div ng-if=$ctrl.data.isBestBidOffer highlight-cell-with-font-blink-with-is-match value=$ctrl.data.buyVolume ismatch=$ctrl.data.isMatch>{{$ctrl.data.buyVolume | volume}}</div> <div ng-if=!$ctrl.data.isBestBidOffer highlight-cell-with-font-blink value=$ctrl.data.buyVolume>{{$ctrl.data.buyVolume | volume}}</div> </div> <div class=price ng-class="[$ctrl.colorService.changeColorWithoutTotalVolume($ctrl.data.price, $ctrl.data.previousClose),\n            {\'last-price\': $ctrl.data.isLastDone}]" data-drop=true ng-model=$ctrl.dropInvalidContainer jqyoui-droppable="{multiple:true,\n            onOver: \'$ctrl.onPriceIsOver\',\n            beforeDrop: \'$ctrl.rejectDrop\'}">{{$ctrl.data.price | priceWithPriceType: $ctrl.data.priceDigit:$ctrl.data.priceType}}</div> <div class="sell-volume text-unchanged-volume" ng-class="{\'sell-vol-exist\': $ctrl.isSellVolExist()}" data-drop=true ng-model=$ctrl.dropInvalidContainer jqyoui-droppable="{multiple:true,\n            onOver: \'$ctrl.onSellVolumeIsOver\',\n            beforeDrop: \'$ctrl.rejectDrop\'}"> <div ng-if=$ctrl.data.isBestBidOffer highlight-cell-with-font-blink-with-is-match value=$ctrl.data.sellVolume ismatch=$ctrl.data.isMatch> {{$ctrl.data.sellVolume | volume}}</div> <div ng-if=!$ctrl.data.isBestBidOffer highlight-cell-with-font-blink value=$ctrl.data.sellVolume>{{$ctrl.data.sellVolume | volume}}</div> </div> <div class=sell-order name=sell-order-container data-drop=true ng-model=$ctrl.dropSellsContainer jqyoui-droppable="{multiple:true,\n         onDrop: \'$ctrl.onOrderIsDroppedOnContainerSell\',\n         onOver: \'$ctrl.onContainerSellIsOver\',\n         onOut: \'$ctrl.onContainerSellIsOut\'}" ng-dblclick=$ctrl.onDoubleClickSell($ctrl.data.price) ng-mouseenter=$ctrl.onSellMouseOver() ng-mouseleave=$ctrl.onSellMouseOut()> <div name=sell-order-item-container ng-show=$ctrl.isShowSellOrders()> <div name=mocks-orders-sell class=mock-orders data-drag=true ng-model=$ctrl.data.sellOrderItem item=$ctrl.data.sellOrderItem data-jqyoui-options="{revert: \'invalid\'}" jqyoui-draggable="{ isClone: false, animate:false, placeholder:false,\n                     onStop:\'$ctrl.onSellOrdersItemStopDragged\',\n                     onStart: \'$ctrl.onSellOrdersItemStartDragged\'}" ng-mouseenter="$ctrl.onSellOrdersItemMouseOver($event, $ctrl.data.sellOrderItem)" ng-mouseleave="$ctrl.onSellOrdersItemMouseOut($event, $ctrl.data.sellOrderItem)" ng-dblclick=$event.stopPropagation()> <div class=total-vol-sell>{{$ctrl.getSellTotalVolume()}}</div> <div class="undraggable no-of-orders" popover-class=order-list popover-placement={{$ctrl.getPopoverPositionFromRowIndex($ctrl.index)}} popover-is-open=$ctrl.isPopoverSellOpen uib-popover-template="\'clickSellOrderList.html\'" popover-enable="$ctrl.data.sellOrders.length > 1" popover-animation=false popover-trigger=none ng-click=$ctrl.togglePopoverSell()> <div class=no-of-orders-txt>{{$ctrl.getNoOfSellOrders()}}</div> <div class=no-of-orders-caret-down><i class="fa trend fa-caret-down" ng-if="$ctrl.getNoOfSellOrders() > 1"></i></div> </div> </div> <script type=text/ng-template id=clickSellOrderList.html> <div class="each-mock-order" id="sell-order-{{$index}}"\n                        ng-repeat="eachOrder in $ctrl.data.sellOrders track by eachOrder.key"\n                        data-drag="true" \n                        data-jqyoui-options="{revert: \'invalid\'}"\n                        ng-model="$ctrl.data.sellOrders"\n                        item="eachOrder"\n                        jqyoui-draggable="{isClone: true,\n                         index: {{$index}}, animate:true,\n                         placeholder:false,\n                         onStart:\'$ctrl.onSellOrderInPopoverStartDragged\', \n                         onStop:\'$ctrl.onSellOrderInPopoverStopDragged\'}"\n                        ng-mouseenter="$ctrl.onSellOrderInPopoverMouseOver($event)" \n                         ng-mouseleave="$ctrl.onSellOrderInPopoverMouseOut($event)"\n                         >\n                        <div class="total-vol-sell">{{eachOrder.balanceVolume | volume}}</div>\n                        <div class="no-of-orders">1</div>\n                    </div> </script> </div> </div> </div>'},/*!*****************************************!*\
  !*** ./html/click/click-favourite.html ***!
  \*****************************************/
function(e,t){e.exports='<div class="click-favourite-header row-5"> <index-dropdown class="col-18 row-3 favourite-dropdown" model=$ctrl.favouriteDropdownItemList selected=$ctrl.currentFavouriteDropdown key-name=showName dropdown-name=click-favourite on-update=$ctrl.onFavouriteChange(model)></index-dropdown> </div> <ul class="header text-data-topic bg-header"> <li class="symbol col-20">Symbol</li> <li class="last col-10">Last</li> <li class="change col-9">Chg</li> <li class="percent-change col-11">%Chg</li> </ul> <div class=scroll-container ng-class=$ctrl.getClassHeight() vs-repeat vs-autoresize vs-element-name=click-favourite> <click-favourite-row page={{$ctrl.page}} id=click-favourite-{{$index}} class=table-color-hover ng-class="{\'table-color-select\': symbol === $ctrl.selectedRowKey}" ng-repeat="symbol in $ctrl.symbolList track by symbol" ng-click=$ctrl.onClickSymbol(symbol) symbol=symbol> </click-favourite-row> </div> '},/*!*********************************************!*\
  !*** ./html/click/click-favourite-row.html ***!
  \*********************************************/
function(e,t){e.exports='<ul class=no-newline ng-class=$ctrl.view.changeColor> <li class="symbol-container col-20"> <div class=symbol uib-tooltip={{$ctrl.view.name}} tooltip-placement=right tooltip-append-to-body=true tooltip-enable={{$ctrl.isMustShowToolTip()}}> {{$ctrl.view.name | elipsis: 12}} </div> <ts-level ng-if="$ctrl.view.tsLevel.length > 0" level=$ctrl.view.tsLevel></ts-level> <ca ng-if=$ctrl.view.isCA flags=$ctrl.view.caFlags></ca> <ltd ng-if=$ctrl.view.isLTD last-trading-date=$ctrl.view.lastTradingDate></ltd> </li> <li class="last col-10" highlight-cell value=$ctrl.view.last.numberValue> {{$ctrl.view.last.formattedValue}} </li> <li class="change col-9" highlight-cell value=$ctrl.view.change.numberValue> {{$ctrl.view.change.formattedValue}} </li> <li class="percent-change col-11" highlight-cell value=$ctrl.view.percentChange.numberValue> {{$ctrl.view.percentChange.formattedValue}} </li> </ul>'},/*!********************************************!*\
  !*** ./html/click/order-announcement.html ***!
  \********************************************/
function(e,t){e.exports='<div class="scroll-container row-18" vs-repeat vs-autoresize vs-options="{latch: true}"> <order-announcement-row ng-repeat="orderAnnouncementRowData in $ctrl.orderAnnouncementService.currentList track by $index" data=orderAnnouncementRowData page={{$ctrl.page}}> </order-announcement-row> </div>'},/*!************************************************!*\
  !*** ./html/click/order-announcement-row.html ***!
  \************************************************/
function(e,t){e.exports='<ul class="no-newline col-50" ng-class=$ctrl.data.cssClass> <li class="col-8 time text-default">{{$ctrl.data.time}}</li> <li class="col-41 detail" popover-placement=top popover-animation=false popover-trigger=mouseenter uib-popover-template="\'order-announcement-row-popover-template.html\'" popover-class=mi6-info-popover>{{$ctrl.data.detail}}</li> </ul> <script type=text/ng-template id=order-announcement-row-popover-template.html> <div>{{$ctrl.data.detail}}</div> </script>'},/*!***************************************************!*\
  !*** ./html/notification/notification-inbox.html ***!
  \***************************************************/
function(e,t){e.exports='<div class=inbox-container> <div class="inbox-icon {{ $ctrl.iconClass }}" ng-click=$ctrl.toggleInbox() ng-class="{\'active\': $ctrl.isShow}"></div> <div class=inbox-badge>{{ $ctrl.badge }}</div> <div class="row-49 inbox-list" ng-if=$ctrl.isShow ng-init=$ctrl.initScrollContainerElement()> <div class=inbox-header>{{$ctrl.inboxHeader}}</div> <ul class="row-46 scroll-container"> <notification-message ng-repeat="notification in $ctrl.notifications" data=notification name=inbox-{{$index}} scroll-inbox=$ctrl.scrollInbox(top) toggle-inbox=$ctrl.toggleInbox() id={{notification.id}}> </notification-message> <div class="no-noti row-46" ng-if=$ctrl.isEmptyInbox()> No notification </div> <div ng-if=$ctrl.isShowLoading class=middle> <div> <i class="fa-2 fa fa-spinner fa-spin" aria-hidden=true></i> </div> </div> </ul> </div> </div>'},/*!*****************************************************!*\
  !*** ./html/notification/notification-message.html ***!
  \*****************************************************/
function(e,t){e.exports="<sense-chatbox data=$ctrl.data toggle-inbox=$ctrl.toggleInbox() scroll-inbox=$ctrl.scroll() ng-if=$ctrl.isSenseChatbox()></sense-chatbox> <notification-chatbox data=$ctrl.data toggle-inbox=$ctrl.toggleInbox() scroll-inbox=$ctrl.scroll() ng-if=$ctrl.isChatbox()></notification-chatbox> <notification-chatbox-with-button data=$ctrl.data toggle-inbox=$ctrl.toggleInbox() scroll-inbox=$ctrl.scroll() ng-if=$ctrl.isPriceVol()></notification-chatbox-with-button> <sense-detail data=$ctrl.data toggle-inbox=$ctrl.toggleInbox() scroll-inbox=$ctrl.scroll() ng-if=$ctrl.isSenseDetail()></sense-detail> <sense-recommend data=$ctrl.data toggle-inbox=$ctrl.toggleInbox() scroll-inbox=$ctrl.scroll() ng-if=$ctrl.isSenseRecommend()></sense-recommend> <sense-iaa-consensus data=$ctrl.data toggle-inbox=$ctrl.toggleInbox() scroll-inbox=$ctrl.scroll() ng-if=$ctrl.isIAAConsensus()></sense-iaa-consensus> <notification-line data=$ctrl.data scroll-inbox=$ctrl.scroll() ng-if=$ctrl.isLine()></notification-line>"},/*!*****************************************************!*\
  !*** ./html/notification/notification-chatbox.html ***!
  \*****************************************************/
function(e,t){e.exports='<div class=row-5> <div class="row-4 col-4 chatbox-icon {{ $ctrl.iconClass }}"></div> <div class="col-25 chatbox-header"> <div class="row-2 chatbox-top"> <div class=chatbox-title>{{ $ctrl.title }}</div> <div class="col-7 chatbox-time">{{ $ctrl.time }}</div> </div> <div class="row-2 chatbox-hashtag">{{ $ctrl.data.hashTag }}</div> </div> </div> <div class=chatbox-msg> <div class=main-content> {{ $ctrl.data.alert }} <div ng-transclude></div> </div> <sense-notification-action-controls ng-if=$ctrl.isShowActionControl message-id=$ctrl.data.id message-data=$ctrl.data is-liked=$ctrl.data.isLiked sense-actions=$ctrl.data.senseActions toggle-inbox=$ctrl.toggleInbox()></sense-notification-action-controls> </div>'},/*!*****************************************************************!*\
  !*** ./html/notification/notification-chatbox-with-button.html ***!
  \*****************************************************************/
function(e,t){e.exports='<notification-chatbox data=$ctrl.data scroll-inbox=$ctrl.scrollInbox()> <div class=chatbox-button> <button class="nr-btn nr-btn-small" ng-click=$ctrl.emitSideBuyEvent()>{{ $ctrl.buy }}</button> <button class="nr-btn nr-btn-small" ng-click=$ctrl.emitSideSellEvent()>{{ $ctrl.sell }}</button> </div> </notification-chatbox>'},/*!**************************************************!*\
  !*** ./html/notification/notification-line.html ***!
  \**************************************************/
function(e,t){e.exports='<div class="line-container {{ $ctrl.unreadClass }}"> <hr> <div class=line-msg> <span>{{ $ctrl.data.alert }}</span> </div> <hr> </div> '},/*!****************************************************!*\
  !*** ./html/notification/notification-detail.html ***!
  \****************************************************/
function(e,t){e.exports="<div class=detail> <div class=top-bar></div> <img class=detail-img ng-src={{$ctrl.imagePath}} ng-if=$ctrl.isShowImage() scroll-on-load-image> <div class=detail-msg-block> <div class=main-content> <div ng-transclude class=detail-msg></div> <div class=source-name ng-if=$ctrl.isShowSourceName()> Source: {{$ctrl.detailSource}} </div> </div> <sense-notification-action-controls ng-if=$ctrl.isShowActionControl message-id=$ctrl.data.id message-data=$ctrl.data is-liked=$ctrl.data.isLiked sense-actions=$ctrl.data.senseActions toggle-inbox=$ctrl.toggleInbox()></sense-notification-action-controls> </div> <div class=bottom-bar></div> </div>"},/*!*********************************************!*\
  !*** ./html/notification/sense-detail.html ***!
  \*********************************************/
function(e,t){e.exports="<sense-dislike message-data=$ctrl.data></sense-dislike> <notification-chatbox data=$ctrl.data is-show-action-control=false></notification-chatbox> <notification-detail data=$ctrl.data toggle-inbox=$ctrl.toggleInbox() scroll-inbox=$ctrl.scrollInbox() is-show-action-control=true>{{ $ctrl.data.detail.detail }}</notification-detail>"},/*!*************************************************!*\
  !*** ./html/notification/notification-box.html ***!
  \*************************************************/
function(e,t){e.exports='<div ng-click=$ctrl.onClickBox($event)> <div class="row-2 close" ng-click=$ctrl.onClickCloseBox($event)> <i class="fa fa-times" aria-hidden=true></i> </div> <div class=row-4> <div class="row-4 col-4 box-icon notifications"></div> <div class="col-25 box-header"> <div class="row-2 box-top"> <div class=chatbox-title>{{ $ctrl.title }}</div> <div class="col-7 chatbox-time">{{ $ctrl.time }}</div> </div> <div class="row-2 chatbox-hashtag">{{ $ctrl.data.hashTag }}</div> </div> </div> <div class=box-msg> {{ $ctrl.currentDisplay.alert | elipsis: 120 }} </div> </div>'},/*!*******************************************************************!*\
  !*** ./html/notification/sense-notification-action-controls.html ***!
  \*******************************************************************/
function(e,t){e.exports='<div class=no-newline> <div class=like-button ng-class=::$ctrl.getLikeBtnClass() ng-click=$ctrl.toggleLike() ng-if=$ctrl.isShowLikeButton()> <span class=like-wrapper ng-class=$ctrl.getLikeStatus()> <i class="like-icon mdi mdi-thumb-up"></i> <span class=like-label> Like</span> </span> </div> <div class="action-button button-{{$index}}" ng-repeat="action in $ctrl.senseActions track by $index" ng-click=$ctrl.processAction(action) ng-class=$ctrl.getBtnWidth()> <span class=action-label>{{action.displayText}}</span> </div> </div>'},/*!**********************************************!*\
  !*** ./html/notification/sense-chatbox.html ***!
  \**********************************************/
function(e,t){e.exports="<sense-dislike message-data=$ctrl.data></sense-dislike> <notification-chatbox data=$ctrl.data is-show-action-control=true></notification-chatbox>"},/*!**********************************************!*\
  !*** ./html/notification/sense-dislike.html ***!
  \**********************************************/
function(e,t){e.exports="<button-with-popover action-options=$ctrl.actionOptions ng-if=$ctrl.isShowDislikeButton()></button-with-popover>"},/*!****************************************************************!*\
  !*** ./html/account-info-detail/account-info-detail-page.html ***!
  \****************************************************************/
function(e,t){e.exports="<equity-cash-balance-account-info-detail ng-if=$ctrl.isEquityCashBalanceMode() page={{$ctrl.page}} data=$ctrl.equityCashBalanceAccountInfo last-update-timestamp=$ctrl.lastUpdate> </equity-cash-balance-account-info-detail> <equity-credit-balance-account-info-detail ng-if=$ctrl.isEquityCreditBalanceMode() page={{$ctrl.page}} data=$ctrl.equityCreditBalanceAccountInfo last-update-timestamp=$ctrl.lastUpdate> </equity-credit-balance-account-info-detail> <derivatives-account-info-detail ng-if=$ctrl.isDerivativesMode() page={{$ctrl.page}} data=$ctrl.derivativesAccountInfo last-update-timestamp=$ctrl.lastUpdate> </derivatives-account-info-detail> <div name=empty-page ng-if=$ctrl.isEmptyMode()> Please insert trading account.<br> </div>"},/*!***********************************************************************!*\
  !*** ./html/account-info-detail/derivatives-account-info-detail.html ***!
  \***********************************************************************/
function(e,t){e.exports="<account-info-name page={{$ctrl.page}} data=$ctrl.data last-update-timestamp=$ctrl.lastUpdateTimestamp> </account-info-name> <div> <ul name=data-row-1> <li name=data-col-1>Line Available</li> <li name=data-col-2>{{$ctrl.data.lineAvailable}}</li> <li name=data-col-3>Excess Equity</li> <li name=data-col-4>{{$ctrl.data.excessEquity}}</li> <li name=data-col-5>Equity Balance</li> <li name=data-col-6>{{$ctrl.data.equityBalance}}</li> </ul> <ul name=data-row-2> <li name=data-col-1>Credit Limit</li> <li name=data-col-2>{{$ctrl.data.creditLimit}}</li> <li name=data-col-3>Cash Balance</li> <li name=data-col-4>{{$ctrl.data.cashBalance}}</li> <li name=data-col-5>Liquidation Value</li> <li name=data-col-6>{{$ctrl.data.liquidationValue}}</li> </ul> <ul name=data-row-3> <li name=data-col-1>Foreign Collateral</li> <li name=data-col-2>{{$ctrl.data.foreignCollateral}}</li> <li name=data-col-3>Current Non-Cash Collateral</li> <li name=data-col-4>{{$ctrl.data.currentNonCashCollateral}}</li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <hr> <ul name=data-row-4> <li name=data-col-1>Initial MR</li> <li name=data-col-2>{{$ctrl.data.initialMR}}</li> <li name=data-col-3>Initial Cash Balance</li> <li name=data-col-4>{{$ctrl.data.initialCashBalance}}</li> <li name=data-col-5>Initial Equity</li> <li name=data-col-6>{{$ctrl.data.initialEquity}}</li> </ul> <ul name=data-row-5> <li name=data-col-1>Initial Non-Cash Collateral</li> <li name=data-col-2>{{$ctrl.data.initialNonCashCollateral}}</li> <li name=data-col-3>Initial Call/Force Flag</li> <li name=data-col-4 ng-class=\"{'red-text': $ctrl.isInitCallForceFlagRedText()}\">{{$ctrl.data.initCallForceFlag}}</li> <li name=data-col-5>Initial Call/Force Margin</li> <li name=data-col-6 ng-class=\"{'red-text': $ctrl.isInitCallForceFlagRedText()}\">{{$ctrl.data.initCallForceMargin}}</li> </ul> <hr> <ul name=data-row-6> <li name=data-col-1>Comm. Confirmed Orders</li> <li name=data-col-2>{{$ctrl.data.commissionConfirmOrder}}</li> <li name=data-col-3>Can Open</li> <li name=data-col-4>{{$ctrl.data.canOpen}}</li> <li name=data-col-5>Calculate MTM</li> <li name=data-col-6>{{$ctrl.data.calMTM}}</li> </ul> <ul name=data-row-7> <li name=data-col-1>Comm. Pending Orders</li> <li name=data-col-2>{{$ctrl.data.commissionPendingOrder}}</li> <li name=data-col-3>Can Close</li> <li name=data-col-4>{{$ctrl.data.canClose}}</li> <li name=data-col-5>Futures MTM</li> <li name=data-col-6>{{$ctrl.data.futuresMTM}}</li> </ul> <ul name=data-row-8> <li name=data-col-1>Total Comm.</li> <li name=data-col-2>{{$ctrl.data.commissionTotalOrder}}</li> <li name=data-col-3>Closing Method</li> <li name=data-col-4>{{$ctrl.data.closingMethod}}</li> <li name=data-col-5>Options MTM</li> <li name=data-col-6>{{$ctrl.data.optionsMTM}}</li> </ul> <ul name=data-row-9> <li name=data-col-1></li> <li name=data-col-2></li> <li name=data-col-3>Receive/Payment</li> <li name=data-col-4>{{$ctrl.data.receivePayment}}</li> <li name=data-col-5>Total Unrealized P/L</li> <li name=data-col-6>{{$ctrl.data.totalUnrealizedPL}}</li> </ul> <ul name=data-row-10> <li name=data-col-1></li> <li name=data-col-2></li> <li name=data-col-3>Receive/Payment after Comm.</li> <li name=data-col-4>{{$ctrl.data.receivePayMentAfterComm}}</li> <li name=data-col-5>Deposit/Withdrawal (Cash)</li> <li name=data-col-6>{{$ctrl.data.depositWithdrawal}}</li> </ul> <ul name=data-row-11> <li name=data-col-1></li> <li name=data-col-2></li> <li name=data-col-3>Call/Force Flag</li> <li name=data-col-4 ng-class=\"{'red-text': $ctrl.isCallForceFlagRedText()}\">{{$ctrl.data.callForceFlag}}</li> <li name=data-col-5>Deposit/Withdrawal (Non-Cash)</li> <li name=data-col-6>{{$ctrl.data.nonCashDepositWithdrawal}}</li> </ul> <ul name=data-row-12> <li name=data-col-1></li> <li name=data-col-2></li> <li name=data-col-3>Call/Force Margin</li> <li name=data-col-4 ng-class=\"{'red-text': $ctrl.isCallForceFlagRedText()}\">{{$ctrl.data.callForceMargin}}</li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <hr> <ul name=data-row-13> <li name=data-col-1>Margin Method</li> <li name=data-col-2>{{$ctrl.data.marginMethod}}</li> <li name=data-col-3>Total MR</li> <li name=data-col-4>{{$ctrl.data.totalMR}}</li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <ul name=data-row-14> <li name=data-col-1></li> <li name=data-col-2></li> <li name=data-col-3>Total MM</li> <li name=data-col-4>{{$ctrl.data.totalMM}}</li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <ul name=data-row-15> <li name=data-col-1></li> <li name=data-col-2></li> <li name=data-col-3>Total FM</li> <li name=data-col-4>{{$ctrl.data.totalFM}}</li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> </div>"},/*!*******************************************************************************!*\
  !*** ./html/account-info-detail/equity-cash-balance-account-info-detail.html ***!
  \*******************************************************************************/
function(e,t){e.exports="<account-info-name page={{$ctrl.page}} data=$ctrl.data last-update-timestamp=$ctrl.lastUpdateTimestamp> </account-info-name> <div> <ul name=data-row-1> <li name=data-col-1>Credit Limit</li> <li name=data-col-2>{{$ctrl.data.creditLimit}}</li> <li name=data-col-3>Line Available</li> <li name=data-col-4>{{$ctrl.data.lineAvailable}}</li> <li name=data-col-5>Cash Balance</li> <li name=data-col-6>{{$ctrl.data.cashBalance}}</li> </ul> <hr> <ul name=data-row-2> <li name=data-col-1>Initial Credit Limit</li> <li name=data-col-2>{{$ctrl.data.initialCreditLimit}}</li> <li name=data-col-3>Initial Line Available</li> <li name=data-col-4>{{$ctrl.data.initialLineAvailable}}</li> <li name=data-col-5>Initial Cash Balance</li> <li name=data-col-6>{{$ctrl.data.initialCashBalance}}</li> </ul> <hr> <ul name=data-row-3> <li name=data-col-1>Net Settlement Line</li> <li name=data-col-2>{{$ctrl.data.netSettlementLine}}</li> <li name=data-col-3></li> <li name=data-col-4></li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <hr> </div>"},/*!*********************************************************************************!*\
  !*** ./html/account-info-detail/equity-credit-balance-account-info-detail.html ***!
  \*********************************************************************************/
function(e,t){e.exports="<account-info-name page={{$ctrl.page}} data=$ctrl.data last-update-timestamp=$ctrl.lastUpdateTimestamp> </account-info-name> <div> <ul name=data-row-1> <li name=data-col-1>Line Available</li> <li name=data-col-2>{{$ctrl.data.lineAvailable}}</li> <li name=data-col-3>Excess Equity</li> <li name=data-col-4>{{$ctrl.data.excessEquity}}</li> <li name=data-col-5>Equity Balance</li> <li name=data-col-6>{{$ctrl.data.equityBalance}}</li> </ul> <ul name=data-row-2> <li name=data-col-1>Credit Limit</li> <li name=data-col-2>{{$ctrl.data.creditLimit}}</li> <li name=data-col-3>Cash Balance</li> <li name=data-col-4>{{$ctrl.data.cashBalance}}</li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <ul name=data-row-3> <li name=data-col-1>Asset</li> <li name=data-col-2>{{$ctrl.data.asset}}</li> <li name=data-col-3>Available Cash Balance</li> <li name=data-col-4>{{$ctrl.data.availableCashBalance}}</li> <li name=data-col-5>Actual Cash Balance</li> <li name=data-col-6>{{$ctrl.data.actualCashBalance}}</li> </ul> <ul name=data-row-4> <li name=data-col-1>Liabilities</li> <li name=data-col-2>{{$ctrl.data.liabilities}}</li> <li name=data-col-3>Available Margin Loan</li> <li name=data-col-4>{{$ctrl.data.availableMarginLoan}}</li> <li name=data-col-5>Actual Margin Loan</li> <li name=data-col-6>{{$ctrl.data.actualMarginLoan}}</li> </ul> <ul name=data-row-5> <li name=data-col-1>Collateral</li> <li name=data-col-2>{{$ctrl.data.collateral}}</li> <li name=data-col-3></li> <li name=data-col-4></li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <hr> <ul name=data-row-6> <li name=data-col-1>Margin</li> <li name=data-col-2></li> <li name=data-col-3></li> <li name=data-col-4></li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <ul name=data-row-7> <li name=data-col-1>IM</li> <li name=data-col-2>{{$ctrl.data.marginIM}}</li> <li name=data-col-3>CM</li> <li name=data-col-4>{{$ctrl.data.marginCM}}</li> <li name=data-col-5>FM</li> <li name=data-col-6>{{$ctrl.data.marginFM}}</li> </ul> <ul name=data-row-8> <li name=data-col-1>IM Adjust</li> <li name=data-col-2>{{$ctrl.data.imAdjust}}</li> <li name=data-col-3>CM Adjust</li> <li name=data-col-4>{{$ctrl.data.cmAdjust}}</li> <li name=data-col-5>FM Adjust</li> <li name=data-col-6>{{$ctrl.data.fmAdjust}}</li> </ul> <ul name=data-row-9> <li name=data-col-1>MTM Realtime</li> <li name=data-col-2>{{$ctrl.data.mtmRealtime}}</li> <li name=data-col-3></li> <li name=data-col-4></li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <ul name=data-row-10> <li name=data-col-1>MR</li> <li name=data-col-2>{{$ctrl.data.mr}}</li> <li name=data-col-3>Buy MR</li> <li name=data-col-4>{{$ctrl.data.buyMr}}</li> <li name=data-col-5>Line Available 50%</li> <li name=data-col-6>{{$ctrl.data.lineAvail50}}</li> </ul> <ul name=data-row-11> <li name=data-col-1>Line Available 60%</li> <li name=data-col-2>{{$ctrl.data.lineAvail60}}</li> <li name=data-col-3>Line Available 70%</li> <li name=data-col-4>{{$ctrl.data.lineAvail70}}</li> <li name=data-col-5>Line Available 80%</li> <li name=data-col-6>{{$ctrl.data.lineAvail80}}</li> </ul> <hr> <ul name=data-row-12> <li name=data-col-1>Call/Force</li> <li name=data-col-2></li> <li name=data-col-3></li> <li name=data-col-4></li> <li name=data-col-5></li> <li name=data-col-6></li> </ul> <ul name=data-row-13> <li name=data-col-1>Call Margin</li> <li name=data-col-2>{{$ctrl.data.callMargin}}</li> <li name=data-col-3>Call Amount</li> <li name=data-col-4>{{$ctrl.data.callAmount}}</li> <li name=data-col-5>Value Force Sale</li> <li name=data-col-6>{{$ctrl.data.valueForceSale}}</li> </ul> <ul name=data-row-14> <li name=data-col-1>Force Margin</li> <li name=data-col-2>{{$ctrl.data.forceMargin}}</li> <li name=data-col-3>Force Amount</li> <li name=data-col-4>{{$ctrl.data.forceAmount}}</li> <li name=data-col-5>%MM</li> <li name=data-col-6>{{$ctrl.data.percentMM}}</li> </ul> </div>"},/*!*********************************************************!*\
  !*** ./html/account-info-detail/account-info-name.html ***!
  \*********************************************************/
function(e,t){e.exports="<ul> <li name=account-name-label>Account No.</li> <li name=account-name>{{$ctrl.data.accountNo}}</li> <li name=customer-name-label>Customer Name</li> <li name=customer-name>{{$ctrl.data.customerName}}</li> <li name=last-update>{{$ctrl.lastUpdateTimestamp}}</li> </ul> <ul> <li name=trader-name-label>Trader Name</li> <li name=trader-name>{{$ctrl.data.traderName}}</li> </ul>"},/*!******************************************************!*\
  !*** ./html/second-screen/second-screen-button.html ***!
  \******************************************************/
function(e,t){e.exports='<div class=col-3> <div class="col-3 open-second" ng-if=$ctrl.isOnPrimaryScreen() ng-click=$ctrl.openSecondScreen()> </div> <div class="col-3 on-second" ng-if=$ctrl.isOnSecondScreen()> </div> </div>'},/*!**************************************************!*\
  !*** ./html/trade-report/trade-report-page.html ***!
  \**************************************************/
function(e,t){e.exports='<div class=component-seperator-right> <div class="request component-seperator-bottom"> <trade-report-request page={{$ctrl.page}}></trade-report-request> </div> <div class=bids-offers> <bids-offers-blank-item class=component-seperator-color symbol=$ctrl.symbolFirst name=bids-offers-item-1 is-three-bids-offers=true row-index=$ctrl.symbolList.rowIndex col-index=0 page={{::$ctrl.page}} can-clear=false> </bids-offers-blank-item> <bids-offers-blank-item class=component-seperator-color symbol=$ctrl.symbolSecond name=bids-offers-item-2 is-three-bids-offers=true row-index=$ctrl.symbolList.rowIndex col-index=1 page={{::$ctrl.page}} can-clear=false> </bids-offers-blank-item> </div> </div> <trade-report-info page={{$ctrl.page}}></trade-report-info>'},/*!**********************************************************!*\
  !*** ./html/trade-report/trade-report-account-info.html ***!
  \**********************************************************/
function(e,t){e.exports='<div> <div class="row-content trader-name"> <div class=row-label>{{$ctrl.accountLabel}}</div> <div class="row-value text-customer-data name">{{$ctrl.traderName}}</div> </div> <div class="row-content account-no"> <div class=row-label> Account No. </div> <div class=row-value> <account-no-input class=row-3 account-no=$ctrl.accountNo on-update=$ctrl.onInnerAccountNoInputBlur(newAccountNo)> </account-no-input> </div> </div> <div class="row-content line-available"> <div class=row-label> Line Available : </div> <div class="row-value text-customer-data"> {{$ctrl.accountInfo.creditLine | price: 2}} </div> </div> <div class="row-content excess-equity"> <div class=row-label> Excess Equity : </div> <div class="row-value text-customer-data"> {{$ctrl.accountInfo.excessEquity | price: 2}} </div> </div> <div class="row-content equity"> <div class=row-label> Equity : </div> <div class="row-value text-customer-data"> {{$ctrl.accountInfo.cashBalance | price: 2}} </div> </div> </div>'},/*!**************************************************!*\
  !*** ./html/trade-report/trade-report-info.html ***!
  \**************************************************/
function(e,t){e.exports='<div class=request-header>Trade Report Informations</div> <uib-tabset active=$ctrl.activePage> <uib-tab heading="By Order" class="row-3 by-order col-14" index=$ctrl.BY_ORDER_ID> <trade-report-info-by-order view-data=$ctrl.currentByOrderDataView></trade-report-info-by-order> </uib-tab> <uib-tab heading="By Summary" class="row-3 by-summary col-14" index=$ctrl.BY_SUMMARY_ID> <trade-report-info-by-summary view-data=$ctrl.currentBySummaryDataView></trade-report-info-by-summary> </uib-tab>  </uib-tabset>'},/*!***********************************************************!*\
  !*** ./html/trade-report/trade-report-info-by-order.html ***!
  \***********************************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li class=time>Time</li> <li class=symbol>Series</li> <li class=volume>Volume</li> <li class=price>Price</li> </ul> <div up-down-select-table data=$ctrl.viewData property-key-name=index selected-key=$ctrl.keyOfSelectedRow on-select=$ctrl.onSelectedRowChangeByPressUpDown(newIndex)> <div class="scroll-container row-50" vs-repeat vs-autoresize vs-options="{latch: true}"> <trade-report-info-by-order-row id=trade-report-info-by-order-row-{{$index}} class="table-color-hover row-3" ng-repeat="rowData in $ctrl.viewData track by rowData.index" data=rowData ng-click=$ctrl.onClickRow(rowData.index) ng-class="{\'table-color-select\': rowData.index === $ctrl.keyOfSelectedRow}"> </trade-report-info-by-order-row> </div> </div>'},/*!*************************************************************!*\
  !*** ./html/trade-report/trade-report-info-by-summary.html ***!
  \*************************************************************/
function(e,t){e.exports='<ul class="header text-data-topic bg-header"> <li class=symbol>Series</li> <li class=volume>Volume</li> <li class=number-of-deal># Deal</li> <li class=avg-price>Avg.Price</li> </ul> <div up-down-select-table data=$ctrl.viewData property-key-name=index selected-key=$ctrl.keyOfSelectedRow on-select=$ctrl.onSelectedRowChangeByPressUpDown(newIndex)> <div class="scroll-container row-50" vs-repeat vs-autoresize vs-options="{latch: true}"> <trade-report-info-by-summary-row id=trade-report-info-by-summary-row-{{$index}} class="table-color-hover row-3" ng-repeat="rowData in $ctrl.viewData track by rowData.index" data=rowData ng-click=$ctrl.onClickRow(rowData.index) ng-class="{\'table-color-select\': rowData.index === $ctrl.keyOfSelectedRow}"> </trade-report-info-by-summary-row> </div> </div>'},/*!***************************************************************!*\
  !*** ./html/trade-report/trade-report-info-by-order-row.html ***!
  \***************************************************************/
function(e,t){e.exports='<ul> <li class=time>{{$ctrl.data.time}}</li> <li class=symbol>{{$ctrl.data.symbol}}</li> <li class="volume text-customer-data">{{$ctrl.data.volume}}</li> <li class="price {{$ctrl.data.priceColor}}">{{$ctrl.data.price}}</li> </ul>'},/*!*****************************************************************!*\
  !*** ./html/trade-report/trade-report-info-by-summary-row.html ***!
  \*****************************************************************/
function(e,t){e.exports='<ul> <li class=symbol>{{$ctrl.data.symbol}}</li> <li class="volume text-customer-data">{{$ctrl.data.volume}}</li> <li class="number-of-deal text-customer-data">{{$ctrl.data.numberOfDeal}}</li> <li class=avg-price>{{$ctrl.data.avgPrice}}</li> </ul>'},/*!*************************************!*\
  !*** ./html/dca/dca-container.html ***!
  \*************************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active> <uib-tab heading="Place Order" name=place-order-tab class="row-3 col-15" index=$ctrl.PLACE_ORDER_MODE> <dca-place-order ng-if=$ctrl.isShowPlaceOrder() ng-class=$ctrl.getClassHeight() page={{::$ctrl.page}}></dca-place-order> </uib-tab> <uib-tab heading=Backtesting name=back-test-tab class="row-3 col-15" index=$ctrl.BACK_TEST_MODE ng-click=$ctrl.onClickTab()> <dca-back-test ng-if=$ctrl.isShowBackTest() ng-class=$ctrl.getClassHeight() page={{::$ctrl.page}}></dca-back-test> </uib-tab> </uib-tabset>'},/*!*************************************!*\
  !*** ./html/dca/dca-back-test.html ***!
  \*************************************/
function(e,t){e.exports='<div class="form col-46"> <ul class=symbol> <label>Symbol</label> <li> <symbol-input id=dca-back-test-symbol name=dca-back-test-symbol class="row-4 col-29" symbol=$ctrl.dcaStore.symbol.name placeholder=Symbol last-search=2 on-validated-symbol=$ctrl.onValidatedSymbol(instrument) on-blur=$ctrl.onBlurSymbolInput(symbol) market-type=E on-blur=$ctrl.onBlurSymbolInput(symbol.name) next-focus-elements=$ctrl.symbolNextFocusElement> </symbol-input> </li> </ul> <ul class=amount> <label>Amount</label> <li> <volume-input class="col-29 row-4" volume=$ctrl.dcaStore.amount name=dca-back-test-amount placeholder="Amount Per Transaction (Baht)"> </volume-input> <i class="mdi mdi-information-outline" aria-hidden=true uib-popover="Remark: Minimum amount should cover board lot value." popover-placement=right popover-trigger=mouseenter popover-class=mi6-info-popover> </i> </li> </ul> <ul class=frequency> <label>Frequency</label> <li> <div class=btn-group> <label class="monthly-btn option-btn btn" ng-model=$ctrl.dcaStore.frequency uib-btn-radio="\'MONTHLY\'">Monthly</label> <label class="weekly-btn option-btn btn" ng-model=$ctrl.dcaStore.frequency uib-btn-radio="\'WEEKLY\'">Weekly</label> </div> </li> </ul> <ul class=duration> <label>Duration</label> <li> <div class=btn-group> <label class="ytd-btn option-btn btn" ng-model=$ctrl.dcaStore.duration uib-btn-radio="\'YTD\'">YTD</label> <label class="one-year-btn option-btn btn" ng-model=$ctrl.dcaStore.duration uib-btn-radio="\'1Y\'">1Y</label> <label class="three-year-btn option-btn btn" ng-model=$ctrl.dcaStore.duration uib-btn-radio="\'3Y\'">3Y</label> <label class="five-year-btn option-btn btn" ng-model=$ctrl.dcaStore.duration uib-btn-radio="\'5Y\'">5Y</label> </div> </li> </ul> <ul class=view-result> <li> <button class="col-28 row-4 view-result-button nr-btn btn-block" type=button ng-click=$ctrl.submitForm()> <span>View Result</span> </button> </li> </ul> </div> <div class="result col-113"> <div class="header row-4"> <span>Backtesting Result:</span> <span class=company-full-name>{{$ctrl.companyDisplayName}}</span> </div> <div class=profit-loss ng-class=$ctrl.getProfitLossClassHeight()> <div class=col-67> <div class="overview row-12"> <ul class=capital-gain> <label>Capital Gain (Baht)</label> <li class=amount ng-class=$ctrl.infoView.profitLossColor> {{$ctrl.infoView.profitLoss}} </li> <li class=percent ng-class=$ctrl.infoView.profitLossColor> {{$ctrl.infoView.percentProfitLoss}} </li> </ul> <ul class=dividend-receive> <label>Dividend Received (Baht)</label> <li class=amount> {{$ctrl.infoView.dividendReceive}} </li> </ul> </div> <div class="chart row-28"> <div id=back-test-unrealized-pl-chart></div> </div> </div> <div class="detail col-46"> <div class=detail-container> <ul class=header> <label>Details</label> </ul> <ul> <label>Period</label> <li name=period>{{$ctrl.infoView.period}}</li> </ul> <ul> <label>Date</label> <li name=date>{{$ctrl.infoView.date}}</li> </ul> <ul> <label>No. of Transaction(s)</label> <li name=no-of-transactions>{{$ctrl.infoView.numberOfTransaction}}</li> </ul> <ul> <label>Total Volume</label> <li name=total-volume>{{$ctrl.infoView.totalVolume}}</li> </ul> </div> <div class=investment-cost-container> <ul class=header> <label>Investment Cost</label> </ul> <ul> <label>Cost Amount (Baht)</label> <li name=cost-amount>{{$ctrl.infoView.investmentCost}}</li> </ul> <ul> <label>Avg Cost (Baht)</label> <li name=avg-cost>{{$ctrl.infoView.avgCost}}</li> </ul> </div> <div class=market-value-container> <ul class=header> <label class=detail-header>Market Value</label> <label class=detail-value>{{$ctrl.infoView.marketValueAsOfDate}}</label> </ul> <ul> <label>Market Value (Baht)</label> <li name=market-value>{{$ctrl.infoView.marketValue}}</li> </ul> <ul> <label>Previous Close (Baht)</label> <li name=current-price>{{$ctrl.infoView.prevClose}}</li> </ul> </div> </div> </div> <div class="header row-4"> <span class=tital>Win Rate</span> <span class=subtital>is calculated from investing 1 million baht every month since 1st trading day.</span> <i class="mdi mdi-information-outline" aria-hidden=true uib-popover="Win Rate (% Win) is the percentage of profitable trades for a given backtesting run. Win Rate is calculated from Number of wins divided by total number of trades. The investment performance, Win Rate (% Win), based on the scenario if invest one million baht in this stock every month for one year period, start investing since the 1st trading day of this stock until previous trading day." popover-trigger=mouseenter popover-class=mi6-info-popover popover-placement=top-right></i> </div> <div class="win-rate row-25"> <div class=col-113> <div class="chart row-23"> <div id=back-test-probability-rate-chart></div> </div> </div> </div> </div>'},/*!***************************************!*\
  !*** ./html/dca/dca-place-order.html ***!
  \***************************************/
function(e,t){e.exports="<dca-place-order-form class=col-66 page={{::$ctrl.page}}></dca-place-order-form> <dca-order-status class=col-93 page={{::$ctrl.page}}></dca-order-status>"},/*!********************************************!*\
  !*** ./html/dca/dca-place-order-form.html ***!
  \********************************************/
function(e,t){e.exports='<div class=account-list-group> <dca-place-order-investor-account ng-if=$ctrl.isShowInvestorAccount() selected-account=$ctrl.dcaStore.selectedAccount on-account-change=$ctrl.onAccountChangedByInvestor(model) authorized-accounts=$ctrl.dcaStore.authorizedAccounts></dca-place-order-investor-account> <dca-place-order-mktrep-account ng-if=$ctrl.isShowMarketRepAccount() selected-account-no=$ctrl.dcaStore.selectedAccount.accountNo on-account-change=$ctrl.onAccountChangedByMarketRep(model)></dca-place-order-mktrep-account> </div> <div> <ul> <li class="select-symbol-label col-34">Select Symbol and Amount (Baht)</li> <li class="nvdr-checkbox col-19"> <checkbox name=dca-nvdr label=NVDR is-check=$ctrl.dcaPlaceOrderStore.isNvdr></checkbox> </li> </ul> </div> <div class=symbol-row-group> <ul> <li ng-repeat="row in $ctrl.rowViews"> <dca-place-order-symbol-row class=symbol-{{$index}} symbol=row.symbol amount=row.amount on-amount-changed=$ctrl.updateTotalAmount() calculated-minimum-amount=row.minimumAmount> </dca-place-order-symbol-row> </li> <li> <button class="col-19 add-edit-symbols-button nr-btn btn-block" type=button ng-click=$ctrl.openSymbolSelector()><span>Add or Edit Symbols</span></button> </li> </ul> </div> <div class=total-amount-group> <ul class=row-4> <li class="total-amount-label col-34">Total Amount per order (Baht)</li> <li class="total-amount-value col-19">{{$ctrl.totalAmount}}</li> </ul> </div> <div class=dca-option-group> <ul class=frequency> <li class=text-label>Frequency</li> <li> <ul class="btn-group row-3"> <li class="frequencly-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.frequency uib-btn-radio=$ctrl.FREQUENCY_MONTHLY>{{$ctrl.FREQUENCY_MONTHLY.shortName}}</li> <li class="frequencly-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.frequency uib-btn-radio=$ctrl.FREQUENCY_WEEKLY>{{$ctrl.FREQUENCY_WEEKLY.shortName}}</li> </ul> </li> </ul> <ul class="date monthly" ng-show=$ctrl.checkIfCurrentModeIsMonthly()> <li class=text-label>Date</li> <li> <ul class="btn-group row-3"> <li ng-repeat="item in $ctrl.DATE_MONTHLY_LIST" class="date-monthly-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.date uib-btn-radio=item name={{item.shortName}}>{{item.shortName}}</li> </ul> </li> </ul> <ul class="date weekly" ng-show=$ctrl.checkIfCurrentModeIsWeekly()> <li class=text-label>Day</li> <li> <ul class="btn-group row-3"> <li ng-repeat="item in $ctrl.DATE_WEEKLY_LIST" class="date-weekly-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.date uib-btn-radio=item name={{item.shortName}}>{{item.shortName}}</li> </ul> </li> </ul> <ul class=time> <li class=text-label>Time</li> <li> <ul class="btn-group row-3"> <li class="time-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.time uib-btn-radio=$ctrl.TIME_MORNING>{{$ctrl.TIME_MORNING.shortName}}</li> <li class="time-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.time uib-btn-radio=$ctrl.TIME_AFTERNOON>{{$ctrl.TIME_AFTERNOON.shortName}}</li> </ul> </li> </ul> <ul class="duration monthly" ng-show=$ctrl.checkIfCurrentModeIsMonthly()> <li class=text-label>Duration</li> <li> <ul class="btn-group row-3"> <li ng-repeat="item in $ctrl.DURATION_MONTHLY" class="duration-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.duration uib-btn-radio=item>{{item.shortName}}</li> </ul> </li> </ul> <ul class="duration weekly" ng-show=$ctrl.checkIfCurrentModeIsWeekly()> <li class=text-label>Duration</li> <li> <ul class="btn-group row-3"> <li ng-repeat="item in $ctrl.DURATION_WEEKLY" class="duration-btn option-btn btn" ng-model=$ctrl.dcaPlaceOrderStore.duration uib-btn-radio=item>{{item.shortName}}</li> </ul> </li> </ul> </div> <div class=remark-group> <ul> <li class=text-label>Remark</li> <li class=detail> <ul> <li>DCA Order(s) will be effective on next trading day.</li> <li>Limit to 5 DCA orders or 5 symbols.</li> <li>Your order(s) will be sent as a MP-MTL Order and board lot volume.</li> <li>Time: Trading session which your order(s) will be sent when market turns to Open1 (Morning) or Open2 (Afternoon).</li> <li>If the selected date is a non-trading day, your order(s) will be activated on the next trading day.</li> </ul> </li> </ul> </div> <div class=controls-group> <ul> <li class=pin ng-if=$ctrl.isShowPinInput()> PIN<pin-input class="col-10 row-4" pin=$ctrl.dcaPlaceOrderStore.pin placeholder=PIN id=dca-place-order-pin is-show-save-pin=true></pin-input> </li> <li class=place-dca-button> <button class="col-18 nr-btn btn-block" type=button ng-click=$ctrl.submitOrder()> <span>Place DCA Order</span> </button> </li> <li class=clear-button> <button class="col-8 nr-btn btn-block" type=button ng-click=$ctrl.clearForm()> <span>Clear</span> </button> </li> </ul> </div>'},/*!**************************************************!*\
  !*** ./html/dca/dca-place-order-symbol-row.html ***!
  \**************************************************/
function(e,t){e.exports='<ul> <li class="symbol-name col-34">{{$ctrl.symbol}}</li> <li class="symbol-input col-19" popover-placement=top-right popover-animation=false popover-trigger=mouseenter popover-class=amount-popover uib-popover-template="\'amount-popover-template.html\'"> <volume-input volume=$ctrl.amount name=dca-place-order-amount placeholder=Amount on-input-blur=$ctrl.onAmountInputBlur()> </volume-input> </li> <script type=text/ng-template id=amount-popover-template.html> <div>\n            <p class="header">Suggested Amount > {{$ctrl.calculatedMinimumAmount}} Baht</p>\n            <p class="detail">Calculate from avg 52w price * 100 Shares<br/>or Broker\'s minimum amount {{$ctrl.getBrokerMinimumAmount()}} Baht</p>\n        </div> </script> </ul>'},/*!****************************************!*\
  !*** ./html/dca/dca-order-status.html ***!
  \****************************************/
function(e,t){e.exports='<div class="order-header row-5"> <div class=label><label>DCA Status</label></div> <div class=status-meaning-link ng-click=$ctrl.openStatusMeaning()> <span>Status Meaning</span> </div> <refresh-ui-component></refresh-ui-component> </div> <div class=order-list> <ul class="header text-data-topic bg-header"> <li class="symbol col-13"> Symbol </li> <li class="amount col-13"> Amount (Per Time) </li> <li class="frequency col-16"> Frequency </li> <li class="time col-10"> Time </li> <li class="end-date col-11"> End Date </li> <li class="status col-14"> Status </li> <li class="cancel col-7"></li> <li class="detail col-7"></li> </ul> <div class=scroll-container ng-class=$ctrl.getOrderStatusClassHeight()> <dca-order-status-row ng-repeat="order in $ctrl.dcaOrderStatusService.currentOrderStatusList" data=order page={{$ctrl.page}} id=dca-order-status-{{$index}} class="table-color-hover row-4"></dca-order-status-row> </div> </div>'},/*!********************************************!*\
  !*** ./html/dca/dca-order-status-row.html ***!
  \********************************************/
function(e,t){e.exports='<ul class="order-item no-newline"> <li class=symbol> {{$ctrl.data.symbolWithNvdr}} </li> <li class=amount> {{$ctrl.data.amount}} </li> <li class=frequency> {{$ctrl.data.frequency}} </li> <li class=time> {{$ctrl.data.time}} </li> <li class=end-date> {{$ctrl.data.endDate}} </li> <li class=status ng-class=$ctrl.data.statusColor> {{$ctrl.data.status}} </li> <li class=cancel><span ng-if=$ctrl.data.canCancel ng-click=$ctrl.onClickCancelOrder()>Cancel</span></li> <li class=detail ng-click=$ctrl.openOrderDetail()><span>Detail</span></li> </ul>'},/*!****************************************!*\
  !*** ./html/dca/dca-order-detail.html ***!
  \****************************************/
function(e,t){e.exports='<div class=top-part> <ul class=dca-no> <li class=text-label>DCA No.</li> <li class=value>{{$ctrl.view.policyId}}</li> </ul> <ul class=account-no> <li class=text-label>Account No.</li> <li class=value>{{$ctrl.view.accountNo}}</li> </ul> <ul class=entry-date> <li class=text-label>Entry Date</li> <li class=value>{{$ctrl.view.entryDate}}</li> </ul> <ul class=entry-id> <li class=text-label>Entry ID</li> <li class=value>{{$ctrl.view.entryId}}</li> </ul> <ul class=symbol> <li class=text-label>Symbol</li> <li class=value>{{$ctrl.view.symbolWithNVDR}}</li> </ul> <ul class=amount> <li class=text-label>Amount</li> <li class=value>{{$ctrl.view.amount}}</li> </ul> <ul class=frequency> <li class=text-label>Frequency</li> <li class=value>{{$ctrl.view.frequency}}</li> </ul> <ul class=time> <li class=text-label>Time</li> <li class=value>{{$ctrl.view.time}}</li> </ul> <ul class=duration-date> <li class=text-label>Duration Date</li> <li class=value>{{$ctrl.view.durationDate}}</li> </ul> <ul class=no-of-transactions> <li class=text-label>No. of Transaction(s)</li> <li class=value>{{$ctrl.view.totalTransactionsCount}}</li> </ul> <ul class=status> <li class=text-label>Status</li> <li class=value ng-class=$ctrl.view.status.styleClass>{{$ctrl.view.status.name}}</li> </ul> <ul class=meaning> <li class=text-label>Meaning</li> <li class=value>{{$ctrl.view.meaning}}</li> </ul> <ul class=cancel-id> <li class=text-label>Cancel ID</li> <li class=value>{{$ctrl.view.cancelId}}</li> </ul> <ul class=cancel-date-time> <li class=text-label>Cancel Date (Time)</li> <li class=value>{{$ctrl.view.cancelDate}}</li> </ul> </div> <hr/> <div class=middle-part> <ul class=avg-price-baht> <li class=text-label>AVG Price (Baht)</li> <li class=value>{{$ctrl.view.matchedAvgPrice}}</li> </ul> <ul class=volume> <li class=text-label>Volume</li> <li class=value>{{$ctrl.view.matchedVolume}}</li> </ul> </div> <hr/> <div class=bottom-part> <ul> <li class=text-label>Details:</li> </ul> <div class=activated-transactions> <ul> <li class="value no-of-transactions">{{$ctrl.view.activatedTransactionCount}} Activated Transaction(s)</li> </ul> <dca-order-detail-transaction-row ng-repeat="item in $ctrl.view.activatedTransactions track by $index" name=dca-activated-order-detail-transaction-row-{{$index}} view=item> </dca-order-detail-transaction-row> </div> <div class=pending-transactions> <ul> <li class="value no-of-transactions">{{$ctrl.view.pendingTransactionCount}} Waiting Transaction(s)</li> </ul> <dca-order-detail-transaction-row ng-repeat="item in $ctrl.view.pendingTransactions track by $index" name=dca-pending-order-detail-transaction-row-{{$index}} view=item> </dca-order-detail-transaction-row> </div> </div>'},/*!********************************************************!*\
  !*** ./html/dca/dca-order-detail-transaction-row.html ***!
  \********************************************************/
function(e,t){e.exports="<dca-rejected-transaction-detail-row view-data=$ctrl.view.data ng-if=$ctrl.view.type.isRejected()></dca-rejected-transaction-detail-row> <dca-activated-transaction-detail-row view-data=$ctrl.view.data ng-if=$ctrl.view.type.isActivated()></dca-activated-transaction-detail-row> <dca-cancelled-transaction-detail-row view-data=$ctrl.view.data ng-if=$ctrl.view.type.isCancelled()></dca-cancelled-transaction-detail-row> <dca-expired-transaction-detail-row view-data=$ctrl.view.data ng-if=$ctrl.view.type.isExpired()></dca-expired-transaction-detail-row> <dca-waiting-transaction-detail-row view-data=$ctrl.view.data ng-if=$ctrl.view.type.isWaiting()></dca-waiting-transaction-detail-row> <dca-activating-transaction-detail-row view-data=$ctrl.view.data ng-if=$ctrl.view.type.isActivating()></dca-activating-transaction-detail-row>"},/*!***********************************************************!*\
  !*** ./html/dca/dca-rejected-transaction-detail-row.html ***!
  \***********************************************************/
function(e,t){e.exports='<div class="transaction-data rejected"> <div class=label-1> <div class=dca-no-label>DCA No.</div> <div class=active-date-label>Active Date</div> <div class=status-label>Status</div> </div> <div class=value-1> <div class=dca-no-value>{{$ctrl.viewData.orderNo}}</div> <div class=active-date-value>{{$ctrl.viewData.activeDate}}</div> <div class=status-value ng-class=$ctrl.viewData.statusColor>{{$ctrl.viewData.status}}</div> </div> <div class=label-2> <div class=reason-label>Reason</div> </div> <div class=value-2> <div class=reason-value>{{$ctrl.viewData.reason}}</div> </div> </div>'},/*!************************************************************!*\
  !*** ./html/dca/dca-activated-transaction-detail-row.html ***!
  \************************************************************/
function(e,t){e.exports='<div class="transaction-data cancelled activated"> <div class=label-1> <div class=dca-no-label>DCA No.</div> <div class=effective-date-label>Effective Date</div> <div class=status-label>Status</div> </div> <div class=value-1> <div class=dca-no-value>{{$ctrl.viewData.orderNo}}</div> <div class=effective-date-value>{{$ctrl.viewData.effectiveDate}}</div> <div class=status-value ng-class=$ctrl.viewData.statusColor>{{$ctrl.viewData.status}}</div> </div> <div class=label-2> <div class=matched-volume-label>Matched Volume</div> <div class=matched-price-label>Matched Price</div> <div class=active-date-label>Active Date</div> </div> <div class=value-2> <div class=matched-volume-value>{{$ctrl.viewData.matchedVolume}}</div> <div class=matched-price-value>{{$ctrl.viewData.matchedPrice}}</div> <div class=active-date-value>{{$ctrl.viewData.activeDate}}</div> </div> </div>'},/*!**********************************************************!*\
  !*** ./html/dca/dca-waiting-transaction-detail-row.html ***!
  \**********************************************************/
function(e,t){e.exports='<div class="transaction-data waiting"> <div class=label-1> <div class=dca-no-label>DCA No.</div> <div class=effective-date-label>Effective Date</div> <div class=status-label>Status</div> </div> <div class=value-1> <div class=dca-no-value>{{$ctrl.viewData.orderNo}}</div> <div class=effective-date-value>{{$ctrl.viewData.effectiveDate}}</div> <div class=status-value ng-class=$ctrl.viewData.statusColor>{{$ctrl.viewData.status}}</div> </div> </div>'},/*!********************************************************!*\
  !*** ./html/dca/dca-place-order-investor-account.html ***!
  \********************************************************/
function(e,t){e.exports='<ul> <li class="accounbt-list-label col-34"> Account No. </li> <li class="account-list-dropdown col-19"> <index-dropdown model=$ctrl.authorizedAccounts selected=$ctrl.selectedAccount key-name=accountName dropdown-name=dca-page-account on-update=$ctrl.onUpdate(model)></index-dropdown> </li> </ul>'},/*!******************************************************!*\
  !*** ./html/dca/dca-place-order-mktrep-account.html ***!
  \******************************************************/
function(e,t){e.exports='<ul> <li class="accounbt-list-label col-34"> Account No. </li> <li class="account-list-dropdown col-19"> <dca-account-no-input class=row-3 account-no=$ctrl.selectedAccountNo on-update=$ctrl.onUpdate(newAccountNo) is-disabled=false></dca-account-no-input> </li> </ul>'},/*!**********************************!*\
  !*** ./html/tfex/tfex-page.html ***!
  \**********************************/
function(e,t){e.exports='<div class="col-160 row-81" ng-if=$ctrl.isActive> <div class=col-108> <tfex-page-left-content-tabs class="col-108 component-seperator-right" page={{::$ctrl.page}}></tfex-page-left-content-tabs> </div> <tfex-order class=col-52 page={{::$ctrl.page}}></tfex-order> </div>'},/*!**********************************************!*\
  !*** ./html/tfex/tfex-place-order-tabs.html ***!
  \**********************************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active> <uib-tab heading="Normal Order" name=normal-order-tab class="row-3 col-15" index=$ctrl.PLACE_NORMAL_TAB_ID> <tfex-normal-place-order ng-if=$ctrl.isActive($ctrl.PLACE_NORMAL_TAB_ID) source=$ctrl.TFEX_PLACE_ORDER_SOURCE_ID></tfex-normal-place-order> </uib-tab> <div clsss=buttons-wrapper> <refresh-ui-component is-requesting=$ctrl.orderStatusService.isRequestingDerivatives></refresh-ui-component> </div> </uib-tabset>'},/*!****************************************************!*\
  !*** ./html/tfex/tfex-page-left-content-tabs.html ***!
  \****************************************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active> <uib-tab heading=Watch name=watch-tab class="row-3 col-15" index=$ctrl.WATCH_TAB_ID ng-click=$ctrl.onClickTab()> <tfex-watch ng-if="$ctrl.active == $ctrl.WATCH_TAB_ID" page={{::$ctrl.page}}></tfex-watch> <tfex-mini-quote class=row-26 page={{::$ctrl.page}}></tfex-mini-quote> </uib-tab> <uib-tab heading="Payoff Chart" name=payoff-chart-tab class="row-3 col-15" index=$ctrl.PAYOFF_CHART_TAB_ID ng-click=$ctrl.onClickTab()> <tfex-payoff ng-if="$ctrl.active == $ctrl.PAYOFF_CHART_TAB_ID" page={{::$ctrl.page}}></tfex-payoff> </uib-tab> <uib-tab heading="Options Summary" name=options-summary-tab class="row-3 col-18" index=$ctrl.OPTIONS_SUMMARY_TAB_ID ng-click=$ctrl.onClickTab()> <tfex-options-summary id=options-summary ng-if="$ctrl.active == $ctrl.OPTIONS_SUMMARY_TAB_ID" page={{::$ctrl.page}}></tfex-options-summary> </uib-tab> <div class=tfex-button-list> <button class="margin-sim nr-btn" type=button ng-click=$ctrl.showMarginSim()>Margin Simulation</button> <button class="margin-info nr-btn" type=button ng-click=$ctrl.showMarginRate()>Margin Rate</button> </div> </uib-tabset>'},/*!******************************************!*\
  !*** ./html/tfex/tfex-order-status.html ***!
  \******************************************/
function(e,t){e.exports='<div> <ul class="header text-data-topic bg-header"> <li class=col-3> <span class=checkAllOrder> <input type=checkbox value=None id=check-all-tfex-order-btn name=check ng-checked=$ctrl.isCheckedAllDerivatives() ng-click=$ctrl.toggleCancelAllDerivatives() /> <label for=checkAllDerivOrderBtn><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-15 symbol" ng-click=$ctrl.sortDerivativesOrderBySymbol()> Symbol<i class="fa fa-sort" ng-class=$ctrl.getSortIconByDerivativesSymbol()></i> </li> <li class="col-4 pos" ng-click=$ctrl.sortDerivativesOrderByPosition()> Pos<i class="fa fa-sort" ng-class=$ctrl.getSortIconByOrderPosition()></i> </li> <li class=side ng-click=$ctrl.sortDerivativesOrderBySide()> Side<i class="fa fa-sort" ng-class=$ctrl.getSortIconBySide()></i> </li> <li class="col-8 price" ng-click=$ctrl.sortDerivativesOrderByPrice()> Price<i class="fa fa-sort" ng-class=$ctrl.getSortIconByPrice()></i> </li> <li class=volume ng-click=$ctrl.sortDerivativesOrderByVolume()> Vol<i class="fa fa-sort" ng-class=$ctrl.getSortIconClassByVolume()></i> </li> <li class=status ng-click=$ctrl.sortDerivativesOrderByStatus()> Status<i class="fa fa-sort" ng-class=$ctrl.getSortIconClass()></i> </li> </ul> <div up-down-select-table data=$ctrl.orderStatusService.currentDerivOrderStatusList property-key-name=key selected-key=$ctrl.selectedRow on-select=$ctrl.onDerivativesSelectedRowChangeByPressUpDown(newIndex)> <ul class=scroll-container ng-class=$ctrl.orderProcessor.getTfexOrderStatusClass() vs-repeat vs-autoresize vs-auto-element-resize> <tfex-order-status-row ng-repeat="derivOrder in $ctrl.orderStatusService.currentDerivOrderStatusList track by derivOrder.key" ng-class="[{\'background-color-select\': derivOrder.key === $ctrl.selectedRow}, derivOrder.side.classname]" ng-click=$ctrl.onClickSymbolDerivatives(derivOrder) name=tfex-order-status-row-{{$index+1}} data=derivOrder> </tfex-order-status-row> </ul> </div> </div>'},/*!**********************************************!*\
  !*** ./html/tfex/tfex-order-status-row.html ***!
  \**********************************************/
function(e,t){e.exports=' <ul class="table-color-hover no-newline"> <li class=col-3> <span class=checkOrder ng-if=$ctrl.data.canCancelled> <input type=checkbox value=None id=tfex-{{$ctrl.data.key}} name=check-order ng-checked=$ctrl.data.isChecked ng-click=$ctrl.changeChecked() /> <label for=tfex-{{$ctrl.data.key}}><i class="mdi mdi-check"></i></label> </span> </li> <li class=symbol> {{$ctrl.data.symbol}} </li> <li class="col-4 pos"> {{$ctrl.data.position.shortname}} </li> <li class=side ng-class=$ctrl.data.side.classname> {{$ctrl.data.side.derivativeShortname}} </li> <li class=price> {{$ctrl.data.price | orderDerivPrice:$ctrl.data.priceDigit:$ctrl.data.priceType}} </li> <li class=volume> {{$ctrl.data.volume | volume}} </li> <li class=status ng-click="$ctrl.popupOrderDetail(\'orderDetail\', $event)"> <div class=status-short> <span>{{$ctrl.data.shortStatus}}</span><span ng-if=$ctrl.data.isStopOrder>(ST)</span> </div> <div class=status-full> {{$ctrl.data.longStatus}} </div> </li> </ul>'},/*!***********************************!*\
  !*** ./html/tfex/tfex-order.html ***!
  \***********************************/
function(e,t){e.exports='<tfex-investor-account-info ng-if=$ctrl.orderProcessor.isInvestor class="col-52 row-11" page={{$ctrl.page}}> </tfex-investor-account-info> <tfex-marketrep-account-info ng-if=$ctrl.orderProcessor.isMarketRep class="col-52 row-11" page={{$ctrl.page}}> </tfex-marketrep-account-info> <tfex-place-order-tabs class="col-52 row-42" page={{$ctrl.page}}></tfex-place-order-tabs> <tfex-order-status class=col-52 page={{$ctrl.page}}></tfex-order-status>'},/*!***********************************!*\
  !*** ./html/tfex/tfex-watch.html ***!
  \***********************************/
function(e,t){e.exports='<div class=row-5> <div class="row-5 col-23 favourite watch-mode-selector"> <span class=col-3> <input type=radio name=tfex-mode-btn value=Favourite id=tfex-favourite-watch-btn class=col-3 ng-model=$ctrl.tfexWatchStore.currentWatchModeSelector ng-click=$ctrl.onSelectedFavorite()> <div class=check></div> </span> <index-dropdown class="row-3 col-19 favourite-dropdown" model=$ctrl.tfexWatchStore.favouriteDropDownList selected=$ctrl.tfexWatchStore.selectedFavouriteDropdown key-name=showName dropdown-name=tfex-watch-favourite on-selected=$ctrl.changeCurrentModeToFavourite(model)></index-dropdown> </div> <div class="row-5 col-31 futures watch-mode-selector"> <span class=col-3> <input type=radio name=tfex-mode-btn value=FUTURES id=tfex-futures-watch-btn class=col-3 ng-model=$ctrl.tfexWatchStore.currentWatchModeSelector ng-click=$ctrl.onSelectedFutures()> <div class=check></div> </span> <index-dropdown class="row-3 col-27 futures-dropdown" model=$ctrl.tfexWatchStore.futruesDropDownList selected=$ctrl.tfexWatchStore.selectedFuturesDropdown key-name=name dropdown-name=tfex-watch-futures on-selected=$ctrl.changeCurrentModeToFutures(model)></index-dropdown> </div> <div class="row-5 col-53 options watch-mode-selector"> <span class=col-3> <input type=radio name=tfex-mode-btn value=Options id=tfex-options-watch-btn class=col-3 ng-model=$ctrl.tfexWatchStore.currentWatchModeSelector ng-click=$ctrl.onSelectedOptions()> <div class=check></div> </span> <index-dropdown class="row-3 col-27 options-dropdown" model=$ctrl.tfexWatchStore.optionsDropDownList selected=$ctrl.tfexWatchStore.selectedOptionsDropdown key-name=name dropdown-name=tfex-watch-options on-selected=$ctrl.changeCurrentModeToOptions(model)> </index-dropdown> <div class=options-mode-switch-wrapper ng-if=$ctrl.isOptionsListMode()> <span class=view-by-label>View by:</span> <ul class="options-mode-switch btn-group row-3"> <li ng-click=$ctrl.changeCurrentOptionsListMode($ctrl.OPTIONS_BY_PRICE) class="by-price-btn btn" ng-model=$ctrl.selectedOptionsListMode uib-btn-radio=$ctrl.OPTIONS_BY_PRICE.key>Price</li> <li ng-click=$ctrl.changeCurrentOptionsListMode($ctrl.OPTIONS_BY_VOLATILITY) class="by-volatility-btn btn" ng-model=$ctrl.selectedOptionsListMode uib-btn-radio=$ctrl.OPTIONS_BY_VOLATILITY.key>Volatility</li> </ul> </div> </div> </div> <favourite-list class="component-seperator-top component-seperator-bottom tfex-page" page={{::$ctrl.page}} ng-if=$ctrl.isWatchListMode() is-in-tfex-page=true> </favourite-list> <tfex-options-list class="component-seperator-top component-seperator-bottom" page={{::$ctrl.page}} ng-if=$ctrl.isOptionsListMode() is-in-tfex-page=true></tfex-options-list> '},/*!******************************************!*\
  !*** ./html/tfex/tfex-options-list.html ***!
  \******************************************/
function(e,t){e.exports='<div class="row-4 option-last-trading-date"> SET50 Options: Last trading date on <span class=yellow>{{$ctrl.optionsLastTradingDay}}</span> </div> <options-list class=component-seperator-bottom on-set-options-last-trading-date=$ctrl.setOptionsLastTradingDate(label) page={{::$ctrl.page}} is-in-tfex-page=true> </options-list> <div class=options-overview-wrapper> <tfex-options-overview class=underlying-overview page={{::$ctrl.page}} symbol=.SET50></tfex-options-overview> <tfex-options-overview class="component-seperator-left futures-overview" page={{::$ctrl.page}} symbol={{$ctrl.seriesId}}></tfex-options-overview> </div>'},/*!**********************************************!*\
  !*** ./html/tfex/tfex-options-overview.html ***!
  \**********************************************/
function(e,t){e.exports='<div class="tfex-options-overview-symbol component-seperator-right"> <div class=symbol value=$ctrl.symbol ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{ $ctrl.symbol }} </div> </div> <div class="mini-quote-last-done component-seperator-right" highlight-cell value=$ctrl.overview.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.overview.change, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> <div class=price>{{$ctrl.overview.lastDone | price: $ctrl.overview.priceDigit}}</div> <div class=change>{{$ctrl.overview.change | nullableChange: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} {{$ctrl.overview.percentChange | nullablePercentChangeWithParenthesis: $ctrl.overview.priceDigit:$ctrl.overview.previousClose:$ctrl.overview.lastDone}} </div> </div> <div class="detail-1 component-seperator-right"> <label class=detail-label>{{$ctrl.overview.label1}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue1> {{$ctrl.overview.topValue1 | pov: 2:$ctrl.overview.isPrice1 }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue1> {{$ctrl.overview.bottomValue1 | pov: 2:$ctrl.overview.isPrice1 }} </div> </div> <div class=detail-2> <label class=detail-label>{{$ctrl.overview.label2}}</label> <div class=topValue highlight-cell value=$ctrl.overview.topValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.topValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.topValue2 | price: $ctrl.overview.priceDigit }} </div> <div class=bottomValue highlight-cell value=$ctrl.overview.bottomValue2 ng-class="$ctrl.colorService.priceColor($ctrl.overview.bottomValue2, $ctrl.overview.previousClose, $ctrl.overview.totalVolume)"> {{$ctrl.overview.bottomValue2 | price: $ctrl.overview.priceDigit }} </div> </div>'},/*!***************************************************!*\
  !*** ./html/tfex/tfex-investor-account-info.html ***!
  \***************************************************/
function(e,t){e.exports='<div class=account-name> <index-dropdown model=$ctrl.accountList selected=$ctrl.selectedAccount key-name=accountName dropdown-name=tfex-page-account class=col-22></index-dropdown> <div class="col-26 name text-customer-data">{{$ctrl.accountFullName}}</div> </div> <div class=account-detail> <ul class="account-info-1 col-27"> <label class=col-12>{{$ctrl.accountInfo.label1}}</label> <span class="col-14 text-customer-data">{{$ctrl.accountInfo.value1 | price: 2}}</span> </ul> <ul class="account-info-2 col-19"> <label class=col-3>{{$ctrl.accountInfo.label2}}</label> <span class="col-14 text-customer-data">{{$ctrl.accountInfo.value2 | price: 2}}</span> </ul> </div> <div class=account-detail> <ul class="account-info-3 col-27"> <label class=col-12>{{$ctrl.accountInfo.label3}}</label> <span class="col-14 text-customer-data">{{$ctrl.accountInfo.value3 | price: 2}}</span> </ul> <ul class="account-info-4 col-19"> <label class=col-3>{{$ctrl.accountInfo.label4}}</label> <span class="col-14 text-customer-data">{{$ctrl.accountInfo.value4 | price: 2}}</span> </ul> </div>'},/*!****************************************************!*\
  !*** ./html/tfex/tfex-marketrep-account-info.html ***!
  \****************************************************/
function(e,t){e.exports='<div class=account-name> <index-dropdown class="row-3 col-12 systemType" model=$ctrl.authorizedSystemTypes selected=$ctrl.selectedSystemType key-name=fullName dropdown-name=tfex-system-type></index-dropdown> <account-no-input id=tfex-input-account-no class="row-3 col-15 accountNo" account-no=$ctrl.selectedAccount.accountNo on-update=$ctrl.onAccountNoChange(newAccountNo)></account-no-input> <div class="col-20 name text-customer-data" tooltip-enable=true uib-tooltip="{{ $ctrl.accountNameForSelectedAccount.engName }}" tooltip-append-to-body=true tooltip-placement=bottom> {{$ctrl.accountNameForSelectedAccount.engName}} </div> </div> <div class=account-detail> <ul class="account-info-1 col-27"> <label class=col-12>{{$ctrl.accountInfoForSelectedAccount.label1}}</label> <span class="col-14 text-customer-data"> {{$ctrl.accountInfoForSelectedAccount.value1 | price: 2}} </span> </ul> <ul class="account-info-2 col-19"> <label class=col-3>{{$ctrl.accountInfoForSelectedAccount.label2}}</label> <span class="col-14 text-customer-data"> {{$ctrl.accountInfoForSelectedAccount.value2 | price: 2}} </span> </ul> </div> <div class=account-detail> <ul class="account-info-3 col-27"> <label class=col-12>{{$ctrl.accountInfoForSelectedAccount.label3}}</label> <span class="col-14 text-customer-data"> {{$ctrl.accountInfoForSelectedAccount.value3 | price: 2}} </span> </ul> <ul class="account-info-4 col-19"> <label class=col-3>{{$ctrl.accountInfoForSelectedAccount.label4}}</label> <span class="col-14 text-customer-data"> {{$ctrl.accountInfoForSelectedAccount.value4 | price: 2}} </span> </ul> </div>'},/*!************************************************!*\
  !*** ./html/tfex/tfex-normal-place-order.html ***!
  \************************************************/
function(e,t){e.exports='<div ng-class=[$ctrl.orderProcessor.side.classname]> <div class=section-1> <div class=left-form> <div class=position-wrapper> <label class=col-8>Position:</label> <index-dropdown class="col-10 form-input" dropdown-name=tfex-page-order-position key-name=name model=$ctrl.orderProcessor.positionList selected=$ctrl.orderProcessor.position on-update=$ctrl.onPositionChanged(model)> </index-dropdown> </div> </div> </div> <div class=section-2> <div class=left-form> <div class=order-side-wrapper> <label class="side col-8">Side:</label> <radio-button class="col-8 form-input" name=tfex-page-side element-id=buy-btn ng-click="$ctrl.onSideChange(\'B\')" value=B label=LONG next-focus-elements=$ctrl.sideNextFocusElements sidename=$ctrl.orderProcessor.sidename></radio-button> <radio-button class="col-8 form-input" name=tfex-page-side element-id=sell-btn value=S ng-click="$ctrl.onSideChange(\'S\')" label=SHORT next-focus-elements=$ctrl.sideNextFocusElements sidename=$ctrl.orderProcessor.sidename></radio-button> </div> </div> <div class=right-form> <div class=stop-checkbox-wrapper> <checkbox class=form-input name=tfex-page-stop-order label="Stop Order" next-focus-elements-after-click=$ctrl.stopOrderCheckboxNextFocusElements on-click=$ctrl.onToggleEnableStopOrder() is-check=$ctrl.orderProcessor.isStopOrderChecked is-disabled=!$ctrl.checkPriceTypeNotATO()></checkbox> </div> </div> </div> <div class=section-3> <div class=left-form> <div class=symbol-wrapper> <label class=col-8>Symbol:</label> <symbol-input class="col-15 form-input" id=tfex-page-place-order-symbol name=tfex-page-place-order-symbol symbol=$ctrl.orderProcessor.symbol last-search=2 placeholder=Symbol on-validated-symbol=$ctrl.onValidatedSymbol(instrument) on-validated-symbol-fail=$ctrl.onValidatedSymbolFail() on-input-symbol-change=$ctrl.onInputUpdate(inputStr) market-type=D on-blur=$ctrl.onBlurSymbolInput(symbol) next-focus-elements=$ctrl.symbolNextFocusElements> </symbol-input> </div> <div class=volume-wrapper> <label class=col-8>Volume:</label> <smart-volume-input class="col-15 form-input" id=tfex-page-place-order-volume name=tfex-page-volume placeholder=Volume input-volume=$ctrl.orderProcessor.volume market-type=D is-disabled=false is-enable-volume-from-port=false next-focus-elements=$ctrl.volumeInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartVolumeAction()}}> </smart-volume-input> </div> <div class=price-wrapper> <label class=col-8>Price:</label> <smart-price-input class="col-15 form-input" id=tfex-page-place-order-price price-digit=$ctrl.getPriceDigit() can-negative=true input-price=$ctrl.orderProcessor.price placeholder=Price is-disabled=$ctrl.checkPriceTypeNotLimit() side=$ctrl.orderProcessor.side next-focus-elements=$ctrl.priceInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartPriceAction()}} analytics-action={{::$ctrl.getPriceAction()}} stock-data=$ctrl.instrumentStaticData on-input-price-type-shortcut=$ctrl.onInputPriceTypeShortcut(priceType) price-type-shortcut-mapping=$ctrl.priceTypeShortcutMapping> </smart-price-input> </div> </div> <div class="right-form stop-condition-detail" ng-class=[$ctrl.orderProcessor.side.classname] ng-hide=!$ctrl.orderProcessor.isStopOrderChecked> <div class=stop-symbol-wrapper> <label class=col-8>Symbol:</label> <stop-symbol-input class="col-15 form-input" id=tfex-page-cond-order-symbol symbol=$ctrl.orderProcessor.stopSymbol placeholder="Stop Symbol" on-validated-symbol=$ctrl.onValidatedStopSymbol(instrument) on-input-symbol-change=$ctrl.onStopSymbolUpdate(inputStr) on-blur=$ctrl.onBlurConditionSymbolInput(symbol) is-disabled=!$ctrl.orderProcessor.isStopOrderChecked market-type=A next-focus-elements=$ctrl.stopSymbolNextFocusElements> </stop-symbol-input> </div> <div class=stop-condition-wrapper> <label class=col-8>Cond.:</label> <index-dropdown class="col-15 form-input" ng-disabled=!$ctrl.orderProcessor.isStopOrderChecked dropdown-name=tfex-page-condition key-name=shortname model=$ctrl.orderProcessor.stopConditionList selected=$ctrl.orderProcessor.stopCondition on-update=$ctrl.onStopConditionChanged(model)> </index-dropdown> </div> <div class=stop-price-wrapper> <label class=col-8>Price:</label> <smart-price-input class=form-input id=tfex-page-cond-order-price name=tfex-page-cond-order-price price-digit=$ctrl.getStopOrderPriceDigit() can-negative=true input-price=$ctrl.orderProcessor.stopPrice placeholder="Stop Price" is-disabled=!$ctrl.orderProcessor.isStopOrderChecked side=$ctrl.orderProcessor.side next-focus-elements=$ctrl.stopPriceInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartStopPriceAction()}} analytics-action={{::$ctrl.getStopPriceAction()}} stock-data=$ctrl.orderProcessor.stopInstrumentStaticData> </smart-price-input> </div> </div> </div> <div class=section-4> <div class=left-form> <div class=price-type-wrapper> <label class=col-8>Type:</label> <index-dropdown class="col-15 form-input" dropdown-name=tfex-page-price-type key-name=fullname model=$ctrl.priceTypeList selected=$ctrl.orderProcessor.priceType on-update=$ctrl.onPriceTypeChanged(model)> </index-dropdown> </div> <div class=validity-type-wrapper> <label class=col-8>Validity:</label> <index-dropdown class="col-15 form-input" ng-disabled=!$ctrl.checkPriceTypeNotATO() dropdown-name=tfex-page-validity key-name=label model=$ctrl.validityList selected=$ctrl.orderProcessor.condition on-update=$ctrl.onValidityChanged(model)> </index-dropdown> </div> </div> <div class=right-form> <div class=iceberg-wrapper> <label class=col-9>Iceberg:</label> <smart-volume-input class="col-15 form-input" id=tfex-page-place-order-iceberg name=tfex-page-iceberg placeholder=Iceberg input-volume=$ctrl.orderProcessor.iceberg is-enable-volume-from-port=false market-type=D is-disabled=$ctrl.checkEnableIceberg() next-focus-elements=$ctrl.icebergVolumeInputNextFocusElements analytics-category={{::$ctrl.getPlaceOrderCategory()}} analytics-action-for-smart={{::$ctrl.getSmartIcebergAction()}}> </smart-volume-input> </div> <div class=validity-detail-wrapper> <date-input id=tfex-page-place-order-date class=form-input ng-if=$ctrl.isShowDateInput() date=$ctrl.orderProcessor.sessionDate is-open=$ctrl.datePickerConfig.open show-button-bar=$ctrl.datePickerConfig.showButtonBar popup-placement=$ctrl.datePickerConfig.popupPlacement datepicker-options=$ctrl.datePickerConfig.datepickerOptions append-to-body=$ctrl.datePickerConfig.appendToBody placeholder=dd/MM/yyyy open-calendar="$ctrl.openCalendar($event, \'datePickerConfig\')" next-focus-elements=$ctrl.dateInputNextFocusElements> </date-input> <time-input id=tfex-page-place-order-time class="col-11 form-input" ng-if=$ctrl.isShowTimeInput() time=$ctrl.orderProcessor.sessionTime show-seconds=$ctrl.timePickerConfig.showSeconds is-open=$ctrl.openTimePicker button-bar=$ctrl.timePickerConfig.buttonBar timepicker-options=$ctrl.timePickerConfig.timepickerOptions placeholder=HH:mm:ss next-focus-elements=$ctrl.timeInputNextFocusElements open-timepicker=$ctrl.openTimepicker()> </time-input> <div class="col-15 form-input"> <index-dropdown ng-if=$ctrl.checkValidityIsSession() ng-disabled=!$ctrl.checkPriceTypeNotATO() dropdown-name=tfex-page-session key-name=showMsg model=$ctrl.sessionList selected=$ctrl.orderProcessor.selectedSession on-update=$ctrl.onSelectedSessionChanged> </index-dropdown> </div> </div> </div> </div> <div class=section-5> <div class=left-form> <div class=pin-wrapper> <label class=col-8 ng-if=$ctrl.shouldShowPinInput()>PIN:</label> <pin-input class="col-15 form-input" pin=$ctrl.orderProcessor.pin placeholder=PIN id=tfex-page-place-order-pin is-show-save-pin=true next-focus-elements=$ctrl.pinNextFocusElement ng-if=$ctrl.shouldShowPinInput()> </pin-input> </div> </div> <div class=right-form> <div class=buttons-wrapper> <button class="nr-btn nr-btn-medium" data-ng-class=[$ctrl.orderProcessor.side.classname] id=tfex-page-place-order-submit name=tfex-page-submit type=button ng-click=$ctrl.submitOrder() ng-disabled=$ctrl.isLockPlaceOrder> <i ng-show=$ctrl.isRequesting class="fa fa-spinner fa-spin fa-fw"></i> <span ng-show=!$ctrl.isRequesting>{{$ctrl.submitLabel}}</span> </button> <button class="nr-btn nr-btn-medium" name=tfex-page-clear type=button ng-click=$ctrl.clearFormDataByClearBtn()>Clear</button> </div> </div> </div> <div class=section-6> <div class="left-form cancel-button-wrapper"> <button type=button class="multiple-cancel-order-button nr-btn nr-btn-extra-large" ng-click=$ctrl.orderProcessor.cancelMultipleOrders() ng-disabled=!$ctrl.isCanCancel id=tfex-page-multiple-cancel-order>Cancel {{$ctrl.getCheckedCancelOrders()}} Order(s) </button> </div> </div> </div>'},/*!****************************************!*\
  !*** ./html/tfex/tfex-mini-quote.html ***!
  \****************************************/
function(e,t){e.exports='<div class="overview component-seperator-right"> <mini-quote-symbol-info init-symbol=$ctrl.symbol overview=$ctrl.overview on-submit-symbol=$ctrl.onSubmitSymbol(newSymbol) id=tfex-mini-quote-symbol></mini-quote-symbol-info> <mini-quote-overview overview=$ctrl.overview dynamic-label-position=right></mini-quote-overview> </div> <div class="info component-seperator-top component-seperator-right"> <bid-offer class=col-48 bid-offer=$ctrl.bidOffer symbol-name=$ctrl.getSymbolName() analytics-category={{::$ctrl.getBidOfferCategory()}} is-enable-emit-best-bid-offer=true is-three-bids-offers=$ctrl.isThreeBidsOffers></bid-offer> <tfex-mini-quote-tabs class="col-59 row-17" page={{::$ctrl.page}}></tfex-mini-quote-tabs> </div>'},/*!*********************************************!*\
  !*** ./html/tfex/tfex-mini-quote-tabs.html ***!
  \*********************************************/
function(e,t){e.exports='<uib-tabset active=$ctrl.active> <uib-tab heading=Chart class="row-3 col-12 tab-chart" index=$ctrl.CHART_TAB_ID> <tfex-compare-chart-with-detail class="col-60 row-15" page={{::$ctrl.page}}></tfex-compare-chart-with-detail> </uib-tab> <uib-tab heading="Vol By Price" class="row-3 col-12 tab-volume-by-price" index=$ctrl.VOL_BY_PRICE_TAB_ID> <quote-toggle2 class=row-14 is-enable-vol-by-price-percent=true page={{::$ctrl.page}} last-page-id-store=$ctrl.tfexWatchStore.selectedVolByPriceTab ng-if="$ctrl.active == $ctrl.VOL_BY_PRICE_TAB_ID"> </quote-toggle2> </uib-tab> <uib-tab heading=Ticker class="row-3 col-12 tab-instrument-ticker" index=$ctrl.INSTRUMENT_TICKER_ID> <tfex-instrument-ticker page={{::$ctrl.page}} symbol=$ctrl.symbol></tfex-instrument-ticker> </uib-tab> </uib-tabset>'},/*!*******************************************************!*\
  !*** ./html/tfex/tfex-compare-chart-with-detail.html ***!
  \*******************************************************/
function(e,t){e.exports='<compare-chart class=col-39 page={{::$ctrl.page}}></compare-chart> <div class="compare-chart-detail col-21"> <div class=top-section> <ul class=main-symbol> <li class=name>{{$ctrl.detailView.mainSymbol.name}}</li> </ul> <ul class=main-symbol-detail> <li highlight-cell value=$ctrl.detailView.mainSymbol.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.detailView.mainSymbol.change, $ctrl.detailView.mainSymbol.previousClose, $ctrl.detailView.mainSymbol.totalVolume)" class=last> {{$ctrl.detailView.mainSymbol.lastDone | price: $ctrl.detailView.mainSymbol.priceDigit}} </li> <li highlight-cell value=$ctrl.detailView.mainSymbol.percentChange ng-class="$ctrl.colorService.changeColor($ctrl.detailView.mainSymbol.change, $ctrl.detailView.mainSymbol.previousClose, $ctrl.detailView.mainSymbol.totalVolume)" class=percent-change> {{$ctrl.detailView.mainSymbol.percentChange | nullablePercentChange: $ctrl.detailView.mainSymbol.priceDigit:$ctrl.detailView.mainSymbol.previousClose:$ctrl.detailView.mainSymbol.lastDone}} </li> </ul> <ul class="volume-detail dynamic-detail"> <li class=dynamic-label>{{$ctrl.detailView.volumeLabel}}</li> <li class=dynamic-value highlight-cell value=$ctrl.detailView.volume>{{$ctrl.detailView.volume | pov: 2}}</li> </ul> <ul class="value-detail dynamic-detail"> <li class=dynamic-label>{{$ctrl.detailView.dynamicLabel}}</li> <li class=dynamic-value highlight-cell value=$ctrl.detailView.dynamicValue>{{$ctrl.detailView.dynamicValue | pov: 2}}</li> </ul> </div> <div class=bottom-section> <div ng-if=$ctrl.detailView.hasUnderlying> <ul class=underlying-symbol> <li class=name>{{$ctrl.detailView.underlyingSymbol.name}}</li> </ul> <ul class=underlying-symbol-detail> <li highlight-cell value=$ctrl.detailView.underlyingSymbol.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.detailView.underlyingSymbol.change, $ctrl.detailView.underlyingSymbol.previousClose, $ctrl.detailView.underlyingSymbol.totalVolume)" class=last> {{$ctrl.detailView.underlyingSymbol.lastDone | price: $ctrl.detailView.underlyingSymbol.priceDigit}} </li> <li highlight-cell value=$ctrl.detailView.underlyingSymbol.percentChange ng-class="$ctrl.colorService.changeColor($ctrl.detailView.underlyingSymbol.change, $ctrl.detailView.underlyingSymbol.previousClose, $ctrl.detailView.underlyingSymbol.totalVolume)" class=percent-change> {{$ctrl.detailView.underlyingSymbol.percentChange | nullablePercentChange: $ctrl.detailView.underlyingSymbol.priceDigit:$ctrl.detailView.underlyingSymbol.previousClose:$ctrl.detailView.underlyingSymbol.lastDone}} </li> </ul> </div> <div ng-if=$ctrl.currentSymbol.isOptions()> <ul class=underlying-symbol> <li class=name>{{$ctrl.detailView.set50Symbol.name}}</li> </ul> <ul class=underlying-symbol-detail> <li highlight-cell value=$ctrl.detailView.set50Symbol.lastDone ng-class="$ctrl.colorService.changeColor($ctrl.detailView.set50Symbol.change, $ctrl.detailView.set50Symbol.previousClose, $ctrl.detailView.set50Symbol.totalVolume)" class=last> {{$ctrl.detailView.set50Symbol.lastDone | price: $ctrl.detailView.set50Symbol.priceDigit}} </li> <li highlight-cell value=$ctrl.detailView.set50Symbol.percentChange ng-class="$ctrl.colorService.changeColor($ctrl.detailView.set50Symbol.change, $ctrl.detailView.set50Symbol.previousClose, $ctrl.detailView.set50Symbol.totalVolume)" class=percent-change> {{$ctrl.detailView.set50Symbol.percentChange | nullablePercentChange: $ctrl.detailView.set50Symbol.priceDigit:$ctrl.detailView.set50Symbol.previousClose:$ctrl.detailView.set50Symbol.lastDone}} </li> </ul> </div> </div> </div>'},/*!**************************************!*\
  !*** ./html/tfex/compare-chart.html ***!
  \**************************************/
function(e,t){e.exports=""},/*!***************************************************!*\
  !*** ./html/tfex/tfex-instrument-ticker-row.html ***!
  \***************************************************/
function(e,t){e.exports='<li class=date>{{ $ctrl.ticker.time }}</li> <li class=side>{{ $ctrl.ticker.summary.side.shortname }}</li> <li class=volume>{{ $ctrl.ticker.volume | volume}}</li> <li class=price>{{ $ctrl.ticker.price | price: $ctrl.ticker.priceDigit }}</li> <li class=change-value> {{ $ctrl.ticker.change | nanableChangeByTrend: $ctrl.ticker.priceDigit:$ctrl.ticker.summary.trend }} </li> <li class=percent-change-value> {{ $ctrl.ticker.pchange | nanablePercentChangeByTrend: $ctrl.ticker.priceDigit:$ctrl.ticker.summary.trend }} </li> <li class=change> <i class="fa trend"></i> </li>'},/*!***********************************************!*\
  !*** ./html/tfex/tfex-instrument-ticker.html ***!
  \***********************************************/
function(e,t){e.exports="<tfex-instrument-ticker-row ticker=$ctrl.tickers[0] id=tfex-instrument-ticker-0></tfex-instrument-ticker-row> <tfex-instrument-ticker-row ticker=$ctrl.tickers[1] id=tfex-instrument-ticker-1></tfex-instrument-ticker-row> <tfex-instrument-ticker-row ticker=$ctrl.tickers[2] id=tfex-instrument-ticker-2></tfex-instrument-ticker-row> <tfex-instrument-ticker-row ticker=$ctrl.tickers[3] id=tfex-instrument-ticker-3></tfex-instrument-ticker-row> <tfex-instrument-ticker-row ticker=$ctrl.tickers[4] id=tfex-instrument-ticker-4></tfex-instrument-ticker-row>"},/*!****************************************!*\
  !*** ./html/tfex/tfex-payoff-row.html ***!
  \****************************************/
function(e,t){e.exports="<tfex-payoff-row-view data=$ctrl.data ng-if=::!$ctrl.data.isAddRow ng-click=$ctrl.onClickRow()></tfex-payoff-row-view> <tfex-payoff-row-add data=$ctrl.data ng-if=::$ctrl.data.isAddRow></tfex-payoff-row-add> "},/*!*********************************************!*\
  !*** ./html/tfex/tfex-payoff-row-view.html ***!
  \*********************************************/
function(e,t){e.exports='<div ng-if=!$ctrl.data.isShowRowEdit> <li class="col-4 check-box"> <span class="checkOrder check-payoff-list"> <input type=checkbox value=None id=tfex-payoff-data-checkbox-{{$ctrl.data.index}} name=check-payoff ng-checked=$ctrl.data.isChecked ng-click=$ctrl.changeChecked() /> <label for=tfex-payoff-data-checkbox-{{$ctrl.data.index}}><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-22 symbol">{{$ctrl.data.symbol}}</li> <li class="col-12 type">{{$ctrl.data.type}}</li> <li class="col-14 position">{{$ctrl.data.position.name}}</li> <li class="col-12 side" ng-class=$ctrl.data.side.classname>{{$ctrl.data.side.derivName}}</li> <li class="col-12 volume text-unchanged-volume">{{$ctrl.data.volume}}</li> <li class="col-16 cost" ng-if=$ctrl.tfexPayoffStore.isShowCost()>{{$ctrl.data.cost}}</li> <li class="col-16 settle" ng-if=$ctrl.tfexPayoffStore.isShowSettle()>{{$ctrl.data.settle}}</li> <li class="col-6 edit" ng-if=$ctrl.isSimulated() ng-click=$ctrl.onClickEdit($event)>Edit</li> <li class="col-7 delete" ng-if=$ctrl.isSimulated() ng-click=$ctrl.onClickDelete($event)>Delete</li> </div> <tfex-payoff-row-edit data=$ctrl.data ng-if=$ctrl.data.isShowRowEdit on-click-cancel=$ctrl.hideRowEdit() on-click-ok=$ctrl.onUserConfirmEdit(updateData)></tfex-payoff-row-edit>'},/*!************************************!*\
  !*** ./html/tfex/tfex-payoff.html ***!
  \************************************/
function(e,t){e.exports='<div class="row-5 mode-selector"> <div class="col-31 underlying-selector"> <div class="col-11 underlying-label"> Underlying: </div> <index-dropdown class=col-19 model=$ctrl.tfexPayoffStore.underlyingDropdownList selected=$ctrl.tfexPayoffStore.selectedUnderlyingDropdown key-name=name dropdown-name=tfex-payoff-underlying on-selected=$ctrl.onUnderlyingChange(model) ng-disabled=$ctrl.isEmptyOrUnauthorizedAccount> </index-dropdown> </div> <div class="col-58 strategy-selector"> <div class="col-9 strategy-label"> Strategy: </div> <payoff-strategy-dropdown class=col-37 model=$ctrl.tfexPayoffStore.strategyDropdownList selected=$ctrl.tfexPayoffStore.selectedStrategyDropdown key-name=displayName dropdown-name=tfex-payoff-strategy on-selected=$ctrl.onStrategyChange(model) ng-disabled=$ctrl.isEmptyOrUnauthorizedAccount> </payoff-strategy-dropdown> <button ng-disabled="$ctrl.isEmptyOrUnauthorizedAccount || $ctrl.isSelectedStrategyEmpty()" class="payoff-load-button nr-btn nr-btn-xs" type=button ng-click=$ctrl.onClickLoadStrategy()>Load</button> <button ng-disabled=$ctrl.isEmptyOrUnauthorizedAccount class="payoff-save-button nr-btn nr-btn-xs" type=button ng-click=$ctrl.onClickSaveStrategy()>Save</button> </div> <div class="col-10 buttons-wrapper"> <button class="payoff-refresh-button nr-btn nr-btn-extra-medium" type=button ng-click=$ctrl.onRefresh()><i class="fa fa-refresh"></i> Refresh</button> </div> </div> <div class=payoff-chart-table> <ul class="header text-data-topic bg-header"> <li class="col-4 check-box"> <span class="checkOrder check-all-payoff-list"> <input type=checkbox value=None id=check-all-payoff-list-input name=check ng-checked=$ctrl.isCheckedAllPayoff() ng-click=$ctrl.toggleCheckAll() /> <label for=check-all-payoff-list-input><i class="mdi mdi-check"></i></label> </span> </li> <li class="col-22 symbol"> Symbol </li> <li class="col-12 type"> Type </li> <li class="col-14 position"> Position </li> <li class="col-12 side"> Side </li> <li class="col-12 volume"> Volume </li> <li class="col-16 cost" ng-if="$ctrl.isToggleColumn(\'cost\')" ng-click=$ctrl.toggleColumn()> Cost </li> <li class="col-16 settle" ng-if="$ctrl.isToggleColumn(\'settle\')" ng-click=$ctrl.toggleColumn()> Settle </li> </ul> <div up-down-select-table data=$ctrl.tfexPayoffStore.currentList property-key-name=index> <ul class=scroll-container vs-repeat vs-autoresize vs-auto-element-resize ng-class=$ctrl.getListClassToControlHeight()> <li ng-repeat="payoffRowData in $ctrl.tfexPayoffStore.currentList track by $ctrl.genKey(payoffRowData.index)"> <tfex-payoff-row name=tfex-payoff-row-{{payoffRowData.index}} data=payoffRowData class=table-color-hover ng-click=$ctrl.selectedRow(payoffRowData.index) ng-class="{\'table-color-select\': $ctrl.isSelectedRow(payoffRowData.index)}"> </tfex-payoff-row> </li> </ul> </div> </div> <div class="row-5 payoff-chart-function-selector"> <div class="col-48 save-load-wrapper"></div> <div class="col-59 button-wrapper"> <button class="col-13 nr-btn btn-block" id=tfex-draw-payoff name=tfex-draw-payoff type=button ng-click=$ctrl.requestChart() ng-disabled=!$ctrl.tfexPayoffStore.isEnableDrawChart> Draw Payoff </button> </div> </div> <tfex-payoff-chart class="row-39 col-71" page={{::$ctrl.page}}></tfex-payoff-chart> <tfex-payoff-detail class="row-39 col-36 payoff-chart-with-detail" page={{::$ctrl.page}}></tfex-payoff-detail>'},/*!******************************************!*\
  !*** ./html/tfex/tfex-payoff-chart.html ***!
  \******************************************/
function(e,t){e.exports=' <div class=chart-container> <div class=chart-title> <span>Payoff (THB) <i class="mdi mdi-information-outline" uib-popover-template="\'payoff-chart-popover-template.html\'" popover-placement=top-left popover-trigger=mouseenter popover-append-to-body=true popover-class="mi6-info-popover tfex-payoff-chart-info-popover"></i></span> </div> <script type=text/ng-template id=payoff-chart-popover-template.html> <div>\n            <label>Payoff Calculation Logics:</label>\n            <ul><li class="col-10">Long Futures</li><li class="col-2"> = </li><li>Underlying - (Cost or Settle) - 1st step Comm. (Incl. VAT)</li></ul>\n            <ul><li class="col-10">Short Futures</li><li class="col-2"> = </li><li>(Cost or Settle) - Underlying - 1st step Comm. (Incl. VAT)</li></ul>\n            <ul><li class="col-10">Long Call</li><li class="col-2"> = </li><li>Max[(Underlying - Strike) , 0] - Premium - 1st step Comm. (Incl. VAT)</li></ul>\n            <ul><li class="col-10">Short Call</li><li class="col-2"> = </li><li>Premium - Max[(Underlying - Strike) , 0] - 1st step Comm. (Incl. VAT)</li></ul>\n            <ul><li class="col-10">Long Put</li><li class="col-2"> = </li><li>Max[(Strike - Underlying) , 0] - Premium - 1st step Comm. (Incl. VAT)</li></ul>\n            <ul><li class="col-10">Short Put</li><li class="col-2"> = </li><li>Premium - Max[(Strike - Underlying ) , 0] - 1st step Comm. (Incl. VAT)</li></ul>\n        </div> </script> <div class="chart-element row-35"></div> <div ng-if=$ctrl.isShowNoData class=no-data> <div>No data to display</div> </div> </div> '},/*!*******************************************!*\
  !*** ./html/tfex/tfex-payoff-detail.html ***!
  \*******************************************/
function(e,t){e.exports='<div class="detail-row maximum-profit"> <div class="detail-label text-default"> Maximum Profit </div> <div class=detail-value ng-class=$ctrl.data.maxProfitColor> {{$ctrl.data.maxProfit}} </div> </div> <div class="detail-row maximum-loss"> <div class="detail-label text-default"> Maximum Loss </div> <div class=detail-value ng-class=$ctrl.data.maxLossColor> {{$ctrl.data.maxLoss}} </div> </div> <div class="detail-row percent-maximum-profit"> <div class="detail-label text-default"> %Max Profit of Total Cost </div> <div class=detail-value ng-class=$ctrl.data.percentMaxProfitColor> {{$ctrl.data.percentMaxProfit}} </div> </div> <div class="detail-row percent-maximum-loss"> <div class="detail-label text-default"> %Max Loss of Total Cost </div> <div class=detail-value ng-class=$ctrl.data.percentMaxLossColor> {{$ctrl.data.percentMaxLoss}} </div> </div> <div class="detail-row total-cost"> <div class="detail-label text-default"> Total Cost </div> <div class=detail-value> {{$ctrl.data.totalCost}} </div> </div> <div class="detail-row total-margin"> <div class="detail-label text-default"> Total Margin </div> <div class=detail-value> {{$ctrl.data.totalMargin}} </div> </div> <div class="detail-row premium-to-pay"> <div class="detail-label text-default"> Options Paid(+)/Received(-) </div> <div class=detail-value> {{$ctrl.data.premiumToPay}} </div> </div> <div class="detail-row comm"> <div class="detail-label text-default"> 1st Step Comm.(Incl. VAT) </div> <div class=detail-value> {{$ctrl.data.commission}} </div> </div> <div class="detail-row break-even"> <div class="detail-label text-default"> Break Even: </div> <div class="detail-value text-default" uib-tooltip={{$ctrl.data.breakEven}} tooltip-placement=right tooltip-append-to-body=true tooltip-enable={{$ctrl.isMustShowTooltipOfBreakEven()}}> {{$ctrl.data.breakEven | elipsis: 31}} </div> </div> <div class="detail-row current-ee"> <div class="detail-label text-default"> Current EE </div> <div class=detail-value> {{$ctrl.data.currentEE}} </div> </div> <div class="detail-row req-ee"> <div class="detail-label text-default"> Required EE for Simulated </div> <div class=detail-value> {{$ctrl.data.requiredEE}} </div> </div>'},/*!********************************************!*\
  !*** ./html/tfex/tfex-payoff-row-add.html ***!
  \********************************************/
function(e,t){e.exports=" <div class=add-button ng-if=!$ctrl.data.isShowRowEdit> <button class=nr-btn aria-hidden=true ng-click=$ctrl.showRowEdit()>+ Add Simulated Position</button> </div> <tfex-payoff-row-edit data=$ctrl.data ng-if=$ctrl.data.isShowRowEdit on-click-cancel=$ctrl.hideRowEdit() on-click-ok=$ctrl.onUserConfirmAdd(updateData)></tfex-payoff-row-edit> "},/*!*********************************************!*\
  !*** ./html/tfex/tfex-payoff-row-edit.html ***!
  \*********************************************/
function(e,t){e.exports='<li class="col-22 symbol"> <underlying-symbol-input id=tfex-payoff-row-edit-symbol symbol=$ctrl.symbol placeholder=Symbol on-validated-symbol=$ctrl.onValidatedSymbol(instrument) on-input-symbol-change=$ctrl.onSymbolInputUpdate(inputStr) market-type=D on-blur=$ctrl.onBlurSymbolInput(symbol) next-focus-elements=$ctrl.symbolInputNextFocusElements> </underlying-symbol-input> </li> <li class="col-12 type">{{$ctrl.type}}</li> <li class="col-14 position"> <index-dropdown class="col-10 form-input" dropdown-name=tfex-payoff-row-edit-order-position key-name=name model=$ctrl.positionList selected=$ctrl.position> </index-dropdown> </li> <li class="col-12 side"> <index-dropdown class="col-10 form-input" dropdown-name=tfex-payoff-row-edit-order-side key-name=derivName model=$ctrl.sideList selected=$ctrl.side> </index-dropdown> </li> <li class="col-12 volume"> <smart-volume-input class=row-3 id=tfex-payoff-row-edit-volume name=tfex-payoff-row-edit-volume placeholder=Volume input-volume=$ctrl.volume market-type=D next-focus-elements=$ctrl.volumeInputNextFocusElements> </smart-volume-input> </li> <li class="col-16 price"> <smart-price-input class=row-3 id=tfex-payoff-row-edit-price price-digit=$ctrl.getPriceDigit() side=$ctrl.side can-negative=true input-price=$ctrl.currentPrice placeholder=Price next-focus-elements=$ctrl.priceInputNextFocusElements stock-data=$ctrl.instrumentStaticData> </smart-price-input> </li> <li class="col-5 ok"> <button class="nr-btn nr-btn-xs ok-button" type=button ng-click=$ctrl.clickOk($event)> OK </button> </li> <li class="col-7 cancel"> <button class="nr-btn nr-btn-small cancel-button" type=button ng-click=$ctrl.clickCancel($event)> Cancel </button> </li>'},/*!*************************************************************!*\
  !*** ./html/tfex/options-summary/tfex-options-summary.html ***!
  \*************************************************************/
function(e,t){e.exports='<div class=component-seperator-bottom ng-class=$ctrl.getDisplaySizeClassToControlHeight()> <tfex-options-summary-form page={{::$ctrl.page}}></tfex-options-summary-form> <tfex-page-left-content-options-summary-tabs page={{::$ctrl.page}} class="col-108 component-seperator-right"></tfex-page-left-content-options-summary-tabs> </div> <div class="options-overview-wrapper component-seperator-bottom"> <tfex-options-overview id=set50-overview class=underlying-overview page={{::$ctrl.page}} symbol=.SET50></tfex-options-overview> <tfex-options-overview class="component-seperator-left futures-overview" page={{::$ctrl.page}} symbol={{$ctrl.optionsSummaryAppliedConditionChangeEvent.lastApplied.selectedDateItem.underlyingSeries}}></tfex-options-overview> </div> <tfex-mini-quote id=options-summary-mini-quote class=row-26 page={{::$ctrl.page}}></tfex-mini-quote>'},/*!******************************************************************!*\
  !*** ./html/tfex/options-summary/tfex-options-summary-form.html ***!
  \******************************************************************/
function(e,t){e.exports='<div class=tfex-options-summary-form> <div class="left-col col-52"> <div> <label class=col-10>Month:</label> <index-dropdown class="col-11 form-input" dropdown-name=tfex-options-summary-month key-name=date model=$ctrl.optionsSummaryStore.dateItems selected=$ctrl.optionsSummaryStore.conditions.selectedDateItem on-selected=$ctrl.onChangeExpireMonth(model)> </index-dropdown> <div id=last-trade-date-label name=last-trading-date class="col-29 last-trading-date-label"> LTD: <span id=last-trade-date-span class=yellow> {{ $ctrl.optionsSummaryStore.conditions.selectedDateItem.lastTradingDate }} </span> </div> </div> <div> <label class=col-10>Spot price:</label> <span class="col-2 radio-button"> <input type=radio name=spot-price-set50-btn id=spot-price-set50-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.spotPrice.selectedRadio value={{::$ctrl.DEFAULT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <label class=col-11 for=spot-price-set50-btn>SET50 Index</label> <span class="col-2 radio-button"> <input type=radio name=spot-price-set50-btn id=spot-price-textfield-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.spotPrice.selectedRadio value={{::$ctrl.EDIT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <tfex-options-summary-condition-edit-input input-id=spot-price-textfield class=col-8 current-mode=$ctrl.optionsSummaryStore.conditions.spotPrice.selectedRadio value=$ctrl.optionsSummaryStore.conditions.spotPrice.currentValueByMode price-digit=2 can-negative=false on-value-change=$ctrl.optionsSummaryStore.resetAppliedState() is-disabled=$ctrl.optionsSummaryStore.conditions.spotPrice.isDefaultMode()> </tfex-options-summary-condition-edit-input> </div> <div> <label class=col-10>Volatility:</label> <span class="col-2 radio-button"> <input type=radio name=volatility-radio-btn id=volatility-historical-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.volatility.selectedRadio value={{::$ctrl.HISTORY_VOLATILITY_RADIO_TYPE}} ng-change=$ctrl.onChangeModeVolatility()>  <div class=check></div> </span> <label class=col-11 for=volatility-historical-btn>Historical</label> <span class="col-2 radio-button"> <input type=radio name=volatility-radio-btn id=volatility-textfield-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.volatility.selectedRadio value={{::$ctrl.EDIT_VOLATILITY_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <tfex-options-summary-condition-edit-input input-id=volatility-textfield class=col-8 current-mode=$ctrl.optionsSummaryStore.conditions.volatility.selectedRadio value=$ctrl.optionsSummaryStore.conditions.volatility.currentValueByMode price-digit=2 can-negative=false on-value-change=$ctrl.optionsSummaryStore.resetAppliedState() is-disabled="$ctrl.optionsSummaryStore.conditions.volatility.isHistoricalMode() || $ctrl.optionsSummaryStore.conditions.volatility.isImpliedMode()"> </tfex-options-summary-condition-edit-input><span class=unit>%</span> </div> </div> <div class="right-col col-53 component-seperator-left"> <div> <label class=col-16>Remaining Day(s):</label> <span class="col-2 radio-button"> <input type=radio name=remaining-radio-btn id=until-exp-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.remainingDays.selectedRadio value={{::$ctrl.DEFAULT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <label class=col-11 for=until-exp-btn>Until Exp.</label> <span class="col-2 radio-button"> <input type=radio name=remaining-radio-btn id=remaining-day-textfield-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.remainingDays.selectedRadio value={{::$ctrl.EDIT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <tfex-options-summary-condition-edit-input input-id=remaining-day-textfield class=col-8 current-mode=$ctrl.optionsSummaryStore.conditions.remainingDays.selectedRadio value=$ctrl.optionsSummaryStore.conditions.remainingDays.currentValueByMode price-digit=0 can-negative=false on-value-change=$ctrl.optionsSummaryStore.resetAppliedState() is-disabled=$ctrl.optionsSummaryStore.conditions.remainingDays.isDefaultMode()> </tfex-options-summary-condition-edit-input><span class=unit>Day(s)</span> </div> <div> <label class=col-16>Interest Rate:</label> <span class="col-2 radio-button"> <input type=radio name=interest-rate-radio-btn id=interest-rate-default-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.interestRate.selectedRadio value={{::$ctrl.DEFAULT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <label class=col-11 for=interest-rate-default-btn>Default</label> <span class="col-2 radio-button"> <input type=radio name=interest-rate-radio-btn id=interest-rate-textfield-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.interestRate.selectedRadio value={{::$ctrl.EDIT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <tfex-options-summary-condition-edit-input input-id=interest-rate-textfield class=col-8 current-mode=$ctrl.optionsSummaryStore.conditions.interestRate.selectedRadio value=$ctrl.optionsSummaryStore.conditions.interestRate.currentValueByMode price-digit=2 can-negative=false on-value-change=$ctrl.optionsSummaryStore.resetAppliedState() is-disabled=$ctrl.optionsSummaryStore.conditions.interestRate.isDefaultMode()> </tfex-options-summary-condition-edit-input><span class=unit>%</span> </div> <div> <label class=col-16>Dividend Yield:</label> <span class="col-2 radio-button"> <input type=radio name=dividend-yield-radio-btn id=dividend-yield-default-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.dividendYield.selectedRadio value={{::$ctrl.DEFAULT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <label class=col-11 for=dividend-yield-default-btn>Default</label> <span class="col-2 radio-button"> <input type=radio name=dividend-yield-radio-btn id=dividend-yield-textfield-btn class=col-3 ng-model=$ctrl.optionsSummaryConditions.dividendYield.selectedRadio value={{::$ctrl.EDIT_RADIO_TYPE}} ng-change=$ctrl.optionsSummaryStore.resetAppliedState()>  <div class=check></div> </span> <tfex-options-summary-condition-edit-input input-id=dividend-yield-textfield class=col-8 current-mode=$ctrl.optionsSummaryStore.conditions.dividendYield.selectedRadio value=$ctrl.optionsSummaryStore.conditions.dividendYield.currentValueByMode price-digit=2 can-negative=false on-value-change="$ctrl.optionsSummaryStore.resetAppliedState()  " is-disabled=$ctrl.optionsSummaryStore.conditions.dividendYield.isDefaultMode()> </tfex-options-summary-condition-edit-input><span class=unit>%</span> </div> </div> <div class=col-106> <button class="nr-btn col-15" type=button id=tfex-options-summary-apply-button ng-disabled=$ctrl.optionsSummaryStore.isApplied ng-click=$ctrl.onClickApplyButton()> Apply </button> <label id=greeksum-last-update>Last update {{$ctrl.lastUpdateTableTimestamp}}</label> </div> </div>'},/*!***********************************************************!*\
  !*** ./html/tfex/options-summary/tfex-greek-summary.html ***!
  \***********************************************************/
function(e,t){e.exports='<div class="by-price options-table-header text-data-topic"> <div class=call-options> <ul>CALL</ul> <hr/> <ul class="header call"> <li class=toggle-column-1><header-toggle-dropdown model=$ctrl.toggleCallList selected=$ctrl.toggleColumnCall1 on-selected=$ctrl.onChangedToggleColumnCall1(model) key-name=displayName></header-toggle-dropdown></li> <li class=toggle-column-2><header-toggle-dropdown model=$ctrl.toggleCallList selected=$ctrl.toggleColumnCall2 on-selected=$ctrl.onChangedToggleColumnCall2(model) key-name=displayName></header-toggle-dropdown></li> <li class=vol-bid>Vol B</li> <li class=bid>Bid</li> <li class=offer>Offer</li> <li class=vol-offer>Vol O</li> </ul> </div> <div class="strike-price white"><span class=strike-top-label>Strike</span><span class=price-bottom-label>Price</span></div> <div class=put-options> <ul>PUT</ul> <hr/> <ul class="header put"> <li class=vol-bid>Vol B</li> <li class=bid>Bid</li> <li class=offer>Offer</li> <li class=vol-offer>Vol O</li> <li class=toggle-column-1><header-toggle-dropdown model=$ctrl.togglePutList selected=$ctrl.toggleColumnPut1 on-selected=$ctrl.onChangedToggleColumnPut1(model) key-name=displayName></header-toggle-dropdown></li> <li class=toggle-column-2><header-toggle-dropdown model=$ctrl.togglePutList selected=$ctrl.toggleColumnPut2 on-selected=$ctrl.onChangedToggleColumnPut2(model) key-name=displayName></header-toggle-dropdown></li> </ul> </div> </div> <div class=scroll-container ng-class=$ctrl.getListClassToControlHeight()> <tfex-greek-summary-row ng-repeat="rowView in $ctrl.tableData track by $index" data=rowView class="table-color-hover no-newline" ng-class="{\'atm\':rowView.isATM, \'table-color-select\': $index === $ctrl.selectedIndex}" ng-click=$ctrl.onClickRow($index) id=greek-summary-row-{{::$index}} dynamic-column1-put=$ctrl.toggleColumnPut1 dynamic-column2-put=$ctrl.toggleColumnPut2 dynamic-column1-call=$ctrl.toggleColumnCall1 dynamic-column2-call=$ctrl.toggleColumnCall2> </tfex-greek-summary-row> </div> <div ng-if=$ctrl.isShowLoading class=middle> <div> <i class="fa-2 fa fa-spinner fa-spin" aria-hidden=true></i> </div> </div> '},/*!************************************************************************************!*\
  !*** ./html/tfex/options-summary/tfex-page-left-content-options-summary-tabs.html ***!
  \************************************************************************************/
function(e,t){e.exports='<uib-tabset> <uib-tab heading="Greek Summary" name=normal-order-tab class="row-3 col-15" index=$ctrl.GREEK_SUMMARY_TAB_ID> <tfex-greek-summary id=tfex-greek-summary page={{::$ctrl.page}} ng-if=$ctrl.isActive($ctrl.GREEK_SUMMARY_TAB_ID)></tfex-greek-summary> </uib-tab> <button id=tfex-options-summary-refresh-button class="nr-btn nr-btn-large options-summary-refresh-button" name=refresh type=button ng-click=$ctrl.onClickRefresh() ng-disabled=!$ctrl.optionsSummaryStore.isApplied> <span><i class="fa fa-refresh"></i> Refresh</span> </button> </uib-tabset>'},/*!****************************************************************!*\
  !*** ./html/tfex/options-summary/tfex-greek-summary-call.html ***!
  \****************************************************************/
function(e,t){e.exports='<ul class=no-newline ng-click=$ctrl.onClickOptionsRow()> <li class=toggle-column-1 ng-class=$ctrl.data[$ctrl.dynamicColumn1.key].color>{{ $ctrl.data[$ctrl.dynamicColumn1.key].displayValue }} </li> <li class=toggle-column-2 ng-class=$ctrl.data[$ctrl.dynamicColumn2.key].color>{{ $ctrl.data[$ctrl.dynamicColumn2.key].displayValue }}</li> <li class="vol-bid text-unchanged-volume">{{$ctrl.data.volumeBid.displayValue}}</li> <li class=bid ng-class=$ctrl.data.bid.color> <a href="" ng-click=$ctrl.emitBestBidWithSideSellEvent($event)>{{ $ctrl.data.bid.displayValue }}</a> </li> <li class=offer ng-class=$ctrl.data.offer.color> <a href="" ng-click=$ctrl.emitBestOfferWithSideBuyEvent($event)>{{$ctrl.data.offer.displayValue }}</a> </li> <li class="vol-offer text-unchanged-volume" ng-class=$ctrl.data.volumeOffer.color>{{$ctrl.data.volumeOffer.displayValue}}</li> </ul>'},/*!***************************************************************!*\
  !*** ./html/tfex/options-summary/tfex-greek-summary-put.html ***!
  \***************************************************************/
function(e,t){e.exports='<ul ng-click=$ctrl.onClickOptionsRow()> <li class="vol-bid text-unchanged-volume" ng-class=$ctrl.data.volumeBid.color>{{$ctrl.data.volumeBid.displayValue }}</li> <li class=bid ng-class=$ctrl.data.bid.color> <a href="" ng-click=$ctrl.emitBestBidWithSideSellEvent($event)>{{$ctrl.data.bid.displayValue }}</a> </li> <li class=offer ng-class=$ctrl.data.offer.color> <a href="" ng-click=$ctrl.emitBestOfferWithSideBuyEvent($event)>{{$ctrl.data.offer.displayValue }}</a> </li> <li class="vol-offer text-unchanged-volume" ng-class=$ctrl.data.volumeOffer.color>{{ $ctrl.data.volumeOffer.displayValue }}</li> <li class=toggle-column-1 ng-class=$ctrl.data[$ctrl.dynamicColumn1.key].color>{{ $ctrl.data[$ctrl.dynamicColumn1.key].displayValue }}</li> <li class=toggle-column-2 ng-class=$ctrl.data[$ctrl.dynamicColumn2.key].color>{{ $ctrl.data[$ctrl.dynamicColumn2.key].displayValue }} </li> </ul>'},/*!***************************************************************!*\
  !*** ./html/tfex/options-summary/tfex-greek-summary-row.html ***!
  \***************************************************************/
function(e,t){e.exports="<tfex-greek-summary-call class=call series-id=$ctrl.data.instrumentID data=$ctrl.data.call dynamic-column1=$ctrl.dynamicColumn1Call dynamic-column2=$ctrl.dynamicColumn2Call ng-class=\"{'itm':$ctrl.isInTheMoneyCall()}\"></tfex-greek-summary-call> <div class=strike-price highlight-cell value=$ctrl.data.formattedStrikePrice>{{ $ctrl.data.formattedStrikePrice}}</div> <tfex-greek-summary-put class=put series-id=$ctrl.data.put.instrumentID ng-class=\"{'itm':$ctrl.isInTheMoneyPut()}\" data=$ctrl.data.put dynamic-column1=$ctrl.dynamicColumn1Put dynamic-column2=$ctrl.dynamicColumn2Put></tfex-greek-summary-put>"},/*!***************************************************************!*\
  !*** ./html/tfex/options-summary/header-toggle-dropdown.html ***!
  \***************************************************************/
function(e,t){e.exports='<li id=dLabel class=wrapper-dropdown ng-click=$ctrl.toggleDropdown()> <div class=inner-wrapper-dropdown> <span class="selected-index-text no-newline">{{$ctrl.selected[$ctrl.keyName]}}</span> <div class=dropdown-list-wrapper id=dropdown-list ng-if=$ctrl.isShowDropdownList> <div class=dropdown-list> <div ng-repeat="data in $ctrl.model" ng-click=$ctrl.menuSelected(data) id=dropdown-{{$index}} class="dropdown-item table-color-hover" ng-class="{\'active\': $ctrl.selected[$ctrl.keyName] === data[$ctrl.keyName], \'hover\': $ctrl.hover[$ctrl.keyName] === data[$ctrl.keyName]}"> <a><span>{{data[$ctrl.keyName]}}</span></a> </div> </div> </div> </div> </li> '},/*!**********************************************************************************!*\
  !*** ./html/tfex/options-summary/tfex-options-summary-condition-edit-input.html ***!
  \**********************************************************************************/
function(e,t){e.exports="<input type=text id={{::$ctrl.inputId}} ng-model=$ctrl.value ng-disabled=$ctrl.isDisabled ng-blur=$ctrl.onBlur() ng-mousedown=$ctrl.onMousedown()> "},/*!*******************************!*\
  !*** ./html/jitta/jitta.html ***!
  \*******************************/
function(e,t){e.exports='<iframe name=frame id=jittaIframe class="" style=overflow:hidden;width:100%;height:99%;border:0></iframe>'},/*!********************************************************************!*\
  !*** ./html/dgw-conditional-order/dgw-conditional-order-page.html ***!
  \********************************************************************/
function(e,t){e.exports='<div ng-if=$ctrl.isActive> <div class=disclaimer ng-if=$ctrl.isShowDisclaimer()> <iframe name=frame id=dgw-condition-disclaimer-iframe ng-src={{$ctrl.disclaimerURL}} mi6-iframe mi6-iframe-onconfirmed=$ctrl.onAcceptDisclaimer() mi6-iframe-onclose=$ctrl.onCancelDisclaimer()> </iframe> </div> <div ng-if=$ctrl.isShowDgwConditionOrder()> <dgw-conditional-order ng-if=$ctrl.isAllowCurrentAccount() page={{::$ctrl.page}}></dgw-conditional-order> </div> <div class="error-message-container row-53" ng-if=$ctrl.errorMessage> <span>{{$ctrl.errorMessage}}</span> </div> </div>'},/*!***************************************************************!*\
  !*** ./html/dgw-conditional-order/dgw-conditional-order.html ***!
  \***************************************************************/
function(e,t){e.exports='<div class="dgw-column component-seperator-right"> <div class=dgw-container> <div class=order-mode id=stop-mode-button ng-click="$ctrl.onClickOrderMode(\'S\')"> <div class="image stop-order" ng-class="{\'active\': $ctrl.store.isStopOrder}"> </div> <label ng-class="{\'active\': $ctrl.store.isStopOrder}"> STOP ORDER </label> </div> <div class=order-mode id=trailing-mode-button ng-click="$ctrl.onClickOrderMode(\'T\')"> <div class="image trailing-stop" ng-class="{\'active\': !$ctrl.store.isStopOrder}"> </div> <label ng-class="{\'active\': !$ctrl.store.isStopOrder}"> TRAILING STOP </label> </div> </div> <div class=dgw-container> <div id=toggle-side-section class=toggle-button ng-class="{\n                \'buy\': $ctrl.store.side.isBuy(),\n                \'sell\': $ctrl.store.side.isSell()\n            }"> <button type=button class=buy id=buy-button ng-class="{ \'active\': $ctrl.store.side.isBuy() }" ng-click="$ctrl.onSideChange(\'B\')"> Buy </button> <button type=button class=sell id=sell-button ng-class="{ \'active\': $ctrl.store.side.isSell() }" ng-click="$ctrl.onSideChange(\'S\')"> Sell </button> </div> </div> <div ng-class=$ctrl.colorService.getChangeColor($ctrl.store.miniQuote)> <div class=dgw-container> <dgw-condition-quote-symbol-input allow-index-list=[] edit-on-click=true placeholder=Symbol init-symbol=$ctrl.store.symbol.name id=dgw-conditional-symbol on-validated-symbol=$ctrl.onSubmitSymbol(instrument)> </dgw-condition-quote-symbol-input> </div> <div id=company-description class=flex-container> <div id=company-name class=flex-grow-2 ng-bind=$ctrl.store.miniQuote.companyDescription> </div> <div id=market-value class=price ng-bind="$ctrl.store.miniQuote.lastDone | price:$ctrl.store.miniQuote.priceDigit"> </div> </div> </div> <div id=change-description class="dgw-container flex-container"> <div class="flex-grow-1 flex-container flex-end"> High <span id=high-value class=value highlight-cell value=$ctrl.store.miniQuote.high ng-class="$ctrl.colorService.priceColor($ctrl.store.miniQuote.high, $ctrl.store.miniQuote.previousClose, $ctrl.store.miniQuote.totalVolume)" ng-bind="$ctrl.store.miniQuote.high | price: $ctrl.store.miniQuote.priceDigit"> </span> </div> <div class="flex-grow-1 align-right component-seperator-left"> <div ng-class=$ctrl.colorService.getChangeColor($ctrl.store.miniQuote)> <span id=change-value> {{$ctrl.store.miniQuote.change | nullableChange: $ctrl.store.miniQuote.priceDigit:$ctrl.store.miniQuote.previousClose:$ctrl.store.miniQuote.lastDone}} {{$ctrl.store.miniQuote.percentChange | nullablePercentChangeWithParenthesis: $ctrl.store.miniQuote.priceDigit:$ctrl.store.miniQuote.previousClose:$ctrl.store.miniQuote.lastDone}} </span> </div> <div> Low <span id=low-value highlight-cell value=$ctrl.overview.low ng-class="$ctrl.colorService.priceColor($ctrl.store.miniQuote.low, $ctrl.store.miniQuote.previousClose, $ctrl.store.miniQuote.totalVolume)" ng-bind="$ctrl.store.miniQuote.low | price: $ctrl.store.miniQuote.priceDigit"> </span> </div> </div> </div> <div class=col-52> <div id=volume class=price-volume-container> <label>Volume</label> <smart-volume-input id=dgw-place-order-volume name=dgw-place-order-volume placeholder=Volume input-volume=$ctrl.store.volume is-disabled=false market-type=E is-enable-volume-from-port=true current-symbol=$ctrl.store.symbol current-account=$ctrl.store.currentAccount is-nvdr=$ctrl.orderProcessor.isNvdr next-focus-elements=$ctrl.volumeInputNextFocusElements> </smart-volume-input> </div> <div id=price class="price-volume-container align-right"> <label>Price</label> <smart-price-input id=dgw-place-order-price name=dgw-place-order-price price-digit=2 input-price=$ctrl.store.price placeholder=Price is-disabled=!$ctrl.store.isLimit side=$ctrl.store.side stock-data=$ctrl.instrumentStaticData on-input-price-type-shortcut=$ctrl.onInputPriceTypeShortcut(priceType) price-type-shortcut-mapping=$ctrl.priceTypeShortcutMapping> </smart-price-input> </div> </div> <div class="dgw-container col-52"> <div class="limit toggle-button"> <button type=button class=limit id=limit-button ng-class="{ \'active\': $ctrl.store.isLimit }" ng-click="$ctrl.onClickPriceType(\'L\')"> Limit </button> <button type=button class=mp-mtl id=mp-mtl-button ng-class="{ \'active\': !$ctrl.store.isLimit }" ng-click="$ctrl.onClickPriceType(\'M\')"> MP-MTL </button> </div> </div> </div> <div class=dgw-column id=conditions-and-control> <div class=conditions ng-class="{\'trailing\': !$ctrl.store.isStopOrder || $ctrl.store.conditions.length == 1 }"> <div class=condition-item ng-if=$ctrl.store.isStopOrder ng-repeat="condition in $ctrl.store.conditions track by $index"> <header>Condition {{ $index + 1 }}</header> <div> <label for="dgw-condition-{{ $index + 1 }}">Symbol</label> <dgw-condition-quote-symbol-input allow-index-list=$ctrl.allowIndexListforConditionSymbol edit-on-click=true placeholder=Symbol init-symbol=condition.triggerSymbol id="dgw-condition-{{ $index + 1 }}" on-validated-symbol=condition.setTriggerSymbol(instrument)> </dgw-condition-quote-symbol-input> <label for="condition-{{ $index + 1 }}">Condition</label> <index-dropdown dropdown-name="condition-{{ $index + 1 }}" id="condition-{{ $index + 1 }}" key-name=name model="condition.isIndex() ? $ctrl.store.stopOrderIndexTriggerConditionList : $ctrl.store.stopOrderSymbolTriggerConditionList" selected=condition.triggerCondition ng-disabled="condition.triggerSymbol === \'\'"> </index-dropdown> </div> <div> <label for="price-{{ $index + 1 }}">Price</label> <index-dropdown id="price-{{ $index + 1 }}" dropdown-name="price-{{ $index + 1 }}" key-name=name model=$ctrl.store.stopOrderTriggerPriceTypeList selected=condition.triggerPriceType on-update=condition.resetTriggerPrice()> </index-dropdown> <price-input id="price-condition-{{ $index + 1 }}" price-digit=2 price=condition.triggerPrice placeholder="{{ condition.triggerPricePlaceholder }}" can-negative="condition.triggerPriceType.name.toLowerCase().indexOf(\'percentage\') >= 0" is-disabled=condition.isPriorPrice()> </price-input> </div> <button id="close-condition-button-{{ $index + 1 }}" type=button ng-if="$ctrl.store.conditions.length > 1" ng-click=$ctrl.store.onClickRemoveConditionAtIndex($index)> <i class="fa fa-times" aria-hidden=true></i> </button> </div> <button type=button class=action id=add-condition-button ng-if=$ctrl.isShowAddConditionButton() ng-click=$ctrl.store.onClickAddConditionButton()> Add Condition </button> <div class="trailing condition-item" id=trailing-condition ng-if=!$ctrl.store.isStopOrder ng-repeat="condition in $ctrl.store.conditions track by $index"> <div> <label for="dgw-trailing-condition-{{ $index + 1 }}">Trigger Cond.</label> <index-dropdown dropdown-name="dgw-trailing-condition-{{ $index + 1 }}" id="dgw-trailing-condition-{{ $index + 1 }}" class=condition key-name=name model=$ctrl.trailingStopTriggerConditionList selected=condition.triggerCondition> </index-dropdown> </div> <div> <label for="dgw-trailing-price-type-{{ $index + 1 }}">Trigger Price</label> <index-dropdown dropdown-name="dgw-trailing-price-type-{{ $index + 1 }}" id="dgw-trailing-price-type-{{ $index + 1 }}" class=price-type key-name=name model=$ctrl.store.trailingStopTriggerPriceTypeList selected=condition.triggerPriceType on-update=condition.resetTriggerPrice()> </index-dropdown> <price-input id="dgw-trailing-price-{{ $index + 1 }}" price-digit="condition.triggerPriceType.name === \'Spread\' ? 0: 2" price=condition.triggerPrice placeholder="{{ condition.triggerPricePlaceholder }}" can-negative=false is-disabled="condition.triggerPriceType.name === \'\'"> </price-input> </div> </div> </div> <div class=control ng-class="{\'trailing\': !$ctrl.store.isStopOrder || $ctrl.store.conditions.length == 1}"> <div ng-if="$ctrl.store.isStopOrder && $ctrl.store.conditions.length > 1"> <label for=condition-operator-dropdown class=col-20>Condition Operator</label> <index-dropdown id=condition-operator-dropdown dropdown-name=condition-operator key-name=name model=$ctrl.conditionOperation.conditionOperationList selected=$ctrl.store.selectedConditionOperation on-selected=""> </index-dropdown> </div> <div> <span class=col-20> <label class=col-9 for=valid-till-dropdown>Valid Till</label> <index-dropdown id=valid-till-dropdown dropdown-name=valid-till key-name=name model=$ctrl.store.conditionOperation.validTillList selected=$ctrl.store.selectedValidTillType on-selected=$ctrl.validTillTypeChange(model)> </index-dropdown> </span> <div class="col-19 valid-till-condition"> <index-dropdown id=empty-dropdown ng-if="$ctrl.store.selectedValidTillType.name != \'Day\' &&\n                           $ctrl.store.selectedValidTillType.name != \'Date\' &&\n                           $ctrl.store.selectedValidTillType.name != \'Session\'" disabled=disabled> </index-dropdown> <input id=empty-input class=empty-input type=text ng-if="$ctrl.store.selectedValidTillType.name == \'Day\'" disabled=disabled /> <date-input id=date-input-calendar ng-if="$ctrl.store.selectedValidTillType.name == \'Date\'" date=$ctrl.store.validTillDate is-open=$ctrl.datePickerConfig.open show-button-bar=$ctrl.datePickerConfig.showButtonBar popup-placement={{$ctrl.datePickerConfig.popupPlacement}} datepicker-options=$ctrl.datePickerConfig.datepickerOptions append-to-body=$ctrl.datePickerConfig.appendToBody placeholder=dd/MM/yyyy open-calendar="$ctrl.openCalendar($event, \'datePickerConfig\')" next-focus-elements=$ctrl.dateInputNextFocusElements> </date-input> <index-dropdown id=valid-till-condition-dropdown ng-if="$ctrl.store.selectedValidTillType.name == \'Session\'" dropdown-name=valid-till-condition key-name=name model=$ctrl.store.conditionOperation.validTillSessionList selected=$ctrl.store.selectedValidTillSession on-selected=""> </index-dropdown> </div> <label for=pin> PIN </label> <pin-input pin=$ctrl.store.pin placeholder=PIN id=dgw-conditional-order-pin is-show-save-pin=true> </pin-input> </div> <div> <span class=col-20></span> <button type=button class=action ng-class="{\n                    \'buy\': $ctrl.store.side.isBuy(),\n                    \'sell\': $ctrl.store.side.isSell()\n                }" id=submit-button ng-click=$ctrl.onClickConditionDGWPlaceOrder() ng-disabled=!$ctrl.enabledSubmitButton> Submit </button> <button type=button class=action id=clear-button ng-click=$ctrl.onClickClearAll()> Clear All </button> </div> </div> </div>'},/*!*********************************************!*\
  !*** ./html/investor-now/investor-now.html ***!
  \*********************************************/
function(e,t){e.exports='<iframe name=frame id=investorNowIframe class="" style=width:100%;height:100%;border:0></iframe>'},/*!****************************************!*\
  !*** ./html/logout/logout-button.html ***!
  \****************************************/
function(e,t){e.exports='<div class="col-5 row-4" ng-click=$ctrl.logout() title=Logout> <i class="logout-icon mdi mdi-power"></i> <div class=logout-label>Logout</div> </div>'},/*!********************************************************!*\
  !*** ./html/customized-dbsv/mini-quote-brain-box.html ***!
  \********************************************************/
function(e,t){e.exports='<div class="technical-insight col-19" ng-click=$ctrl.onClickTechnicalInsight()> <ul class="left-box col-8"> <li class="bullish-label row-3">Bullish</li> <li class="bullish-count row-3" ng-class=$ctrl.technicalInsightView.bullishCountColor>{{$ctrl.technicalInsightView.bullishCount}}</li> <li class="bearish-label row-3">Bearish</li> <li class="bearish-count row-3" ng-class=$ctrl.technicalInsightView.bearishCountColor>{{$ctrl.technicalInsightView.bearishCount}}</li> </ul> <ul class="right-box row-13 col-10"> <li class=title>Technical Insight</li> <li class="chart row-10"></li> </ul> </div> <div class="value-analyzer col-22" ng-click=$ctrl.onClickValueAnalyzer()> <ul class="left-box row-13 col-11"> <li class=title>Value Analyzer</li> <li class="chart row-10"></li> </ul> <ul class=right-box> <li class=dynamic-text ng-class=$ctrl.valueAnalyzerView.valueColor>{{$ctrl.valueAnalyzerView.valueDescription}}</li> <li class="color-dot row-3" ng-class=$ctrl.valueAnalyzerView.valueColor><i class="mdi mdi-checkbox-blank-circle"></i></li> <li class=ror-label>Rate of Return</li> <li class="ror-value row-3" ng-class=$ctrl.valueAnalyzerView.rateOfReturnColor.cssClass>{{$ctrl.valueAnalyzerView.rateOfReturn}}</li> <li></li> </ul> </div>'},/*!*****************************************!*\
  !*** ./html/sso-tns/tns-tradecode.html ***!
  \*****************************************/
function(e,t){e.exports=' <iframe name=frame class="" style=overflow:hidden;height:100%;width:100%;border:0 height=99% width=100%></iframe>'},/*!**************************************************!*\
  !*** ./html/mai-snapshot/mai-snapshot-page.html ***!
  \**************************************************/
function(e,t){e.exports='<iframe name=frame id=maiIframe class="" style=overflow:hidden;width:100%;height:99%;border:0></iframe>'},/*!*************************************!*\
  !*** ./html/application-index.html ***!
  \*************************************/
function(e,t){e.exports='<div class="fullscreen text-default"> <ul name={{$ctrl.getCurrentDisplayPage()}}> <li widget-factory class="row-4 col-160 top-1 visible" id=menu> <div class=col-5> <div class=logo></div> </div> <menu-renderer> </menu-renderer> <div class=top-right-wrapper> <div class="col-4 second-window" ng-if=$ctrl.isMarketrepUser()> <second-screen-button></second-screen-button> </div> <div class="col-5 inbox" ng-if=!$ctrl.isOnSecondaryWindow()> <notification-inbox></notification-inbox> </div> <div class="col-5 feedback"> <feedback></feedback> </div> <div class="col-5 logout"> <logout-button></logout-button> </div> <div class="col-22 clock"> <time></time> </div> <div class="col-1 status-light"> <push-status></push-status> </div> </div> </li> <li widget-factory class="row-5 col-160 top-5 visible"> <market-summary class=bg-market-summary></market-summary> </li> <streaming></streaming> <li widget-factory name=main-order-area ng-if=$ctrl.isApplicationInitializedComplete ng-class=$ctrl.getWidgetClass() stt-show=$ctrl.isShowPlaceOrder() class="col-160 not-scroll"> <order ng-show=!$ctrl.isShowMultiOrder()></order> <multi-order ng-if=$ctrl.isShowMultiOrder() toggle-multi-order=$ctrl.toggleMultiOrder() page={{::$ctrl.PAGE_MULTIORDER}}></multi-order> </li> </ul> <notification-box></notification-box> </div>'}]);
//# sourceMappingURL=mi6.7c233c4170fb1e6b837f.min.js.map